Start time: 19:12
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/attr_sel_1_500_random.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
K: 100
nprobe: 100
collection name: collection_redcaps1m_sel_1_500_random_512
collection  collection_redcaps1m_sel_1_500_random_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  988027  postive res from  1000000  results, recall@ 100 : 0.988027
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 0.000e+00 0.000e+00 1.000e-04 2.000e-04 4.000e-04
 1.300e-03 9.600e-03 6.008e-01 3.876e-01]
10000  queries cost: 175.2823600769043 , qps: 57.050806456579814
	Command being timed: "python -u utils/pymilvus_ivfpq.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json 100 100 collection_redcaps1m_sel_1_500_random_512 query 512 512"
	User time (seconds): 100.03
	System time (seconds): 5.00
	Percent of CPU this job got: 41%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:10.35
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 150168
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 92221
	Voluntary context switches: 25780
	Involuntary context switches: 585460
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:28
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/attr_sel_1_500_random.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
K: 100
nprobe: 100
collection name: collection_redcaps1m_sel_1_500_random_512
collection  collection_redcaps1m_sel_1_500_random_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  969528  postive res from  1000000  results, recall@ 100 : 0.969528
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 0.000e+00 0.000e+00 1.000e-04 1.000e-03 5.000e-03
 1.340e-02 5.750e-02 6.355e-01 2.875e-01]
10000  queries cost: 127.85368132591248 , qps: 78.21440803498609
	Command being timed: "python -u utils/pymilvus_ivfpq.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json 100 100 collection_redcaps1m_sel_1_500_random_512 query 512 512"
	User time (seconds): 101.59
	System time (seconds): 5.50
	Percent of CPU this job got: 51%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:27.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 151832
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 95658
	Voluntary context switches: 24874
	Involuntary context switches: 957652
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:39
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/attr_sel_1_500_random.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
K: 100
nprobe: 100
collection name: collection_redcaps1m_sel_1_500_random_512
collection  collection_redcaps1m_sel_1_500_random_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
error, get  99  results, expect  100
res: data: ["[{'id': 50900, 'distance': 0.7821385860443115, 'entity': {}}, {'id': 684060, 'distance': 0.9798856973648071, 'entity': {}}, {'id': 994948, 'distance': 0.9938129782676697, 'entity': {}}, {'id': 902244, 'distance': 0.9964919090270996, 'entity': {}}, {'id': 249013, 'distance': 1.018281102180481, 'entity': {}}, {'id': 390192, 'distance': 1.043083667755127, 'entity': {}}, {'id': 489022, 'distance': 1.0458630323410034, 'entity': {}}, {'id': 284580, 'distance': 1.047503113746643, 'entity': {}}, {'id': 455337, 'distance': 1.0547844171524048, 'entity': {}}, {'id': 461912, 'distance': 1.0597652196884155, 'entity': {}}, {'id': 258069, 'distance': 1.0604288578033447, 'entity': {}}, {'id': 678536, 'distance': 1.0635985136032104, 'entity': {}}, {'id': 863752, 'distance': 1.0677196979522705, 'entity': {}}, {'id': 259610, 'distance': 1.070006251335144, 'entity': {}}, {'id': 664277, 'distance': 1.0700793266296387, 'entity': {}}, {'id': 820902, 'distance': 1.0702663660049438, 'entity': {}}, {'id': 13085, 'distance': 1.0830259323120117, 'entity': {}}, {'id': 904002, 'distance': 1.0927287340164185, 'entity': {}}, {'id': 366907, 'distance': 1.0938494205474854, 'entity': {}}, {'id': 290593, 'distance': 1.0939884185791016, 'entity': {}}, {'id': 442973, 'distance': 1.0947835445404053, 'entity': {}}, {'id': 921346, 'distance': 1.0956541299819946, 'entity': {}}, {'id': 709564, 'distance': 1.102957010269165, 'entity': {}}, {'id': 827767, 'distance': 1.1104377508163452, 'entity': {}}, {'id': 272798, 'distance': 1.1106618642807007, 'entity': {}}, {'id': 267715, 'distance': 1.1169731616973877, 'entity': {}}, {'id': 191993, 'distance': 1.1202341318130493, 'entity': {}}, {'id': 593389, 'distance': 1.1234954595565796, 'entity': {}}, {'id': 160268, 'distance': 1.1236087083816528, 'entity': {}}, {'id': 977284, 'distance': 1.1254388093948364, 'entity': {}}, {'id': 217470, 'distance': 1.1261184215545654, 'entity': {}}, {'id': 829814, 'distance': 1.1263364553451538, 'entity': {}}, {'id': 411719, 'distance': 1.1316754817962646, 'entity': {}}, {'id': 855870, 'distance': 1.133732795715332, 'entity': {}}, {'id': 160446, 'distance': 1.142462134361267, 'entity': {}}, {'id': 567836, 'distance': 1.1433258056640625, 'entity': {}}, {'id': 476493, 'distance': 1.144590973854065, 'entity': {}}, {'id': 160156, 'distance': 1.1446233987808228, 'entity': {}}, {'id': 621854, 'distance': 1.1457841396331787, 'entity': {}}, {'id': 472013, 'distance': 1.1471091508865356, 'entity': {}}, {'id': 414257, 'distance': 1.1523364782333374, 'entity': {}}, {'id': 19421, 'distance': 1.1547867059707642, 'entity': {}}, {'id': 845713, 'distance': 1.1616160869598389, 'entity': {}}, {'id': 940408, 'distance': 1.1617090702056885, 'entity': {}}, {'id': 620659, 'distance': 1.164057970046997, 'entity': {}}, {'id': 86475, 'distance': 1.1679695844650269, 'entity': {}}, {'id': 135782, 'distance': 1.1686573028564453, 'entity': {}}, {'id': 804694, 'distance': 1.1700890064239502, 'entity': {}}, {'id': 146708, 'distance': 1.171741008758545, 'entity': {}}, {'id': 132278, 'distance': 1.1731855869293213, 'entity': {}}, {'id': 573392, 'distance': 1.1747450828552246, 'entity': {}}, {'id': 138812, 'distance': 1.1753445863723755, 'entity': {}}, {'id': 792376, 'distance': 1.1873724460601807, 'entity': {}}, {'id': 308500, 'distance': 1.1912318468093872, 'entity': {}}, {'id': 695873, 'distance': 1.1924148797988892, 'entity': {}}, {'id': 178877, 'distance': 1.2011103630065918, 'entity': {}}, {'id': 623091, 'distance': 1.2013005018234253, 'entity': {}}, {'id': 741238, 'distance': 1.2030538320541382, 'entity': {}}, {'id': 849699, 'distance': 1.2036540508270264, 'entity': {}}, {'id': 894016, 'distance': 1.204286813735962, 'entity': {}}, {'id': 741717, 'distance': 1.206472396850586, 'entity': {}}, {'id': 880402, 'distance': 1.21184504032135, 'entity': {}}, {'id': 24818, 'distance': 1.2135587930679321, 'entity': {}}, {'id': 827726, 'distance': 1.2136536836624146, 'entity': {}}, {'id': 294318, 'distance': 1.2141672372817993, 'entity': {}}, {'id': 70197, 'distance': 1.2193244695663452, 'entity': {}}, {'id': 332414, 'distance': 1.2215042114257812, 'entity': {}}, {'id': 2129, 'distance': 1.2243130207061768, 'entity': {}}, {'id': 172412, 'distance': 1.2243967056274414, 'entity': {}}, {'id': 16275, 'distance': 1.2269045114517212, 'entity': {}}, {'id': 974813, 'distance': 1.2286996841430664, 'entity': {}}, {'id': 119430, 'distance': 1.2307180166244507, 'entity': {}}, {'id': 661987, 'distance': 1.230979084968567, 'entity': {}}, {'id': 639106, 'distance': 1.2409212589263916, 'entity': {}}, {'id': 696043, 'distance': 1.2443187236785889, 'entity': {}}, {'id': 695348, 'distance': 1.248339056968689, 'entity': {}}, {'id': 176784, 'distance': 1.253015398979187, 'entity': {}}, {'id': 969537, 'distance': 1.2541508674621582, 'entity': {}}, {'id': 405016, 'distance': 1.2592179775238037, 'entity': {}}, {'id': 275209, 'distance': 1.2593859434127808, 'entity': {}}, {'id': 101813, 'distance': 1.273474931716919, 'entity': {}}, {'id': 939682, 'distance': 1.2840923070907593, 'entity': {}}, {'id': 432793, 'distance': 1.2864662408828735, 'entity': {}}, {'id': 547219, 'distance': 1.2873008251190186, 'entity': {}}, {'id': 444661, 'distance': 1.2881214618682861, 'entity': {}}, {'id': 323268, 'distance': 1.3018913269042969, 'entity': {}}, {'id': 298670, 'distance': 1.3032697439193726, 'entity': {}}, {'id': 135321, 'distance': 1.3041889667510986, 'entity': {}}, {'id': 477606, 'distance': 1.3084789514541626, 'entity': {}}, {'id': 404701, 'distance': 1.3188862800598145, 'entity': {}}, {'id': 290575, 'distance': 1.322204351425171, 'entity': {}}, {'id': 833947, 'distance': 1.3398038148880005, 'entity': {}}, {'id': 238007, 'distance': 1.3483531475067139, 'entity': {}}, {'id': 36609, 'distance': 1.3493393659591675, 'entity': {}}, {'id': 362544, 'distance': 1.3645012378692627, 'entity': {}}, {'id': 442170, 'distance': 1.3885843753814697, 'entity': {}}, {'id': 689764, 'distance': 1.4044945240020752, 'entity': {}}, {'id': 159208, 'distance': 1.4361059665679932, 'entity': {}}, {'id': 751166, 'distance': 1.4759457111358643, 'entity': {}}]"]
exp: 20 <= label <= 20
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 246, in <module>
    if(ids[i][top] == gt[i][gtind]):
IndexError: list index out of range
Command exited with non-zero status 1
	Command being timed: "python -u utils/pymilvus_ivfpq.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json 100 100 collection_redcaps1m_sel_1_500_random_512 query 512 512"
	User time (seconds): 3.63
	System time (seconds): 3.46
	Percent of CPU this job got: 929%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 150456
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 39031
	Voluntary context switches: 481
	Involuntary context switches: 762883
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 1
