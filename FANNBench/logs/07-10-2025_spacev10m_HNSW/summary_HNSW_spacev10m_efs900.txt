Start time: 19:31
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 900
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.707s ] Loaded metadata, 10000000 attr's found
[ 0.707s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.710s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.711s ] Loaded 10000 spacev10m queries
[ 0.780s ] Loaded ground truth, gt_size: 100
[ 0.780s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.637s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 177.763s ] Query results (vector ids, then distances):
query 0 nn's (40616, 90615): 1352077 (75218) 1300400 (68247) 525784 (86118) 606211 (46345) 1781760 (80354) 7509422 (86182) 8021837 (54227) 290760 (73276) 6583311 (47922) 1714233 (65633) 6313468 (56256) 9148464 (61499) 1536208 (61981) 1200517 (72426) 3082748 (43400) 38473 (46733) 5072935 (77579) 2382485 (52524) 4779084 (83453) 8997960 (41694) 3881211 (73037) 8807530 (78073) 4617714 (57477) 8538301 (43948) 4279856 (62524) 3873794 (79667) 7007393 (50612) 2037978 (67204) 613770 (82162) 6547416 (46965) 7305168 (83078) 1751249 (61683) 9107614 (86696) 2433318 (41182) 244510 (41564) 1947555 (46272) 2772718 (56124) 511283 (44517) 7922669 (47051) 8242233 (84764) 4254134 (79349) 1858226 (61086) 9818783 (60214) 7249395 (83840) 5004916 (68288) 8135809 (69250) 8846971 (82553) 9600306 (74480) 3828638 (68559) 4943689 (61655) 4287666 (67511) 4066846 (76054) 4470364 (85079) 4932580 (43903) 5950387 (51620) 6240106 (75699) 2807977 (72542) 5382515 (90556) 7983463 (70761) 9957153 (61862) 1150402 (86661) 5236967 (71585) 6616924 (53611) 3249603 (76576) 8097566 (64961) 4519081 (86868) 9169598 (42707) 4697056 (79566) 8348201 (69358) 7322085 (68787) 1060668 (58280) 8279789 (85969) 7115332 (67947) 8849839 (86592) 1168348 (90414) 5320284 (64167) 3611695 (77838) 4715886 (84573) 5594224 (79134) 3636367 (55940) 488103 (55813) 8066928 (80642) 6303532 (42119) 1666 (84797) 5997165 (83594) 8725926 (63035) 8563527 (86841) 7887947 (85619) 399999 (85354) 2578991 (84620) 2716677 (84500) 3371587 (42783) 4104937 (70750) 8341867 (72465) 5270820 (90509) 6554307 (84494) 5454 (50127) 726682 (61944) 694286 (59145) 1545295 (43724) 
     dis: 	3278.000 3455.000 5270.000 5333.000 5414.000 5894.000 6219.000 6292.000 6338.000 6491.000 6519.000 6557.000 6572.000 6580.000 6920.000 7027.000 7047.000 7066.000 7151.000 7191.000 7203.000 7452.000 7485.000 7544.000 7583.000 7677.000 7710.000 7721.000 7742.000 7882.000 7885.000 8031.000 8057.000 8146.000 8194.000 8354.000 8374.000 8387.000 8413.000 8423.000 8438.000 8454.000 8468.000 8470.000 8473.000 8500.000 8512.000 8512.000 8566.000 8567.000 8574.000 8613.000 8666.000 8669.000 8811.000 8824.000 8897.000 8901.000 8925.000 8948.000 9027.000 9055.000 9065.000 9092.000 9096.000 9117.000 9209.000 9224.000 9233.000 9307.000 9339.000 9340.000 9353.000 9369.000 9382.000 9411.000 9419.000 9464.000 9475.000 9476.000 9485.000 9521.000 9527.000 9532.000 9537.000 9552.000 9559.000 9589.000 9590.000 9607.000 9610.000 9623.000 9661.000 9671.000 9676.000 9686.000 9705.000 9715.000 9724.000 9767.000 
query 1 nn's (23827, 73826): 1027770 (59556) 3024255 (36040) 3545414 (44593) 6716785 (66378) 9408428 (33214) 6693881 (28141) 1087257 (62343) 3843020 (54844) 547651 (43364) 1739613 (53800) 6945939 (60753) 6631934 (28922) 2769394 (73340) 9149269 (64835) 8596579 (66499) 4208062 (72354) 913237 (31716) 128447 (33616) 2201796 (69121) 1286599 (26580) 3823789 (35801) 6202555 (55017) 6731249 (66690) 2342379 (62400) 4764135 (25237) 5312590 (40431) 9559160 (42483) 9844113 (25407) 2915146 (70367) 8084904 (26103) 1262717 (61544) 1641593 (25519) 9311189 (41791) 413466 (45386) 4023729 (64682) 7191660 (26554) 3467889 (58051) 5374088 (35711) 7995495 (54964) 4561316 (70089) 2483370 (43037) 2400979 (32818) 5427517 (49038) 9387768 (41292) 8382701 (59388) 5325898 (41793) 6371568 (69524) 8598995 (49827) 2054287 (52686) 8370535 (67881) 4375499 (45519) 5833204 (39001) 2677560 (29840) 8966861 (67736) 6528340 (69516) 7714223 (69827) 5559374 (57425) 5888778 (50046) 683232 (55159) 6154560 (61480) 6218290 (52949) 919217 (70266) 2077395 (51965) 9198072 (44678) 1259440 (29909) 7898285 (24857) 3302437 (52859) 6481742 (59098) 1580619 (31013) 5116926 (36041) 7983026 (33895) 1237024 (67297) 6783786 (43516) 7208440 (52535) 5054847 (35044) 540705 (69355) 5553093 (62435) 3695413 (45102) 4378014 (53168) 497310 (50087) 6716625 (33472) 7896078 (66668) 4936167 (43277) 6314594 (57421) 5894271 (30832) 9319596 (27166) 7869623 (52314) 4090413 (48833) 4414583 (48880) 6825634 (34589) 3940736 (39136) 9895581 (27864) 4952577 (25638) 8300390 (42797) 8219055 (62699) 1532818 (39179) 5616705 (26749) 9619526 (31001) 7684675 (55889) 2233630 (36122) 
     dis: 	4889.000 6351.000 7469.000 7593.000 8315.000 8318.000 8514.000 8685.000 8991.000 9038.000 9078.000 9175.000 9211.000 9226.000 9265.000 9276.000 9300.000 9379.000 9519.000 9607.000 9611.000 9662.000 9805.000 9833.000 9898.000 9904.000 9916.000 9916.000 10003.000 10035.000 10112.000 10134.000 10152.000 10186.000 10203.000 10220.000 10233.000 10239.000 10272.000 10291.000 10301.000 10345.000 10399.000 10421.000 10428.000 10446.000 10463.000 10521.000 10531.000 10647.000 10687.000 10692.000 10703.000 10710.000 10745.000 10769.000 10777.000 10848.000 10878.000 10895.000 10949.000 10965.000 10987.000 11021.000 11032.000 11038.000 11072.000 11103.000 11116.000 11128.000 11142.000 11152.000 11164.000 11171.000 11206.000 11207.000 11214.000 11227.000 11234.000 11246.000 11253.000 11295.000 11298.000 11300.000 11314.000 11316.000 11318.000 11373.000 11373.000 11414.000 11425.000 11426.000 11430.000 11437.000 11443.000 11452.000 11481.000 11483.000 11509.000 11516.000 
query 2 nn's (32197, 82196): 4574760 (37531) 5189301 (43405) 8005273 (37538) 4290437 (79182) 3524579 (49429) 8672246 (67919) 8167950 (64329) 4927764 (61896) 5932138 (71360) 8699363 (38066) 379589 (49013) 5193386 (58419) 5236859 (46044) 6524215 (40939) 1951033 (35999) 9602743 (57407) 9746650 (51834) 2493779 (47308) 4710102 (57576) 525365 (72247) 9964310 (34221) 255402 (44796) 9561351 (80565) 6606573 (43048) 5423341 (53232) 6688464 (74420) 7023011 (48764) 190238 (43187) 2961580 (56149) 1881509 (33275) 1415377 (64630) 9485250 (57717) 725252 (39756) 4649174 (49341) 6555137 (44687) 1425558 (59965) 323907 (52531) 6525090 (79383) 6212714 (75619) 8077765 (45491) 8971627 (61869) 7670329 (41226) 3361974 (50158) 559883 (76998) 1563468 (78550) 8447564 (49053) 6028399 (48545) 7501806 (48981) 4808419 (69389) 5745884 (80255) 9339955 (81335) 3890438 (64578) 4452321 (69823) 1639494 (63732) 4195631 (70514) 3521500 (32806) 6697500 (64883) 6915696 (72395) 7815621 (68731) 4360960 (42414) 8778642 (49223) 8558486 (51639) 1063314 (41819) 6648184 (54160) 7126935 (58871) 6672275 (66753) 2589993 (76134) 2557172 (56410) 2940185 (68340) 9743895 (77420) 4916763 (73819) 8590703 (51244) 2310638 (62621) 2655117 (60703) 3995931 (55015) 1585247 (63340) 6451690 (52651) 6373557 (58681) 7660022 (51133) 3200028 (79067) 2153650 (81348) 8517921 (54220) 3399987 (80703) 5263567 (72349) 9416901 (81712) 2447894 (72829) 1789234 (43215) 8411645 (75386) 7287401 (71226) 2567980 (43350) 1319808 (41248) 6665934 (70307) 671577 (71564) 7037734 (33584) 2604663 (35177) 894483 (42165) 1386408 (47799) 5516324 (34857) 7215858 (64367) 5771135 (63649) 
     dis: 	3034.000 3368.000 3855.000 4555.000 5017.000 6310.000 6379.000 6596.000 6968.000 7268.000 7277.000 7399.000 7538.000 7648.000 7936.000 8053.000 8065.000 8073.000 8124.000 8271.000 8304.000 8306.000 8326.000 8470.000 8500.000 8666.000 8743.000 8749.000 8750.000 8765.000 8867.000 8960.000 8991.000 9002.000 9087.000 9126.000 9129.000 9130.000 9143.000 9162.000 9180.000 9186.000 9257.000 9320.000 9459.000 9552.000 9559.000 9666.000 9686.000 9713.000 9724.000 9775.000 9832.000 9845.000 9857.000 9861.000 9895.000 9897.000 9903.000 9926.000 9946.000 9953.000 9975.000 9989.000 10002.000 10007.000 10035.000 10077.000 10105.000 10145.000 10194.000 10197.000 10241.000 10248.000 10255.000 10259.000 10268.000 10278.000 10278.000 10284.000 10295.000 10307.000 10313.000 10335.000 10368.000 10387.000 10395.000 10401.000 10412.000 10427.000 10438.000 10450.000 10518.000 10673.000 10682.000 10690.000 10729.000 10733.000 10735.000 10762.000 
query 3 nn's (10631, 60630): 4286832 (17230) 1208824 (37041) 1165548 (45426) 1681561 (52434) 9732223 (41833) 7020630 (23256) 7375372 (33987) 7371232 (47114) 8694166 (43201) 1717763 (23291) 7664306 (35020) 2187959 (22411) 4153275 (14312) 391722 (24862) 8364431 (51130) 6027466 (55631) 3188407 (24304) 2272653 (58471) 4559449 (12184) 2360519 (38478) 1252765 (47853) 4889443 (35759) 8232477 (31632) 6542977 (17108) 1074776 (60559) 9157428 (59550) 1212415 (15580) 4251611 (29775) 9100185 (14479) 9232458 (44812) 9775342 (51527) 6447414 (38986) 9892318 (23797) 8741259 (38437) 5621855 (30749) 7623822 (13051) 580826 (39121) 9591320 (41043) 4216882 (16451) 2595121 (49087) 7010095 (49936) 4298667 (37216) 514827 (17573) 3626273 (24674) 8559924 (36620) 920948 (51396) 5683960 (39084) 7435385 (25937) 6546803 (58575) 8821621 (32963) 9987911 (54998) 5563393 (26978) 5962673 (33507) 2029271 (55651) 7010252 (18474) 6703969 (32159) 5124721 (15599) 2851767 (31496) 5566014 (48193) 9444180 (43915) 786015 (34456) 398589 (20960) 6654687 (18185) 5687185 (12097) 3425624 (56969) 2019638 (38147) 5677498 (44480) 5676630 (15975) 3378586 (41526) 6835770 (35415) 9740574 (40063) 4183705 (37136) 1605226 (42484) 9335946 (29064) 2182004 (53782) 7256503 (33019) 6424074 (11699) 8427899 (40275) 7110321 (51796) 3517824 (30137) 9760951 (35714) 4316644 (36244) 2824029 (57859) 8669768 (45048) 2343424 (17819) 108033 (50132) 2348869 (59503) 5176976 (57430) 2838160 (25464) 8860902 (45806) 3172637 (27093) 264481 (34023) 188678 (31172) 3431426 (19293) 9754021 (56599) 3350710 (56592) 3071605 (13149) 9339392 (47904) 6492666 (13880) 9469428 (55808) 
     dis: 	4960.000 7689.000 7871.000 8422.000 8881.000 8902.000 9144.000 9274.000 9661.000 9696.000 9757.000 9826.000 9892.000 9931.000 9931.000 9955.000 9960.000 9972.000 10145.000 10155.000 10193.000 10268.000 10280.000 10381.000 10416.000 10421.000 10424.000 10455.000 10473.000 10481.000 10505.000 10517.000 10541.000 10602.000 10647.000 10659.000 10694.000 10711.000 10754.000 10786.000 10809.000 10816.000 10821.000 10834.000 10835.000 10894.000 10999.000 11029.000 11041.000 11074.000 11115.000 11117.000 11141.000 11152.000 11153.000 11156.000 11159.000 11197.000 11218.000 11225.000 11236.000 11259.000 11270.000 11303.000 11315.000 11336.000 11379.000 11381.000 11389.000 11392.000 11405.000 11417.000 11449.000 11451.000 11486.000 11498.000 11499.000 11508.000 11525.000 11535.000 11544.000 11589.000 11604.000 11610.000 11625.000 11641.000 11642.000 11642.000 11656.000 11708.000 11717.000 11720.000 11745.000 11745.000 11766.000 11778.000 11782.000 11827.000 11845.000 11845.000 
query 4 nn's (49705, 99704): 3987492 (98027) 3107282 (67009) 5744224 (51156) 9211260 (81222) 7373067 (53855) 6872756 (95706) 6279473 (68764) 9788862 (69419) 4015525 (99118) 73290 (81611) 9578545 (82305) 6095172 (66470) 9652129 (94239) 3526517 (65512) 2038833 (53914) 1587943 (87738) 2320125 (78596) 9044829 (55243) 6782257 (61394) 9193832 (94777) 2279438 (92240) 57144 (85498) 6906799 (74949) 1906000 (75700) 5562283 (85264) 9801790 (96454) 4738992 (53601) 1994085 (74290) 6934935 (62103) 915880 (92907) 6557844 (93558) 6001275 (76022) 3073679 (52005) 2986049 (87137) 1384227 (67752) 9765986 (76606) 523134 (52660) 3598596 (93600) 1846444 (69689) 6581013 (70513) 1546917 (87929) 9240243 (51536) 8442744 (81630) 7511825 (79032) 8774147 (59338) 6614912 (53050) 6789739 (61948) 4942478 (95232) 3192757 (54312) 7814617 (76949) 2795570 (51868) 8572491 (87817) 1444782 (58902) 5685630 (55650) 8359241 (79071) 349859 (89590) 6836665 (78385) 5506147 (91849) 980351 (73539) 1066421 (76598) 9438625 (65756) 6685392 (77959) 1930013 (94515) 9832113 (87811) 259750 (70161) 1995354 (73102) 5323762 (65230) 8360636 (71934) 703166 (92189) 4637157 (81613) 3032989 (71909) 4491189 (76562) 8627902 (60097) 8641215 (59349) 6112551 (79061) 9977617 (53087) 3506156 (72099) 3934821 (77812) 2266290 (57733) 1973506 (83520) 2337939 (52530) 9639256 (70554) 9407510 (57340) 3299088 (88192) 1111927 (56218) 5350870 (81572) 1071436 (56465) 569140 (91553) 1306176 (75097) 1344371 (93640) 9614577 (73130) 2473330 (71722) 2699285 (75510) 1875114 (95741) 9600067 (97955) 7146236 (94013) 4175678 (79223) 7637276 (80931) 3792530 (68743) 6297263 (78517) 
     dis: 	3787.000 5291.000 5418.000 5775.000 5809.000 5915.000 6062.000 6170.000 6212.000 6268.000 6269.000 6291.000 6291.000 6305.000 6330.000 6386.000 6403.000 6416.000 6419.000 6455.000 6457.000 6473.000 6504.000 6508.000 6518.000 6521.000 6540.000 6547.000 6557.000 6559.000 6568.000 6630.000 6653.000 6672.000 6682.000 6698.000 6702.000 6712.000 6718.000 6731.000 6760.000 6766.000 6770.000 6778.000 6791.000 6796.000 6812.000 6814.000 6817.000 6818.000 6828.000 6834.000 6837.000 6845.000 6856.000 6868.000 6874.000 6880.000 6888.000 6888.000 6888.000 6890.000 6895.000 6896.000 6906.000 6913.000 6924.000 6942.000 6947.000 6948.000 6971.000 6996.000 7009.000 7009.000 7016.000 7017.000 7020.000 7024.000 7028.000 7034.000 7039.000 7049.000 7052.000 7053.000 7067.000 7078.000 7080.000 7090.000 7092.000 7112.000 7115.000 7116.000 7130.000 7134.000 7136.000 7139.000 7150.000 7151.000 7157.000 7157.000 
[ 177.764s ] *** Query time: 102.782
qps: 97.293
 *** HNSW recall 
HNSW get 987903 postive res from 1000000 results, recall@100:0.988
recall dist(10% per bucket): 0.001 0.001 0.000 0.000 0.000 0.000 0.001 0.002 0.012 0.264 0.717 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 554281207, average: 55428.121
finished ivfpq index examples
[ 177.795s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 900 100"
	User time (seconds): 158.36
	System time (seconds): 10.43
	Percent of CPU this job got: 94%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:58.37
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7281572
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2720837
	Voluntary context switches: 25515
	Involuntary context switches: 295
	Swaps: 0
	File system inputs: 568536
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 20:47
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 900
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.719s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.721s ] Loaded 10000 spacev10m queries
[ 0.789s ] Loaded ground truth, gt_size: 100
[ 0.789s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.664s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 174.551s ] Query results (vector ids, then distances):
query 0 nn's (40856, 50855): 606211 (46345) 6583311 (47922) 3082748 (43400) 38473 (46733) 8997960 (41694) 8538301 (43948) 7007393 (50612) 6547416 (46965) 2433318 (41182) 244510 (41564) 1947555 (46272) 511283 (44517) 7922669 (47051) 4932580 (43903) 9169598 (42707) 6303532 (42119) 3371587 (42783) 5454 (50127) 1545295 (43724) 9576118 (47855) 9497103 (46331) 74334 (45086) 2029623 (45395) 347710 (45599) 7811790 (50102) 2632800 (41462) 1288571 (45088) 100232 (45360) 3178566 (41164) 9512027 (44058) 2018268 (46504) 3815686 (47763) 7703225 (42332) 6612942 (41425) 4359261 (48997) 4414009 (50233) 5661320 (49047) 7193350 (49988) 4029747 (43158) 2893898 (49102) 9284314 (44763) 6549569 (43365) 1263541 (49264) 9974866 (46574) 8814646 (49405) 4303860 (42992) 8468662 (49840) 1952371 (46531) 516556 (48404) 6662255 (45091) 5077862 (42243) 7930327 (47337) 6929262 (42738) 3740591 (43104) 7043677 (41831) 8843034 (46356) 3586515 (42127) 5619695 (45330) 5949911 (48460) 7866226 (50660) 6015008 (47603) 9162838 (48173) 4227532 (49453) 4724901 (49722) 5215588 (45563) 7835815 (45025) 1334146 (42645) 9055415 (44236) 3312815 (45975) 8692256 (46024) 6754361 (43302) 1072226 (46371) 8887022 (45611) 8169597 (48830) 4005082 (41331) 153018 (47876) 17694 (43014) 1335591 (46968) 3351466 (46513) 6163404 (42591) 5856450 (50598) 9374041 (42778) 8149040 (41970) 9330266 (45725) 7156109 (43981) 67427 (47143) 2074056 (45489) 4543588 (49886) 9021899 (47500) 9697052 (48012) 7223435 (46300) 8944530 (42496) 1051256 (41027) 2038045 (44099) 4470760 (44169) 641680 (45501) 6065690 (45915) 2711898 (41975) 223562 (50568) 421903 (42532) 
     dis: 	5333.000 6338.000 6920.000 7027.000 7191.000 7544.000 7710.000 7882.000 8146.000 8194.000 8354.000 8387.000 8413.000 8669.000 9209.000 9527.000 9623.000 9705.000 9767.000 9771.000 9820.000 9869.000 9961.000 9977.000 10062.000 10072.000 10102.000 10144.000 10190.000 10193.000 10237.000 10308.000 10431.000 10494.000 10535.000 10554.000 10744.000 10922.000 10966.000 10992.000 11006.000 11032.000 11065.000 11086.000 11133.000 11153.000 11153.000 11161.000 11202.000 11216.000 11239.000 11242.000 11253.000 11285.000 11286.000 11305.000 11319.000 11367.000 11417.000 11439.000 11467.000 11470.000 11471.000 11524.000 11535.000 11568.000 11589.000 11638.000 11718.000 11795.000 11860.000 11861.000 11880.000 11890.000 11894.000 11946.000 11994.000 12006.000 12018.000 12050.000 12074.000 12105.000 12121.000 12186.000 12205.000 12267.000 12275.000 12333.000 12374.000 12387.000 12392.000 12402.000 12430.000 12444.000 12444.000 12450.000 12475.000 12476.000 12585.000 12586.000 
query 1 nn's (25003, 35002): 9408428 (33214) 6693881 (28141) 6631934 (28922) 913237 (31716) 128447 (33616) 1286599 (26580) 4764135 (25237) 9844113 (25407) 8084904 (26103) 1641593 (25519) 7191660 (26554) 2400979 (32818) 2677560 (29840) 1259440 (29909) 1580619 (31013) 7983026 (33895) 6716625 (33472) 5894271 (30832) 9319596 (27166) 6825634 (34589) 9895581 (27864) 4952577 (25638) 5616705 (26749) 9619526 (31001) 7268407 (33164) 1010768 (32832) 6984105 (30431) 6123033 (30064) 5025002 (28266) 5667980 (26456) 4403537 (30334) 3745827 (26193) 4052065 (26798) 5653499 (30309) 2418190 (30774) 6894603 (30698) 3405856 (27091) 8605143 (32224) 7853534 (28186) 5229733 (33672) 7584986 (29468) 2114720 (27014) 8431034 (29326) 1677470 (28044) 1762221 (34381) 9816629 (29872) 8313860 (27237) 3502118 (28547) 4444284 (29638) 7708527 (29629) 9030241 (31642) 3350122 (34862) 3761710 (25464) 3892957 (32671) 8367418 (34221) 6686029 (26967) 8476728 (32712) 2791612 (32495) 1824031 (26919) 5161531 (30241) 5546102 (25312) 7381370 (34199) 6813711 (25065) 1863099 (25769) 4085778 (28840) 9537016 (26301) 509025 (33013) 7563939 (33346) 4570408 (30976) 276903 (27774) 539824 (34206) 2354207 (28126) 5993510 (28523) 6536469 (32386) 2415222 (30608) 106949 (34898) 4233253 (34954) 3088541 (32946) 9682053 (28354) 1660893 (30277) 8858217 (27282) 8738224 (28493) 2556688 (28081) 8112258 (29681) 4002686 (31505) 5400486 (29966) 6704562 (34346) 5219432 (30034) 509356 (30393) 4887323 (34830) 2413303 (31844) 7499767 (32322) 7841909 (33192) 8059150 (27089) 1473367 (25415) 8034043 (26323) 897593 (34735) 7967703 (29427) 9880058 (32934) 1799395 (25305) 
     dis: 	8315.000 8318.000 9175.000 9300.000 9379.000 9607.000 9898.000 9916.000 10035.000 10134.000 10220.000 10345.000 10703.000 11032.000 11116.000 11142.000 11253.000 11314.000 11316.000 11414.000 11426.000 11430.000 11481.000 11483.000 11526.000 11617.000 11795.000 11835.000 11857.000 11905.000 11908.000 11935.000 11979.000 12057.000 12065.000 12105.000 12120.000 12125.000 12165.000 12180.000 12191.000 12204.000 12206.000 12220.000 12240.000 12247.000 12264.000 12314.000 12406.000 12512.000 12527.000 12537.000 12555.000 12558.000 12583.000 12619.000 12640.000 12643.000 12650.000 12673.000 12676.000 12687.000 12725.000 12732.000 12766.000 12768.000 12790.000 12804.000 12810.000 12830.000 12857.000 12868.000 12896.000 12946.000 12951.000 12957.000 12958.000 13001.000 13021.000 13042.000 13085.000 13114.000 13124.000 13128.000 13133.000 13173.000 13188.000 13198.000 13241.000 13260.000 13261.000 13261.000 13264.000 13279.000 13285.000 13313.000 13314.000 13318.000 13327.000 13333.000 
query 2 nn's (52136, 62135): 4927764 (61896) 5193386 (58419) 9602743 (57407) 4710102 (57576) 5423341 (53232) 2961580 (56149) 9485250 (57717) 1425558 (59965) 323907 (52531) 8971627 (61869) 6648184 (54160) 7126935 (58871) 2557172 (56410) 2655117 (60703) 3995931 (55015) 6451690 (52651) 6373557 (58681) 8517921 (54220) 1129169 (58977) 8719744 (57812) 4671238 (54210) 6334408 (55203) 8672644 (53328) 661907 (56261) 4549888 (60192) 8060848 (58300) 5641036 (54953) 9819304 (57396) 4941321 (55126) 9436821 (52252) 2826478 (53769) 7430287 (54464) 2732881 (61677) 2284689 (60389) 6256134 (53229) 9117124 (55844) 9621014 (58796) 3096611 (52704) 2822411 (58823) 8584412 (52154) 8053598 (54560) 1445118 (59573) 9501475 (58076) 8553474 (54164) 7841564 (59049) 8118777 (53878) 7356063 (53757) 2895724 (58490) 8492702 (55424) 8628294 (54056) 5546198 (61399) 4661017 (60528) 3199638 (54669) 7116944 (61848) 9613009 (59128) 407030 (55872) 6486439 (55115) 1599377 (56281) 8805708 (53769) 974463 (55906) 9568973 (52222) 1347115 (57715) 6272121 (61696) 6483343 (60017) 6799372 (55481) 4355657 (61843) 3767167 (54407) 5394801 (53600) 1769008 (54664) 7101891 (55946) 6367017 (55773) 5908619 (54797) 7377075 (58903) 4035325 (52328) 6561491 (60260) 3027160 (52497) 2413880 (59249) 1897140 (54275) 6428092 (52565) 3762208 (58839) 8270538 (52862) 2661006 (61124) 2938213 (60317) 7031128 (54775) 5348187 (52922) 9085967 (53557) 8208625 (57447) 7744934 (61444) 6286063 (53284) 497985 (60637) 7956197 (59912) 8202597 (57013) 3438561 (62031) 8311897 (54795) 5747150 (57010) 7067471 (54769) 7431148 (54916) 1418740 (59524) 9408207 (60206) 6084444 (52823) 
     dis: 	6596.000 7399.000 8053.000 8124.000 8500.000 8750.000 8960.000 9126.000 9129.000 9180.000 9989.000 10002.000 10077.000 10248.000 10255.000 10268.000 10278.000 10307.000 10780.000 10852.000 10951.000 10971.000 10972.000 11098.000 11234.000 11277.000 11305.000 11361.000 11390.000 11430.000 11457.000 11513.000 11573.000 11576.000 11594.000 11681.000 11696.000 11726.000 11751.000 11798.000 11881.000 11894.000 11894.000 11936.000 11948.000 11979.000 12018.000 12043.000 12045.000 12092.000 12131.000 12161.000 12208.000 12213.000 12220.000 12230.000 12242.000 12272.000 12289.000 12313.000 12319.000 12323.000 12324.000 12341.000 12343.000 12392.000 12412.000 12424.000 12440.000 12476.000 12485.000 12523.000 12575.000 12639.000 12687.000 12695.000 12696.000 12727.000 12743.000 12759.000 12786.000 12793.000 12828.000 12835.000 12844.000 12844.000 12850.000 12853.000 12870.000 12885.000 12918.000 12918.000 12922.000 12926.000 12927.000 12932.000 12939.000 12952.000 12973.000 12974.000 
query 3 nn's (22672, 32671): 7020630 (23256) 1717763 (23291) 391722 (24862) 3188407 (24304) 8232477 (31632) 4251611 (29775) 9892318 (23797) 5621855 (30749) 3626273 (24674) 7435385 (25937) 5563393 (26978) 6703969 (32159) 2851767 (31496) 9335946 (29064) 3517824 (30137) 2838160 (25464) 3172637 (27093) 188678 (31172) 382902 (29996) 3554434 (25036) 9030244 (27086) 3787993 (28927) 5416898 (25474) 899773 (23901) 1174438 (25123) 2047471 (29467) 1874108 (26952) 2816747 (24284) 5429466 (28066) 7999457 (23329) 928307 (26649) 348294 (30612) 1064017 (27551) 5041302 (28077) 9768015 (27196) 4008866 (31551) 6462625 (26730) 6060979 (26718) 2406313 (31512) 2262413 (27923) 2605021 (27817) 6021023 (28888) 4077495 (30934) 2540060 (25368) 9750958 (29512) 1682348 (28974) 6370666 (26200) 973000 (25306) 8765050 (29452) 9678835 (25892) 8768561 (27492) 3640666 (29719) 2024671 (25266) 8281351 (26861) 6049067 (27212) 6139929 (31601) 4777419 (25182) 173114 (26788) 2687611 (26115) 4891478 (24137) 5492868 (22990) 7701998 (25859) 6723787 (22764) 8448447 (22710) 1156062 (28000) 1763202 (24922) 9076327 (26379) 2123002 (28494) 9097715 (30141) 5089352 (23180) 636366 (27746) 9061349 (29953) 3228780 (23488) 2211024 (27903) 2972885 (25046) 1088105 (26342) 2212301 (28845) 5542604 (30912) 613079 (31456) 8458676 (25257) 5788714 (28807) 7713351 (26471) 3315014 (31678) 6799401 (27239) 6623327 (23063) 9322731 (30650) 7708121 (28744) 4736812 (26986) 7004651 (23583) 6370197 (23516) 9942674 (25583) 6400458 (23700) 8144622 (27706) 1088112 (29730) 9671312 (29336) 3964129 (27723) 4392973 (26149) 5479426 (24290) 1785438 (26577) 8537787 (29720) 
     dis: 	8902.000 9696.000 9931.000 9960.000 10280.000 10455.000 10541.000 10647.000 10834.000 11029.000 11117.000 11156.000 11197.000 11451.000 11535.000 11656.000 11717.000 11745.000 11864.000 11958.000 12099.000 12101.000 12110.000 12142.000 12177.000 12269.000 12281.000 12406.000 12480.000 12584.000 12623.000 12645.000 12675.000 12681.000 12790.000 12793.000 12818.000 12820.000 12937.000 12951.000 12951.000 12952.000 12992.000 12994.000 12995.000 13019.000 13027.000 13028.000 13066.000 13080.000 13084.000 13090.000 13098.000 13099.000 13122.000 13133.000 13148.000 13160.000 13178.000 13186.000 13231.000 13269.000 13282.000 13293.000 13296.000 13327.000 13418.000 13423.000 13439.000 13449.000 13454.000 13464.000 13473.000 13508.000 13513.000 13537.000 13543.000 13577.000 13589.000 13603.000 13613.000 13618.000 13621.000 13657.000 13668.000 13672.000 13691.000 13694.000 13694.000 13696.000 13715.000 13723.000 13731.000 13745.000 13750.000 13760.000 13761.000 13775.000 13817.000 13823.000 
query 4 nn's (53667, 63666): 7373067 (53855) 2038833 (53914) 9044829 (55243) 6782257 (61394) 6934935 (62103) 8774147 (59338) 6789739 (61948) 3192757 (54312) 1444782 (58902) 5685630 (55650) 8627902 (60097) 8641215 (59349) 2266290 (57733) 9407510 (57340) 1111927 (56218) 1071436 (56465) 4734386 (57789) 7003644 (54071) 7921516 (63604) 6680137 (61587) 2157254 (54534) 7816576 (63230) 3510502 (59384) 6851242 (63477) 1595830 (57396) 5627225 (58815) 5521208 (62683) 6766851 (54351) 7650915 (63278) 7285106 (60945) 1549949 (59274) 6549886 (63665) 8242802 (54527) 1622397 (56749) 6384236 (62728) 8738517 (63250) 3154654 (58192) 8986848 (63373) 1674437 (53911) 3023515 (59919) 8426193 (60985) 5634200 (62406) 6321582 (55264) 6857077 (60175) 7958455 (62583) 5602950 (61681) 1993129 (58248) 3010435 (61979) 7333867 (56073) 316811 (62016) 6592347 (55694) 7700203 (62270) 9547187 (59174) 3647636 (53672) 3932969 (59429) 4293822 (53844) 3852825 (58478) 8146928 (54038) 6066370 (60300) 294212 (55336) 1030972 (60461) 70067 (60752) 6297061 (58792) 4796569 (56069) 7737218 (55024) 8842571 (59976) 9269367 (60752) 2658409 (57189) 8321482 (58612) 9151038 (61386) 2286717 (55703) 6369825 (63383) 7868398 (58238) 4574270 (55991) 5208937 (53689) 7657646 (56973) 6865199 (53751) 898651 (54084) 3038853 (59560) 461309 (63195) 6311304 (61722) 9073069 (54706) 2027548 (61260) 7759992 (61879) 9667161 (61274) 9126043 (57149) 882915 (58760) 5378901 (57726) 2950198 (55352) 93980 (54430) 2091267 (61600) 3803266 (60060) 2085742 (55021) 6788033 (55802) 952427 (59927) 310911 (55903) 777128 (58555) 5784602 (59746) 6148804 (59457) 303769 (57852) 
     dis: 	5809.000 6330.000 6416.000 6419.000 6557.000 6791.000 6812.000 6817.000 6837.000 6845.000 7009.000 7009.000 7028.000 7052.000 7067.000 7080.000 7165.000 7191.000 7197.000 7215.000 7251.000 7280.000 7293.000 7312.000 7322.000 7348.000 7350.000 7353.000 7355.000 7377.000 7386.000 7395.000 7410.000 7443.000 7457.000 7465.000 7484.000 7490.000 7505.000 7516.000 7517.000 7520.000 7536.000 7548.000 7548.000 7552.000 7568.000 7568.000 7572.000 7573.000 7578.000 7580.000 7584.000 7604.000 7605.000 7607.000 7615.000 7626.000 7644.000 7646.000 7648.000 7672.000 7679.000 7698.000 7700.000 7705.000 7705.000 7708.000 7710.000 7711.000 7712.000 7717.000 7717.000 7733.000 7740.000 7754.000 7760.000 7785.000 7786.000 7797.000 7798.000 7802.000 7804.000 7806.000 7811.000 7813.000 7815.000 7818.000 7825.000 7827.000 7827.000 7829.000 7835.000 7836.000 7841.000 7844.000 7849.000 7849.000 7859.000 7866.000 
[ 174.551s ] *** Query time: 94.749
qps: 105.542
 *** HNSW recall 
HNSW get 958115 postive res from 1000000 results, recall@100:0.958
recall dist(10% per bucket): 0.001 0.000 0.000 0.000 0.000 0.001 0.004 0.021 0.094 0.579 0.299 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 554281207, average: 55428.121
finished ivfpq index examples
[ 174.589s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 900 100"
	User time (seconds): 154.35
	System time (seconds): 11.06
	Percent of CPU this job got: 94%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:55.26
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7281564
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 18
	Minor (reclaiming a frame) page faults: 2792108
	Voluntary context switches: 24090
	Involuntary context switches: 317
	Swaps: 0
	File system inputs: 1501024
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 21:47
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 900
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.703s ] Loaded metadata, 10000000 attr's found
[ 0.703s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.706s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.707s ] Loaded 10000 spacev10m queries
[ 0.776s ] Loaded ground truth, gt_size: 100
[ 0.776s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 19.638s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 163.112s ] Query results (vector ids, then distances):
query 0 nn's (4494, 5493): 6149370 (4957) 1293452 (4967) 7693645 (4921) 2272371 (5258) 6166564 (4617) 2878726 (5050) 2939481 (4939) 841307 (4995) 9641558 (4559) 2256143 (5017) 7971557 (4951) 740734 (5130) 7587297 (4745) 8339032 (4998) 3403324 (5319) 8846424 (4510) 7626662 (4961) 8654384 (5441) 4129127 (4710) 3928664 (4689) 6139591 (5168) 2525390 (4928) 1326931 (5389) 2566361 (4712) 2649450 (5095) 4088538 (4964) 3019939 (5319) 3104386 (4508) 3861176 (4951) 3273060 (5238) 1457269 (4804) 1054198 (5200) 6196667 (5272) 150742 (5127) 6208747 (5338) 3955561 (5480) 8123559 (4778) 254569 (5383) 6324014 (4526) 3890885 (4901) 245188 (4931) 4213239 (4947) 2715923 (5307) 752745 (5127) 8864953 (5098) 7968754 (4603) 6364026 (5108) 8935766 (4784) 1529315 (5187) 8034974 (4666) 164681 (4707) 8793617 (5207) 9450001 (4799) 8662751 (4989) 313314 (4764) 1641239 (4688) 1752083 (4932) 6152489 (4625) 6426108 (4564) 627984 (4674) 7359263 (4518) 5526049 (4717) 6537808 (5204) 962202 (5172) 1600428 (5162) 833451 (4807) 216145 (5351) 4948702 (4596) 4934715 (5390) 3710465 (4766) 5571443 (4745) 8603300 (5206) 8836676 (5053) 400067 (5283) 3740616 (4836) 8965249 (5039) 9486671 (5148) 3332895 (4624) 9115894 (5021) 1746537 (5031) 3173329 (4809) 2641461 (5281) 4329276 (4570) 4848302 (5228) 1855871 (5366) 6499914 (5475) 1602609 (5203) 8450201 (5312) 8016746 (4950) 5157659 (4544) 1256799 (4718) 7508287 (4527) 9821294 (4577) 2416709 (5053) 4581038 (4526) 3689691 (5436) 8593823 (5492) 7657098 (5198) 7218188 (4500) 384504 (4653) 
     dis: 	9931.000 12069.000 12361.000 12379.000 12566.000 12817.000 12877.000 12937.000 13067.000 13196.000 13373.000 13808.000 13914.000 14022.000 14180.000 14180.000 14186.000 14198.000 14219.000 14484.000 14515.000 14541.000 14559.000 14634.000 14892.000 15066.000 15253.000 15292.000 15331.000 15386.000 15405.000 15492.000 15522.000 15626.000 15637.000 15664.000 15843.000 15902.000 15923.000 15937.000 15993.000 16143.000 16199.000 16306.000 16366.000 16519.000 16576.000 16581.000 16654.000 16685.000 16706.000 16748.000 16854.000 16937.000 16997.000 17039.000 17041.000 17104.000 17127.000 17217.000 17261.000 17313.000 17314.000 17392.000 17413.000 17431.000 17433.000 17434.000 17481.000 17496.000 17513.000 17534.000 17536.000 17551.000 17559.000 17578.000 17610.000 17619.000 17656.000 17699.000 17720.000 17726.000 17789.000 17792.000 17813.000 18047.000 18065.000 18112.000 18155.000 18157.000 18183.000 18210.000 18251.000 18274.000 18289.000 18322.000 18323.000 18361.000 18382.000 18395.000 
query 1 nn's (37505, 38504): 5755448 (37848) 5790200 (38489) 4994601 (38150) 364702 (38495) 7789051 (37871) 8391132 (38008) 4358727 (38259) 6449676 (37850) 3563306 (37529) 9358072 (38328) 4114888 (38331) 4861613 (37909) 2765139 (38363) 4415604 (38158) 6208044 (38131) 1229887 (38343) 4732664 (37565) 2976175 (38112) 639982 (37719) 6240841 (38110) 4615489 (37755) 4883089 (38051) 6801383 (38265) 5647514 (38037) 8728963 (38317) 9171145 (37851) 670596 (38129) 5036152 (38170) 1843759 (37817) 7887925 (37698) 6907210 (37982) 8529170 (38040) 8917241 (38000) 5245088 (37994) 7880657 (38317) 8210644 (38465) 524045 (37671) 3881564 (37904) 8358627 (37518) 1933133 (38461) 4753113 (38039) 9888370 (37911) 8320602 (37519) 4100706 (38207) 1272449 (38241) 2682400 (37524) 3788709 (37710) 823409 (38155) 2694250 (38418) 3545073 (38351) 5040577 (37689) 6378565 (37611) 6230820 (38002) 9439477 (38152) 4528258 (38060) 9888520 (38043) 6367299 (37591) 6335665 (38019) 4478910 (37676) 1678069 (38181) 4289767 (38061) 109891 (37647) 4812916 (38139) 5361913 (37699) 108808 (38064) 5980935 (37601) 5670794 (37739) 7304059 (38117) 1794630 (38119) 5861640 (37849) 7085672 (37652) 5807435 (37804) 3114991 (37792) 7917318 (37524) 4250 (37804) 6086754 (38286) 1349249 (37982) 9044463 (38492) 6757616 (38048) 2432861 (37583) 8168422 (38134) 4475135 (38429) 2398531 (38230) 7108426 (38094) 8041312 (38450) 4630340 (37527) 2178472 (37667) 5243911 (37973) 9352541 (37932) 8919907 (37609) 1937248 (37551) 4688912 (38223) 4634223 (38137) 8450025 (37924) 2690062 (38050) 6524660 (37879) 8025813 (37564) 6100070 (38411) 6319078 (37508) 3449459 (37704) 
     dis: 	11958.000 12584.000 12692.000 12831.000 12963.000 13165.000 13483.000 13615.000 13624.000 13675.000 13810.000 13929.000 13990.000 14087.000 14199.000 14336.000 14348.000 14381.000 14383.000 14388.000 14416.000 14563.000 14605.000 14676.000 14733.000 14823.000 14900.000 14918.000 14946.000 14982.000 14987.000 15108.000 15137.000 15187.000 15216.000 15229.000 15242.000 15273.000 15291.000 15310.000 15382.000 15419.000 15423.000 15482.000 15512.000 15547.000 15562.000 15566.000 15590.000 15599.000 15601.000 15618.000 15627.000 15647.000 15679.000 15730.000 15738.000 15754.000 15757.000 15771.000 15782.000 15807.000 15868.000 15868.000 15903.000 15948.000 15955.000 15972.000 16015.000 16018.000 16030.000 16040.000 16064.000 16118.000 16126.000 16171.000 16191.000 16231.000 16233.000 16243.000 16268.000 16284.000 16294.000 16303.000 16362.000 16373.000 16392.000 16395.000 16408.000 16508.000 16516.000 16521.000 16530.000 16553.000 16579.000 16601.000 16608.000 16609.000 16626.000 16635.000 
query 2 nn's (17888, 18887): 2882757 (18506) 2768752 (18434) 7958660 (18369) 5798651 (18171) 7060335 (18263) 6489161 (18260) 192071 (18322) 4001654 (18856) 3411918 (18701) 3343989 (18166) 5811483 (17911) 2280297 (17981) 3852413 (18339) 5957745 (18686) 3999866 (18861) 651373 (18369) 8865121 (18145) 8034017 (18651) 6367156 (18275) 9241288 (18797) 3373676 (18058) 7090551 (18836) 7253171 (18873) 7915555 (18591) 2366170 (18194) 5588794 (18589) 2301421 (18209) 2391262 (18259) 7376385 (18103) 4850757 (18188) 5860935 (17962) 7021660 (18633) 8309473 (18465) 5448231 (18819) 7729974 (18311) 9132036 (17895) 7959685 (18166) 2871547 (18852) 6844852 (18247) 8066186 (17981) 1807822 (18413) 6155614 (18411) 9257406 (18439) 3354445 (18294) 4168146 (17986) 1873081 (18181) 8124614 (18842) 2798853 (18054) 6099914 (18549) 4084749 (18416) 3478200 (18692) 8216340 (18735) 7663165 (18821) 3935799 (18836) 9513895 (18319) 7993234 (18796) 1385861 (18182) 5970677 (18144) 269259 (18026) 7108926 (18374) 1257528 (18649) 7399119 (17988) 8395445 (18516) 3400053 (18653) 1884383 (17893) 1807516 (18655) 8118220 (18779) 3210352 (18754) 7630142 (18513) 9863023 (18331) 6719330 (18884) 497294 (17925) 4351754 (17967) 4062808 (18328) 2022735 (18043) 8189056 (18056) 328693 (18319) 8770132 (18866) 2353254 (18646) 1763764 (18840) 7546509 (18640) 478591 (18562) 3726661 (18801) 9809312 (18289) 5675374 (18834) 6014912 (18801) 4385665 (18584) 1812234 (18300) 1377550 (18284) 521025 (17968) 1891479 (18679) 4027166 (18166) 8340881 (18026) 6826033 (18346) 9851155 (18441) 5195477 (18651) 1726439 (18402) 1949178 (18313) 5498829 (18185) 5252999 (18257) 
     dis: 	7205.000 7919.000 8106.000 9228.000 10539.000 10585.000 10681.000 11019.000 11573.000 12331.000 12531.000 12570.000 12748.000 12807.000 12848.000 12874.000 12905.000 12947.000 13207.000 13386.000 13454.000 13625.000 13665.000 13672.000 13718.000 13719.000 13788.000 13834.000 13856.000 14016.000 14068.000 14069.000 14201.000 14218.000 14498.000 14539.000 14545.000 14551.000 14754.000 14874.000 14888.000 14926.000 15064.000 15106.000 15107.000 15166.000 15182.000 15208.000 15208.000 15212.000 15236.000 15255.000 15332.000 15353.000 15416.000 15430.000 15483.000 15535.000 15572.000 15632.000 15711.000 15864.000 15869.000 15928.000 15930.000 15942.000 15953.000 15964.000 15968.000 15986.000 15995.000 16032.000 16034.000 16078.000 16143.000 16153.000 16157.000 16179.000 16183.000 16191.000 16192.000 16296.000 16316.000 16337.000 16340.000 16342.000 16404.000 16407.000 16427.000 16441.000 16443.000 16458.000 16458.000 16474.000 16481.000 16482.000 16491.000 16495.000 16554.000 16567.000 
query 3 nn's (11109, 12108): 5687185 (12097) 6424074 (11699) 561416 (11821) 8459637 (11541) 1473665 (11327) 3969193 (11781) 7578623 (11167) 5285822 (11716) 6204802 (12016) 6557504 (11784) 3061123 (12077) 9894410 (11400) 2424648 (11129) 3438424 (12046) 8609160 (11466) 859638 (11189) 8345845 (11700) 6201834 (11814) 3349733 (11782) 8220183 (11751) 9473281 (11500) 7937205 (11170) 7541575 (11631) 3528080 (11991) 3845490 (11792) 4786221 (11948) 8046548 (11685) 9980326 (11676) 4362036 (11812) 6629237 (12082) 5897187 (11180) 5697552 (11833) 2418 (11477) 3074437 (11399) 6580755 (12024) 7085205 (11552) 4527794 (11179) 7552894 (11937) 3296769 (11156) 4122742 (11403) 1391692 (11422) 9840080 (11119) 3658156 (11292) 3716063 (12017) 1720982 (11766) 8802950 (11231) 7068813 (11667) 8777265 (11489) 6708786 (11667) 5771535 (12042) 500961 (11582) 6270653 (11527) 2103040 (11258) 8365091 (11200) 736830 (11130) 863791 (11996) 4423202 (11952) 300101 (11362) 106710 (11544) 4296225 (11450) 3446242 (11722) 502582 (12035) 1564825 (11828) 9113268 (11329) 2485086 (12063) 7652178 (11337) 9597095 (11205) 8229538 (11134) 1578969 (12088) 1914155 (11740) 2032647 (11848) 9247213 (11230) 3477004 (11153) 3781202 (12070) 6542973 (11384) 6448923 (11808) 7844617 (11907) 8572087 (11961) 6310340 (11188) 7841862 (11935) 6618231 (11721) 9245129 (11583) 9279000 (11554) 2141481 (11457) 5872963 (11128) 9745702 (11582) 839209 (11280) 3946873 (11169) 7578461 (11447) 8899403 (11683) 9886733 (12101) 5071583 (11360) 4958495 (11480) 7806524 (11968) 233732 (11413) 376526 (11517) 9191885 (11559) 5003426 (11685) 5270777 (11785) 8952131 (11609) 
     dis: 	11303.000 11499.000 12457.000 12656.000 13579.000 13592.000 13610.000 13837.000 13841.000 14108.000 14346.000 14518.000 14524.000 15031.000 15044.000 15196.000 15239.000 15292.000 15394.000 15427.000 15485.000 15495.000 15503.000 15520.000 15642.000 15672.000 15688.000 15779.000 15819.000 15859.000 15928.000 16102.000 16109.000 16110.000 16128.000 16141.000 16178.000 16211.000 16298.000 16377.000 16384.000 16416.000 16521.000 16523.000 16540.000 16555.000 16667.000 16694.000 16736.000 16760.000 16765.000 16805.000 16812.000 16822.000 16828.000 16855.000 16931.000 16944.000 16956.000 16978.000 16995.000 17009.000 17030.000 17032.000 17044.000 17054.000 17061.000 17090.000 17091.000 17144.000 17175.000 17191.000 17238.000 17270.000 17274.000 17310.000 17311.000 17319.000 17379.000 17443.000 17457.000 17476.000 17489.000 17498.000 17501.000 17562.000 17588.000 17628.000 17729.000 17768.000 17776.000 17784.000 17804.000 17856.000 17863.000 17865.000 17891.000 17895.000 17909.000 17923.000 
query 4 nn's (17141, 18140): 4786845 (17889) 1240644 (17247) 2074283 (17512) 7771201 (17987) 9087049 (17548) 7484886 (18002) 3841914 (17951) 5340795 (18047) 7311759 (17984) 5552942 (18053) 6029035 (17286) 7743549 (17817) 5448676 (17561) 5408770 (18066) 4968254 (17907) 4503313 (18105) 1182722 (17534) 2904301 (17764) 1957699 (17304) 9956611 (17998) 3892859 (17532) 8060745 (17618) 4739773 (17265) 6343329 (17916) 8303469 (17684) 9430662 (18108) 9865317 (17993) 9281209 (17556) 1800522 (17230) 8328253 (18073) 7098793 (17232) 572088 (17996) 4132826 (17535) 3549241 (17577) 4953007 (17793) 6394839 (17766) 4626005 (18028) 2689415 (17797) 1076381 (18061) 5809169 (17709) 6989928 (17554) 8499942 (17237) 6998246 (18012) 4980150 (17179) 7015372 (17258) 3571799 (17721) 7046889 (17920) 4218934 (17996) 4359847 (18108) 5043830 (18056) 9114278 (17701) 5131103 (17173) 9480493 (17158) 8587230 (17611) 3157036 (17841) 8170734 (17334) 1586369 (17650) 9073627 (17569) 3667927 (17950) 4748406 (17554) 2007382 (17240) 2916527 (17422) 3985403 (17886) 1544528 (17207) 8128592 (18013) 7784434 (18099) 2872613 (17421) 3956337 (17619) 9926884 (17206) 5034204 (17945) 6422945 (17477) 5945988 (17306) 1093395 (17312) 6181259 (18009) 9469586 (17607) 8624967 (17145) 2423134 (17664) 3407033 (17625) 9987571 (17515) 3620394 (17853) 7312594 (17714) 9232278 (17182) 5083397 (17853) 3404541 (17889) 6351082 (17159) 4980839 (17338) 9552806 (17352) 4133868 (17290) 2960727 (17810) 4154143 (17789) 2187988 (17418) 9336686 (17668) 1864804 (18125) 5912532 (17314) 9052124 (17391) 8426340 (17315) 8257799 (18011) 8152146 (17204) 8415073 (17185) 2211642 (17704) 
     dis: 	6881.000 7141.000 7559.000 7619.000 7682.000 7826.000 7864.000 7870.000 7983.000 7993.000 7998.000 8017.000 8057.000 8105.000 8123.000 8161.000 8179.000 8201.000 8271.000 8340.000 8344.000 8371.000 8397.000 8426.000 8435.000 8435.000 8435.000 8479.000 8521.000 8523.000 8533.000 8555.000 8625.000 8657.000 8657.000 8659.000 8664.000 8667.000 8685.000 8689.000 8693.000 8706.000 8709.000 8712.000 8722.000 8725.000 8728.000 8735.000 8746.000 8756.000 8789.000 8802.000 8810.000 8812.000 8837.000 8840.000 8868.000 8920.000 8955.000 8974.000 8976.000 8978.000 8985.000 8989.000 8993.000 9008.000 9036.000 9036.000 9039.000 9046.000 9069.000 9073.000 9084.000 9085.000 9085.000 9097.000 9108.000 9141.000 9141.000 9147.000 9162.000 9211.000 9247.000 9263.000 9267.000 9272.000 9272.000 9278.000 9298.000 9310.000 9314.000 9361.000 9369.000 9377.000 9377.000 9413.000 9466.000 9480.000 9480.000 9493.000 
[ 163.112s ] *** Query time: 84.131
qps: 118.862
 *** HNSW recall 
HNSW get 680628 postive res from 1000000 results, recall@100:0.681
recall dist(10% per bucket): 0.001 0.001 0.005 0.020 0.057 0.138 0.262 0.346 0.164 0.007 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 554281207, average: 55428.121
finished ivfpq index examples
[ 163.143s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 900 100"
	User time (seconds): 144.04
	System time (seconds): 6.56
	Percent of CPU this job got: 92%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:43.58
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7280548
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1835346
	Voluntary context switches: 8511
	Involuntary context switches: 170
	Swaps: 0
	File system inputs: 13368
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:52
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 900
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.708s ] Loaded metadata, 10000000 attr's found
[ 0.708s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.711s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.712s ] Loaded 10000 spacev10m queries
[ 0.780s ] Loaded ground truth, gt_size: 100
[ 0.780s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 20.394s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 179.369s ] Query results (vector ids, then distances):
query 0 nn's (15274, 15373): 5769046 (15300) 6224069 (15338) 4702781 (15290) 2493110 (15304) 6782267 (15338) 3801107 (15313) 7780681 (15282) 563784 (15291) 6114595 (15364) 8873052 (15371) 9871643 (15293) 3136033 (15361) 7108194 (15319) 6321992 (15342) 96301 (15366) 727675 (15340) 414290 (15369) 6353613 (15327) 957167 (15341) 582190 (15334) 3778857 (15299) 1267139 (15361) 1811313 (15372) 4927593 (15321) 5467750 (15278) 5760455 (15334) 6687053 (15372) 7692793 (15286) 7858010 (15350) 2433572 (15324) 6109928 (15330) 6111149 (15335) 5911321 (15361) 2893246 (15330) 1970765 (15282) 5381829 (15353) 8428296 (15344) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9760.000 12232.000 15871.000 16052.000 16860.000 17013.000 17127.000 17273.000 17388.000 17844.000 17990.000 18599.000 18717.000 18898.000 19021.000 19024.000 19226.000 19310.000 20009.000 20048.000 20163.000 20554.000 20627.000 20738.000 20963.000 20965.000 21167.000 21210.000 21219.000 21418.000 21552.000 21726.000 22858.000 23289.000 25109.000 25208.000 27385.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (47455, 47554): 7518689 (47475) 3240786 (47517) 8895531 (47457) 2593429 (47531) 3080191 (47543) 574370 (47461) 9847754 (47504) 4339755 (47512) 9860141 (47546) 8904377 (47525) 8423100 (47537) 1317365 (47500) 2486289 (47482) 3269594 (47508) 3693887 (47465) 717340 (47541) 9160332 (47537) 6244229 (47536) 6230475 (47521) 9073332 (47462) 6667416 (47485) 120023 (47531) 4748059 (47491) 7958193 (47495) 5381233 (47489) 8937474 (47457) 5909153 (47527) 8123430 (47538) 1879828 (47539) 2369391 (47526) 6276617 (47474) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	14099.000 14117.000 16033.000 16302.000 16565.000 17604.000 17740.000 17783.000 17803.000 17842.000 17978.000 18079.000 18194.000 18234.000 18287.000 18982.000 19056.000 19070.000 19229.000 19499.000 19968.000 20080.000 20144.000 20174.000 20668.000 20968.000 21054.000 21118.000 21411.000 22350.000 22528.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (2622, 2721): 9318566 (2630) 6508399 (2700) 3213761 (2637) 1562829 (2650) 3913522 (2654) 7156576 (2627) 7665651 (2625) 4118690 (2706) 2567893 (2661) 2012904 (2667) 4140829 (2675) 4578474 (2636) 5526919 (2672) 8635652 (2642) 1248159 (2649) 4658398 (2640) 9046124 (2693) 760802 (2646) 5994131 (2666) 9247478 (2654) 4985878 (2718) 1388910 (2675) 5327136 (2721) 596585 (2721) 5355539 (2642) 535602 (2641) 991245 (2632) 3953662 (2661) 1081599 (2654) 8864354 (2704) 5163932 (2663) 8547127 (2631) 9347210 (2683) 2610444 (2683) 5579211 (2721) 8958075 (2662) 6892565 (2646) 5465850 (2635) 2454169 (2715) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	13497.000 14398.000 14469.000 15124.000 16142.000 16279.000 16504.000 16561.000 16663.000 16952.000 17103.000 17557.000 17567.000 17646.000 17841.000 18045.000 18353.000 18430.000 18581.000 18595.000 18720.000 19205.000 19255.000 19349.000 19500.000 19536.000 19614.000 19684.000 19864.000 19939.000 20157.000 20329.000 20568.000 20951.000 21233.000 21385.000 21817.000 22485.000 23363.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (73957, 74056): 6689609 (74003) 4050481 (73978) 5661120 (74004) 3150044 (74030) 1231887 (74000) 1038480 (73987) 7040076 (74003) 1918132 (74029) 4430661 (74039) 2941776 (74034) 1295766 (73963) 1906373 (74043) 9682289 (74005) 112118 (73999) 2363052 (74006) 9846144 (74039) 8652203 (74033) 1613508 (73989) 1035919 (74040) 2882801 (73961) 3319466 (74017) 1578336 (74014) 2671317 (74040) 1671314 (74037) 2434717 (74002) 6521988 (74052) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	11782.000 13924.000 16283.000 16419.000 16493.000 16539.000 16982.000 17731.000 17984.000 18083.000 18259.000 18403.000 18575.000 18594.000 18770.000 19267.000 19419.000 19714.000 19819.000 19873.000 20286.000 20720.000 21074.000 21634.000 22852.000 28988.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (58381, 58480): 3852825 (58478) 4103136 (58443) 6808813 (58381) 1006805 (58478) 1999660 (58444) 3871589 (58382) 9684351 (58456) 1919573 (58401) 4043065 (58399) 9486504 (58430) 3410881 (58453) 2844441 (58409) 4871077 (58416) 7175636 (58386) 5351891 (58468) 8124587 (58455) 232975 (58477) 7200685 (58419) 2276653 (58401) 5934608 (58423) 532679 (58442) 7694305 (58415) 1708512 (58442) 1343874 (58408) 2439915 (58409) 946433 (58393) 703909 (58417) 2057281 (58381) 9469682 (58423) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7615.000 8373.000 8420.000 8433.000 8443.000 9103.000 9147.000 9235.000 9510.000 9632.000 9700.000 9939.000 10237.000 10564.000 10567.000 10825.000 10851.000 11038.000 11072.000 11132.000 11234.000 11414.000 11490.000 12345.000 12421.000 13026.000 13049.000 15117.000 16897.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 179.369s ] *** Query time: 100.182
qps: 99.819
 *** HNSW recall 
HNSW get 212992 postive res from 1000000 results, recall@100:0.213
recall dist(10% per bucket): 0.032 0.352 0.516 0.097 0.002 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 554281207, average: 55428.121
finished ivfpq index examples
[ 179.400s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 900 100"
	User time (seconds): 156.08
	System time (seconds): 10.78
	Percent of CPU this job got: 92%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:00.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7281572
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 12
	Minor (reclaiming a frame) page faults: 2720887
	Voluntary context switches: 17708
	Involuntary context switches: 455
	Swaps: 0
	File system inputs: 295616
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
