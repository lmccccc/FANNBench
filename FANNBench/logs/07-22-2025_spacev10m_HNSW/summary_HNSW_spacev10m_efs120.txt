Start time: 00:27
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 120
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.836s ] Loaded metadata, 10000000 attr's found
[ 0.836s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.882s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.892s ] Loaded 10000 spacev10m queries
[ 1.042s ] Loaded ground truth, gt_size: 100
[ 1.042s ] Index Params -- d: 100, N: 10000000
terminate called after throwing an instance of 'faiss::FaissException'
  what():  Error in faiss::FileIOReader::FileIOReader(const char*) at /home/mocheng/code/faiss/faiss/impl/io.cpp:67: Error: 'f' failed: could not open /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 for reading: No such file or directory
Command terminated by signal 6
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 120 100"
	User time (seconds): 0.81
	System time (seconds): 0.10
	Percent of CPU this job got: 70%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:01.30
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 75428
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 22
	Minor (reclaiming a frame) page faults: 29663
	Voluntary context switches: 75
	Involuntary context switches: 8
	Swaps: 0
	File system inputs: 22912
	File system outputs: 0
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:23
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 120
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.703s ] Loaded metadata, 10000000 attr's found
[ 0.703s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.706s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.707s ] Loaded 10000 spacev10m queries
[ 0.777s ] Loaded ground truth, gt_size: 100
[ 0.777s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.079s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 109.501s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 4661794 (6) 1352077 (6) 1300400 (6) 2436347 (6) 425302 (6) 606211 (6) 1781760 (6) 3647719 (6) 9694965 (6) 8021837 (6) 8207046 (6) 6583311 (6) 1714233 (6) 2721656 (6) 2204643 (6) 6309057 (6) 38473 (6) 5072935 (6) 2382485 (6) 4779084 (6) 3881211 (6) 2116152 (6) 8807530 (6) 2710882 (6) 4617714 (6) 8538301 (6) 3873794 (6) 5275548 (6) 7007393 (6) 613770 (6) 1288832 (6) 890298 (6) 106800 (6) 1751249 (6) 4022185 (6) 244510 (6) 4915045 (6) 521477 (6) 2646514 (6) 511283 (6) 8242233 (6) 9818783 (6) 7249395 (6) 672964 (6) 8135809 (6) 8846971 (6) 9600306 (6) 3828638 (6) 6138359 (6) 2605318 (6) 9053999 (6) 4470364 (6) 6478048 (6) 4685796 (6) 5950387 (6) 9901604 (6) 608392 (6) 2807977 (6) 5382515 (6) 3057373 (6) 7983463 (6) 9957153 (6) 1354982 (6) 1150402 (6) 5236967 (6) 6616924 (6) 3249603 (6) 9347328 (6) 4519081 (6) 8662145 (6) 9234384 (6) 9169598 (6) 4697056 (6) 7108130 (6) 8279789 (6) 7330716 (6) 5320284 (6) 3611695 (6) 3636367 (6) 488103 (6) 8656797 (6) 9715655 (6) 7826722 (6) 6303532 (6) 3651927 (6) 6972939 (6) 7887947 (6) 399999 (6) 6781400 (6) 2578991 (6) 5724721 (6) 4104937 (6) 6896772 (6) 5270820 (6) 6554307 (6) 726682 (6) 6290762 (6) 694286 (6) 5475688 (6) 3993234 (6) 
     dis: 	3012.000 3278.000 3455.000 5094.000 5207.000 5333.000 5414.000 5508.000 5944.000 6219.000 6261.000 6338.000 6491.000 6611.000 6635.000 6750.000 7027.000 7047.000 7066.000 7151.000 7203.000 7288.000 7452.000 7464.000 7485.000 7544.000 7677.000 7704.000 7710.000 7742.000 7918.000 7954.000 8017.000 8031.000 8044.000 8194.000 8265.000 8288.000 8334.000 8387.000 8423.000 8468.000 8470.000 8480.000 8500.000 8512.000 8512.000 8566.000 8608.000 8648.000 8650.000 8666.000 8711.000 8800.000 8811.000 8856.000 8876.000 8897.000 8901.000 8918.000 8925.000 8948.000 8965.000 9027.000 9055.000 9065.000 9092.000 9102.000 9117.000 9136.000 9137.000 9209.000 9224.000 9251.000 9340.000 9367.000 9411.000 9419.000 9476.000 9485.000 9485.000 9488.000 9510.000 9527.000 9533.000 9562.000 9589.000 9590.000 9606.000 9607.000 9641.000 9661.000 9666.000 9676.000 9686.000 9715.000 9717.000 9724.000 9755.000 9778.000 
query 1 nn's (6, 6): 3024255 (6) 4465136 (6) 6693881 (6) 1087257 (6) 547651 (6) 5778168 (6) 1739093 (6) 913237 (6) 128447 (6) 2201796 (6) 458294 (6) 4731052 (6) 5140912 (6) 2848947 (6) 2600668 (6) 8268659 (6) 5312590 (6) 3756027 (6) 2915146 (6) 8084904 (6) 5453229 (6) 1674348 (6) 9482235 (6) 1262717 (6) 7070658 (6) 765304 (6) 413466 (6) 4023729 (6) 3467889 (6) 7957281 (6) 7995495 (6) 9750308 (6) 2400979 (6) 9943863 (6) 8382701 (6) 9255837 (6) 5183877 (6) 2054287 (6) 2067210 (6) 6872221 (6) 2030638 (6) 4375499 (6) 5833204 (6) 5642421 (6) 2677560 (6) 6528340 (6) 7714223 (6) 7796940 (6) 9265027 (6) 2208346 (6) 5888778 (6) 8377057 (6) 6218290 (6) 1417507 (6) 7998901 (6) 7898285 (6) 3213153 (6) 3106662 (6) 3579661 (6) 9793572 (6) 1580619 (6) 1873620 (6) 6270422 (6) 7208440 (6) 3798515 (6) 540705 (6) 2775410 (6) 5553093 (6) 6565182 (6) 497310 (6) 6716625 (6) 7666189 (6) 3683874 (6) 4936167 (6) 5894271 (6) 9319596 (6) 7869623 (6) 4090413 (6) 9542350 (6) 5137564 (6) 5549017 (6) 3367543 (6) 6825634 (6) 5210631 (6) 8219055 (6) 1532818 (6) 3253492 (6) 8733990 (6) 9619526 (6) 8187358 (6) 7684675 (6) 2233630 (6) 2781736 (6) 3375782 (6) 5221616 (6) 8570172 (6) 1382243 (6) 307231 (6) 4729435 (6) 3787303 (6) 
     dis: 	6351.000 7808.000 8318.000 8514.000 8991.000 9116.000 9145.000 9300.000 9379.000 9519.000 9575.000 9580.000 9665.000 9687.000 9826.000 9842.000 9904.000 9988.000 10003.000 10035.000 10037.000 10065.000 10077.000 10112.000 10144.000 10180.000 10186.000 10203.000 10233.000 10252.000 10272.000 10318.000 10345.000 10383.000 10428.000 10477.000 10523.000 10531.000 10548.000 10560.000 10602.000 10687.000 10692.000 10693.000 10703.000 10745.000 10769.000 10779.000 10786.000 10828.000 10848.000 10897.000 10949.000 10960.000 11012.000 11038.000 11041.000 11043.000 11087.000 11109.000 11116.000 11153.000 11156.000 11171.000 11187.000 11207.000 11212.000 11214.000 11217.000 11246.000 11253.000 11256.000 11278.000 11298.000 11314.000 11316.000 11318.000 11373.000 11382.000 11400.000 11400.000 11404.000 11414.000 11435.000 11443.000 11452.000 11468.000 11477.000 11483.000 11484.000 11509.000 11516.000 11540.000 11550.000 11565.000 11608.000 11614.000 11622.000 11623.000 11627.000 
query 2 nn's (6, 6): 4574760 (6) 5189301 (6) 9191130 (6) 8167950 (6) 4927764 (6) 5932138 (6) 2966676 (6) 6524215 (6) 2096002 (6) 4376559 (6) 6146541 (6) 1951033 (6) 1306999 (6) 9602743 (6) 9746650 (6) 2493779 (6) 7958660 (6) 5654119 (6) 7197257 (6) 4710102 (6) 700735 (6) 525365 (6) 9561351 (6) 6606573 (6) 3123570 (6) 190238 (6) 1881509 (6) 1816933 (6) 1415377 (6) 9485250 (6) 6555137 (6) 1425558 (6) 8077765 (6) 3361974 (6) 559883 (6) 1563468 (6) 7501806 (6) 5745884 (6) 8739701 (6) 7804752 (6) 4452321 (6) 7017176 (6) 4195631 (6) 6697500 (6) 7815621 (6) 4360960 (6) 8558486 (6) 6822953 (6) 1063314 (6) 7126935 (6) 7335841 (6) 801867 (6) 3405939 (6) 9743895 (6) 8590703 (6) 7660022 (6) 3200028 (6) 3399987 (6) 5263567 (6) 134852 (6) 6936789 (6) 2447894 (6) 780031 (6) 8411645 (6) 5742825 (6) 7287401 (6) 2567980 (6) 6665934 (6) 6371127 (6) 4517312 (6) 7060335 (6) 6489161 (6) 192071 (6) 1044870 (6) 1386408 (6) 1129169 (6) 7118637 (6) 1832279 (6) 267333 (6) 8707110 (6) 8900616 (6) 3785496 (6) 6007808 (6) 2631506 (6) 3967833 (6) 1093013 (6) 1633241 (6) 1349042 (6) 8672644 (6) 494920 (6) 9177119 (6) 4057883 (6) 1064624 (6) 4001654 (6) 2850979 (6) 5597353 (6) 6778344 (6) 2168228 (6) 9749884 (6) 3322631 (6) 
     dis: 	3034.000 3368.000 6308.000 6379.000 6596.000 6968.000 7150.000 7648.000 7659.000 7682.000 7696.000 7936.000 7956.000 8053.000 8065.000 8073.000 8106.000 8109.000 8118.000 8124.000 8264.000 8271.000 8326.000 8470.000 8502.000 8749.000 8765.000 8794.000 8867.000 8960.000 9087.000 9126.000 9162.000 9257.000 9320.000 9459.000 9666.000 9713.000 9725.000 9804.000 9832.000 9835.000 9857.000 9895.000 9903.000 9926.000 9953.000 9968.000 9975.000 10002.000 10050.000 10068.000 10125.000 10145.000 10197.000 10278.000 10284.000 10313.000 10335.000 10337.000 10353.000 10387.000 10392.000 10401.000 10409.000 10412.000 10427.000 10450.000 10451.000 10473.000 10539.000 10585.000 10681.000 10702.000 10729.000 10780.000 10819.000 10821.000 10825.000 10831.000 10831.000 10848.000 10863.000 10883.000 10891.000 10912.000 10928.000 10965.000 10972.000 10992.000 11003.000 11005.000 11016.000 11019.000 11023.000 11023.000 11047.000 11067.000 11078.000 11087.000 
query 3 nn's (6, 6): 1208824 (6) 7481558 (6) 1153720 (6) 9922446 (6) 3092850 (6) 1681561 (6) 2871407 (6) 8906949 (6) 1866926 (6) 7371232 (6) 3092361 (6) 4371036 (6) 9455216 (6) 6638511 (6) 3489463 (6) 6696694 (6) 8364431 (6) 6027466 (6) 1986111 (6) 3188407 (6) 2272653 (6) 220595 (6) 7775637 (6) 8818246 (6) 9398930 (6) 1252765 (6) 7909680 (6) 4889443 (6) 8232477 (6) 5579814 (6) 6542977 (6) 9619884 (6) 8584054 (6) 9232458 (6) 4712751 (6) 9793596 (6) 4474761 (6) 3353499 (6) 7415071 (6) 580826 (6) 4216882 (6) 2595121 (6) 514827 (6) 3626273 (6) 484745 (6) 5785595 (6) 6849775 (6) 3085720 (6) 7435385 (6) 6546803 (6) 6334064 (6) 8821621 (6) 2958818 (6) 7010252 (6) 5124721 (6) 1353097 (6) 5566014 (6) 398589 (6) 7726743 (6) 8159578 (6) 3425624 (6) 383549 (6) 2919205 (6) 7082379 (6) 5119260 (6) 9740574 (6) 4183705 (6) 3483488 (6) 4653543 (6) 1605226 (6) 823633 (6) 1752435 (6) 7256503 (6) 1430920 (6) 3517824 (6) 5368803 (6) 8669768 (6) 5615929 (6) 108033 (6) 2348869 (6) 7136455 (6) 3922636 (6) 8145731 (6) 8182930 (6) 4149081 (6) 188678 (6) 2269546 (6) 9698504 (6) 3350710 (6) 3071605 (6) 6689609 (6) 2018818 (6) 7557678 (6) 9469428 (6) 6884602 (6) 382902 (6) 9998938 (6) 7085204 (6) 3279722 (6) 3554434 (6) 
     dis: 	7689.000 7695.000 8337.000 8365.000 8400.000 8422.000 8731.000 8898.000 9254.000 9274.000 9395.000 9414.000 9443.000 9691.000 9701.000 9879.000 9931.000 9955.000 9958.000 9960.000 9972.000 9995.000 10127.000 10127.000 10184.000 10193.000 10215.000 10268.000 10280.000 10361.000 10381.000 10430.000 10463.000 10481.000 10556.000 10571.000 10583.000 10584.000 10599.000 10694.000 10754.000 10786.000 10821.000 10834.000 10845.000 10848.000 10849.000 10944.000 11029.000 11041.000 11045.000 11074.000 11129.000 11153.000 11159.000 11184.000 11218.000 11259.000 11261.000 11266.000 11315.000 11341.000 11364.000 11388.000 11389.000 11405.000 11417.000 11424.000 11446.000 11449.000 11476.000 11498.000 11498.000 11517.000 11535.000 11597.000 11610.000 11616.000 11641.000 11642.000 11642.000 11648.000 11703.000 11703.000 11735.000 11745.000 11774.000 11775.000 11778.000 11782.000 11782.000 11808.000 11814.000 11845.000 11853.000 11864.000 11912.000 11920.000 11933.000 11958.000 
query 4 nn's (6, 6): 8316529 (6) 5624462 (6) 3987492 (6) 1706143 (6) 9534901 (6) 9970746 (6) 5744224 (6) 9323555 (6) 9211260 (6) 4390138 (6) 6480066 (6) 9833382 (6) 2172340 (6) 73290 (6) 6527555 (6) 8827038 (6) 1182472 (6) 3097455 (6) 1587943 (6) 6395393 (6) 2320125 (6) 9044829 (6) 6782257 (6) 5012986 (6) 3740241 (6) 942827 (6) 57144 (6) 3693862 (6) 6906799 (6) 5562283 (6) 3436988 (6) 7159963 (6) 5783656 (6) 4738992 (6) 915880 (6) 8608979 (6) 3264396 (6) 6091565 (6) 4607867 (6) 9374623 (6) 3073679 (6) 9765986 (6) 523134 (6) 3598596 (6) 3646712 (6) 6634262 (6) 8873679 (6) 6581013 (6) 3655068 (6) 9164737 (6) 1030896 (6) 8442744 (6) 1504549 (6) 7511825 (6) 3421968 (6) 8774147 (6) 4942478 (6) 5685630 (6) 8855135 (6) 8359241 (6) 349859 (6) 3531751 (6) 4786845 (6) 9436869 (6) 980351 (6) 1066421 (6) 4019507 (6) 9519711 (6) 259750 (6) 1995354 (6) 8701864 (6) 8360636 (6) 3795738 (6) 703166 (6) 5006797 (6) 9688429 (6) 9019284 (6) 3032989 (6) 4491189 (6) 1410118 (6) 8641215 (6) 6331457 (6) 9977617 (6) 3934821 (6) 2266290 (6) 1973506 (6) 3299088 (6) 5350870 (6) 1902982 (6) 569140 (6) 1555419 (6) 7238590 (6) 8452116 (6) 5812999 (6) 2699285 (6) 9654936 (6) 6297263 (6) 3179805 (6) 4734386 (6) 4817150 (6) 
     dis: 	2198.000 3552.000 3787.000 4591.000 5126.000 5243.000 5418.000 5435.000 5775.000 5970.000 6247.000 6265.000 6266.000 6268.000 6296.000 6309.000 6371.000 6385.000 6386.000 6397.000 6403.000 6416.000 6419.000 6428.000 6444.000 6460.000 6473.000 6480.000 6504.000 6518.000 6519.000 6530.000 6533.000 6540.000 6559.000 6594.000 6603.000 6606.000 6628.000 6648.000 6653.000 6698.000 6702.000 6712.000 6715.000 6715.000 6725.000 6731.000 6732.000 6747.000 6766.000 6770.000 6774.000 6778.000 6791.000 6791.000 6814.000 6845.000 6854.000 6856.000 6868.000 6872.000 6881.000 6884.000 6888.000 6888.000 6898.000 6899.000 6906.000 6913.000 6914.000 6942.000 6943.000 6947.000 6967.000 6967.000 6968.000 6971.000 6996.000 7000.000 7009.000 7016.000 7017.000 7024.000 7028.000 7034.000 7053.000 7078.000 7084.000 7090.000 7103.000 7118.000 7119.000 7127.000 7130.000 7153.000 7157.000 7165.000 7165.000 7168.000 
[ 109.501s ] *** Query time: 29.606
qps: 337.770
 *** HNSW recall 
HNSW get 887841 postive res from 1000000 results, recall@100:0.888
recall dist(10% per bucket): 0.003 0.001 0.001 0.002 0.005 0.019 0.049 0.101 0.193 0.538 0.088 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 77146510, average: 7714.651
finished ivfpq index examples
[ 109.533s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 120 100"
	User time (seconds): 103.91
	System time (seconds): 6.01
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:49.93
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7281572
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3
	Minor (reclaiming a frame) page faults: 1983702
	Voluntary context switches: 4
	Involuntary context switches: 154
	Swaps: 0
	File system inputs: 2824
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:29
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 120
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 1.010s ] Loaded metadata, 10000000 attr's found
[ 1.010s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.122s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.179s ] Loaded 10000 spacev10m queries
[ 1.420s ] Loaded ground truth, gt_size: 100
[ 1.420s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 53.885s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 196.302s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 7099403 (10) 1536208 (10) 4853416 (10) 7305168 (10) 1360571 (10) 3454073 (10) 3676917 (10) 1858226 (10) 4932580 (10) 1947126 (10) 4112225 (10) 1185721 (10) 8725926 (10) 2716677 (10) 3622412 (10) 3453250 (10) 9518796 (10) 8394382 (10) 6149370 (10) 2029623 (10) 6588206 (10) 3590539 (10) 3348872 (10) 374574 (10) 8804052 (10) 8563184 (10) 7703225 (10) 8237276 (10) 8189648 (10) 7187917 (10) 3434966 (10) 2893898 (10) 3104167 (10) 6549569 (10) 5816885 (10) 9227489 (10) 7514294 (10) 485983 (10) 8140727 (10) 3586515 (10) 2271622 (10) 2751934 (10) 4717852 (10) 9868523 (10) 4724901 (10) 9340831 (10) 4882576 (10) 9717384 (10) 1514436 (10) 4850763 (10) 9277605 (10) 4005082 (10) 2119335 (10) 9971641 (10) 6152797 (10) 5912491 (10) 7264008 (10) 5853211 (10) 451046 (10) 5700967 (10) 9002228 (10) 4228485 (10) 1152039 (10) 3682214 (10) 321600 (10) 2272371 (10) 7223435 (10) 3918311 (10) 3781704 (10) 5239890 (10) 5431229 (10) 3496198 (10) 8564538 (10) 7565245 (10) 9536761 (10) 3847526 (10) 9031842 (10) 6801550 (10) 2101821 (10) 744867 (10) 8929486 (10) 1367646 (10) 3775744 (10) 6592373 (10) 5537105 (10) 2131154 (10) 1120408 (10) 5481247 (10) 9926951 (10) 7614330 (10) 6003828 (10) 3616968 (10) 1534102 (10) 9563123 (10) 5815184 (10) 5969245 (10) 1426671 (10) 8448520 (10) 2961876 (10) 9304881 (10) 
     dis: 	6438.000 6572.000 6676.000 7885.000 7959.000 8293.000 8425.000 8454.000 8669.000 8974.000 9039.000 9347.000 9552.000 9610.000 9668.000 9825.000 9865.000 9880.000 9931.000 9961.000 9961.000 10036.000 10040.000 10068.000 10329.000 10354.000 10431.000 10446.000 10505.000 10545.000 10991.000 10992.000 11023.000 11032.000 11055.000 11104.000 11177.000 11192.000 11258.000 11319.000 11321.000 11428.000 11474.000 11506.000 11524.000 11524.000 11528.000 11600.000 11612.000 11818.000 11822.000 11894.000 11917.000 11949.000 12041.000 12046.000 12058.000 12071.000 12085.000 12098.000 12108.000 12149.000 12167.000 12176.000 12220.000 12379.000 12392.000 12508.000 12510.000 12512.000 12514.000 12552.000 12552.000 12609.000 12644.000 12669.000 12671.000 12681.000 12713.000 12742.000 12748.000 12782.000 12816.000 12821.000 12828.000 12838.000 12853.000 12916.000 12933.000 12966.000 12970.000 12975.000 12992.000 13009.000 13105.000 13115.000 13116.000 13130.000 13133.000 13174.000 
query 1 nn's (10, 10): 8784659 (10) 6945939 (10) 2769394 (10) 5321556 (10) 4561316 (10) 3193849 (10) 2077395 (10) 7928199 (10) 5116926 (10) 4111782 (10) 1237024 (10) 6783786 (10) 4414583 (10) 3288493 (10) 4952577 (10) 9780570 (10) 7905338 (10) 8680758 (10) 1587846 (10) 9979859 (10) 1216753 (10) 4496742 (10) 6615426 (10) 982005 (10) 1424510 (10) 4839935 (10) 5347257 (10) 5966468 (10) 7853534 (10) 8431034 (10) 2067413 (10) 5969404 (10) 6099297 (10) 8974429 (10) 210208 (10) 583971 (10) 6385836 (10) 9267002 (10) 1166066 (10) 759271 (10) 9248724 (10) 7804689 (10) 3724669 (10) 1927377 (10) 1824031 (10) 5534229 (10) 5444203 (10) 8141348 (10) 509025 (10) 6310407 (10) 1061353 (10) 5295974 (10) 6037682 (10) 5664795 (10) 2817328 (10) 9682053 (10) 4252119 (10) 7273808 (10) 693980 (10) 1478349 (10) 9278956 (10) 3034034 (10) 1473367 (10) 8561106 (10) 5027954 (10) 7770117 (10) 7677236 (10) 6454260 (10) 524139 (10) 2014179 (10) 1334523 (10) 2086982 (10) 7276702 (10) 9924846 (10) 5620878 (10) 8518851 (10) 5918556 (10) 4360786 (10) 296984 (10) 3433669 (10) 2471528 (10) 9866675 (10) 4151656 (10) 6645004 (10) 6449676 (10) 1131495 (10) 1360127 (10) 6620090 (10) 8300269 (10) 432582 (10) 5686476 (10) 452563 (10) 5687432 (10) 2670691 (10) 431998 (10) 4114888 (10) 9946971 (10) 8336251 (10) 1433148 (10) 9321668 (10) 
     dis: 	8816.000 9078.000 9211.000 10229.000 10291.000 10564.000 10987.000 11071.000 11128.000 11130.000 11152.000 11164.000 11373.000 11377.000 11430.000 11594.000 11641.000 11672.000 11765.000 11812.000 11819.000 11839.000 11889.000 11981.000 11999.000 12031.000 12124.000 12148.000 12165.000 12206.000 12228.000 12236.000 12275.000 12300.000 12309.000 12344.000 12355.000 12403.000 12439.000 12481.000 12488.000 12557.000 12631.000 12637.000 12650.000 12661.000 12699.000 12750.000 12790.000 12842.000 12871.000 12944.000 12960.000 12961.000 12998.000 13021.000 13071.000 13110.000 13133.000 13195.000 13226.000 13268.000 13285.000 13342.000 13361.000 13384.000 13405.000 13423.000 13438.000 13465.000 13468.000 13470.000 13477.000 13483.000 13489.000 13493.000 13498.000 13500.000 13516.000 13517.000 13530.000 13574.000 13587.000 13608.000 13615.000 13621.000 13631.000 13656.000 13661.000 13666.000 13666.000 13726.000 13761.000 13785.000 13810.000 13810.000 13858.000 13922.000 13951.000 13953.000 
query 2 nn's (10, 10): 4290437 (10) 3524579 (10) 2755608 (10) 379589 (10) 2768752 (10) 4969561 (10) 5423341 (10) 6688464 (10) 3817374 (10) 7670329 (10) 1233143 (10) 3521500 (10) 6915696 (10) 7433556 (10) 6672275 (10) 3995931 (10) 1585247 (10) 6373557 (10) 8517921 (10) 3168009 (10) 3999300 (10) 7037734 (10) 7215858 (10) 7225622 (10) 4240529 (10) 3686996 (10) 3720423 (10) 5943431 (10) 3485543 (10) 8773369 (10) 1334244 (10) 2826478 (10) 6791210 (10) 8373012 (10) 4489586 (10) 4972945 (10) 2552304 (10) 5329091 (10) 2354559 (10) 6530918 (10) 3989900 (10) 242710 (10) 8779893 (10) 1481914 (10) 1207655 (10) 2895724 (10) 503519 (10) 4518309 (10) 8628294 (10) 692490 (10) 2171312 (10) 7147975 (10) 3709896 (10) 6829634 (10) 2587415 (10) 5188561 (10) 5859562 (10) 9746995 (10) 7366068 (10) 1655711 (10) 4303503 (10) 1066233 (10) 4024352 (10) 5650643 (10) 331534 (10) 7981371 (10) 6679312 (10) 4276803 (10) 6351656 (10) 9989899 (10) 8413303 (10) 6317516 (10) 6257635 (10) 1523359 (10) 6073507 (10) 6158322 (10) 2609877 (10) 9705570 (10) 5794271 (10) 7744934 (10) 5231586 (10) 8167170 (10) 2692851 (10) 5747150 (10) 1166591 (10) 1865410 (10) 4427873 (10) 4916447 (10) 7153445 (10) 1634495 (10) 4836326 (10) 6450938 (10) 5318003 (10) 2927516 (10) 1705503 (10) 17336 (10) 4609405 (10) 2695920 (10) 4883342 (10) 6324262 (10) 
     dis: 	4555.000 5017.000 5154.000 7277.000 7919.000 8223.000 8500.000 8666.000 8803.000 9186.000 9257.000 9861.000 9897.000 10002.000 10007.000 10255.000 10259.000 10278.000 10307.000 10439.000 10652.000 10673.000 10735.000 11141.000 11159.000 11255.000 11298.000 11362.000 11390.000 11440.000 11444.000 11457.000 11499.000 11509.000 11538.000 11572.000 11616.000 11641.000 11689.000 11698.000 11842.000 11927.000 11959.000 12010.000 12037.000 12043.000 12056.000 12069.000 12092.000 12101.000 12128.000 12167.000 12186.000 12195.000 12201.000 12222.000 12244.000 12276.000 12320.000 12333.000 12347.000 12365.000 12404.000 12425.000 12551.000 12562.000 12577.000 12589.000 12601.000 12616.000 12637.000 12661.000 12683.000 12687.000 12712.000 12714.000 12729.000 12742.000 12797.000 12853.000 12866.000 12893.000 12906.000 12927.000 12980.000 13006.000 13081.000 13116.000 13148.000 13157.000 13163.000 13163.000 13192.000 13197.000 13274.000 13298.000 13301.000 13318.000 13338.000 13375.000 
query 3 nn's (10, 10): 7375372 (10) 8694166 (10) 4153275 (10) 1074776 (10) 9157428 (10) 9100185 (10) 5621855 (10) 8656601 (10) 1174052 (10) 6835770 (10) 7110321 (10) 9760951 (10) 543165 (10) 2824029 (10) 2838160 (10) 891922 (10) 3431426 (10) 7102985 (10) 6726539 (10) 1771224 (10) 9030244 (10) 4925397 (10) 899773 (10) 8900242 (10) 4280414 (10) 1453923 (10) 5924329 (10) 413101 (10) 6193105 (10) 1559878 (10) 407176 (10) 444968 (10) 6114795 (10) 8354889 (10) 5911798 (10) 1887300 (10) 2262413 (10) 2605021 (10) 9000058 (10) 6877659 (10) 5404816 (10) 9750958 (10) 8589062 (10) 181546 (10) 1981654 (10) 5498239 (10) 8653844 (10) 4300552 (10) 8797109 (10) 1874647 (10) 8437072 (10) 5951119 (10) 3104897 (10) 4645211 (10) 4003247 (10) 3433587 (10) 7541460 (10) 6000334 (10) 3539326 (10) 5924168 (10) 2846312 (10) 7242021 (10) 916020 (10) 586204 (10) 347839 (10) 6752785 (10) 7393670 (10) 613079 (10) 4767661 (10) 4641079 (10) 7593637 (10) 7049263 (10) 4432454 (10) 1319961 (10) 3400340 (10) 4072686 (10) 7641663 (10) 7320752 (10) 6595287 (10) 7359683 (10) 5032266 (10) 8348092 (10) 950864 (10) 5117079 (10) 4604865 (10) 9308855 (10) 7251101 (10) 5812931 (10) 7766019 (10) 9912311 (10) 1348580 (10) 1485820 (10) 5721667 (10) 2765224 (10) 7284465 (10) 4919294 (10) 7822848 (10) 9156658 (10) 4363225 (10) 4867494 (10) 
     dis: 	9144.000 9661.000 9892.000 10416.000 10421.000 10473.000 10647.000 10934.000 11006.000 11392.000 11525.000 11544.000 11579.000 11604.000 11656.000 11735.000 11745.000 11932.000 11958.000 12049.000 12099.000 12104.000 12142.000 12149.000 12178.000 12212.000 12225.000 12263.000 12287.000 12432.000 12454.000 12459.000 12479.000 12480.000 12587.000 12915.000 12951.000 12951.000 12969.000 12977.000 12994.000 12995.000 13038.000 13105.000 13117.000 13134.000 13180.000 13201.000 13201.000 13235.000 13263.000 13269.000 13282.000 13376.000 13393.000 13404.000 13413.000 13423.000 13441.000 13448.000 13468.000 13514.000 13526.000 13532.000 13541.000 13577.000 13581.000 13589.000 13591.000 13594.000 13619.000 13625.000 13634.000 13686.000 13718.000 13727.000 13762.000 13764.000 13782.000 13789.000 13793.000 13804.000 13896.000 13946.000 13959.000 13970.000 14028.000 14032.000 14046.000 14049.000 14051.000 14054.000 14088.000 14108.000 14108.000 14125.000 14148.000 14220.000 14291.000 14339.000 
query 4 nn's (10, 10): 9614324 (10) 3849231 (10) 9788862 (10) 3367834 (10) 3037959 (10) 9193832 (10) 1906000 (10) 1994085 (10) 3480152 (10) 7100626 (10) 449527 (10) 3195289 (10) 6614912 (10) 8605558 (10) 1306176 (10) 8902014 (10) 6738443 (10) 6815324 (10) 1875114 (10) 9600067 (10) 288977 (10) 4175678 (10) 3792530 (10) 2188431 (10) 5021774 (10) 3505357 (10) 1595830 (10) 1432350 (10) 7987544 (10) 2514100 (10) 4630927 (10) 290548 (10) 8998151 (10) 1805350 (10) 876017 (10) 5855379 (10) 5781240 (10) 8400780 (10) 6473453 (10) 4786546 (10) 8013089 (10) 5220285 (10) 6863555 (10) 3855566 (10) 6632711 (10) 6765006 (10) 3018023 (10) 3650471 (10) 8855048 (10) 7664685 (10) 1857734 (10) 6872346 (10) 1684521 (10) 882915 (10) 8984355 (10) 5238216 (10) 2661685 (10) 6250307 (10) 8645881 (10) 4249166 (10) 7320103 (10) 9464897 (10) 8482818 (10) 6934441 (10) 9971454 (10) 5770108 (10) 2377422 (10) 1724277 (10) 6521041 (10) 5102961 (10) 3423061 (10) 2407329 (10) 540031 (10) 3164798 (10) 3491844 (10) 7294212 (10) 5215029 (10) 3783527 (10) 6839832 (10) 6377410 (10) 5904626 (10) 2969811 (10) 1076127 (10) 5939023 (10) 9894978 (10) 8007131 (10) 7846343 (10) 313426 (10) 1076453 (10) 9024642 (10) 8742016 (10) 2114879 (10) 6866552 (10) 8663843 (10) 3841336 (10) 9883399 (10) 9205752 (10) 2795404 (10) 9661549 (10) 6314917 (10) 
     dis: 	4216.000 6159.000 6170.000 6421.000 6432.000 6455.000 6508.000 6547.000 6605.000 6731.000 6766.000 6793.000 6796.000 7063.000 7092.000 7109.000 7125.000 7130.000 7134.000 7136.000 7144.000 7150.000 7157.000 7223.000 7233.000 7235.000 7322.000 7354.000 7404.000 7417.000 7453.000 7473.000 7497.000 7534.000 7549.000 7557.000 7571.000 7606.000 7609.000 7616.000 7649.000 7660.000 7662.000 7669.000 7700.000 7702.000 7719.000 7780.000 7783.000 7803.000 7806.000 7810.000 7814.000 7815.000 7815.000 7837.000 7842.000 7845.000 7854.000 7884.000 7904.000 7924.000 7935.000 7937.000 7952.000 7966.000 7976.000 7993.000 7993.000 8013.000 8015.000 8016.000 8042.000 8057.000 8057.000 8078.000 8080.000 8089.000 8099.000 8101.000 8102.000 8142.000 8147.000 8150.000 8172.000 8191.000 8214.000 8219.000 8230.000 8231.000 8239.000 8243.000 8244.000 8244.000 8261.000 8263.000 8265.000 8266.000 8280.000 8285.000 
[ 196.303s ] *** Query time: 57.225
qps: 174.748
 *** HNSW recall 
HNSW get 664526 postive res from 1000000 results, recall@100:0.665
recall dist(10% per bucket): 0.002 0.001 0.008 0.039 0.093 0.155 0.221 0.279 0.181 0.021 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 77146510, average: 7714.651
finished ivfpq index examples
[ 196.383s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 120 100"
	User time (seconds): 122.37
	System time (seconds): 43.82
	Percent of CPU this job got: 83%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:18.44
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7275432
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 251
	Minor (reclaiming a frame) page faults: 7772637
	Voluntary context switches: 36126
	Involuntary context switches: 684
	Swaps: 0
	File system inputs: 1184312
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:40
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 120
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 1.726s ] Loaded metadata, 10000000 attr's found
[ 1.726s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.874s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.916s ] Loaded 10000 spacev10m queries
[ 2.102s ] Loaded ground truth, gt_size: 100
[ 2.104s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 56.613s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 202.408s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 4279856 (19) 8341867 (19) 4470157 (19) 3665805 (19) 7422832 (19) 4699709 (19) 7367271 (19) 3373685 (19) 9931603 (19) 3101307 (19) 1637453 (19) 1770486 (19) 6597346 (19) 7327255 (19) 1402009 (19) 1845636 (19) 2720326 (19) 8515689 (19) 3697929 (19) 2242031 (19) 8182773 (19) 7528396 (19) 6686155 (19) 3089824 (19) 4110900 (19) 7577842 (19) 4362926 (19) 1834098 (19) 5980669 (19) 6626379 (19) 1308334 (19) 5301998 (19) 3637638 (19) 3333276 (19) 3855368 (19) 6438288 (19) 6811708 (19) 7844255 (19) 9154276 (19) 3179839 (19) 5675392 (19) 1728374 (19) 9807263 (19) 8400383 (19) 4487592 (19) 2257473 (19) 4801775 (19) 5876447 (19) 305647 (19) 4646575 (19) 6295859 (19) 1787220 (19) 1639278 (19) 444197 (19) 4035305 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7583.000 9671.000 9941.000 11224.000 12321.000 12656.000 12688.000 12697.000 12777.000 12938.000 13194.000 13379.000 13758.000 13864.000 13989.000 14428.000 14703.000 15373.000 16258.000 16327.000 16769.000 16795.000 16877.000 17230.000 17469.000 17479.000 17505.000 17758.000 17987.000 18204.000 18318.000 18379.000 18702.000 18714.000 18899.000 18978.000 19242.000 19309.000 19370.000 19478.000 19641.000 19832.000 20141.000 20323.000 20352.000 20722.000 20811.000 20826.000 21226.000 21971.000 22332.000 22356.000 22597.000 23263.000 24862.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 3010609 (19) 429713 (19) 5389260 (19) 8829523 (19) 110728 (19) 630895 (19) 7568825 (19) 783095 (19) 2929751 (19) 6863211 (19) 7198370 (19) 7947913 (19) 5003704 (19) 5483238 (19) 4505408 (19) 4306441 (19) 5137115 (19) 1389708 (19) 5050785 (19) 474037 (19) 4286140 (19) 8525461 (19) 7860457 (19) 5224635 (19) 4666138 (19) 2325622 (19) 5608880 (19) 5921858 (19) 9044463 (19) 4074976 (19) 8753190 (19) 9710724 (19) 5033455 (19) 3661248 (19) 1697632 (19) 8332617 (19) 2169959 (19) 5638694 (19) 294447 (19) 2429300 (19) 3179926 (19) 199441 (19) 7091115 (19) 7603223 (19) 8192660 (19) 2673783 (19) 4604946 (19) 6360791 (19) 6234989 (19) 8584510 (19) 1432428 (19) 3491664 (19) 1253194 (19) 1509543 (19) 2420462 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	8479.000 9734.000 10760.000 11788.000 12019.000 12431.000 12508.000 12606.000 12911.000 13360.000 13727.000 13880.000 13968.000 14262.000 14352.000 14380.000 14517.000 14534.000 14744.000 14940.000 15119.000 15121.000 15237.000 15305.000 15342.000 15595.000 16022.000 16023.000 16231.000 16394.000 16416.000 16613.000 16900.000 16920.000 17001.000 17194.000 17237.000 17448.000 17454.000 17818.000 18013.000 18099.000 18271.000 18559.000 18785.000 18851.000 19089.000 19098.000 19487.000 19614.000 19833.000 19950.000 20111.000 20511.000 22572.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 3411918 (19) 5535345 (19) 5031536 (19) 2953048 (19) 6084444 (19) 749169 (19) 6430072 (19) 8617679 (19) 8728212 (19) 5515036 (19) 779126 (19) 2758942 (19) 8094377 (19) 1048355 (19) 1706632 (19) 186885 (19) 4047535 (19) 4658930 (19) 1718350 (19) 1251845 (19) 9534907 (19) 9501542 (19) 7875093 (19) 9653211 (19) 750125 (19) 5878001 (19) 9811611 (19) 7343890 (19) 5533855 (19) 3050182 (19) 3848954 (19) 6088162 (19) 6207119 (19) 7302615 (19) 5059230 (19) 3065019 (19) 1088105 (19) 398474 (19) 1751195 (19) 3654721 (19) 3297283 (19) 370507 (19) 6440491 (19) 6730836 (19) 800613 (19) 532971 (19) 2332314 (19) 2436428 (19) 2035960 (19) 6263951 (19) 6433815 (19) 1959780 (19) 1508501 (19) 5770761 (19) 5384830 (19) 8611567 (19) 8134373 (19) 948669 (19) 5073285 (19) 1067328 (19) 9201307 (19) 4893490 (19) 2573589 (19) 2052767 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	11573.000 12067.000 12450.000 12948.000 12974.000 13148.000 13246.000 13355.000 13517.000 13607.000 14476.000 14623.000 14925.000 15062.000 15083.000 15120.000 15225.000 15469.000 15899.000 16070.000 16144.000 16336.000 16413.000 16502.000 16507.000 16691.000 16950.000 16968.000 16977.000 17035.000 17189.000 17260.000 17263.000 17283.000 17626.000 17766.000 17772.000 17836.000 18239.000 18480.000 18481.000 18487.000 18495.000 18594.000 18647.000 18731.000 18772.000 18788.000 18834.000 18840.000 18930.000 19042.000 19210.000 19238.000 19648.000 19680.000 19769.000 19817.000 20011.000 20026.000 20657.000 21029.000 21108.000 22916.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 8688374 (19) 312551 (19) 4281239 (19) 2035960 (19) 1088105 (19) 9323463 (19) 7541027 (19) 6105877 (19) 7449790 (19) 8097175 (19) 4268373 (19) 9627667 (19) 6551733 (19) 3384498 (19) 4919176 (19) 7278006 (19) 8607893 (19) 5922505 (19) 3845490 (19) 176951 (19) 5215312 (19) 4268377 (19) 5579146 (19) 2881256 (19) 6980401 (19) 5666599 (19) 451092 (19) 776662 (19) 8864152 (19) 7821912 (19) 5712231 (19) 141716 (19) 3379937 (19) 2318163 (19) 1712901 (19) 2870769 (19) 4457792 (19) 7157247 (19) 3396243 (19) 1934769 (19) 8322077 (19) 2396338 (19) 7911777 (19) 1434819 (19) 1828332 (19) 1756024 (19) 8597071 (19) 8435639 (19) 5269354 (19) 7018282 (19) 4052939 (19) 4706764 (19) 1697977 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9955.000 12495.000 12905.000 13113.000 13537.000 13609.000 13745.000 13809.000 13860.000 13929.000 14230.000 14463.000 14477.000 14528.000 14605.000 14726.000 15156.000 15593.000 15642.000 15738.000 15895.000 16146.000 16432.000 16758.000 16879.000 16889.000 17498.000 17608.000 17715.000 17782.000 17850.000 18175.000 18193.000 18370.000 18374.000 18452.000 18491.000 18632.000 18700.000 18708.000 18748.000 18869.000 18956.000 18960.000 19134.000 19419.000 20390.000 20471.000 20564.000 21313.000 21518.000 21927.000 21990.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 6836665 (19) 7921516 (19) 1079096 (19) 5551706 (19) 8954656 (19) 8683349 (19) 2757759 (19) 2027548 (19) 8921471 (19) 9329860 (19) 8536029 (19) 8639136 (19) 9614915 (19) 8349371 (19) 5077822 (19) 793299 (19) 9978560 (19) 4955145 (19) 9072469 (19) 6766193 (19) 2456896 (19) 4126790 (19) 4364066 (19) 461835 (19) 1362637 (19) 7784434 (19) 9369425 (19) 9424041 (19) 3578648 (19) 8926455 (19) 5991089 (19) 4866997 (19) 875500 (19) 1736254 (19) 3297283 (19) 8804229 (19) 2218365 (19) 1538737 (19) 8915030 (19) 8749179 (19) 4847686 (19) 3992850 (19) 3714890 (19) 370184 (19) 8303400 (19) 1318684 (19) 1727796 (19) 5132064 (19) 2326594 (19) 5705043 (19) 8718782 (19) 860041 (19) 1641442 (19) 1493445 (19) 7547262 (19) 5318957 (19) 7088667 (19) 8071924 (19) 7158663 (19) 2427173 (19) 5263206 (19) 7713954 (19) 9782411 (19) 1399252 (19) 3604374 (19) 4525769 (19) 267075 (19) 3955765 (19) 1082195 (19) 7087184 (19) 8747970 (19) 4237198 (19) 8483209 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	6874.000 7197.000 7408.000 7432.000 7568.000 7692.000 7746.000 7804.000 7852.000 8012.000 8083.000 8099.000 8166.000 8197.000 8417.000 8462.000 8468.000 8574.000 8666.000 8788.000 8826.000 8872.000 8906.000 8912.000 8980.000 9008.000 9079.000 9091.000 9291.000 9324.000 9329.000 9426.000 9447.000 9530.000 9561.000 9599.000 9634.000 9690.000 9742.000 9960.000 10094.000 10135.000 10178.000 10662.000 10697.000 10750.000 10783.000 10808.000 10832.000 10948.000 10996.000 11075.000 11251.000 11271.000 11278.000 11328.000 11479.000 11566.000 11986.000 12008.000 12126.000 12131.000 12210.000 12388.000 12587.000 12780.000 13208.000 13399.000 14348.000 14933.000 15267.000 16657.000 17116.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 202.408s ] *** Query time: 56.741
qps: 176.238
 *** HNSW recall 
HNSW get 238912 postive res from 1000000 results, recall@100:0.239
recall dist(10% per bucket): 0.022 0.252 0.507 0.208 0.011 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 77146510, average: 7714.651
finished ivfpq index examples
[ 202.443s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 120 100"
	User time (seconds): 122.78
	System time (seconds): 32.70
	Percent of CPU this job got: 76%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:23.84
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7278196
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 287
	Minor (reclaiming a frame) page faults: 3348063
	Voluntary context switches: 35571
	Involuntary context switches: 810
	Swaps: 0
	File system inputs: 922936
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:52
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 120
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 1.645s ] Loaded metadata, 10000000 attr's found
[ 1.645s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.652s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.655s ] Loaded 10000 spacev10m queries
[ 1.827s ] Loaded ground truth, gt_size: 100
[ 1.827s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 33.968s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 186.376s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 6443191 (20) 4699240 (20) 4459358 (20) 2771440 (20) 9321980 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	12188.000 12281.000 16721.000 20832.000 21995.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 3943773 (20) 6290607 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	16281.000 16757.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 9777979 (20) 3713444 (20) 7745024 (20) 8225973 (20) 6347471 (20) 8594075 (20) 2413793 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	11123.000 11837.000 13943.000 14496.000 16302.000 16440.000 18975.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 9781225 (20) 7701998 (20) 5023237 (20) 705864 (20) 2051699 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	11790.000 13269.000 15664.000 18948.000 20349.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 5608022 (20) 7541936 (20) 8380721 (20) 2688904 (20) 7851230 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9013.000 9668.000 11068.000 12666.000 15740.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 186.376s ] *** Query time: 46.744
qps: 213.930
 *** HNSW recall 
HNSW get 44671 postive res from 1000000 results, recall@100:0.045
recall dist(10% per bucket): 0.974 0.026 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 77146510, average: 7714.651
finished ivfpq index examples
[ 186.411s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 120 100"
	User time (seconds): 148.74
	System time (seconds): 17.83
	Percent of CPU this job got: 88%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:07.39
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7277436
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 80
	Minor (reclaiming a frame) page faults: 2066601
	Voluntary context switches: 32543
	Involuntary context switches: 489
	Swaps: 0
	File system inputs: 1377448
	File system outputs: 72
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
