Start time: 01:34
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  30958  postive res from  100000  results, recall@ 10 : 0.30958
recall dist(10\% per bucket):  [3.440e-02 1.312e-01 2.155e-01 2.416e-01 1.894e-01 1.098e-01 5.230e-02
 1.900e-02 5.900e-03 8.000e-04 1.000e-04]
10000  queries cost: 87.20877385139465 , qps: 114.66736153222591
Start time: 02:26
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  30958  postive res from  100000  results, recall@ 10 : 0.30958
recall dist(10\% per bucket):  [3.440e-02 1.312e-01 2.155e-01 2.416e-01 1.894e-01 1.098e-01 5.230e-02
 1.900e-02 5.900e-03 8.000e-04 1.000e-04]
10000  queries cost: 128.47969245910645 , qps: 77.83331208691118
Start time: 02:53
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 178, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 322, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 144, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 183, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 87, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 800, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 733, in _execute_search
    response = self._stub.Search(request, timeout=timeout)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_interceptor.py", line 268, in __call__
    def __call__(
KeyboardInterrupt
Start time: 02:55
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
res: data: ["[{'id': 908244, 'distance': 59306.01171875, 'entity': {'id': 908244}}, {'id': 565419, 'distance': 60475.29296875, 'entity': {'id': 565419}}, {'id': 223589, 'distance': 64358.86328125, 'entity': {'id': 223589}}, {'id': 377393, 'distance': 70229.8984375, 'entity': {'id': 377393}}, {'id': 95545, 'distance': 71392.5703125, 'entity': {'id': 95545}}, {'id': 746238, 'distance': 72020.34375, 'entity': {'id': 746238}}, {'id': 451258, 'distance': 72034.8828125, 'entity': {'id': 451258}}, {'id': 592899, 'distance': 72191.40625, 'entity': {'id': 592899}}, {'id': 728255, 'distance': 72488.15625, 'entity': {'id': 728255}}, {'id': 671081, 'distance': 72622.9375, 'entity': {'id': 671081}}]"] 
res: data: ["[{'id': 746051, 'distance': 49729.01953125, 'entity': {'id': 746051}}, {'id': 749009, 'distance': 51410.14453125, 'entity': {'id': 749009}}, {'id': 817073, 'distance': 52519.09765625, 'entity': {'id': 817073}}, {'id': 989193, 'distance': 53097.6796875, 'entity': {'id': 989193}}, {'id': 679280, 'distance': 53736.31640625, 'entity': {'id': 679280}}, {'id': 849742, 'distance': 54524.4375, 'entity': {'id': 849742}}, {'id': 936688, 'distance': 54554.08203125, 'entity': {'id': 936688}}, {'id': 731804, 'distance': 55085.734375, 'entity': {'id': 731804}}, {'id': 980641, 'distance': 55426.1875, 'entity': {'id': 980641}}, {'id': 846833, 'distance': 56164.80859375, 'entity': {'id': 846833}}]"] 
res: data: ["[{'id': 762362, 'distance': 32053.83984375, 'entity': {'id': 762362}}, {'id': 69035, 'distance': 34007.6875, 'entity': {'id': 69035}}, {'id': 256075, 'distance': 34510.6796875, 'entity': {'id': 256075}}, {'id': 260648, 'distance': 35358.859375, 'entity': {'id': 260648}}, {'id': 70410, 'distance': 36908.8828125, 'entity': {'id': 70410}}, {'id': 217109, 'distance': 37586.7109375, 'entity': {'id': 217109}}, {'id': 711674, 'distance': 38929.7890625, 'entity': {'id': 711674}}, {'id': 678139, 'distance': 39051.31640625, 'entity': {'id': 678139}}, {'id': 741992, 'distance': 39158.0234375, 'entity': {'id': 741992}}, {'id': 769130, 'distance': 39399.359375, 'entity': {'id': 769130}}]"] 
Start time: 02:57
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
res: [{'id': 908244, 'distance': 59306.01171875, 'entity': {}}, {'id': 565419, 'distance': 60475.29296875, 'entity': {}}, {'id': 223589, 'distance': 64358.86328125, 'entity': {}}, {'id': 377393, 'distance': 70229.8984375, 'entity': {}}, {'id': 95545, 'distance': 71392.5703125, 'entity': {}}, {'id': 746238, 'distance': 72020.34375, 'entity': {}}, {'id': 451258, 'distance': 72034.8828125, 'entity': {}}, {'id': 592899, 'distance': 72191.40625, 'entity': {}}, {'id': 728255, 'distance': 72488.15625, 'entity': {}}, {'id': 671081, 'distance': 72622.9375, 'entity': {}}]
res: [{'id': 746051, 'distance': 49729.01953125, 'entity': {}}, {'id': 749009, 'distance': 51410.14453125, 'entity': {}}, {'id': 817073, 'distance': 52519.09765625, 'entity': {}}, {'id': 989193, 'distance': 53097.6796875, 'entity': {}}, {'id': 679280, 'distance': 53736.31640625, 'entity': {}}, {'id': 849742, 'distance': 54524.4375, 'entity': {}}, {'id': 936688, 'distance': 54554.08203125, 'entity': {}}, {'id': 731804, 'distance': 55085.734375, 'entity': {}}, {'id': 980641, 'distance': 55426.1875, 'entity': {}}, {'id': 846833, 'distance': 56164.80859375, 'entity': {}}]
res: [{'id': 762362, 'distance': 32053.83984375, 'entity': {}}, {'id': 69035, 'distance': 34007.6875, 'entity': {}}, {'id': 256075, 'distance': 34510.6796875, 'entity': {}}, {'id': 260648, 'distance': 35358.859375, 'entity': {}}, {'id': 70410, 'distance': 36908.8828125, 'entity': {}}, {'id': 217109, 'distance': 37586.7109375, 'entity': {}}, {'id': 711674, 'distance': 38929.7890625, 'entity': {}}, {'id': 678139, 'distance': 39051.31640625, 'entity': {}}, {'id': 741992, 'distance': 39158.0234375, 'entity': {}}, {'id': 769130, 'distance': 39399.359375, 'entity': {}}]
Start time: 02:59
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
res id: [908244, 565419, 223589, 377393, 95545, 746238, 451258, 592899, 728255, 671081]
res id: [746051, 749009, 817073, 989193, 679280, 849742, 936688, 731804, 980641, 846833]
res id: [762362, 69035, 256075, 260648, 70410, 217109, 711674, 678139, 741992, 769130]
Start time: 03:01
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  31886  postive res from  100000  results, recall@ 10 : 0.31886
recall dist(10\% per bucket):  [2.760e-02 1.156e-01 2.089e-01 2.502e-01 1.999e-01 1.160e-01 5.550e-02
 1.940e-02 6.000e-03 8.000e-04 1.000e-04]
10000  queries cost: 164.00380277633667 , qps: 60.97419590713815
Start time: 04:06
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  38378  postive res from  100000  results, recall@ 10 : 0.38378
recall dist(10\% per bucket):  [0.0216 0.0903 0.1726 0.2173 0.1836 0.1313 0.0751 0.0397 0.0207 0.0126
 0.0352]
10000  queries cost: 75.51865267753601 , qps: 132.4176166476369
Start time: 04:18
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  64981  postive res from  100000  results, recall@ 10 : 0.64981
recall dist(10\% per bucket):  [0.0175 0.0558 0.1085 0.1225 0.1034 0.0579 0.0283 0.0112 0.0073 0.0279
 0.4597]
10000  queries cost: 109.23193407058716 , qps: 91.5483195009425
Start time: 04:53
  File "utils/pymilvus_ivfpq.py", line 74
    replica_number=1ï¼Œ
                    ^
SyntaxError: invalid character in identifier
Start time: 04:53
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
RPC error: [search], <MilvusException: (code=201, message=fail to search on QueryNode 5: partition not loaded[partition=[454033563711968288]])>, <Time:{'RPC start': '2024-11-23 20:55:36.506955', 'RPC error': '2024-11-23 20:55:37.112791'}>
Failed to search collection: collection_sift1M_sel_1_8_random
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 183, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 336, in search
    raise ex from ex
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 322, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 148, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 144, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 183, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 123, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 87, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 800, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 741, in _execute_search
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 734, in _execute_search
    check_status(response.status)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/utils.py", line 63, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=201, message=fail to search on QueryNode 5: partition not loaded[partition=[454033563711968288]])>
Start time: 05:14
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 200
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
RPC error: [search], <MilvusException: (code=500, message=fail to search on QueryNode 5: channel not found[channel=by-dev-rootcoord-dml_8_454033563714175257v0])>, <Time:{'RPC start': '2024-11-23 21:17:48.699338', 'RPC error': '2024-11-23 21:17:49.305671'}>
Failed to search collection: collection_sift1M_sel_1_8_random
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 188, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 336, in search
    raise ex from ex
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 322, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 148, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 144, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 183, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 123, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 87, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 800, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 741, in _execute_search
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 734, in _execute_search
    check_status(response.status)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/utils.py", line 63, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=500, message=fail to search on QueryNode 5: channel not found[channel=by-dev-rootcoord-dml_8_454033563714175257v0])>
