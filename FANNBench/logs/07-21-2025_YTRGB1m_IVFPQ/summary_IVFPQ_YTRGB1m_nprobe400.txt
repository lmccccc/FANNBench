Start time: 09:21
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024
nprobe: 400
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.128s ] Loaded metadata, 1000000 attr's found
[ 0.128s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.243s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.263s ] Loaded 10000 YTRGB1m queries
[ 0.414s ] Loaded ground truth, gt_size: 100
[ 0.414s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.399s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 3057.009s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 585723 (20) 159144 (20) 481032 (20) 285710 (20) 552273 (20) 276769 (20) 956833 (20) 427825 (20) 733579 (20) 998134 (20) 45532 (20) 72324 (20) 979613 (20) 699304 (20) 456018 (20) 50446 (20) 4223 (20) 164309 (20) 901868 (20) 414470 (20) 975992 (20) 954783 (20) 284908 (20) 289577 (20) 747320 (20) 424494 (20) 47106 (20) 997314 (20) 541377 (20) 646202 (20) 350023 (20) 661944 (20) 920441 (20) 922906 (20) 782524 (20) 331970 (20) 925274 (20) 388241 (20) 22881 (20) 610153 (20) 408569 (20) 820845 (20) 988831 (20) 916592 (20) 895731 (20) 885291 (20) 534852 (20) 11938 (20) 107950 (20) 546325 (20) 433102 (20) 445385 (20) 732757 (20) 610526 (20) 546018 (20) 875205 (20) 949831 (20) 233527 (20) 711917 (20) 182109 (20) 107789 (20) 475584 (20) 359359 (20) 962870 (20) 470200 (20) 215520 (20) 47380 (20) 784222 (20) 305992 (20) 94328 (20) 670243 (20) 593596 (20) 682007 (20) 55143 (20) 723599 (20) 912090 (20) 909962 (20) 994320 (20) 970441 (20) 173096 (20) 688993 (20) 123133 (20) 608321 (20) 610754 (20) 591895 (20) 723715 (20) 416732 (20) 104105 (20) 839081 (20) 548580 (20) 477567 (20) 790687 (20) 745545 (20) 140271 (20) 169781 (20) 899549 (20) 933098 (20) 289968 (20) 339911 (20) 720148 (20) 
     dis: 	107.099 107.956 109.041 112.014 114.907 115.124 115.328 116.343 118.610 118.891 119.488 119.700 119.742 120.913 121.693 121.775 121.865 121.882 122.638 122.759 122.890 123.260 123.616 123.644 123.933 124.449 124.626 125.724 126.181 126.525 126.589 126.680 126.681 127.682 127.887 128.440 128.684 128.778 129.486 129.765 130.235 130.459 130.530 131.517 131.739 131.806 131.916 132.010 132.697 132.969 133.215 133.250 133.329 133.399 133.542 134.095 134.771 134.783 134.877 135.010 135.272 135.345 135.406 135.517 135.585 136.457 136.458 136.606 136.819 136.879 137.183 137.345 137.594 137.852 137.947 138.132 138.334 138.515 138.790 138.870 139.077 139.170 139.485 139.554 139.642 140.214 140.232 140.281 140.317 140.439 141.294 141.340 141.596 142.264 142.427 142.995 143.691 143.742 143.792 144.127 
query 1 nn's (20, 20): 481032 (20) 585723 (20) 885291 (20) 956833 (20) 552273 (20) 276769 (20) 979613 (20) 427825 (20) 285710 (20) 733579 (20) 45532 (20) 975992 (20) 159144 (20) 4223 (20) 699304 (20) 610153 (20) 954783 (20) 164309 (20) 988831 (20) 901868 (20) 912090 (20) 22881 (20) 47106 (20) 997314 (20) 998134 (20) 920441 (20) 289577 (20) 646202 (20) 661944 (20) 350023 (20) 747320 (20) 388241 (20) 922906 (20) 782524 (20) 424494 (20) 72324 (20) 414470 (20) 107789 (20) 433102 (20) 107950 (20) 875205 (20) 359359 (20) 50446 (20) 456018 (20) 970441 (20) 723599 (20) 591895 (20) 534852 (20) 475584 (20) 331970 (20) 895731 (20) 723715 (20) 256008 (20) 732757 (20) 610754 (20) 11938 (20) 682007 (20) 215520 (20) 47998 (20) 711917 (20) 870858 (20) 470200 (20) 933098 (20) 47380 (20) 191787 (20) 313318 (20) 688993 (20) 233527 (20) 104105 (20) 745545 (20) 994320 (20) 123133 (20) 407408 (20) 593596 (20) 173096 (20) 962870 (20) 592557 (20) 916592 (20) 182109 (20) 305992 (20) 541377 (20) 899549 (20) 546325 (20) 784222 (20) 289968 (20) 296648 (20) 965314 (20) 925274 (20) 416732 (20) 140271 (20) 445385 (20) 335266 (20) 910066 (20) 790687 (20) 548580 (20) 55143 (20) 670243 (20) 632256 (20) 477567 (20) 957076 (20) 
     dis: 	71.022 72.987 74.836 74.921 79.956 80.030 82.051 82.581 84.658 84.700 85.146 85.398 86.204 86.441 87.702 87.935 88.524 88.942 90.374 91.332 91.356 91.524 91.624 91.723 91.942 92.126 92.219 92.623 93.377 93.416 93.995 94.412 94.894 94.900 95.150 95.808 97.202 97.383 97.798 98.471 98.516 98.765 99.264 99.319 99.336 99.644 99.855 99.877 100.100 100.348 100.748 100.888 101.092 101.290 101.469 101.930 102.008 102.039 102.152 102.374 102.707 103.004 103.482 103.562 103.587 104.337 104.430 104.594 104.812 105.081 105.108 105.563 105.693 105.881 106.076 106.638 106.723 107.040 107.120 107.831 107.970 108.020 108.561 108.603 108.642 108.649 108.656 108.725 109.123 109.159 109.654 109.921 110.152 110.203 110.623 110.632 111.098 111.507 111.798 112.031 
query 2 nn's (20, 20): 979613 (20) 107950 (20) 585723 (20) 481032 (20) 285710 (20) 276769 (20) 956833 (20) 427825 (20) 733579 (20) 159144 (20) 47106 (20) 552273 (20) 45532 (20) 4223 (20) 901868 (20) 661944 (20) 998134 (20) 456018 (20) 699304 (20) 747320 (20) 732757 (20) 745545 (20) 646202 (20) 22881 (20) 975992 (20) 610153 (20) 215520 (20) 72324 (20) 910066 (20) 416732 (20) 610754 (20) 985509 (20) 475584 (20) 289577 (20) 11938 (20) 424494 (20) 920441 (20) 359359 (20) 608321 (20) 784222 (20) 331970 (20) 922906 (20) 388241 (20) 875205 (20) 433102 (20) 350023 (20) 50446 (20) 885291 (20) 546325 (20) 909962 (20) 173096 (20) 954783 (20) 997314 (20) 470200 (20) 47380 (20) 782524 (20) 688993 (20) 895731 (20) 918000 (20) 164309 (20) 723599 (20) 962870 (20) 289968 (20) 313318 (20) 55143 (20) 546483 (20) 47998 (20) 912090 (20) 140271 (20) 988831 (20) 682007 (20) 670243 (20) 933098 (20) 548580 (20) 632256 (20) 723715 (20) 107789 (20) 123133 (20) 445385 (20) 970441 (20) 994320 (20) 182109 (20) 256008 (20) 324202 (20) 414470 (20) 711917 (20) 662919 (20) 951636 (20) 104105 (20) 925274 (20) 339911 (20) 289830 (20) 541377 (20) 477567 (20) 94328 (20) 957076 (20) 829216 (20) 305992 (20) 899549 (20) 870858 (20) 
     dis: 	139.433 152.258 152.569 154.635 159.302 159.568 162.171 162.552 162.898 163.174 163.375 164.278 165.217 166.490 166.746 167.565 167.672 168.782 170.051 170.549 170.776 170.782 170.829 171.369 172.173 172.404 172.415 172.465 172.528 172.740 173.384 174.471 175.010 175.097 175.851 176.167 176.362 176.727 176.769 176.937 177.019 177.377 177.528 177.654 177.904 177.969 178.075 178.164 178.412 178.552 178.746 179.180 179.442 179.546 179.885 179.886 180.100 180.149 180.490 180.554 181.041 181.045 181.107 181.297 182.131 182.165 182.213 182.220 182.489 182.854 183.007 183.327 184.669 184.869 184.947 185.528 185.724 185.753 185.790 186.413 186.595 186.762 186.785 187.060 187.662 187.836 187.852 188.162 188.375 188.838 189.496 189.848 190.430 190.474 190.611 191.040 191.429 191.481 191.545 191.603 
query 3 nn's (20, 20): 481032 (20) 922906 (20) 285710 (20) 585723 (20) 4223 (20) 956833 (20) 276769 (20) 427825 (20) 289577 (20) 552273 (20) 733579 (20) 661944 (20) 45532 (20) 164309 (20) 747320 (20) 159144 (20) 388241 (20) 424494 (20) 470200 (20) 998134 (20) 885291 (20) 534852 (20) 988831 (20) 901868 (20) 699304 (20) 916592 (20) 979613 (20) 829216 (20) 975992 (20) 994320 (20) 47106 (20) 997314 (20) 610153 (20) 50446 (20) 191787 (20) 484454 (20) 22881 (20) 711917 (20) 875205 (20) 920441 (20) 107950 (20) 331970 (20) 954783 (20) 289968 (20) 350023 (20) 546325 (20) 456018 (20) 305992 (20) 895731 (20) 782524 (20) 475584 (20) 670243 (20) 140271 (20) 910066 (20) 433102 (20) 123133 (20) 610754 (20) 646202 (20) 784222 (20) 899549 (20) 47380 (20) 359359 (20) 541377 (20) 11938 (20) 970441 (20) 408569 (20) 215520 (20) 723599 (20) 233527 (20) 416732 (20) 592557 (20) 414470 (20) 182109 (20) 72324 (20) 965314 (20) 591895 (20) 173096 (20) 593596 (20) 732757 (20) 682007 (20) 107789 (20) 104105 (20) 477567 (20) 361953 (20) 723715 (20) 47998 (20) 745545 (20) 608321 (20) 598742 (20) 790687 (20) 933098 (20) 49236 (20) 481895 (20) 957076 (20) 445385 (20) 55143 (20) 567362 (20) 339911 (20) 313318 (20) 870858 (20) 
     dis: 	193.965 197.763 202.690 203.491 203.878 204.895 205.061 205.264 205.894 206.714 206.722 209.413 209.890 210.241 210.674 211.222 212.743 212.908 213.854 214.171 214.332 214.641 214.880 214.912 214.952 215.571 215.591 215.969 216.978 217.244 217.568 218.143 218.780 218.834 218.909 219.650 219.921 220.031 220.087 220.632 221.323 221.766 222.458 222.987 223.091 223.167 223.387 223.843 224.366 224.405 224.450 225.269 225.503 225.550 225.811 226.206 226.303 226.842 226.908 227.031 227.195 227.479 227.484 227.629 227.640 227.675 228.094 228.455 228.472 228.478 228.970 229.036 229.049 229.194 229.207 229.229 229.416 229.643 230.060 230.516 231.138 231.242 231.587 231.682 232.086 232.602 232.676 232.926 233.193 233.294 233.415 233.600 233.666 234.240 234.460 234.887 235.045 235.049 235.103 235.155 
query 4 nn's (20, 20): 410526 (20) 898770 (20) 182093 (20) 285710 (20) 733579 (20) 481032 (20) 956833 (20) 45532 (20) 552273 (20) 585723 (20) 427825 (20) 276769 (20) 164309 (20) 159144 (20) 646202 (20) 50446 (20) 699304 (20) 104105 (20) 723599 (20) 4223 (20) 47106 (20) 289577 (20) 901868 (20) 456018 (20) 997314 (20) 885291 (20) 747320 (20) 782524 (20) 546325 (20) 661944 (20) 388241 (20) 331970 (20) 140271 (20) 72324 (20) 424494 (20) 975992 (20) 433102 (20) 979613 (20) 407408 (20) 920441 (20) 11938 (20) 169781 (20) 895731 (20) 107789 (20) 610153 (20) 94328 (20) 933098 (20) 998134 (20) 47380 (20) 123133 (20) 107950 (20) 732757 (20) 475584 (20) 215520 (20) 22881 (20) 688993 (20) 408569 (20) 173096 (20) 875205 (20) 910066 (20) 608321 (20) 954783 (20) 47998 (20) 922906 (20) 416732 (20) 723715 (20) 350023 (20) 916592 (20) 470200 (20) 711917 (20) 662919 (20) 534852 (20) 670243 (20) 592557 (20) 313318 (20) 957076 (20) 546483 (20) 233527 (20) 359359 (20) 289968 (20) 182109 (20) 918000 (20) 305992 (20) 994320 (20) 745545 (20) 610754 (20) 988831 (20) 591895 (20) 333070 (20) 477567 (20) 339911 (20) 682007 (20) 593596 (20) 951636 (20) 870858 (20) 985509 (20) 970441 (20) 912090 (20) 55143 (20) 567362 (20) 
     dis: 	140.872 210.628 241.338 277.889 278.160 279.259 283.549 284.308 285.421 285.422 286.466 287.932 288.414 289.484 289.513 289.850 291.783 292.345 292.475 293.594 294.100 294.751 294.796 294.970 295.510 295.741 295.884 296.259 296.693 297.367 297.449 297.509 297.598 297.944 298.308 298.447 298.925 299.372 299.406 299.419 299.565 300.665 301.279 301.281 301.563 302.038 302.280 302.620 302.707 302.784 303.049 303.254 303.843 303.894 303.897 304.338 304.454 304.468 304.840 305.332 305.639 305.700 306.129 306.327 306.751 306.775 307.089 307.769 308.185 308.325 308.625 308.671 309.076 309.375 309.532 309.552 309.588 309.620 309.923 309.958 310.006 310.352 310.458 310.530 310.706 310.826 310.895 311.226 311.704 312.434 312.491 312.708 312.867 312.997 313.278 313.667 314.462 315.283 315.732 315.783 
[ 3057.009s ] *** Query time: 3049.096
qps: 3.280
 *** ivfpq recall 
ivfpq get 990791 postive res from 1000000 results, recall@100:0.991
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.791 0.209 
finished ivfpq index examples
[ 3057.038s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 400 1024"
	User time (seconds): 3054.54
	System time (seconds): 1.15
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 50:57.17
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1103780
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 8
	Minor (reclaiming a frame) page faults: 291563
	Voluntary context switches: 4085
	Involuntary context switches: 6623
	Swaps: 0
	File system inputs: 169864
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
