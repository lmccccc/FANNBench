Start time: 06:09
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 150
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.091s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.093s ] Loaded 10000 YTRGB1m queries
[ 0.159s ] Loaded ground truth, gt_size: 100
[ 0.159s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 13.741s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 46.509s ] Query results (vector ids, then distances):
query 0 nn's (1267, 6842): 986245 (2438) 984621 (1376) 521249 (5304) 48714 (3285) 980214 (3358) 662806 (3695) 599702 (5849) 916929 (1333) 499361 (1578) 550823 (2306) 457861 (2688) 680375 (6632) 208021 (3671) 745412 (2410) 366566 (2645) 506665 (1558) 263709 (6739) 821751 (5964) 336603 (4871) 673940 (1914) 492327 (6667) 776796 (1294) 496578 (6234) 19514 (1726) 451807 (5018) 958384 (5794) 991479 (1889) 634590 (1960) 80751 (3227) 148116 (5722) 202136 (1684) 953921 (1591) 437459 (5473) 956829 (1988) 913246 (5761) 785594 (2179) 392724 (6459) 126306 (3063) 403197 (2974) 373440 (2001) 301781 (3912) 473207 (5280) 928790 (1921) 151446 (2812) 742291 (3284) 772499 (1576) 23924 (6546) 767101 (6697) 857336 (1283) 736474 (2699) 606062 (4154) 915739 (5456) 314104 (1435) 267332 (6586) 361766 (5902) 97757 (2971) 966722 (2387) 696449 (3411) 745278 (3309) 218663 (3791) 14572 (5342) 907166 (5172) 196808 (1502) 617300 (3148) 692591 (1529) 877336 (1807) 842440 (3523) 960618 (1790) 90603 (2224) 532465 (4866) 509845 (3059) 68653 (2930) 365176 (3417) 752039 (3266) 921897 (1925) 888221 (1481) 287255 (5789) 811631 (5789) 736154 (3441) 559959 (2989) 797209 (6428) 286299 (3905) 798630 (2446) 572163 (6324) 79495 (1635) 154713 (3135) 938241 (4537) 343722 (6668) 250943 (1676) 799896 (1352) 19718 (2359) 73256 (2036) 377529 (4688) 160171 (5805) 358065 (2201) 386531 (3860) 509736 (2170) 231442 (5117) 256396 (4904) 38650 (5750) 
     dis: 	82.411 86.047 88.069 88.391 88.567 88.756 89.420 91.724 92.143 92.250 92.535 92.633 92.745 92.912 92.933 93.096 93.351 93.910 94.061 94.137 94.346 94.695 94.896 94.944 95.141 95.874 96.063 96.103 96.190 96.290 96.339 96.544 96.570 96.595 96.727 96.728 96.742 96.779 96.836 96.838 96.977 97.046 97.122 97.334 97.409 97.552 97.607 97.666 97.720 98.050 98.162 98.190 98.247 98.250 98.389 98.413 98.491 98.565 98.597 98.628 98.658 98.760 98.804 98.823 98.913 98.952 98.987 99.072 99.244 99.263 99.294 99.368 99.368 99.395 99.401 99.426 99.518 99.518 99.567 99.569 99.574 99.698 99.755 99.763 99.770 99.770 99.772 99.855 99.966 100.041 100.107 100.133 100.180 100.232 100.235 100.238 100.257 100.349 100.361 100.397 
query 1 nn's (1660, 9508): 230459 (3753) 302746 (1711) 497306 (2143) 506689 (8264) 853723 (9251) 138086 (2308) 373852 (9446) 326679 (7296) 358433 (2215) 689633 (2134) 545680 (1765) 848578 (5045) 586453 (3477) 867145 (3477) 212675 (2980) 30000 (2697) 997428 (4777) 762596 (3982) 724711 (1975) 641093 (5191) 383855 (3706) 546146 (8226) 641020 (3337) 941312 (1688) 267568 (3482) 209172 (2572) 997115 (3442) 499809 (2891) 203058 (8499) 558172 (8694) 878354 (7441) 400581 (4261) 854843 (5388) 666817 (7868) 30138 (3354) 422255 (6055) 301766 (6986) 316563 (4749) 463893 (3965) 908662 (3242) 821906 (7164) 855336 (3986) 289226 (9045) 672148 (3991) 145755 (1979) 302319 (2950) 519648 (4122) 455764 (8077) 899467 (9013) 554657 (2471) 427979 (4299) 633004 (1721) 385515 (4630) 325785 (3140) 23747 (7099) 889441 (3943) 978444 (1877) 473207 (5280) 28365 (5180) 776677 (1806) 499646 (3877) 832537 (1673) 380657 (4109) 844413 (4109) 806534 (5392) 890430 (4922) 178309 (2848) 970271 (3147) 880286 (3001) 927330 (4340) 322796 (4504) 340079 (2293) 343722 (6668) 849697 (2919) 35170 (2701) 14572 (5342) 535625 (8224) 707130 (2333) 840311 (6928) 788358 (2146) 749825 (4399) 606832 (6411) 990959 (4835) 401052 (4664) 521080 (3037) 146952 (9262) 393726 (2230) 554135 (4709) 462868 (5450) 835729 (6482) 432424 (5134) 536636 (3230) 632909 (3808) 337196 (8584) 504375 (4741) 857567 (2629) 581825 (7549) 748796 (3573) 535343 (8320) 720181 (6492) 
     dis: 	49.807 50.920 53.385 53.409 54.131 54.327 54.349 54.387 54.582 54.671 55.071 55.190 55.571 55.592 55.768 56.676 57.041 57.311 57.385 57.629 57.791 57.845 58.112 58.600 58.695 58.750 58.805 58.930 59.126 59.138 59.399 59.488 59.616 59.621 59.634 59.809 59.843 60.037 60.086 60.113 60.181 60.290 60.343 60.396 60.418 60.516 60.620 60.813 61.078 61.097 61.222 61.296 61.335 61.462 61.510 61.594 61.625 61.627 61.651 61.803 61.874 61.932 61.960 61.960 61.995 62.043 62.054 62.157 62.232 62.371 62.492 62.499 62.535 62.590 62.751 62.793 62.837 62.905 62.962 62.964 62.988 63.047 63.110 63.152 63.406 63.427 63.525 63.569 63.618 63.621 63.676 63.678 63.685 63.699 63.748 63.766 63.811 63.833 63.862 63.883 
query 2 nn's (1724, 10052): 423205 (2778) 531527 (2028) 435470 (4103) 871743 (6917) 225875 (3761) 633590 (2353) 528201 (3388) 509845 (3059) 666817 (7868) 979613 (2315) 795823 (2418) 667162 (2608) 698610 (9525) 677717 (2098) 37850 (3810) 76351 (5317) 798437 (2090) 572163 (6324) 473207 (5280) 604626 (4097) 476128 (1903) 383560 (6198) 443951 (7383) 223022 (8146) 907166 (5172) 142229 (4776) 812421 (2111) 236892 (2433) 823721 (6753) 630882 (3507) 39208 (9268) 290643 (5230) 867372 (5230) 386531 (3860) 917665 (1758) 423023 (5239) 915528 (6361) 949063 (4593) 932640 (2080) 970371 (1827) 851559 (2393) 379259 (6362) 184588 (5632) 641427 (3362) 763079 (3029) 969746 (1756) 707130 (2333) 519648 (4122) 65926 (9241) 597155 (4822) 782560 (4366) 254396 (3142) 356703 (3859) 963167 (4050) 849697 (2919) 680642 (2588) 50122 (5663) 899160 (2387) 84539 (5643) 985228 (7900) 497144 (4142) 885167 (3033) 732994 (2449) 519970 (2215) 863223 (2470) 763020 (3231) 932857 (8830) 741618 (9016) 605288 (3308) 244227 (4078) 236165 (5450) 558501 (5059) 564154 (6410) 900209 (8837) 167842 (6026) 819590 (4135) 546302 (2102) 446219 (2095) 270729 (7283) 345118 (3063) 508045 (4277) 658912 (2588) 956829 (1988) 408274 (6114) 726382 (2038) 641688 (6168) 305326 (5264) 358307 (1757) 310661 (8886) 247033 (2415) 232096 (2988) 609316 (2674) 95604 (7326) 746075 (2776) 9254 (8845) 328799 (5567) 399729 (6371) 237425 (8706) 932543 (4118) 907513 (2254) 
     dis: 	132.517 135.263 135.721 136.001 136.506 137.396 137.993 139.068 139.336 139.364 139.694 140.515 140.740 140.872 141.033 141.252 141.481 141.624 141.696 141.867 141.927 142.023 142.090 142.580 142.668 142.683 142.744 142.869 143.115 143.290 143.307 143.368 143.368 143.420 143.591 143.631 144.096 144.163 144.189 144.566 144.570 144.617 144.632 144.693 144.721 144.756 144.939 144.949 144.971 145.067 145.118 145.122 145.231 145.256 145.283 145.285 145.334 145.353 145.486 145.517 145.650 145.736 145.751 145.839 145.936 145.982 146.012 146.027 146.039 146.045 146.131 146.192 146.220 146.252 146.277 146.292 146.309 146.361 146.414 146.447 146.517 146.518 146.684 146.802 146.894 146.900 146.916 147.126 147.331 147.345 147.347 147.349 147.381 147.430 147.430 147.475 147.476 147.494 147.521 147.533 
query 3 nn's (4411, 96384): 462979 (19619) 505074 (5015) 551084 (19440) 99295 (12875) 759272 (73427) 469561 (27078) 14703 (35001) 954742 (18664) 979326 (37641) 669483 (8365) 263195 (22042) 440840 (6170) 997286 (51186) 136177 (7299) 260825 (20057) 647424 (64537) 762909 (16388) 343722 (6668) 878957 (4648) 976180 (4922) 159269 (17223) 750794 (13264) 683491 (5347) 827077 (15838) 433245 (14738) 916832 (59789) 346681 (54490) 13341 (17517) 550872 (55957) 106987 (74575) 665690 (52020) 447077 (55154) 20352 (87234) 942390 (43613) 496154 (4954) 605960 (10890) 371257 (9041) 242590 (9493) 365062 (85401) 14572 (5342) 430803 (4709) 968556 (8873) 829520 (16678) 426874 (31024) 64796 (11224) 470530 (5116) 237251 (7053) 679824 (4571) 855530 (6327) 369664 (71930) 826248 (14343) 808082 (65464) 179696 (22798) 25654 (19438) 360005 (30819) 888936 (11998) 46589 (85872) 784717 (4535) 488731 (28745) 666817 (7868) 835969 (32497) 420277 (75695) 95475 (62765) 289356 (16886) 263846 (6652) 790206 (43137) 877698 (29252) 492607 (33506) 588086 (13515) 616256 (8455) 489829 (4529) 764097 (4529) 346637 (5254) 549981 (10918) 521248 (7371) 488682 (17594) 750013 (21049) 782913 (6006) 422255 (6055) 97774 (69439) 233803 (62680) 251977 (6370) 768738 (13483) 233180 (42722) 909386 (4633) 150833 (37196) 196352 (5812) 666290 (55721) 978931 (13810) 465564 (5047) 835729 (6482) 369868 (7047) 936153 (9770) 554135 (4709) 546210 (12748) 698610 (9525) 576402 (7184) 542042 (9904) 872582 (9852) 999675 (5036) 
     dis: 	141.830 147.460 164.455 167.020 169.516 170.649 171.253 171.878 173.730 176.589 178.330 179.198 179.973 181.360 183.437 183.476 183.497 183.788 184.499 184.638 184.646 184.733 185.168 185.228 185.319 185.433 185.512 186.085 186.155 186.271 186.645 186.664 186.694 186.797 187.193 187.332 187.419 187.428 187.594 187.699 187.899 188.115 188.177 188.439 188.479 188.564 188.590 188.628 188.697 188.730 188.776 188.792 188.811 188.854 188.872 188.882 188.893 188.922 188.957 188.978 189.037 189.091 189.271 189.277 189.384 189.450 189.564 189.673 189.726 189.809 189.851 189.851 189.853 190.052 190.241 190.326 190.362 190.388 190.439 190.515 190.526 190.527 190.671 190.822 190.852 190.856 190.919 190.984 191.030 191.113 191.183 191.200 191.204 191.246 191.333 191.337 191.342 191.351 191.354 191.435 
query 4 nn's (2797, 24298): 719380 (6117) 690285 (9682) 950887 (3058) 461345 (2800) 89809 (2923) 62933 (5287) 969735 (4636) 27286 (4314) 565522 (19123) 693282 (5409) 47460 (3919) 273627 (2842) 644921 (5913) 959418 (5913) 815136 (7725) 615031 (3284) 111408 (14080) 266702 (6225) 188274 (7640) 272857 (3951) 559665 (12525) 343865 (20909) 272496 (18617) 170938 (11027) 983374 (10478) 864885 (19198) 135954 (4746) 739152 (5705) 258251 (3855) 226676 (4119) 15399 (6715) 455363 (3320) 209754 (10381) 661394 (2815) 86342 (3736) 6454 (3445) 786745 (4533) 874168 (15510) 721826 (4048) 276912 (14988) 663997 (3070) 757368 (5521) 302474 (17449) 385674 (10284) 382982 (4717) 404547 (4920) 497393 (11477) 70344 (4839) 36993 (3549) 584795 (10383) 229832 (9081) 912472 (12400) 395213 (5480) 4088 (17006) 498294 (3128) 827290 (13481) 257393 (4241) 275060 (16756) 586210 (2841) 418523 (6069) 935609 (15982) 480782 (3981) 974457 (7853) 333654 (6917) 386301 (20767) 190353 (15609) 775952 (2986) 544230 (3556) 728440 (3870) 502520 (6040) 274883 (5325) 256494 (3107) 176390 (3343) 634282 (3479) 128627 (3185) 696717 (6458) 972938 (2894) 355417 (18277) 751330 (3112) 116068 (16968) 289163 (4384) 571909 (3511) 474720 (9053) 700992 (8185) 293069 (18042) 190638 (10576) 448311 (5539) 347553 (5121) 610034 (2998) 617093 (10582) 407673 (2970) 609376 (15945) 982288 (7738) 491474 (10606) 921753 (4200) 337667 (11728) 308421 (15078) 234841 (7108) 322526 (3554) 176623 (4578) 
     dis: 	56.225 63.143 66.157 71.556 72.466 75.294 75.616 76.658 79.761 79.911 80.512 82.765 85.364 85.364 87.205 89.072 89.257 89.644 90.257 90.618 92.775 93.190 93.271 93.543 95.224 95.693 95.789 96.374 96.452 96.461 97.103 98.303 98.516 98.811 99.177 99.236 99.466 99.828 100.669 101.112 101.224 102.005 102.008 102.415 102.790 104.333 104.634 104.909 105.419 105.425 105.988 106.107 106.557 107.351 107.404 107.546 107.735 108.890 109.168 109.269 109.471 111.196 111.889 112.157 112.985 113.465 114.946 115.196 115.382 116.618 116.943 116.995 117.364 117.862 117.874 117.890 118.047 118.266 119.218 120.623 120.899 120.954 122.207 122.211 122.454 122.729 123.263 123.455 123.507 123.821 124.714 124.754 125.073 126.047 126.250 126.891 126.986 127.612 127.843 127.862 
[ 46.510s ] *** Query time: 27.358
qps: 365.520
 *** HNSW recall 
HNSW get 824432 postive res from 1000000 results, recall@100:0.824
recall dist(10% per bucket): 0.001 0.001 0.004 0.015 0.028 0.055 0.095 0.148 0.223 0.346 0.086 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 53472038, average: 5347.204
finished ivfpq index examples
[ 46.549s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 150 1024"
	User time (seconds): 29.86
	System time (seconds): 7.01
	Percent of CPU this job got: 78%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:47.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4405152
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1846350
	Voluntary context switches: 17578
	Involuntary context switches: 124
	Swaps: 0
	File system inputs: 1051912
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:27
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 150
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.090s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.091s ] Loaded 10000 YTRGB1m queries
[ 0.157s ] Loaded ground truth, gt_size: 100
[ 0.157s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.814s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 35.506s ] Query results (vector ids, then distances):
query 0 nn's (38855, 139269): 239994 (69257) 737273 (113404) 469118 (94608) 99619 (56529) 952701 (51288) 973705 (48354) 945815 (121035) 315673 (136096) 95475 (62765) 405113 (58331) 568143 (56188) 886648 (67332) 168854 (102701) 687363 (84946) 961694 (52597) 621002 (95283) 777637 (45828) 365062 (85401) 38549 (71441) 332465 (69390) 487597 (38858) 927007 (105409) 591405 (48860) 697156 (59339) 157253 (50094) 287783 (107613) 685636 (67940) 17042 (58961) 194751 (87459) 833876 (103114) 743615 (63284) 606206 (106200) 6650 (46141) 171157 (50166) 233180 (42722) 723113 (113220) 530852 (39981) 309399 (49073) 611212 (107273) 190812 (68460) 331219 (43651) 208438 (71280) 369664 (71930) 791360 (97375) 159479 (134177) 291869 (60821) 64977 (103226) 2220 (114060) 233174 (52402) 926276 (84589) 331006 (93815) 303105 (72726) 124476 (62846) 357004 (46372) 401781 (130927) 126870 (78337) 792564 (39634) 926927 (41279) 171543 (103064) 990950 (60583) 969764 (88779) 401826 (85550) 612226 (121085) 874351 (106381) 368711 (84197) 668769 (103579) 916832 (59789) 122 (61749) 574717 (83547) 219449 (42279) 510532 (136372) 833219 (54275) 233803 (62680) 767612 (108997) 210707 (132554) 138764 (63968) 83981 (45687) 946913 (72892) 623826 (77627) 359940 (42210) 49196 (51658) 95913 (54174) 753583 (80706) 42210 (44076) 803492 (41158) 552221 (79861) 969334 (97488) 272648 (73835) 818574 (137400) 12847 (61093) 749061 (64847) 792258 (67108) 262881 (45876) 673787 (125082) 683928 (54894) 500826 (137124) 845591 (53379) 328546 (83431) 243407 (117060) 558893 (42473) 
     dis: 	89.980 91.199 92.759 92.927 93.375 95.349 95.953 96.081 96.407 96.994 97.295 97.387 97.698 97.770 97.799 97.904 98.057 98.121 98.448 98.558 98.605 98.666 98.769 99.344 99.355 99.489 99.798 100.014 100.039 100.137 100.280 100.402 100.430 100.546 100.631 100.852 100.875 100.971 100.982 100.991 101.137 101.140 101.372 101.621 101.710 101.784 101.821 101.904 101.926 102.086 102.113 102.150 102.170 102.212 102.228 102.279 102.396 102.405 102.410 102.541 102.602 102.651 102.759 102.764 102.799 102.844 103.011 103.032 103.100 103.113 103.214 103.401 103.480 103.591 103.736 103.776 103.854 103.861 103.865 103.887 103.915 103.917 103.921 103.957 103.993 104.251 104.346 104.377 104.419 104.558 104.591 104.627 104.646 104.699 104.820 104.858 104.945 104.962 104.995 105.160 
query 1 nn's (18169, 37472): 411735 (20503) 380703 (20612) 833378 (33326) 431933 (31516) 360005 (30819) 365136 (35560) 731008 (26372) 146981 (27559) 466827 (32372) 667959 (22694) 341272 (33974) 295338 (23441) 179696 (22798) 19864 (27480) 3603 (31109) 68977 (18686) 192956 (31543) 47728 (27849) 726691 (25268) 946883 (28688) 233078 (29116) 118351 (25619) 598416 (21098) 150833 (37196) 16765 (20200) 52602 (19685) 477114 (30008) 543197 (20634) 500782 (33541) 912768 (18376) 771649 (21020) 974111 (22166) 687142 (33212) 51398 (19663) 264943 (28664) 194780 (19444) 942583 (30751) 821644 (27446) 213076 (29082) 741615 (34604) 821801 (31766) 940537 (24263) 115350 (19329) 527178 (31646) 230172 (33504) 751844 (28760) 359643 (34794) 954116 (18258) 511634 (29803) 211104 (30694) 465103 (21069) 152541 (22903) 448322 (30878) 436716 (21905) 555984 (31852) 912701 (22126) 132155 (26583) 293139 (23353) 376974 (27778) 228240 (22018) 96578 (31995) 495200 (20824) 427621 (32279) 697711 (18272) 750013 (21049) 957981 (32888) 168692 (29115) 427862 (19135) 184289 (36069) 383249 (32617) 651655 (31045) 117525 (30703) 150740 (19844) 304169 (24025) 178299 (35235) 637701 (22823) 855115 (30634) 984013 (18208) 20535 (20397) 455847 (33445) 364296 (29202) 410906 (35763) 422419 (36615) 157863 (32552) 752069 (34158) 980063 (21608) 842541 (33185) 197643 (28630) 929308 (18785) 902322 (18696) 870111 (21380) 389702 (32628) 396345 (20717) 891337 (18492) 733423 (34355) 19475 (19089) 114788 (22178) 71078 (30623) 70519 (23994) 367008 (20311) 
     dis: 	55.105 55.684 56.308 56.479 56.682 57.351 57.361 57.848 59.323 59.359 59.383 59.520 59.794 59.850 60.212 60.388 60.529 60.626 61.442 61.566 61.702 61.919 61.972 62.099 62.190 62.256 62.342 62.574 62.724 63.191 63.328 63.422 63.514 63.650 63.904 63.985 64.031 64.042 64.189 64.415 64.812 64.926 64.988 65.032 65.077 65.123 65.206 65.299 65.339 65.531 65.597 65.610 65.817 65.858 65.985 66.127 66.248 66.251 66.365 66.390 66.453 66.482 66.639 67.066 67.106 67.309 67.609 67.618 67.694 67.708 67.766 67.812 67.891 67.929 67.930 68.264 68.407 68.425 68.463 68.569 68.710 68.881 68.960 69.009 69.028 69.049 69.204 69.269 69.309 69.338 69.360 69.419 69.456 69.474 69.751 69.782 69.796 70.000 70.009 70.103 
query 2 nn's (4082, 5859): 435470 (4103) 76351 (5317) 473207 (5280) 604626 (4097) 907166 (5172) 142229 (4776) 290643 (5230) 867372 (5230) 423023 (5239) 949063 (4593) 184588 (5632) 519648 (4122) 597155 (4822) 782560 (4366) 50122 (5663) 84539 (5643) 497144 (4142) 236165 (5450) 558501 (5059) 819590 (4135) 508045 (4277) 305326 (5264) 328799 (5567) 932543 (4118) 781678 (4994) 71259 (5747) 277446 (5024) 554135 (4709) 436932 (5555) 377529 (4688) 679824 (4571) 712602 (4487) 569017 (4765) 433589 (5709) 854843 (5388) 17420 (5022) 247261 (5397) 167374 (5739) 438213 (4538) 674462 (4287) 530526 (4798) 947106 (4774) 392694 (4216) 815597 (5254) 493014 (4115) 601030 (5333) 816913 (4756) 692734 (4603) 676264 (4336) 432424 (5134) 499626 (4172) 366114 (5339) 258599 (5339) 909566 (4479) 239982 (5050) 882530 (4430) 784717 (4535) 532465 (4866) 130066 (4554) 942850 (4324) 558132 (5707) 231442 (5117) 359987 (5430) 871871 (4478) 597346 (4542) 859440 (5646) 100836 (4479) 202908 (4271) 909386 (4633) 527491 (5579) 427979 (4299) 14572 (5342) 139829 (5411) 24385 (5169) 285773 (5796) 424122 (5216) 458022 (4323) 927381 (4360) 996864 (4590) 969134 (5287) 658906 (4449) 231139 (4147) 400856 (4803) 827250 (5702) 870883 (5279) 758041 (5182) 161635 (4452) 779385 (5182) 800905 (5155) 675238 (5221) 366185 (4312) 909774 (4350) 708642 (5317) 536587 (4423) 549287 (4327) 652195 (4535) 489405 (5701) 770310 (5609) 307131 (5068) 823346 (4218) 
     dis: 	135.721 141.252 141.696 141.867 142.668 142.683 143.368 143.368 143.631 144.163 144.632 144.949 145.067 145.118 145.334 145.486 145.650 146.131 146.192 146.292 146.517 146.916 147.475 147.521 147.704 147.946 148.164 148.335 148.410 148.485 148.536 148.722 149.251 149.370 149.894 149.907 150.285 150.301 150.501 150.561 150.566 150.692 150.858 151.028 151.048 151.076 151.268 151.346 151.575 151.592 151.653 151.658 151.780 151.821 152.279 152.346 152.488 152.592 152.687 152.728 152.845 152.903 152.935 152.949 152.992 152.996 153.089 153.120 153.279 153.540 153.581 153.620 153.672 153.771 153.772 154.127 154.203 154.375 154.499 154.556 154.611 154.666 154.699 154.725 154.733 154.858 154.902 155.188 155.324 155.382 155.464 155.545 155.867 155.935 156.006 156.068 156.151 156.485 156.586 156.708 
query 3 nn's (2262, 3092): 608874 (2611) 117658 (2990) 871467 (2996) 717608 (2612) 523139 (2339) 312252 (2292) 258253 (2335) 849185 (2837) 509845 (3059) 101897 (2384) 633590 (2353) 858706 (2801) 849697 (2919) 19718 (2359) 966722 (2387) 707130 (2333) 352736 (2415) 737025 (2790) 771511 (2736) 30000 (2697) 471359 (2978) 798630 (2446) 399100 (3047) 795823 (2418) 712956 (2338) 817369 (2332) 733667 (2990) 457861 (2688) 918714 (2641) 831224 (2491) 243530 (2935) 590966 (2778) 976089 (2681) 267098 (2969) 405398 (2319) 684080 (2336) 613643 (2330) 956822 (2719) 656478 (2421) 292249 (2445) 145583 (2266) 178428 (2642) 291162 (3074) 247033 (2415) 478079 (2873) 715925 (2919) 825275 (2492) 288929 (2357) 217161 (2663) 544996 (2330) 119905 (2323) 588414 (2601) 451866 (2646) 665817 (2828) 629155 (2420) 218807 (2348) 244054 (2381) 212398 (2966) 44918 (2661) 3917 (2319) 322631 (2318) 726796 (2932) 554657 (2471) 361877 (2915) 200470 (2419) 377220 (2698) 766795 (2538) 474688 (2346) 596303 (2414) 323837 (2773) 979403 (2654) 925084 (2995) 315960 (2305) 561081 (2585) 949836 (3012) 822302 (2991) 970365 (2766) 96588 (2525) 547760 (2874) 188351 (2352) 959823 (2462) 911902 (2603) 584458 (2749) 612251 (2721) 570726 (2562) 302909 (2462) 741934 (3067) 627793 (2430) 845672 (2591) 254360 (2922) 151262 (2660) 537075 (2843) 658896 (3028) 904696 (2428) 340079 (2293) 564515 (2469) 19423 (2880) 567044 (2461) 72691 (2622) 610896 (2768) 
     dis: 	177.477 184.267 185.836 185.953 186.303 186.915 186.954 188.542 188.699 189.435 189.866 189.974 190.094 190.694 191.237 191.816 191.997 192.041 192.242 192.243 192.279 192.351 192.360 192.444 192.511 192.693 192.797 193.233 193.546 193.615 193.683 193.866 194.033 194.058 194.299 194.318 194.339 194.406 194.437 194.476 194.570 194.629 194.698 194.977 194.984 195.007 195.028 195.084 195.136 195.217 195.272 195.625 195.676 195.692 195.710 195.875 195.880 195.905 195.949 195.950 196.062 196.300 196.547 196.561 196.616 196.619 196.650 196.809 196.837 196.881 196.902 196.933 197.065 197.111 197.113 197.258 197.292 197.299 197.327 197.670 197.731 197.783 197.784 197.791 197.859 197.872 197.879 197.904 197.914 197.963 198.017 198.053 198.170 198.366 198.466 198.472 198.477 198.478 198.694 198.777 
query 4 nn's (16428, 32488): 565522 (19123) 343865 (20909) 272496 (18617) 864885 (19198) 302474 (17449) 4088 (17006) 275060 (16756) 552830 (32019) 386301 (20767) 751020 (27082) 355417 (18277) 116068 (16968) 293069 (18042) 447832 (18420) 670582 (19694) 364055 (30344) 215246 (16692) 43472 (19642) 461668 (22573) 433585 (22578) 135006 (19823) 482871 (31752) 80632 (30566) 402419 (17404) 969231 (24228) 563483 (25877) 873208 (30361) 431001 (21575) 78554 (27618) 290057 (16747) 153984 (18166) 761157 (16912) 874283 (25622) 556246 (19761) 142006 (17347) 827661 (20637) 131389 (19666) 623593 (18134) 577821 (23826) 383160 (23668) 588204 (17716) 684777 (27160) 829421 (19896) 583217 (23326) 283216 (17793) 217696 (21238) 656479 (16617) 412572 (17029) 14463 (29424) 331288 (21606) 822401 (26342) 762346 (27676) 592893 (18577) 129404 (23330) 672303 (25764) 311830 (19606) 196780 (18444) 259071 (30286) 789423 (22571) 337037 (29716) 403925 (18478) 767376 (23800) 892556 (29245) 910184 (18050) 677549 (22169) 866715 (16877) 371469 (19396) 688128 (27897) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	79.761 93.190 93.271 95.693 102.008 107.351 108.890 112.116 112.985 115.876 118.266 120.623 122.454 131.431 136.046 136.089 137.921 141.973 144.884 145.103 150.147 157.582 158.153 160.879 162.646 166.233 166.339 168.688 169.100 173.069 175.554 175.576 177.402 182.206 182.848 183.373 188.367 194.496 201.050 202.767 204.364 207.432 210.626 210.970 211.591 214.906 218.588 218.922 223.460 231.479 232.402 232.798 235.157 253.747 261.220 274.269 274.959 277.897 285.642 289.065 320.178 330.150 344.544 362.199 465.603 649.235 651.359 731.496 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 35.506s ] *** Query time: 25.428
qps: 393.268
 *** HNSW recall 
HNSW get 590694 postive res from 1000000 results, recall@100:0.591
recall dist(10% per bucket): 0.000 0.005 0.039 0.105 0.151 0.191 0.208 0.180 0.097 0.024 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 53472038, average: 5347.204
finished ivfpq index examples
[ 35.545s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 150 1024"
	User time (seconds): 29.16
	System time (seconds): 6.81
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:35.97
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4405160
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1861088
	Voluntary context switches: 1
	Involuntary context switches: 50
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:15
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 150
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.092s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.093s ] Loaded 10000 YTRGB1m queries
[ 0.160s ] Loaded ground truth, gt_size: 100
[ 0.160s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.208s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 28.474s ] Query results (vector ids, then distances):
query 0 nn's (1256, 1308): 510683 (1260) 776796 (1294) 857336 (1283) 242809 (1257) 301718 (1269) 379533 (1299) 872768 (1301) 361566 (1306) 751512 (1279) 953026 (1286) 318062 (1276) 965606 (1269) 803931 (1273) 133980 (1272) 962051 (1269) 394184 (1287) 835655 (1265) 142657 (1266) 935805 (1294) 153834 (1285) 304830 (1285) 22091 (1274) 484838 (1280) 732933 (1292) 677279 (1267) 109656 (1261) 375564 (1257) 371282 (1261) 412995 (1292) 39540 (1257) 904187 (1287) 100399 (1279) 61296 (1276) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	92.935 94.695 97.720 103.930 106.469 106.652 107.628 108.085 108.840 110.732 111.452 113.607 113.698 114.208 115.382 116.657 117.378 119.083 124.520 126.230 128.301 132.036 133.240 135.478 137.634 141.127 141.351 143.194 144.220 176.611 178.073 201.508 252.502 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (8869, 9273): 853723 (9251) 289226 (9045) 899467 (9013) 146952 (9262) 67855 (9144) 189649 (9182) 39208 (9268) 474261 (8914) 345668 (8887) 265730 (8953) 737956 (9075) 305825 (9235) 43518 (9029) 304295 (8982) 723029 (9119) 440798 (9058) 702455 (8906) 909568 (9011) 845733 (9049) 334003 (8964) 951198 (8919) 147942 (9023) 473562 (9204) 11373 (9143) 427998 (9207) 283126 (9121) 565027 (9001) 541403 (9026) 609872 (9053) 317295 (8988) 164604 (9152) 18131 (8881) 796205 (9014) 756342 (9190) 176047 (9252) 235041 (9152) 476041 (9034) 938918 (8909) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	54.131 60.343 61.078 63.427 67.867 68.242 68.813 70.986 71.223 72.128 72.439 72.615 73.822 77.543 77.858 78.111 78.342 79.120 81.168 82.537 85.153 86.604 87.017 88.971 90.917 92.488 92.870 105.618 114.850 115.468 115.567 118.725 167.248 237.299 247.136 251.257 443.841 483.820 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1883, 1943): 476128 (1903) 620703 (1905) 891387 (1904) 159822 (1884) 862477 (1910) 281526 (1904) 248211 (1901) 351493 (1942) 839265 (1886) 568504 (1943) 290935 (1886) 120594 (1902) 962748 (1916) 814997 (1884) 568894 (1933) 187478 (1905) 886493 (1884) 172282 (1943) 921897 (1925) 736907 (1917) 729778 (1903) 249613 (1916) 983636 (1904) 193390 (1927) 405769 (1922) 814507 (1935) 437489 (1899) 672556 (1929) 165953 (1891) 204291 (1910) 630586 (1903) 639234 (1938) 419962 (1927) 281504 (1906) 527914 (1910) 91942 (1932) 810170 (1928) 339494 (1933) 350089 (1916) 629050 (1890) 871690 (1901) 192749 (1914) 609353 (1942) 288101 (1910) 953484 (1908) 604150 (1905) 210283 (1936) 167824 (1939) 128486 (1888) 594844 (1904) 931426 (1928) 916174 (1929) 678453 (1904) 119235 (1911) 914775 (1903) 188018 (1908) 643411 (1893) 34705 (1926) 88424 (1888) 568519 (1908) 164065 (1886) 676583 (1917) 683530 (1922) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	141.927 148.201 148.590 149.309 150.065 152.555 152.762 152.879 155.035 155.412 155.821 156.693 157.273 158.007 158.261 158.339 159.321 160.105 160.540 160.708 160.925 163.175 164.866 165.180 166.215 166.369 168.874 170.464 170.597 171.240 171.939 173.445 174.794 175.953 176.421 176.886 179.525 179.894 181.595 182.464 187.015 191.362 204.885 207.035 208.872 211.667 212.847 214.435 217.757 222.424 228.646 229.585 232.900 242.860 247.980 256.726 279.050 281.327 332.092 355.921 445.379 502.218 801.915 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (3917, 4053): 609297 (3970) 963521 (4034) 749227 (3925) 387378 (4031) 150035 (3961) 254201 (3976) 184514 (4030) 257384 (4007) 573373 (3988) 373578 (3997) 186394 (3987) 454508 (3990) 826206 (4034) 762596 (3982) 80874 (4027) 360219 (3922) 672148 (3991) 178264 (3967) 920741 (3924) 304402 (3937) 243387 (3918) 789040 (4008) 850476 (4050) 932093 (4035) 502675 (3983) 261311 (3983) 61132 (3966) 744902 (4037) 114735 (3969) 445146 (3947) 353112 (3977) 555305 (4010) 666743 (4015) 165130 (4013) 900029 (3998) 183396 (3978) 968992 (4007) 500260 (3942) 353082 (3958) 303906 (4041) 483839 (3981) 155559 (3965) 279949 (3930) 213066 (4007) 620393 (3948) 677749 (3991) 141784 (4003) 958817 (3922) 523429 (3941) 644406 (4046) 322991 (3924) 36287 (3929) 572356 (4037) 262127 (3940) 29747 (3940) 455631 (3988) 431979 (3995) 774878 (3952) 267277 (3986) 113465 (3938) 348403 (4052) 316737 (3927) 943162 (3917) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	184.386 191.211 192.834 192.976 194.914 195.990 199.257 199.617 199.992 200.369 201.556 201.819 202.231 202.711 202.932 204.071 204.075 204.163 204.168 204.842 204.879 204.955 204.977 205.923 206.933 207.440 207.697 207.861 207.871 208.067 208.094 208.695 210.806 210.841 211.962 212.059 212.431 212.656 213.081 214.493 214.606 217.735 219.610 221.454 222.216 222.603 223.537 225.359 227.477 230.245 232.136 233.393 244.048 244.503 245.558 255.179 275.937 302.569 309.212 362.267 400.063 487.594 555.181 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (6195, 6441): 266702 (6225) 619953 (6242) 82323 (6199) 246790 (6322) 477947 (6220) 133257 (6213) 291473 (6438) 931967 (6363) 123181 (6420) 793115 (6413) 982708 (6298) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	89.644 132.251 142.849 154.143 180.409 182.511 194.887 220.604 245.075 285.538 287.317 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 28.475s ] *** Query time: 19.546
qps: 511.623
 *** HNSW recall 
HNSW get 175841 postive res from 1000000 results, recall@100:0.176
recall dist(10% per bucket): 0.201 0.416 0.279 0.090 0.013 0.001 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 53472038, average: 5347.204
finished ivfpq index examples
[ 28.505s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 150 1024"
	User time (seconds): 25.41
	System time (seconds): 3.37
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:28.80
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4405248
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 1100712
	Voluntary context switches: 3
	Involuntary context switches: 118
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:33
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 150
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.187s ] Loaded metadata, 1000000 attr's found
[ 0.187s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.211s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.213s ] Loaded 10000 YTRGB1m queries
[ 0.336s ] Loaded ground truth, gt_size: 100
[ 0.336s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.576s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 41.695s ] Query results (vector ids, then distances):
query 0 nn's (2164, 2171): 509736 (2170) 733856 (2169) 537894 (2165) 765851 (2165) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	100.257 105.957 116.933 121.053 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (4231, 4245): 210350 (4235) 189071 (4233) 846901 (4242) 284592 (4233) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	70.158 73.131 82.528 82.540 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (24551, 24732): 943915 (24695) 787895 (24560) 408697 (24603) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	188.503 199.022 285.392 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (2590, 2598): 845672 (2591) 879952 (2590) 430156 (2594) 443198 (2590) 124111 (2598) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	197.914 227.478 248.108 255.151 394.094 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (5249, 5268): 297194 (5257) 995312 (5250) 509510 (5267) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	163.781 188.011 334.961 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 41.695s ] *** Query time: 30.785
qps: 324.833
 *** HNSW recall 
HNSW get 29934 postive res from 1000000 results, recall@100:0.030
recall dist(10% per bucket): 0.989 0.011 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 53472038, average: 5347.204
finished ivfpq index examples
[ 41.734s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 150 1024"
	User time (seconds): 33.79
	System time (seconds): 8.42
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:42.36
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4404940
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2242884
	Voluntary context switches: 0
	Involuntary context switches: 113
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
