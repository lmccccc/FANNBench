Start time: 05:56
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_6_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 0.066s ] Loaded metadata, 1000000 attr's found
[ 0.066s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.078s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.079s ] Loaded 10000 redcaps1m queries
[ 0.146s ] Loaded ground truth, gt_size: 100
[ 0.146s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 1.823s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.499
[ 32.894s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 727106 (6) 268161 (6) 646437 (6) 812018 (6) 64073 (6) 864174 (6) 302070 (6) 524418 (6) 790037 (6) 84548 (6) 807005 (6) 997247 (6) 334544 (6) 364290 (6) 465841 (6) 571852 (6) 309200 (6) 363324 (6) 736934 (6) 988753 (6) 968022 (6) 596166 (6) 606467 (6) 514381 (6) 171 (6) 654910 (6) 478100 (6) 678814 (6) 790030 (6) 760995 (6) 568912 (6) 533175 (6) 472918 (6) 124180 (6) 439788 (6) 795414 (6) 569239 (6) 105181 (6) 953733 (6) 493307 (6) 679931 (6) 345358 (6) 174023 (6) 71366 (6) 996728 (6) 370277 (6) 540453 (6) 331521 (6) 159325 (6) 601044 (6) 323370 (6) 760479 (6) 460924 (6) 486165 (6) 13080 (6) 640854 (6) 295694 (6) 526743 (6) 373982 (6) 890540 (6) 552569 (6) 184145 (6) 510698 (6) 919512 (6) 319315 (6) 825159 (6) 362341 (6) 509649 (6) 981881 (6) 965396 (6) 662170 (6) 753286 (6) 393166 (6) 81158 (6) 173442 (6) 484885 (6) 570575 (6) 736452 (6) 859257 (6) 77010 (6) 42266 (6) 138125 (6) 437827 (6) 149377 (6) 355318 (6) 947396 (6) 595179 (6) 279457 (6) 743765 (6) 897892 (6) 692677 (6) 596948 (6) 605939 (6) 758723 (6) 80643 (6) 530994 (6) 604591 (6) 144940 (6) 693096 (6) 628949 (6) 
     dis: 	0.624 0.640 0.679 0.740 0.745 0.747 0.755 0.770 0.771 0.775 0.783 0.788 0.795 0.799 0.799 0.802 0.805 0.806 0.808 0.822 0.828 0.838 0.842 0.848 0.848 0.855 0.863 0.866 0.866 0.868 0.868 0.869 0.873 0.878 0.881 0.883 0.889 0.892 0.892 0.894 0.896 0.896 0.900 0.901 0.905 0.906 0.906 0.907 0.908 0.910 0.910 0.912 0.913 0.917 0.918 0.919 0.919 0.921 0.921 0.924 0.925 0.925 0.925 0.928 0.929 0.929 0.931 0.931 0.934 0.934 0.938 0.938 0.941 0.941 0.942 0.942 0.945 0.945 0.947 0.948 0.949 0.950 0.950 0.950 0.950 0.950 0.952 0.954 0.954 0.955 0.956 0.957 0.957 0.958 0.959 0.959 0.960 0.960 0.961 0.961 
query 1 nn's (6, 6): 363220 (6) 253654 (6) 666880 (6) 622447 (6) 660394 (6) 964028 (6) 428754 (6) 427957 (6) 139424 (6) 896567 (6) 442989 (6) 30989 (6) 667007 (6) 989731 (6) 994014 (6) 459927 (6) 979295 (6) 848169 (6) 439637 (6) 997966 (6) 832389 (6) 661716 (6) 848037 (6) 163712 (6) 441534 (6) 630058 (6) 671340 (6) 118532 (6) 681550 (6) 577336 (6) 994569 (6) 964128 (6) 408156 (6) 51525 (6) 857939 (6) 226358 (6) 698433 (6) 395948 (6) 544577 (6) 925657 (6) 271263 (6) 753841 (6) 766866 (6) 455611 (6) 620586 (6) 602684 (6) 39189 (6) 110364 (6) 377202 (6) 304095 (6) 265490 (6) 557922 (6) 272122 (6) 418536 (6) 563357 (6) 353761 (6) 987081 (6) 769260 (6) 299005 (6) 80871 (6) 60676 (6) 235619 (6) 487009 (6) 584466 (6) 920134 (6) 816247 (6) 971318 (6) 844021 (6) 295835 (6) 916706 (6) 855763 (6) 244515 (6) 288542 (6) 77283 (6) 811301 (6) 672841 (6) 417828 (6) 671475 (6) 663858 (6) 750270 (6) 58319 (6) 1519 (6) 384623 (6) 116279 (6) 387184 (6) 885260 (6) 791914 (6) 366937 (6) 722531 (6) 366807 (6) 8007 (6) 722158 (6) 601939 (6) 958421 (6) 678677 (6) 485598 (6) 471226 (6) 316697 (6) 697547 (6) 634858 (6) 
     dis: 	0.092 0.098 0.100 0.103 0.105 0.106 0.108 0.110 0.111 0.111 0.111 0.111 0.112 0.114 0.114 0.115 0.115 0.115 0.116 0.116 0.117 0.117 0.118 0.118 0.118 0.118 0.119 0.119 0.119 0.119 0.120 0.120 0.120 0.120 0.122 0.122 0.122 0.122 0.122 0.123 0.123 0.124 0.124 0.124 0.124 0.124 0.124 0.124 0.124 0.125 0.126 0.126 0.126 0.126 0.127 0.127 0.127 0.127 0.128 0.128 0.128 0.128 0.128 0.128 0.128 0.129 0.129 0.129 0.129 0.129 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.133 0.133 
query 2 nn's (6, 6): 355537 (6) 964377 (6) 940490 (6) 620585 (6) 299577 (6) 374226 (6) 894254 (6) 718316 (6) 773055 (6) 328504 (6) 911854 (6) 792564 (6) 161603 (6) 494541 (6) 328089 (6) 743927 (6) 41616 (6) 980872 (6) 877537 (6) 971858 (6) 507734 (6) 381411 (6) 952981 (6) 444996 (6) 471110 (6) 665039 (6) 919763 (6) 95136 (6) 222697 (6) 25586 (6) 882709 (6) 423208 (6) 476689 (6) 726914 (6) 623737 (6) 33572 (6) 498025 (6) 604084 (6) 93860 (6) 202341 (6) 573824 (6) 230054 (6) 79399 (6) 870630 (6) 136876 (6) 509068 (6) 341373 (6) 403717 (6) 994934 (6) 72372 (6) 561163 (6) 957685 (6) 66777 (6) 88997 (6) 703151 (6) 261708 (6) 317022 (6) 985107 (6) 319345 (6) 557020 (6) 785259 (6) 184796 (6) 470869 (6) 14154 (6) 116449 (6) 649892 (6) 915391 (6) 578528 (6) 439807 (6) 884477 (6) 490170 (6) 87145 (6) 73413 (6) 770456 (6) 752639 (6) 10885 (6) 937121 (6) 841847 (6) 211045 (6) 259618 (6) 435592 (6) 962379 (6) 943514 (6) 620162 (6) 89667 (6) 215560 (6) 546876 (6) 866946 (6) 935988 (6) 290984 (6) 855414 (6) 657 (6) 662999 (6) 62201 (6) 646572 (6) 600470 (6) 699521 (6) 382759 (6) 736467 (6) 309618 (6) 
     dis: 	0.222 0.225 0.245 0.260 0.264 0.264 0.264 0.266 0.266 0.271 0.271 0.273 0.276 0.277 0.278 0.279 0.280 0.280 0.281 0.282 0.282 0.284 0.285 0.285 0.285 0.285 0.286 0.286 0.286 0.287 0.288 0.289 0.289 0.289 0.289 0.290 0.291 0.292 0.292 0.293 0.293 0.294 0.294 0.294 0.296 0.296 0.297 0.297 0.297 0.298 0.298 0.299 0.299 0.300 0.301 0.301 0.301 0.301 0.302 0.303 0.304 0.305 0.305 0.305 0.305 0.305 0.305 0.306 0.306 0.306 0.307 0.307 0.308 0.308 0.308 0.308 0.308 0.308 0.309 0.309 0.309 0.309 0.310 0.310 0.310 0.310 0.310 0.311 0.312 0.312 0.313 0.313 0.314 0.314 0.314 0.314 0.314 0.315 0.315 0.315 
query 3 nn's (6, 6): 583699 (6) 689368 (6) 428067 (6) 124464 (6) 595884 (6) 609006 (6) 635563 (6) 687871 (6) 905275 (6) 413550 (6) 213744 (6) 305237 (6) 25831 (6) 994151 (6) 382748 (6) 456770 (6) 246538 (6) 108295 (6) 1172 (6) 183160 (6) 810505 (6) 758927 (6) 879049 (6) 269754 (6) 421931 (6) 471055 (6) 694867 (6) 226331 (6) 640563 (6) 671717 (6) 219959 (6) 174382 (6) 549278 (6) 800827 (6) 397607 (6) 696027 (6) 994604 (6) 663784 (6) 184010 (6) 672565 (6) 933991 (6) 799434 (6) 301836 (6) 17746 (6) 931871 (6) 684978 (6) 237125 (6) 433518 (6) 382010 (6) 677322 (6) 100162 (6) 218254 (6) 423285 (6) 418179 (6) 412295 (6) 135464 (6) 332772 (6) 669242 (6) 280271 (6) 694334 (6) 835170 (6) 840055 (6) 944408 (6) 923128 (6) 807512 (6) 237881 (6) 935542 (6) 315020 (6) 37631 (6) 130248 (6) 850509 (6) 642929 (6) 101336 (6) 90074 (6) 548723 (6) 355926 (6) 551062 (6) 613946 (6) 720454 (6) 296579 (6) 775097 (6) 697623 (6) 61919 (6) 952161 (6) 495862 (6) 985106 (6) 601576 (6) 448941 (6) 953342 (6) 528192 (6) 99925 (6) 891992 (6) 449855 (6) 4943 (6) 693433 (6) 365793 (6) 948694 (6) 768716 (6) 67641 (6) 995244 (6) 
     dis: 	0.401 0.402 0.426 0.445 0.456 0.456 0.458 0.460 0.461 0.470 0.475 0.494 0.494 0.496 0.497 0.497 0.504 0.507 0.507 0.508 0.509 0.511 0.513 0.514 0.514 0.517 0.520 0.520 0.522 0.524 0.526 0.527 0.532 0.532 0.537 0.538 0.538 0.538 0.538 0.539 0.540 0.542 0.544 0.544 0.544 0.545 0.546 0.547 0.547 0.547 0.549 0.551 0.552 0.553 0.553 0.554 0.555 0.557 0.557 0.559 0.560 0.560 0.560 0.560 0.560 0.561 0.561 0.562 0.562 0.564 0.565 0.566 0.567 0.568 0.568 0.568 0.569 0.569 0.569 0.569 0.570 0.570 0.570 0.570 0.571 0.572 0.572 0.572 0.573 0.573 0.573 0.573 0.574 0.574 0.574 0.575 0.575 0.575 0.576 0.576 
query 4 nn's (6, 6): 522469 (6) 582698 (6) 797013 (6) 176027 (6) 234795 (6) 931553 (6) 279888 (6) 46163 (6) 68136 (6) 742084 (6) 105030 (6) 589135 (6) 929991 (6) 455512 (6) 834676 (6) 59094 (6) 908309 (6) 458642 (6) 222228 (6) 222372 (6) 902523 (6) 969773 (6) 567017 (6) 910110 (6) 143565 (6) 590482 (6) 282395 (6) 262612 (6) 511053 (6) 573206 (6) 601541 (6) 857192 (6) 599829 (6) 605725 (6) 51681 (6) 173575 (6) 49802 (6) 982040 (6) 500007 (6) 37748 (6) 584115 (6) 63749 (6) 98599 (6) 148545 (6) 476701 (6) 760527 (6) 464808 (6) 563854 (6) 827261 (6) 56749 (6) 357242 (6) 954446 (6) 101369 (6) 635293 (6) 850663 (6) 378800 (6) 365642 (6) 921524 (6) 709494 (6) 528890 (6) 516225 (6) 311214 (6) 583639 (6) 959099 (6) 863840 (6) 337236 (6) 126511 (6) 596233 (6) 459414 (6) 724075 (6) 604226 (6) 421589 (6) 157179 (6) 604672 (6) 472675 (6) 148956 (6) 610503 (6) 854292 (6) 404390 (6) 14408 (6) 476522 (6) 944106 (6) 124122 (6) 286504 (6) 120334 (6) 349764 (6) 864439 (6) 145593 (6) 481726 (6) 716943 (6) 402334 (6) 368404 (6) 151023 (6) 285539 (6) 880022 (6) 902864 (6) 476930 (6) 664967 (6) 974507 (6) 651595 (6) 
     dis: 	0.259 0.261 0.267 0.269 0.279 0.279 0.298 0.299 0.304 0.307 0.310 0.311 0.315 0.316 0.316 0.317 0.320 0.320 0.324 0.324 0.325 0.325 0.326 0.326 0.330 0.331 0.331 0.332 0.333 0.334 0.334 0.334 0.335 0.337 0.337 0.338 0.338 0.339 0.340 0.341 0.341 0.343 0.344 0.344 0.345 0.346 0.350 0.350 0.351 0.351 0.351 0.352 0.352 0.353 0.354 0.354 0.354 0.354 0.354 0.354 0.355 0.355 0.355 0.356 0.356 0.357 0.357 0.357 0.358 0.358 0.359 0.359 0.360 0.360 0.363 0.364 0.364 0.365 0.366 0.366 0.366 0.367 0.367 0.367 0.369 0.369 0.369 0.369 0.369 0.369 0.369 0.370 0.371 0.371 0.371 0.372 0.372 0.372 0.373 0.373 
[ 32.894s ] *** Query time: 25.938
qps: 385.534
 *** ivfpq recall 
ivfpq get 879959 postive res from 1000000 results, recall@100:0.880
recall dist(10% per bucket): 0.000 0.000 0.001 0.004 0.012 0.029 0.053 0.095 0.182 0.615 0.009 
finished ivfpq index examples
[ 32.923s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_6_256 20 512"
	User time (seconds): 31.69
	System time (seconds): 1.01
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:32.99
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1346988
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 817667
	Voluntary context switches: 1112
	Involuntary context switches: 116
	Swaps: 0
	File system inputs: 134416
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:06
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_10_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 0.141s ] Loaded metadata, 1000000 attr's found
[ 0.141s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.201s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.219s ] Loaded 10000 redcaps1m queries
[ 0.361s ] Loaded ground truth, gt_size: 100
[ 0.361s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.053s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 24.583s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 64073 (10) 7102 (10) 554724 (10) 364290 (10) 596166 (10) 927993 (10) 699054 (10) 909887 (10) 174023 (10) 71366 (10) 996728 (10) 540453 (10) 385435 (10) 760479 (10) 704461 (10) 319315 (10) 827492 (10) 81158 (10) 45927 (10) 859257 (10) 42266 (10) 530994 (10) 908109 (10) 212777 (10) 712904 (10) 730882 (10) 240250 (10) 15685 (10) 337818 (10) 847502 (10) 664838 (10) 333441 (10) 818180 (10) 587985 (10) 35687 (10) 403930 (10) 214056 (10) 531563 (10) 991709 (10) 451231 (10) 402654 (10) 293992 (10) 37912 (10) 897452 (10) 809288 (10) 327007 (10) 479231 (10) 598005 (10) 646373 (10) 219301 (10) 535826 (10) 137752 (10) 876271 (10) 836051 (10) 808237 (10) 885522 (10) 388302 (10) 610978 (10) 809385 (10) 965996 (10) 550350 (10) 952681 (10) 333540 (10) 719450 (10) 306827 (10) 401627 (10) 479220 (10) 319303 (10) 49605 (10) 986162 (10) 447878 (10) 414882 (10) 731327 (10) 581260 (10) 698236 (10) 336364 (10) 66314 (10) 943733 (10) 731563 (10) 719951 (10) 638270 (10) 764054 (10) 289524 (10) 950599 (10) 580903 (10) 359875 (10) 121606 (10) 378456 (10) 817660 (10) 916671 (10) 389572 (10) 117831 (10) 740777 (10) 831641 (10) 745572 (10) 278425 (10) 902247 (10) 567169 (10) 297780 (10) 948707 (10) 
     dis: 	0.745 0.754 0.793 0.799 0.838 0.864 0.888 0.896 0.900 0.901 0.905 0.906 0.908 0.912 0.927 0.929 0.935 0.941 0.942 0.947 0.949 0.959 0.974 0.983 0.985 0.985 0.986 0.988 0.989 0.990 0.991 0.992 0.994 0.998 0.998 0.999 1.002 1.004 1.005 1.017 1.018 1.019 1.020 1.023 1.024 1.024 1.025 1.027 1.027 1.028 1.032 1.032 1.034 1.035 1.036 1.036 1.037 1.037 1.038 1.039 1.042 1.043 1.043 1.044 1.046 1.046 1.047 1.047 1.048 1.048 1.049 1.050 1.050 1.050 1.053 1.055 1.055 1.057 1.057 1.058 1.059 1.059 1.059 1.059 1.060 1.060 1.060 1.062 1.064 1.065 1.066 1.066 1.067 1.068 1.068 1.068 1.069 1.070 1.070 1.070 
query 1 nn's (10, 10): 428754 (10) 361537 (10) 979295 (10) 439637 (10) 424951 (10) 681550 (10) 709969 (10) 408156 (10) 371263 (10) 753841 (10) 55881 (10) 837200 (10) 105750 (10) 785418 (10) 858634 (10) 288542 (10) 811301 (10) 82481 (10) 366937 (10) 853505 (10) 633780 (10) 937262 (10) 41053 (10) 195481 (10) 771674 (10) 469350 (10) 843111 (10) 698871 (10) 915755 (10) 462482 (10) 527435 (10) 691606 (10) 24719 (10) 507366 (10) 710324 (10) 832229 (10) 859050 (10) 200454 (10) 246783 (10) 280685 (10) 23590 (10) 561139 (10) 980350 (10) 598436 (10) 30217 (10) 250668 (10) 702451 (10) 616405 (10) 24923 (10) 865462 (10) 652931 (10) 226285 (10) 312232 (10) 894014 (10) 385587 (10) 959689 (10) 427462 (10) 559169 (10) 615320 (10) 682771 (10) 712818 (10) 977847 (10) 457547 (10) 905827 (10) 892547 (10) 726551 (10) 547222 (10) 601637 (10) 32573 (10) 808151 (10) 355234 (10) 666353 (10) 181047 (10) 630147 (10) 606890 (10) 302387 (10) 314837 (10) 653651 (10) 161138 (10) 918380 (10) 132397 (10) 396522 (10) 157744 (10) 143623 (10) 447406 (10) 452752 (10) 788181 (10) 66765 (10) 578846 (10) 845466 (10) 272503 (10) 525392 (10) 741927 (10) 279857 (10) 696364 (10) 524682 (10) 971379 (10) 349657 (10) 143541 (10) 495252 (10) 
     dis: 	0.108 0.110 0.115 0.116 0.119 0.119 0.120 0.120 0.121 0.124 0.125 0.125 0.127 0.129 0.129 0.130 0.130 0.130 0.131 0.133 0.133 0.133 0.134 0.136 0.137 0.137 0.138 0.138 0.138 0.139 0.139 0.139 0.139 0.140 0.140 0.140 0.140 0.141 0.141 0.142 0.143 0.143 0.143 0.144 0.144 0.144 0.144 0.144 0.145 0.146 0.146 0.146 0.146 0.147 0.147 0.147 0.147 0.147 0.148 0.149 0.149 0.151 0.151 0.151 0.152 0.152 0.152 0.153 0.153 0.153 0.153 0.153 0.153 0.154 0.154 0.154 0.154 0.155 0.155 0.155 0.156 0.156 0.156 0.156 0.156 0.157 0.157 0.157 0.157 0.157 0.157 0.158 0.158 0.158 0.158 0.159 0.159 0.159 0.159 0.159 
query 2 nn's (10, 10): 964377 (10) 771849 (10) 400722 (10) 258758 (10) 903106 (10) 530996 (10) 65400 (10) 971858 (10) 381411 (10) 444996 (10) 564449 (10) 625921 (10) 253786 (10) 230054 (10) 818470 (10) 625576 (10) 557020 (10) 915391 (10) 304775 (10) 245232 (10) 201205 (10) 490170 (10) 943514 (10) 89667 (10) 63845 (10) 916423 (10) 62201 (10) 600470 (10) 825350 (10) 477079 (10) 549665 (10) 307736 (10) 554381 (10) 784303 (10) 97812 (10) 849125 (10) 584919 (10) 914567 (10) 419992 (10) 975511 (10) 772295 (10) 961842 (10) 821258 (10) 356390 (10) 537534 (10) 748721 (10) 465378 (10) 83455 (10) 659554 (10) 479261 (10) 334263 (10) 468882 (10) 697558 (10) 286812 (10) 915626 (10) 835469 (10) 490339 (10) 949079 (10) 789122 (10) 681405 (10) 634199 (10) 596926 (10) 882969 (10) 215608 (10) 311370 (10) 854690 (10) 69795 (10) 981107 (10) 347668 (10) 339857 (10) 347925 (10) 387561 (10) 579636 (10) 20476 (10) 277748 (10) 878621 (10) 491299 (10) 866201 (10) 479904 (10) 535146 (10) 660105 (10) 875002 (10) 603302 (10) 676930 (10) 508670 (10) 872428 (10) 588388 (10) 933951 (10) 15154 (10) 444753 (10) 645170 (10) 577241 (10) 117061 (10) 911700 (10) 802494 (10) 892414 (10) 705025 (10) 844029 (10) 293291 (10) 430652 (10) 
     dis: 	0.225 0.264 0.268 0.268 0.269 0.276 0.282 0.282 0.284 0.285 0.285 0.287 0.292 0.294 0.301 0.302 0.303 0.305 0.305 0.305 0.306 0.307 0.310 0.310 0.312 0.313 0.314 0.314 0.316 0.317 0.323 0.324 0.327 0.329 0.331 0.331 0.333 0.333 0.335 0.335 0.335 0.335 0.337 0.337 0.338 0.339 0.339 0.340 0.340 0.341 0.341 0.342 0.342 0.342 0.343 0.343 0.344 0.345 0.345 0.347 0.347 0.347 0.348 0.349 0.350 0.350 0.351 0.352 0.352 0.352 0.352 0.353 0.353 0.353 0.356 0.356 0.356 0.357 0.357 0.357 0.358 0.359 0.359 0.360 0.360 0.360 0.360 0.361 0.361 0.361 0.362 0.362 0.363 0.363 0.364 0.365 0.365 0.365 0.366 0.367 
query 3 nn's (10, 10): 305237 (10) 382748 (10) 694867 (10) 994604 (10) 382010 (10) 309349 (10) 135464 (10) 430670 (10) 706869 (10) 768716 (10) 67641 (10) 368426 (10) 289872 (10) 707074 (10) 231500 (10) 142896 (10) 740355 (10) 347025 (10) 209001 (10) 66280 (10) 463948 (10) 839233 (10) 166166 (10) 57618 (10) 240780 (10) 856275 (10) 627510 (10) 614709 (10) 378228 (10) 243006 (10) 731392 (10) 694326 (10) 890599 (10) 264846 (10) 657433 (10) 48205 (10) 25409 (10) 699155 (10) 584120 (10) 919630 (10) 206663 (10) 256278 (10) 596014 (10) 925671 (10) 87933 (10) 502874 (10) 365571 (10) 808278 (10) 605527 (10) 468412 (10) 932936 (10) 424107 (10) 986356 (10) 757919 (10) 397881 (10) 376659 (10) 387058 (10) 386573 (10) 462305 (10) 380301 (10) 511765 (10) 462132 (10) 818864 (10) 41548 (10) 175192 (10) 791691 (10) 343245 (10) 363108 (10) 695815 (10) 458620 (10) 495229 (10) 321984 (10) 229721 (10) 676444 (10) 890044 (10) 420568 (10) 40759 (10) 669924 (10) 538415 (10) 65490 (10) 250051 (10) 645070 (10) 742807 (10) 131375 (10) 546613 (10) 352356 (10) 17366 (10) 924564 (10) 95223 (10) 906513 (10) 367946 (10) 120108 (10) 461764 (10) 211779 (10) 222300 (10) 596501 (10) 514431 (10) 93809 (10) 639059 (10) 118891 (10) 
     dis: 	0.494 0.497 0.520 0.538 0.547 0.552 0.554 0.561 0.561 0.575 0.576 0.579 0.584 0.587 0.588 0.591 0.593 0.593 0.595 0.595 0.596 0.596 0.597 0.598 0.601 0.604 0.604 0.607 0.609 0.611 0.618 0.618 0.618 0.618 0.620 0.621 0.622 0.623 0.624 0.624 0.625 0.626 0.627 0.627 0.629 0.629 0.630 0.631 0.631 0.632 0.633 0.633 0.633 0.634 0.635 0.636 0.636 0.638 0.638 0.639 0.639 0.641 0.642 0.643 0.643 0.643 0.644 0.644 0.646 0.646 0.646 0.647 0.648 0.650 0.650 0.652 0.653 0.653 0.654 0.655 0.658 0.658 0.658 0.660 0.660 0.661 0.662 0.662 0.662 0.663 0.663 0.664 0.664 0.664 0.665 0.667 0.667 0.670 0.670 0.671 
query 4 nn's (10, 10): 797013 (10) 959629 (10) 878527 (10) 222228 (10) 567017 (10) 279836 (10) 732037 (10) 193229 (10) 235772 (10) 762488 (10) 56749 (10) 490515 (10) 354590 (10) 311214 (10) 863840 (10) 596233 (10) 89745 (10) 157179 (10) 746306 (10) 807413 (10) 506084 (10) 959185 (10) 268279 (10) 514616 (10) 933197 (10) 557403 (10) 864559 (10) 813936 (10) 542480 (10) 385892 (10) 139503 (10) 839671 (10) 968757 (10) 785149 (10) 186965 (10) 127746 (10) 447662 (10) 857426 (10) 872971 (10) 260203 (10) 699150 (10) 646918 (10) 899146 (10) 21973 (10) 512978 (10) 451188 (10) 132719 (10) 2786 (10) 64675 (10) 645343 (10) 637776 (10) 574239 (10) 413483 (10) 41746 (10) 994969 (10) 564862 (10) 745761 (10) 164969 (10) 976689 (10) 224737 (10) 412561 (10) 136925 (10) 731263 (10) 166723 (10) 50258 (10) 862489 (10) 63609 (10) 527390 (10) 220028 (10) 8786 (10) 542171 (10) 919571 (10) 606 (10) 531131 (10) 571456 (10) 648763 (10) 694025 (10) 65332 (10) 264680 (10) 665008 (10) 818057 (10) 622227 (10) 782340 (10) 735321 (10) 439281 (10) 416084 (10) 356311 (10) 5573 (10) 345107 (10) 54410 (10) 236631 (10) 201898 (10) 179386 (10) 636662 (10) 481320 (10) 858619 (10) 190342 (10) 280493 (10) 134266 (10) 843057 (10) 
     dis: 	0.267 0.293 0.303 0.324 0.326 0.332 0.334 0.334 0.350 0.351 0.351 0.352 0.353 0.355 0.356 0.357 0.358 0.360 0.367 0.368 0.375 0.378 0.379 0.380 0.381 0.382 0.382 0.383 0.384 0.384 0.385 0.386 0.388 0.388 0.390 0.393 0.394 0.395 0.395 0.403 0.404 0.406 0.407 0.407 0.409 0.409 0.410 0.410 0.410 0.414 0.415 0.415 0.416 0.416 0.417 0.417 0.418 0.418 0.420 0.422 0.422 0.423 0.425 0.425 0.425 0.426 0.426 0.427 0.429 0.429 0.429 0.429 0.430 0.430 0.432 0.433 0.434 0.434 0.435 0.435 0.436 0.438 0.439 0.439 0.440 0.440 0.441 0.441 0.443 0.443 0.443 0.444 0.444 0.444 0.445 0.447 0.447 0.448 0.448 0.449 
[ 24.583s ] *** Query time: 17.517
qps: 570.875
 *** ivfpq recall 
ivfpq get 779947 postive res from 1000000 results, recall@100:0.780
recall dist(10% per bucket): 0.000 0.001 0.008 0.022 0.051 0.083 0.127 0.169 0.200 0.330 0.010 
finished ivfpq index examples
[ 24.612s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_10_256 20 512"
	User time (seconds): 23.54
	System time (seconds): 0.77
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:24.75
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1347492
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 13
	Minor (reclaiming a frame) page faults: 335751
	Voluntary context switches: 1033
	Involuntary context switches: 38
	Swaps: 0
	File system inputs: 50088
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:14
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_19_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.065s ] Loaded metadata, 1000000 attr's found
[ 0.065s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.077s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.079s ] Loaded 10000 redcaps1m queries
[ 0.145s ] Loaded ground truth, gt_size: 100
[ 0.145s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 1.912s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 23.910s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 336934 (19) 472918 (19) 193999 (19) 866187 (19) 144195 (19) 755123 (19) 988288 (19) 837484 (19) 789108 (19) 173400 (19) 434740 (19) 407599 (19) 763128 (19) 868617 (19) 561207 (19) 718906 (19) 649642 (19) 422873 (19) 818966 (19) 908670 (19) 823550 (19) 236025 (19) 208480 (19) 124331 (19) 164880 (19) 618168 (19) 106697 (19) 503716 (19) 383322 (19) 425269 (19) 440384 (19) 787784 (19) 774383 (19) 275712 (19) 614691 (19) 224166 (19) 999762 (19) 646276 (19) 765857 (19) 333073 (19) 186224 (19) 404701 (19) 108373 (19) 878533 (19) 743439 (19) 266211 (19) 692714 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.844 0.873 0.944 0.975 0.987 0.997 1.020 1.065 1.078 1.078 1.081 1.082 1.084 1.105 1.109 1.121 1.123 1.128 1.132 1.138 1.139 1.145 1.164 1.170 1.171 1.175 1.175 1.183 1.185 1.191 1.206 1.207 1.208 1.212 1.234 1.235 1.240 1.248 1.263 1.264 1.275 1.281 1.284 1.290 1.326 1.342 1.377 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 526331 (19) 158846 (19) 264009 (19) 246783 (19) 434283 (19) 69776 (19) 805880 (19) 916232 (19) 357641 (19) 774551 (19) 532410 (19) 220610 (19) 178290 (19) 127320 (19) 291626 (19) 949001 (19) 303648 (19) 125446 (19) 356636 (19) 202933 (19) 336127 (19) 756517 (19) 731451 (19) 714440 (19) 431949 (19) 451915 (19) 415619 (19) 682193 (19) 397469 (19) 387248 (19) 712436 (19) 696276 (19) 77970 (19) 802685 (19) 517452 (19) 966935 (19) 578712 (19) 858352 (19) 339865 (19) 672270 (19) 328398 (19) 872137 (19) 640177 (19) 196391 (19) 863374 (19) 701323 (19) 370640 (19) 931480 (19) 294751 (19) 89042 (19) 85113 (19) 949383 (19) 567870 (19) 496355 (19) 512169 (19) 341975 (19) 544140 (19) 342349 (19) 164551 (19) 69950 (19) 305148 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.136 0.138 0.138 0.141 0.142 0.149 0.157 0.161 0.161 0.168 0.168 0.172 0.177 0.177 0.180 0.180 0.182 0.186 0.191 0.197 0.197 0.198 0.198 0.199 0.203 0.205 0.205 0.209 0.210 0.210 0.217 0.217 0.221 0.224 0.225 0.235 0.240 0.245 0.248 0.251 0.254 0.255 0.258 0.259 0.261 0.262 0.270 0.270 0.273 0.275 0.278 0.295 0.303 0.303 0.323 0.334 0.344 0.354 0.368 0.387 0.806 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 752639 (19) 916423 (19) 782944 (19) 366433 (19) 425512 (19) 537534 (19) 347848 (19) 387561 (19) 546593 (19) 249066 (19) 2227 (19) 166797 (19) 155587 (19) 402665 (19) 588699 (19) 238211 (19) 652706 (19) 518706 (19) 614780 (19) 561248 (19) 302530 (19) 557 (19) 318335 (19) 179676 (19) 563956 (19) 853434 (19) 331454 (19) 46232 (19) 302283 (19) 432628 (19) 617559 (19) 477149 (19) 365967 (19) 552285 (19) 881966 (19) 761794 (19) 308377 (19) 623938 (19) 888671 (19) 890527 (19) 832830 (19) 901813 (19) 703556 (19) 746930 (19) 445174 (19) 344582 (19) 753888 (19) 744218 (19) 955961 (19) 219619 (19) 923297 (19) 941628 (19) 88947 (19) 272483 (19) 830516 (19) 534932 (19) 529459 (19) 962224 (19) 567274 (19) 569795 (19) 530629 (19) 273399 (19) 979983 (19) 383734 (19) 376779 (19) 268163 (19) 147308 (19) 974428 (19) 296485 (19) 971298 (19) 138796 (19) 899564 (19) 411875 (19) 779368 (19) 434193 (19) 702211 (19) 990941 (19) 111833 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.308 0.313 0.321 0.329 0.332 0.338 0.353 0.353 0.357 0.358 0.359 0.365 0.373 0.380 0.382 0.383 0.386 0.389 0.389 0.392 0.392 0.394 0.394 0.397 0.399 0.400 0.401 0.403 0.404 0.406 0.409 0.417 0.418 0.419 0.423 0.428 0.431 0.432 0.436 0.440 0.449 0.460 0.469 0.488 0.489 0.492 0.493 0.499 0.501 0.502 0.502 0.503 0.504 0.505 0.505 0.505 0.506 0.507 0.509 0.510 0.514 0.516 0.538 0.538 0.541 0.547 0.560 0.562 0.562 0.573 0.593 0.613 0.635 0.637 0.641 0.667 0.669 0.724 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 687871 (19) 226331 (19) 493967 (19) 840258 (19) 231500 (19) 89977 (19) 938737 (19) 278147 (19) 584120 (19) 611390 (19) 388276 (19) 451260 (19) 117780 (19) 414971 (19) 592067 (19) 108439 (19) 145084 (19) 211388 (19) 549270 (19) 600352 (19) 683557 (19) 649540 (19) 654995 (19) 19058 (19) 844361 (19) 821435 (19) 573324 (19) 765686 (19) 996891 (19) 514909 (19) 490001 (19) 531600 (19) 484095 (19) 317730 (19) 406050 (19) 650113 (19) 803016 (19) 51823 (19) 20400 (19) 982795 (19) 771368 (19) 661696 (19) 613973 (19) 169970 (19) 287560 (19) 912910 (19) 531609 (19) 546921 (19) 711387 (19) 564715 (19) 788556 (19) 741501 (19) 876654 (19) 34603 (19) 363642 (19) 333423 (19) 877927 (19) 235397 (19) 113393 (19) 60264 (19) 174914 (19) 766687 (19) 832915 (19) 897556 (19) 630361 (19) 894412 (19) 284873 (19) 160955 (19) 852733 (19) 4421 (19) 947629 (19) 516298 (19) 516399 (19) 71379 (19) 863561 (19) 671911 (19) 545288 (19) 622047 (19) 164115 (19) 715510 (19) 408515 (19) 835729 (19) 151163 (19) 658089 (19) 752547 (19) 494278 (19) 979871 (19) 806760 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.460 0.520 0.557 0.581 0.588 0.602 0.618 0.620 0.624 0.650 0.655 0.661 0.663 0.665 0.668 0.669 0.673 0.674 0.675 0.678 0.691 0.702 0.710 0.716 0.717 0.723 0.731 0.732 0.739 0.744 0.744 0.754 0.755 0.758 0.761 0.761 0.766 0.769 0.770 0.771 0.778 0.779 0.784 0.784 0.785 0.786 0.787 0.789 0.789 0.790 0.796 0.796 0.797 0.800 0.802 0.805 0.806 0.810 0.821 0.822 0.823 0.832 0.835 0.838 0.840 0.847 0.851 0.852 0.853 0.854 0.859 0.875 0.882 0.889 0.890 0.895 0.908 0.910 0.923 0.943 0.945 0.963 0.967 0.981 1.002 1.004 1.016 1.120 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 522469 (19) 402334 (19) 393712 (19) 135893 (19) 826811 (19) 947998 (19) 862880 (19) 989983 (19) 25013 (19) 819697 (19) 896541 (19) 405287 (19) 673302 (19) 562180 (19) 234790 (19) 726960 (19) 337647 (19) 67891 (19) 663763 (19) 344486 (19) 717777 (19) 997740 (19) 335930 (19) 747341 (19) 80826 (19) 470365 (19) 255550 (19) 225334 (19) 94729 (19) 597621 (19) 954138 (19) 648881 (19) 679991 (19) 449828 (19) 920073 (19) 66832 (19) 699085 (19) 656573 (19) 100693 (19) 132937 (19) 300651 (19) 27808 (19) 613077 (19) 528256 (19) 4965 (19) 810642 (19) 271962 (19) 897455 (19) 155828 (19) 204495 (19) 591838 (19) 657645 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.259 0.369 0.378 0.411 0.415 0.423 0.429 0.437 0.441 0.444 0.449 0.458 0.458 0.470 0.473 0.477 0.477 0.479 0.482 0.488 0.493 0.504 0.520 0.537 0.539 0.540 0.541 0.542 0.543 0.548 0.549 0.551 0.551 0.569 0.574 0.575 0.591 0.594 0.596 0.608 0.620 0.621 0.629 0.631 0.638 0.643 0.645 0.645 0.660 0.695 0.727 0.792 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 23.910s ] *** Query time: 16.774
qps: 596.173
 *** ivfpq recall 
ivfpq get 392477 postive res from 1000000 results, recall@100:0.392
recall dist(10% per bucket): 0.006 0.071 0.206 0.269 0.207 0.135 0.066 0.032 0.009 0.000 0.000 
finished ivfpq index examples
[ 23.939s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_19_256 20 512"
	User time (seconds): 22.95
	System time (seconds): 0.75
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:24.05
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1348516
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 335698
	Voluntary context switches: 1070
	Involuntary context switches: 34
	Swaps: 0
	File system inputs: 31632
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:19
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_20_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
[ 0.065s ] Loaded metadata, 1000000 attr's found
[ 0.065s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.079s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.080s ] Loaded 10000 redcaps1m queries
[ 0.147s ] Loaded ground truth, gt_size: 100
[ 0.147s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 1.914s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 21.278s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 665235 (20) 760497 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.074 1.342 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 431068 (20) 999010 (20) 481335 (20) 601684 (20) 556847 (20) 142233 (20) 302104 (20) 220803 (20) 667912 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.164 0.179 0.180 0.203 0.234 0.240 0.288 0.306 0.380 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 497610 (20) 638287 (20) 219747 (20) 775045 (20) 993573 (20) 242602 (20) 637631 (20) 645580 (20) 28323 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.405 0.412 0.415 0.431 0.509 0.551 0.573 0.694 0.750 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 404058 (20) 582466 (20) 119403 (20) 598691 (20) 220745 (20) 32256 (20) 520498 (20) 989455 (20) 819970 (20) 381115 (20) 202040 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.752 0.768 0.813 0.825 0.839 0.845 0.845 0.880 0.921 0.950 0.968 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 953970 (20) 707476 (20) 931627 (20) 369671 (20) 924206 (20) 820736 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.438 0.442 0.555 0.557 0.586 0.642 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 21.279s ] *** Query time: 14.816
qps: 674.952
 *** ivfpq recall 
ivfpq get 62502 postive res from 1000000 results, recall@100:0.063
recall dist(10% per bucket): 0.872 0.128 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 21.308s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_20_256 20 512"
	User time (seconds): 20.33
	System time (seconds): 0.75
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:21.42
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1347492
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 335700
	Voluntary context switches: 1065
	Involuntary context switches: 36
	Swaps: 0
	File system inputs: 49416
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
