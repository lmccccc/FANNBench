Start time: 09:41
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_2_100000_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.138s ] Loaded metadata, 2000000 attr's found
[ 0.138s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.163s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.166s ] Loaded 10000 YTRGB1m queries
[ 0.232s ] Loaded ground truth, gt_size: 100
[ 0.232s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.134s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 8967.908s ] Query results (vector ids, then distances):
query 0 nn's (6, 10418, 93742): 889953 (68213) 807214 (6) 333483 (49490) 521249 (14113) 418474 (6) 662806 (6) 467816 (6) 239994 (6) 694505 (89822) 809944 (6) 906365 (1357) 86717 (55411) 671708 (19) 680375 (7456) 208021 (27012) 469118 (6) 99619 (34814) 745412 (6) 510683 (52996) 366566 (6) 319303 (40463) 583355 (58432) 263709 (28654) 956741 (35358) 59455 (23428) 821751 (25331) 497627 (10015) 776796 (6) 32077 (71252) 597593 (68414) 31562 (6) 178374 (6) 496578 (10) 19514 (10) 295187 (33654) 451807 (45339) 935441 (55339) 973705 (67902) 327418 (6) 110922 (6) 912768 (10) 945815 (13463) 159538 (10) 110112 (10) 315673 (54436) 751978 (6) 610812 (6) 953921 (90763) 956829 (47144) 765668 (6) 395220 (6) 785594 (6) 913246 (6) 403197 (59207) 70165 (60550) 242795 (45681) 301781 (63772) 428766 (6) 772499 (97312) 168854 (6) 687363 (7141) 207759 (10788) 157018 (6) 899164 (10) 777637 (65099) 915739 (95843) 365062 (10) 606062 (19) 267332 (20) 970397 (5976) 714835 (83413) 38549 (91268) 361766 (19) 211790 (6) 876826 (10) 966722 (6) 177205 (39945) 696449 (10777) 82279 (53010) 497267 (54918) 528429 (44210) 487597 (59976) 745278 (6) 546302 (6) 807295 (77211) 399500 (6) 251722 (10) 196808 (6) 617300 (6) 513185 (72532) 591405 (4638) 372361 (85961) 877336 (10) 771516 (10) 110109 (13095) 342682 (6) 115812 (10) 424122 (6) 837078 (10) 29840 (10) 
     dis: 	83.516 85.612 86.873 88.147 88.692 88.695 89.513 90.033 90.728 91.388 91.974 92.091 92.331 92.644 92.735 92.760 92.873 92.880 92.913 92.921 93.022 93.203 93.379 93.672 93.676 93.858 94.155 94.710 94.786 94.796 94.844 94.859 94.882 94.938 95.019 95.106 95.158 95.377 95.489 95.552 95.821 95.955 96.019 96.020 96.054 96.251 96.327 96.530 96.599 96.611 96.746 96.753 96.804 96.821 96.955 96.978 97.038 97.339 97.545 97.689 97.784 97.900 97.971 98.044 98.064 98.083 98.118 98.152 98.245 98.265 98.291 98.394 98.402 98.504 98.514 98.515 98.532 98.579 98.603 98.605 98.606 98.613 98.623 98.728 98.747 98.792 98.810 98.812 98.816 98.832 98.850 98.874 98.928 98.969 98.993 99.014 99.105 99.165 99.183 99.218 
query 1 nn's (6, 871, 84222): 963956 (19) 506689 (83207) 630027 (60046) 326679 (4165) 172456 (6) 627139 (56170) 689633 (43777) 867145 (68811) 380703 (15922) 546210 (6) 360005 (57928) 183639 (42501) 910863 (57125) 731008 (6) 365136 (10) 641093 (3367) 383855 (34983) 146981 (3175) 368711 (18112) 546146 (6) 25928 (6) 941312 (6) 267568 (6) 997115 (69441) 499809 (11743) 567484 (19) 273324 (10) 482286 (6) 513153 (85700) 466827 (61473) 400581 (1071) 928147 (64302) 666817 (61632) 305876 (6) 30138 (6) 179696 (6) 324596 (10) 316563 (51845) 658247 (2404) 791360 (10) 87814 (6) 613044 (6) 289226 (19) 936153 (10770) 68977 (13200) 192956 (6) 202435 (37321) 519648 (6) 548866 (10) 900179 (40079) 926918 (6) 532606 (6) 736563 (56856) 944075 (14260) 899467 (99182) 554657 (78426) 427979 (29253) 633004 (6) 726691 (50015) 23747 (51527) 325785 (97247) 946883 (13843) 889441 (18617) 978444 (6) 475413 (1857) 28365 (70417) 171157 (19293) 233078 (10) 469118 (6) 844413 (13139) 890430 (10) 806534 (10) 970271 (62778) 150833 (4314) 105535 (39459) 984612 (10) 52602 (6) 114503 (98188) 351223 (90980) 927330 (6) 343722 (6) 797475 (13940) 543197 (52680) 805675 (78600) 367427 (78807) 707130 (10) 980092 (6) 606832 (6) 82279 (53010) 990959 (64178) 401052 (10) 912768 (10) 486635 (26174) 751767 (83527) 428023 (31676) 796772 (10) 226109 (29249) 771649 (86306) 502299 (31871) 974111 (92852) 
     dis: 	53.152 53.410 53.657 54.385 54.616 54.616 54.666 55.627 55.658 56.392 56.612 56.656 56.945 57.303 57.366 57.625 57.810 57.848 57.850 57.862 58.312 58.594 58.730 58.811 58.939 58.983 59.049 59.130 59.278 59.389 59.490 59.547 59.605 59.614 59.638 59.741 59.745 60.023 60.157 60.179 60.285 60.293 60.308 60.316 60.405 60.556 60.654 60.658 60.716 60.751 60.794 60.963 60.994 61.050 61.068 61.084 61.247 61.315 61.417 61.464 61.465 61.559 61.574 61.606 61.659 61.669 61.705 61.713 61.762 61.906 62.014 62.037 62.104 62.115 62.138 62.163 62.263 62.307 62.369 62.404 62.495 62.503 62.588 62.689 62.833 62.892 62.939 63.054 63.077 63.115 63.134 63.149 63.178 63.197 63.290 63.310 63.321 63.336 63.350 63.380 
query 2 nn's (6, 2953, 86302): 423205 (46713) 531527 (49795) 871743 (85658) 947479 (343) 633590 (10) 308085 (55976) 528201 (60263) 529153 (96313) 509845 (63335) 666817 (61632) 979613 (81292) 195836 (6) 619819 (1093) 432506 (10) 667162 (10) 37850 (6) 926192 (19) 44203 (93218) 383560 (10) 771658 (6) 443951 (68829) 223022 (6) 823721 (77026) 486952 (6) 867372 (6) 475413 (1857) 386531 (34566) 423023 (54660) 917665 (82189) 770187 (86189) 915528 (6) 266781 (97988) 450839 (93589) 932640 (6) 831224 (6) 851559 (98771) 946688 (10) 181413 (24999) 641427 (89826) 118685 (12231) 613701 (60694) 969746 (6) 467041 (60072) 1692 (10) 763079 (84232) 376833 (4585) 162558 (6) 854562 (20) 519648 (6) 320908 (6) 707130 (10) 597155 (49171) 51398 (6) 302286 (10) 166005 (79633) 62301 (35156) 756943 (44515) 680642 (10) 46452 (6) 899160 (6) 645520 (6) 868923 (47335) 849697 (96603) 50122 (6) 240815 (40572) 732994 (10) 233174 (6) 519970 (6) 767371 (2956) 763020 (10) 863223 (57172) 989419 (46238) 605288 (10) 741618 (6) 236165 (37184) 932857 (79926) 389086 (460) 564154 (10) 819590 (10) 900209 (53577) 231378 (10) 546302 (6) 184392 (10) 446219 (13170) 101393 (23273) 829520 (10) 345118 (6) 671349 (96998) 980178 (19) 508045 (65780) 352065 (29942) 883168 (19) 579013 (68467) 408274 (6) 228636 (6) 343114 (6) 305326 (10) 726382 (19) 452756 (10) 70165 (60550) 
     dis: 	132.549 135.341 136.082 137.181 137.406 137.751 137.994 138.967 139.102 139.333 139.433 139.858 140.198 140.416 140.482 141.040 141.458 141.607 141.910 141.939 142.064 142.559 143.118 143.297 143.377 143.395 143.428 143.619 143.622 143.893 144.104 144.177 144.194 144.229 144.352 144.620 144.645 144.656 144.663 144.665 144.720 144.766 144.779 144.780 144.811 144.866 144.883 144.912 144.923 144.924 144.965 145.049 145.086 145.104 145.106 145.259 145.266 145.277 145.305 145.327 145.364 145.364 145.375 145.377 145.519 145.700 145.755 145.852 145.875 145.944 145.955 145.956 146.008 146.028 146.051 146.075 146.088 146.199 146.220 146.234 146.249 146.314 146.329 146.377 146.401 146.404 146.444 146.453 146.513 146.538 146.669 146.753 146.771 146.831 146.835 146.835 146.900 146.911 146.926 147.041 
query 3 nn's (6, 1285, 84611): 462979 (51579) 421752 (10) 505074 (20) 870912 (19) 26879 (16840) 205071 (65142) 99295 (13036) 873503 (85666) 62225 (27952) 469561 (29678) 376313 (57309) 954742 (10) 969523 (68289) 198287 (56316) 295339 (15720) 827991 (93691) 203555 (47047) 608874 (6) 440840 (10) 120516 (10) 26211 (3207) 200440 (6) 32195 (71759) 483464 (6) 260825 (60869) 647424 (6) 362437 (4827) 762909 (78521) 770187 (86189) 613254 (6) 343722 (6) 250943 (47745) 542275 (61745) 311972 (6) 609297 (98643) 878957 (63781) 976180 (10) 750794 (10) 647454 (6) 827077 (8594) 287394 (6) 368216 (6) 717608 (10) 350197 (85649) 523139 (5437) 107516 (6) 465693 (5803) 665690 (6) 20352 (6) 942390 (6) 939051 (28425) 312252 (10) 258253 (7999) 605960 (10) 635582 (6) 365062 (10) 998487 (22486) 340693 (7460) 551602 (6) 119304 (6) 829520 (10) 203452 (6) 874268 (6) 132271 (42597) 855530 (10) 509845 (63335) 179696 (6) 774110 (6) 826248 (20) 360005 (57928) 983218 (6) 666817 (61632) 861784 (6) 366715 (17682) 242694 (6) 486205 (29326) 436833 (92412) 101897 (47285) 999383 (91865) 784098 (6) 75583 (32230) 492607 (76015) 588086 (6) 831892 (6) 489829 (83296) 764097 (94323) 346637 (56874) 278033 (58339) 858706 (6) 589676 (6) 346234 (10) 75419 (70004) 521248 (10) 194228 (6) 70519 (99134) 488682 (19) 754658 (6) 648631 (39433) 233803 (6270) 782913 (7121) 
     dis: 	141.945 145.214 147.416 153.019 159.994 164.089 167.020 167.142 168.651 170.421 170.594 171.924 173.666 173.831 175.377 176.326 176.564 177.455 179.224 179.359 179.790 180.851 182.836 183.205 183.456 183.458 183.476 183.524 183.528 183.766 183.771 183.923 184.227 184.297 184.374 184.508 184.647 184.776 185.221 185.221 185.590 185.898 185.944 186.251 186.340 186.457 186.544 186.644 186.675 186.842 186.864 186.910 186.947 187.434 187.551 187.560 187.600 187.609 187.863 188.027 188.201 188.292 188.563 188.602 188.700 188.701 188.793 188.805 188.805 188.851 188.938 189.008 189.072 189.091 189.194 189.244 189.292 189.378 189.421 189.458 189.698 189.719 189.736 189.784 189.858 189.858 189.889 189.893 189.992 190.056 190.132 190.160 190.248 190.284 190.290 190.334 190.373 190.399 190.435 190.442 
query 4 nn's (6, 13289, 96651): 314093 (51859) 719380 (6) 690285 (95271) 223865 (30084) 461345 (34528) 89809 (62375) 829463 (43989) 62933 (58365) 135316 (6) 33136 (6) 27286 (20) 271174 (10) 100485 (69965) 332639 (97742) 47460 (6) 273627 (12670) 241446 (6) 644921 (11190) 959418 (10) 815136 (458) 111408 (6) 615031 (83519) 559665 (67063) 819848 (6) 343865 (61946) 272496 (6) 983374 (6) 135954 (10) 226676 (6) 267268 (6) 447933 (75321) 15399 (74866) 501953 (93631) 649968 (19) 992816 (10) 209754 (10) 786745 (86323) 874168 (6) 663997 (49774) 757368 (10) 385674 (264) 717300 (6) 70344 (6) 720829 (29434) 584795 (78727) 291344 (10) 912472 (6) 4088 (10) 145195 (42834) 275060 (6) 360806 (46) 728524 (6) 718745 (330) 333654 (19) 193355 (77964) 190353 (32199) 223642 (6) 775952 (10) 544230 (10) 728440 (6) 615042 (10) 502520 (6) 256494 (10) 198041 (78085) 701387 (9786) 176390 (6) 128627 (63722) 901010 (6) 696717 (20675) 355417 (62155) 407187 (31223) 274537 (41572) 751330 (6) 116068 (6) 571909 (16061) 650585 (92572) 700992 (6) 566403 (50360) 293069 (68487) 448311 (66254) 347553 (20340) 610034 (6) 407673 (94196) 609376 (6) 982288 (6) 337667 (37187) 308421 (25341) 180535 (16805) 45967 (2430) 176623 (86525) 322526 (6) 707209 (80255) 798623 (21348) 685064 (6) 534413 (74569) 131072 (10) 148450 (10) 447832 (10) 792438 (6) 165335 (6864) 
     dis: 	52.786 56.196 63.005 65.580 71.458 72.469 74.054 75.221 75.255 75.782 76.677 77.875 79.395 80.090 80.358 82.816 84.231 85.317 85.317 87.252 89.307 89.341 92.778 92.861 93.215 93.315 95.233 95.897 96.217 96.401 96.965 96.986 97.398 97.870 98.326 98.675 99.512 99.790 101.158 101.634 102.367 102.834 104.757 105.017 105.362 106.052 106.222 107.484 108.852 108.906 109.878 111.165 111.898 112.054 112.918 113.481 114.109 114.706 115.105 115.612 116.312 116.614 116.962 117.282 117.314 117.448 117.679 117.832 117.870 118.201 118.546 118.571 118.680 120.196 120.971 120.978 121.864 121.949 122.287 122.571 123.128 123.405 124.652 124.827 125.079 126.988 127.087 127.159 127.228 127.849 127.917 128.650 129.118 129.982 131.533 131.625 131.680 131.695 132.246 132.643 
[ 8967.908s ] *** Query time: 8913.859
qps: 1.122
 *** ivfpq recall 
ivfpq get 994713 postive res from 1000000 results, recall@100:0.995
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.470 0.530 
finished ivfpq index examples
[ 8967.946s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_2_100000_random_1024 700 1024"
	User time (seconds): 8964.27
	System time (seconds): 2.31
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:29:28
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1106856
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 554032
	Voluntary context switches: 3739
	Involuntary context switches: 19108
	Swaps: 0
	File system inputs: 307400
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 14:21
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_2_100000_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.133s ] Loaded metadata, 2000000 attr's found
[ 0.133s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.157s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.159s ] Loaded 10000 YTRGB1m queries
[ 0.226s ] Loaded ground truth, gt_size: 100
[ 0.226s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 0.901s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 6060.231s ] Query results (vector ids, then distances):
query 0 nn's (10, 29652, 63053): 980214 (6) 737273 (55252) 952701 (65239) 336603 (41586) 16765 (90599) 991479 (76766) 863882 (6) 202136 (20) 76521 (96391) 283397 (4891) 38338 (6) 405113 (4692) 880087 (88572) 23924 (6) 854843 (81776) 98367 (20006) 97757 (97472) 14572 (6) 566237 (90773) 907166 (10) 692591 (59001) 205648 (6) 960618 (10) 653907 (70875) 853828 (10) 602233 (27014) 647117 (72611) 938241 (80726) 572163 (94233) 79495 (46857) 530134 (10) 46453 (97470) 47728 (6) 637198 (19) 835729 (51185) 905468 (6) 140520 (10) 418968 (10) 686522 (6) 532484 (6) 235320 (6) 367910 (10) 228262 (6) 190812 (10) 85354 (6) 611212 (10) 996333 (48281) 251277 (62010) 762918 (10) 34801 (2617) 138882 (6) 921296 (20) 943920 (6) 76351 (68696) 509501 (47799) 509461 (36340) 262977 (38663) 908662 (10) 354998 (20) 920739 (33718) 973665 (41275) 326896 (6) 436338 (10) 972846 (10) 909386 (6) 169182 (6) 872582 (6) 465103 (70679) 237067 (49420) 677320 (6) 73121 (47482) 311612 (6) 444807 (92897) 918714 (6) 290212 (6) 635913 (96982) 175778 (6) 493744 (10) 658912 (6) 735131 (16829) 396345 (90842) 157092 (6) 110692 (6) 528552 (10) 457419 (39543) 762745 (54626) 290862 (10) 185244 (6) 716782 (6) 743733 (86222) 887033 (73330) 999700 (10) 743543 (29338) 458513 (81943) 192507 (55835) 491210 (10) 704163 (82630) 307075 (89617) 364296 (6) 811962 (10) 
     dis: 	88.558 91.190 93.345 94.030 94.103 95.997 96.198 96.274 96.676 96.720 96.858 96.982 97.318 97.532 98.256 98.303 98.384 98.618 98.748 98.752 98.860 99.045 99.052 99.185 99.200 99.251 99.403 99.743 99.763 99.764 100.310 100.404 100.405 100.413 100.455 100.525 100.585 100.700 100.729 100.827 100.882 100.890 100.906 100.957 100.988 101.056 101.093 101.288 101.352 101.372 101.400 101.481 101.590 101.614 101.736 101.757 101.859 102.025 102.043 102.087 102.088 102.280 102.300 102.359 102.475 102.557 102.644 102.670 102.767 102.782 102.848 103.027 103.059 103.152 103.200 103.211 103.219 103.304 103.465 103.505 103.522 103.570 103.756 103.856 103.869 103.885 103.941 103.976 104.035 104.073 104.110 104.119 104.131 104.211 104.255 104.338 104.375 104.392 104.435 104.442 
query 1 nn's (10, 21798, 55183): 358433 (13457) 411735 (53826) 762596 (6) 653907 (70875) 753176 (10) 485054 (6) 295338 (20) 908662 (10) 821906 (6) 578863 (50735) 87796 (10) 861989 (12103) 262977 (38663) 201766 (6) 872582 (6) 598416 (19) 464047 (17568) 340079 (17638) 35170 (6) 14572 (6) 535625 (24065) 556221 (26788) 278656 (10) 313093 (41092) 835729 (51185) 351099 (11075) 918714 (6) 863882 (6) 754475 (58313) 871976 (10) 51014 (6) 70119 (78795) 231139 (41432) 453938 (6) 619909 (89118) 527178 (6) 999700 (10) 698508 (6) 625380 (10) 783250 (6) 465103 (70679) 934185 (63402) 704034 (10) 522644 (6) 228262 (6) 176600 (6) 671996 (6) 206596 (6) 19408 (6) 708681 (23054) 219449 (88735) 290862 (10) 916336 (10) 166090 (6) 223863 (82750) 773993 (24572) 992896 (10) 743543 (29338) 917755 (25107) 485103 (77501) 716782 (6) 457407 (31553) 816324 (6) 616256 (6) 958235 (64118) 905468 (6) 372120 (6) 108235 (72865) 393302 (10) 311612 (6) 217143 (53059) 407042 (20) 203528 (10) 157092 (6) 540026 (6) 184588 (19) 356370 (6) 102411 (14770) 727304 (6) 222500 (10) 153248 (10) 533120 (6) 377220 (6) 871467 (60537) 219149 (83133) 285773 (52082) 458513 (81943) 713260 (6) 364296 (6) 352265 (8734) 134647 (69838) 229646 (6) 652677 (52074) 914998 (19) 753612 (6) 806133 (13693) 934843 (84064) 530134 (10) 672310 (10) 863861 (46624) 
     dis: 	54.557 55.073 57.300 59.085 59.367 59.387 59.486 60.146 60.200 60.917 61.043 61.277 61.363 61.829 61.958 61.978 62.243 62.516 62.746 62.778 62.850 62.909 63.416 63.425 63.594 63.764 64.260 64.329 64.355 64.413 64.603 64.674 64.788 64.826 64.961 65.035 65.298 65.406 65.464 65.467 65.612 65.715 65.806 65.947 66.269 66.333 66.408 66.457 66.560 66.566 66.581 66.650 66.665 66.803 66.934 66.950 67.051 67.155 67.170 67.241 67.316 67.332 67.334 67.368 67.434 67.515 67.541 67.546 67.595 67.642 67.655 67.687 67.689 67.694 67.711 67.796 67.906 67.991 68.010 68.102 68.136 68.221 68.263 68.271 68.451 68.566 68.567 68.676 68.732 68.758 68.811 68.878 68.884 69.014 69.050 69.054 69.065 69.113 69.171 69.296 
query 2 nn's (10, 52376, 85679): 225875 (13229) 464997 (41748) 698610 (6) 677717 (22673) 67581 (54414) 907166 (10) 812421 (30697) 39208 (10) 189077 (61917) 308623 (70098) 970371 (30202) 379259 (76229) 65926 (19) 963167 (15886) 294714 (6) 985228 (10) 885167 (32560) 229020 (10) 890591 (76656) 167842 (6) 176700 (6) 114680 (6) 270729 (95477) 522587 (69672) 493744 (10) 16765 (90599) 641688 (6) 279236 (10) 19718 (10) 873666 (6) 455567 (36063) 865750 (6) 256604 (6) 997428 (6) 973717 (46390) 630699 (57296) 203721 (7955) 599616 (6) 253116 (19) 830171 (72875) 270509 (35802) 548941 (41367) 695289 (66111) 289462 (19) 352736 (10) 716952 (242) 733667 (78182) 38471 (88194) 64796 (340) 854843 (81776) 284285 (65011) 172732 (6) 421503 (20362) 668924 (6) 821004 (6) 559256 (6) 674462 (6) 102143 (22318) 892535 (19147) 605208 (6) 309919 (98386) 802406 (6) 436338 (10) 947106 (6) 544539 (30051) 187671 (26375) 883515 (9728) 213806 (10) 790325 (11223) 51529 (24404) 735131 (16829) 835969 (22964) 73121 (47482) 388315 (78642) 928263 (65316) 47728 (6) 85354 (6) 162632 (6) 302376 (10) 908417 (30069) 490135 (39607) 827562 (10) 900834 (6) 844816 (10) 2729 (27883) 665817 (40953) 791402 (10) 647117 (72611) 612740 (6) 756056 (10) 323657 (73639) 232119 (26330) 328546 (6) 410906 (10) 281526 (19) 872582 (6) 402019 (38594) 2081 (24752) 835655 (6717) 97179 (87939) 
     dis: 	136.548 139.450 140.792 140.878 142.192 142.652 142.720 143.307 143.495 143.934 144.540 144.635 144.852 145.235 145.264 145.523 145.722 145.879 146.005 146.234 146.303 146.361 146.428 146.494 146.590 146.754 146.867 147.432 147.661 148.021 148.111 148.114 148.302 148.340 148.628 148.749 148.986 149.013 149.140 149.331 149.355 149.417 149.432 149.439 149.463 149.464 149.557 149.762 149.839 149.858 149.861 149.895 150.119 150.253 150.285 150.531 150.535 150.551 150.557 150.631 150.660 150.670 150.679 150.709 150.883 150.928 151.048 151.117 151.118 151.215 151.231 151.245 151.397 151.427 151.439 151.505 151.647 151.726 151.732 151.746 151.796 151.833 151.845 151.871 151.899 152.003 152.019 152.027 152.102 152.115 152.115 152.206 152.230 152.412 152.539 152.692 152.752 152.817 152.903 152.909 
query 3 nn's (10, 54432, 87740): 263195 (52685) 178166 (6) 136177 (10503) 117658 (10) 159269 (1572) 960065 (21061) 373736 (6) 496154 (6) 195003 (84381) 242590 (6) 677532 (10) 64796 (340) 426874 (6) 835969 (22964) 807589 (73759) 653204 (6) 97774 (6) 827562 (10) 189727 (48796) 19718 (10) 909386 (6) 115719 (19164) 552971 (58166) 608405 (95542) 465564 (10) 698610 (6) 357878 (6) 2729 (27883) 73098 (6) 182112 (10) 979120 (10) 352736 (10) 659173 (66756) 671949 (74101) 94354 (6) 745235 (59119) 733667 (78182) 403384 (6) 193631 (52701) 386751 (3637) 848163 (89255) 112011 (8120) 837597 (17499) 16765 (90599) 385541 (58258) 111055 (13077) 379259 (76229) 907166 (10) 854843 (81776) 637198 (19) 493028 (6) 712157 (80500) 47728 (6) 712523 (17317) 520793 (53412) 878354 (6) 481032 (6) 270729 (95477) 106103 (44231) 203425 (42644) 284800 (10) 835321 (71312) 85354 (6) 638987 (78941) 658311 (58595) 405398 (10) 847514 (6) 822524 (6) 656478 (10) 454214 (6) 404152 (6) 657501 (20955) 494541 (38687) 287177 (97584) 309919 (98386) 790325 (11223) 410906 (10) 83588 (6) 328546 (6) 667968 (6) 331219 (54950) 207049 (95839) 997428 (6) 827250 (6) 119905 (87933) 536042 (10) 82575 (23386) 235037 (74495) 901880 (6) 845691 (37511) 97179 (87939) 388315 (78642) 455847 (79705) 835074 (6) 114680 (6) 898971 (73447) 835655 (6717) 501231 (25876) 665817 (40953) 624459 (95278) 
     dis: 	178.014 180.412 181.342 184.246 184.687 186.296 186.831 187.131 187.153 187.452 187.553 188.449 188.490 189.004 190.132 190.284 190.513 190.670 190.708 190.761 190.912 190.961 191.154 191.188 191.245 191.355 191.484 191.581 191.708 191.760 191.905 191.981 192.253 192.427 192.435 192.649 192.847 192.889 192.935 192.941 192.968 193.046 193.087 193.098 193.126 193.138 193.378 193.412 193.450 193.635 193.690 193.785 193.902 193.915 193.930 193.947 193.965 193.996 194.035 194.104 194.124 194.143 194.177 194.192 194.208 194.232 194.348 194.418 194.451 194.494 194.546 194.680 194.695 194.890 194.912 194.920 194.966 195.002 195.058 195.098 195.140 195.143 195.231 195.258 195.289 195.307 195.368 195.409 195.419 195.444 195.450 195.522 195.549 195.638 195.658 195.677 195.684 195.715 195.720 195.726 
query 4 nn's (10, 16884, 50269): 729225 (73615) 725265 (93655) 565522 (10) 693282 (10) 203716 (10) 561793 (81060) 258251 (47005) 86342 (6) 88323 (53150) 652567 (22431) 382982 (6) 497393 (73465) 793285 (15515) 418523 (87516) 586210 (6) 480782 (10) 751020 (20) 496231 (64385) 634282 (6) 434257 (37749) 474720 (6) 900499 (89801) 234841 (4728) 634836 (6) 600385 (4631) 956064 (6) 213707 (11876) 446732 (10) 723059 (36217) 202074 (6) 163715 (84174) 651961 (31468) 403198 (10) 910329 (40584) 536874 (20) 279470 (10) 138157 (32412) 334155 (14233) 607112 (6) 965992 (10) 303448 (6) 939092 (6) 8392 (6) 151820 (20) 366400 (6) 506874 (6) 607488 (6) 347625 (98853) 144265 (2655) 644907 (81091) 63868 (20) 881431 (64222) 149989 (46564) 415170 (6) 602590 (10) 806477 (89754) 924371 (46460) 582598 (6) 295658 (20) 958692 (6) 666383 (75288) 943167 (8709) 538703 (21248) 938224 (6) 612286 (10) 188931 (97125) 734859 (54810) 359408 (6) 129474 (10) 437574 (6) 591187 (37868) 970956 (6) 773041 (47137) 908777 (22652) 74027 (84215) 95200 (6) 607596 (10) 954831 (47452) 90291 (97132) 180040 (6) 974505 (52660) 848068 (10) 436165 (63320) 176165 (42503) 583217 (43192) 649981 (23639) 155706 (6) 372588 (6) 148107 (65386) 658838 (6) 298834 (6) 240676 (19) 60385 (30137) 418307 (68523) 755708 (6) 597996 (6) 555369 (50602) 211805 (6580) 726827 (76160) 1291 (79334) 
     dis: 	74.408 78.044 79.706 79.910 93.073 94.450 96.538 99.218 101.477 101.703 102.764 104.533 105.224 109.245 109.262 111.257 115.863 117.584 118.138 118.323 121.996 124.768 127.449 127.961 128.929 133.227 134.973 140.514 141.150 143.085 145.507 145.639 156.980 158.612 159.619 161.352 161.681 163.338 165.937 166.160 166.553 171.095 173.743 174.081 176.972 177.515 177.677 179.778 179.965 180.430 182.488 183.134 183.807 186.289 187.432 187.483 187.963 189.986 190.152 190.363 190.513 191.272 191.794 193.441 193.548 195.290 195.754 195.922 196.683 197.209 197.878 200.861 200.957 201.488 203.480 203.968 205.925 206.498 207.174 207.558 208.125 209.224 209.448 209.930 211.507 211.516 214.518 214.521 216.196 216.947 217.848 218.092 218.336 218.515 218.691 220.010 220.118 221.751 222.325 222.511 
[ 6060.231s ] *** Query time: 6011.451
qps: 1.663
 *** ivfpq recall 
ivfpq get 994872 postive res from 1000000 results, recall@100:0.995
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.454 0.546 
finished ivfpq index examples
[ 6060.270s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_2_100000_random_1024 700 1024"
	User time (seconds): 6057.64
	System time (seconds): 2.49
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:41:00
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1108900
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 659581
	Voluntary context switches: 3
	Involuntary context switches: 10137
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 18:10
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_2_100000_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.133s ] Loaded metadata, 2000000 attr's found
[ 0.134s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.155s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.158s ] Loaded 10000 YTRGB1m queries
[ 0.224s ] Loaded ground truth, gt_size: 100
[ 0.224s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 0.899s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 5287.602s ] Query results (vector ids, then distances):
query 0 nn's (19, 35475, 55518): 728698 (6) 473207 (39051) 659286 (10) 2220 (6) 331569 (72957) 990950 (6) 849185 (32777) 655750 (10) 272648 (6) 258094 (19) 500029 (54101) 632806 (6) 251068 (10) 206887 (74425) 366836 (19) 735169 (91651) 540539 (80759) 212075 (5520) 872768 (10) 658906 (6) 897916 (6) 410071 (38887) 499646 (6) 428651 (32807) 964337 (89413) 280568 (10) 500782 (6) 875177 (52396) 813407 (81420) 106693 (71989) 644791 (56615) 447909 (38782) 215216 (6) 938375 (22394) 25825 (29595) 54240 (6) 205354 (10) 247467 (86176) 153389 (82454) 167557 (70643) 565254 (6) 66549 (49348) 800472 (10) 169358 (6) 540863 (17248) 799180 (6) 719459 (47228) 380046 (10) 39762 (6) 832435 (13840) 743842 (6) 298577 (31214) 401585 (35631) 27592 (6) 484920 (10) 754797 (32898) 757856 (6) 666327 (78940) 209943 (95170) 140791 (86222) 771173 (98707) 523643 (84782) 55186 (10) 532333 (11345) 595028 (6) 713304 (6) 772643 (59838) 239740 (6) 402464 (6) 888625 (85599) 61632 (6) 331892 (6) 783634 (6) 174135 (38840) 29268 (6) 989108 (10) 922066 (6) 796825 (43154) 116644 (6) 954556 (10) 653668 (6) 222316 (10) 879226 (10) 181013 (50433) 148455 (7082) 844143 (74300) 576095 (90397) 289727 (59223) 647485 (14472) 513085 (93307) 813211 (1033) 455 (94112) 320384 (6) 441218 (6) 486548 (10) 268403 (48159) 377330 (6) 90359 (57469) 465304 (6) 557696 (10) 
     dis: 	96.656 97.137 100.994 101.973 102.150 102.511 103.214 103.514 104.384 105.058 105.121 106.169 106.320 106.633 106.882 106.997 107.468 107.540 107.632 107.648 107.671 107.894 107.913 107.978 107.991 108.620 109.491 109.613 109.869 109.983 110.390 110.532 110.612 110.630 110.648 110.753 110.781 110.888 110.902 111.130 111.133 111.165 111.382 111.673 111.683 111.730 111.763 111.893 112.189 112.219 112.284 112.313 112.588 112.946 113.031 113.105 113.148 113.238 113.296 113.318 113.394 113.580 113.610 113.692 113.881 113.922 114.060 114.156 114.198 114.257 114.260 114.336 114.445 114.470 114.650 114.723 114.847 114.887 115.232 115.248 115.295 115.312 115.340 115.465 115.489 115.505 115.525 115.556 115.684 115.782 115.858 116.142 116.323 116.356 116.426 116.528 116.746 116.757 116.812 116.981 
query 1 nn's (19, 70907, 90904): 431933 (96745) 203058 (6) 556209 (43738) 146952 (10) 157212 (6) 369868 (6) 351530 (10) 202887 (39932) 867961 (50113) 684080 (10) 849317 (75099) 70844 (6) 842440 (6) 464164 (6) 573589 (63630) 712707 (9525) 536587 (69446) 352882 (10) 34525 (77246) 523995 (3680) 263567 (38990) 345459 (79721) 452063 (13410) 821009 (43874) 457003 (19722) 324504 (10) 111482 (6) 956833 (69329) 734983 (55829) 168063 (15319) 798243 (16035) 38724 (19) 289167 (89105) 737686 (6) 134385 (6396) 125832 (6) 878113 (86779) 971948 (6) 86468 (6) 536595 (35676) 41769 (38515) 929035 (76924) 90996 (10) 293419 (38731) 887381 (4714) 523457 (6988) 574600 (6) 207584 (10) 991259 (7513) 972394 (6) 335507 (90555) 703848 (6) 5046 (6) 239800 (10) 198924 (6) 284738 (6) 19403 (86261) 172345 (51947) 89350 (10) 802680 (6) 463595 (60021) 241057 (45476) 443185 (21351) 954818 (6) 697256 (6) 517613 (30756) 964841 (71183) 84214 (6) 590741 (6710) 677432 (10) 408926 (10) 592646 (6) 47587 (73471) 841405 (33559) 91950 (6) 425322 (20) 845733 (20787) 494636 (6) 630048 (20) 991690 (6) 701768 (10) 151863 (91970) 132322 (6) 609905 (82693) 420031 (66563) 626107 (98504) 506186 (6) 673492 (10) 80440 (6) 673189 (74744) 764683 (68208) 292827 (64002) 157898 (6) 919829 (81547) 766616 (6) 38324 (6) 509273 (25130) 873240 (20) 745057 (20574) 110852 (10) 
     dis: 	56.503 59.131 59.257 63.415 64.445 65.169 65.652 66.587 66.922 67.861 69.515 70.186 70.588 70.840 70.956 71.124 71.542 72.054 72.531 72.752 72.830 73.261 73.770 73.996 74.287 74.478 74.702 74.921 75.163 75.206 75.344 75.387 75.605 75.982 76.099 76.265 76.324 76.468 76.595 77.047 77.059 77.128 77.141 77.331 77.354 77.398 77.415 77.480 77.649 77.820 78.056 78.246 78.560 78.582 78.685 78.743 78.763 78.796 78.904 78.979 79.085 79.088 79.303 79.472 79.679 79.774 79.778 79.917 79.975 79.989 80.034 80.142 80.447 80.546 80.691 81.035 81.107 81.127 81.350 81.438 81.694 81.715 81.777 81.869 81.950 81.957 81.979 82.112 82.118 82.149 82.189 82.287 82.354 82.409 82.501 82.572 82.572 82.582 82.625 82.672 
query 2 nn's (19, 61384, 81348): 146952 (10) 497144 (6) 816913 (70996) 351530 (10) 172345 (51947) 420878 (19) 524848 (10) 612816 (6) 641608 (10) 712707 (9525) 134385 (6396) 218697 (96770) 203058 (6) 329925 (9695) 745057 (20574) 329093 (24195) 764683 (68208) 206601 (95113) 523457 (6988) 91950 (6) 168063 (15319) 547139 (59508) 90996 (10) 964841 (71183) 335507 (90555) 734983 (55829) 406395 (72204) 420031 (66563) 978205 (9558) 425322 (20) 5046 (6) 41769 (38515) 89350 (10) 241057 (45476) 908589 (73426) 582695 (22371) 352868 (6) 592646 (6) 322805 (36531) 802680 (6) 14413 (98826) 192802 (19) 749023 (82047) 956894 (6) 283464 (6) 506186 (6) 802347 (71646) 284738 (6) 292668 (6) 934060 (10) 277795 (15503) 893646 (10) 907673 (46034) 977854 (6) 706569 (97169) 929035 (76924) 79689 (89803) 798243 (16035) 19403 (86261) 345459 (79721) 80440 (6) 997095 (36439) 576948 (6) 597014 (10) 443185 (21351) 535674 (10) 483710 (6) 524851 (62757) 348967 (2106) 626107 (98504) 568821 (80942) 196172 (6) 603465 (44791) 556209 (43738) 667785 (77398) 702386 (6) 536595 (35676) 97777 (9235) 313904 (6) 568824 (10) 82831 (90250) 184772 (10) 34054 (10) 352882 (10) 128606 (10) 265624 (6) 201929 (35328) 457003 (19722) 523995 (3680) 579177 (33705) 911609 (70376) 463595 (60021) 375784 (10) 431933 (96745) 106455 (33950) 315557 (65844) 884189 (48367) 153530 (6) 937915 (20531) 903148 (6) 
     dis: 	145.562 145.609 151.249 151.760 151.940 153.166 153.303 153.708 153.927 154.312 154.606 154.657 154.947 155.182 155.543 155.675 155.702 156.110 156.333 156.391 156.517 156.810 156.982 157.371 157.477 157.649 157.694 157.713 157.809 157.906 158.302 158.415 158.431 158.472 158.529 158.566 158.893 158.980 159.178 159.472 159.531 159.668 159.669 159.765 159.796 159.922 160.005 160.208 160.211 160.279 160.457 160.478 160.493 160.496 160.639 160.645 160.712 160.773 161.139 161.175 161.178 161.291 161.378 161.493 161.509 161.568 161.625 161.647 161.719 161.730 161.975 161.986 162.020 162.184 162.225 162.282 162.463 162.659 162.777 162.792 162.885 162.887 162.902 162.939 162.956 163.091 163.167 163.312 163.325 163.333 163.340 163.740 163.929 164.014 164.166 164.177 164.217 164.297 164.361 164.368 
query 3 nn's (19, 50119, 70114): 46589 (32443) 530994 (6) 298927 (58988) 297587 (69918) 940112 (19) 365898 (6) 27592 (6) 990950 (6) 106455 (33950) 659286 (10) 388985 (56292) 728698 (6) 45930 (6) 889201 (18435) 977854 (6) 908589 (73426) 922066 (6) 153530 (6) 34054 (10) 816991 (57414) 547139 (59508) 149755 (97278) 968137 (71043) 631909 (64436) 736487 (82719) 532333 (11345) 97777 (9235) 568532 (10) 9444 (10) 222446 (6) 163627 (67585) 479824 (10) 497144 (6) 510802 (10) 641608 (10) 319186 (10) 184772 (10) 209943 (95170) 415283 (61034) 851736 (10) 205354 (10) 342597 (13234) 79689 (89803) 642850 (10) 92738 (10) 897916 (6) 206601 (95113) 209061 (79171) 265730 (6) 572808 (6) 772643 (59838) 207732 (20) 952746 (19) 406395 (72204) 907673 (46034) 55186 (10) 313904 (6) 568607 (25914) 628692 (6) 632823 (19441) 767733 (95892) 723513 (68194) 391949 (75169) 465205 (60357) 347554 (20) 714371 (2588) 630305 (99149) 377675 (31888) 597014 (10) 586242 (10) 99501 (64791) 155245 (62158) 659430 (6) 128606 (10) 873527 (71254) 249686 (10) 305796 (6) 749023 (82047) 95494 (10) 816173 (13977) 39762 (6) 446015 (81078) 414583 (24692) 126676 (6) 576948 (6) 823300 (6) 862706 (10) 71675 (88375) 391885 (93586) 352868 (6) 540863 (17248) 973251 (80601) 978205 (9558) 274048 (6) 706569 (97169) 586320 (42) 106390 (6) 532654 (10) 535674 (10) 765255 (32725) 
     dis: 	188.891 191.681 192.302 192.700 193.305 193.398 193.810 194.131 194.531 194.917 195.921 196.357 196.380 196.663 196.665 197.056 197.112 197.397 198.187 198.719 198.847 199.021 200.050 200.106 200.143 200.310 200.654 200.700 200.965 201.277 201.324 201.466 201.478 201.483 201.768 201.825 201.850 202.010 202.037 202.047 202.094 202.284 202.285 202.339 202.375 202.548 202.606 202.621 202.623 202.627 203.145 203.410 203.455 203.757 203.809 204.060 204.315 204.330 204.451 204.642 204.729 204.779 204.834 205.008 205.194 205.379 205.441 205.487 205.516 205.793 205.799 205.837 206.007 206.043 206.125 206.140 206.183 206.382 206.387 206.654 206.742 206.797 206.800 206.880 206.901 207.020 207.052 207.070 207.108 207.126 207.204 207.278 207.286 207.337 207.368 207.392 207.641 207.672 207.688 207.749 
query 4 nn's (19, 45372, 65351): 404547 (38677) 991503 (45735) 433585 (69454) 124062 (10) 950946 (6) 694298 (6) 728540 (6) 746526 (6) 146434 (6) 784584 (10) 117718 (10) 86156 (10) 542205 (89610) 359850 (6) 659843 (1326) 914424 (10) 502642 (6) 377675 (31888) 376563 (47226) 334729 (68215) 359515 (3328) 899014 (6) 201829 (32110) 97677 (28381) 355257 (43963) 991418 (6) 293384 (6) 979396 (10) 929685 (815) 473207 (39051) 611786 (10) 212075 (5520) 232820 (6) 816991 (57414) 510802 (10) 331569 (72957) 658906 (6) 940112 (19) 298577 (31214) 659286 (10) 908589 (73426) 265730 (6) 297587 (69918) 999437 (17101) 108729 (20162) 296010 (6) 204220 (10) 455 (94112) 406395 (72204) 947164 (19) 990950 (6) 696933 (80236) 728698 (6) 888625 (85599) 331892 (6) 743842 (6) 447909 (38782) 465205 (60357) 497564 (20) 491173 (1415) 218252 (6) 631909 (64436) 765255 (32725) 754797 (32898) 667917 (22671) 771173 (98707) 530994 (6) 222316 (10) 55186 (10) 61632 (6) 535674 (10) 410071 (38887) 666327 (78940) 9444 (10) 252636 (10) 524848 (10) 655750 (10) 532333 (11345) 954556 (10) 889111 (86442) 45930 (6) 289727 (59223) 31248 (6) 205354 (10) 305796 (6) 783634 (6) 43634 (6) 897916 (6) 352868 (6) 90116 (10) 414583 (24692) 800472 (10) 181013 (50433) 968137 (71043) 981367 (15066) 922066 (6) 352784 (6) 415283 (61034) 792540 (6) 209943 (95170) 
     dis: 	104.324 116.395 145.421 180.170 194.709 197.356 202.046 208.402 220.483 220.893 220.925 230.677 238.808 240.096 241.481 252.111 255.029 255.410 257.963 259.318 259.735 261.997 263.682 263.774 264.267 266.846 268.282 268.711 271.193 271.694 272.581 272.676 273.477 275.138 275.332 275.722 276.549 276.922 276.974 277.172 277.183 277.388 277.466 277.521 277.591 277.626 277.904 278.081 278.304 278.382 278.613 279.035 279.268 279.295 279.552 279.775 279.779 280.065 280.388 280.591 280.648 280.770 280.779 280.785 280.954 281.077 281.460 281.605 281.673 282.119 282.122 282.215 282.396 282.402 282.446 282.786 282.919 282.928 282.941 283.006 283.053 283.071 283.206 283.296 283.310 283.326 283.373 283.508 283.661 283.700 283.869 283.873 283.986 284.003 284.128 284.147 284.426 284.462 284.498 284.523 
[ 5287.602s ] *** Query time: 5272.158
qps: 1.897
 *** ivfpq recall 
ivfpq get 995759 postive res from 1000000 results, recall@100:0.996
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.396 0.604 
finished ivfpq index examples
[ 5287.640s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_2_100000_random_1024 700 1024"
	User time (seconds): 5285.95
	System time (seconds): 1.47
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:28:07
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1108900
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 395589
	Voluntary context switches: 1
	Involuntary context switches: 11887
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 21:45
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_2_100000_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.132s ] Loaded metadata, 2000000 attr's found
[ 0.132s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.155s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.158s ] Loaded 10000 YTRGB1m queries
[ 0.301s ] Loaded ground truth, gt_size: 100
[ 0.301s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.592s ] Searching the 100 nearest neighbors of 10000 vectors in the index
Start time: 00:51
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.123s ] Loaded metadata, 1000000 attr's found
[ 0.123s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.255s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.258s ] Loaded 10000 YTRGB1m queries
[ 0.407s ] Loaded ground truth, gt_size: 100
[ 0.407s ] Index Params -- d: 1024, N: 1000000
terminate called after throwing an instance of 'faiss::FaissException'
  what():  Error in faiss::FileIOReader::FileIOReader(const char*) at /home/mocheng/code/faiss/faiss/impl/io.cpp:67: Error: 'f' failed: could not open /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 for reading: No such file or directory
Command terminated by signal 6
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 700 1024"
	User time (seconds): 0.21
	System time (seconds): 0.06
	Percent of CPU this job got: 42%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.64
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 62376
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 14
	Minor (reclaiming a frame) page faults: 14556
	Voluntary context switches: 79
	Involuntary context switches: 0
	Swaps: 0
	File system inputs: 6728
	File system outputs: 0
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:20
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.072s ] Loaded metadata, 1000000 attr's found
[ 0.072s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.097s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.098s ] Loaded 10000 YTRGB1m queries
[ 0.165s ] Loaded ground truth, gt_size: 100
[ 0.165s ] Index Params -- d: 1024, N: 1000000
terminate called after throwing an instance of 'faiss::FaissException'
  what():  Error in faiss::FileIOReader::FileIOReader(const char*) at /home/mocheng/code/faiss/faiss/impl/io.cpp:67: Error: 'f' failed: could not open /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 for reading: No such file or directory
Command terminated by signal 6
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 700 1024"
	User time (seconds): 0.13
	System time (seconds): 0.03
	Percent of CPU this job got: 38%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.45
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 63396
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 14515
	Voluntary context switches: 8
	Involuntary context switches: 1
	Swaps: 0
	File system inputs: 64
	File system outputs: 0
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:37
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.072s ] Loaded metadata, 1000000 attr's found
[ 0.072s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.098s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.099s ] Loaded 10000 YTRGB1m queries
[ 0.165s ] Loaded ground truth, gt_size: 100
[ 0.165s ] Index Params -- d: 1024, N: 1000000
terminate called after throwing an instance of 'faiss::FaissException'
  what():  Error in faiss::FileIOReader::FileIOReader(const char*) at /home/mocheng/code/faiss/faiss/impl/io.cpp:67: Error: 'f' failed: could not open /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 for reading: No such file or directory
Command terminated by signal 6
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 700 1024"
	User time (seconds): 0.13
	System time (seconds): 0.03
	Percent of CPU this job got: 42%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.41
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 63396
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 14491
	Voluntary context switches: 3
	Involuntary context switches: 2
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:45
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024
nprobe: 700
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.091s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.093s ] Loaded 10000 YTRGB1m queries
[ 0.159s ] Loaded ground truth, gt_size: 100
[ 0.159s ] Index Params -- d: 1024, N: 1000000
terminate called after throwing an instance of 'faiss::FaissException'
  what():  Error in faiss::FileIOReader::FileIOReader(const char*) at /home/mocheng/code/faiss/faiss/impl/io.cpp:67: Error: 'f' failed: could not open /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 for reading: No such file or directory
Command terminated by signal 6
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_1024 700 1024"
	User time (seconds): 0.13
	System time (seconds): 0.03
	Percent of CPU this job got: 56%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.29
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 63388
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 14492
	Voluntary context switches: 3
	Involuntary context switches: 2
	Swaps: 0
	File system inputs: 0
	File system outputs: 0
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
