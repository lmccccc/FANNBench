Start time: 06:18
====================
START: running TEST_ACORN for hnsw, sift data --128cores

dataset: sift
N: 1000000
M: 32
M_beta: 64
topk: 10
gamma: 12
dataset file: ../../dataset/sift/sift_base.fvecs
query file: ../../dataset/sift/sift_query.fvecs
attr file: ../../dataset/sift/sift_attr.json
qrange file: ../../dataset/sift/sift_qrange.json
gt file: ../../dataset/sift/sift_gt_10.json
metadata or vector loaded from json, size: 1000000
loaded base attributes from: ../../dataset/sift/sift_attr.json
[0.090 s] Loaded metadata, 1000000 attr's found
[0.090 s] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[0.092 s] Loaded query vectors from ../../dataset/sift/sift_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: ../../dataset/sift/sift_qrange.json
[0.094 s] Loaded 10000 sift queries
metadata or vector loaded from json, size: 100000
loaded gt from: ../../dataset/sift/sift_gt_10.json
[0.104 s] Loaded ground truth, gt_size: 10
[0.104 s] Index Params -- d: 128, M: 32, N: 1000000, gamma: 12
--ACORN index created
====================Vectors====================

[0.104 s] Loading database
[0.393 s] Loaded base vectors from file: ../../dataset/sift/sift_base.fvecs
data loaded, with dim: 128, nb=1000000
[0.393 s] Indexing database, size 1000000*128 from max 1000000
[0.393 s] Adding the vectors to the index
[101.208 s] Vectors added to hybrid index 
Hybrid index vectors added:1000000
====================Write Index================

[101.763 s] Wrote hybrid index to file: ../../dataset/sift/acorn_result/sift_hybidindex_M=32_efc40_Mb=64_gamma=12.json
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 112
		indx 2: 496
		indx 3: 880
		indx 4: 1264
		indx 5: 1648
	* level probabilities
		level 0: 0.968750
		level 1: 0.030273
		level 2: 0.000946
		level 3: 0.000030
		level 4: 0.000001
		level 5: 0.000000
	* efConstruction: 384
	* efSearch: 16
	* max_level: 4
	* entry_point: 118295
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 112 neighbors per vertex:
   1. nb of nodes: 1000000
   2. neighbors per node: 82.80 (82799101)
   3. nb of reciprocal neighbors: 54.44
   4. nb of neighbors that are also neighbor-of-neighbors: 80.56 (80559745)
========= LEVEL 1 =======
* stats on level 1, max 384 neighbors per vertex:
   1. nb of nodes: 31254
   2. neighbors per node: 384.00 (12001536)
   3. nb of reciprocal neighbors: 50.25
   4. nb of neighbors that are also neighbor-of-neighbors: 330.14 (10318176)
========= LEVEL 2 =======
* stats on level 2, max 384 neighbors per vertex:
   1. nb of nodes: 978
   2. neighbors per node: 357.13 (349278)
   3. nb of reciprocal neighbors: 314.12
   4. nb of neighbors that are also neighbor-of-neighbors: 356.12 (348282)
========= LEVEL 3 =======
* stats on level 3, max 384 neighbors per vertex:
   1. nb of nodes: 27
   2. neighbors per node: 25.33 (684)
   3. nb of reciprocal neighbors: 23.48
   4. nb of neighbors that are also neighbor-of-neighbors: 24.63 (665)
========= LEVEL 4 =======
* stats on level 4, max 384 neighbors per vertex:
   1. nb of nodes: 1
   2. neighbors per node: 0.00 (0)
   3. nb of reciprocal neighbors: 0.00
   4. nb of neighbors that are also neighbor-of-neighbors: 0.00 (0)
METADATA VEC for number nodes per level
	level 0: 999893 nodes
	level 1: 31253 nodes
	level 2: 978 nodes
	level 3: 27 nodes
	level 4: 1 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[103.876 s] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 16
[133.888 s] Query results (vector ids, then distances):
query  0 nn's (2):  701258 (6)  872728 (6)  562594 (6)  908244 (2)  600499 (2)  746931 (2)  565419 (2)  568573 (4)    2176 (6)  910119 (2) 
     dis: 	  69844   71861   73537   73581   73793   75554   75634   75944   76608   77564 
query  1 nn's (6):  413071 (9)  249062 (10)  400194 (6)  941776 (6)  248426 (8)  208391 (8)  192537 (5)  271353 (8)  948375 (8)  480949 (6) 
     dis: 	  52570   55586   55595   57646   58741   59679   59720   59720   60673   62997 
query  2 nn's (4):  669835 (9)  408764 (7)  408462 (11)  408855 (3)  551661 (9)  861882 (7)  406273 (6)  406324 (11)  551743 (9)  861530 (4) 
     dis: 	  30792   31091   33608   34104   34698   35704   36048   36225   36325   36348 
query  3 nn's (10):  970797 (2)  125539 (2)  191115 (9)  889039 (8)  546470 (1)  123985 (7)  546496 (8)  831905 (1)  832999 (2)  190692 (7) 
     dis: 	  30510   30863   34876   34909   35734   36107   36113   36624   36743   36892 
query  4 nn's (2):  748397 (5)  748193 (1)  716433 (2)  107281 (6)  416604 (1)  371420 (3)  368246 (9)  279082 (6)  175407 (1)  403978 (9) 
     dis: 	  47367   48151   52559   54643   55814   56914   57046   57527   58065   59193 
[133.888 s] *** Query time: 0.086647
 *** acorn recall 
acorn get 75527 postive res from 100000 results, recall@10:0.75527
recall dist(10% per bucket): 0.0055 0.0086 0.0214 0.0327 0.0504 0.0713 0.0957 0.1234 0.1584 0.1861 0.2465 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[134.504 s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 7595754
ndis: 0
nreorder: 0
average distance computations per query: 759.575378
[134.504 s] -----DONE-----
