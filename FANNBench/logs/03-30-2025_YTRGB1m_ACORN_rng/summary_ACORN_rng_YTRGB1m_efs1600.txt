Start time: 02:00
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.111s ] Loaded metadata, 1000000 attr's found
[ 0.111s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.135s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
[ 0.137s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
[ 0.148s ] Loaded ground truth, gt_size: 10
[ 0.148s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
terminate called after throwing an instance of 'faiss::FaissException'
  what():  Error in faiss::FileIOReader::FileIOReader(const char*) at /home/mocheng/code/ACORN/faiss/impl/io.cpp:67: Error: 'f' failed: could not open /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 for reading: No such file or directory
Command terminated by signal 6
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 0.10
	System time (seconds): 0.05
	Percent of CPU this job got: 3%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:04.33
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 56548
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 24271
	Voluntary context switches: 3
	Involuntary context switches: 1
	Swaps: 0
	File system inputs: 0
	File system outputs: 0
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:17
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.118s ] Loaded metadata, 1000000 attr's found
[ 0.118s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.141s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
[ 0.143s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
[ 0.154s ] Loaded ground truth, gt_size: 10
[ 0.154s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999930 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025523
Average degree per layer:170920.500
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 4.200s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 1.000
[ 340.411s ] Query results (vector ids, then distances):
query 0 nn's (419): 929361 (8625) 986245 (2438) 889953 (20690) 807214 (33933) 984621 (1376) 333483 (3213) 521249 (5304) 48714 (3285) 980214 (3358) 418474 (20587) 
     dis: 	80.477 82.411 83.500 85.685 86.047 86.921 88.069 88.391 88.567 88.657 
query 1 nn's (2147483647): 230459 (3753) 302746 (1711) 470075 (50266) 963956 (172687) 497306 (2143) 506689 (8264) 187245 (13126) 630027 (57668) 320776 (61674) 819134 (10714) 
     dis: 	49.807 50.920 51.472 53.192 53.385 53.409 53.556 53.659 53.817 54.079 
query 2 nn's (419): 423205 (2778) 326896 (12024) 531527 (2028) 435470 (4103) 871743 (6917) 225875 (3761) 947479 (1436) 633590 (2353) 308085 (1462) 528201 (3388) 
     dis: 	132.517 135.169 135.263 135.721 136.001 136.506 137.157 137.396 137.761 137.993 
query 3 nn's (2147483647): 462979 (19619) 421752 (179537) 505074 (5015) 870912 (4123) 26879 (21558) 205071 (10658) 551084 (19440) 99295 (12875) 873503 (10577099) 62225 (2191) 
     dis: 	141.830 145.172 147.460 153.062 159.987 164.129 164.455 167.020 167.047 168.615 
query 4 nn's (419): 314093 (1560) 719380 (6117) 458697 (2101) 690285 (9682) 223865 (2010) 950887 (3058) 895955 (2776) 461345 (2800) 89809 (2923) 829463 (54915) 
     dis: 	52.671 56.225 59.060 63.143 65.602 66.157 68.052 71.556 72.466 74.037 
[ 340.411s ] *** Query time: 329.051
qps: 30.390
 *** acorn recall 
efs:1600
acorn get 91623 postive res from 100000 results, recall@10:0.916
recall dist(10% per bucket): 0.004 0.004 0.006 0.007 0.011 0.019 0.027 0.041 0.066 0.136 0.679 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[340.413s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 181158034
ndis: 0
nreorder: 0
average distance computations per query: 18115.803
[ 340.413s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 333.29
	System time (seconds): 7.50
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:40.81
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5248228
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1692514
	Voluntary context switches: 1
	Involuntary context switches: 261
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:22
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.111s ] Loaded metadata, 1000000 attr's found
[ 0.111s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.135s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
[ 0.138s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
[ 0.149s ] Loaded ground truth, gt_size: 10
[ 0.149s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999930 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025523
Average degree per layer:170920.500
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.830s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 0.500
[ 437.455s ] Query results (vector ids, then distances):
query 0 nn's (1267): 986245 (2438) 984621 (1376) 333483 (3213) 521249 (5304) 48714 (3285) 980214 (3358) 662806 (3695) 599702 (5849) 916929 (1333) 86717 (1938) 
     dis: 	82.411 86.047 86.921 88.069 88.391 88.567 88.756 89.420 91.724 92.056 
query 1 nn's (6842): 230459 (3753) 302746 (1711) 497306 (2143) 506689 (8264) 853723 (9251) 138086 (2308) 373852 (9446) 326679 (7296) 358433 (2215) 689633 (2134) 
     dis: 	49.807 50.920 53.385 53.409 54.131 54.328 54.349 54.387 54.582 54.671 
query 2 nn's (1660): 423205 (2778) 531527 (2028) 435470 (4103) 871743 (6917) 225875 (3761) 633590 (2353) 528201 (3388) 509845 (3059) 666817 (7868) 979613 (2315) 
     dis: 	132.517 135.263 135.721 136.001 136.506 137.396 137.993 139.068 139.336 139.364 
query 3 nn's (9508): 462979 (19619) 505074 (5015) 26879 (21558) 205071 (10658) 551084 (19440) 99295 (12875) 759272 (73427) 469561 (27078) 14703 (35001) 954742 (18664) 
     dis: 	141.830 147.460 159.987 164.129 164.455 167.020 169.516 170.649 171.253 171.878 
query 4 nn's (1724): 719380 (6117) 690285 (9682) 950887 (3058) 461345 (2800) 89809 (2923) 62933 (5287) 969735 (4636) 27286 (4314) 565522 (19123) 693282 (5409) 
     dis: 	56.225 63.143 66.157 71.556 72.466 75.294 75.616 76.658 79.761 79.911 
[ 437.455s ] *** Query time: 383.799
qps: 26.055
 *** acorn recall 
efs:1600
acorn get 94784 postive res from 100000 results, recall@10:0.948
recall dist(10% per bucket): 0.001 0.001 0.002 0.003 0.004 0.009 0.016 0.030 0.057 0.129 0.748 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[437.455s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 201805395
ndis: 0
nreorder: 0
average distance computations per query: 20180.539
[ 437.455s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 431.34
	System time (seconds): 6.34
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:17.70
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5248232
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1322210
	Voluntary context switches: 1
	Involuntary context switches: 251
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:30
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.120s ] Loaded metadata, 1000000 attr's found
[ 0.120s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.145s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
[ 0.148s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
[ 0.159s ] Loaded ground truth, gt_size: 10
[ 0.159s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999930 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025523
Average degree per layer:170920.500
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.904s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 0.100
[ 449.440s ] Query results (vector ids, then distances):
query 0 nn's (38855): 239994 (69257) 737273 (113404) 469118 (94608) 99619 (56529) 952701 (51288) 973705 (48354) 945815 (121035) 315673 (136096) 863882 (51634) 95475 (62765) 
     dis: 	89.980 91.199 92.759 92.927 93.375 95.349 95.953 96.081 96.189 96.407 
query 1 nn's (139269): 411735 (20503) 380703 (20612) 833378 (33326) 431933 (31516) 360005 (30819) 365136 (35560) 731008 (26372) 146981 (27559) 466827 (32372) 667959 (22694) 
     dis: 	55.105 55.684 56.307 56.479 56.682 57.351 57.361 57.848 59.323 59.359 
query 2 nn's (18169): 435470 (4103) 76351 (5317) 44203 (5374) 473207 (5280) 604626 (4097) 907166 (5172) 142229 (4776) 290643 (5230) 867372 (5230) 423023 (5239) 
     dis: 	135.721 141.252 141.655 141.696 141.867 142.668 142.683 143.368 143.368 143.631 
query 3 nn's (37472): 608874 (2611) 976442 (2579) 117658 (2990) 871467 (2996) 368216 (2616) 717608 (2612) 523139 (2339) 312252 (2292) 258253 (2335) 495338 (2541) 
     dis: 	177.477 179.518 184.267 185.836 185.837 185.953 186.303 186.915 186.954 188.189 
query 4 nn's (4082): 565522 (19123) 343865 (20909) 272496 (18617) 864885 (19198) 302474 (17449) 4088 (17006) 275060 (16756) 552830 (32019) 386301 (20767) 751020 (27082) 
     dis: 	79.761 93.190 93.270 95.693 102.008 107.351 108.890 112.116 112.985 115.876 
[ 449.440s ] *** Query time: 406.226
qps: 24.617
 *** acorn recall 
efs:1600
acorn get 97584 postive res from 100000 results, recall@10:0.976
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.001 0.004 0.011 0.032 0.113 0.838 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[449.442s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 160368247
ndis: 0
nreorder: 0
average distance computations per query: 16036.824
[ 449.442s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 441.14
	System time (seconds): 8.73
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:29.90
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5247204
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2429700
	Voluntary context switches: 1
	Involuntary context switches: 761
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:37
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.118s ] Loaded metadata, 1000000 attr's found
[ 0.118s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.144s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
[ 0.146s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
[ 0.157s ] Loaded ground truth, gt_size: 10
[ 0.157s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999930 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025523
Average degree per layer:170920.500
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.917s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 0.010
[ 320.899s ] Query results (vector ids, then distances):
query 0 nn's (1256): 510683 (1260) 776796 (1294) 857336 (1283) 242809 (1257) 847206 (1263) 700953 (1275) 972394 (1286) 639138 (1269) 301718 (1269) 379533 (1299) 
     dis: 	92.935 94.695 97.720 103.930 104.201 105.218 106.113 106.326 106.469 106.652 
query 1 nn's (1308): 853723 (9251) 289226 (9045) 899467 (9013) 146952 (9262) 67855 (9144) 189649 (9182) 39208 (9268) 867373 (8991) 928143 (9135) 726010 (9250) 
     dis: 	54.131 60.343 61.078 63.427 67.867 68.242 68.813 69.328 70.383 70.427 
query 2 nn's (8869): 476128 (1903) 620703 (1905) 109689 (1883) 891387 (1904) 159822 (1884) 862477 (1910) 236569 (1884) 735131 (1904) 388982 (1936) 281526 (1904) 
     dis: 	141.927 148.201 148.236 148.591 149.309 150.065 150.578 151.225 151.890 152.555 
query 3 nn's (9273): 609297 (3970) 132271 (4037) 442774 (4006) 963521 (4034) 749227 (3925) 387378 (4031) 509548 (3996) 45286 (4023) 150035 (3961) 193941 (4006) 
     dis: 	184.386 188.555 190.689 191.211 192.834 192.976 193.549 193.914 194.914 195.861 
query 4 nn's (1883): 266702 (6225) 619953 (6242) 82323 (6199) 246790 (6322) 477947 (6220) 133257 (6213) 782564 (6196) 291473 (6438) 59582 (6274) 792679 (6323) 
     dis: 	89.644 132.251 142.849 154.143 180.409 182.511 187.850 194.887 204.973 208.133 
[ 320.899s ] *** Query time: 285.167
qps: 35.067
 *** acorn recall 
efs:1600
acorn get 92548 postive res from 100000 results, recall@10:0.925
recall dist(10% per bucket): 0.027 0.000 0.001 0.002 0.001 0.003 0.009 0.022 0.063 0.201 0.671 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[320.900s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 36497259
ndis: 0
nreorder: 0
average distance computations per query: 3649.726
[ 320.900s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 316.36
	System time (seconds): 4.72
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:21.09
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5248228
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1322208
	Voluntary context switches: 1
	Involuntary context switches: 218
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:07
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.117s ] Loaded metadata, 1000000 attr's found
[ 0.117s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.142s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
[ 0.145s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
[ 0.156s ] Loaded ground truth, gt_size: 10
[ 0.156s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999892 nodes
level 1 : 24950 nodes
level 2 : 619 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025478
Average degree per layer:170913.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.837s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 1.000
[ 517.326s ] Query results (vector ids, then distances):
query 0 nn's (419): 929361 (8625) 986245 (2438) 889953 (20690) 807214 (33933) 984621 (1376) 333483 (3213) 521249 (5304) 48714 (3285) 980214 (3358) 418474 (20587) 
     dis: 	80.477 82.411 83.500 85.685 86.047 86.921 88.069 88.391 88.567 88.657 
query 1 nn's (2147483647): 230459 (3753) 302746 (1711) 470075 (50266) 963956 (172687) 497306 (2143) 506689 (8264) 187245 (13126) 630027 (57668) 320776 (61674) 819134 (10714) 
     dis: 	49.807 50.920 51.472 53.192 53.385 53.409 53.556 53.659 53.817 54.079 
query 2 nn's (419): 423205 (2778) 326896 (12024) 531527 (2028) 435470 (4103) 871743 (6917) 225875 (3761) 947479 (1436) 633590 (2353) 308085 (1462) 528201 (3388) 
     dis: 	132.517 135.169 135.263 135.721 136.001 136.506 137.157 137.396 137.761 137.993 
query 3 nn's (2147483647): 462979 (19619) 421752 (179537) 505074 (5015) 26879 (21558) 551084 (19440) 99295 (12875) 873503 (10577099) 62225 (2191) 581576 (1746) 759272 (73427) 
     dis: 	141.830 145.172 147.460 159.987 164.455 167.020 167.047 168.615 168.717 169.516 
query 4 nn's (419): 314093 (1560) 719380 (6117) 458697 (2101) 690285 (9682) 223865 (2010) 950887 (3058) 895955 (2776) 461345 (2800) 89809 (2923) 829463 (54915) 
     dis: 	52.671 56.225 59.060 63.143 65.602 66.157 68.052 71.556 72.466 74.037 
[ 517.326s ] *** Query time: 506.282
qps: 19.752
 *** acorn recall 
efs:1600
acorn get 91255 postive res from 100000 results, recall@10:0.913
recall dist(10% per bucket): 0.000 0.002 0.003 0.007 0.012 0.020 0.035 0.049 0.085 0.155 0.632 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[517.327s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 306828185
ndis: 0
nreorder: 0
average distance computations per query: 30682.818
[ 517.327s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 513.05
	System time (seconds): 4.44
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:37.50
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5248232
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1322710
	Voluntary context switches: 1
	Involuntary context switches: 219
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:16
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.114s ] Loaded metadata, 1000000 attr's found
[ 0.114s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.137s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
[ 0.139s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
[ 0.150s ] Loaded ground truth, gt_size: 10
[ 0.150s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999892 nodes
level 1 : 24950 nodes
level 2 : 619 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025478
Average degree per layer:170913.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.814s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 0.500
[ 443.424s ] Query results (vector ids, then distances):
query 0 nn's (1267): 986245 (2438) 984621 (1376) 333483 (3213) 521249 (5304) 48714 (3285) 980214 (3358) 662806 (3695) 599702 (5849) 916929 (1333) 86717 (1938) 
     dis: 	82.411 86.047 86.921 88.069 88.391 88.567 88.756 89.420 91.724 92.056 
query 1 nn's (6842): 230459 (3753) 302746 (1711) 497306 (2143) 506689 (8264) 853723 (9251) 138086 (2308) 373852 (9446) 326679 (7296) 358433 (2215) 689633 (2134) 
     dis: 	49.807 50.920 53.385 53.409 54.131 54.328 54.349 54.387 54.582 54.671 
query 2 nn's (1660): 423205 (2778) 435470 (4103) 871743 (6917) 225875 (3761) 633590 (2353) 528201 (3388) 509845 (3059) 666817 (7868) 979613 (2315) 795823 (2418) 
     dis: 	132.517 135.721 136.001 136.506 137.396 137.993 139.068 139.336 139.364 139.694 
query 3 nn's (9508): 462979 (19619) 505074 (5015) 26879 (21558) 551084 (19440) 99295 (12875) 759272 (73427) 469561 (27078) 14703 (35001) 954742 (18664) 979326 (37641) 
     dis: 	141.830 147.460 159.987 164.455 167.020 169.516 170.649 171.253 171.878 173.730 
query 4 nn's (1724): 719380 (6117) 690285 (9682) 950887 (3058) 461345 (2800) 89809 (2923) 62933 (5287) 969735 (4636) 27286 (4314) 565522 (19123) 693282 (5409) 
     dis: 	56.225 63.143 66.157 71.556 72.466 75.294 75.616 76.658 79.761 79.911 
[ 443.424s ] *** Query time: 389.764
qps: 25.657
 *** acorn recall 
efs:1600
acorn get 83730 postive res from 100000 results, recall@10:0.837
recall dist(10% per bucket): 0.007 0.010 0.014 0.019 0.029 0.040 0.055 0.074 0.110 0.177 0.464 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[443.425s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 207141092
ndis: 0
nreorder: 0
average distance computations per query: 20714.109
[ 443.425s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 435.01
	System time (seconds): 8.90
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:23.95
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5248232
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2368733
	Voluntary context switches: 1
	Involuntary context switches: 806
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:23
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.111s ] Loaded metadata, 1000000 attr's found
[ 0.111s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.136s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
[ 0.138s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
[ 0.149s ] Loaded ground truth, gt_size: 10
[ 0.149s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999892 nodes
level 1 : 24950 nodes
level 2 : 619 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025478
Average degree per layer:170913.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.867s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 0.100
[ 79.648s ] Query results (vector ids, then distances):
query 0 nn's (38855): 239994 (69257) 737273 (113404) 469118 (94608) 99619 (56529) 952701 (51288) 973705 (48354) 945815 (121035) 315673 (136096) 863882 (51634) 95475 (62765) 
     dis: 	89.980 91.199 92.759 92.927 93.375 95.349 95.953 96.081 96.189 96.407 
query 1 nn's (139269): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	191.575 267.194 441.966 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (18169): 534705 (5400) 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	219.038 271.206 317.806 511.579 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (37472): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	313.989 414.502 562.605 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (4082): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	398.852 462.794 648.391 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 79.648s ] *** Query time: 36.475
qps: 274.159
 *** acorn recall 
efs:1600
acorn get 12455 postive res from 100000 results, recall@10:0.125
recall dist(10% per bucket): 0.800 0.010 0.013 0.016 0.018 0.018 0.025 0.022 0.029 0.028 0.021 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[79.650s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 13991153
ndis: 0
nreorder: 0
average distance computations per query: 1399.115
[ 79.650s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 75.82
	System time (seconds): 4.01
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:19.87
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5248228
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1358569
	Voluntary context switches: 1
	Involuntary context switches: 99
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:25
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64
ef_search: 1600 
dim: 1024
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.119s ] Loaded metadata, 1000000 attr's found
[ 0.119s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.143s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
[ 0.146s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
[ 0.157s ] Loaded ground truth, gt_size: 10
[ 0.157s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999892 nodes
level 1 : 24950 nodes
level 2 : 619 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025478
Average degree per layer:170913.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.851s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 1600
selectivity: 0.010
[ 36.383s ] Query results (vector ids, then distances):
query 0 nn's (1256): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	211.538 300.695 463.103 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1308): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	191.575 267.194 441.966 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (8869): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	271.206 317.806 511.579 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (9273): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	313.989 414.502 562.605 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1883): 0 (6650) 2 (7756) 1 (1832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	398.852 462.794 648.391 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 36.383s ] *** Query time: 1.196
qps: 8360.668
 *** acorn recall 
efs:1600
acorn get 3 postive res from 100000 results, recall@10:0.000
recall dist(10% per bucket): 1.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[36.384s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 217253
ndis: 0
nreorder: 0
average distance computations per query: 21.725
[ 36.384s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/acorn_rng/index/index_acorn_rng_sel_1_100000_real_M40_ga25_Mb64 1600 1024"
	User time (seconds): 32.76
	System time (seconds): 4.64
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:37.46
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5248228
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1322207
	Voluntary context switches: 1
	Involuntary context switches: 119
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
