Start time: 05:48
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
K: 10
nprobe: 10
collection name: collection_redcaps1m_sel_1_100000_real_512
get dataset size: 1000000  d: 512
dim: 512
_N: 1000000  N: 1000000
partition M: 512
nlist: 1000
start insertion
batch size: 16384  total batch: 61
insert batch: 0.0  of  61  from  0  to  16384
insert batch: 1.0  of  61  from  16384  to  32768
insert batch: 2.0  of  61  from  32768  to  49152
insert batch: 3.0  of  61  from  49152  to  65536
insert batch: 4.0  of  61  from  65536  to  81920
insert batch: 5.0  of  61  from  81920  to  98304
insert batch: 6.0  of  61  from  98304  to  114688
insert batch: 7.0  of  61  from  114688  to  131072
insert batch: 8.0  of  61  from  131072  to  147456
insert batch: 9.0  of  61  from  147456  to  163840
insert batch: 10.0  of  61  from  163840  to  180224
insert batch: 11.0  of  61  from  180224  to  196608
insert batch: 12.0  of  61  from  196608  to  212992
insert batch: 13.0  of  61  from  212992  to  229376
insert batch: 14.0  of  61  from  229376  to  245760
insert batch: 15.0  of  61  from  245760  to  262144
insert batch: 16.0  of  61  from  262144  to  278528
insert batch: 17.0  of  61  from  278528  to  294912
insert batch: 18.0  of  61  from  294912  to  311296
insert batch: 19.0  of  61  from  311296  to  327680
insert batch: 20.0  of  61  from  327680  to  344064
insert batch: 21.0  of  61  from  344064  to  360448
insert batch: 22.0  of  61  from  360448  to  376832
insert batch: 23.0  of  61  from  376832  to  393216
insert batch: 24.0  of  61  from  393216  to  409600
insert batch: 25.0  of  61  from  409600  to  425984
insert batch: 26.0  of  61  from  425984  to  442368
insert batch: 27.0  of  61  from  442368  to  458752
insert batch: 28.0  of  61  from  458752  to  475136
insert batch: 29.0  of  61  from  475136  to  491520
insert batch: 30.0  of  61  from  491520  to  507904
insert batch: 31.0  of  61  from  507904  to  524288
insert batch: 32.0  of  61  from  524288  to  540672
insert batch: 33.0  of  61  from  540672  to  557056
insert batch: 34.0  of  61  from  557056  to  573440
insert batch: 35.0  of  61  from  573440  to  589824
insert batch: 36.0  of  61  from  589824  to  606208
insert batch: 37.0  of  61  from  606208  to  622592
insert batch: 38.0  of  61  from  622592  to  638976
insert batch: 39.0  of  61  from  638976  to  655360
insert batch: 40.0  of  61  from  655360  to  671744
insert batch: 41.0  of  61  from  671744  to  688128
insert batch: 42.0  of  61  from  688128  to  704512
insert batch: 43.0  of  61  from  704512  to  720896
insert batch: 44.0  of  61  from  720896  to  737280
insert batch: 45.0  of  61  from  737280  to  753664
insert batch: 46.0  of  61  from  753664  to  770048
insert batch: 47.0  of  61  from  770048  to  786432
insert batch: 48.0  of  61  from  786432  to  802816
insert batch: 49.0  of  61  from  802816  to  819200
insert batch: 50.0  of  61  from  819200  to  835584
insert batch: 51.0  of  61  from  835584  to  851968
insert batch: 52.0  of  61  from  851968  to  868352
insert batch: 53.0  of  61  from  868352  to  884736
insert batch: 54.0  of  61  from  884736  to  901120
insert batch: 55.0  of  61  from  901120  to  917504
insert batch: 56.0  of  61  from  917504  to  933888
insert batch: 57.0  of  61  from  933888  to  950272
insert batch: 58.0  of  61  from  950272  to  966656
insert batch: 59.0  of  61  from  966656  to  983040
insert batch: 60.0  of  61  from  983040  to  999424
insert batch: 61.0  of  61  from  999424  to  1000000
insertion cost: 102.87648320198059
collection size: data: ["{'count(*)': 1000000}"]
insert suc, time cost: 620.0544812679291
construction done
	Command being timed: "python -u utils/pymilvus_ivfpq.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json 10 10 collection_redcaps1m_sel_1_100000_real_512 construction 512 512"
	User time (seconds): 98.82
	System time (seconds): 26.51
	Percent of CPU this job got: 16%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 12:57.89
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 22927340
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 25201536
	Voluntary context switches: 29731
	Involuntary context switches: 1557
	Swaps: 0
	File system inputs: 0
	File system outputs: 160
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:22
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
K: 10
nprobe: 10
collection name: collection_redcaps1m_sel_1_100000_real_512
collection  collection_redcaps1m_sel_1_100000_real_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  92496  postive res from  100000  results, recall@ 10 : 0.92496
recall dist(10\% per bucket):  [0.     0.0007 0.0012 0.0021 0.0055 0.0122 0.0243 0.0446 0.0821 0.2306
 0.5967]
10000  queries cost: 530.1910939216614 , qps: 18.86112406384094
	Command being timed: "python -u utils/pymilvus_ivfpq.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json 10 10 collection_redcaps1m_sel_1_100000_real_512 query 512 512"
	User time (seconds): 51.26
	System time (seconds): 6.74
	Percent of CPU this job got: 10%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:54.78
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 117320
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 59000
	Voluntary context switches: 30607
	Involuntary context switches: 502792
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:53
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
K: 10
nprobe: 10
collection name: collection_redcaps1m_sel_1_100000_real_512
collection  collection_redcaps1m_sel_1_100000_real_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  83711  postive res from  100000  results, recall@ 10 : 0.83711
recall dist(10\% per bucket):  [3.000e-04 2.400e-03 6.100e-03 1.390e-02 2.430e-02 4.520e-02 6.690e-02
 1.040e-01 1.386e-01 2.296e-01 3.687e-01]
10000  queries cost: 549.5116729736328 , qps: 18.197975569628763
	Command being timed: "python -u utils/pymilvus_ivfpq.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json 10 10 collection_redcaps1m_sel_1_100000_real_512 query 512 512"
	User time (seconds): 60.97
	System time (seconds): 10.55
	Percent of CPU this job got: 12%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 9:14.87
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114256
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 62221
	Voluntary context switches: 31980
	Involuntary context switches: 503111
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:24
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
K: 10
nprobe: 10
collection name: collection_redcaps1m_sel_1_100000_real_512
collection  collection_redcaps1m_sel_1_100000_real_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
error, get  9  results, expect  10
res: data: ["[{'id': 253099, 'distance': 0.778714656829834, 'entity': {}}, {'id': 753135, 'distance': 1.0083115100860596, 'entity': {}}, {'id': 928809, 'distance': 1.0401619672775269, 'entity': {}}, {'id': 368980, 'distance': 1.0483307838439941, 'entity': {}}, {'id': 970297, 'distance': 1.1383042335510254, 'entity': {}}, {'id': 999014, 'distance': 1.1799392700195312, 'entity': {}}, {'id': 939975, 'distance': 1.199425458908081, 'entity': {}}, {'id': 982605, 'distance': 1.2881816625595093, 'entity': {}}, {'id': 972356, 'distance': 1.3320026397705078, 'entity': {}}]"]
exp: 1599861850 <= label <= 1599939589
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 246, in <module>
    if(ids[i][top] == gt[i][gtind]):
IndexError: list index out of range
Command exited with non-zero status 1
	Command being timed: "python -u utils/pymilvus_ivfpq.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json 10 10 collection_redcaps1m_sel_1_100000_real_512 query 512 512"
	User time (seconds): 3.68
	System time (seconds): 3.42
	Percent of CPU this job got: 126%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:05.63
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 116300
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 31187
	Voluntary context switches: 981
	Involuntary context switches: 735308
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 1
