Start time: 03:59
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_64
nprobe: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.363s ] Loaded metadata, 20000000 attr's found
[ 1.363s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.366s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.369s ] Loaded 10000 sift10M queries
[ 1.437s ] Loaded ground truth, gt_size: 100
[ 1.437s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.467s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 599.252s ] Query results (vector ids, then distances):
query 0 nn's (6, 15386, 98713): 4160485 (64292) 6141318 (6) 4738758 (6) 7077742 (10) 1160663 (39732) 4538400 (6) 9536881 (86399) 2923944 (6) 8191903 (71564) 7293718 (6) 9397776 (6) 6975798 (6) 6252014 (6) 1020562 (10) 9485971 (63663) 9313115 (94019) 238649 (53246) 9925949 (64399) 7866119 (44066) 77153 (70685) 7164607 (49828) 4326493 (28816) 9251169 (68202) 8076858 (6) 888010 (10) 5343331 (99773) 8435256 (6) 2078396 (6) 5710919 (31437) 3255720 (10) 5643020 (10) 5770330 (6) 2549151 (40944) 674077 (10696) 8428377 (54083) 5341499 (35792) 5228659 (77120) 463666 (10) 9409479 (45597) 4785905 (17894) 1642205 (80930) 1203246 (6) 5520369 (33741) 5831094 (6) 8810658 (6) 6871531 (45823) 6019325 (40750) 7974670 (6) 447965 (19839) 951258 (6) 7011791 (65694) 2481703 (90609) 419470 (6) 7459877 (1114) 1698351 (37944) 1892471 (37125) 2380435 (38190) 8039506 (6) 1891236 (10) 4897568 (6) 242725 (73806) 3435228 (10) 476293 (39184) 8644324 (6) 6304441 (30252) 2707047 (1091) 628292 (6) 1059921 (45281) 839586 (10) 5001655 (43125) 7920998 (10) 1249067 (55226) 9906463 (84846) 5835685 (42745) 6328993 (66743) 4271011 (18359) 6799000 (10) 4698776 (6) 392808 (10) 3022114 (6) 2692614 (6) 3474811 (1105) 3384323 (60978) 4396835 (79569) 1415164 (6) 6927082 (275) 5128198 (6) 8610630 (10) 5187160 (6) 3094752 (6) 8364178 (6) 3149007 (77810) 7842689 (17122) 7200266 (6) 4627859 (41150) 2986000 (16) 6560693 (57002) 3517425 (67151) 6865307 (42351) 3409110 (6) 
     dis: 	65808.273 72625.461 74449.000 75033.797 75556.305 75894.031 76589.031 76887.211 76944.016 77124.906 77291.453 77405.328 77438.391 77614.422 78848.219 79160.625 79288.008 79460.570 79879.164 79996.469 80437.930 80478.695 80605.602 80849.531 80957.234 81300.031 81425.648 81510.000 81601.328 81607.492 81671.602 81960.828 82009.852 82047.578 82385.258 82525.102 82670.953 82689.266 82767.234 83000.867 83052.875 83089.008 83093.297 83108.914 83129.766 83228.117 83249.094 83609.477 83733.109 83751.352 83768.516 83899.914 83956.883 84104.430 84190.711 84360.828 84593.773 84728.164 84974.242 85006.203 85041.883 85112.391 85113.727 85159.109 85218.484 85306.969 85314.078 85338.562 85342.109 85351.008 85380.312 85407.672 85494.734 85599.055 85651.727 85699.297 85793.555 85799.977 85875.797 85926.227 85937.500 85938.086 85947.086 86023.672 86088.555 86154.148 86182.430 86188.344 86197.508 86347.859 86353.000 86371.281 86398.547 86406.938 86452.797 86557.508 86732.500 86850.359 86862.062 86870.117 
query 1 nn's (6, 9087, 92417): 8449497 (36517) 285986 (6) 1273419 (43620) 5552416 (10) 1263214 (6) 4907604 (6) 4234271 (81802) 2253711 (96811) 7501440 (6) 9492445 (7547) 9219153 (49751) 6265610 (10) 1909131 (43187) 3645374 (6) 8349375 (29606) 7343838 (6) 5271910 (10) 9009284 (6) 7917424 (6) 4809706 (6) 2993914 (10) 371485 (36090) 6378991 (40982) 1350904 (6) 296178 (6) 5008572 (139) 5589386 (10) 5516040 (6) 9015118 (6) 1503119 (71840) 375999 (48070) 4757479 (21482) 1784776 (6) 6986308 (6) 7031326 (10) 8152291 (1229) 741761 (87690) 1346170 (6) 3324707 (25471) 8646169 (14673) 8984166 (6) 3786289 (84753) 4702839 (20342) 9815150 (10) 3050119 (36482) 4493346 (6) 5313986 (6) 4500982 (10) 8175356 (6) 8704684 (6) 8440112 (6) 1000577 (74797) 3872079 (77805) 6630533 (64638) 4512099 (33562) 8401639 (88445) 8457342 (6) 1410399 (69862) 7342014 (6) 4364584 (10) 8518091 (95042) 3665630 (10) 895436 (6) 1461697 (42209) 6383821 (15447) 4009753 (7273) 5226515 (28945) 6087695 (85288) 7315015 (99683) 9913606 (6) 5869072 (6) 3093537 (73034) 7968009 (47275) 5386381 (52797) 7502105 (73990) 3083636 (6) 7672903 (45570) 963644 (10) 7512095 (74415) 4960102 (6) 8743749 (95005) 6566369 (29053) 4572312 (10) 3200275 (8730) 5700748 (6) 5254261 (83050) 1012664 (10) 2235415 (5344) 3594866 (6) 7610510 (48) 727506 (10) 7513620 (6) 735668 (6) 5307850 (6) 3891904 (6) 2716664 (6) 9591804 (10) 4357659 (55175) 3813783 (80661) 2027961 (97961) 
     dis: 	34675.906 43244.461 43367.484 44178.637 45585.180 46325.406 46459.625 46911.375 46928.469 49631.117 50457.156 50865.762 50930.734 51216.727 52268.477 52916.973 53240.984 53514.641 54321.969 54757.957 54854.723 55138.422 55163.305 55312.383 55438.578 55768.984 55928.781 56135.680 56188.117 56283.613 56306.523 56844.254 57067.957 57175.973 57857.180 57867.914 58024.145 58092.207 58099.250 58272.633 58413.812 58428.172 58443.680 58473.879 58487.938 58820.164 59333.684 59390.043 59577.227 59888.121 60103.859 60112.844 60215.363 60250.566 60561.609 60716.141 60844.031 61030.488 61074.191 61096.371 61106.062 61351.906 61381.047 61403.609 61717.945 61839.684 62036.039 62038.750 62151.547 62185.766 62304.578 62522.176 62572.281 62616.520 62821.535 63260.641 63280.938 63355.734 63363.586 63530.359 63694.961 63808.750 63935.824 64252.609 64312.262 64338.465 64538.750 64733.453 65057.215 65109.535 65213.453 65287.883 65308.414 65374.258 65389.383 65489.469 65553.094 65857.062 65911.609 65930.492 
query 2 nn's (6, 3328, 86670): 3900297 (20164) 4588082 (6) 8667807 (56895) 237844 (10) 289025 (48384) 4480383 (83754) 3493381 (7597) 7500565 (14056) 5982237 (2651) 6296252 (10) 5637368 (6) 4457160 (20) 5988705 (49406) 2795236 (6) 6347813 (76387) 8510786 (10) 9410320 (6) 1784913 (36433) 7654217 (82384) 271911 (70445) 2994193 (88130) 4154052 (6) 8923155 (80654) 4757879 (18184) 1198061 (27138) 8086660 (10) 9362419 (63726) 8565013 (40048) 6114289 (93945) 3724739 (88488) 3832486 (6) 4555038 (10) 1229611 (35137) 9403244 (10) 9541874 (20) 436139 (37584) 141025 (70292) 409456 (6) 8198272 (6) 6290196 (6) 419195 (5112) 4519717 (80007) 8563094 (6) 8070798 (6) 8476333 (54811) 4347605 (36788) 9790465 (72911) 4021389 (6870) 1463083 (66825) 3293173 (56555) 4973399 (46136) 5631784 (6) 4495608 (6) 1878319 (83394) 7685482 (10) 3967402 (6) 3567890 (10) 9910009 (124) 1956474 (6) 3795529 (89040) 5596868 (6) 4861540 (10) 7011882 (6) 4135242 (20) 3061201 (22214) 5834114 (10) 49352 (10) 4713533 (26935) 4542872 (6) 9906560 (10) 2262090 (6) 2723946 (6) 2833092 (10) 9384590 (10) 1700496 (6) 764856 (6) 4735422 (10) 5879779 (20690) 6511526 (6) 5520804 (10) 3140269 (29149) 8913430 (6) 9302830 (6) 4111853 (64842) 9724885 (36290) 8801441 (58545) 4283746 (240) 2036301 (84903) 445822 (10) 1758192 (10) 1297680 (10) 2247452 (6) 871001 (21357) 8607006 (19) 4926809 (96064) 4764797 (49094) 1601079 (99970) 7194949 (1886) 4418406 (6) 1759707 (32452) 
     dis: 	42270.398 46290.277 47426.219 48618.285 49842.273 50090.332 50450.598 50812.055 51005.156 51111.473 51124.438 51192.207 51314.062 52135.250 52399.180 52917.055 53175.371 53188.820 53213.242 53304.309 53371.535 53435.875 53462.258 53532.156 53682.016 53728.230 53851.586 54066.789 54263.848 54393.555 54556.828 54675.426 54814.926 55043.875 55067.973 55137.418 55175.680 55511.426 55552.156 55786.754 55788.906 56228.688 56239.559 56349.523 56410.578 56424.289 56458.984 56460.441 56718.816 57042.070 57059.730 57083.383 57139.016 57470.113 57530.480 57569.703 57582.555 57635.996 57704.797 57720.645 57830.797 57841.598 58027.391 58036.250 58144.371 58228.570 58241.039 58267.445 58384.785 58400.867 58511.211 58541.184 58545.297 58745.953 58800.973 58829.391 58888.234 58897.281 58927.723 58951.852 59034.449 59065.824 59098.375 59149.098 59363.699 59366.785 59385.438 59442.957 59492.582 59533.488 59581.746 59689.031 59759.668 59823.238 59922.805 60050.113 60112.805 60159.840 60298.055 60350.250 
query 3 nn's (6, 14596, 97918): 980813 (94636) 2205832 (10) 1527942 (10) 4147780 (6) 7269483 (65893) 6151275 (98235) 8410503 (46018) 3643741 (56342) 1985932 (6) 2892348 (6) 5124856 (6) 1417424 (6) 9010353 (67930) 4904828 (10) 1124016 (10) 1911911 (83471) 8649378 (6) 2218358 (6) 6411621 (41300) 5224964 (424) 1739894 (6) 4246457 (1690) 4890579 (50740) 4486659 (34914) 1514080 (6) 1344917 (57599) 8501071 (84777) 9577990 (6) 9019201 (56911) 692217 (53346) 5716081 (22588) 879082 (6) 5755561 (60663) 1590183 (14872) 9925791 (532) 2630576 (10) 290433 (23339) 2112048 (6) 9257537 (14005) 5381241 (54048) 179529 (77609) 8051314 (6) 192312 (6) 9654367 (36751) 9625994 (6) 7301436 (6) 8660300 (6) 9754475 (51401) 7691560 (6) 7119531 (67214) 1028926 (6) 3421950 (6) 9335193 (49769) 1326424 (6) 5777538 (6) 9444290 (6) 9981635 (81720) 7614050 (6) 9517308 (6) 6317467 (63264) 8688385 (9564) 422848 (6) 840086 (10) 1061321 (75042) 6697954 (10) 1502235 (69950) 8702151 (98984) 7583501 (14419) 5293699 (5745) 6045699 (68937) 222255 (6307) 3828353 (84334) 4372662 (6) 3607435 (27776) 6346885 (59931) 6281603 (53993) 8556892 (19) 5181700 (10) 3704240 (6) 8344580 (10) 4503222 (10) 82034 (6) 8643637 (6114) 8323731 (39157) 7747974 (10) 3080406 (10) 1604878 (6) 1217378 (10) 8796008 (6) 1085693 (52073) 3195943 (10686) 1229577 (69975) 449169 (98220) 9102009 (94350) 9701282 (6) 8819093 (67856) 9288078 (6) 2305251 (16981) 5663020 (10) 2783865 (68841) 
     dis: 	4307.617 4390.735 4429.167 4460.316 4677.812 4688.248 4869.371 5288.036 5306.944 5596.319 5676.660 5746.033 5967.745 6030.625 6172.330 6174.690 6296.265 6305.340 6483.879 6623.638 6747.278 6787.027 6827.336 6964.243 7087.833 7147.005 7186.648 7188.678 7228.387 7241.440 7270.026 7272.527 7292.860 7453.085 7477.250 7478.721 7514.649 7541.135 7563.409 7628.874 7642.829 7697.720 7742.159 7790.398 7823.001 7828.301 7840.615 7960.268 7961.448 7965.099 7991.773 8002.963 8005.697 8112.285 8121.604 8187.470 8187.934 8248.738 8269.359 8289.377 8289.438 8330.717 8386.378 8458.090 8507.957 8566.945 8598.271 8635.840 8737.256 8780.564 8810.335 8952.893 8980.230 8998.579 9076.889 9081.689 9156.180 9167.078 9207.037 9211.904 9247.495 9265.918 9270.641 9301.241 9456.986 9489.740 9597.407 9623.559 9643.042 9656.084 9757.361 9788.786 9789.660 9827.951 9848.859 9949.254 9991.790 10022.454 10030.300 10085.955 
query 4 nn's (6, 1537, 84881): 7091990 (6) 6062843 (7875) 3220361 (76212) 1149636 (10) 769923 (38047) 7358946 (6) 7724095 (48290) 3389697 (45953) 2290505 (57696) 1850409 (6361) 3637016 (6) 39005 (96272) 2989150 (10) 6203168 (10) 4366121 (72105) 1543122 (6) 8630333 (74756) 5175563 (80101) 3495449 (46126) 5135489 (69824) 2908498 (6) 2732612 (10) 5826594 (10) 6637386 (6) 8515169 (27520) 8229155 (79903) 7455536 (6) 5729760 (6) 3850790 (6) 2974906 (10) 1020874 (6) 4158427 (93034) 797235 (56779) 3405146 (6) 5277554 (6) 7434343 (76070) 149112 (6) 1903346 (6) 5707536 (6) 4719865 (97820) 1281985 (12655) 4399052 (6) 330880 (10) 8838225 (96297) 2045614 (38) 7907570 (6) 5221238 (6) 6330957 (66735) 745843 (88638) 9036622 (6) 3803911 (14629) 3903546 (10) 1953827 (69951) 8693682 (6) 2617346 (6) 6887757 (40609) 5126636 (6) 992395 (50111) 9104864 (6) 4128605 (17132) 5130355 (9419) 282088 (6) 9821817 (46280) 6468850 (20) 1591991 (82915) 5324991 (61911) 9398213 (49839) 2085966 (10) 1784595 (22121) 75942 (6) 4374812 (10) 7952787 (81480) 5295225 (42562) 4812723 (21003) 9493047 (10248) 6736089 (9293) 3003097 (79067) 3287249 (22836) 8154342 (10) 8387951 (96321) 3733398 (6) 1229011 (57768) 3882262 (6) 30716 (6) 6030505 (46886) 4982207 (95945) 9432297 (85570) 4027439 (339) 3569920 (10) 6116720 (6) 8831262 (6) 5216743 (49409) 2288117 (5383) 4483878 (6) 9264780 (6) 1257130 (10) 3355354 (10) 7082352 (6) 330819 (34813) 9401433 (54280) 
     dis: 	75170.812 83626.516 83737.969 85033.164 85400.797 86114.352 86360.344 86887.398 87135.258 88166.188 88189.055 88887.016 88918.922 89589.109 89668.844 90405.859 90553.391 90696.086 90953.297 91085.961 91298.156 91454.977 91578.945 92282.008 92442.539 92516.812 92688.000 92756.719 92846.586 93027.102 93192.031 93389.141 93564.945 93740.383 93755.000 93766.797 93809.383 94277.891 94376.031 94478.422 94536.461 95095.461 95185.766 95211.523 95383.633 96033.133 96043.211 96403.219 96408.789 96448.031 96666.266 96964.695 97154.828 97240.164 97266.703 97323.992 97340.938 97505.469 97511.852 97578.977 97668.047 97696.664 97762.789 97796.539 97847.195 98127.445 98141.797 98222.938 98315.453 98464.367 98542.562 98572.344 98666.297 98681.711 98695.797 98737.984 98815.547 98845.383 98860.031 99077.109 99088.422 99095.695 99207.516 99433.852 99435.844 99444.758 99542.641 99588.438 99677.148 99807.047 99871.289 99877.398 99963.688 99979.656 99999.586 100044.078 100047.930 100145.727 100189.570 100221.141 
[ 599.252s ] *** Query time: 78.148
qps: 127.963
 *** ivfpq recall 
ivfpq get 884985 postive res from 1000000 results, recall@100:0.885
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.004 0.051 0.467 0.479 0.000 
finished ivfpq index examples
[ 599.284s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_64 150 128"
	User time (seconds): 596.59
	System time (seconds): 1.27
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 9:59.38
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1645476
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 441732
	Voluntary context switches: 3244
	Involuntary context switches: 464
	Swaps: 0
	File system inputs: 68040
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:43
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_64
nprobe: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.376s ] Loaded metadata, 20000000 attr's found
[ 1.376s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.379s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.382s ] Loaded 10000 sift10M queries
[ 1.389s ] Loaded ground truth, gt_size: 10
[ 1.389s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.862s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 605.325s ] Query results (vector ids, then distances):
query 0 nn's (6, 15386, 98713): 4160485 (64292) 6141318 (6) 4738758 (6) 7077742 (10) 1160663 (39732) 4538400 (6) 9536881 (86399) 2923944 (6) 8191903 (71564) 7293718 (6) 
     dis: 	65808.273 72625.461 74449.000 75033.797 75556.305 75894.031 76589.031 76887.211 76944.016 77124.906 
query 1 nn's (6, 9087, 92417): 8449497 (36517) 285986 (6) 1273419 (43620) 5552416 (10) 1263214 (6) 4907604 (6) 4234271 (81802) 2253711 (96811) 7501440 (6) 9492445 (7547) 
     dis: 	34675.906 43244.461 43367.484 44178.637 45585.180 46325.406 46459.625 46911.375 46928.469 49631.117 
query 2 nn's (6, 3328, 86670): 3900297 (20164) 4588082 (6) 8667807 (56895) 237844 (10) 289025 (48384) 4480383 (83754) 3493381 (7597) 7500565 (14056) 5982237 (2651) 6296252 (10) 
     dis: 	42270.398 46290.277 47426.219 48618.285 49842.273 50090.332 50450.598 50812.055 51005.156 51111.473 
query 3 nn's (6, 14596, 97918): 980813 (94636) 2205832 (10) 1527942 (10) 4147780 (6) 7269483 (65893) 6151275 (98235) 8410503 (46018) 3643741 (56342) 1985932 (6) 2892348 (6) 
     dis: 	4307.617 4390.735 4429.167 4460.316 4677.812 4688.248 4869.371 5288.036 5306.944 5596.319 
query 4 nn's (6, 1537, 84881): 7091990 (6) 6062843 (7875) 3220361 (76212) 1149636 (10) 769923 (38047) 7358946 (6) 7724095 (48290) 3389697 (45953) 2290505 (57696) 1850409 (6361) 
     dis: 	75170.812 83626.516 83737.969 85033.164 85400.797 86114.352 86360.344 86887.398 87135.258 88166.188 
[ 605.325s ] *** Query time: 81.325
qps: 122.963
 *** ivfpq recall 
ivfpq get 86331 postive res from 100000 results, recall@10:0.863
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.016 0.084 0.293 0.451 0.153 
finished ivfpq index examples
[ 605.326s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_64 150 128"
	User time (seconds): 604.10
	System time (seconds): 1.29
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 10:05.43
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1626896
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 437316
	Voluntary context switches: 1
	Involuntary context switches: 390
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:59
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_128
nprobe: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.376s ] Loaded metadata, 20000000 attr's found
[ 1.376s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.380s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.382s ] Loaded 10000 sift10M queries
[ 1.390s ] Loaded ground truth, gt_size: 10
[ 1.390s ] Index Params -- d: 128, N: 10000000
terminate called after throwing an instance of 'faiss::FaissException'
  what():  Error in faiss::FileIOReader::FileIOReader(const char*) at /home/mocheng/code/faiss/faiss/impl/io.cpp:67: Error: 'f' failed: could not open /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_128 for reading: No such file or directory
Command terminated by signal 6
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_128 150 128"
	User time (seconds): 1.28
	System time (seconds): 0.11
	Percent of CPU this job got: 85%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:01.63
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 142248
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 54316
	Voluntary context switches: 5
	Involuntary context switches: 4
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:00
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_128
nprobe: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.466s ] Loaded metadata, 20000000 attr's found
[ 1.466s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.469s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.472s ] Loaded 10000 sift10M queries
[ 1.479s ] Loaded ground truth, gt_size: 10
[ 1.479s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.244s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 651.960s ] Query results (vector ids, then distances):
query 0 nn's (6, 15386, 98713): 4160485 (64292) 6141318 (6) 1160663 (39732) 4738758 (6) 7293718 (6) 6252014 (6) 1020562 (10) 4538400 (6) 7077742 (10) 9397776 (6) 
     dis: 	65428.875 73500.852 74111.375 74348.750 75185.805 75210.148 76496.250 76662.328 76941.883 77219.781 
query 1 nn's (6, 9087, 92417): 8449497 (36517) 5552416 (10) 285986 (6) 4234271 (81802) 2253711 (96811) 4907604 (6) 7501440 (6) 1273419 (43620) 1263214 (6) 9492445 (7547) 
     dis: 	32372.914 43100.453 43521.125 44425.418 44915.461 46293.035 46733.703 47133.055 47658.812 48771.523 
query 2 nn's (6, 3328, 86670): 3900297 (20164) 4588082 (6) 8667807 (56895) 289025 (48384) 237844 (10) 5982237 (2651) 4480383 (83754) 6296252 (10) 3493381 (7597) 2795236 (6) 
     dis: 	42730.250 47684.672 47934.992 48216.973 49548.199 50066.566 50591.164 51004.824 51043.465 51264.723 
query 3 nn's (6, 14596, 97918): 980813 (94636) 2205832 (10) 1527942 (10) 4147780 (6) 6151275 (98235) 8410503 (46018) 7269483 (65893) 3643741 (56342) 1985932 (6) 5124856 (6) 
     dis: 	4284.122 4317.801 4327.126 4456.461 4596.839 4853.428 4911.378 5265.583 5344.228 5481.427 
query 4 nn's (6, 1537, 84881): 7091990 (6) 6062843 (7875) 3389697 (45953) 769923 (38047) 7724095 (48290) 3220361 (76212) 1149636 (10) 39005 (96272) 7358946 (6) 1850409 (6361) 
     dis: 	76867.477 83975.680 84516.359 85538.203 86384.547 86399.797 86403.453 86757.227 86956.969 86992.992 
[ 651.960s ] *** Query time: 122.745
qps: 81.470
 *** ivfpq recall 
ivfpq get 94909 postive res from 100000 results, recall@10:0.949
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.008 0.051 0.373 0.565 
finished ivfpq index examples
[ 651.961s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_2_100000_random_128 150 128"
	User time (seconds): 649.82
	System time (seconds): 2.31
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 10:52.14
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3062692
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 871544
	Voluntary context switches: 1
	Involuntary context switches: 628
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
