Start time: 09:33
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.707s ] Loaded metadata, 10000000 attr's found
[ 0.707s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.710s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.711s ] Loaded 10000 sift10M queries
[ 0.719s ] Loaded ground truth, gt_size: 10
[ 0.719s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.543s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 1096.04
	System time (seconds): 208.50
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 22:29.73
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 272012196
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3372
	Minor (reclaiming a frame) page faults: 68281456
	Voluntary context switches: 27618
	Involuntary context switches: 3511
	Swaps: 0
	File system inputs: 2813232
	File system outputs: 0
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:13
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.712s ] Loaded metadata, 10000000 attr's found
[ 0.712s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.715s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.716s ] Loaded 10000 sift10M queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.724s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.182s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 1354.95
	System time (seconds): 279.58
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 28:08.37
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 354557860
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3629
	Minor (reclaiming a frame) page faults: 88787965
	Voluntary context switches: 28758
	Involuntary context switches: 4746
	Swaps: 0
	File system inputs: 2978176
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:52
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.710s ] Loaded metadata, 10000000 attr's found
[ 0.710s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.713s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.714s ] Loaded 10000 sift10M queries
[ 0.722s ] Loaded ground truth, gt_size: 10
[ 0.722s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.417s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.097
[ 3096.555s ] Query results (vector ids, then distances):
query 0 nn's (25571, 35571): 6984373 (34761) 5579551 (33289) 9925949 (31632) 5520369 (34781) 9534078 (31650) 7237592 (35529) 3435228 (29317) 7895839 (27762) 4698776 (29284) 3409110 (33209) 
     dis: 	76880.000 78568.000 80660.000 82492.000 83197.000 84487.000 86005.000 86379.000 87100.000 87631.000 
query 1 nn's (53460, 63460): 8349375 (53556) 2993914 (56694) 9933148 (62209) 8928604 (55927) 6174201 (62186) 1000577 (53555) 6533284 (53548) 6335574 (62176) 6630533 (53554) 6804146 (59040) 
     dis: 	49997.000 55326.000 57000.000 57196.000 58390.000 59284.000 60780.000 62023.000 62563.000 64130.000 
query 2 nn's (68503, 78503): 4588082 (73917) 7500565 (73913) 271911 (70728) 2953864 (73136) 8635193 (70758) 4283746 (69195) 8801441 (71580) 4913928 (72340) 5727909 (73109) 6238112 (73085) 
     dis: 	47637.000 51634.000 54365.000 57221.000 57831.000 58925.000 59135.000 59326.000 60084.000 61128.000 
query 3 nn's (53786, 63786): 6151275 (59824) 6411621 (57488) 2892348 (61387) 5224964 (61407) 1514080 (61361) 7301436 (58245) 8381210 (57498) 7404448 (62204) 8699860 (59031) 5777538 (62162) 
     dis: 	4602.000 5998.000 6047.000 6378.000 7171.000 7394.000 7506.000 7801.000 7954.000 8322.000 
query 4 nn's (79864, 89864): 9958618 (87984) 5493369 (80149) 6062843 (84085) 5175563 (89494) 64045 (81734) 5314473 (88747) 5126636 (86440) 5001516 (88803) 9167103 (81785) 1162961 (86415) 
     dis: 	80415.000 81626.000 84746.000 88607.000 93643.000 97247.000 98026.000 98435.000 99304.000 99958.000 
[ 3096.555s ] *** Query time: 1116.936
qps: 8.953
 *** HNSW recall 
HNSW get 66428 postive res from 100000 results, recall@10:0.664
recall dist(10% per bucket): 0.001 0.005 0.013 0.042 0.078 0.132 0.182 0.190 0.181 0.121 0.055 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 3096.557s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 2596.89
	System time (seconds): 492.95
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 51:56.25
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 464118688
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 48030
	Minor (reclaiming a frame) page faults: 280095314
	Voluntary context switches: 72519
	Involuntary context switches: 9056
	Swaps: 0
	File system inputs: 3292712
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:02
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.728s ] Loaded ground truth, gt_size: 10
[ 0.728s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.431s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 103.878s ] Query results (vector ids, then distances):
query 0 nn's (41, 41): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (62, 62): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (2, 2): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (39, 39): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (49, 49): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 103.878s ] *** Query time: 13.224
qps: 756.178
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 103.880s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 82.01
	System time (seconds): 13.39
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:44.81
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8348584
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3595368
	Voluntary context switches: 30196
	Involuntary context switches: 199
	Swaps: 0
	File system inputs: 1028296
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:42
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.737s ] Loaded metadata, 10000000 attr's found
[ 0.737s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.741s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.744s ] Loaded 10000 sift10M queries
[ 0.758s ] Loaded ground truth, gt_size: 10
[ 0.758s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.307s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 84.974s ] Query results (vector ids, then distances):
query 0 nn's (94, 94): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (82, 82): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (34, 34): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (58, 58): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (61, 61): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 84.974s ] *** Query time: 6.145
qps: 1627.466
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 84.975s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 79.34
	System time (seconds): 6.12
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:25.48
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8351652
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2102034
	Voluntary context switches: 1
	Involuntary context switches: 285
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 20:22
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.719s ] Loaded metadata, 10000000 attr's found
[ 0.719s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.722s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.723s ] Loaded 10000 sift10M queries
[ 0.729s ] Loaded ground truth, gt_size: 10
[ 0.729s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.559s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 84.844s ] Query results (vector ids, then distances):
query 0 nn's (82, 82): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (52, 52): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (64, 64): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (70, 70): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (125, 125): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 84.844s ] *** Query time: 6.708
qps: 1490.836
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 84.846s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 78.79
	System time (seconds): 6.68
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:25.48
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8349604
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2167124
	Voluntary context switches: 1
	Involuntary context switches: 129
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:00
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.713s ] Loaded metadata, 10000000 attr's found
[ 0.713s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.716s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.718s ] Loaded 10000 sift10M queries
[ 0.725s ] Loaded ground truth, gt_size: 10
[ 0.725s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.292s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 462.755s ] Query results (vector ids, then distances):
query 0 nn's (84109, 85109): 678609 (84821) 7598543 (84863) 3099210 (84813) 8065224 (84850) 9273601 (84836) 2385723 (84873) 2301083 (84843) 3554297 (84825) 7545223 (84852) 6000029 (84856) 
     dis: 	94424.000 96040.000 96054.000 100021.000 105757.000 110320.000 118227.000 122918.000 124549.000 129599.000 
query 1 nn's (59198, 60198): 3003106 (59843) 8603784 (59822) 7174800 (59836) 8132061 (59828) 2145796 (59862) 4727094 (59812) 5024446 (59840) 7562796 (59866) -1 (0) -1 (0) 
     dis: 	77716.000 81034.000 92896.000 98214.000 104098.000 110169.000 114011.000 125804.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (74911, 75911): 2891769 (75442) 6687472 (75426) 1916939 (75457) 9872414 (75466) 6510493 (75448) 6410115 (75441) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	61188.000 64133.000 68748.000 69676.000 90816.000 98829.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (80341, 81341): 1417424 (80951) 7922138 (80898) 9956308 (80931) 8099835 (80940) 1425399 (80968) 6794924 (80919) 3978281 (80993) -1 (0) -1 (0) -1 (0) 
     dis: 	5643.000 10763.000 10764.000 10955.000 12221.000 13667.000 15885.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (84308, 85308): 9540783 (84815) 6040397 (84865) 7016756 (84855) 5157552 (84836) 7869625 (84874) 4664429 (84842) 9985134 (84865) 9559475 (84856) 6066968 (84828) 9487502 (84820) 
     dis: 	101846.000 105188.000 115347.000 115636.000 119904.000 121948.000 125584.000 136845.000 137250.000 138992.000 
[ 462.756s ] *** Query time: 59.436
qps: 168.248
 *** HNSW recall 
HNSW get 30563 postive res from 100000 results, recall@10:0.306
recall dist(10% per bucket): 0.041 0.136 0.218 0.239 0.178 0.109 0.053 0.017 0.006 0.002 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 462.756s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 437.34
	System time (seconds): 27.66
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:45.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 55249828
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 13826530
	Voluntary context switches: 3
	Involuntary context switches: 646
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:09
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.713s ] Loaded metadata, 10000000 attr's found
[ 0.713s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.716s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.718s ] Loaded 10000 sift10M queries
[ 0.725s ] Loaded ground truth, gt_size: 10
[ 0.725s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.211s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.020
[ 659.105s ] Query results (vector ids, then distances):
query 0 nn's (24662, 26662): 4538400 (25471) 2383606 (25422) 8892654 (25464) 51805 (25452) 5762401 (25378) 8404644 (26197) 2094318 (24690) 4981159 (26191) 658466 (25375) 1583762 (26146) 
     dis: 	76603.000 91899.000 92310.000 94694.000 104587.000 106344.000 106718.000 110588.000 111131.000 115693.000 
query 1 nn's (9555, 11555): 4234271 (10566) 1273419 (11359) 9781041 (10548) 5226515 (10521) 2342995 (9818) 4737569 (11339) 525732 (11334) 3070287 (11350) 4759010 (9769) 8602537 (9764) 
     dis: 	44439.000 46522.000 57738.000 62693.000 64554.000 67830.000 67893.000 70481.000 72048.000 72855.000 
query 2 nn's (13791, 15791): 5499961 (15240) 1329974 (14440) 4647083 (14438) 5041695 (15209) 1404199 (14450) 1430998 (14456) 1310519 (15247) 5263351 (15295) 9350864 (15258) 6444993 (14514) 
     dis: 	54632.000 55134.000 60225.000 62487.000 63773.000 66086.000 70074.000 71795.000 72538.000 73423.000 
query 3 nn's (40920, 42920): 3421136 (41115) 3041965 (42645) 1911911 (42656) 2218358 (41867) 4983026 (42649) 6045699 (41057) 4372662 (40994) 8310980 (42689) 5736307 (41072) 4328694 (41056) 
     dis: 	5596.000 6095.000 6655.000 6693.000 8247.000 8590.000 9063.000 12198.000 15774.000 17288.000 
query 4 nn's (32697, 34697): 10655 (33194) 9413713 (33215) 2567123 (33271) 6273725 (34016) 1931926 (34041) 709902 (34079) 8229057 (33178) 8962459 (34000) 2657469 (33255) 1572271 (33224) 
     dis: 	102326.000 108185.000 113043.000 113235.000 114304.000 114476.000 115254.000 115292.000 116032.000 118842.000 
[ 659.105s ] *** Query time: 132.307
qps: 75.582
 *** HNSW recall 
HNSW get 41836 postive res from 100000 results, recall@10:0.418
recall dist(10% per bucket): 0.012 0.051 0.119 0.182 0.214 0.184 0.132 0.070 0.028 0.006 0.001 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 659.106s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 615.35
	System time (seconds): 48.10
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 11:03.48
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 102801320
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 25714751
	Voluntary context switches: 6
	Involuntary context switches: 869
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:22
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.727s ] Loaded metadata, 10000000 attr's found
[ 0.727s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.729s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.731s ] Loaded 10000 sift10M queries
[ 0.738s ] Loaded ground truth, gt_size: 10
[ 0.738s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.216s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.030
[ 839.608s ] Query results (vector ids, then distances):
query 0 nn's (57774, 60774): 6346833 (59051) 6012029 (59086) 430484 (59896) 6623255 (59040) 1392393 (59089) 6819332 (59041) 8692728 (59020) 6907892 (59810) 4364675 (59833) 9964582 (59074) 
     dis: 	76136.000 90224.000 93806.000 95242.000 95885.000 96671.000 96880.000 99098.000 99431.000 100207.000 
query 1 nn's (61786, 64786): 7692715 (63767) 9933148 (62209) 6174201 (62186) 6335574 (62176) 2048408 (64488) 727506 (62216) 2070607 (62230) 2281854 (64513) 8946804 (62142) 9843674 (64554) 
     dis: 	56490.000 57000.000 58390.000 62023.000 66445.000 66893.000 71823.000 73105.000 77739.000 77872.000 
query 2 nn's (21541, 24541): 141025 (23140) 2407252 (23854) 3923684 (23842) 5054841 (23031) 2668148 (23852) 3483394 (22283) 6247603 (23076) 884050 (23086) 3810709 (23858) 1125740 (23841) 
     dis: 	57318.000 59815.000 60631.000 61717.000 62059.000 62475.000 62491.000 63108.000 65195.000 68901.000 
query 3 nn's (4183, 7183): 1739894 (5102) 290433 (5889) 8556892 (4309) 7745448 (5849) 7608410 (6663) 4463664 (5904) 7018328 (5842) 5083070 (6684) 9148667 (5081) -1 (0) 
     dis: 	6845.000 7438.000 9235.000 9980.000 10793.000 11014.000 12973.000 18731.000 31178.000 340282346638528859811704183484516925440.000 
query 4 nn's (68869, 71869): 3671814 (69216) 308167 (71554) 6082633 (70765) 6516336 (70783) 2178664 (70752) 6501198 (69991) 668653 (70783) 2417131 (71555) 5035727 (69964) 8603037 (69195) 
     dis: 	98423.000 100320.000 103574.000 104476.000 107591.000 108688.000 108904.000 112357.000 113600.000 115781.000 
[ 839.608s ] *** Query time: 207.227
qps: 48.256
 *** HNSW recall 
HNSW get 48718 postive res from 100000 results, recall@10:0.487
recall dist(10% per bucket): 0.004 0.027 0.071 0.137 0.187 0.203 0.180 0.111 0.058 0.019 0.004 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 839.608s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 778.81
	System time (seconds): 66.82
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 14:05.67
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 147697572
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 36939451
	Voluntary context switches: 2
	Involuntary context switches: 1501
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:37
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.710s ] Loaded metadata, 10000000 attr's found
[ 0.710s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.713s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.714s ] Loaded 10000 sift10M queries
[ 0.722s ] Loaded ground truth, gt_size: 10
[ 0.722s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.126s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.040
[ 1386.105s ] Query results (vector ids, then distances):
query 0 nn's (40805, 44805): 7077742 (42666) 6552863 (43448) 888010 (41841) 6616517 (41060) 5547530 (41856) 6211936 (43373) 5578568 (41802) 7254875 (43460) 4324116 (41116) 5908594 (41060) 
     dis: 	76934.000 80001.000 80692.000 87784.000 94298.000 98915.000 99523.000 103825.000 104406.000 104535.000 
query 1 nn's (39530, 43530): 9958454 (41038) 2235415 (41809) 1015812 (41048) 9868698 (40309) 5796685 (40324) 8263593 (41769) 1865046 (42645) 2668464 (41049) 4646465 (41869) 2138730 (43405) 
     dis: 	51055.000 62601.000 64480.000 66830.000 68091.000 69581.000 73209.000 73733.000 74141.000 74253.000 
query 2 nn's (50847, 54847): 8667807 (51982) 7654217 (54363) 2413882 (51230) 419195 (54334) 8699826 (53572) 3765226 (51211) 6839423 (54294) 6841437 (52007) 9317043 (51971) 9198676 (51239) 
     dis: 	47988.000 53106.000 55630.000 55957.000 60118.000 61657.000 62059.000 64138.000 65081.000 65132.000 
query 3 nn's (33809, 37809): 4083199 (34822) 8174765 (34010) 8419826 (36357) 6148687 (35583) 7914184 (37145) 7865854 (37129) 7791363 (36336) 8323731 (37139) 240857 (34767) 4540202 (37124) 
     dis: 	3910.000 5180.000 6096.000 6437.000 6624.000 8579.000 9150.000 9177.000 10000.000 10060.000 
query 4 nn's (25226, 29226): 7778880 (27757) 6203168 (28560) 4830381 (26202) 9570381 (25431) 5729760 (25444) 9369780 (26979) 2540588 (27775) 6090647 (27002) 8564636 (26984) 9313816 (28548) 
     dis: 	87157.000 89955.000 91259.000 92925.000 95543.000 101519.000 105256.000 106499.000 106739.000 107311.000 
[ 1386.106s ] *** Query time: 376.689
qps: 26.547
 *** HNSW recall 
HNSW get 52894 postive res from 100000 results, recall@10:0.529
recall dist(10% per bucket): 0.003 0.016 0.050 0.105 0.163 0.206 0.192 0.142 0.086 0.030 0.007 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 1386.128s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 1139.80
	System time (seconds): 235.26
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 23:19.87
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 207389604
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 50137
	Minor (reclaiming a frame) page faults: 99297711
	Voluntary context switches: 54242
	Involuntary context switches: 6377
	Swaps: 0
	File system inputs: 1519120
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:06
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_5000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_5000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.711s ] Loaded metadata, 10000000 attr's found
[ 0.711s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.714s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.716s ] Loaded 10000 sift10M queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.723s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.285s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.049
[ 1559.691s ] Query results (vector ids, then distances):
query 0 nn's (0, 3809): 1167995 (1952) 6648721 (2725) 9906463 (2750) 9584266 (1974) 7063460 (3524) 7105311 (1155) 2702664 (415) 4621260 (1161) 993990 (2792) 8173378 (3471) 
     dis: 	72023.000 84842.000 85842.000 87824.000 88629.000 89225.000 89539.000 93022.000 93113.000 93273.000 
query 1 nn's (22363, 27363): 2253711 (24672) 3221056 (24642) 7331745 (26262) 1784776 (26934) 6457655 (23024) 1503119 (23913) 5349437 (24597) 6383821 (23061) 8346283 (23872) 4505704 (26187) 
     dis: 	45140.000 49695.000 54968.000 57917.000 58061.000 59550.000 64817.000 64958.000 65936.000 73247.000 
query 2 nn's (27932, 32932): 4259715 (28506) 4418406 (32491) 1795636 (32445) 2036301 (29296) 1436032 (28514) 7684850 (31670) 5777679 (30888) 7753511 (30119) 7817828 (30075) 1359421 (28494) 
     dis: 	57942.000 58485.000 60175.000 60983.000 66746.000 67545.000 68436.000 68737.000 69282.000 69369.000 
query 3 nn's (22362, 27362): 5124856 (24615) 9313337 (23841) 7749958 (23011) 8778387 (25422) 8796008 (24678) 5435440 (23083) 9064432 (26970) 8802756 (23108) 8757287 (24628) 2620195 (26957) 
     dis: 	5492.000 7693.000 8122.000 10140.000 10624.000 10853.000 10925.000 11443.000 12579.000 14522.000 
query 4 nn's (18064, 23064): 6578584 (18363) 39005 (20693) 5709057 (18391) 2721988 (21467) 3728769 (19158) 2002058 (21461) 523577 (20749) 9770946 (20736) 9839729 (20719) 5752704 (19893) 
     dis: 	82172.000 87925.000 89153.000 97226.000 98150.000 100847.000 102119.000 102971.000 103529.000 104650.000 
[ 1559.691s ] *** Query time: 483.973
qps: 20.662
 *** HNSW recall 
HNSW get 56596 postive res from 100000 results, recall@10:0.566
recall dist(10% per bucket): 0.002 0.013 0.039 0.080 0.142 0.185 0.190 0.177 0.109 0.050 0.013 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 1559.708s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_5000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_5000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 1284.42
	System time (seconds): 239.43
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 26:12.91
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 244740004
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 169471
	Minor (reclaiming a frame) page faults: 131953465
	Voluntary context switches: 205768
	Involuntary context switches: 4844
	Swaps: 0
	File system inputs: 7467520
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:37
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_6000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_6000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.709s ] Loaded metadata, 10000000 attr's found
[ 0.709s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.713s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.714s ] Loaded 10000 sift10M queries
[ 0.721s ] Loaded ground truth, gt_size: 10
[ 0.721s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.178s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_6000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_6000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 662.50
	System time (seconds): 94.31
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 12:48.91
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 195003268
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 160
	Minor (reclaiming a frame) page faults: 48767629
	Voluntary context switches: 24116
	Involuntary context switches: 1311
	Swaps: 0
	File system inputs: 1770672
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:23
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_7000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_7000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.713s ] Loaded metadata, 10000000 attr's found
[ 0.713s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.716s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.718s ] Loaded 10000 sift10M queries
[ 0.725s ] Loaded ground truth, gt_size: 10
[ 0.725s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.994s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_7000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_7000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 666.62
	System time (seconds): 104.30
	Percent of CPU this job got: 83%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 15:18.54
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 194993748
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 11790
	Minor (reclaiming a frame) page faults: 48811546
	Voluntary context switches: 37635
	Involuntary context switches: 1586
	Swaps: 0
	File system inputs: 2883112
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
