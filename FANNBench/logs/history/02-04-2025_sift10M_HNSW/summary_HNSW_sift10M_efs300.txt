Start time: 09:33
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.706s ] Loaded metadata, 10000000 attr's found
[ 0.706s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.709s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.710s ] Loaded 10000 sift10M queries
[ 0.718s ] Loaded ground truth, gt_size: 10
[ 0.718s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.517s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.078
[ 2972.918s ] Query results (vector ids, then distances):
query 0 nn's (58152, 66152): 6141318 (63712) 6346833 (59051) 796249 (62995) 1174332 (62191) 1835932 (62918) 6777756 (59806) 9251169 (62957) 1665852 (61395) 906203 (62879) 2250118 (66113) 
     dis: 	73183.000 76136.000 79534.000 79542.000 80072.000 80573.000 81847.000 83197.000 83214.000 83391.000 
query 1 nn's (63205, 71205): 5552416 (65287) 1263214 (70019) 3309105 (69952) 8675999 (69203) 7692715 (63767) 695127 (66126) 9758866 (69195) 482087 (68446) 7859261 (66851) 5790422 (69984) 
     dis: 	42944.000 47608.000 51760.000 56407.000 56490.000 62405.000 62938.000 63173.000 63431.000 63807.000 
query 2 nn's (0, 7555): 6296252 (4337) 9410320 (416) 5988705 (7412) 2601636 (7451) 8565013 (2744) 8042944 (5823) 4555038 (1934) 9330360 (6632) 944526 (6633) 6290196 (5878) 
     dis: 	51071.000 52939.000 53001.000 53913.000 54061.000 55019.000 55225.000 56319.000 57351.000 57466.000 
query 3 nn's (93469, 99999): 2965607 (98158) 1218934 (95023) 3633444 (98092) 192312 (98927) 879082 (95823) 3607435 (97326) 9166 (98142) 840086 (98127) 4995291 (95825) 1229577 (94212) 
     dis: 	5013.000 5468.000 7509.000 7673.000 7688.000 8714.000 8830.000 9013.000 9382.000 9736.000 
query 4 nn's (68193, 76193): 3477074 (75420) 6388463 (68406) 1743659 (75509) 2732612 (69235) 4380344 (69964) 567070 (74698) 3495449 (73880) 8478796 (72385) 4962535 (73941) 4422483 (74649) 
     dis: 	80355.000 86061.000 89054.000 90596.000 90617.000 91047.000 91051.000 93054.000 93259.000 94638.000 
[ 2972.918s ] *** Query time: 997.097
qps: 10.029
 *** HNSW recall 
HNSW get 99357 postive res from 100000 results, recall@10:0.994
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.005 0.051 0.943 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 2972.919s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 2355.81
	System time (seconds): 548.42
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 49:58.84
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 402674600
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 149352
	Minor (reclaiming a frame) page faults: 238452876
	Voluntary context switches: 173824
	Involuntary context switches: 14472
	Swaps: 0
	File system inputs: 5689344
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:13
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.711s ] Loaded metadata, 10000000 attr's found
[ 0.711s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.714s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.715s ] Loaded 10000 sift10M queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.723s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.156s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 1305.21
	System time (seconds): 233.50
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 26:00.75
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 343595944
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2414
	Minor (reclaiming a frame) page faults: 86124622
	Voluntary context switches: 24474
	Involuntary context switches: 3852
	Swaps: 0
	File system inputs: 1771016
	File system outputs: 0
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:52
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.709s ] Loaded metadata, 10000000 attr's found
[ 0.709s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.712s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.714s ] Loaded 10000 sift10M queries
[ 0.721s ] Loaded ground truth, gt_size: 10
[ 0.721s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.439s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 699.99
	System time (seconds): 105.88
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 13:39.74
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 199496612
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 380
	Minor (reclaiming a frame) page faults: 49912449
	Voluntary context switches: 23609
	Involuntary context switches: 1636
	Swaps: 0
	File system inputs: 1203952
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:02
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.762s ] Loaded metadata, 10000000 attr's found
[ 0.763s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.765s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.767s ] Loaded 10000 sift10M queries
[ 0.773s ] Loaded ground truth, gt_size: 10
[ 0.773s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.442s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 127.566s ] Query results (vector ids, then distances):
query 0 nn's (41, 41): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (62, 62): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (2, 2): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (39, 39): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (49, 49): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 127.566s ] *** Query time: 38.398
qps: 260.430
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 127.568s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 103.44
	System time (seconds): 15.97
	Percent of CPU this job got: 92%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:08.59
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8350632
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4165341
	Voluntary context switches: 29476
	Involuntary context switches: 192
	Swaps: 0
	File system inputs: 2772704
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:42
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.731s ] Loaded metadata, 10000000 attr's found
[ 0.731s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.735s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.738s ] Loaded 10000 sift10M queries
[ 0.753s ] Loaded ground truth, gt_size: 10
[ 0.753s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.227s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 105.834s ] Query results (vector ids, then distances):
query 0 nn's (94, 94): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (82, 82): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (34, 34): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (58, 58): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (61, 61): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 105.834s ] *** Query time: 27.245
qps: 367.042
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 105.834s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 100.23
	System time (seconds): 6.05
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:46.30
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8350280
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2102029
	Voluntary context switches: 1
	Involuntary context switches: 167
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 20:22
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.728s ] Loaded ground truth, gt_size: 10
[ 0.728s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.509s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 105.683s ] Query results (vector ids, then distances):
query 0 nn's (82, 82): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (52, 52): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (64, 64): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (70, 70): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (125, 125): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 105.683s ] *** Query time: 27.101
qps: 368.994
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 105.684s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 99.71
	System time (seconds): 6.38
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:46.10
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8352676
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2102032
	Voluntary context switches: 2
	Involuntary context switches: 135
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:00
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.710s ] Loaded metadata, 10000000 attr's found
[ 0.710s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.714s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.715s ] Loaded 10000 sift10M queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.723s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.289s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 484.033s ] Query results (vector ids, then distances):
query 0 nn's (84109, 85109): 4874283 (84803) 4845093 (84823) 4056305 (84863) 678609 (84821) 7099159 (84876) 8635455 (84809) 7598543 (84863) 3099210 (84813) 3281483 (84850) 9325178 (84850) 
     dis: 	82000.000 84769.000 93108.000 94424.000 94608.000 95604.000 96040.000 96054.000 96120.000 96819.000 
query 1 nn's (59198, 60198): 8918460 (59829) 4231552 (59832) 3003106 (59843) 1316561 (59784) 8603784 (59822) 3135058 (59830) 1742288 (59861) 2316920 (59826) 489923 (59781) 8548415 (59830) 
     dis: 	58837.000 71516.000 77716.000 80503.000 81034.000 81367.000 81929.000 84332.000 85560.000 88841.000 
query 2 nn's (74911, 75911): 2891769 (75442) 6687472 (75426) 791490 (75432) 2064854 (75433) 1916939 (75457) 450541 (75443) 9872414 (75466) 2951975 (75444) 5312808 (75460) 1843919 (75483) 
     dis: 	61188.000 64133.000 67557.000 67741.000 68748.000 68784.000 69676.000 72046.000 73499.000 75232.000 
query 3 nn's (80341, 81341): 1417424 (80951) 7922138 (80898) 9956308 (80931) 8099835 (80940) 1425399 (80968) 7854364 (80967) 6794924 (80919) 9418372 (81018) 8081932 (80927) 3978281 (80993) 
     dis: 	5643.000 10763.000 10764.000 10955.000 12221.000 13490.000 13667.000 13916.000 14399.000 15885.000 
query 4 nn's (84308, 85308): 3219064 (84832) 3408620 (84868) 9540783 (84815) 9529799 (84820) 4963666 (84860) 6040397 (84865) 5357663 (84840) 4615492 (84850) 6307277 (84842) 4768682 (84826) 
     dis: 	100084.000 101746.000 101846.000 102209.000 102523.000 105188.000 107531.000 110251.000 111072.000 114006.000 
[ 484.033s ] *** Query time: 80.385
qps: 124.402
 *** HNSW recall 
HNSW get 91863 postive res from 100000 results, recall@10:0.919
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.003 0.015 0.050 0.138 0.303 0.489 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 484.034s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 458.54
	System time (seconds): 27.67
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:06.22
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 55248804
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 13826532
	Voluntary context switches: 1
	Involuntary context switches: 645
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:09
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.712s ] Loaded metadata, 10000000 attr's found
[ 0.712s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.715s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.717s ] Loaded 10000 sift10M queries
[ 0.724s ] Loaded ground truth, gt_size: 10
[ 0.724s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.195s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.020
[ 665.213s ] Query results (vector ids, then distances):
query 0 nn's (24662, 26662): 4538400 (25471) 7164607 (26189) 5770330 (26213) 2549151 (26210) 3255720 (26162) 5831094 (24688) 463666 (26219) 2734582 (25445) 211479 (25389) 2383606 (25422) 
     dis: 	76603.000 80358.000 81243.000 81827.000 82432.000 83049.000 83787.000 90734.000 91317.000 91899.000 
query 1 nn's (9555, 11555): 4234271 (10566) 1273419 (11359) 9781041 (10548) 5226515 (10521) 2342995 (9818) 4737569 (11339) 525732 (11334) 2555990 (9765) 7022759 (10578) 5747503 (10575) 
     dis: 	44439.000 46522.000 57738.000 62693.000 64554.000 67830.000 67893.000 68304.000 69267.000 70220.000 
query 2 nn's (13791, 15791): 5499961 (15240) 1329974 (14440) 4647083 (14438) 9101126 (15210) 4926809 (14457) 9375728 (14422) 5041695 (15209) 1404199 (14450) 3272220 (14428) 9496287 (14424) 
     dis: 	54632.000 55134.000 60225.000 60880.000 61155.000 61926.000 62487.000 63773.000 64997.000 65166.000 
query 3 nn's (40920, 42920): 3421136 (41115) 3041965 (42645) 1911911 (42656) 2218358 (41867) 4983026 (42649) 6045699 (41057) 4372662 (40994) 6306155 (41075) 940098 (41032) 4856979 (42574) 
     dis: 	5596.000 6095.000 6655.000 6693.000 8247.000 8590.000 9063.000 9888.000 10110.000 10532.000 
query 4 nn's (32697, 34697): 7302816 (33974) 10655 (33194) 7940118 (34029) 6152391 (33990) 9394278 (33237) 1676134 (33264) 5257360 (34011) 2975078 (33209) 9413713 (33215) 9790269 (34051) 
     dis: 	98200.000 102326.000 103265.000 103353.000 104644.000 105810.000 106365.000 107909.000 108185.000 109330.000 
[ 665.213s ] *** Query time: 146.979
qps: 68.037
 *** HNSW recall 
HNSW get 96785 postive res from 100000 results, recall@10:0.968
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.009 0.045 0.193 0.750 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 665.214s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 622.10
	System time (seconds): 46.88
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 11:09.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 102802344
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 25714702
	Voluntary context switches: 2
	Involuntary context switches: 938
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:22
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.711s ] Loaded metadata, 10000000 attr's found
[ 0.711s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.714s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.716s ] Loaded 10000 sift10M queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.723s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.216s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.030
[ 881.455s ] Query results (vector ids, then distances):
query 0 nn's (57774, 60774): 6346833 (59051) 6777756 (59806) 1415164 (58274) 4624202 (60640) 1069599 (59846) 7868374 (59043) 6012029 (59086) 2814763 (58247) 8471034 (60619) 8354051 (59855) 
     dis: 	76136.000 80573.000 87361.000 87536.000 89308.000 89923.000 90224.000 90333.000 90576.000 91427.000 
query 1 nn's (61786, 64786): 7692715 (63767) 9933148 (62209) 6174201 (62186) 6335574 (62176) 6672132 (63709) 2048408 (64488) 727506 (62216) 1201467 (64472) 454002 (63717) 9346715 (62181) 
     dis: 	56490.000 57000.000 58390.000 62023.000 63864.000 66445.000 66893.000 69200.000 69816.000 69882.000 
query 2 nn's (21541, 24541): 141025 (23140) 2407252 (23854) 3923684 (23842) 5054841 (23031) 2668148 (23852) 3483394 (22283) 6247603 (23076) 2871507 (23061) 884050 (23086) 7154141 (23071) 
     dis: 	57318.000 59815.000 60631.000 61717.000 62059.000 62475.000 62491.000 62667.000 63108.000 63729.000 
query 3 nn's (4183, 7183): 1739894 (5102) 290433 (5889) 8556892 (4309) 7745448 (5849) 8388591 (5110) 7608410 (6663) 9833335 (4257) 4463664 (5904) 3397197 (4278) 9195266 (6643) 
     dis: 	6845.000 7438.000 9235.000 9980.000 10479.000 10793.000 10990.000 11014.000 11199.000 11406.000 
query 4 nn's (68869, 71869): 2732612 (69235) 4380344 (69964) 8756074 (69191) 3671814 (69216) 8718571 (70752) 7476351 (70787) 4436465 (71555) 1683332 (70754) 308167 (71554) 9413765 (70002) 
     dis: 	90596.000 90617.000 95830.000 98423.000 98595.000 98713.000 99231.000 99366.000 100320.000 100779.000 
[ 881.455s ] *** Query time: 246.729
qps: 40.530
 *** HNSW recall 
HNSW get 97990 postive res from 100000 results, recall@10:0.980
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.004 0.025 0.137 0.834 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 881.456s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 820.60
	System time (seconds): 68.21
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 14:48.83
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 147701668
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 36939442
	Voluntary context switches: 1
	Involuntary context switches: 1068
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:37
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.709s ] Loaded metadata, 10000000 attr's found
[ 0.709s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.712s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.713s ] Loaded 10000 sift10M queries
[ 0.721s ] Loaded ground truth, gt_size: 10
[ 0.721s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.124s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.040
[ 1548.085s ] Query results (vector ids, then distances):
query 0 nn's (40805, 44805): 7077742 (42666) 6552863 (43448) 888010 (41841) 8428377 (42602) 6002319 (43398) 6253443 (44181) 902148 (44165) 6616517 (41060) 1432946 (42584) 2312218 (43413) 
     dis: 	76934.000 80001.000 80692.000 83232.000 83988.000 87318.000 87357.000 87784.000 88466.000 89990.000 
query 1 nn's (39530, 43530): 9958454 (41038) 6087695 (41824) 8457342 (41029) 2235415 (41809) 1015812 (41048) 9868698 (40309) 6491365 (42574) 3435206 (42617) 5796685 (40324) 4060272 (43413) 
     dis: 	51055.000 60873.000 62505.000 62601.000 64480.000 66830.000 67509.000 67918.000 68091.000 69541.000 
query 2 nn's (50847, 54847): 8667807 (51982) 7654217 (54363) 8863268 (54351) 2413882 (51230) 4450077 (52015) 419195 (54334) 5488746 (54314) 8699826 (53572) 2016764 (52017) 5684221 (51991) 
     dis: 	47988.000 53106.000 53225.000 55630.000 55719.000 55957.000 60058.000 60118.000 60789.000 61535.000 
query 3 nn's (33809, 37809): 4083199 (34822) 8174765 (34010) 8419826 (36357) 6148687 (35583) 7914184 (37145) 7865854 (37129) 7791363 (36336) 8323731 (37139) 6676311 (35598) 240857 (34767) 
     dis: 	3910.000 5180.000 6096.000 6437.000 6624.000 8579.000 9150.000 9177.000 9835.000 10000.000 
query 4 nn's (25226, 29226): 7778880 (27757) 9001755 (26934) 6203168 (28560) 4830381 (26202) 9570381 (25431) 5729760 (25444) 272409 (28564) 7493856 (26220) 2454280 (25412) 718421 (27012) 
     dis: 	87157.000 87905.000 89955.000 91259.000 92925.000 95543.000 96104.000 96986.000 97065.000 98664.000 
[ 1548.085s ] *** Query time: 550.709
qps: 18.158
 *** HNSW recall 
HNSW get 98664 postive res from 100000 results, recall@10:0.987
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.014 0.098 0.886 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 1548.107s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 1215.21
	System time (seconds): 318.69
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 25:59.69
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 207418280
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 63955
	Minor (reclaiming a frame) page faults: 134169146
	Voluntary context switches: 68453
	Involuntary context switches: 7615
	Swaps: 0
	File system inputs: 1400840
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:06
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_5000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_5000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.709s ] Loaded metadata, 10000000 attr's found
[ 0.709s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.713s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.714s ] Loaded 10000 sift10M queries
[ 0.721s ] Loaded ground truth, gt_size: 10
[ 0.721s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.302s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_5000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_5000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 788.26
	System time (seconds): 118.49
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 15:24.54
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 214990380
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 568
	Minor (reclaiming a frame) page faults: 53789602
	Voluntary context switches: 25255
	Involuntary context switches: 1794
	Swaps: 0
	File system inputs: 2736912
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:37
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_6000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_6000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.707s ] Loaded metadata, 10000000 attr's found
[ 0.707s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.710s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.711s ] Loaded 10000 sift10M queries
[ 0.719s ] Loaded ground truth, gt_size: 10
[ 0.719s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.159s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.059
[ 1898.382s ] Query results (vector ids, then distances):
query 0 nn's (0, 4911): 3381228 (1236) 1167995 (1952) 3064125 (4275) 419470 (2709) 4897568 (1922) 4072432 (3470) 6648721 (2725) 8039506 (4260) 839586 (2771) 9906463 (2750) 
     dis: 	70830.000 72023.000 82021.000 82431.000 83581.000 84223.000 84842.000 85538.000 85800.000 85842.000 
query 1 nn's (10668, 16668): 1273419 (11359) 1233453 (14431) 469965 (12169) 2473259 (13687) 2807070 (12104) 2234566 (15227) 8401639 (15296) 4009753 (14494) 6971668 (12908) 8743749 (14502) 
     dis: 	46522.000 48662.000 50753.000 58119.000 61019.000 62094.000 62462.000 62791.000 62855.000 65073.000 
query 2 nn's (93354, 99354): 3493381 (96585) 1198061 (97380) 5035777 (94257) 9790465 (96607) 6363894 (95758) 4495608 (98902) 1878319 (95831) 2412946 (93421) 247874 (98923) 1992904 (97316) 
     dis: 	51043.000 54288.000 55983.000 56197.000 56312.000 57423.000 58055.000 58237.000 58734.000 59330.000 
query 3 nn's (37606, 43606): 3421136 (41115) 3041965 (42645) 1911911 (42656) 2218358 (41867) 3061225 (40287) 5716081 (38751) 4983026 (42649) 6045699 (41057) 1133113 (40212) 4372662 (40994) 
     dis: 	5596.000 6095.000 6655.000 6693.000 6784.000 7160.000 8247.000 8590.000 8946.000 9063.000 
query 4 nn's (16397, 22397): 6578584 (18363) 3389697 (19174) 39005 (20693) 5709057 (18391) 4150166 (16808) 303093 (19155) 5036980 (19906) 2721988 (21467) 6217116 (21469) 1641746 (20738) 
     dis: 	82172.000 84350.000 87925.000 89153.000 92008.000 93920.000 94937.000 97226.000 97672.000 97693.000 
[ 1898.383s ] *** Query time: 721.120
qps: 13.867
 *** HNSW recall 
HNSW get 99121 postive res from 100000 results, recall@10:0.991
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.006 0.071 0.922 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 159328061, average: 15932.806
finished ivfpq index examples
[ 1898.384s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_6000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_6000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 1542.08
	System time (seconds): 363.05
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 32:03.45
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 288722852
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 14097
	Minor (reclaiming a frame) page faults: 190559059
	Voluntary context switches: 38868
	Involuntary context switches: 4277
	Swaps: 0
	File system inputs: 2217464
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:23
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_7000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_7000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 300
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.717s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.718s ] Loaded 10000 sift10M queries
[ 0.726s ] Loaded ground truth, gt_size: 10
[ 0.726s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.993s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_7000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_7000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 300 128"
	User time (seconds): 1068.94
	System time (seconds): 283.57
	Percent of CPU this job got: 87%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 25:46.79
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 300870564
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 13645
	Minor (reclaiming a frame) page faults: 75471275
	Voluntary context switches: 42802
	Involuntary context switches: 5477
	Swaps: 0
	File system inputs: 4218224
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
