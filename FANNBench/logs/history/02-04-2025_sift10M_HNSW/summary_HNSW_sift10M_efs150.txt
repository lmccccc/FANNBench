Start time: 09:33
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.705s ] Loaded metadata, 10000000 attr's found
[ 0.705s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.708s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.709s ] Loaded 10000 sift10M queries
[ 0.716s ] Loaded ground truth, gt_size: 10
[ 0.716s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.532s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.078
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 1680.51
	System time (seconds): 383.05
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 35:36.75
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 402613160
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 55551
	Minor (reclaiming a frame) page faults: 126322604
	Voluntary context switches: 80356
	Involuntary context switches: 8439
	Swaps: 0
	File system inputs: 4534840
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:13
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.710s ] Loaded metadata, 10000000 attr's found
[ 0.710s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.713s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.715s ] Loaded 10000 sift10M queries
[ 0.722s ] Loaded ground truth, gt_size: 10
[ 0.722s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.156s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 887.36
	System time (seconds): 161.55
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 17:49.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 229368740
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2250
	Minor (reclaiming a frame) page faults: 57545621
	Voluntary context switches: 26136
	Involuntary context switches: 2252
	Swaps: 0
	File system inputs: 1595456
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:52
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.709s ] Loaded metadata, 10000000 attr's found
[ 0.709s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.712s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.714s ] Loaded 10000 sift10M queries
[ 0.721s ] Loaded ground truth, gt_size: 10
[ 0.721s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.417s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.097
[ 3153.564s ] Query results (vector ids, then distances):
query 0 nn's (25571, 35571): 6984373 (34761) 5579551 (33289) 7164607 (26189) 9925949 (31632) 2549151 (26210) 3255720 (26162) 5520369 (34781) 1642205 (34792) 9534078 (31650) 7237592 (35529) 
     dis: 	76880.000 78568.000 80358.000 80660.000 81827.000 82432.000 82492.000 82832.000 83197.000 84487.000 
query 1 nn's (53460, 63460): 8349375 (53556) 2993914 (56694) 5531491 (55132) 9933148 (62209) 8928604 (55927) 6174201 (62186) 8918460 (59829) 8152291 (59050) 4689763 (58254) 1000577 (53555) 
     dis: 	49997.000 55326.000 56591.000 57000.000 57196.000 58390.000 58837.000 58925.000 59030.000 59284.000 
query 2 nn's (68503, 78503): 9710602 (77831) 4588082 (73917) 7500565 (73913) 8510786 (76249) 271911 (70728) 1229611 (77015) 1080573 (70772) 8198272 (73115) 1860330 (69215) 2953864 (73136) 
     dis: 	40495.000 47637.000 51634.000 52273.000 54365.000 54404.000 56182.000 56416.000 56884.000 57221.000 
query 3 nn's (53786, 63786): 6151275 (59824) 6411621 (57488) 2892348 (61387) 5224964 (61407) 6760157 (58301) 1514080 (61361) 7301436 (58245) 8381210 (57498) 7404448 (62204) 8699860 (59031) 
     dis: 	4602.000 5998.000 6047.000 6378.000 7029.000 7171.000 7394.000 7506.000 7801.000 7954.000 
query 4 nn's (79864, 89864): 9958618 (87984) 5493369 (80149) 6062843 (84085) 5175563 (89494) 1967098 (85657) 2173144 (81740) 8713517 (87979) 1082443 (80179) 4719865 (87951) 4158427 (88767) 
     dis: 	80415.000 81626.000 84746.000 88607.000 89742.000 89811.000 91007.000 91730.000 91846.000 93603.000 
[ 3153.564s ] *** Query time: 1163.582
qps: 8.594
 *** HNSW recall 
HNSW get 97666 postive res from 100000 results, recall@10:0.977
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.005 0.031 0.148 0.814 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 3153.576s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 2648.63
	System time (seconds): 504.32
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 52:57.66
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 464181156
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 49148
	Minor (reclaiming a frame) page faults: 262963177
	Voluntary context switches: 73425
	Involuntary context switches: 10801
	Swaps: 0
	File system inputs: 2924240
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:02
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.718s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.719s ] Loaded 10000 sift10M queries
[ 0.725s ] Loaded ground truth, gt_size: 10
[ 0.725s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.428s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 104.829s ] Query results (vector ids, then distances):
query 0 nn's (41, 41): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (62, 62): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (2, 2): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (39, 39): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (49, 49): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 104.829s ] *** Query time: 16.152
qps: 619.106
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 104.830s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 89.05
	System time (seconds): 7.05
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:45.38
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8350632
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 2102035
	Voluntary context switches: 28399
	Involuntary context switches: 136
	Swaps: 0
	File system inputs: 1402024
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:42
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.732s ] Loaded metadata, 10000000 attr's found
[ 0.732s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.736s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.740s ] Loaded 10000 sift10M queries
[ 0.755s ] Loaded ground truth, gt_size: 10
[ 0.755s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.223s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 95.272s ] Query results (vector ids, then distances):
query 0 nn's (94, 94): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (82, 82): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (34, 34): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (58, 58): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (61, 61): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 95.272s ] *** Query time: 16.730
qps: 597.717
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 95.273s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 89.69
	System time (seconds): 6.06
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:35.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8351652
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2102030
	Voluntary context switches: 1
	Involuntary context switches: 163
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 20:22
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.729s ] Loaded ground truth, gt_size: 10
[ 0.729s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.561s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 96.177s ] Query results (vector ids, then distances):
query 0 nn's (82, 82): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (52, 52): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (64, 64): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (70, 70): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (125, 125): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 96.177s ] *** Query time: 16.962
qps: 589.551
 *** HNSW recall 
HNSW get 1000000 postive res from 100000 results, recall@10:10.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 96.178s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 90.15
	System time (seconds): 6.47
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:36.64
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8351652
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2102035
	Voluntary context switches: 1
	Involuntary context switches: 186
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:00
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.712s ] Loaded metadata, 10000000 attr's found
[ 0.712s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.715s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.717s ] Loaded 10000 sift10M queries
[ 0.724s ] Loaded ground truth, gt_size: 10
[ 0.724s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.291s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 477.188s ] Query results (vector ids, then distances):
query 0 nn's (84109, 85109): 4056305 (84863) 678609 (84821) 7099159 (84876) 8635455 (84809) 7598543 (84863) 3099210 (84813) 3281483 (84850) 9325178 (84850) 8033626 (84855) 9268407 (84808) 
     dis: 	93108.000 94424.000 94608.000 95604.000 96040.000 96054.000 96120.000 96819.000 97498.000 98096.000 
query 1 nn's (59198, 60198): 8918460 (59829) 4231552 (59832) 3003106 (59843) 1316561 (59784) 8603784 (59822) 3135058 (59830) 1742288 (59861) 2316920 (59826) 489923 (59781) 8548415 (59830) 
     dis: 	58837.000 71516.000 77716.000 80503.000 81034.000 81367.000 81929.000 84332.000 85560.000 88841.000 
query 2 nn's (74911, 75911): 2891769 (75442) 6687472 (75426) 791490 (75432) 2064854 (75433) 1916939 (75457) 450541 (75443) 9872414 (75466) 2951975 (75444) 1843919 (75483) 8801648 (75442) 
     dis: 	61188.000 64133.000 67557.000 67741.000 68748.000 68784.000 69676.000 72046.000 75232.000 76264.000 
query 3 nn's (80341, 81341): 1417424 (80951) 7922138 (80898) 9956308 (80931) 8099835 (80940) 1425399 (80968) 7854364 (80967) 6794924 (80919) 9418372 (81018) 8081932 (80927) 3978281 (80993) 
     dis: 	5643.000 10763.000 10764.000 10955.000 12221.000 13490.000 13667.000 13916.000 14399.000 15885.000 
query 4 nn's (84308, 85308): 3219064 (84832) 3408620 (84868) 9540783 (84815) 9529799 (84820) 4963666 (84860) 6040397 (84865) 4615492 (84850) 115599 (84829) 178890 (84859) 5683002 (84824) 
     dis: 	100084.000 101746.000 101846.000 102209.000 102523.000 105188.000 110251.000 114582.000 114906.000 115310.000 
[ 477.188s ] *** Query time: 69.959
qps: 142.941
 *** HNSW recall 
HNSW get 79286 postive res from 100000 results, recall@10:0.793
recall dist(10% per bucket): 0.000 0.000 0.001 0.005 0.019 0.048 0.100 0.179 0.241 0.247 0.158 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 477.189s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 451.32
	System time (seconds): 28.06
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:59.40
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 55249832
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 13826530
	Voluntary context switches: 1
	Involuntary context switches: 640
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:09
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.713s ] Loaded metadata, 10000000 attr's found
[ 0.713s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.716s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.717s ] Loaded 10000 sift10M queries
[ 0.724s ] Loaded ground truth, gt_size: 10
[ 0.724s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.199s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.020
[ 662.905s ] Query results (vector ids, then distances):
query 0 nn's (24662, 26662): 4538400 (25471) 7164607 (26189) 2549151 (26210) 3255720 (26162) 5831094 (24688) 2734582 (25445) 2383606 (25422) 8892654 (25464) 8670132 (26182) 6007894 (26231) 
     dis: 	76603.000 80358.000 81827.000 82432.000 83049.000 90734.000 91899.000 92310.000 93923.000 94209.000 
query 1 nn's (9555, 11555): 4234271 (10566) 1273419 (11359) 9781041 (10548) 5226515 (10521) 2342995 (9818) 4737569 (11339) 525732 (11334) 2555990 (9765) 7022759 (10578) 5747503 (10575) 
     dis: 	44439.000 46522.000 57738.000 62693.000 64554.000 67830.000 67893.000 68304.000 69267.000 70220.000 
query 2 nn's (13791, 15791): 5499961 (15240) 1329974 (14440) 4647083 (14438) 9101126 (15210) 4926809 (14457) 9375728 (14422) 5041695 (15209) 1404199 (14450) 3272220 (14428) 9496287 (14424) 
     dis: 	54632.000 55134.000 60225.000 60880.000 61155.000 61926.000 62487.000 63773.000 64997.000 65166.000 
query 3 nn's (40920, 42920): 3421136 (41115) 3041965 (42645) 1911911 (42656) 2218358 (41867) 4983026 (42649) 6045699 (41057) 4372662 (40994) 6306155 (41075) 940098 (41032) 4856979 (42574) 
     dis: 	5596.000 6095.000 6655.000 6693.000 8247.000 8590.000 9063.000 9888.000 10110.000 10532.000 
query 4 nn's (32697, 34697): 7302816 (33974) 10655 (33194) 7940118 (34029) 1676134 (33264) 5257360 (34011) 2975078 (33209) 9413713 (33215) 9790269 (34051) 1071857 (33223) 7304265 (34021) 
     dis: 	98200.000 102326.000 103265.000 105810.000 106365.000 107909.000 108185.000 109330.000 109362.000 109883.000 
[ 662.905s ] *** Query time: 143.364
qps: 69.752
 *** HNSW recall 
HNSW get 89064 postive res from 100000 results, recall@10:0.891
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.002 0.011 0.031 0.077 0.174 0.321 0.384 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 662.906s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_2000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_2000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 619.04
	System time (seconds): 47.84
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 11:06.89
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 102801316
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 25714712
	Voluntary context switches: 1
	Involuntary context switches: 809
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:22
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.754s ] Loaded metadata, 10000000 attr's found
[ 0.754s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.757s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.759s ] Loaded 10000 sift10M queries
[ 0.766s ] Loaded ground truth, gt_size: 10
[ 0.766s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.214s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.030
[ 853.866s ] Query results (vector ids, then distances):
query 0 nn's (57774, 60774): 6346833 (59051) 6777756 (59806) 1415164 (58274) 4624202 (60640) 1069599 (59846) 7868374 (59043) 6012029 (59086) 2814763 (58247) 8471034 (60619) 3278544 (59044) 
     dis: 	76136.000 80573.000 87361.000 87536.000 89308.000 89923.000 90224.000 90333.000 90576.000 92114.000 
query 1 nn's (61786, 64786): 7692715 (63767) 9933148 (62209) 6174201 (62186) 6335574 (62176) 6672132 (63709) 2048408 (64488) 727506 (62216) 1201467 (64472) 454002 (63717) 9346715 (62181) 
     dis: 	56490.000 57000.000 58390.000 62023.000 63864.000 66445.000 66893.000 69200.000 69816.000 69882.000 
query 2 nn's (21541, 24541): 141025 (23140) 2407252 (23854) 3923684 (23842) 5054841 (23031) 2668148 (23852) 3483394 (22283) 6247603 (23076) 2871507 (23061) 884050 (23086) 7154141 (23071) 
     dis: 	57318.000 59815.000 60631.000 61717.000 62059.000 62475.000 62491.000 62667.000 63108.000 63729.000 
query 3 nn's (4183, 7183): 1739894 (5102) 290433 (5889) 8556892 (4309) 7745448 (5849) 8388591 (5110) 7608410 (6663) 9833335 (4257) 4463664 (5904) 3397197 (4278) 9195266 (6643) 
     dis: 	6845.000 7438.000 9235.000 9980.000 10479.000 10793.000 10990.000 11014.000 11199.000 11406.000 
query 4 nn's (68869, 71869): 2732612 (69235) 4380344 (69964) 8756074 (69191) 3671814 (69216) 8718571 (70752) 7476351 (70787) 4436465 (71555) 1683332 (70754) 308167 (71554) 9413765 (70002) 
     dis: 	90596.000 90617.000 95830.000 98423.000 98595.000 98713.000 99231.000 99366.000 100320.000 100779.000 
[ 853.867s ] *** Query time: 218.748
qps: 45.715
 *** HNSW recall 
HNSW get 92670 postive res from 100000 results, recall@10:0.927
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.003 0.013 0.042 0.122 0.291 0.528 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 853.867s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_3000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_3000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 794.25
	System time (seconds): 65.62
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 14:19.91
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 147697812
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 36939426
	Voluntary context switches: 1
	Involuntary context switches: 1271
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:37
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.711s ] Loaded metadata, 10000000 attr's found
[ 0.711s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.714s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.715s ] Loaded 10000 sift10M queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.723s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.127s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.040
[ 1525.890s ] Query results (vector ids, then distances):
query 0 nn's (40805, 44805): 7077742 (42666) 6552863 (43448) 888010 (41841) 8428377 (42602) 6002319 (43398) 6616517 (41060) 1432946 (42584) 2312218 (43413) 704919 (42615) 8910079 (41058) 
     dis: 	76934.000 80001.000 80692.000 83232.000 83988.000 87784.000 88466.000 89990.000 91428.000 91788.000 
query 1 nn's (39530, 43530): 9958454 (41038) 6087695 (41824) 8457342 (41029) 2235415 (41809) 1015812 (41048) 9868698 (40309) 6491365 (42574) 3435206 (42617) 5796685 (40324) 4060272 (43413) 
     dis: 	51055.000 60873.000 62505.000 62601.000 64480.000 66830.000 67509.000 67918.000 68091.000 69541.000 
query 2 nn's (50847, 54847): 8667807 (51982) 7654217 (54363) 8863268 (54351) 2413882 (51230) 4450077 (52015) 419195 (54334) 5488746 (54314) 8699826 (53572) 2016764 (52017) 5684221 (51991) 
     dis: 	47988.000 53106.000 53225.000 55630.000 55719.000 55957.000 60058.000 60118.000 60789.000 61535.000 
query 3 nn's (33809, 37809): 4083199 (34822) 8174765 (34010) 8419826 (36357) 6148687 (35583) 7914184 (37145) 7865854 (37129) 7791363 (36336) 8323731 (37139) 6676311 (35598) 240857 (34767) 
     dis: 	3910.000 5180.000 6096.000 6437.000 6624.000 8579.000 9150.000 9177.000 9835.000 10000.000 
query 4 nn's (25226, 29226): 7778880 (27757) 9001755 (26934) 6203168 (28560) 4830381 (26202) 9570381 (25431) 5729760 (25444) 272409 (28564) 2454280 (25412) 718421 (27012) 4355165 (25439) 
     dis: 	87157.000 87905.000 89955.000 91259.000 92925.000 95543.000 96104.000 97065.000 98664.000 99536.000 
[ 1525.890s ] *** Query time: 524.759
qps: 19.056
 *** HNSW recall 
HNSW get 94468 postive res from 100000 results, recall@10:0.945
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.007 0.027 0.092 0.252 0.621 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 1525.918s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_4000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_4000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 1199.05
	System time (seconds): 310.85
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 25:38.83
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 207432612
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 56811
	Minor (reclaiming a frame) page faults: 128882829
	Voluntary context switches: 61060
	Involuntary context switches: 9972
	Swaps: 0
	File system inputs: 1532688
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:06
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_5000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_5000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.710s ] Loaded metadata, 10000000 attr's found
[ 0.710s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.713s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.715s ] Loaded 10000 sift10M queries
[ 0.722s ] Loaded ground truth, gt_size: 10
[ 0.722s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.303s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.049
[ 1543.696s ] Query results (vector ids, then distances):
query 0 nn's (0, 3809): 1167995 (1952) 419470 (2709) 4072432 (3470) 6648721 (2725) 839586 (2771) 9906463 (2750) 7842689 (3518) 440408 (1226) 9584266 (1974) 7063460 (3524) 
     dis: 	72023.000 82431.000 84223.000 84842.000 85800.000 85842.000 85925.000 86053.000 87824.000 88629.000 
query 1 nn's (22363, 27363): 2253711 (24672) 3221056 (24642) 7331745 (26262) 1784776 (26934) 6457655 (23024) 1503119 (23913) 5349437 (24597) 6383821 (23061) 3733744 (26196) 8346283 (23872) 
     dis: 	45140.000 49695.000 54968.000 57917.000 58061.000 59550.000 64817.000 64958.000 65583.000 65936.000 
query 2 nn's (27932, 32932): 9554416 (30928) 9457112 (30097) 8563094 (30121) 7508409 (30873) 9910009 (32480) 4259715 (28506) 4418406 (32491) 1561941 (30873) 1795636 (32445) 2036301 (29296) 
     dis: 	52237.000 54765.000 55995.000 57099.000 57310.000 57942.000 58485.000 59320.000 60175.000 60983.000 
query 3 nn's (22362, 27362): 5124856 (24615) 9313337 (23841) 7749958 (23011) 5430458 (24636) 7614050 (26953) 5663020 (25395) 8778387 (25422) 9706597 (23879) 8796008 (24678) 8210186 (25411) 
     dis: 	5492.000 7693.000 8122.000 8355.000 8407.000 9763.000 10140.000 10493.000 10624.000 10821.000 
query 4 nn's (18064, 23064): 6578584 (18363) 3389697 (19174) 39005 (20693) 5709057 (18391) 303093 (19155) 5036980 (19906) 2721988 (21467) 1641746 (20738) 3728769 (19158) 5725804 (20716) 
     dis: 	82172.000 84350.000 87925.000 89153.000 93920.000 94937.000 97226.000 97693.000 98150.000 99528.000 
[ 1543.696s ] *** Query time: 471.786
qps: 21.196
 *** HNSW recall 
HNSW get 95370 postive res from 100000 results, recall@10:0.954
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.005 0.019 0.071 0.232 0.671 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 1543.716s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_5000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_5000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 1282.98
	System time (seconds): 260.76
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 25:58.92
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 244855536
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2284
	Minor (reclaiming a frame) page faults: 132269337
	Voluntary context switches: 40877
	Involuntary context switches: 3199
	Swaps: 0
	File system inputs: 1963888
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:37
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_6000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_6000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.705s ] Loaded metadata, 10000000 attr's found
[ 0.705s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.708s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.709s ] Loaded 10000 sift10M queries
[ 0.717s ] Loaded ground truth, gt_size: 10
[ 0.717s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.181s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_6000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_6000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 738.26
	System time (seconds): 103.76
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 14:14.35
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 212689832
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 204
	Minor (reclaiming a frame) page faults: 53188976
	Voluntary context switches: 24444
	Involuntary context switches: 1599
	Swaps: 0
	File system inputs: 1526320
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:23
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_7000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_7000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 150
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.713s ] Loaded metadata, 10000000 attr's found
[ 0.713s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.716s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.717s ] Loaded 10000 sift10M queries
[ 0.725s ] Loaded ground truth, gt_size: 10
[ 0.725s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.999s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.069
[ 2382.868s ] Query results (vector ids, then distances):
query 0 nn's (77833, 84833): 2515600 (78596) 7860530 (80963) 2375126 (80971) 8606715 (81733) 4689336 (84094) 7873580 (83316) 4326493 (81740) 392808 (80962) 4770231 (82485) 5228659 (78582) 
     dis: 	73465.000 78859.000 79929.000 80125.000 82232.000 82438.000 82567.000 83552.000 84388.000 85928.000 
query 1 nn's (95389, 99999): 522429 (97325) 1120308 (98119) 1346170 (99700) 3631651 (96611) 9643506 (97340) 7513620 (96559) 298308 (95781) 8811964 (95762) 1447686 (97303) 2455337 (97347) 
     dis: 	52132.000 52532.000 56324.000 57719.000 61991.000 64180.000 65450.000 66348.000 66622.000 70013.000 
query 2 nn's (63996, 70996): 4457160 (66048) 8086660 (68439) 271911 (70728) 1080573 (70772) 1860330 (69215) 5631784 (66875) 5596868 (65349) 4861540 (64502) 8635193 (70758) 1625792 (67647) 
     dis: 	51795.000 54318.000 54365.000 56182.000 56884.000 57398.000 57613.000 57716.000 57831.000 58508.000 
query 3 nn's (66554, 73554): 692217 (70003) 4030248 (73143) 9981635 (70779) 8643637 (70765) 7747974 (72297) 3540851 (70766) 6734945 (72332) 5561400 (73133) 3620717 (69961) 3723247 (73126) 
     dis: 	7226.000 7245.000 8230.000 8954.000 9230.000 9679.000 10027.000 10267.000 10329.000 10386.000 
query 4 nn's (80057, 87057): 5493369 (80149) 6062843 (84085) 1967098 (85657) 2173144 (81740) 1082443 (80179) 64045 (81734) 6658100 (80140) 9493047 (81713) 5126636 (86440) 3789483 (85581) 
     dis: 	81626.000 84746.000 89742.000 89811.000 91730.000 93643.000 96976.000 97659.000 98026.000 98880.000 
[ 2382.868s ] *** Query time: 773.673
qps: 12.925
 *** HNSW recall 
HNSW get 96714 postive res from 100000 results, recall@10:0.967
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.003 0.012 0.047 0.183 0.754 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 80068260, average: 8006.826
finished ivfpq index examples
[ 2382.871s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_7000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_7000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 150 128"
	User time (seconds): 1725.50
	System time (seconds): 469.40
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 40:02.81
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 319186852
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 74048
	Minor (reclaiming a frame) page faults: 196759362
	Voluntary context switches: 102909
	Involuntary context switches: 7387
	Swaps: 0
	File system inputs: 4298824
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
