Start time: 03:04
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 500
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  31886  postive res from  100000  results, recall@ 10 : 0.31886
recall dist(10\% per bucket):  [2.760e-02 1.156e-01 2.089e-01 2.502e-01 1.999e-01 1.160e-01 5.550e-02
 1.940e-02 6.000e-03 8.000e-04 1.000e-04]
10000  queries cost: 185.40220522880554 , qps: 53.93679103039235
Start time: 03:59
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 500
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  31886  postive res from  100000  results, recall@ 10 : 0.31886
recall dist(10\% per bucket):  [2.760e-02 1.156e-01 2.089e-01 2.502e-01 1.999e-01 1.160e-01 5.550e-02
 1.940e-02 6.000e-03 8.000e-04 1.000e-04]
10000  queries cost: 64.86609292030334 , qps: 154.1637479582181
Start time: 04:01
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 500
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists, then drop it
get dataset size: 1000000  d: 128
dim: 128
_N: 1000000  N: 1000000
partition M: 4
nlist: 1000
start insertion
insert batch: 0.0
insert batch: 1.0
insert batch: 2.0
insert batch: 3.0
insert batch: 4.0
insert batch: 5.0
insert batch: 6.0
insert batch: 7.0
insert batch: 8.0
insert batch: 9.0
insert suc, time cost: 33.88198232650757
construction done
Start time: 04:02
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 500
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  93991  postive res from  100000  results, recall@ 10 : 0.93991
recall dist(10\% per bucket):  [0.0019 0.0059 0.011  0.0156 0.0187 0.0142 0.0098 0.0083 0.0123 0.0597
 0.8426]
10000  queries cost: 50.613163232803345 , qps: 197.57706022054776
Start time: 04:18
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 500
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  64981  postive res from  100000  results, recall@ 10 : 0.64981
recall dist(10\% per bucket):  [0.0175 0.0558 0.1085 0.1225 0.1034 0.0579 0.0283 0.0112 0.0073 0.0279
 0.4597]
10000  queries cost: 123.80881667137146 , qps: 80.76969208536437
Start time: 04:53
  File "utils/pymilvus_ivfpq.py", line 74
    replica_number=1ï¼Œ
                    ^
SyntaxError: invalid character in identifier
Start time: 04:53
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 500
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
RPC error: [search], <MilvusException: (code=201, message=fail to search on QueryNode 5: partition not loaded[partition=[454033563711968280]])>, <Time:{'RPC start': '2024-11-23 20:55:36.496625', 'RPC error': '2024-11-23 20:55:37.101440'}>
Failed to search collection: collection_sift1M_sel_1_8_random
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 183, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 336, in search
    raise ex from ex
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 322, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 148, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 144, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 183, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 123, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 87, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 800, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 741, in _execute_search
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 734, in _execute_search
    check_status(response.status)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/utils.py", line 63, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=201, message=fail to search on QueryNode 5: partition not loaded[partition=[454033563711968280]])>
Start time: 05:14
dataset: sift1M
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
K: 10
nprobe: 500
collection name: collection_sift1M_sel_1_8_random
collection  collection_sift1M_sel_1_8_random  exists
collection size: data: ["{'count(*)': 1000000}"] 
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
RPC error: [search], <MilvusException: (code=500, message=fail to search on QueryNode 5: channel not found[channel=by-dev-rootcoord-dml_8_454033563714175257v0])>, <Time:{'RPC start': '2024-11-23 21:17:48.699741', 'RPC error': '2024-11-23 21:17:49.305236'}>
Failed to search collection: collection_sift1M_sel_1_8_random
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 188, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 336, in search
    raise ex from ex
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 322, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 148, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 144, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 183, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 123, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 87, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 800, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 741, in _execute_search
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 734, in _execute_search
    check_status(response.status)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/utils.py", line 63, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=500, message=fail to search on QueryNode 5: channel not found[channel=by-dev-rootcoord-dml_8_454033563714175257v0])>
