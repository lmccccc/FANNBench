Start time: 10:28
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_6_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_6_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.132s ] Loaded metadata, 1000000 attr's found
[ 0.132s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.148s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.150s ] Loaded 10000 redcaps1m queries
[ 0.162s ] Loaded ground truth, gt_size: 10
[ 0.162s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.255s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 34.216s ] Query results (vector ids, then distances):
query 0 nn's (1531765284, 1586036106): 562528 (1566573685) 247269 (1560746907) 451328 (1575861272) 864174 (1565212170) 7102 (1556316869) 302070 (1544003614) 524418 (1538962308) 966838 (1536727757) 84548 (1560185703) 302187 (1583094900) 
     dis: 	0.634 0.667 0.702 0.747 0.754 0.755 0.770 0.772 0.775 0.775 
query 1 nn's (1533381414, 1586782162): 363220 (1534188950) 979250 (1557017196) 728340 (1574276126) 660394 (1580653062) 803332 (1550464472) 361663 (1577302575) 428754 (1544918864) 110189 (1563057799) 984241 (1583369066) 139424 (1566674419) 
     dis: 	0.092 0.101 0.103 0.105 0.106 0.107 0.108 0.110 0.110 0.111 
query 2 nn's (1545403871, 1592215459): 355537 (1569549910) 880455 (1563252917) 306439 (1587166763) 757728 (1549394377) 193180 (1590955321) 216922 (1574356506) 445298 (1564084222) 301614 (1549070155) 299577 (1575332164) 771849 (1550798985) 
     dis: 	0.222 0.225 0.237 0.237 0.247 0.256 0.261 0.262 0.264 0.264 
query 3 nn's (1554466574, 1597592400): 689368 (1577995933) 889987 (1577990461) 783586 (1570422403) 428067 (1581847028) 640717 (1596726949) 609006 (1597400318) 687871 (1593890469) 889856 (1584822371) 769868 (1557791942) 213744 (1585996476) 
     dis: 	0.402 0.402 0.416 0.426 0.452 0.456 0.460 0.467 0.471 0.475 
query 4 nn's (1532982229, 1586621511): 176027 (1553193585) 421184 (1558289958) 959629 (1573860803) 754904 (1559689119) 68136 (1585001657) 231993 (1540849707) 742084 (1569712235) 54130 (1565384067) 9859 (1559763136) 105030 (1566179390) 
     dis: 	0.269 0.292 0.293 0.300 0.304 0.307 0.307 0.308 0.308 0.310 
[ 34.216s ] *** Query time: 26.388
qps: 378.961
 *** ivfpq recall 
ivfpq get 91179 postive res from 100000 results, recall@10:0.912
recall dist(10% per bucket): 0.000 0.000 0.001 0.003 0.004 0.010 0.017 0.041 0.102 0.384 0.438 
finished ivfpq index examples
[ 34.217s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_6_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_6_random_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256 20 512"
	User time (seconds): 33.30
	System time (seconds): 0.93
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:34.35
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1329060
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 332090
	Voluntary context switches: 1
	Involuntary context switches: 120
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:43
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_10_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_10_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.132s ] Loaded metadata, 1000000 attr's found
[ 0.132s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.148s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.151s ] Loaded 10000 redcaps1m queries
[ 0.162s ] Loaded ground truth, gt_size: 10
[ 0.162s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.126s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 34.365s ] Query results (vector ids, then distances):
query 0 nn's (1557954304, 1567262768): 562528 (1566573685) 247269 (1560746907) 864174 (1565212170) 84548 (1560185703) 203647 (1562988215) 334544 (1559547570) 571852 (1565488702) 309200 (1566403587) 736934 (1559321953) 91712 (1558420829) 
     dis: 	0.634 0.667 0.747 0.775 0.781 0.795 0.802 0.805 0.808 0.837 
query 1 nn's (1543323430, 1555317047): 803332 (1550464472) 428754 (1544918864) 896567 (1545686094) 8069 (1552702111) 795520 (1546185723) 979295 (1551634784) 457200 (1554283715) 832389 (1553171067) 661716 (1550269939) 104425 (1548157472) 
     dis: 	0.106 0.108 0.111 0.112 0.113 0.115 0.115 0.117 0.117 0.117 
query 2 nn's (1525726888, 1541614044): 374226 (1540159958) 837851 (1541593920) 423208 (1533881652) 476689 (1533881746) 988519 (1541030272) 904824 (1539980763) 557020 (1537923288) 980529 (1537818962) 312490 (1528485626) 10885 (1540057244) 
     dis: 	0.264 0.279 0.289 0.289 0.291 0.299 0.303 0.304 0.307 0.308 
query 3 nn's (1534908406, 1549231900): 905275 (1548944501) 340980 (1543080428) 758927 (1537668553) 725969 (1544048521) 933991 (1538214131) 931871 (1537063155) 684978 (1536876732) 533587 (1536279979) 634766 (1541901948) 382010 (1541360322) 
     dis: 	0.461 0.503 0.511 0.520 0.540 0.544 0.545 0.545 0.545 0.547 
query 4 nn's (1522115257, 1538882480): 46163 (1526733049) 440553 (1532363045) 59094 (1535817960) 738842 (1527090038) 458642 (1534341741) 222228 (1535984303) 262612 (1529024724) 104778 (1531617483) 37748 (1522805591) 760527 (1522881355) 
     dis: 	0.299 0.303 0.317 0.320 0.320 0.324 0.332 0.334 0.341 0.346 
[ 34.365s ] *** Query time: 25.054
qps: 399.140
 *** ivfpq recall 
ivfpq get 88463 postive res from 100000 results, recall@10:0.885
recall dist(10% per bucket): 0.000 0.001 0.002 0.004 0.010 0.022 0.037 0.063 0.125 0.340 0.396 
finished ivfpq index examples
[ 34.366s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_10_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_10_random_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256 20 512"
	User time (seconds): 33.58
	System time (seconds): 0.82
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:34.48
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1331104
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 331302
	Voluntary context switches: 0
	Involuntary context switches: 77
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:53
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_19_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_19_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.133s ] Loaded metadata, 1000000 attr's found
[ 0.133s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.150s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.153s ] Loaded 10000 redcaps1m queries
[ 0.165s ] Loaded ground truth, gt_size: 10
[ 0.165s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.141s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 25.271s ] Query results (vector ids, then distances):
query 0 nn's (1494704266, 1497977749): 727106 (1496187355) 549163 (1496080359) 618562 (1495713599) 336934 (1495250268) 734528 (1495859321) 671730 (1495170278) 144195 (1497491939) 682975 (1495379254) 557825 (1496684050) 844754 (1495482195) 
     dis: 	0.624 0.758 0.843 0.844 0.963 0.975 0.987 1.020 1.039 1.042 
query 1 nn's (1587242368, 1587926868): 399497 (1587264520) 770454 (1587757602) 769260 (1587746034) 344524 (1587574524) 314305 (1587443661) 469350 (1587659598) 195797 (1587420815) 531753 (1587486363) 696364 (1587746580) 58895 (1587634095) 
     dis: 	0.118 0.127 0.127 0.131 0.136 0.137 0.146 0.157 0.158 0.159 
query 2 nn's (1534119609, 1535595689): 30013 (1535029598) 83131 (1534727416) 564326 (1535391224) 447300 (1534583650) 98597 (1535050659) 549955 (1534122846) 676919 (1535326897) 160303 (1535157529) 421267 (1535151223) 13130 (1534373792) 
     dis: 	0.324 0.355 0.359 0.361 0.362 0.369 0.374 0.375 0.385 0.386 
query 3 nn's (1602937813, 1603746862): 714247 (1603680219) 280271 (1603293061) 562023 (1602959494) 445023 (1603650389) 87933 (1603436594) 324678 (1603471068) 361935 (1603480837) 120108 (1602950692) 145084 (1603337878) 33284 (1603556618) 
     dis: 	0.532 0.557 0.605 0.609 0.629 0.630 0.658 0.664 0.673 0.677 
query 4 nn's (1607253312, 1608069985): 50258 (1607818658) 573913 (1607881553) 654674 (1607773318) 679863 (1607963030) 664143 (1607937659) 377999 (1608057479) 704689 (1608051314) 578815 (1607281166) 735042 (1607941690) 372352 (1607630051) 
     dis: 	0.425 0.434 0.473 0.485 0.500 0.510 0.520 0.542 0.546 0.556 
[ 25.271s ] *** Query time: 17.583
qps: 568.729
 *** ivfpq recall 
ivfpq get 75434 postive res from 100000 results, recall@10:0.754
recall dist(10% per bucket): 0.002 0.008 0.015 0.031 0.053 0.079 0.101 0.127 0.152 0.219 0.212 
finished ivfpq index examples
[ 25.272s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_19_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_19_random_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256 20 512"
	User time (seconds): 24.49
	System time (seconds): 0.89
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:25.41
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1331100
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 331281
	Voluntary context switches: 0
	Involuntary context switches: 131
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:02
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_20_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_20_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.193s ] Loaded metadata, 1000000 attr's found
[ 0.193s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.211s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.214s ] Loaded 10000 redcaps1m queries
[ 0.229s ] Loaded ground truth, gt_size: 10
[ 0.229s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.864s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 40.864s ] Query results (vector ids, then distances):
query 0 nn's (1598265916, 1598326302): 769405 (1598272284) 791840 (1598271764) 469747 (1598270160) 738616 (1598289788) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.101 1.116 1.189 1.204 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1556721962, 1556828807): 948936 (1556807608) 197070 (1556748643) 121315 (1556754667) 297345 (1556792828) 529383 (1556746196) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.152 0.222 0.227 0.300 0.359 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1590889648, 1590963338): 193180 (1590955321) 818639 (1590907634) 294357 (1590898009) 501558 (1590927736) 866023 (1590958550) 391731 (1590952882) 190967 (1590895737) 743265 (1590938312) -1 (0) -1 (0) 
     dis: 	0.247 0.394 0.446 0.452 0.510 0.526 0.627 0.700 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1531692163, 1531837350): 33112 (1531778462) 180675 (1531762240) 683557 (1531736403) 566683 (1531776536) 535721 (1531779476) 249561 (1531771533) 780278 (1531706772) -1 (0) -1 (0) -1 (0) 
     dis: 	0.594 0.664 0.691 0.729 0.756 0.816 0.850 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1576523650, 1576623517): 654773 (1576599695) 609768 (1576586603) 970447 (1576617327) 3655 (1576527665) 787978 (1576608920) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.449 0.468 0.517 0.542 0.575 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 40.865s ] *** Query time: 27.488
qps: 363.795
 *** ivfpq recall 
ivfpq get 37358 postive res from 100000 results, recall@10:0.374
recall dist(10% per bucket): 0.047 0.113 0.158 0.183 0.167 0.128 0.085 0.053 0.036 0.018 0.011 
finished ivfpq index examples
[ 40.866s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_20_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_20_random_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_real_label_256 20 512"
	User time (seconds): 39.91
	System time (seconds): 1.00
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:41.00
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1331100
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 331287
	Voluntary context switches: 0
	Involuntary context switches: 177
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:34
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_6_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 0.141s ] Loaded metadata, 1000000 attr's found
[ 0.141s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.160s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.162s ] Loaded 10000 redcaps1m queries
[ 0.179s ] Loaded ground truth, gt_size: 10
[ 0.179s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.056s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.499
[ 39.430s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 727106 (6) 268161 (6) 646437 (6) 812018 (6) 64073 (6) 864174 (6) 302070 (6) 524418 (6) 790037 (6) 84548 (6) 
     dis: 	0.624 0.640 0.679 0.740 0.745 0.747 0.755 0.770 0.771 0.775 
query 1 nn's (6, 6): 363220 (6) 253654 (6) 666880 (6) 622447 (6) 660394 (6) 964028 (6) 428754 (6) 427957 (6) 139424 (6) 896567 (6) 
     dis: 	0.092 0.098 0.100 0.103 0.105 0.106 0.108 0.110 0.111 0.111 
query 2 nn's (6, 6): 355537 (6) 964377 (6) 940490 (6) 620585 (6) 299577 (6) 374226 (6) 894254 (6) 718316 (6) 773055 (6) 328504 (6) 
     dis: 	0.222 0.225 0.245 0.260 0.264 0.264 0.264 0.266 0.266 0.271 
query 3 nn's (6, 6): 583699 (6) 689368 (6) 428067 (6) 124464 (6) 595884 (6) 609006 (6) 635563 (6) 687871 (6) 905275 (6) 413550 (6) 
     dis: 	0.401 0.402 0.426 0.445 0.456 0.456 0.458 0.460 0.461 0.470 
query 4 nn's (6, 6): 522469 (6) 582698 (6) 797013 (6) 176027 (6) 234795 (6) 931553 (6) 279888 (6) 46163 (6) 68136 (6) 742084 (6) 
     dis: 	0.259 0.261 0.267 0.269 0.279 0.279 0.298 0.299 0.304 0.307 
[ 39.431s ] *** Query time: 30.209
qps: 331.026
 *** ivfpq recall 
ivfpq get 91384 postive res from 100000 results, recall@10:0.914
recall dist(10% per bucket): 0.000 0.000 0.001 0.001 0.004 0.007 0.018 0.040 0.106 0.384 0.440 
finished ivfpq index examples
[ 39.431s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_6_256 20 512"
	User time (seconds): 38.56
	System time (seconds): 0.86
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:39.52
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1329052
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 331284
	Voluntary context switches: 1
	Involuntary context switches: 71
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:53
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_10_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 0.105s ] Loaded metadata, 1000000 attr's found
[ 0.105s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.121s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.123s ] Loaded 10000 redcaps1m queries
[ 0.135s ] Loaded ground truth, gt_size: 10
[ 0.135s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.129s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 31.333s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 64073 (10) 7102 (10) 554724 (10) 364290 (10) 596166 (10) 927993 (10) 699054 (10) 909887 (10) 174023 (10) 71366 (10) 
     dis: 	0.745 0.754 0.793 0.799 0.838 0.864 0.888 0.896 0.900 0.901 
query 1 nn's (10, 10): 428754 (10) 361537 (10) 979295 (10) 439637 (10) 424951 (10) 681550 (10) 709969 (10) 408156 (10) 371263 (10) 753841 (10) 
     dis: 	0.108 0.110 0.115 0.116 0.119 0.119 0.120 0.120 0.121 0.124 
query 2 nn's (10, 10): 964377 (10) 771849 (10) 400722 (10) 258758 (10) 903106 (10) 530996 (10) 65400 (10) 971858 (10) 381411 (10) 444996 (10) 
     dis: 	0.225 0.264 0.268 0.268 0.269 0.276 0.282 0.282 0.284 0.285 
query 3 nn's (10, 10): 305237 (10) 382748 (10) 694867 (10) 994604 (10) 382010 (10) 309349 (10) 135464 (10) 430670 (10) 706869 (10) 768716 (10) 
     dis: 	0.494 0.497 0.520 0.538 0.547 0.552 0.554 0.561 0.561 0.575 
query 4 nn's (10, 10): 797013 (10) 959629 (10) 878527 (10) 222228 (10) 567017 (10) 279836 (10) 732037 (10) 193229 (10) 235772 (10) 762488 (10) 
     dis: 	0.267 0.293 0.303 0.324 0.326 0.332 0.334 0.334 0.350 0.351 
[ 31.333s ] *** Query time: 22.713
qps: 440.275
 *** ivfpq recall 
ivfpq get 88961 postive res from 100000 results, recall@10:0.890
recall dist(10% per bucket): 0.000 0.001 0.001 0.004 0.009 0.017 0.037 0.060 0.119 0.349 0.402 
finished ivfpq index examples
[ 31.335s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_10_256 20 512"
	User time (seconds): 29.90
	System time (seconds): 1.54
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:31.45
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1329060
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 466778
	Voluntary context switches: 1
	Involuntary context switches: 46
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:17
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_19_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.081s ] Loaded metadata, 1000000 attr's found
[ 0.081s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.106s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.108s ] Loaded 10000 redcaps1m queries
[ 0.116s ] Loaded ground truth, gt_size: 10
[ 0.116s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 1.953s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 33.736s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 336934 (19) 472918 (19) 193999 (19) 866187 (19) 144195 (19) 755123 (19) 988288 (19) 837484 (19) 789108 (19) 173400 (19) 
     dis: 	0.844 0.873 0.944 0.975 0.987 0.997 1.020 1.065 1.078 1.078 
query 1 nn's (19, 19): 526331 (19) 158846 (19) 264009 (19) 246783 (19) 434283 (19) 69776 (19) 805880 (19) 916232 (19) 357641 (19) 774551 (19) 
     dis: 	0.136 0.138 0.138 0.141 0.142 0.149 0.157 0.161 0.161 0.168 
query 2 nn's (19, 19): 752639 (19) 916423 (19) 782944 (19) 366433 (19) 425512 (19) 537534 (19) 347848 (19) 387561 (19) 546593 (19) 249066 (19) 
     dis: 	0.308 0.313 0.321 0.329 0.332 0.338 0.353 0.353 0.357 0.358 
query 3 nn's (19, 19): 687871 (19) 226331 (19) 493967 (19) 840258 (19) 231500 (19) 89977 (19) 938737 (19) 278147 (19) 584120 (19) 611390 (19) 
     dis: 	0.460 0.520 0.557 0.581 0.588 0.602 0.618 0.620 0.624 0.650 
query 4 nn's (19, 19): 522469 (19) 402334 (19) 393712 (19) 135893 (19) 826811 (19) 947998 (19) 862880 (19) 989983 (19) 25013 (19) 819697 (19) 
     dis: 	0.259 0.369 0.378 0.411 0.415 0.423 0.429 0.437 0.441 0.444 
[ 33.736s ] *** Query time: 24.253
qps: 412.321
 *** ivfpq recall 
ivfpq get 76969 postive res from 100000 results, recall@10:0.770
recall dist(10% per bucket): 0.002 0.005 0.012 0.028 0.049 0.067 0.097 0.124 0.161 0.233 0.221 
finished ivfpq index examples
[ 33.739s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_19_256 20 512"
	User time (seconds): 31.80
	System time (seconds): 2.02
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:33.89
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1328040
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 562141
	Voluntary context switches: 1
	Involuntary context switches: 77
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:26
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_20_256
nprobe: 20
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
[ 0.071s ] Loaded metadata, 1000000 attr's found
[ 0.071s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.084s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.086s ] Loaded 10000 redcaps1m queries
[ 0.094s ] Loaded ground truth, gt_size: 10
[ 0.094s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.106s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 33.519s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 665235 (20) 760497 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.074 1.342 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 431068 (20) 999010 (20) 481335 (20) 601684 (20) 556847 (20) 142233 (20) 302104 (20) 220803 (20) 667912 (20) -1 (0) 
     dis: 	0.164 0.179 0.180 0.203 0.234 0.240 0.288 0.306 0.380 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 497610 (20) 638287 (20) 219747 (20) 775045 (20) 993573 (20) 242602 (20) 637631 (20) 645580 (20) 28323 (20) -1 (0) 
     dis: 	0.405 0.412 0.415 0.431 0.509 0.551 0.573 0.694 0.750 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 404058 (20) 582466 (20) 119403 (20) 598691 (20) 220745 (20) 32256 (20) 520498 (20) 989455 (20) 819970 (20) 381115 (20) 
     dis: 	0.752 0.768 0.813 0.825 0.839 0.845 0.845 0.880 0.921 0.950 
query 4 nn's (20, 20): 953970 (20) 707476 (20) 931627 (20) 369671 (20) 924206 (20) 820736 (20) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.438 0.442 0.555 0.557 0.586 0.642 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 33.519s ] *** Query time: 23.933
qps: 417.834
 *** ivfpq recall 
ivfpq get 38254 postive res from 100000 results, recall@10:0.383
recall dist(10% per bucket): 0.036 0.097 0.172 0.176 0.169 0.130 0.097 0.065 0.036 0.018 0.005 
finished ivfpq index examples
[ 33.520s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_10.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_20_256 20 512"
	User time (seconds): 31.83
	System time (seconds): 1.79
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:33.62
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1331112
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 573067
	Voluntary context switches: 1
	Involuntary context switches: 50
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
