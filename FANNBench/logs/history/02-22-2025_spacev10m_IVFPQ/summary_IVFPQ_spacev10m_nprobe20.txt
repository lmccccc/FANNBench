Start time: 09:12
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_6_50
nprobe: 20
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 1.406s ] Loaded metadata, 10000000 attr's found
[ 1.406s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.410s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.412s ] Loaded 10000 spacev10m queries
[ 1.429s ] Loaded ground truth, gt_size: 10
[ 1.429s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.994s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 87.455s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 4661794 (6) 1352077 (6) 8023016 (6) 2436347 (6) 525784 (6) 1781760 (6) 4853416 (6) 3647719 (6) 7509422 (6) 9694965 (6) 
     dis: 	3088.261 3341.555 4520.620 5024.053 5245.911 5329.049 5518.065 5521.637 5638.839 5911.416 
query 1 nn's (6, 6): 1027770 (6) 3024255 (6) 3545414 (6) 4573755 (6) 3338949 (6) 6957767 (6) 8596579 (6) 1852123 (6) 8784659 (6) 7628827 (6) 
     dis: 	4951.676 6388.603 7656.533 7797.702 7835.011 8460.789 8631.122 8661.861 8728.125 9115.218 
query 2 nn's (6, 6): 8005273 (6) 2734445 (6) 4290437 (6) 3524579 (6) 2755608 (6) 2212807 (6) 9191130 (6) 8672246 (6) 7542827 (6) 2966676 (6) 
     dis: 	4005.862 4082.926 4578.350 4985.623 5123.409 6174.818 6238.109 6359.330 6887.648 7112.242 
query 3 nn's (6, 6): 1208824 (6) 7481558 (6) 9922446 (6) 8906949 (6) 4371036 (6) 1866926 (6) 220595 (6) 1717763 (6) 8694166 (6) 9455216 (6) 
     dis: 	7559.416 7873.033 8473.836 8753.625 9418.432 9443.771 9564.521 9582.531 9602.439 9751.061 
query 4 nn's (6, 6): 3987492 (6) 4352168 (6) 9323555 (6) 9211260 (6) 4549236 (6) 9052024 (6) 6279473 (6) 4015525 (6) 6095172 (6) 2172340 (6) 
     dis: 	3856.535 5324.612 5493.439 5539.291 5913.687 6043.619 6100.910 6211.677 6247.159 6316.974 
[ 87.455s ] *** Query time: 17.170
qps: 582.419
 *** ivfpq recall 
ivfpq get 75527 postive res from 100000 results, recall@10:0.755
recall dist(10% per bucket): 0.004 0.010 0.022 0.029 0.044 0.060 0.080 0.119 0.200 0.291 0.141 
finished ivfpq index examples
[ 87.456s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_6_50 20 100"
	User time (seconds): 86.49
	System time (seconds): 1.11
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:27.61
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1270692
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 332110
	Voluntary context switches: 3
	Involuntary context switches: 93
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:44
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_10_50
nprobe: 20
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 1.113s ] Loaded metadata, 10000000 attr's found
[ 1.113s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.117s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.119s ] Loaded 10000 spacev10m queries
[ 1.135s ] Loaded ground truth, gt_size: 10
[ 1.135s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.855s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 105.469s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 1781760 (10) 3647719 (10) 3082748 (10) 2721656 (10) 6309057 (10) 1751249 (10) 1858226 (10) 4932580 (10) 6350337 (10) 8662145 (10) 
     dis: 	5329.049 5521.637 6519.620 6534.335 6627.021 7959.359 8219.131 8562.139 8903.426 9176.939 
query 1 nn's (10, 10): 4465136 (10) 3545414 (10) 9149269 (10) 2769394 (10) 1286599 (10) 3255981 (10) 5321556 (10) 6615436 (10) 7393346 (10) 6371568 (10) 
     dis: 	7626.125 7656.533 9182.754 9206.575 9447.030 9671.066 9964.785 10105.756 10387.763 10466.273 
query 2 nn's (10, 10): 8005273 (10) 5236859 (10) 6606573 (10) 1881509 (10) 2884416 (10) 1233143 (10) 7804752 (10) 5430287 (10) 2353418 (10) 349510 (10) 
     dis: 	4005.862 7407.258 8262.561 8801.643 8857.741 9278.067 9688.465 11001.598 11004.789 11377.294 
query 3 nn's (10, 10): 7481558 (10) 9732223 (10) 4150154 (10) 2360519 (10) 1370098 (10) 4153275 (10) 9793596 (10) 920948 (10) 3750288 (10) 4774185 (10) 
     dis: 	7873.033 8686.969 8712.388 9903.758 9939.917 10013.597 10574.636 10603.974 10847.521 10938.395 
query 4 nn's (10, 10): 4352168 (10) 4390138 (10) 3849231 (10) 9801790 (10) 2279438 (10) 57144 (10) 9044829 (10) 3073679 (10) 8608979 (10) 7511825 (10) 
     dis: 	5324.612 5889.110 6069.313 6436.075 6451.869 6537.355 6556.619 6563.512 6584.656 6627.546 
[ 105.469s ] *** Query time: 17.254
qps: 579.590
 *** ivfpq recall 
ivfpq get 71522 postive res from 100000 results, recall@10:0.715
recall dist(10% per bucket): 0.006 0.014 0.026 0.043 0.056 0.076 0.101 0.133 0.196 0.242 0.107 
finished ivfpq index examples
[ 105.473s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_10_50 20 100"
	User time (seconds): 102.69
	System time (seconds): 2.93
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:45.65
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1272740
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 635424
	Voluntary context switches: 1
	Involuntary context switches: 189
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 16:08
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_19_50
nprobe: 20
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.979s ] Loaded metadata, 10000000 attr's found
[ 0.979s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.982s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.984s ] Loaded 10000 spacev10m queries
[ 0.992s ] Loaded ground truth, gt_size: 10
[ 0.992s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.405s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 85.738s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 9053999 (19) 2807977 (19) 3057373 (19) 3622412 (19) 5270820 (19) 9131976 (19) 8843034 (19) 2271622 (19) 7866226 (19) 804201 (19) 
     dis: 	8581.976 8626.439 8877.213 9383.824 9477.137 10015.150 11030.062 11180.898 11593.985 12454.752 
query 1 nn's (19, 19): 3843020 (19) 3255981 (19) 307231 (19) 1386102 (19) 1762221 (19) 6955583 (19) 1617045 (19) 8561106 (19) 7071180 (19) 6501584 (19) 
     dis: 	8588.030 9671.066 11301.396 11369.698 12374.411 12580.571 12737.583 13014.853 13729.511 13905.713 
query 2 nn's (19, 19): 5236859 (19) 6688464 (19) 1386408 (19) 3641059 (19) 349510 (19) 2506689 (19) 974463 (19) 8053598 (19) 3709896 (19) 8646218 (19) 
     dis: 	7407.258 8953.350 10925.584 11296.001 11377.294 11656.019 11881.987 11885.845 11974.082 12447.349 
query 3 nn's (19, 19): 9100185 (19) 445803 (19) 1128854 (19) 2101314 (19) 2338828 (19) 2229532 (19) 5113097 (19) 6405071 (19) 5958483 (19) 6977956 (19) 
     dis: 	10302.910 12508.024 13476.877 13580.026 13955.418 14010.086 14317.342 15091.169 15123.444 15205.874 
query 4 nn's (19, 19): 5688541 (19) 7510113 (19) 9827236 (19) 5752111 (19) 2411654 (19) 7886876 (19) 8807449 (19) 6309716 (19) 2472716 (19) 5925120 (19) 
     dis: 	6812.826 7386.605 7702.229 7827.914 7901.274 8013.885 8054.319 8066.175 8086.692 8149.650 
[ 85.738s ] *** Query time: 12.388
qps: 807.229
 *** ivfpq recall 
ivfpq get 59973 postive res from 100000 results, recall@10:0.600
recall dist(10% per bucket): 0.014 0.037 0.058 0.081 0.098 0.110 0.128 0.138 0.151 0.136 0.050 
finished ivfpq index examples
[ 85.739s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_19_50 20 100"
	User time (seconds): 84.56
	System time (seconds): 1.33
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:25.90
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1272740
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 402783
	Voluntary context switches: 1
	Involuntary context switches: 179
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:37
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_20_50
nprobe: 20
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
[ 1.070s ] Loaded metadata, 10000000 attr's found
[ 1.070s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.072s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.075s ] Loaded 10000 spacev10m queries
[ 1.087s ] Loaded ground truth, gt_size: 10
[ 1.087s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.733s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 87.361s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 2941659 (20) 5953758 (20) 9828477 (20) 1448816 (20) 3058485 (20) 4507621 (20) 9878359 (20) 6518957 (20) 5637254 (20) 3825555 (20) 
     dis: 	13552.487 13578.877 16546.561 17834.578 18593.682 19337.305 19926.758 20288.395 20647.604 21530.740 
query 1 nn's (20, 20): 8679029 (20) 8225741 (20) 7037463 (20) 7493037 (20) 3682269 (20) 6496251 (20) 5720165 (20) 6431556 (20) 634227 (20) 7999722 (20) 
     dis: 	14340.291 15553.793 16850.842 18574.250 19406.875 19710.918 19835.107 20176.934 21132.398 22892.480 
query 2 nn's (20, 20): 5699789 (20) 4164780 (20) 4324099 (20) 2464867 (20) 6949697 (20) 253512 (20) 3909916 (20) 3588271 (20) 9348289 (20) 6619888 (20) 
     dis: 	14247.747 15727.768 16010.309 16198.496 16599.820 17077.793 17474.516 17521.281 18065.711 18142.035 
query 3 nn's (20, 20): 7592351 (20) 6586818 (20) 9373670 (20) 6657113 (20) 4805236 (20) 6177913 (20) 8003410 (20) 7634034 (20) 2037990 (20) 5245520 (20) 
     dis: 	16139.842 16566.199 17074.000 17556.766 17755.449 18237.178 18736.361 18867.143 18936.172 19063.920 
query 4 nn's (20, 20): 2911329 (20) 4459035 (20) 7167456 (20) 3544619 (20) 1014247 (20) 4803660 (20) 9204759 (20) 7539365 (20) 6796985 (20) 5776504 (20) 
     dis: 	8227.082 8398.871 8999.100 9466.855 9539.351 9571.415 9631.936 9709.230 9713.307 9736.902 
[ 87.361s ] *** Query time: 12.321
qps: 811.627
 *** ivfpq recall 
ivfpq get 34372 postive res from 100000 results, recall@10:0.344
recall dist(10% per bucket): 0.071 0.132 0.164 0.174 0.156 0.132 0.083 0.051 0.027 0.010 0.002 
finished ivfpq index examples
[ 87.362s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_20_50 20 100"
	User time (seconds): 86.40
	System time (seconds): 1.08
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:27.49
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1271640
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 4
	Minor (reclaiming a frame) page faults: 332225
	Voluntary context switches: 14
	Involuntary context switches: 115
	Swaps: 0
	File system inputs: 24
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
