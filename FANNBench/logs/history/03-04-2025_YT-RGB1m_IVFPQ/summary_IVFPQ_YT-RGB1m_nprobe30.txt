Start time: 04:22
====================
START: running TEST_IVFPQ, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/views.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_6_random.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_6_random_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512
nprobe: 30
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/views.json
[ 0.021s ] Loaded metadata, 1000000 attr's found
[ 0.021s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.045s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.046s ] Loaded 10000 YT-RGB1m queries
[ 0.053s ] Loaded ground truth, gt_size: 10
[ 0.053s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.873s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.239
[ 159.860s ] Query results (vector ids, then distances):
query 0 nn's (0, 5170): 8737 (2990) 56754 (4735) 40662 (4941) 10946 (2000) 58247 (2970) 29806 (4272) 46059 (2500) 18102 (4798) 34920 (2294) 1068 (2470) 
     dis: 	81.137 82.031 83.700 84.931 87.280 88.230 89.393 90.194 92.785 93.370 
query 1 nn's (3955, 174514): 1885 (4143) 24438 (9137) 4885 (9071) 13295 (29530) 42216 (11784) 33081 (107523) 24346 (20181) 32982 (8394) 12844 (151428) 32997 (11915) 
     dis: 	65.115 66.915 76.702 77.070 78.211 81.627 87.966 88.949 89.802 90.061 
query 2 nn's (1944, 17146): 56481 (11892) 1434 (5015) 64078 (15539) 36011 (14206) 31722 (3031) 3773 (5177) 34672 (7326) 6091 (6930) 31547 (7877) 29024 (8704) 
     dis: 	222.152 228.178 236.007 239.733 243.332 244.492 249.885 250.689 251.806 253.530 
query 3 nn's (2261, 23468): 6869 (14471) 44743 (10946) 49998 (4199) 26742 (19634) 22439 (7106) 41252 (8115) 36771 (8645) 50334 (3418) 60280 (7643) 22985 (4894) 
     dis: 	109.474 111.799 118.184 121.978 122.419 123.465 123.829 123.868 124.201 124.548 
query 4 nn's (1683, 13273): 18102 (4798) 43145 (6683) 47829 (6181) 15327 (7835) 39637 (3424) 3312 (4633) 62809 (2688) 61289 (11199) 5801 (9848) 13596 (3238) 
     dis: 	183.427 183.761 183.992 184.672 185.518 185.959 186.124 186.206 186.654 186.862 
[ 159.860s ] *** Query time: 151.095
qps: 66.184
 *** ivfpq recall 
ivfpq get 90674 postive res from 100000 results, recall@10:0.907
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.002 0.007 0.014 0.051 0.148 0.376 0.402 
finished ivfpq index examples
[ 159.861s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/views.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_6_random.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_6_random_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512 30 1024"
	User time (seconds): 158.44
	System time (seconds): 1.59
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:40.03
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2632612
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 657045
	Voluntary context switches: 1
	Involuntary context switches: 207
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:52
====================
START: running TEST_IVFPQ, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/views.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_10_random.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_10_random_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512
nprobe: 30
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/views.json
[ 0.021s ] Loaded metadata, 1000000 attr's found
[ 0.021s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.046s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.048s ] Loaded 10000 YT-RGB1m queries
[ 0.055s ] Loaded ground truth, gt_size: 10
[ 0.055s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.903s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.007
[ 59.621s ] Query results (vector ids, then distances):
query 0 nn's (2495, 3574): 8737 (2990) 58247 (2970) 46059 (2500) 46218 (3531) 26827 (3428) 39548 (2869) 64213 (3378) 51128 (2633) 47581 (3360) 1445 (2695) 
     dis: 	81.137 87.280 89.393 94.807 96.288 98.457 99.321 100.438 100.742 101.886 
query 1 nn's (2727, 3930): 46095 (3182) 14342 (3758) 61970 (3096) 41547 (3620) 51086 (2988) 7513 (3024) 24277 (3806) 19811 (3727) 47348 (3601) 36818 (2887) 
     dis: 	89.785 91.898 103.674 104.724 110.965 112.796 114.513 114.935 116.473 118.544 
query 2 nn's (1051, 1671): 8128 (1598) 44348 (1569) 25730 (1129) 60698 (1459) 21222 (1345) 63646 (1602) 47339 (1493) 41055 (1058) 43707 (1421) 51988 (1591) 
     dis: 	229.434 238.990 259.590 262.889 263.221 268.223 268.398 269.826 270.263 270.728 
query 3 nn's (3715, 5527): 49998 (4199) 22985 (4894) 63801 (3746) 52016 (4107) 24830 (3970) 58608 (4619) 43769 (5109) 31078 (4075) 40662 (4941) 57324 (4612) 
     dis: 	118.184 124.548 133.654 144.462 149.607 151.973 153.022 155.397 157.727 158.898 
query 4 nn's (3215, 4703): 39637 (3424) 3312 (4633) 13596 (3238) 55620 (4317) 30766 (3406) 48077 (3589) 25943 (4593) 38608 (3269) 17000 (4209) 42260 (3758) 
     dis: 	185.518 185.959 186.862 188.223 188.539 188.876 189.864 191.160 191.930 192.692 
[ 59.621s ] *** Query time: 50.712
qps: 197.193
 *** ivfpq recall 
ivfpq get 84008 postive res from 100000 results, recall@10:0.840
recall dist(10% per bucket): 0.001 0.001 0.001 0.005 0.011 0.026 0.062 0.119 0.212 0.316 0.247 
finished ivfpq index examples
[ 59.622s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/views.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_10_random.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_10_random_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512 30 1024"
	User time (seconds): 58.31
	System time (seconds): 1.49
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:59.80
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2633636
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 657038
	Voluntary context switches: 1
	Involuntary context switches: 24
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:04
====================
START: running TEST_IVFPQ, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/views.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_19_random.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_19_random_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512
nprobe: 30
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/views.json
[ 0.026s ] Loaded metadata, 1000000 attr's found
[ 0.026s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.049s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.051s ] Loaded 10000 YT-RGB1m queries
[ 0.058s ] Loaded ground truth, gt_size: 10
[ 0.058s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.810s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 57.098s ] Query results (vector ids, then distances):
query 0 nn's (8115, 8518): 63058 (8421) 8879 (8499) 60790 (8233) 35798 (8398) 37269 (8148) 33459 (8150) 49023 (8229) 59181 (8134) 4236 (8377) 33450 (8130) 
     dis: 	103.143 105.226 110.773 113.860 114.259 115.511 116.181 120.318 121.445 123.013 
query 1 nn's (2096, 2169): 52617 (2139) 29980 (2143) 2518 (2159) 40016 (2112) 6376 (2098) 27740 (2111) 1018 (2102) 15274 (2125) 12818 (2106) 2314 (2150) 
     dis: 	131.911 132.919 135.058 136.444 139.262 139.627 141.645 142.132 142.633 144.124 
query 2 nn's (4750, 4948): 18102 (4798) 13649 (4753) 40662 (4941) 51136 (4833) 10337 (4924) 20266 (4774) 16 (4767) 46273 (4880) 16327 (4876) 52077 (4907) 
     dis: 	267.584 267.819 269.040 278.401 290.919 291.889 292.155 294.713 294.863 295.360 
query 3 nn's (325857, 560039): 57334 (381530) 35280 (455729) 43219 (361857) 49734 (333287) 58307 (386774) 60085 (338950) 20516 (389429) 5370 (539085) 10735 (513512) 39394 (445205) 
     dis: 	107.585 121.597 130.539 134.062 136.253 151.645 159.957 163.463 164.136 168.696 
query 4 nn's (6364, 6652): 62569 (6420) 46238 (6607) 34726 (6497) 21875 (6559) 11110 (6492) 40784 (6581) 12388 (6636) 42582 (6601) 27083 (6451) 31363 (6389) 
     dis: 	189.363 189.601 195.314 197.851 198.323 199.568 200.536 201.412 204.699 205.613 
[ 57.098s ] *** Query time: 48.327
qps: 206.925
 *** ivfpq recall 
ivfpq get 64673 postive res from 100000 results, recall@10:0.647
recall dist(10% per bucket): 0.003 0.006 0.018 0.049 0.090 0.156 0.179 0.185 0.143 0.082 0.088 
finished ivfpq index examples
[ 57.099s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/views.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_19_random.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_19_random_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512 30 1024"
	User time (seconds): 55.85
	System time (seconds): 1.40
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:57.26
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2632160
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 657042
	Voluntary context switches: 2
	Involuntary context switches: 55
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:14
====================
START: running TEST_IVFPQ, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/views.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_20_random.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_20_random_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512
nprobe: 30
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/views.json
[ 0.021s ] Loaded metadata, 1000000 attr's found
[ 0.021s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.044s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.046s ] Loaded 10000 YT-RGB1m queries
[ 0.053s ] Loaded ground truth, gt_size: 10
[ 0.053s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.847s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 62.161s ] Query results (vector ids, then distances):
query 0 nn's (0, 0): 11402 (0) 12998 (0) 19573 (0) 23068 (0) 26877 (0) 26892 (0) 38351 (0) 59587 (0) 16943 (0) 17870 (0) 
     dis: 	98.161 98.161 98.161 98.161 98.161 98.161 98.161 98.161 102.956 102.956 
query 1 nn's (5817, 5841): 52085 (5828) 51812 (5841) 14548 (5835) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	172.946 175.322 179.967 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (235239, 243122): 62035 (240920) 11077 (240019) 22931 (235387) 353 (241467) 46739 (240830) 25436 (242185) 24696 (239780) 17929 (236308) 17534 (241633) -1 (0) 
     dis: 	304.826 308.771 309.713 316.135 323.048 341.313 354.250 365.031 621.186 340282346638528859811704183484516925440.000 
query 3 nn's (44485, 44960): 7589 (44550) 33927 (44707) 49873 (44735) 1876 (44874) 12040 (44591) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	193.516 198.091 198.920 242.954 286.021 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1395, 1401): 50741 (1395) 44196 (1397) 531 (1397) 50760 (1395) 7621 (1399) 25585 (1398) 20114 (1396) 38970 (1401) 125 (1395) -1 (0) 
     dis: 	199.133 203.355 208.822 213.353 239.780 262.840 266.963 283.934 288.718 340282346638528859811704183484516925440.000 
[ 62.161s ] *** Query time: 53.239
qps: 187.831
 *** ivfpq recall 
ivfpq get 37687 postive res from 100000 results, recall@10:0.377
recall dist(10% per bucket): 0.034 0.106 0.180 0.210 0.178 0.123 0.056 0.029 0.010 0.007 0.066 
finished ivfpq index examples
[ 62.162s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/views.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/qrangereal_label_20_random.json /mnt/data/mocheng/dataset/youtube1m/label/real_label/sif_gt_real_label_20_random_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_real_label_512 30 1024"
	User time (seconds): 60.86
	System time (seconds): 1.52
	Percent of CPU this job got: 100%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:02.38
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2633636
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 668528
	Voluntary context switches: 1
	Involuntary context switches: 146
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
