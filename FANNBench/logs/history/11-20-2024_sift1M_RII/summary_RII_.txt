Start time: 01:29
error wrong argument
Start time: 06:07
N: 1000000
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
train file: /mnt/data/mocheng/dataset/sift/sift_learn.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/attr_sel_1_8_random.json
query range file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/qrangesel_1_8_random.json
ground truth file: /mnt/data/mocheng/dataset/sift/sel_1_8_random/sif_gt_10.json
partition size M: 4
K: 10
index file location: /mnt/data/mocheng/dataset/sift/rii/index/index_rii_4_sel_1_8_random
get dataset size: 1000000  d: 128
get query szie: 10000
get train szie: 100000
_N: 1000000  N: 1000000
get range dim: 2.0
groundtruth top K:  10.0
ngt= 100000  nq= 10000  k= 10
M: 4, Ks: 256, metric : <class 'numpy.uint8'>, code_dtype: l2
iter: 20, seed: 123
Training the subspace: 0 / 4
Training the subspace: 1 / 4
Training the subspace: 2 / 4
Training the subspace: 3 / 4
SIMD support: avx512
Encoding the subspace: 0 / 4
Encoding the subspace: 1 / 4
Encoding the subspace: 2 / 4
Encoding the subspace: 3 / 4
1000000 new vectors are added.
Total number of codes is 1000000
The number of vectors used for training of coarse centers: 100000
Start to run PQk-means
Iteration start: 0 / 5
find_nn finished. Error: 37882
find_nn_time,39
Caution. No codes are assigned to 565-th centers.
Caution. No codes are assigned to 729-th centers.
Caution. No codes are assigned to 794-th centers.
Caution. No codes are assigned to 905-th centers.
Caution. No codes are assigned to 981-th centers.
find_nn+update_center_time,46
Iteration start: 1 / 5
find_nn finished. Error: 35371.7
find_nn_time,17
Caution. No codes are assigned to 565-th centers.
Caution. No codes are assigned to 729-th centers.
Caution. No codes are assigned to 794-th centers.
Caution. No codes are assigned to 905-th centers.
Caution. No codes are assigned to 981-th centers.
find_nn+update_center_time,24
Iteration start: 2 / 5
find_nn finished. Error: 35048.8
find_nn_time,17
Caution. No codes are assigned to 565-th centers.
Caution. No codes are assigned to 729-th centers.
Caution. No codes are assigned to 794-th centers.
Caution. No codes are assigned to 905-th centers.
Caution. No codes are assigned to 981-th centers.
find_nn+update_center_time,24
Iteration start: 3 / 5
find_nn finished. Error: 34954.5
find_nn_time,16
Caution. No codes are assigned to 565-th centers.
Caution. No codes are assigned to 729-th centers.
Caution. No codes are assigned to 794-th centers.
Caution. No codes are assigned to 905-th centers.
Caution. No codes are assigned to 981-th centers.
find_nn+update_center_time,23
Iteration start: 4 / 5
find_nn finished. Error: 34924.2
find_nn_time,19
find_nn+update_center_time,19
Start to update posting lists
===== Threshold selection ====
ivf is faster than linear scan even if |S|<=128. This is a bit weird. Anyway let's set threshold as 128
ivf is faster than linear scan even if |S|<=128. This is a bit weird. Anyway let's set threshold as 128
ivf is faster than linear scan even if |S|<=128. This is a bit weird. Anyway let's set threshold as 128
ivf is faster than linear scan even if |S|<=128. This is a bit weird. Anyway let's set threshold as 128
ivf is faster than linear scan even if |S|<=128. This is a bit weird. Anyway let's set threshold as 128
L: [1000, 2000, 4000, 8000, 16000]
threshold: [128, 128, 128, 128, 128]
polyfit coeff: [-6.11495661e-18  1.28000000e+02]
resultant func:  
-6.115e-18 x + 128
train time:  9.135343551635742  add time:  3.827951192855835  construction time:  12.963294744491577
index save to  /mnt/data/mocheng/dataset/sift/rii/index/index_rii_4_sel_1_8_random
construction done
