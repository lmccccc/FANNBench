Start time: 00:47
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100
nprobe: 500
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.719s ] Loaded metadata, 10000000 attr's found
[ 0.719s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.722s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.723s ] Loaded 10000 spacev10m queries
[ 0.793s ] Loaded ground truth, gt_size: 100
[ 0.793s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 5.008s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 390.226s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 4661794 (6) 1352077 (6) 1300400 (6) 2436347 (6) 425302 (6) 606211 (6) 1781760 (6) 3647719 (6) 9694965 (6) 8021837 (6) 8207046 (6) 6583311 (6) 1714233 (6) 2721656 (6) 2204643 (6) 6309057 (6) 38473 (6) 5072935 (6) 2382485 (6) 4779084 (6) 3881211 (6) 2116152 (6) 8807530 (6) 2710882 (6) 4617714 (6) 8538301 (6) 3873794 (6) 613770 (6) 5275548 (6) 7007393 (6) 1288832 (6) 106800 (6) 890298 (6) 4022185 (6) 1751249 (6) 8135809 (6) 4915045 (6) 244510 (6) 521477 (6) 2646514 (6) 511283 (6) 8242233 (6) 672964 (6) 4685796 (6) 9818783 (6) 7249395 (6) 8846971 (6) 9600306 (6) 6138359 (6) 3828638 (6) 9053999 (6) 4470364 (6) 2605318 (6) 5950387 (6) 6478048 (6) 6616924 (6) 3057373 (6) 2807977 (6) 608392 (6) 9901604 (6) 1354982 (6) 7983463 (6) 9957153 (6) 3249603 (6) 5236967 (6) 9234384 (6) 9347328 (6) 8662145 (6) 4519081 (6) 7108130 (6) 8279789 (6) 9169598 (6) 7330716 (6) 3611695 (6) 5320284 (6) 6972939 (6) 488103 (6) 7826722 (6) 3651927 (6) 8656797 (6) 3636367 (6) 6303532 (6) 9715655 (6) 6781400 (6) 399999 (6) 2578991 (6) 694286 (6) 5724721 (6) 5270820 (6) 7887947 (6) 5475688 (6) 6896772 (6) 4104937 (6) 6554307 (6) 6290762 (6) 726682 (6) 7151603 (6) 3993234 (6) 5839410 (6) 7592167 (6) 
     dis: 	2984.658 3268.221 3451.792 5087.593 5217.498 5289.615 5431.436 5457.437 5935.341 6236.472 6248.709 6319.569 6417.146 6593.686 6629.437 6652.851 7033.922 7056.762 7063.430 7156.920 7203.378 7277.672 7416.359 7465.087 7497.100 7562.222 7645.717 7702.021 7706.918 7737.246 7986.281 8017.410 8019.774 8054.457 8086.774 8165.397 8221.855 8238.786 8258.082 8305.614 8325.738 8414.707 8453.121 8463.344 8485.863 8495.926 8507.973 8519.738 8530.008 8559.798 8582.517 8611.803 8620.377 8745.193 8773.149 8824.070 8835.171 8857.557 8872.404 8877.469 8931.254 8935.225 8957.626 9047.767 9058.418 9082.562 9104.535 9110.148 9157.148 9286.973 9295.413 9300.460 9334.041 9416.246 9420.620 9456.539 9460.742 9483.433 9486.454 9499.611 9511.516 9520.660 9529.710 9545.341 9574.215 9579.595 9586.519 9591.684 9634.572 9634.979 9644.523 9670.004 9671.785 9688.902 9697.652 9706.916 9726.509 9757.613 9807.203 9809.655 
query 1 nn's (6, 6): 3024255 (6) 4465136 (6) 6693881 (6) 1087257 (6) 547651 (6) 5778168 (6) 1739093 (6) 128447 (6) 913237 (6) 2201796 (6) 458294 (6) 4731052 (6) 2848947 (6) 5140912 (6) 8268659 (6) 5312590 (6) 2600668 (6) 3756027 (6) 8084904 (6) 5453229 (6) 1262717 (6) 9482235 (6) 2915146 (6) 1674348 (6) 7070658 (6) 4023729 (6) 413466 (6) 7957281 (6) 3467889 (6) 765304 (6) 4936049 (6) 7995495 (6) 9943863 (6) 9750308 (6) 2400979 (6) 8382701 (6) 9255837 (6) 8598995 (6) 5183877 (6) 2054287 (6) 2067210 (6) 6872221 (6) 2030638 (6) 5642421 (6) 2677560 (6) 4375499 (6) 5833204 (6) 6528340 (6) 7714223 (6) 9265027 (6) 7796940 (6) 2208346 (6) 5888778 (6) 8377057 (6) 1417507 (6) 6218290 (6) 7998901 (6) 3106662 (6) 3213153 (6) 497310 (6) 7898285 (6) 3579661 (6) 1580619 (6) 7983026 (6) 9793572 (6) 1873620 (6) 6270422 (6) 7208440 (6) 7666189 (6) 6565182 (6) 5553093 (6) 3798515 (6) 540705 (6) 2775410 (6) 3683874 (6) 6716625 (6) 5894271 (6) 7869623 (6) 4936167 (6) 9319596 (6) 3367543 (6) 5137564 (6) 4090413 (6) 6825634 (6) 9542350 (6) 5210631 (6) 1532818 (6) 8733990 (6) 2781736 (6) 5549017 (6) 8187358 (6) 7684675 (6) 8219055 (6) 3253492 (6) 9619526 (6) 307231 (6) 5221616 (6) 2233630 (6) 9844485 (6) 3375782 (6) 
     dis: 	6379.874 7832.273 8301.762 8504.258 9004.402 9105.973 9150.039 9356.089 9373.139 9564.128 9574.802 9578.250 9668.452 9693.582 9813.656 9842.984 9849.514 10015.396 10035.468 10044.995 10060.453 10064.884 10095.851 10101.637 10131.922 10133.922 10191.559 10204.871 10206.644 10210.698 10231.051 10242.291 10330.024 10333.516 10359.908 10408.098 10441.922 10484.331 10513.588 10524.988 10550.848 10572.423 10580.958 10691.302 10692.555 10694.537 10714.562 10733.514 10735.300 10796.346 10802.645 10830.205 10855.590 10901.291 10981.347 10982.063 10988.488 11009.377 11009.460 11018.956 11020.820 11084.883 11107.436 11132.148 11135.524 11137.979 11149.970 11151.550 11183.873 11196.185 11205.528 11212.209 11222.576 11223.165 11261.956 11266.129 11319.158 11320.721 11341.545 11344.131 11350.776 11359.807 11365.162 11398.040 11418.918 11432.485 11436.645 11456.596 11462.670 11487.570 11487.996 11490.506 11498.126 11531.050 11535.861 11556.041 11561.156 11565.191 11568.914 11580.368 
query 2 nn's (6, 6): 4574760 (6) 5189301 (6) 9191130 (6) 5932138 (6) 2966676 (6) 2096002 (6) 9602743 (6) 9746650 (6) 2493779 (6) 7197257 (6) 4710102 (6) 525365 (6) 700735 (6) 9561351 (6) 3123570 (6) 6606573 (6) 1881509 (6) 190238 (6) 1816933 (6) 1415377 (6) 9485250 (6) 6555137 (6) 8077765 (6) 3361974 (6) 559883 (6) 1563468 (6) 7501806 (6) 8739701 (6) 5745884 (6) 7804752 (6) 4452321 (6) 7017176 (6) 4195631 (6) 6697500 (6) 4360960 (6) 7815621 (6) 1063314 (6) 6822953 (6) 7126935 (6) 7335841 (6) 8558486 (6) 801867 (6) 3405939 (6) 9743895 (6) 134852 (6) 3399987 (6) 7660022 (6) 3200028 (6) 5263567 (6) 780031 (6) 6936789 (6) 5742825 (6) 6665934 (6) 7287401 (6) 6371127 (6) 4517312 (6) 6489161 (6) 7060335 (6) 192071 (6) 6794035 (6) 1386408 (6) 1044870 (6) 1129169 (6) 8707110 (6) 8900616 (6) 3785496 (6) 267333 (6) 7118637 (6) 2631506 (6) 1633241 (6) 8719744 (6) 1349042 (6) 3967833 (6) 494920 (6) 8672644 (6) 9177119 (6) 2850979 (6) 1878266 (6) 5597353 (6) 4001654 (6) 1064624 (6) 1978808 (6) 5430287 (6) 2168228 (6) 1358363 (6) 9527999 (6) 7276798 (6) 1845312 (6) 3436916 (6) 2353418 (6) 3322631 (6) 5468063 (6) 2650195 (6) 6295489 (6) 5217876 (6) 6561981 (6) 5826070 (6) 8060848 (6) 9957421 (6) 4549888 (6) 
     dis: 	3037.224 3383.687 6267.928 6957.796 7162.279 7653.282 8058.683 8065.928 8092.783 8095.444 8146.718 8263.234 8276.213 8304.261 8448.900 8526.036 8710.794 8751.557 8765.941 8871.452 8921.690 9037.938 9151.803 9248.015 9309.044 9465.871 9663.436 9700.848 9709.979 9754.347 9824.911 9826.381 9844.943 9902.561 9934.581 9970.456 9976.283 9976.818 10000.562 10043.844 10046.443 10084.396 10105.677 10141.879 10261.034 10272.257 10280.343 10305.092 10312.901 10359.082 10376.779 10395.355 10429.889 10431.211 10449.256 10462.508 10539.983 10548.176 10666.045 10667.146 10702.357 10717.777 10766.950 10794.605 10807.475 10807.533 10842.400 10846.146 10881.408 10882.132 10883.082 10925.260 10936.475 10996.956 10997.800 11003.252 11010.534 11011.527 11011.813 11021.605 11027.307 11040.469 11055.530 11059.477 11084.078 11097.531 11101.303 11103.541 11110.503 11118.324 11121.870 11138.511 11151.501 11155.983 11169.767 11183.772 11196.005 11198.382 11211.731 11233.534 
query 3 nn's (6, 6): 7481558 (6) 1208824 (6) 1153720 (6) 9922446 (6) 3092850 (6) 1681561 (6) 2871407 (6) 8906949 (6) 1866926 (6) 7371232 (6) 4371036 (6) 3092361 (6) 9455216 (6) 6638511 (6) 3489463 (6) 6696694 (6) 8364431 (6) 1986111 (6) 3188407 (6) 2272653 (6) 220595 (6) 6027466 (6) 7775637 (6) 8818246 (6) 7909680 (6) 9398930 (6) 1252765 (6) 4889443 (6) 5579814 (6) 8232477 (6) 6542977 (6) 8584054 (6) 4712751 (6) 9232458 (6) 9619884 (6) 9793596 (6) 4474761 (6) 3353499 (6) 7415071 (6) 580826 (6) 4216882 (6) 2595121 (6) 514827 (6) 3626273 (6) 6849775 (6) 484745 (6) 5785595 (6) 3085720 (6) 6546803 (6) 6334064 (6) 8821621 (6) 6684948 (6) 5124721 (6) 7010252 (6) 2958818 (6) 1353097 (6) 5566014 (6) 8159578 (6) 7726743 (6) 1095751 (6) 398589 (6) 2919205 (6) 383549 (6) 3425624 (6) 7082379 (6) 5119260 (6) 3483488 (6) 9740574 (6) 7256503 (6) 4183705 (6) 4653543 (6) 1605226 (6) 1752435 (6) 3517824 (6) 1430920 (6) 823633 (6) 7136455 (6) 5368803 (6) 3922636 (6) 8669768 (6) 5615929 (6) 108033 (6) 3350710 (6) 2348869 (6) 8145731 (6) 8182930 (6) 188678 (6) 9698504 (6) 4149081 (6) 9469428 (6) 3071605 (6) 6689609 (6) 2269546 (6) 9339392 (6) 2018818 (6) 382902 (6) 7557678 (6) 6884602 (6) 4849202 (6) 662720 (6) 
     dis: 	7708.729 7734.653 8343.044 8379.474 8417.971 8437.070 8743.284 8931.419 9213.961 9248.313 9416.685 9418.953 9468.189 9663.204 9749.266 9879.809 9903.666 9955.667 9963.515 9982.427 9985.955 9992.361 10128.719 10132.153 10167.366 10182.354 10203.097 10256.343 10258.041 10278.982 10387.153 10461.397 10468.141 10486.738 10487.235 10579.027 10583.493 10599.340 10707.939 10721.012 10790.293 10791.352 10802.643 10817.467 10851.739 10853.227 10871.354 10938.459 11012.520 11037.910 11038.555 11077.693 11108.404 11135.498 11137.684 11195.715 11229.310 11250.131 11257.046 11270.502 11282.333 11287.721 11322.865 11323.872 11389.697 11401.229 11402.148 11405.461 11411.354 11414.828 11437.974 11454.059 11490.479 11505.859 11516.029 11520.618 11581.289 11589.676 11615.467 11624.347 11636.772 11639.113 11639.569 11650.939 11672.362 11707.943 11721.257 11730.152 11747.998 11781.737 11783.053 11787.401 11798.932 11813.613 11827.555 11831.090 11846.004 11883.125 11883.956 11926.983 
query 4 nn's (6, 6): 8316529 (6) 5624462 (6) 3987492 (6) 1706143 (6) 9534901 (6) 9970746 (6) 5744224 (6) 9323555 (6) 9211260 (6) 4390138 (6) 6480066 (6) 2172340 (6) 73290 (6) 9833382 (6) 8827038 (6) 6527555 (6) 1182472 (6) 3097455 (6) 1587943 (6) 6395393 (6) 2320125 (6) 6782257 (6) 9044829 (6) 5012986 (6) 3740241 (6) 942827 (6) 57144 (6) 3693862 (6) 6906799 (6) 5562283 (6) 5783656 (6) 3436988 (6) 7159963 (6) 4738992 (6) 915880 (6) 6091565 (6) 8608979 (6) 1233423 (6) 3264396 (6) 4607867 (6) 3073679 (6) 9765986 (6) 9374623 (6) 1171695 (6) 523134 (6) 3598596 (6) 3646712 (6) 6634262 (6) 8873679 (6) 6581013 (6) 3655068 (6) 9164737 (6) 1504549 (6) 1030896 (6) 8442744 (6) 3421968 (6) 8774147 (6) 7511825 (6) 4942478 (6) 6789739 (6) 5685630 (6) 8359241 (6) 8855135 (6) 9519711 (6) 349859 (6) 4786845 (6) 5506147 (6) 3531751 (6) 9436869 (6) 1066421 (6) 980351 (6) 6685392 (6) 259750 (6) 4019507 (6) 1995354 (6) 8701864 (6) 4059273 (6) 8342661 (6) 8360636 (6) 5006797 (6) 3795738 (6) 9019284 (6) 703166 (6) 9688429 (6) 3032989 (6) 1410118 (6) 9977617 (6) 4491189 (6) 6331457 (6) 8641215 (6) 8212769 (6) 2266290 (6) 1973506 (6) 3934821 (6) 3299088 (6) 5350870 (6) 1111927 (6) 569140 (6) 1902982 (6) 1555419 (6) 
     dis: 	2200.067 3592.018 3754.258 4565.575 5128.794 5232.411 5427.193 5444.871 5811.854 5974.076 6247.875 6268.124 6270.180 6271.308 6280.026 6296.200 6377.544 6382.278 6389.488 6392.427 6409.105 6420.116 6425.558 6432.818 6436.624 6461.586 6473.911 6475.289 6499.683 6509.462 6517.282 6519.250 6531.316 6544.937 6564.545 6602.386 6603.944 6619.971 6626.527 6634.590 6645.483 6646.298 6652.190 6656.642 6701.781 6704.117 6713.208 6716.867 6729.101 6731.655 6733.690 6735.074 6768.218 6772.979 6773.823 6780.017 6782.499 6785.020 6812.438 6818.299 6839.600 6850.580 6851.965 6857.095 6867.738 6872.748 6875.381 6875.700 6883.197 6885.531 6885.774 6891.021 6891.506 6904.375 6910.196 6917.378 6923.764 6927.873 6937.799 6939.492 6945.017 6955.537 6966.847 6969.197 6976.106 6997.256 7004.524 7006.784 7008.524 7011.688 7019.051 7021.719 7024.929 7026.122 7055.524 7062.428 7067.533 7074.918 7081.535 7089.439 
[ 390.227s ] *** Query time: 325.734
qps: 30.700
 *** ivfpq recall 
ivfpq get 949462 postive res from 1000000 results, recall@100:0.949
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.003 0.009 0.026 0.093 0.803 0.065 
finished ivfpq index examples
[ 390.264s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100 500 100"
	User time (seconds): 384.59
	System time (seconds): 4.07
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:30.41
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2409380
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1223800
	Voluntary context switches: 4499
	Involuntary context switches: 974
	Swaps: 0
	File system inputs: 327032
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:22
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100
nprobe: 500
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.707s ] Loaded metadata, 10000000 attr's found
[ 0.707s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.709s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.710s ] Loaded 10000 spacev10m queries
[ 0.779s ] Loaded ground truth, gt_size: 100
[ 0.779s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.491s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 229.967s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4853416 (10) 7099403 (10) 1536208 (10) 1360571 (10) 7305168 (10) 3454073 (10) 3676917 (10) 1858226 (10) 4932580 (10) 1947126 (10) 1185721 (10) 8725926 (10) 2716677 (10) 6588206 (10) 3622412 (10) 8394382 (10) 3453250 (10) 9518796 (10) 6149370 (10) 2029623 (10) 374574 (10) 8563184 (10) 8804052 (10) 8237276 (10) 8189648 (10) 7703225 (10) 7514294 (10) 3434966 (10) 5816885 (10) 6549569 (10) 3104167 (10) 9227489 (10) 8140727 (10) 485983 (10) 2271622 (10) 3586515 (10) 2751934 (10) 4717852 (10) 9717384 (10) 9868523 (10) 4882576 (10) 9340831 (10) 1514436 (10) 451046 (10) 360414 (10) 1152039 (10) 4850763 (10) 9277605 (10) 2119335 (10) 4005082 (10) 9971641 (10) 6152797 (10) 3485780 (10) 5853211 (10) 5912491 (10) 7264008 (10) 5700967 (10) 9002228 (10) 4228485 (10) 3682214 (10) 6008087 (10) 321600 (10) 9330266 (10) 2272371 (10) 5579758 (10) 7223435 (10) 5574323 (10) 2101821 (10) 2436219 (10) 3496198 (10) 3918311 (10) 5239890 (10) 3972448 (10) 5431229 (10) 7614330 (10) 9536761 (10) 7565245 (10) 3847526 (10) 9031842 (10) 6801550 (10) 744867 (10) 345762 (10) 1367646 (10) 9563123 (10) 5537105 (10) 3691495 (10) 6003828 (10) 809290 (10) 6592373 (10) 3616968 (10) 5815184 (10) 5969245 (10) 1534102 (10) 6987930 (10) 3678451 (10) 2961876 (10) 8448520 (10) 3465839 (10) 4578793 (10) 7278775 (10) 
     dis: 	6414.133 6432.375 6566.185 7775.480 7796.184 8296.418 8401.078 8437.510 8644.477 8929.859 9388.063 9539.368 9634.002 9648.408 9719.994 9720.502 9864.297 9872.281 9906.254 9957.773 10065.496 10346.984 10375.881 10448.883 10507.746 10546.236 10756.645 10839.828 10981.326 10982.100 11006.840 11096.197 11111.314 11171.574 11298.709 11301.265 11419.105 11438.912 11441.676 11454.850 11483.993 11534.354 11605.689 11614.182 11763.213 11766.041 11827.036 11842.545 11873.916 11884.135 11982.711 11997.051 12006.348 12048.520 12051.086 12056.156 12109.916 12147.061 12155.480 12161.669 12173.170 12175.359 12204.871 12363.262 12366.600 12399.912 12413.176 12437.832 12444.395 12461.684 12492.977 12504.562 12508.758 12523.601 12569.764 12588.819 12606.955 12607.188 12650.980 12685.115 12740.446 12755.459 12775.262 12777.096 12781.033 12786.705 12787.801 12841.128 12894.939 12963.991 12981.934 13011.709 13057.754 13111.205 13135.528 13138.193 13178.535 13195.967 13268.838 13299.130 
query 1 nn's (10, 10): 8784659 (10) 6945939 (10) 2769394 (10) 5321556 (10) 4561316 (10) 3193849 (10) 2077395 (10) 4111782 (10) 7928199 (10) 1237024 (10) 5116926 (10) 6783786 (10) 3288493 (10) 4414583 (10) 4952577 (10) 8300390 (10) 9780570 (10) 7905338 (10) 1141657 (10) 8680758 (10) 1216753 (10) 9979859 (10) 4496742 (10) 1587846 (10) 6615426 (10) 982005 (10) 4839935 (10) 1424510 (10) 7853534 (10) 5347257 (10) 5966468 (10) 8431034 (10) 5969404 (10) 6136881 (10) 2114720 (10) 2067413 (10) 6099297 (10) 210208 (10) 583971 (10) 6385836 (10) 8974429 (10) 9267002 (10) 1166066 (10) 9504433 (10) 3761710 (10) 759271 (10) 9248724 (10) 7804689 (10) 1824031 (10) 3724669 (10) 1927377 (10) 5534229 (10) 434519 (10) 5444203 (10) 509025 (10) 7158140 (10) 6310407 (10) 5664795 (10) 1061353 (10) 5295974 (10) 2817328 (10) 4252119 (10) 6037682 (10) 903398 (10) 7273808 (10) 1478349 (10) 693980 (10) 7841909 (10) 3622736 (10) 9278956 (10) 8561106 (10) 7499767 (10) 9970073 (10) 3034034 (10) 1473367 (10) 316839 (10) 5895577 (10) 7770117 (10) 5303947 (10) 3433669 (10) 5027954 (10) 6680429 (10) 7677236 (10) 7254367 (10) 8126210 (10) 8884531 (10) 2014179 (10) 7497777 (10) 9914953 (10) 1334523 (10) 524139 (10) 2471528 (10) 2086982 (10) 6454260 (10) 7276702 (10) 9924846 (10) 9881993 (10) 5620878 (10) 8518851 (10) 4360786 (10) 
     dis: 	8765.226 9079.016 9178.679 10238.240 10290.205 10562.842 10990.313 11085.228 11093.604 11094.037 11180.954 11190.893 11338.807 11380.984 11407.937 11417.113 11590.225 11653.300 11669.965 11672.676 11772.558 11774.113 11816.061 11825.609 11859.049 11970.397 11994.832 12010.205 12114.486 12137.301 12162.845 12179.556 12205.840 12208.055 12210.340 12218.661 12233.834 12304.533 12327.144 12380.741 12394.889 12399.731 12422.762 12472.165 12486.761 12490.968 12513.548 12571.324 12597.032 12615.807 12631.091 12666.966 12671.005 12697.164 12751.724 12780.536 12847.774 12941.859 12942.832 12951.453 12986.861 12989.711 13003.512 13048.505 13085.325 13137.373 13138.882 13194.434 13207.626 13225.272 13246.035 13249.167 13262.048 13272.125 13285.126 13304.500 13309.635 13320.239 13326.811 13360.018 13361.020 13362.165 13364.578 13368.037 13373.596 13376.078 13406.706 13419.945 13420.678 13429.071 13429.501 13435.165 13439.880 13448.894 13461.281 13468.123 13479.152 13488.283 13495.214 13505.529 
query 2 nn's (10, 10): 4290437 (10) 3524579 (10) 2755608 (10) 2768752 (10) 4969561 (10) 5423341 (10) 6688464 (10) 3817374 (10) 7670329 (10) 1233143 (10) 6028399 (10) 6915696 (10) 6672275 (10) 7433556 (10) 8517921 (10) 3995931 (10) 1585247 (10) 6373557 (10) 3168009 (10) 7037734 (10) 7215858 (10) 7225622 (10) 4240529 (10) 3686996 (10) 3720423 (10) 3485543 (10) 5943431 (10) 4489586 (10) 1334244 (10) 8773369 (10) 2826478 (10) 2262803 (10) 6791210 (10) 8373012 (10) 4972945 (10) 5329091 (10) 2354559 (10) 3989900 (10) 7839327 (10) 242710 (10) 1481914 (10) 9402325 (10) 1207655 (10) 2895724 (10) 1846155 (10) 4518309 (10) 503519 (10) 8628294 (10) 3709896 (10) 692490 (10) 2171312 (10) 5859562 (10) 7147975 (10) 312728 (10) 6829634 (10) 9746995 (10) 5257675 (10) 9208988 (10) 2387576 (10) 7385231 (10) 1655711 (10) 5188561 (10) 9568973 (10) 6657725 (10) 7366068 (10) 8805708 (10) 4303503 (10) 1066233 (10) 5650643 (10) 4024352 (10) 7101891 (10) 7981371 (10) 2280297 (10) 6679312 (10) 7514379 (10) 6317516 (10) 6351656 (10) 6257635 (10) 8413303 (10) 6131779 (10) 4387693 (10) 9705570 (10) 6071002 (10) 3409682 (10) 1523359 (10) 4491639 (10) 3760456 (10) 6158322 (10) 1666933 (10) 2692851 (10) 5794271 (10) 1407764 (10) 8167170 (10) 5747150 (10) 1166591 (10) 2834870 (10) 7073858 (10) 4916447 (10) 1634495 (10) 7153445 (10) 
     dis: 	4542.042 5012.328 5151.526 7858.528 8062.667 8498.254 8687.844 8792.666 9207.074 9287.541 9576.400 9814.024 9960.715 10019.524 10239.871 10265.812 10273.459 10275.492 10446.348 10723.768 10749.218 11104.013 11157.244 11210.739 11300.346 11350.087 11352.115 11384.483 11434.205 11434.844 11471.007 11494.721 11508.496 11540.063 11563.412 11711.441 11745.541 11760.250 11883.308 11890.306 11989.419 11995.736 12026.299 12032.654 12038.643 12048.998 12066.062 12093.634 12137.261 12143.512 12175.985 12176.218 12178.157 12188.467 12208.185 12223.216 12232.277 12267.860 12275.746 12283.816 12311.680 12312.312 12315.173 12326.246 12335.066 12348.662 12350.954 12358.680 12408.514 12437.103 12442.993 12546.582 12571.580 12582.399 12633.107 12636.973 12639.858 12642.389 12653.181 12703.655 12712.259 12743.491 12744.352 12756.160 12770.431 12798.699 12802.165 12811.356 12849.970 12863.646 12869.529 12900.824 12915.463 12919.621 12975.484 12989.674 13004.756 13036.299 13038.209 13083.698 
query 3 nn's (10, 10): 7375372 (10) 8694166 (10) 4153275 (10) 1074776 (10) 9100185 (10) 9157428 (10) 5621855 (10) 8656601 (10) 1174052 (10) 6835770 (10) 7110321 (10) 9760951 (10) 543165 (10) 2824029 (10) 2838160 (10) 3431426 (10) 891922 (10) 1549096 (10) 7102985 (10) 6726539 (10) 1771224 (10) 9030244 (10) 4925397 (10) 8900242 (10) 1453923 (10) 5971002 (10) 899773 (10) 4280414 (10) 5924329 (10) 413101 (10) 6193105 (10) 6114795 (10) 8354889 (10) 407176 (10) 444968 (10) 1559878 (10) 5911798 (10) 5165872 (10) 2262413 (10) 2605021 (10) 2962163 (10) 1887300 (10) 9000058 (10) 6877659 (10) 5404816 (10) 9750958 (10) 5651044 (10) 8589062 (10) 1981654 (10) 181546 (10) 4300552 (10) 5498239 (10) 2744780 (10) 2113776 (10) 8653844 (10) 8797109 (10) 1874647 (10) 5555516 (10) 5951119 (10) 8437072 (10) 5241021 (10) 3104897 (10) 5924168 (10) 3539326 (10) 4645211 (10) 6000334 (10) 4988770 (10) 3433587 (10) 9250690 (10) 7541460 (10) 4003247 (10) 2846312 (10) 916020 (10) 4052646 (10) 7393670 (10) 586204 (10) 4767661 (10) 7242021 (10) 347839 (10) 6752785 (10) 3400340 (10) 4641079 (10) 613079 (10) 5142677 (10) 7713351 (10) 4432454 (10) 7049263 (10) 7593637 (10) 4072686 (10) 7992788 (10) 1319961 (10) 3720695 (10) 4338390 (10) 7320752 (10) 5340508 (10) 4657476 (10) 6595287 (10) 7641663 (10) 4392973 (10) 8348092 (10) 
     dis: 	9178.121 9677.692 9891.278 10423.970 10469.760 10479.249 10713.815 10921.291 10968.396 11394.721 11543.115 11558.764 11574.998 11604.655 11618.854 11693.234 11779.965 11787.654 11933.174 11951.109 12066.514 12071.457 12112.579 12124.435 12158.029 12166.674 12194.023 12209.152 12212.320 12253.446 12296.252 12483.910 12486.123 12486.956 12496.656 12496.964 12571.232 12852.544 12865.562 12894.440 12905.453 12941.682 12976.014 12979.936 12991.156 13015.606 13024.650 13031.410 13095.768 13108.093 13150.133 13153.400 13158.633 13182.557 13194.006 13210.390 13233.293 13276.822 13281.541 13289.638 13294.702 13327.217 13376.134 13392.977 13395.027 13395.230 13405.543 13405.546 13417.766 13420.644 13422.107 13426.444 13484.251 13487.062 13506.222 13521.011 13521.298 13523.365 13551.142 13569.811 13575.195 13580.445 13591.461 13617.886 13620.524 13625.973 13630.391 13642.588 13645.216 13690.410 13704.474 13723.734 13737.175 13741.130 13744.434 13748.075 13761.370 13766.684 13779.967 13795.898 
query 4 nn's (10, 10): 9614324 (10) 9788862 (10) 3849231 (10) 3367834 (10) 3037959 (10) 9193832 (10) 1906000 (10) 6082909 (10) 1994085 (10) 3480152 (10) 7100626 (10) 449527 (10) 3195289 (10) 6614912 (10) 1444782 (10) 2337939 (10) 8605558 (10) 8902014 (10) 1306176 (10) 2473330 (10) 6738443 (10) 9600067 (10) 6815324 (10) 4175678 (10) 1875114 (10) 288977 (10) 3792530 (10) 2188431 (10) 5021774 (10) 3505357 (10) 7816576 (10) 7209041 (10) 1595830 (10) 5521208 (10) 1432350 (10) 8028995 (10) 9964092 (10) 801930 (10) 7987544 (10) 2514100 (10) 8880992 (10) 290548 (10) 6765006 (10) 2909307 (10) 4630927 (10) 8998151 (10) 1805350 (10) 876017 (10) 5855379 (10) 5781240 (10) 9792010 (10) 6473453 (10) 4786546 (10) 8400780 (10) 5374432 (10) 5892891 (10) 5220285 (10) 8013089 (10) 6414775 (10) 3855566 (10) 6863555 (10) 1203342 (10) 6871337 (10) 6632711 (10) 2658409 (10) 3018023 (10) 124297 (10) 4364679 (10) 5878556 (10) 9004320 (10) 2156786 (10) 3254897 (10) 7657646 (10) 9625065 (10) 9135188 (10) 7800694 (10) 8278429 (10) 1493141 (10) 3650471 (10) 8855048 (10) 461309 (10) 7664685 (10) 9586382 (10) 7619778 (10) 1684521 (10) 1857734 (10) 2661685 (10) 6872346 (10) 2237336 (10) 8984355 (10) 6080614 (10) 5238216 (10) 6250307 (10) 1128048 (10) 9027955 (10) 4205878 (10) 2966222 (10) 4249166 (10) 1879610 (10) 8680586 (10) 
     dis: 	4214.189 6165.131 6168.659 6414.258 6421.977 6456.212 6515.235 6536.395 6542.628 6616.665 6724.251 6766.941 6787.833 6794.460 6826.149 7043.858 7054.201 7096.312 7104.427 7114.095 7120.815 7122.453 7129.933 7134.933 7139.737 7156.568 7159.878 7194.735 7212.983 7239.648 7283.308 7294.718 7322.942 7349.662 7351.869 7351.972 7367.931 7372.417 7421.911 7422.741 7464.204 7465.547 7467.675 7470.019 7476.243 7510.106 7530.123 7554.117 7560.020 7570.895 7594.998 7610.180 7626.246 7639.874 7642.104 7653.684 7663.185 7664.596 7668.369 7669.740 7670.968 7676.588 7687.899 7704.083 7715.844 7718.061 7724.946 7730.001 7732.139 7738.081 7740.553 7746.474 7757.048 7766.453 7772.469 7774.736 7775.591 7778.032 7781.876 7783.664 7790.991 7799.050 7805.280 7805.490 7806.111 7813.905 7817.576 7822.195 7823.262 7824.838 7832.562 7840.453 7848.417 7859.636 7866.651 7875.103 7887.809 7892.112 7895.730 7900.683 
[ 229.967s ] *** Query time: 165.184
qps: 60.539
 *** ivfpq recall 
ivfpq get 937966 postive res from 1000000 results, recall@100:0.938
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.008 0.038 0.142 0.769 0.041 
finished ivfpq index examples
[ 229.998s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100 500 100"
	User time (seconds): 225.35
	System time (seconds): 3.60
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:50.16
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2408348
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1127504
	Voluntary context switches: 3730
	Involuntary context switches: 365
	Swaps: 0
	File system inputs: 48512
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:48
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100
nprobe: 500
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.695s ] Loaded metadata, 10000000 attr's found
[ 0.695s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.697s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.698s ] Loaded 10000 spacev10m queries
[ 0.767s ] Loaded ground truth, gt_size: 100
[ 0.767s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.375s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 201.393s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 4279856 (19) 8341867 (19) 4470157 (19) 2168891 (19) 3665805 (19) 7422832 (19) 7367271 (19) 9931603 (19) 1637453 (19) 5746247 (19) 1770486 (19) 6597346 (19) 6942470 (19) 7327255 (19) 3460164 (19) 1212990 (19) 2396091 (19) 1372131 (19) 9364100 (19) 8515689 (19) 487590 (19) 7375047 (19) 4686457 (19) 6764149 (19) 332069 (19) 8910608 (19) 3697929 (19) 5677721 (19) 4659910 (19) 8378957 (19) 2218806 (19) 1592842 (19) 8182773 (19) 7661076 (19) 7700187 (19) 8674237 (19) 6686155 (19) 2853852 (19) 620761 (19) 4855990 (19) 6750500 (19) 6895596 (19) 1332121 (19) 2051583 (19) 293057 (19) 3303145 (19) 8669432 (19) 6753514 (19) 4946620 (19) 9502814 (19) 7188002 (19) 6951564 (19) 176246 (19) 3089824 (19) 4192989 (19) 8201616 (19) 3619180 (19) 2811379 (19) 9040506 (19) 2042469 (19) 6064456 (19) 660063 (19) 6034098 (19) 4729200 (19) 7109424 (19) 2469713 (19) 2552899 (19) 232049 (19) 4110900 (19) 2309976 (19) 3478881 (19) 5546460 (19) 9235758 (19) 6363317 (19) 3740616 (19) 8490642 (19) 7220492 (19) 6416140 (19) 3166649 (19) 7839580 (19) 384599 (19) 4791005 (19) 8512468 (19) 3406052 (19) 5147199 (19) 5959902 (19) 1115768 (19) 7269837 (19) 9966707 (19) 6521545 (19) 599874 (19) 3817792 (19) 6775481 (19) 7576885 (19) 2025379 (19) 2577938 (19) 7304041 (19) 6714105 (19) 6909714 (19) 1870745 (19) 
     dis: 	7638.735 9558.711 9934.037 10453.116 11205.758 12306.231 12684.057 12869.922 13166.826 13499.471 13583.150 13761.765 13787.166 13853.906 14028.183 14068.180 14587.796 14605.518 15191.772 15375.377 15783.516 15982.881 16006.377 16017.622 16067.159 16105.197 16203.963 16219.489 16370.820 16450.496 16520.648 16569.531 16642.363 16667.049 16681.059 16720.711 16772.645 16800.930 16812.740 16858.086 16862.258 16872.947 16907.820 16930.484 16951.914 16952.391 16987.809 16995.482 17020.344 17071.625 17097.293 17135.922 17196.490 17206.021 17228.510 17236.156 17246.871 17294.500 17304.703 17312.797 17351.109 17382.109 17387.516 17397.098 17409.516 17417.965 17459.090 17467.510 17478.186 17481.607 17482.221 17507.248 17524.652 17548.877 17560.646 17593.201 17598.273 17613.809 17628.469 17653.699 17656.992 17681.975 17685.949 17686.871 17708.041 17710.303 17732.672 17745.324 17752.234 17766.979 17776.168 17786.678 17806.039 17815.852 17829.672 17866.320 17867.785 17870.555 17878.605 17895.672 
query 1 nn's (19, 19): 3010609 (19) 429713 (19) 5389260 (19) 4568459 (19) 8829523 (19) 110728 (19) 630895 (19) 7568825 (19) 783095 (19) 2929751 (19) 8636733 (19) 6863211 (19) 3144041 (19) 392320 (19) 7198370 (19) 7947913 (19) 5003704 (19) 6027347 (19) 5483238 (19) 4306441 (19) 3862347 (19) 4505408 (19) 1389708 (19) 5137115 (19) 4177569 (19) 1841673 (19) 5050785 (19) 3071481 (19) 8149932 (19) 474037 (19) 469832 (19) 8648100 (19) 931057 (19) 2862356 (19) 4286140 (19) 1766446 (19) 8525461 (19) 7860457 (19) 440253 (19) 445148 (19) 5224635 (19) 4666138 (19) 8662848 (19) 5113229 (19) 692306 (19) 9339417 (19) 2325622 (19) 9276130 (19) 6925055 (19) 5788109 (19) 9274014 (19) 2382853 (19) 425912 (19) 1805393 (19) 4419178 (19) 2858595 (19) 2484915 (19) 7612669 (19) 7583884 (19) 5304602 (19) 5608880 (19) 5921858 (19) 8921952 (19) 9545981 (19) 8687481 (19) 7568710 (19) 9044463 (19) 7457489 (19) 3711559 (19) 5418938 (19) 3004423 (19) 8111746 (19) 3251921 (19) 1326371 (19) 5243086 (19) 4771937 (19) 4763460 (19) 4882390 (19) 1919587 (19) 6199417 (19) 8716308 (19) 7561374 (19) 1117998 (19) 8513973 (19) 8753190 (19) 9201551 (19) 9003892 (19) 912090 (19) 1839003 (19) 1162693 (19) 5854150 (19) 4074976 (19) 7056419 (19) 8696428 (19) 9710724 (19) 8555163 (19) 4476482 (19) 6228590 (19) 8065002 (19) 2633827 (19) 
     dis: 	8391.524 9736.995 10792.950 11708.830 11799.709 12010.175 12441.334 12504.060 12578.889 12892.762 13379.538 13382.105 13498.253 13519.527 13689.697 13856.448 13992.421 14041.268 14224.301 14358.249 14426.482 14448.514 14536.901 14554.845 14572.909 14636.389 14743.554 14747.531 14800.973 14928.906 14935.573 14951.977 14960.764 15003.918 15044.445 15057.150 15118.410 15234.441 15309.520 15310.859 15334.264 15424.873 15489.217 15502.815 15531.812 15533.725 15539.036 15635.906 15636.932 15639.560 15640.110 15789.396 15815.390 15816.677 15829.619 15885.144 15900.689 15974.834 15976.923 16010.720 16011.895 16012.525 16092.650 16096.720 16101.754 16124.197 16125.956 16154.598 16223.809 16245.324 16268.004 16274.797 16278.438 16294.100 16309.813 16313.535 16329.318 16350.902 16357.865 16366.599 16393.750 16404.492 16405.717 16415.676 16428.949 16438.086 16444.818 16456.906 16465.363 16486.672 16488.730 16492.371 16492.859 16513.250 16520.238 16525.463 16544.434 16559.414 16571.836 16575.854 
query 2 nn's (19, 19): 5535345 (19) 5031536 (19) 8226884 (19) 6084444 (19) 2953048 (19) 749169 (19) 8617679 (19) 3340664 (19) 8728212 (19) 6971757 (19) 5515036 (19) 1458865 (19) 4577911 (19) 3010954 (19) 5587927 (19) 3921280 (19) 8741529 (19) 779126 (19) 2467368 (19) 2680833 (19) 2758942 (19) 9763181 (19) 9645749 (19) 8094377 (19) 9556523 (19) 1706632 (19) 4882007 (19) 8220390 (19) 4715690 (19) 186885 (19) 6774638 (19) 998715 (19) 5301122 (19) 8372302 (19) 3420420 (19) 1201153 (19) 1266640 (19) 9760098 (19) 4658930 (19) 9329860 (19) 3126483 (19) 1172159 (19) 7317548 (19) 8717974 (19) 9915864 (19) 116461 (19) 1541762 (19) 1744962 (19) 5259633 (19) 3414397 (19) 3943530 (19) 6375314 (19) 9634721 (19) 9808998 (19) 1718350 (19) 9213256 (19) 5541998 (19) 9539969 (19) 7015834 (19) 841516 (19) 8107759 (19) 6904606 (19) 4412415 (19) 780774 (19) 3166588 (19) 4464195 (19) 4054698 (19) 1392790 (19) 1340184 (19) 6591284 (19) 9534907 (19) 1357631 (19) 2181097 (19) 2025883 (19) 6864125 (19) 8320953 (19) 3963303 (19) 9705107 (19) 654427 (19) 4882541 (19) 6427740 (19) 7580275 (19) 1443786 (19) 592759 (19) 1393634 (19) 1628202 (19) 1149504 (19) 516370 (19) 3925923 (19) 8944874 (19) 2282039 (19) 9501542 (19) 4397958 (19) 2496494 (19) 3137808 (19) 7070836 (19) 6821524 (19) 5223199 (19) 8568692 (19) 7875093 (19) 
     dis: 	12024.223 12097.814 12805.860 12947.198 12952.467 12954.128 13331.361 13498.450 13523.029 13618.199 13641.347 13672.826 13766.740 13907.245 14055.801 14087.814 14088.777 14457.531 14581.311 14601.304 14672.530 14691.119 14789.039 14894.432 14898.377 14952.714 14989.438 15006.154 15053.264 15053.449 15216.352 15284.398 15348.151 15352.475 15396.575 15398.914 15426.451 15444.068 15477.859 15550.074 15580.339 15581.037 15588.112 15661.916 15687.478 15694.656 15696.999 15718.609 15744.389 15805.731 15806.801 15869.112 15895.018 15916.496 15925.740 15945.288 15954.663 15956.729 15990.857 16019.096 16025.672 16027.939 16041.510 16060.621 16062.855 16068.260 16084.735 16087.768 16091.288 16105.752 16147.369 16151.105 16160.312 16171.044 16206.729 16217.057 16220.271 16241.357 16249.508 16255.617 16256.484 16257.186 16269.798 16285.799 16287.282 16292.041 16315.808 16317.874 16323.785 16336.685 16359.558 16364.848 16373.623 16382.705 16387.223 16398.080 16401.191 16415.109 16423.801 16425.164 
query 3 nn's (19, 19): 8688374 (19) 312551 (19) 4281239 (19) 2035960 (19) 1088105 (19) 9323463 (19) 7541027 (19) 7449790 (19) 6105877 (19) 8097175 (19) 4268373 (19) 667960 (19) 5724273 (19) 5461052 (19) 6551733 (19) 7491279 (19) 9627667 (19) 4925847 (19) 7964975 (19) 4919176 (19) 3007838 (19) 9080241 (19) 1340184 (19) 9885359 (19) 8410449 (19) 8129391 (19) 2415373 (19) 8607893 (19) 3009169 (19) 2784680 (19) 5922505 (19) 8045936 (19) 3845490 (19) 967679 (19) 176951 (19) 7543980 (19) 5478016 (19) 7875093 (19) 5215312 (19) 4659110 (19) 9096336 (19) 2586101 (19) 514113 (19) 9913374 (19) 4268377 (19) 2418076 (19) 3864598 (19) 7997421 (19) 8882286 (19) 2487431 (19) 6673817 (19) 127654 (19) 8271330 (19) 7025177 (19) 628653 (19) 5579146 (19) 8546209 (19) 5893105 (19) 1237353 (19) 3131439 (19) 8180425 (19) 3693087 (19) 8771503 (19) 2417799 (19) 4672684 (19) 4627911 (19) 7757544 (19) 905800 (19) 7871197 (19) 567269 (19) 2006907 (19) 2140224 (19) 7674594 (19) 4731363 (19) 2881256 (19) 4091598 (19) 6416707 (19) 3010965 (19) 1652195 (19) 7570620 (19) 6980401 (19) 5666599 (19) 607708 (19) 6560530 (19) 4898571 (19) 779126 (19) 190660 (19) 5368564 (19) 2727588 (19) 3893666 (19) 4638438 (19) 1357332 (19) 2447761 (19) 1243617 (19) 3644143 (19) 9122252 (19) 6108720 (19) 313153 (19) 734379 (19) 1275061 (19) 
     dis: 	9944.749 12468.111 12897.088 13140.541 13573.342 13577.740 13779.833 13839.975 13854.350 13899.174 14213.678 14235.775 14369.473 14459.153 14465.458 14490.075 14497.405 14537.353 14562.984 14661.752 14753.554 14774.268 14788.648 14900.577 14903.229 14915.215 15039.348 15193.091 15275.812 15352.617 15577.146 15621.230 15686.299 15700.439 15709.281 15711.110 15854.422 15857.826 15918.137 15969.267 16053.637 16094.088 16129.919 16146.223 16169.628 16228.126 16238.080 16244.188 16275.604 16284.905 16287.273 16296.250 16301.161 16393.256 16419.477 16431.229 16452.676 16452.832 16482.240 16485.844 16489.652 16493.627 16522.209 16544.324 16554.145 16561.996 16622.148 16662.688 16693.137 16712.674 16717.066 16762.617 16763.332 16764.039 16764.111 16774.400 16799.096 16809.115 16832.432 16862.162 16862.625 16863.703 16871.570 16873.416 16883.633 16920.576 16935.223 16949.295 16958.963 16969.951 16973.215 16977.035 16981.377 16991.266 16998.145 17002.229 17015.445 17038.037 17047.125 17060.752 
query 4 nn's (19, 19): 6836665 (19) 7921516 (19) 2798193 (19) 1079096 (19) 5551706 (19) 6384236 (19) 8437136 (19) 3526996 (19) 7958455 (19) 8954656 (19) 9191078 (19) 1878195 (19) 8683349 (19) 9656416 (19) 9493852 (19) 2757759 (19) 2027548 (19) 8921471 (19) 9329860 (19) 9505206 (19) 1335746 (19) 8536029 (19) 8639136 (19) 5256190 (19) 9614915 (19) 8349371 (19) 9424986 (19) 511177 (19) 2501959 (19) 9644471 (19) 5327936 (19) 1643680 (19) 5077822 (19) 8372024 (19) 793299 (19) 9978560 (19) 1240610 (19) 1054012 (19) 4859863 (19) 4955145 (19) 4075229 (19) 1343630 (19) 9253615 (19) 4548642 (19) 7609377 (19) 2015190 (19) 9072469 (19) 5596924 (19) 3842876 (19) 2456896 (19) 325510 (19) 8181039 (19) 7303110 (19) 1443786 (19) 8407752 (19) 6766193 (19) 8170734 (19) 1895524 (19) 4869663 (19) 3425925 (19) 1753211 (19) 6401886 (19) 4126790 (19) 3321001 (19) 461835 (19) 2484305 (19) 3806355 (19) 7780026 (19) 6095136 (19) 1061844 (19) 4748406 (19) 8889106 (19) 1362637 (19) 9990549 (19) 2914251 (19) 7784434 (19) 6486072 (19) 3965413 (19) 3306922 (19) 123814 (19) 3467576 (19) 5945988 (19) 9499575 (19) 6885311 (19) 9369425 (19) 3649736 (19) 8490864 (19) 6153524 (19) 8469162 (19) 9424041 (19) 6409418 (19) 3279080 (19) 5069455 (19) 6418432 (19) 7829271 (19) 5186846 (19) 1062802 (19) 6471165 (19) 3411002 (19) 3266320 (19) 
     dis: 	6851.380 7161.380 7243.177 7413.333 7422.892 7440.549 7512.876 7534.732 7547.640 7577.691 7638.171 7665.403 7690.257 7716.237 7752.497 7754.162 7800.845 7851.804 8018.662 8082.378 8082.827 8087.817 8088.618 8154.580 8160.919 8194.400 8197.945 8245.710 8257.182 8338.205 8382.871 8405.180 8424.677 8427.924 8459.846 8472.503 8493.091 8497.349 8543.990 8563.842 8568.471 8585.865 8615.291 8624.682 8656.666 8665.778 8675.385 8709.665 8732.691 8737.271 8749.697 8752.396 8764.888 8766.392 8778.420 8786.758 8801.138 8816.869 8825.207 8835.709 8840.059 8853.229 8877.213 8883.633 8911.971 8916.273 8918.075 8953.867 8963.311 8968.421 8970.105 8974.793 8986.098 8986.633 8992.217 9005.859 9014.567 9024.974 9037.174 9039.415 9044.827 9065.203 9071.347 9078.252 9081.488 9093.404 9097.068 9097.351 9099.612 9100.009 9100.082 9133.320 9137.573 9142.923 9146.828 9159.024 9160.476 9163.772 9169.037 9173.205 
[ 201.393s ] *** Query time: 134.837
qps: 74.163
 *** ivfpq recall 
ivfpq get 868279 postive res from 1000000 results, recall@100:0.868
recall dist(10% per bucket): 0.000 0.000 0.002 0.003 0.007 0.023 0.060 0.135 0.234 0.518 0.018 
finished ivfpq index examples
[ 201.433s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100 500 100"
	User time (seconds): 196.95
	System time (seconds): 3.50
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:21.63
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2408784
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 1072057
	Voluntary context switches: 4190
	Involuntary context switches: 295
	Swaps: 0
	File system inputs: 297768
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:09
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100
nprobe: 500
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.724s ] Loaded metadata, 10000000 attr's found
[ 0.724s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.726s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.729s ] Loaded 10000 spacev10m queries
[ 0.835s ] Loaded ground truth, gt_size: 100
[ 0.835s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 7.100s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 191.883s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 6443191 (20) 4699240 (20) 7019431 (20) 4459358 (20) 337940 (20) 4283885 (20) 1535087 (20) 9528752 (20) 9935667 (20) 3931559 (20) 2466547 (20) 8175166 (20) 421677 (20) 5199441 (20) 4576810 (20) 7317146 (20) 5957722 (20) 8616525 (20) 2791043 (20) 2628511 (20) 6118204 (20) 4424130 (20) 1630699 (20) 1860345 (20) 6279561 (20) 9126356 (20) 3519214 (20) 8093555 (20) 51356 (20) 8723167 (20) 1846917 (20) 9419122 (20) 5850489 (20) 2113279 (20) 2361319 (20) 2375454 (20) 8237360 (20) 9698729 (20) 5242874 (20) 9464988 (20) 4911985 (20) 1600402 (20) 8766092 (20) 2186413 (20) 5552649 (20) 5774333 (20) 8167332 (20) 3333657 (20) 5686713 (20) 4507581 (20) 7867145 (20) 4303478 (20) 4346258 (20) 7386698 (20) 815686 (20) 8313812 (20) 9997410 (20) 6927529 (20) 4901078 (20) 792376 (20) 220383 (20) 6549263 (20) 8087642 (20) 5581370 (20) 681159 (20) 5694878 (20) 5700300 (20) 2069935 (20) 6244964 (20) 3909033 (20) 3595466 (20) 2721047 (20) 5151678 (20) 3765361 (20) 6902366 (20) 3674181 (20) 3760880 (20) 1548822 (20) 6772707 (20) 8106894 (20) 6203676 (20) 4158240 (20) 4130845 (20) 3819249 (20) 1084358 (20) 7590583 (20) 7983134 (20) 9858674 (20) 5911876 (20) 3438462 (20) 4477572 (20) 1005299 (20) 1954471 (20) 4665407 (20) 2364342 (20) 9943908 (20) 9997171 (20) 5695056 (20) 9493408 (20) 8387947 (20) 
     dis: 	12183.217 12270.143 16160.129 16676.064 17386.770 17880.533 17910.324 17953.172 17992.535 18207.014 18307.053 18344.061 18571.209 18672.984 18805.582 18844.000 18865.586 18884.070 18959.191 19088.162 19150.332 19406.875 19489.115 19491.441 19507.621 19596.744 19608.334 19671.586 19713.516 19745.900 19770.172 19773.496 19798.965 19814.348 19845.498 19845.885 19920.078 19958.326 20001.629 20024.379 20024.969 20036.355 20042.191 20055.018 20061.904 20069.094 20169.693 20170.248 20174.311 20184.486 20218.877 20249.770 20250.541 20269.371 20295.756 20312.754 20320.129 20336.074 20354.824 20372.053 20381.004 20397.793 20400.270 20459.109 20471.490 20485.605 20493.479 20500.684 20532.621 20552.447 20563.484 20582.457 20584.320 20606.984 20656.287 20695.682 20696.906 20699.230 20726.811 20739.059 20755.684 20779.115 20782.408 20784.635 20813.543 20818.801 20854.098 20863.889 20880.486 20883.975 20888.367 20892.027 20896.670 20903.160 20908.039 20916.152 20922.000 20927.170 20954.752 20962.912 
query 1 nn's (20, 20): 9246122 (20) 6649015 (20) 9227196 (20) 8711930 (20) 662332 (20) 3943773 (20) 6290607 (20) 7923085 (20) 6779370 (20) 4366343 (20) 8373788 (20) 9925207 (20) 4889973 (20) 4948121 (20) 9004403 (20) 6274372 (20) 207306 (20) 9448304 (20) 2335272 (20) 2328588 (20) 7033809 (20) 7856374 (20) 3124950 (20) 3079819 (20) 3031494 (20) 3737435 (20) 5101020 (20) 1116306 (20) 7758605 (20) 6477725 (20) 1463547 (20) 2329364 (20) 7083656 (20) 917291 (20) 412141 (20) 8165000 (20) 6800635 (20) 7815891 (20) 5735651 (20) 8036843 (20) 468975 (20) 9733850 (20) 8012036 (20) 4298296 (20) 8815262 (20) 5422725 (20) 3201362 (20) 4016624 (20) 3734157 (20) 7355829 (20) 2504345 (20) 6022905 (20) 9669953 (20) 9502648 (20) 2066318 (20) 9297472 (20) 6230696 (20) 3548616 (20) 7929057 (20) 6617175 (20) 9615047 (20) 1811814 (20) 3992752 (20) 1512973 (20) 3495107 (20) 3023420 (20) 9618211 (20) 7133918 (20) 5847668 (20) 6457947 (20) 6804221 (20) 7135586 (20) 1862804 (20) 4624134 (20) 8961141 (20) 9265274 (20) 2193831 (20) 7909216 (20) 7736084 (20) 7801361 (20) 9499136 (20) 1790651 (20) 9856319 (20) 6084273 (20) 8019961 (20) 4145299 (20) 1227195 (20) 7845261 (20) 3418639 (20) 5200002 (20) 346267 (20) 9730924 (20) 1612480 (20) 7974148 (20) 1134023 (20) 2206232 (20) 1141270 (20) 1647651 (20) 3031744 (20) 8387790 (20) 
     dis: 	13139.062 14440.965 14605.871 15184.494 15359.936 16166.264 16581.238 16701.602 16707.025 16868.090 16898.975 17053.594 17081.066 17152.539 17207.820 17237.516 17288.924 17501.850 17503.393 17579.057 17745.184 17775.973 17848.854 17961.277 17967.219 18029.334 18229.676 18250.920 18321.098 18368.609 18389.064 18454.305 18559.475 18600.438 18606.104 18642.191 18652.273 18662.584 18665.598 18802.074 18814.203 18896.387 18953.715 18971.430 18997.551 19061.352 19064.695 19211.752 19221.568 19299.426 19299.434 19301.203 19307.104 19372.426 19412.939 19485.285 19525.199 19546.555 19677.156 19728.457 19782.484 19786.180 19827.479 19853.357 19886.135 19923.982 19966.143 19999.783 20019.580 20094.590 20170.848 20198.750 20236.906 20297.213 20306.816 20313.160 20377.092 20413.254 20419.531 20424.176 20428.127 20448.199 20448.816 20449.000 20573.318 20594.217 20595.717 20603.736 20617.207 20632.697 20680.703 20681.328 20697.688 20718.750 20726.258 20775.277 20782.598 20790.104 20810.109 20819.271 
query 2 nn's (20, 20): 3713444 (20) 8465646 (20) 7745024 (20) 8225973 (20) 5699749 (20) 8198536 (20) 5706769 (20) 1840238 (20) 1649478 (20) 328170 (20) 3428905 (20) 8979320 (20) 4116442 (20) 1975435 (20) 6347471 (20) 2089405 (20) 1387700 (20) 4277153 (20) 8888459 (20) 9630261 (20) 4791587 (20) 6654272 (20) 9868186 (20) 7511730 (20) 3065722 (20) 5616307 (20) 528114 (20) 2362170 (20) 2836571 (20) 4804684 (20) 2006090 (20) 226817 (20) 3722920 (20) 4242233 (20) 7809929 (20) 3219846 (20) 6237723 (20) 5942801 (20) 5866594 (20) 748842 (20) 7681073 (20) 7327882 (20) 8953420 (20) 4109454 (20) 5924285 (20) 8349503 (20) 6328344 (20) 1626040 (20) 9813685 (20) 8480501 (20) 9271051 (20) 8493441 (20) 4785449 (20) 880418 (20) 6994186 (20) 3723182 (20) 5883886 (20) 5775831 (20) 7851230 (20) 843306 (20) 5495283 (20) 4698642 (20) 1494130 (20) 7982815 (20) 9766249 (20) 6710599 (20) 7801409 (20) 8598271 (20) 7740060 (20) 7097457 (20) 4184249 (20) 285258 (20) 6079243 (20) 1850205 (20) 2160442 (20) 2606071 (20) 8793105 (20) 7965595 (20) 8534488 (20) 2688904 (20) 8199226 (20) 6170727 (20) 2803059 (20) 4081314 (20) 4591995 (20) 3211662 (20) 1198250 (20) 9823375 (20) 3979386 (20) 9199350 (20) 7067265 (20) 8380721 (20) 7779595 (20) 9911791 (20) 9601568 (20) 9567113 (20) 6434943 (20) 3535396 (20) 3663737 (20) 9202294 (20) 
     dis: 	11821.822 13209.668 13937.360 14451.120 14546.093 14743.147 15112.273 15450.026 15798.482 15838.992 15901.648 16158.321 16172.893 16295.672 16340.252 16609.455 16624.857 16667.367 16685.791 16812.693 17017.117 17046.209 17197.113 17201.008 17460.637 17466.766 17467.174 17510.326 17550.703 17561.227 17619.725 17685.152 17689.559 17701.820 17800.916 17805.078 17830.896 17860.086 17866.762 17916.527 17922.760 17926.768 17942.041 18061.541 18061.877 18067.793 18149.076 18226.445 18284.352 18287.129 18321.246 18358.016 18419.322 18477.967 18527.221 18530.525 18535.383 18548.533 18579.596 18608.092 18615.752 18674.494 18679.863 18686.617 18711.180 18729.861 18732.691 18745.057 18766.223 18771.492 18859.572 18897.361 18897.596 18935.191 19011.980 19031.643 19054.289 19115.012 19125.738 19173.551 19178.400 19218.137 19238.631 19240.828 19250.537 19257.406 19265.957 19269.254 19315.812 19337.938 19340.508 19345.428 19406.969 19504.885 19524.535 19527.168 19558.949 19583.479 19596.951 19664.848 
query 3 nn's (20, 20): 9781225 (20) 7701998 (20) 5023237 (20) 4869461 (20) 2376755 (20) 6286207 (20) 5512851 (20) 4455726 (20) 9714787 (20) 3977496 (20) 9665952 (20) 5515303 (20) 4150856 (20) 6045440 (20) 1416061 (20) 24626 (20) 5321494 (20) 8431943 (20) 9634562 (20) 2934450 (20) 9389430 (20) 8407900 (20) 5498028 (20) 8077268 (20) 1130505 (20) 8067931 (20) 3326654 (20) 705864 (20) 4993493 (20) 8173971 (20) 8877594 (20) 6165841 (20) 1860034 (20) 4698642 (20) 4301381 (20) 9017277 (20) 3773757 (20) 7379412 (20) 9729742 (20) 1549538 (20) 5743779 (20) 2012895 (20) 6170727 (20) 4952729 (20) 141448 (20) 5832953 (20) 5372957 (20) 2469276 (20) 1198250 (20) 9673289 (20) 9078636 (20) 3312892 (20) 577084 (20) 200785 (20) 3860411 (20) 160607 (20) 7536633 (20) 1726985 (20) 1150990 (20) 9724421 (20) 5866594 (20) 4107089 (20) 3142370 (20) 7610426 (20) 3826560 (20) 1524149 (20) 4175635 (20) 6986436 (20) 766363 (20) 5768683 (20) 5382725 (20) 7475672 (20) 1215627 (20) 7172789 (20) 9512011 (20) 7745024 (20) 7496036 (20) 52209 (20) 6240430 (20) 738783 (20) 1821499 (20) 8652518 (20) 225385 (20) 5537063 (20) 8650781 (20) 1257950 (20) 9250092 (20) 2819691 (20) 86258 (20) 7886768 (20) 2072006 (20) 578268 (20) 7409475 (20) 1768793 (20) 3241500 (20) 8681765 (20) 4097971 (20) 2551213 (20) 9777979 (20) 2808439 (20) 
     dis: 	11810.748 13300.700 15682.982 16343.217 16704.359 16877.375 17068.734 17286.791 17372.137 17397.291 17438.748 17505.180 17658.604 17690.271 17808.576 17917.025 17942.729 18277.275 18315.775 18345.178 18360.756 18364.225 18444.203 18543.836 18558.396 18772.355 18777.559 18821.953 18852.367 18871.520 19041.398 19071.053 19091.906 19153.121 19183.279 19193.559 19232.184 19251.014 19298.871 19307.605 19344.994 19358.439 19403.707 19420.418 19474.715 19559.154 19640.992 19690.848 19712.262 19721.559 19770.156 19802.078 19838.037 19886.098 19900.240 19909.416 19910.361 19911.215 19924.023 19986.400 19992.734 20001.500 20022.414 20087.770 20105.545 20132.740 20170.889 20170.891 20189.799 20208.201 20222.008 20236.863 20291.355 20335.020 20420.963 20447.941 20476.652 20507.859 20570.730 20595.363 20716.191 20756.445 20784.717 20804.244 20847.430 20882.381 20906.129 20909.672 20915.924 20918.025 20930.918 20931.758 20944.662 20948.742 20963.945 20966.686 20980.939 20985.465 20988.340 21015.088 
query 4 nn's (20, 20): 2805400 (20) 4834736 (20) 9988614 (20) 9490690 (20) 4816065 (20) 2867132 (20) 5121589 (20) 5608022 (20) 3733057 (20) 840288 (20) 2749934 (20) 7921485 (20) 9266573 (20) 5620868 (20) 27658 (20) 7541936 (20) 8910852 (20) 5250168 (20) 748930 (20) 3722920 (20) 566241 (20) 5754874 (20) 1073174 (20) 9078501 (20) 8876586 (20) 9250722 (20) 6195546 (20) 4353466 (20) 4784371 (20) 3535396 (20) 5990439 (20) 2419951 (20) 5495283 (20) 5038606 (20) 7312851 (20) 8123053 (20) 5688258 (20) 7851210 (20) 4302871 (20) 7868413 (20) 7663604 (20) 3583244 (20) 5887775 (20) 7509081 (20) 5819933 (20) 9094491 (20) 8291454 (20) 5857552 (20) 1533267 (20) 5365906 (20) 9216262 (20) 4685549 (20) 633687 (20) 6339011 (20) 8524937 (20) 4365971 (20) 6905711 (20) 4315133 (20) 2396605 (20) 4096566 (20) 5232988 (20) 921779 (20) 1431536 (20) 6468643 (20) 8793082 (20) 4839080 (20) 2696537 (20) 7608317 (20) 6013513 (20) 1556393 (20) 1510057 (20) 8836957 (20) 3092932 (20) 9849637 (20) 3595991 (20) 2923872 (20) 8000909 (20) 1367566 (20) 7726067 (20) 5043922 (20) 1876423 (20) 3967476 (20) 2956392 (20) 8195229 (20) 4732677 (20) 8283965 (20) 4054630 (20) 8380721 (20) 5224189 (20) 842764 (20) 5506381 (20) 6011640 (20) 4355510 (20) 6019894 (20) 6881971 (20) 2244650 (20) 9534197 (20) 2607476 (20) 5166898 (20) 3065722 (20) 
     dis: 	8020.513 8131.236 8313.282 8420.460 8728.763 8795.764 8876.340 9016.697 9049.032 9151.137 9181.581 9208.094 9359.434 9564.276 9644.718 9677.945 9716.919 9728.328 9747.494 9754.618 9882.396 9912.708 9920.087 9976.259 10004.038 10005.089 10011.111 10011.256 10022.703 10024.329 10024.971 10063.848 10073.567 10122.614 10130.991 10134.562 10139.638 10140.724 10168.888 10177.033 10192.876 10225.116 10246.443 10290.397 10299.412 10336.019 10338.027 10359.089 10423.788 10426.287 10456.030 10489.954 10534.646 10542.357 10559.163 10571.021 10587.707 10605.451 10610.560 10637.683 10650.761 10709.998 10722.009 10739.327 10773.950 10798.806 10861.187 10879.324 10881.404 10891.346 10895.082 10904.785 10919.646 10925.906 10941.484 10942.859 10955.097 10971.064 10975.943 10979.322 11017.157 11063.361 11065.575 11070.389 11080.289 11080.310 11081.698 11092.004 11124.557 11137.420 11142.113 11173.519 11190.187 11190.792 11209.677 11221.949 11228.908 11273.146 11281.734 11293.338 
[ 191.884s ] *** Query time: 123.940
qps: 80.684
 *** ivfpq recall 
ivfpq get 647110 postive res from 1000000 results, recall@100:0.647
recall dist(10% per bucket): 0.002 0.012 0.024 0.050 0.108 0.177 0.209 0.190 0.148 0.075 0.005 
finished ivfpq index examples
[ 191.921s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100 500 100"
	User time (seconds): 185.10
	System time (seconds): 3.32
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:12.15
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2409380
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 1001702
	Voluntary context switches: 4055
	Involuntary context switches: 271
	Swaps: 0
	File system inputs: 245528
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:52
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 500
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.385s ] Loaded metadata, 20000000 attr's found
[ 1.385s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.387s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.390s ] Loaded 10000 spacev10m queries
[ 1.458s ] Loaded ground truth, gt_size: 100
[ 1.458s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.887s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 844.357s ] Query results (vector ids, then distances):
query 0 nn's (6, 738, 84079): 1300400 (10) 8023016 (6) 2436347 (77252) 425302 (6) 3647719 (65816) 5060242 (10) 8021837 (33136) 8207046 (10) 1714233 (17813) 7099403 (46849) 6313468 (20) 1536208 (6) 1200517 (34593) 4592488 (6) 5585254 (6) 7634466 (20) 5072935 (69932) 2382485 (31144) 4779084 (10) 8997960 (10) 3881211 (8699) 8807530 (10) 2710882 (6) 8538301 (73496) 3873794 (10) 7007393 (40293) 9107614 (6) 1288832 (19) 890298 (6) 4022185 (81486) 1751249 (63976) 5261441 (62580) 8423050 (6) 8135809 (49844) 4915045 (12780) 521477 (62459) 3454073 (34171) 2646514 (6) 511283 (646) 5216657 (63291) 3676917 (11326) 8242233 (52177) 672964 (6) 4685796 (10) 8846971 (34767) 6138359 (74583) 4470364 (6) 4066846 (6) 4932580 (6) 105999 (59748) 5950387 (50134) 6478048 (10) 1947126 (6) 7983463 (52932) 7183723 (56582) 9957153 (6910) 8519503 (32483) 5236967 (92512) 9347328 (6) 8097566 (6) 8348201 (80615) 2204374 (6) 1060668 (10) 7108130 (10) 9169598 (6) 587457 (99075) 8849839 (8622) 1185721 (18806) 3611695 (88392) 5320284 (6) 5594224 (6) 6972939 (90125) 488103 (19391) 3651927 (35364) 5997165 (88368) 5560302 (6) 8656797 (68643) 3636367 (22139) 6781400 (10) 3781250 (6) 399999 (3200) 2578991 (22515) 694286 (6) 3371587 (99109) 5454 (6) 5270820 (19) 7887947 (38826) 4104937 (75282) 6290762 (10) 3622412 (10) 8394382 (6) 5769046 (6) 8504623 (52440) 3993234 (19) 9576118 (10) 5839410 (6) 2912614 (6) 2210342 (10) 3453250 (6) 9518796 (10) 
     dis: 	3451.792 4690.926 5087.593 5217.498 5457.437 6061.578 6236.472 6248.709 6417.146 6432.375 6538.946 6566.185 6583.507 6893.854 7046.054 7046.054 7056.762 7063.430 7156.920 7179.660 7203.378 7416.359 7465.087 7562.222 7645.717 7737.246 7944.578 7986.281 8019.774 8054.457 8086.774 8102.345 8130.021 8165.397 8221.855 8258.082 8296.418 8305.614 8325.738 8378.869 8401.078 8414.707 8453.121 8463.344 8507.973 8530.008 8611.803 8628.424 8644.477 8740.023 8745.193 8773.149 8929.859 8935.225 8936.227 8957.626 9032.845 9058.418 9104.535 9122.137 9181.745 9201.961 9254.884 9286.973 9300.460 9304.313 9356.174 9388.063 9416.246 9420.620 9437.708 9456.539 9460.742 9486.454 9487.956 9494.082 9499.611 9511.516 9545.341 9559.746 9574.215 9579.595 9586.519 9593.144 9620.402 9634.572 9634.979 9671.785 9697.652 9719.994 9720.502 9734.154 9748.173 9757.613 9781.924 9807.203 9830.801 9861.398 9864.297 9872.281 
query 1 nn's (6, 14047, 97384): 7672609 (64506) 8108335 (49439) 3545414 (10) 6716785 (84547) 4465136 (10) 3010609 (46874) 6957767 (49327) 1852123 (51656) 8784659 (52306) 547651 (13056) 1739613 (60371) 5778168 (6) 6631934 (6) 1739093 (24698) 7628827 (26185) 2769394 (6) 5649448 (6) 9149269 (23254) 8596579 (59080) 4208062 (10) 7980366 (10) 128447 (3742) 913237 (24473) 1286599 (14035) 458294 (20) 4731052 (6) 6202555 (88208) 2848947 (72167) 4329686 (6) 429713 (44068) 3255981 (69664) 8268659 (29304) 2342379 (4474) 5312590 (6) 9559160 (6) 4764135 (25259) 3756027 (59097) 8084904 (6) 5453229 (44674) 1674348 (19) 4023729 (60534) 1641593 (95098) 5374088 (6) 7191660 (6) 765304 (6) 4936049 (53135) 5321556 (6) 2333383 (68468) 79115 (31887) 4590802 (10) 9750308 (19) 5427517 (51980) 985950 (6) 8598995 (96453) 5183877 (50656) 7393346 (6) 2054287 (84563) 2067210 (6) 6872221 (13301) 2030638 (10) 554798 (6) 8370535 (77442) 2677560 (10) 1421700 (10) 4375499 (81139) 5833204 (6) 5559374 (10) 4626956 (6) 2208346 (6) 683232 (10) 8377057 (13467) 1417507 (69488) 7998901 (25766) 2077395 (19987) 3106662 (6) 7107065 (47886) 7898285 (66987) 9198072 (6) 972994 (6) 1656217 (85747) 3699133 (83655) 3579661 (17989) 4111782 (6) 6481742 (10) 4576314 (10) 6270422 (10) 6005945 (10738) 5054847 (75270) 540705 (26666) 2775410 (10) 4978442 (10) 3683874 (10) 662944 (20) 3402133 (65136) 7869623 (69139) 7896078 (6) 9617296 (10) 3288493 (81396) 4936167 (55552) 3767930 (197) 
     dis: 	5828.070 6440.204 7509.891 7593.169 7832.273 8391.524 8421.104 8714.764 8765.226 9004.402 9053.015 9105.973 9132.005 9150.039 9170.427 9178.679 9243.881 9268.881 9269.689 9288.159 9324.425 9356.089 9373.139 9544.611 9574.802 9578.250 9650.701 9668.452 9717.539 9736.995 9742.866 9813.656 9841.668 9842.984 9871.442 9887.145 10015.396 10035.468 10044.995 10101.637 10133.922 10139.391 10204.952 10210.189 10210.698 10231.051 10238.240 10261.571 10298.368 10318.837 10333.516 10414.066 10469.645 10484.331 10513.588 10519.002 10524.988 10550.848 10572.423 10580.958 10651.477 10687.369 10692.555 10693.323 10694.537 10714.562 10754.563 10792.292 10830.205 10854.428 10901.291 10981.347 10988.488 10990.313 11009.377 11018.941 11020.820 11023.338 11036.576 11061.956 11077.049 11084.883 11085.228 11098.338 11103.597 11149.970 11167.805 11198.328 11222.576 11223.165 11224.598 11261.956 11316.155 11317.735 11320.721 11335.729 11337.639 11338.807 11341.545 11360.578 
query 2 nn's (6, 2536, 85887): 5189301 (39255) 2755608 (6) 2639412 (10) 8672246 (6) 7542827 (68034) 2966676 (6) 5193386 (6) 1163082 (10) 2096002 (6) 9746650 (10) 2493779 (58878) 7197257 (10585) 9964310 (10) 525365 (25034) 9561351 (95758) 255402 (10) 190238 (6) 1816933 (4076) 9485250 (6) 4649174 (6) 6555137 (11850) 7670329 (18596) 1233143 (59130) 8559091 (76574) 4578631 (65340) 1381339 (65200) 2432557 (59465) 4808419 (63739) 5745884 (6) 9339955 (19676) 7804752 (10) 7017176 (10) 9023762 (10) 6697500 (10) 4360960 (6) 6672275 (24832) 6648184 (19) 1063314 (6) 6822953 (5413) 2433280 (6) 8558486 (6) 2153650 (10) 3995931 (37072) 1585247 (39009) 7660022 (6) 8393287 (42441) 780031 (81386) 4297707 (77900) 1319808 (10) 9416901 (69219) 3168009 (69223) 8143423 (28149) 7060335 (39254) 6470386 (111) 192071 (46266) 2604663 (84163) 7634670 (10) 894483 (27568) 7822601 (50645) 1044870 (6) 7215858 (6) 1129169 (10981) 5771135 (63666) 8707110 (6) 3508271 (57682) 3578812 (20) 8900616 (19) 267333 (44342) 6645538 (6) 7118637 (63381) 2806076 (6) 1633241 (45236) 6334408 (10) 3967833 (75615) 3768590 (10) 9177119 (27664) 2850979 (76624) 1064624 (6) 1338708 (6) 1358363 (1106) 7111817 (59025) 1429376 (6) 7276798 (20) 1845312 (6) 7225622 (6) 2353418 (10) 3322631 (8178) 3977031 (58006) 6590152 (10) 5468063 (63450) 2650195 (47114) 4240529 (41238) 4161499 (60278) 6561981 (37651) 5826070 (10) 8060848 (10) 3686996 (6) 3776514 (10) 1282146 (6) 5422621 (77788) 
     dis: 	3383.687 5151.526 5174.791 6280.505 6856.801 7162.279 7401.517 7548.316 7653.282 8065.928 8092.783 8095.444 8232.525 8263.234 8304.261 8305.850 8751.557 8765.941 8921.690 9005.738 9037.938 9207.074 9287.541 9295.510 9358.508 9503.126 9547.432 9682.424 9709.979 9720.692 9754.347 9826.381 9845.057 9902.561 9934.581 9960.715 9968.670 9976.283 9976.818 10046.421 10046.443 10175.123 10265.812 10273.459 10280.343 10302.426 10359.082 10425.788 10430.455 10433.818 10446.348 10459.145 10548.176 10634.722 10666.045 10674.922 10685.457 10694.720 10705.187 10717.777 10749.218 10766.950 10794.424 10794.605 10795.640 10806.342 10807.475 10842.400 10843.010 10846.146 10852.679 10882.132 10913.482 10936.475 10978.796 11003.252 11010.534 11027.307 11055.646 11084.078 11097.015 11098.298 11101.303 11103.541 11104.013 11118.324 11121.870 11124.773 11129.092 11138.511 11151.501 11157.244 11182.434 11183.772 11196.005 11198.382 11210.739 11214.681 11225.868 11227.405 
query 3 nn's (6, 6261, 89602): 1208824 (10) 1165548 (240) 1153720 (10) 9922446 (19) 1681561 (47276) 2871407 (53815) 4150154 (20) 9732223 (29802) 8906949 (25547) 7371232 (6) 1717763 (50161) 7664306 (6) 1370098 (6) 2187959 (53483) 6696694 (10) 8364431 (37914) 1986111 (53315) 3188407 (22130) 6027466 (6) 4559449 (9944) 7775637 (72150) 4889443 (51294) 5579814 (10) 909327 (49466) 6840798 (10) 1212415 (73815) 4251611 (65558) 9100185 (21069) 9157428 (6) 9232458 (6) 9619884 (10) 5081773 (72994) 4474761 (50534) 6920544 (10) 920948 (6) 3353499 (17132) 7415071 (89790) 580826 (6) 4216882 (19) 514827 (85870) 4298667 (15598) 3085720 (6) 1174052 (6) 5683960 (6) 2029271 (49219) 8821621 (48828) 9987911 (57752) 2958818 (6) 5962673 (27907) 4774185 (11689) 6703969 (21520) 629955 (91312) 2423598 (10) 1353097 (18025) 7885127 (87860) 786015 (61281) 1095751 (3793) 5946592 (6) 2919205 (14134) 5676630 (6) 237313 (28978) 7082379 (15416) 5119260 (6) 3483488 (6) 1605226 (6) 1752435 (70711) 6424074 (6) 1430920 (6) 823633 (88326) 7136455 (10845) 8726555 (62936) 2824029 (36861) 3922636 (10) 2838160 (19) 5615929 (46755) 3042886 (6) 108033 (26667) 3350710 (6) 5176976 (6) 2348869 (64708) 3431426 (6) 264481 (35825) 8182930 (19) 188678 (96) 9578036 (6) 9698504 (6) 9913885 (60725) 3172637 (16200) 1892004 (6) 3071605 (64937) 6689609 (79923) 2269546 (10) 2018818 (10) 382902 (10) 9998938 (6) 7512122 (6) 7102985 (71028) 1387773 (80877) 121059 (21361) 3266491 (16386) 
     dis: 	7734.653 7868.146 8343.044 8379.474 8437.070 8743.284 8779.334 8900.137 8931.419 9248.313 9693.879 9711.588 9830.996 9845.855 9879.809 9903.666 9955.667 9963.515 9992.361 10085.939 10128.719 10256.343 10258.041 10355.769 10394.680 10402.322 10446.959 10469.760 10479.249 10486.738 10487.235 10571.123 10583.493 10588.100 10598.635 10599.340 10707.939 10721.012 10790.293 10802.643 10805.649 10938.459 10968.396 10974.546 11021.347 11038.555 11134.352 11137.684 11144.863 11148.791 11161.422 11168.951 11173.438 11195.715 11221.344 11235.864 11270.502 11273.070 11287.721 11338.289 11385.740 11389.697 11401.229 11402.148 11454.059 11490.479 11499.923 11516.029 11520.618 11581.289 11586.643 11604.655 11615.467 11618.854 11636.772 11637.643 11639.113 11639.569 11640.282 11650.939 11693.234 11699.920 11707.943 11721.257 11728.289 11730.152 11741.680 11750.831 11764.045 11783.053 11787.401 11798.932 11827.555 11831.090 11927.916 11930.167 11933.174 11933.952 11939.329 11939.831 
query 4 nn's (6, 4810, 88155): 8316529 (64156) 5624462 (6) 3987492 (6) 1706143 (74584) 9970746 (10) 3107282 (10) 5744224 (10) 9323555 (92467) 9211260 (6) 7373067 (39358) 4549236 (423) 4390138 (6) 9052024 (10) 108240 (20) 9788862 (6) 4015525 (11328) 6480066 (10) 9578545 (92304) 2172340 (6) 73290 (6) 9652129 (88931) 2038833 (82871) 8302917 (86926) 6395393 (62993) 3367834 (6) 3037959 (83554) 9044829 (12188) 3693862 (6) 4842135 (17476) 1906000 (10) 3436988 (6) 6934935 (90864) 6557844 (6) 915880 (162) 6091565 (55742) 8608979 (76983) 3480152 (6) 6001275 (95376) 3264396 (10) 8415758 (10) 3073679 (50688) 9374623 (98354) 1171695 (78988) 2986049 (37305) 1384227 (75370) 3598596 (19) 2190868 (6) 6634262 (6) 6581013 (60466) 3655068 (6) 9164737 (21477) 9240243 (60912) 1504549 (26741) 1030896 (6) 3421968 (6) 8774147 (34934) 3195289 (13503) 4942478 (6) 3192757 (98813) 7558970 (6) 2795570 (10) 8359241 (91750) 6836665 (17999) 9519711 (95188) 8832563 (15634) 980351 (43915) 9438625 (87985) 4019507 (59027) 3484563 (72254) 9832113 (98049) 1995354 (10) 5323762 (10) 8342661 (66531) 4637157 (25557) 9019284 (6) 9688429 (96277) 5663813 (20654) 8627902 (6) 8641215 (2086) 3506156 (6) 6790336 (6) 2266290 (10) 1973506 (6) 3934821 (70363) 2337939 (41530) 9407510 (20) 3299088 (10) 3852808 (10) 1111927 (84932) 3452212 (19) 569140 (6) 1071436 (20) 1306176 (10) 2473330 (6) 8452116 (6) 6738443 (74580) 8584382 (10) 5812999 (43187) 4514688 (19) 2699285 (75655) 
     dis: 	2200.067 3592.018 3754.258 4565.575 5232.411 5282.076 5427.193 5444.871 5811.854 5812.935 5835.722 5974.076 5982.784 6069.213 6165.131 6207.134 6247.875 6264.084 6268.124 6270.180 6290.574 6331.320 6350.396 6392.427 6414.258 6421.977 6425.558 6475.289 6489.069 6515.235 6519.250 6553.997 6557.499 6564.545 6602.386 6603.944 6616.665 6623.186 6626.527 6638.456 6645.483 6652.190 6656.642 6665.578 6681.369 6704.117 6715.320 6716.867 6731.655 6733.690 6735.074 6761.424 6768.218 6772.979 6780.017 6782.499 6787.833 6812.438 6820.370 6824.336 6830.116 6850.580 6851.380 6857.095 6873.786 6885.774 6895.227 6904.375 6907.527 6907.686 6910.196 6927.355 6927.873 6930.838 6955.537 6969.197 6989.871 7008.999 7011.688 7013.160 7015.203 7021.719 7024.929 7026.122 7043.858 7046.604 7055.524 7058.542 7067.533 7067.960 7074.918 7087.128 7104.427 7114.095 7116.591 7120.815 7129.590 7132.506 7133.161 7133.228 
[ 844.357s ] *** Query time: 319.105
qps: 31.338
 *** ivfpq recall 
ivfpq get 949681 postive res from 1000000 results, recall@100:0.950
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.003 0.009 0.027 0.091 0.810 0.060 
finished ivfpq index examples
[ 844.397s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 500 100"
	User time (seconds): 840.33
	System time (seconds): 3.07
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 14:04.53
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2449320
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 999674
	Voluntary context switches: 4691
	Involuntary context switches: 1423
	Swaps: 0
	File system inputs: 223504
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:00
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 500
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.365s ] Loaded metadata, 20000000 attr's found
[ 1.365s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.368s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.370s ] Loaded 10000 spacev10m queries
[ 1.439s ] Loaded ground truth, gt_size: 100
[ 1.439s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.546s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 634.493s ] Query results (vector ids, then distances):
query 0 nn's (10, 3924, 37259): 5096505 (9625) 290760 (6) 3082748 (6) 2037978 (10) 1360571 (80630) 7305168 (6) 1858226 (10) 4287666 (6) 6240106 (6) 9234384 (6) 7330716 (6) 4715886 (6) 7115332 (6) 1636600 (10) 8725926 (6) 8066928 (6) 6896772 (6) 8681946 (6) 2641910 (20) 3422560 (10) 5014941 (3474) 8396792 (10) 100232 (6) 8430941 (18601) 2168891 (62029) 1369261 (94704) 261368 (6) 4257711 (1905) 2336751 (30949) 7615253 (5831) 8067752 (6) 682113 (49176) 8394786 (6) 9284314 (20) 1736948 (10) 651634 (6) 3589892 (19) 3987166 (10) 6050258 (20) 2072288 (19) 1545663 (143) 8814646 (10) 9974866 (10) 714617 (17290) 9482370 (20) 516556 (10) 6134085 (77084) 2540985 (53571) 4245122 (6) 7976764 (10) 4246173 (87341) 2533258 (10) 5239982 (19) 303346 (6) 5949911 (63478) 1334146 (6) 7765395 (8371) 546824 (6) 1514436 (10) 5614058 (10) 360414 (6) 7338594 (344) 9416199 (6022) 219342 (10) 8015573 (28886) 4087833 (51029) 8356040 (19) 4426046 (6) 7156109 (48486) 6224069 (77912) 2640588 (6) 67427 (50293) 9697052 (6) 8944530 (10) 9590656 (10) 5897434 (10) 1436288 (6) 5232970 (92) 9686287 (74094) 9641558 (6) 5822268 (6) 3847526 (6) 2786794 (6) 9121769 (97044) 180303 (87008) 3429928 (10) 3742458 (6) 4916361 (77798) 554086 (6) 3906051 (58164) 7303024 (6) 1781260 (10) 3069386 (19) 9931603 (98094) 2356719 (80406) 439743 (36555) 8006237 (8477) 4710741 (55452) 2988486 (308) 5106355 (64682) 
     dis: 	6160.498 6278.234 6912.179 7727.770 7775.480 7796.184 8437.510 8505.412 8817.863 9082.562 9334.041 9427.844 9487.969 9488.251 9539.368 9579.247 9670.004 9858.562 9872.243 9910.342 9979.199 10153.791 10194.338 10349.329 10453.116 10499.105 10507.526 10551.658 10780.150 10811.652 10843.920 10888.851 10890.170 10977.995 10982.784 10989.107 11015.248 11043.688 11062.088 11062.522 11103.418 11105.123 11105.262 11143.652 11145.988 11174.098 11265.849 11270.858 11326.951 11354.200 11382.648 11410.334 11414.242 11418.144 11448.229 11454.996 11455.246 11517.639 11605.689 11699.774 11763.213 11784.912 11983.867 12062.336 12066.370 12074.582 12108.059 12155.451 12175.345 12225.413 12253.543 12266.567 12391.619 12407.234 12448.757 12455.973 12498.021 12508.701 12525.904 12572.834 12572.902 12607.188 12623.643 12627.449 12673.096 12677.688 12679.091 12683.059 12694.340 12695.281 12785.111 12790.994 12815.275 12869.922 12955.258 13051.428 13060.854 13100.057 13150.191 13190.874 
query 1 nn's (10, 9720, 43052): 1027770 (10) 4573755 (44328) 1087257 (20765) 8663938 (6) 9844113 (43208) 9311189 (14848) 7957281 (57347) 4561316 (10) 4813594 (6) 5325898 (10) 5642421 (72495) 3171582 (20) 3730938 (10) 4612326 (19) 1259440 (6) 3302437 (12504) 1580619 (77831) 1873620 (6) 7414037 (43413) 3695413 (52311) 6236935 (5348) 6716625 (67701) 8086137 (21337) 3367543 (45163) 4090413 (91123) 4414583 (63322) 1532818 (6) 1762608 (6) 829204 (6) 441527 (9652) 8680758 (19) 1149324 (6) 4568459 (33980) 7294001 (20341) 3745827 (47474) 4907845 (95666) 7675119 (89394) 5839752 (6) 148357 (88940) 7452717 (10236) 5984083 (95130) 3916292 (6) 7853534 (6) 7584986 (6) 5966468 (10) 4472702 (6) 6894603 (38096) 783848 (10) 6136881 (74039) 7115780 (6) 635323 (45248) 3159596 (6) 210208 (6) 2360244 (10) 6385836 (6) 4346513 (91815) 6800131 (71714) 4444284 (6) 4738364 (6) 3758565 (65555) 5790200 (6) 3989720 (6) 4931402 (6) 4990177 (7410) 1438709 (74171) 6955583 (85626) 7069505 (29407) 8750865 (6698) 3984563 (65334) 8458602 (10) 7158140 (6) 289405 (29485) 364702 (6) 7771932 (10) 5631441 (83415) 2929751 (2614) 8846889 (47545) 4647345 (52912) 5876514 (6) 5295974 (6) 1617045 (38) 4988377 (43698) 5893116 (6) 1876507 (45631) 5614167 (22532) 2486169 (18802) 1080775 (45906) 8112258 (6) 7398354 (10) 2334617 (12236) 2161411 (82422) 7351899 (53253) 3277999 (98870) 6109984 (6) 9525080 (6) 8058718 (6) 5618310 (19) 9970073 (52146) 4983695 (83697) 4887323 (42852) 
     dis: 	4900.294 7778.962 8504.258 9825.778 9918.366 10192.278 10204.871 10290.205 10476.307 10493.963 10691.302 10739.775 10775.303 10835.596 11053.697 11084.652 11107.436 11137.979 11165.908 11216.260 11230.197 11266.129 11333.355 11350.776 11365.162 11380.984 11436.645 11465.919 11511.780 11576.162 11672.676 11689.996 11708.830 11724.800 11900.329 11918.232 11922.650 11935.250 11983.860 11987.536 11991.239 12069.945 12114.486 12140.871 12162.845 12166.013 12170.859 12194.902 12208.055 12221.067 12234.403 12254.244 12304.533 12348.452 12380.741 12404.302 12410.097 12432.243 12504.592 12536.977 12582.086 12652.116 12666.665 12683.921 12685.432 12687.573 12689.310 12734.281 12765.764 12776.756 12780.536 12806.768 12807.728 12847.917 12870.703 12892.762 12898.844 12923.687 12938.693 12951.453 12956.312 12989.548 13027.938 13049.474 13082.157 13098.204 13110.924 13120.432 13138.112 13144.742 13157.663 13158.241 13170.408 13213.385 13225.686 13241.506 13259.928 13262.048 13262.956 13276.094 
query 2 nn's (10, 65731, 99055): 4574760 (6) 2734445 (62180) 3524579 (72890) 2212807 (72328) 2882757 (81431) 2884416 (6) 3361974 (6) 323907 (85292) 1054367 (41497) 7433556 (6) 5263567 (43618) 6936789 (35043) 9425562 (6) 7287401 (63557) 4517312 (6) 1481955 (47148) 6794035 (99007) 7037734 (6) 9436299 (42456) 5217876 (10) 5943431 (21031) 3436280 (10) 8773369 (45165) 125926 (6) 6514144 (6) 9117124 (6) 9621014 (6) 5844655 (6963) 2677908 (6) 324947 (2090) 8126778 (6) 3542525 (1433) 9501475 (59607) 2506689 (56410) 2208896 (10) 43674 (6) 9343410 (6) 6687735 (71983) 7276972 (10) 8736868 (6) 386581 (7077) 4303503 (90123) 4934241 (14114) 4348412 (19) 7268134 (10) 6347954 (6) 9088619 (83057) 3001913 (18239) 4097218 (10) 8148675 (41370) 9776551 (5555) 7377075 (45641) 6031718 (6) 9385299 (9599) 4559518 (6) 3034378 (10) 714612 (6) 7089200 (6) 2243367 (72661) 3762208 (10) 8641266 (6) 9989075 (12067) 2925428 (6) 3263555 (81940) 7780614 (6) 8311897 (50957) 424378 (6) 4746644 (10) 1666933 (77307) 9876020 (6) 1665093 (89854) 1784007 (55943) 5917626 (10) 5781317 (94461) 4399607 (73440) 1142982 (6) 9378693 (30241) 8789747 (88553) 8623607 (95808) 4415064 (6) 8426641 (26098) 9968918 (6) 6450938 (6) 1057914 (6) 8499140 (10) 6971285 (6443) 1898905 (23294) 3773784 (6) 8347308 (10) 5771490 (6) 735869 (83643) 6637718 (6) 4317099 (52213) 4520659 (70540) 9537222 (10) 2054469 (31231) 2476245 (87966) 3163205 (8572) 5724947 (61980) 2992192 (6) 
     dis: 	3037.224 4128.249 5012.328 6225.845 7168.193 8934.234 9248.015 9264.332 9505.341 10019.524 10312.901 10376.779 10406.655 10431.211 10462.508 10465.736 10667.146 10723.768 10791.883 11169.767 11352.115 11355.989 11434.844 11486.619 11543.061 11678.232 11726.144 11776.938 11795.876 11811.632 11814.823 11817.178 11860.188 11881.285 11983.184 12067.313 12117.327 12185.260 12187.892 12311.448 12323.450 12350.954 12366.891 12389.384 12399.491 12410.939 12420.573 12486.075 12486.389 12509.625 12520.651 12550.630 12553.613 12572.166 12589.342 12664.808 12672.695 12675.002 12703.355 12746.743 12754.693 12765.141 12783.828 12790.481 12823.721 12827.873 12844.629 12849.889 12849.970 12911.488 12936.507 12992.803 13007.004 13033.638 13049.998 13068.738 13096.613 13119.956 13128.656 13144.067 13149.493 13159.960 13173.264 13192.734 13210.560 13213.412 13258.002 13277.037 13281.899 13284.111 13292.547 13301.670 13310.930 13313.373 13340.627 13348.997 13375.941 13397.585 13409.312 13428.921 
query 3 nn's (10, 35398, 68747): 4286832 (6) 1866926 (10) 4371036 (10) 9455216 (10) 6638511 (98660) 8818246 (244) 9398930 (10) 8584054 (6) 6447414 (6) 9793596 (6) 7010095 (62148) 3626273 (86418) 9671911 (39418) 7010252 (10) 4194256 (6) 3378586 (10) 5677498 (6) 5631232 (6) 8169180 (6) 2343424 (10) 8171167 (97295) 8145731 (62229) 5868840 (6) 7557678 (6) 5056650 (6) 1612122 (6) 82182 (6) 5650507 (38449) 4227632 (10) 3882137 (33096) 999848 (6) 3542029 (94474) 4972572 (6) 5555953 (79445) 1453923 (16966) 50823 (36593) 6373283 (17045) 7316328 (19) 6193105 (29164) 7306636 (6) 444968 (6) 6776942 (10) 5429466 (6) 4682173 (77919) 7865786 (10) 2350194 (10) 1835654 (6) 8579187 (32988) 1162941 (10072) 8073919 (84424) 8518674 (6) 4281239 (59268) 1887300 (6) 3208235 (38668) 8768561 (71082) 9721866 (10) 7892339 (81458) 3712306 (6) 539131 (76468) 8752097 (94760) 2687611 (25548) 7445329 (3190) 8498178 (10) 6514454 (10) 5241021 (92228) 90176 (6) 6928139 (93410) 544442 (6) 8558618 (10) 1252238 (6) 398304 (10) 8523189 (25785) 4003247 (71961) 2123002 (6) 9275045 (65335) 3957189 (50071) 3909063 (23878) 8909017 (43448) 3237195 (98420) 4767661 (82416) 6637643 (8204) 347839 (893) 6752785 (43241) 3400340 (10) 7756249 (35229) 9323463 (76225) 9677670 (20) 4641079 (43040) 8851651 (39548) 930598 (6) 2422728 (6) 8193056 (6) 105643 (20775) 6971821 (22326) 7004651 (82199) 2338828 (10) 4338390 (6) 5340508 (6) 9427137 (53690) 5684972 (6) 
     dis: 	4919.051 9213.961 9416.685 9468.189 9663.204 10132.153 10182.354 10461.397 10493.938 10579.027 10790.184 10817.467 10995.527 11135.498 11294.844 11389.465 11394.220 11481.100 11531.359 11625.063 11637.771 11672.362 11773.513 11846.004 11883.267 11950.029 12055.729 12076.046 12094.209 12111.486 12122.623 12136.415 12139.734 12157.160 12158.029 12227.484 12248.588 12253.777 12296.252 12420.200 12496.656 12510.725 12519.433 12529.905 12586.165 12598.317 12668.635 12707.445 12723.738 12815.128 12869.757 12897.088 12941.682 13075.272 13101.557 13110.483 13158.271 13163.304 13178.711 13199.312 13225.676 13254.113 13257.084 13284.016 13294.702 13312.993 13337.543 13352.691 13364.437 13372.688 13387.631 13407.435 13422.107 13436.314 13454.413 13471.041 13486.473 13489.327 13501.428 13521.298 13537.578 13551.142 13569.811 13575.195 13576.402 13577.740 13579.523 13580.445 13609.520 13609.720 13622.903 13654.949 13655.592 13659.250 13702.378 13707.799 13737.175 13744.434 13792.545 13804.418 
query 4 nn's (10, 39745, 73096): 6279473 (10230) 3097455 (50325) 7159963 (62873) 4242116 (6) 5466057 (55105) 3531751 (91022) 8728294 (6) 5054423 (97501) 7177846 (6) 8212769 (38457) 9170839 (59443) 9600067 (19686) 4175678 (10) 1875114 (10) 5723523 (29955) 4927776 (19) 7466093 (73143) 6275087 (73822) 4159743 (53470) 717371 (22576) 7816576 (6) 8544239 (78274) 1591058 (10) 9244311 (36263) 1549949 (20503) 9357339 (52719) 9444072 (6) 7744232 (6) 7986656 (6) 1622397 (38371) 2908632 (10) 6902422 (6) 2558882 (19) 5464207 (29402) 553412 (6) 6136471 (82223) 1692375 (93502) 8588474 (6) 3914491 (20375) 5230386 (10) 20028 (10) 9021130 (10) 3084490 (10) 1874504 (6) 2323593 (36769) 4076040 (6) 1228595 (5316) 6473453 (60774) 4340455 (67721) 4623003 (58918) 2695855 (91508) 5374432 (6) 7271477 (44376) 2575576 (6) 8952522 (6) 8045505 (9884) 5220285 (80328) 4555663 (57071) 7771201 (31191) 3323197 (25649) 6181972 (10) 307550 (20) 7231264 (6) 5187516 (10) 9151038 (6) 2286717 (18489) 8321482 (10) 3351548 (6) 4919872 (6) 3329498 (10) 7831448 (10) 9115835 (34115) 8761193 (54354) 2653454 (6) 9493852 (6) 4270413 (92136) 3358095 (15551) 1485599 (27802) 5704287 (64331) 883849 (20368) 2503898 (6) 2241099 (16659) 4974771 (94642) 5938686 (10) 7759992 (6) 3570069 (88087) 93980 (6) 8306343 (56166) 5129396 (10) 4948099 (78623) 952427 (92966) 3958600 (10) 3841914 (6) 2080666 (10) 1128048 (6) 7161492 (10) 504144 (6) 3584339 (11161) 4249166 (6) 8904857 (74538) 
     dis: 	6069.213 6382.278 6531.316 6557.118 6859.221 6875.700 6878.477 6917.908 7002.879 7019.051 7080.782 7122.453 7134.933 7139.737 7155.973 7165.164 7220.578 7233.383 7234.198 7239.672 7283.308 7291.521 7304.115 7380.811 7385.746 7391.013 7416.395 7417.954 7426.277 7439.536 7445.942 7453.244 7457.770 7459.692 7460.139 7482.884 7491.257 7523.069 7528.042 7528.663 7548.111 7553.635 7577.490 7582.828 7585.034 7606.914 7607.780 7610.180 7628.569 7632.174 7642.087 7642.104 7645.693 7646.924 7648.132 7662.509 7663.185 7670.592 7672.954 7683.677 7684.637 7686.629 7687.052 7702.104 7703.647 7707.172 7712.954 7719.940 7723.284 7725.755 7740.245 7745.397 7748.877 7749.764 7752.497 7755.468 7756.306 7771.007 7773.072 7776.127 7776.728 7777.173 7777.289 7795.663 7806.980 7826.650 7830.622 7841.637 7846.044 7850.478 7855.403 7856.371 7859.153 7859.231 7859.636 7868.362 7870.894 7881.909 7892.112 7903.654 
[ 634.494s ] *** Query time: 153.282
qps: 65.239
 *** ivfpq recall 
ivfpq get 937952 postive res from 1000000 results, recall@100:0.938
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.002 0.010 0.036 0.141 0.771 0.040 
finished ivfpq index examples
[ 634.539s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 500 100"
	User time (seconds): 630.22
	System time (seconds): 4.45
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 10:34.69
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2450344
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2519521
	Voluntary context switches: 1
	Involuntary context switches: 650
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:52
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 500
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.410s ] Loaded metadata, 20000000 attr's found
[ 1.410s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.413s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.416s ] Loaded 10000 spacev10m queries
[ 1.485s ] Loaded ground truth, gt_size: 100
[ 1.485s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.956s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 289.464s ] Query results (vector ids, then distances):
query 0 nn's (19, 24678, 44673): 606211 (23188) 8563527 (92278) 8341867 (22135) 1247229 (31426) 7386818 (6) 5099788 (10) 4692244 (20) 1295714 (6) 3478005 (74388) 6401363 (71983) 8068050 (10) 2939481 (89029) 381871 (14875) 4211205 (86350) 4858944 (6) 98109 (22665) 5761926 (10) 7721671 (16844) 780905 (20991) 9743801 (42331) 2650359 (92108) 6722204 (10) 4291411 (11004) 9794049 (61952) 5393242 (6) 5483783 (32922) 5930822 (6) 6258833 (91894) 4362735 (95141) 3880505 (96603) 2990864 (6) 6156711 (33548) 3131738 (6) 4251902 (6) 8934721 (96729) 3679669 (39472) 8810194 (6) 9537041 (63454) 4873477 (71979) 8483442 (6) 1911893 (35461) 6572584 (10) 2081825 (10572) 8854790 (6) 4140535 (19784) 9945849 (78417) 5292751 (83395) 6073415 (76124) 3681903 (84499) 7614065 (79639) 5308023 (37537) 9121390 (10) 9877775 (53456) 8766603 (78648) 3491630 (10) 2717509 (53132) 8386427 (53058) 1790824 (10) 4667288 (10) 8456604 (10) 4528535 (41901) 2862947 (32210) 1916929 (73556) 6840562 (19) 1379220 (10) 1778191 (48019) 3415574 (6) 4045693 (51283) 2361120 (10) 6920872 (10) 4173197 (24434) 3778434 (10) 2469713 (34605) 9333102 (6) 3377017 (74220) 6504447 (7240) 3870109 (9596) 6207748 (10) 2971305 (81576) 621445 (12231) 4642262 (10) 4385563 (49890) 8466886 (10) 4170448 (6) 4994673 (73073) 1223057 (69679) 3119248 (10) 902759 (65674) 1167123 (5864) 715355 (63439) 5385348 (6) 223169 (4693) 3348221 (32703) 1561869 (86562) 6850452 (6) 1688319 (5495) 8498546 (6) 1028476 (6) 9881523 (68425) 8056445 (26064) 
     dis: 	5289.615 9552.178 9558.711 10041.604 10672.711 11549.822 11872.273 11899.227 12080.354 12171.408 12177.433 12633.062 12739.271 12950.457 13416.838 13599.217 13674.104 14209.195 14292.407 14386.275 14604.600 14613.279 15009.527 15080.457 15204.600 15295.438 15398.717 15503.051 15547.392 15780.568 15822.655 15952.001 16011.138 16034.934 16077.520 16214.021 16241.886 16309.204 16365.047 16366.093 16401.297 16403.156 16468.729 16524.059 16524.922 16567.434 16625.248 16644.861 16655.184 16707.395 16771.598 16780.531 16836.293 16862.990 16895.023 16966.615 17051.051 17061.537 17079.934 17169.961 17190.408 17206.924 17244.734 17258.338 17322.811 17343.295 17365.250 17371.953 17378.410 17394.496 17398.004 17415.658 17417.965 17421.189 17443.598 17453.727 17489.367 17514.004 17537.242 17555.785 17568.979 17571.957 17595.570 17597.996 17608.469 17609.486 17624.771 17654.508 17657.311 17661.516 17665.451 17684.082 17720.191 17721.588 17735.363 17744.162 17752.680 17761.396 17776.418 17800.590 
query 1 nn's (19, 22162, 42151): 7629371 (73090) 7000075 (41024) 9910036 (6) 9504433 (45209) 4745747 (58200) 8597183 (51106) 299136 (10) 6704562 (10) 8126210 (6) 466678 (6) 917900 (10) 5927260 (20) 6889844 (6) 2578572 (6) 5387681 (80208) 3446311 (70094) 6924138 (6) 4913422 (10) 7710285 (12863) 1390768 (6) 7369157 (71510) 2551743 (80091) 3667325 (22985) 4975676 (10) 7116695 (37869) 9314709 (25990) 9016462 (6) 9015997 (12562) 9447917 (84595) 4688276 (6) 456429 (95060) 2548862 (10) 8971326 (6) 8074005 (53024) 974883 (91643) 7517563 (5718) 1761605 (29360) 6730909 (50694) 8831718 (6) 6658936 (6) 8711709 (52438) 8755443 (95603) 1251563 (28537) 3315823 (66441) 4596245 (4831) 4147432 (6) 2051864 (6) 4921786 (6) 5050030 (6) 769719 (96582) 9811940 (6) 6535434 (10) 3170216 (6) 2336420 (6) 3424621 (8436) 7234211 (25778) 1260690 (10) 1209218 (6) 260938 (6) 1613947 (27887) 3861097 (26500) 5375921 (87434) 4735051 (95089) 7895036 (19) 9131618 (10) 6139585 (68848) 2933751 (90555) 4025972 (6) 3421252 (10) 2403813 (17534) 3127767 (42890) 7020375 (49124) 6432134 (10) 1416324 (10) 2455051 (85835) 7713079 (80372) 169053 (47679) 4182888 (6) 2700679 (29304) 7931274 (10) 9936417 (8401) 9194394 (6) 5303679 (65768) 3251921 (76425) 8934575 (69335) 6219387 (5451) 4998285 (64193) 1147994 (6) 3366570 (6) 6138568 (20) 8298406 (6) 5052063 (54660) 892064 (10) 2632415 (82954) 664929 (88245) 6084218 (6) 4178593 (85476) 4946176 (10) 2129464 (10) 1932007 (50732) 
     dis: 	11462.951 11665.045 12335.292 12472.165 12577.787 12818.771 12928.420 13235.133 13373.596 13700.214 13926.976 14195.346 14244.695 14285.805 14355.312 14420.670 14475.097 14496.322 14528.854 14663.777 14665.203 14672.203 14718.261 14739.433 14755.619 14816.072 14837.809 14905.593 14929.469 14948.428 14964.011 15008.910 15075.014 15156.439 15184.861 15228.595 15251.213 15326.942 15386.261 15390.130 15421.438 15454.328 15462.741 15487.472 15488.839 15489.946 15507.006 15519.133 15521.756 15524.001 15557.358 15602.764 15649.307 15686.904 15694.982 15695.168 15714.761 15725.088 15740.856 15747.411 15769.656 15791.121 15819.070 15848.044 15870.678 15871.670 15877.651 15889.066 15898.038 15975.633 16054.910 16095.526 16113.914 16132.048 16154.586 16158.513 16176.803 16184.177 16192.039 16234.387 16250.726 16270.762 16277.954 16278.438 16285.049 16292.548 16297.412 16298.512 16301.590 16313.053 16315.577 16417.117 16429.686 16435.408 16443.994 16446.223 16447.365 16467.922 16484.820 16486.264 
query 2 nn's (19, 17210, 37204): 9743895 (97756) 5920553 (95980) 613441 (9068) 8553474 (6) 8625378 (6) 3159516 (6) 6805269 (66019) 2927516 (6) 9947550 (10) 6973245 (35145) 723041 (33742) 9752287 (16218) 3927975 (6843) 1698840 (10) 7408620 (10) 3688345 (14406) 2659846 (6) 4136014 (19) 4165900 (6) 6155804 (20) 9101297 (817) 3730180 (6) 1562549 (50932) 1612308 (10) 2691180 (6) 9310854 (6) 7567333 (15085) 8558626 (10) 1274794 (6) 9265843 (94069) 8985927 (41447) 7266068 (10) 9022813 (53109) 9227291 (563) 4879528 (6) 9481862 (10) 5711880 (10) 8604151 (47662) 9647608 (6) 186885 (19079) 9488512 (10) 6146935 (62612) 9857208 (6) 2944774 (6) 3883745 (60814) 7600699 (45737) 7085927 (33261) 8727780 (19) 789015 (78424) 5149644 (19) 8848372 (20) 2730876 (6) 2998418 (6) 2896733 (51227) 2132158 (404) 5480815 (68213) 3982760 (19) 6013414 (6) 4208389 (32217) 1263593 (3917) 3932643 (53393) 7206765 (12311) 5169734 (10) 4320438 (6) 7948669 (43582) 6733534 (6) 9320860 (6) 3431293 (6481) 516750 (6) 312853 (20377) 3076009 (49101) 5601675 (18052) 1480493 (46182) 1381008 (10) 5135803 (41054) 8164048 (6) 5670908 (6) 8460021 (45029) 1191712 (6) 8633743 (68541) 785884 (10) 6772973 (25687) 2574933 (67093) 455240 (6) 4982082 (20) 3309134 (10) 773658 (6) 1914532 (6) 4351754 (6) 7350061 (30576) 449527 (71436) 8544760 (10) 3537121 (33641) 2168885 (97190) 6356166 (6) 7805479 (74460) 9872293 (69953) 7998225 (27041) 2061893 (68770) 3491996 (6) 
     dis: 	10141.879 11571.037 11952.854 11953.891 12103.476 12206.623 13164.906 13183.086 13348.054 13364.833 13577.545 13664.190 13675.917 13849.594 14000.630 14023.646 14093.936 14158.451 14256.266 14323.236 14388.593 14392.973 14405.043 14464.764 14483.544 14562.803 14564.975 14646.246 14656.311 14712.674 14744.109 14840.658 14858.343 14890.354 14907.352 14929.389 14987.134 15039.744 15042.623 15053.449 15071.533 15072.198 15078.539 15079.482 15167.137 15222.646 15233.253 15299.389 15327.538 15329.539 15332.775 15372.713 15376.822 15380.318 15388.783 15410.996 15449.778 15486.816 15487.131 15487.858 15500.175 15514.219 15531.670 15537.990 15563.771 15565.190 15569.844 15579.369 15598.602 15636.508 15653.841 15675.509 15675.731 15688.628 15780.730 15782.025 15782.344 15800.901 15809.614 15826.895 15832.945 15863.449 15878.107 15893.642 15927.724 15987.860 16007.215 16046.080 16067.250 16081.210 16114.754 16116.039 16181.345 16183.727 16190.906 16192.061 16192.967 16251.787 16264.674 16285.678 
query 3 nn's (19, 37494, 57500): 7020630 (6) 3279722 (10) 233485 (63137) 3624059 (10908) 5731015 (75901) 8298687 (74835) 9005255 (27797) 3228780 (10) 7061054 (6) 4112389 (84823) 3435124 (19) 5944039 (39919) 475364 (6) 144151 (40994) 3631532 (6) 5835892 (6) 9798183 (6266) 66862 (6) 1777899 (13960) 3796435 (47778) 4193973 (27748) 2275550 (10) 2359816 (6) 9442587 (55060) 3172770 (10) 9424710 (6) 2367932 (10) 6142617 (74061) 6236461 (36735) 7848569 (44800) 1945708 (10) 4931198 (6) 6907084 (6) 5101707 (81689) 5618964 (6) 3198515 (53605) 4631507 (53071) 3098845 (64247) 7216314 (10) 7912429 (415) 2578000 (10) 8168952 (6) 3707169 (37013) 5680616 (6) 4936163 (42555) 2638013 (70243) 4273656 (6) 9565401 (31035) 4056913 (96591) 5187658 (10) 3118308 (6) 2021787 (1983) 2757856 (10) 6937647 (41039) 3660271 (51926) 3283983 (13690) 6233184 (19) 5145634 (6) 5874609 (40365) 6418756 (6) 4691210 (6) 1832154 (6) 9506342 (6) 3439669 (49525) 2284179 (44852) 6995697 (71697) 9169331 (31006) 8062480 (10) 2695982 (6) 613149 (59212) 6898870 (6) 1559549 (12960) 5392051 (91592) 9823400 (6) 879756 (91) 9022096 (6) 4813063 (10079) 2926497 (28539) 4241294 (10) 1357332 (10) 27730 (6) 8477356 (6) 9310272 (6) 6319521 (28467) 8516575 (58074) 5857059 (31963) 9098100 (10) 1196539 (6498) 1357866 (6) 4401834 (6) 7438013 (23422) 8659438 (6) 6636204 (6) 5687782 (6) 6046099 (75045) 1519363 (84969) 788269 (71455) 428097 (32040) 7347910 (6) 3665757 (18225) 
     dis: 	8929.123 11934.662 12255.984 12583.368 12732.674 12916.988 13351.230 13487.640 13670.456 13695.109 13769.501 14318.245 14322.418 14367.473 14414.933 14461.484 14490.291 14555.438 14627.363 14738.779 14888.605 14951.794 15114.703 15268.342 15287.396 15329.260 15338.867 15425.604 15440.470 15478.932 15584.528 15592.766 15649.555 15691.146 15735.271 15736.282 15748.381 15789.180 15789.793 15852.560 15882.307 15899.047 15901.592 15958.221 16004.772 16014.271 16187.648 16192.584 16246.965 16280.786 16285.370 16289.141 16318.997 16346.509 16371.838 16400.346 16409.826 16525.994 16555.000 16567.297 16607.494 16624.932 16650.580 16667.234 16673.771 16693.719 16695.354 16697.992 16732.662 16737.445 16757.752 16791.488 16848.125 16859.117 16871.182 16880.141 16897.564 16952.566 16972.557 16977.035 17057.174 17083.229 17093.801 17102.277 17159.531 17159.938 17200.896 17204.014 17216.523 17241.490 17265.535 17274.578 17274.771 17282.684 17301.020 17305.299 17320.006 17322.102 17360.631 17368.967 
query 4 nn's (19, 12989, 32993): 6527555 (13143) 449527 (71436) 1444782 (20) 2066916 (10) 3533412 (6) 5123136 (6) 5752140 (10) 1060205 (89351) 4293822 (6) 4057764 (10) 6871337 (3258) 1011831 (53093) 4564064 (10) 403008 (6) 227606 (6) 821831 (11843) 9691493 (33505) 3452999 (76205) 7069841 (72835) 6405716 (6) 4447825 (11041) 3677211 (30957) 3498846 (10) 8138170 (10) 7931269 (1709) 2300922 (10) 2662308 (6) 3474004 (6) 9473133 (19074) 292066 (19) 1210319 (64652) 3908403 (12127) 8435905 (87555) 8855986 (6) 982635 (13403) 1417660 (6) 7439329 (41634) 7443353 (11776) 9127320 (6) 8075785 (72915) 9470574 (10) 990595 (23233) 7585854 (10) 3003315 (58307) 7875692 (6) 2933243 (83160) 5671337 (18234) 7510815 (14684) 1684072 (6) 2100187 (75481) 1052216 (6) 6218895 (65863) 4137679 (21567) 8938288 (19) 5228110 (6) 7283113 (66269) 9947601 (92507) 6940324 (10) 2759392 (10) 6213960 (10) 5437977 (10922) 4952314 (6) 9308064 (6) 3124086 (10) 1205858 (10) 384852 (19) 3512665 (17377) 3052749 (2412) 5708643 (70562) 8318558 (6) 8743339 (27558) 7913547 (99441) 8181039 (51906) 2400859 (6844) 1477574 (6) 770350 (6) 4213273 (2365) 724775 (79230) 6344195 (51725) 3859647 (42374) 8213527 (74145) 338490 (6) 6556436 (6) 2540925 (26388) 4839208 (6) 1241340 (6) 1404701 (12443) 7042771 (13572) 1841967 (75539) 6852922 (6) 3840151 (3362) 4111692 (6) 8726714 (6) 6189329 (19578) 8952435 (53865) 7622152 (6) 3868080 (6) 148795 (47551) 3135950 (10) 877945 (9891) 
     dis: 	6296.200 6766.941 6826.149 6887.528 7197.897 7199.531 7266.562 7393.160 7608.403 7648.819 7687.899 7799.183 7852.260 7906.099 7918.564 7969.838 8058.603 8059.026 8063.626 8071.614 8157.116 8161.672 8165.363 8180.013 8269.951 8272.828 8293.965 8299.906 8312.936 8314.938 8328.854 8341.210 8348.406 8354.144 8361.723 8367.696 8371.994 8385.691 8398.816 8448.024 8467.283 8472.323 8473.492 8476.643 8484.346 8484.379 8485.613 8488.660 8493.075 8514.444 8531.258 8532.266 8554.410 8564.060 8568.705 8576.779 8596.742 8611.676 8620.880 8621.984 8652.971 8658.109 8673.469 8701.783 8704.868 8708.557 8722.691 8725.829 8727.291 8729.013 8732.601 8742.033 8752.396 8765.874 8780.270 8793.131 8799.064 8805.631 8852.344 8856.718 8858.623 8869.538 8885.596 8886.676 8893.713 8903.368 8904.796 8911.293 8917.562 8926.863 8946.014 8955.399 8987.893 8988.283 8993.844 8994.938 8998.470 9006.691 9033.209 9043.551 
[ 289.465s ] *** Query time: 134.230
qps: 74.499
 *** ivfpq recall 
ivfpq get 868261 postive res from 1000000 results, recall@100:0.868
recall dist(10% per bucket): 0.000 0.001 0.001 0.002 0.008 0.021 0.060 0.137 0.238 0.516 0.016 
finished ivfpq index examples
[ 289.498s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 500 100"
	User time (seconds): 287.04
	System time (seconds): 2.54
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:49.60
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2448532
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1520077
	Voluntary context switches: 2
	Involuntary context switches: 193
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
