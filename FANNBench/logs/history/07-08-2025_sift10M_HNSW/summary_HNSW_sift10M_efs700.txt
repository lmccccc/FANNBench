Start time: 23:26
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 700
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.755s ] Loaded metadata, 10000000 attr's found
[ 0.755s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.758s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.778s ] Loaded 10000 sift10M queries
[ 0.847s ] Loaded ground truth, gt_size: 100
[ 0.847s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.137s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 226.017s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2898305 (6) 1167995 (6) 5514922 (6) 2515600 (6) 1160663 (6) 4738758 (6) 6346833 (6) 6984373 (6) 7077742 (6) 7468388 (6) 9397776 (6) 238649 (6) 2213388 (6) 5579551 (6) 8191903 (6) 7860530 (6) 1928425 (6) 7866119 (6) 1174332 (6) 9313115 (6) 2375126 (6) 2923944 (6) 8851580 (6) 7164607 (6) 2807602 (6) 9925949 (6) 888010 (6) 6951413 (6) 2115887 (6) 578867 (6) 2078396 (6) 8435256 (6) 2549151 (6) 9251169 (6) 5343331 (6) 4689336 (6) 1892471 (6) 419470 (6) 2481703 (6) 5520369 (6) 5710919 (6) 9409479 (6) 331007 (6) 1665852 (6) 6019325 (6) 1297904 (6) 5916323 (6) 2250118 (6) 5341499 (6) 6321391 (6) 1929740 (6) 3879851 (6) 5305337 (6) 463666 (6) 242725 (6) 4072432 (6) 3022114 (6) 5324763 (6) 7237592 (6) 9237550 (6) 7912999 (6) 6450744 (6) 7011791 (6) 2365415 (6) 6328993 (6) 3031693 (6) 5308027 (6) 5835685 (6) 447965 (6) 2986000 (6) 6527573 (6) 4671898 (6) 7920998 (6) 5228659 (6) 7455148 (6) 5376243 (6) 3435228 (6) 3670000 (6) 3049131 (6) 6009021 (6) 8983756 (6) 1249067 (6) 4396835 (6) 7220675 (6) 9103413 (6) 6071002 (6) 9839146 (6) 7033151 (6) 1000673 (6) 4532213 (6) 7989030 (6) 6560693 (6) 8644324 (6) 197299 (6) 8150587 (6) 8052577 (6) 476293 (6) 5356206 (6) 4218358 (6) 3094752 (6) 
     dis: 	67180.000 72023.000 72798.000 73465.000 74292.000 74463.000 76136.000 76880.000 76934.000 77229.000 77424.000 77858.000 78558.000 78568.000 78749.000 78859.000 79208.000 79448.000 79542.000 79682.000 79929.000 79984.000 80060.000 80358.000 80454.000 80660.000 80692.000 80726.000 80780.000 80841.000 81711.000 81799.000 81827.000 81847.000 81853.000 82232.000 82386.000 82431.000 82457.000 82492.000 82540.000 82688.000 83126.000 83197.000 83269.000 83349.000 83357.000 83391.000 83435.000 83457.000 83583.000 83717.000 83735.000 83787.000 84214.000 84223.000 84253.000 84463.000 84487.000 84526.000 84734.000 85141.000 85235.000 85293.000 85322.000 85432.000 85487.000 85597.000 85625.000 85736.000 85782.000 85847.000 85882.000 85928.000 85963.000 85985.000 86005.000 86005.000 86023.000 86034.000 86063.000 86100.000 86119.000 86211.000 86265.000 86280.000 86308.000 86333.000 86345.000 86402.000 86458.000 86512.000 86523.000 86697.000 86702.000 86793.000 86891.000 86902.000 86906.000 86958.000 
query 1 nn's (6, 6): 8449497 (6) 5552416 (6) 4234271 (6) 2253711 (6) 1273419 (6) 411491 (6) 1263214 (6) 1233453 (6) 9219153 (6) 469965 (6) 1909131 (6) 9791343 (6) 3309105 (6) 6265610 (6) 522429 (6) 1120308 (6) 8596968 (6) 7917424 (6) 7343838 (6) 7120642 (6) 1745130 (6) 7331745 (6) 2993914 (6) 4702839 (6) 1346170 (6) 5589386 (6) 9015118 (6) 7692715 (6) 5531491 (6) 375999 (6) 6073626 (6) 1843885 (6) 7693023 (6) 9537422 (6) 3631651 (6) 3786289 (6) 1341845 (6) 9167559 (6) 8590082 (6) 7031326 (6) 8175356 (6) 1526669 (6) 3050119 (6) 7342014 (6) 8918460 (6) 895436 (6) 5313986 (6) 1000577 (6) 1503119 (6) 1461697 (6) 8440112 (6) 9577495 (6) 6986308 (6) 4364584 (6) 2652241 (6) 8675363 (6) 2353489 (6) 3744772 (6) 963644 (6) 695127 (6) 2235415 (6) 4009753 (6) 3083636 (6) 7968009 (6) 5423598 (6) 9553578 (6) 2093850 (6) 7859261 (6) 8518091 (6) 6692864 (6) 1932354 (6) 5790422 (6) 6672132 (6) 3740235 (6) 3200275 (6) 3891904 (6) 7513620 (6) 491814 (6) 8155958 (6) 1410399 (6) 7062500 (6) 9388703 (6) 735668 (6) 4960102 (6) 5349437 (6) 5869072 (6) 6383821 (6) 6281612 (6) 8743749 (6) 7512095 (6) 7807906 (6) 298308 (6) 5887328 (6) 1012664 (6) 8857836 (6) 2077396 (6) 4539661 (6) 2307688 (6) 7610510 (6) 3648617 (6) 
     dis: 	32633.000 42944.000 44439.000 45140.000 46522.000 46959.000 47608.000 48662.000 50730.000 50753.000 51310.000 51493.000 51760.000 51836.000 52132.000 52532.000 52768.000 52837.000 54601.000 54684.000 54734.000 54968.000 55326.000 55982.000 56324.000 56410.000 56457.000 56490.000 56591.000 56619.000 57111.000 57411.000 57450.000 57685.000 57719.000 57771.000 57814.000 57926.000 58064.000 58257.000 58298.000 58488.000 58502.000 58531.000 58837.000 59156.000 59169.000 59284.000 59550.000 60324.000 60340.000 60725.000 60913.000 61385.000 61403.000 62084.000 62214.000 62251.000 62305.000 62405.000 62601.000 62791.000 62992.000 63272.000 63282.000 63382.000 63407.000 63431.000 63533.000 63600.000 63792.000 63807.000 63864.000 63956.000 64056.000 64165.000 64180.000 64377.000 64475.000 64505.000 64512.000 64556.000 64597.000 64813.000 64817.000 64890.000 64958.000 65021.000 65073.000 65166.000 65184.000 65450.000 65514.000 65547.000 65552.000 65598.000 65629.000 65748.000 65923.000 66221.000 
query 2 nn's (6, 6): 8667807 (6) 1571863 (6) 237844 (6) 199400 (6) 2304211 (6) 4791170 (6) 6296252 (6) 2795236 (6) 7500565 (6) 9466222 (6) 9416415 (6) 9068473 (6) 9554416 (6) 436139 (6) 4279056 (6) 9410320 (6) 5988705 (6) 4154052 (6) 2448858 (6) 40266 (6) 4757879 (6) 8863268 (6) 8068558 (6) 2994193 (6) 5770225 (6) 3942637 (6) 893390 (6) 8923155 (6) 3832486 (6) 1229611 (6) 2346097 (6) 9362419 (6) 9457112 (6) 4433607 (6) 9559093 (6) 1329974 (6) 4555038 (6) 4048068 (6) 7701746 (6) 4450077 (6) 409456 (6) 419195 (6) 2393824 (6) 8563094 (6) 8590994 (6) 9790465 (6) 3795529 (6) 9330360 (6) 8198272 (6) 6347813 (6) 8915550 (6) 6114289 (6) 1860330 (6) 3967402 (6) 3061201 (6) 3140269 (6) 5563048 (6) 888761 (6) 7508409 (6) 7685482 (6) 8530462 (6) 8070798 (6) 5631784 (6) 1160482 (6) 5596868 (6) 4861540 (6) 8635193 (6) 1463083 (6) 8333106 (6) 7298098 (6) 3567890 (6) 2723946 (6) 1956474 (6) 4418406 (6) 1625792 (6) 4713533 (6) 445822 (6) 2038327 (6) 247874 (6) 4135242 (6) 764856 (6) 1297680 (6) 9384590 (6) 4822642 (6) 8064334 (6) 5715023 (6) 2180225 (6) 8801441 (6) 8075681 (6) 2027436 (6) 8329652 (6) 1561941 (6) 1992904 (6) 752202 (6) 2247452 (6) 8476333 (6) 8690196 (6) 2407252 (6) 1758192 (6) 945107 (6) 
     dis: 	47988.000 48528.000 49294.000 49395.000 49692.000 50576.000 51071.000 51181.000 51634.000 51654.000 51724.000 52145.000 52237.000 52554.000 52719.000 52939.000 53001.000 53029.000 53034.000 53080.000 53215.000 53225.000 53350.000 53360.000 53412.000 53664.000 53672.000 54025.000 54273.000 54404.000 54464.000 54496.000 54765.000 54908.000 55005.000 55134.000 55225.000 55277.000 55365.000 55719.000 55753.000 55957.000 55985.000 55995.000 56108.000 56197.000 56262.000 56319.000 56416.000 56449.000 56449.000 56627.000 56884.000 56939.000 56977.000 57016.000 57031.000 57045.000 57099.000 57176.000 57216.000 57245.000 57398.000 57554.000 57613.000 57716.000 57831.000 57848.000 57924.000 58036.000 58195.000 58328.000 58484.000 58485.000 58508.000 58526.000 58536.000 58701.000 58734.000 58766.000 58933.000 58977.000 59021.000 59060.000 59109.000 59123.000 59124.000 59135.000 59158.000 59233.000 59281.000 59320.000 59330.000 59512.000 59600.000 59745.000 59783.000 59815.000 59887.000 59895.000 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 3143192 (6) 3459738 (6) 6411621 (6) 8419826 (6) 727241 (6) 9010353 (6) 8649378 (6) 4998281 (6) 7914184 (6) 1911911 (6) 2218358 (6) 1344917 (6) 1739894 (6) 4246457 (6) 4486659 (6) 6760157 (6) 1514080 (6) 6486623 (6) 692217 (6) 9019201 (6) 7709017 (6) 2630576 (6) 3633444 (6) 9925791 (6) 5755561 (6) 992744 (6) 9354839 (6) 6804450 (6) 9625994 (6) 9517308 (6) 5792548 (6) 7691560 (6) 7749958 (6) 9335193 (6) 1028926 (6) 6317467 (6) 5777538 (6) 5430458 (6) 7119531 (6) 7463079 (6) 7614050 (6) 1502235 (6) 686764 (6) 2236726 (6) 422848 (6) 7865854 (6) 8344580 (6) 936598 (6) 8702151 (6) 9166 (6) 5293699 (6) 578322 (6) 2659564 (6) 6697954 (6) 1133113 (6) 3252978 (6) 840086 (6) 2168780 (6) 6346885 (6) 6281603 (6) 3828353 (6) 9421859 (6) 5651613 (6) 7556732 (6) 82034 (6) 9947826 (6) 9469929 (6) 1229577 (6) 5663020 (6) 9332155 (6) 6306155 (6) 1604878 (6) 5627714 (6) 7745448 (6) 618359 (6) 2842840 (6) 9102009 (6) 4540202 (6) 1874032 (6) 2305251 (6) 4673685 (6) 3118365 (6) 1085693 (6) 7786145 (6) 2009843 (6) 5561400 (6) 6629787 (6) 3566371 (6) 8381527 (6) 3522530 (6) 
     dis: 	3910.000 4343.000 4550.000 4817.000 5013.000 5180.000 5240.000 5279.000 5371.000 5559.000 5653.000 5862.000 5998.000 6096.000 6237.000 6311.000 6468.000 6624.000 6624.000 6655.000 6693.000 6747.000 6845.000 6981.000 7021.000 7029.000 7171.000 7208.000 7226.000 7233.000 7327.000 7486.000 7509.000 7580.000 7587.000 7661.000 7725.000 7797.000 7825.000 7861.000 8040.000 8087.000 8122.000 8123.000 8228.000 8312.000 8322.000 8355.000 8362.000 8404.000 8407.000 8414.000 8491.000 8496.000 8500.000 8579.000 8594.000 8643.000 8809.000 8830.000 8860.000 8885.000 8903.000 8912.000 8946.000 8993.000 9013.000 9100.000 9153.000 9157.000 9207.000 9490.000 9491.000 9526.000 9581.000 9621.000 9695.000 9736.000 9763.000 9813.000 9888.000 9946.000 9965.000 9980.000 9990.000 9997.000 10018.000 10060.000 10063.000 10084.000 10176.000 10216.000 10238.000 10242.000 10249.000 10267.000 10280.000 10281.000 10292.000 10335.000 
query 4 nn's (6, 6): 7241286 (6) 3918536 (6) 3477074 (6) 811272 (6) 7963557 (6) 1751938 (6) 769923 (6) 1141817 (6) 4344456 (6) 6388463 (6) 4119530 (6) 3220361 (6) 546979 (6) 6408001 (6) 7423926 (6) 7603300 (6) 9001755 (6) 5708200 (6) 1850409 (6) 8630333 (6) 3637016 (6) 5175563 (6) 1800938 (6) 5709057 (6) 1337546 (6) 5117098 (6) 2173144 (6) 990482 (6) 3842053 (6) 2732612 (6) 4380344 (6) 6838860 (6) 4501065 (6) 8713517 (6) 3650068 (6) 3495449 (6) 9170163 (6) 9836279 (6) 4830381 (6) 2251576 (6) 4831513 (6) 3004652 (6) 2989150 (6) 4719865 (6) 9067729 (6) 4128605 (6) 9383376 (6) 1543122 (6) 4766049 (6) 5707536 (6) 1903346 (6) 4854334 (6) 7559534 (6) 4158427 (6) 64045 (6) 3647183 (6) 303093 (6) 8229155 (6) 565881 (6) 6699578 (6) 3839204 (6) 1020874 (6) 1375658 (6) 6330957 (6) 417315 (6) 2283262 (6) 5568433 (6) 6258948 (6) 1466559 (6) 8885018 (6) 5399121 (6) 149112 (6) 4399052 (6) 7907570 (6) 5826594 (6) 603409 (6) 8838225 (6) 163735 (6) 6565772 (6) 5001194 (6) 2419196 (6) 8756074 (6) 6532078 (6) 379765 (6) 61611 (6) 9821817 (6) 3446009 (6) 9973187 (6) 3823000 (6) 6630737 (6) 2288117 (6) 4982207 (6) 8972367 (6) 330880 (6) 4331349 (6) 6658100 (6) 7493856 (6) 1686408 (6) 2454280 (6) 5314473 (6) 
     dis: 	77624.000 78379.000 80355.000 81973.000 82038.000 84283.000 85317.000 85933.000 85939.000 86061.000 86120.000 86625.000 86866.000 86935.000 87152.000 87829.000 87905.000 88206.000 88322.000 88437.000 88515.000 88607.000 89079.000 89153.000 89297.000 89682.000 89811.000 90021.000 90358.000 90596.000 90617.000 90822.000 90882.000 91007.000 91009.000 91051.000 91164.000 91244.000 91259.000 91292.000 91392.000 91478.000 91566.000 91846.000 92148.000 92212.000 92692.000 92925.000 93001.000 93074.000 93119.000 93129.000 93517.000 93603.000 93643.000 93789.000 93920.000 94031.000 94172.000 94180.000 94216.000 94288.000 94418.000 94447.000 94565.000 94612.000 94664.000 94672.000 94725.000 94730.000 94807.000 95203.000 95276.000 95354.000 95431.000 95437.000 95449.000 95492.000 95525.000 95630.000 95711.000 95830.000 95933.000 96148.000 96151.000 96157.000 96236.000 96272.000 96377.000 96446.000 96597.000 96706.000 96804.000 96817.000 96929.000 96976.000 96986.000 97062.000 97065.000 97247.000 
[ 226.018s ] *** Query time: 114.623
qps: 87.243
 *** HNSW recall 
HNSW get 999084 postive res from 1000000 results, recall@100:0.999
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.071 0.929 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 372695068, average: 37269.507
finished ivfpq index examples
[ 226.095s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 700 128"
	User time (seconds): 199.68
	System time (seconds): 19.14
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:47.79
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8376228
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 5281836
	Voluntary context switches: 38391
	Involuntary context switches: 424
	Swaps: 0
	File system inputs: 1378176
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:31
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 700
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.696s ] Loaded metadata, 10000000 attr's found
[ 0.696s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.699s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.711s ] Loaded 10000 sift10M queries
[ 0.779s ] Loaded ground truth, gt_size: 100
[ 0.779s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.332s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 165.540s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4160485 (10) 7632021 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 392808 (10) 6002319 (10) 1203246 (10) 8364178 (10) 5368660 (10) 7842689 (10) 5128198 (10) 7263957 (10) 1698351 (10) 4586713 (10) 902148 (10) 1708550 (10) 5066003 (10) 9299823 (10) 9584266 (10) 7585271 (10) 4124875 (10) 3068799 (10) 9082011 (10) 5315711 (10) 8423092 (10) 2051236 (10) 5008601 (10) 3474811 (10) 3390335 (10) 9541713 (10) 5327123 (10) 7583921 (10) 2702664 (10) 8360507 (10) 7868374 (10) 3627409 (10) 2312218 (10) 3072377 (10) 3539433 (10) 6258663 (10) 2260181 (10) 1508937 (10) 5306693 (10) 9823129 (10) 8031075 (10) 151474 (10) 4699500 (10) 4651128 (10) 704919 (10) 7868501 (10) 6562398 (10) 8843894 (10) 8483563 (10) 6800399 (10) 7135049 (10) 3287109 (10) 3252917 (10) 5500930 (10) 7826129 (10) 3865688 (10) 2048439 (10) 4441695 (10) 5109782 (10) 6591990 (10) 8746173 (10) 429808 (10) 4910351 (10) 993318 (10) 7258709 (10) 7655881 (10) 9433071 (10) 1712794 (10) 7292419 (10) 593325 (10) 8989130 (10) 4483915 (10) 7486828 (10) 678609 (10) 51805 (10) 4107644 (10) 9428046 (10) 6088833 (10) 5024265 (10) 7100864 (10) 6052873 (10) 9597643 (10) 6661910 (10) 9158543 (10) 1340784 (10) 2554600 (10) 4481800 (10) 3509825 (10) 3720397 (10) 3445007 (10) 1752009 (10) 1295849 (10) 9297762 (10) 5064036 (10) 
     dis: 	65950.000 75587.000 77145.000 78877.000 82000.000 82438.000 83552.000 83988.000 84353.000 85161.000 85365.000 85925.000 86198.000 86743.000 87049.000 87310.000 87357.000 87415.000 87515.000 87542.000 87824.000 87858.000 88190.000 88223.000 88302.000 88379.000 88743.000 88813.000 88866.000 89105.000 89178.000 89360.000 89388.000 89528.000 89539.000 89755.000 89923.000 89924.000 89990.000 90113.000 90219.000 90281.000 90521.000 90535.000 90636.000 90832.000 91152.000 91159.000 91179.000 91314.000 91428.000 91451.000 91473.000 91501.000 91774.000 91791.000 91868.000 92098.000 92104.000 92187.000 92364.000 92411.000 92495.000 92534.000 92570.000 92624.000 92804.000 92859.000 93071.000 93077.000 93335.000 93393.000 93440.000 93522.000 93815.000 93971.000 94059.000 94107.000 94227.000 94424.000 94694.000 94698.000 95088.000 95122.000 95371.000 95429.000 95469.000 95492.000 95501.000 95538.000 95606.000 95614.000 95738.000 95806.000 95855.000 96008.000 96052.000 96075.000 96101.000 96127.000 
query 1 nn's (10, 10): 4907604 (10) 4922660 (10) 9933148 (10) 8588450 (10) 4689763 (10) 9211699 (10) 3665630 (10) 4512099 (10) 1259657 (10) 9913606 (10) 1887729 (10) 6335574 (10) 9349060 (10) 2234566 (10) 5226515 (10) 482087 (10) 6674672 (10) 8346283 (10) 9643854 (10) 1737968 (10) 7502105 (10) 4821002 (10) 9980694 (10) 8063568 (10) 3241120 (10) 6618543 (10) 4399493 (10) 3858730 (10) 2021990 (10) 5561330 (10) 6312393 (10) 9285737 (10) 9931915 (10) 5838578 (10) 9164450 (10) 7851813 (10) 2532663 (10) 5707690 (10) 643587 (10) 2070607 (10) 7077341 (10) 5074486 (10) 8757781 (10) 4365144 (10) 9719889 (10) 4389334 (10) 3335948 (10) 7094836 (10) 1018756 (10) 4178652 (10) 8903515 (10) 9810387 (10) 2949812 (10) 148395 (10) 9964913 (10) 9967397 (10) 5682634 (10) 5632105 (10) 4892821 (10) 2524359 (10) 9258708 (10) 5934521 (10) 8549337 (10) 9275179 (10) 954343 (10) 6579804 (10) 801963 (10) 1395848 (10) 717773 (10) 4130277 (10) 1111247 (10) 2604205 (10) 3553376 (10) 6132369 (10) 8448472 (10) 797788 (10) 8881883 (10) 9820536 (10) 1589644 (10) 7379199 (10) 3566500 (10) 4546662 (10) 9220661 (10) 3881464 (10) 7546943 (10) 6193228 (10) 4771033 (10) 8226202 (10) 3423010 (10) 566473 (10) 9849685 (10) 4734717 (10) 4177090 (10) 1208441 (10) 8603784 (10) 2541318 (10) 2749783 (10) 3709667 (10) 7843147 (10) 5013067 (10) 
     dis: 	46066.000 56486.000 57000.000 58633.000 59030.000 59230.000 59901.000 60127.000 60594.000 60931.000 60959.000 62023.000 62069.000 62094.000 62693.000 63173.000 65576.000 65936.000 66298.000 66468.000 66544.000 66583.000 66656.000 67923.000 67993.000 68018.000 68168.000 68711.000 69141.000 69463.000 69703.000 69780.000 70925.000 71072.000 71233.000 71312.000 71473.000 71509.000 71707.000 71823.000 72328.000 72435.000 72763.000 72819.000 72863.000 73017.000 73194.000 73295.000 73570.000 73621.000 73710.000 73816.000 73959.000 74323.000 74470.000 74478.000 74500.000 74524.000 74826.000 74847.000 74879.000 74941.000 75408.000 75463.000 75517.000 75536.000 75800.000 75832.000 75898.000 76030.000 76379.000 76605.000 76694.000 76786.000 76799.000 76818.000 76837.000 77121.000 77383.000 77617.000 77742.000 78527.000 78559.000 78885.000 78981.000 79051.000 79165.000 79443.000 79844.000 80220.000 80298.000 80747.000 80872.000 80989.000 81034.000 81046.000 81185.000 81201.000 81355.000 81364.000 
query 2 nn's (10, 10): 3493381 (10) 5637368 (10) 4457160 (10) 4677344 (10) 2511585 (10) 1198061 (10) 9541874 (10) 5039283 (10) 49352 (10) 944526 (10) 1878319 (10) 4907071 (10) 6120728 (10) 4283746 (10) 8051890 (10) 3667879 (10) 3224964 (10) 2556455 (10) 4848879 (10) 7366864 (10) 2855545 (10) 8064263 (10) 4112561 (10) 5407857 (10) 5088938 (10) 9375728 (10) 871001 (10) 909313 (10) 3095363 (10) 1897720 (10) 5274336 (10) 3211459 (10) 4167330 (10) 1883447 (10) 9830393 (10) 2660391 (10) 9355645 (10) 1545324 (10) 8131606 (10) 4230661 (10) 9557793 (10) 3327268 (10) 5813545 (10) 7221663 (10) 4042128 (10) 9534509 (10) 9165964 (10) 4188703 (10) 8860131 (10) 9982250 (10) 8084363 (10) 4329845 (10) 2432664 (10) 2721821 (10) 1545425 (10) 3579460 (10) 1597876 (10) 419533 (10) 9970439 (10) 1418565 (10) 1025392 (10) 2721941 (10) 8394381 (10) 206324 (10) 7734472 (10) 5388482 (10) 9844531 (10) 932507 (10) 5638422 (10) 1066001 (10) 3689971 (10) 9745256 (10) 6226545 (10) 4817838 (10) 1213154 (10) 1519384 (10) 4090854 (10) 8366019 (10) 1916939 (10) 7223977 (10) 2797637 (10) 3134622 (10) 2652720 (10) 1806609 (10) 5371863 (10) 7912354 (10) 3574174 (10) 7122531 (10) 6664994 (10) 4105778 (10) 1133891 (10) 9475689 (10) 6070654 (10) 3570008 (10) 7161229 (10) 7371252 (10) 6501663 (10) 1528109 (10) 113541 (10) 2945338 (10) 
     dis: 	51043.000 51405.000 51795.000 52215.000 52611.000 54288.000 54558.000 56504.000 56721.000 57351.000 58055.000 58349.000 58777.000 58925.000 59334.000 60030.000 60035.000 60483.000 60775.000 60895.000 61242.000 61267.000 61277.000 61472.000 61905.000 61926.000 61978.000 62187.000 62427.000 62513.000 62866.000 62890.000 62974.000 63881.000 63969.000 64048.000 64103.000 64224.000 64299.000 64307.000 64373.000 64853.000 64853.000 64879.000 64963.000 64988.000 64998.000 65374.000 65394.000 65420.000 65606.000 65763.000 65774.000 65778.000 65944.000 65966.000 66256.000 66656.000 66904.000 67130.000 67259.000 67724.000 67754.000 67875.000 67926.000 67984.000 68140.000 68223.000 68231.000 68232.000 68269.000 68305.000 68375.000 68377.000 68386.000 68544.000 68570.000 68668.000 68748.000 68910.000 68921.000 68929.000 68963.000 69026.000 69070.000 69132.000 69162.000 69206.000 69235.000 69302.000 69305.000 69409.000 69430.000 69582.000 69610.000 69902.000 69924.000 69951.000 69993.000 69996.000 
query 3 nn's (10, 10): 7269483 (10) 3278687 (10) 8381210 (10) 8051314 (10) 5381241 (10) 179529 (10) 222255 (10) 3421950 (10) 1061321 (10) 3112499 (10) 7216322 (10) 543054 (10) 4995291 (10) 3379947 (10) 7829631 (10) 240857 (10) 5619818 (10) 4189992 (10) 8372623 (10) 9906166 (10) 6711509 (10) 5026118 (10) 6934608 (10) 6447621 (10) 3877232 (10) 1896951 (10) 2464354 (10) 6485893 (10) 7127184 (10) 1656853 (10) 406243 (10) 6776211 (10) 8420002 (10) 7505915 (10) 4759076 (10) 116302 (10) 3855680 (10) 9231939 (10) 5661022 (10) 3485217 (10) 9664797 (10) 5122599 (10) 2648578 (10) 323107 (10) 2587214 (10) 8013467 (10) 9927644 (10) 2393763 (10) 808011 (10) 6468324 (10) 3649992 (10) 6365231 (10) 7281219 (10) 5329509 (10) 4593096 (10) 3547401 (10) 9600421 (10) 887194 (10) 4117204 (10) 3719519 (10) 5618980 (10) 3416860 (10) 6993953 (10) 2599501 (10) 4161085 (10) 2139674 (10) 1448035 (10) 9675475 (10) 8799515 (10) 9407537 (10) 2762309 (10) 1425829 (10) 8995335 (10) 4319199 (10) 9561196 (10) 657903 (10) 1705936 (10) 5015756 (10) 1916764 (10) 8523280 (10) 5224258 (10) 2065036 (10) 4845451 (10) 352619 (10) 6144203 (10) 1570115 (10) 4702241 (10) 3013029 (10) 7745296 (10) 3309893 (10) 1097904 (10) 3159877 (10) 2596728 (10) 5087658 (10) 3420222 (10) 5690647 (10) 8279299 (10) 597362 (10) 699672 (10) 9692573 (10) 
     dis: 	4894.000 7183.000 7506.000 7644.000 7666.000 7708.000 8395.000 8402.000 8608.000 9075.000 9254.000 9374.000 9382.000 9470.000 9746.000 10000.000 10277.000 10287.000 10420.000 10511.000 10611.000 10652.000 10851.000 11105.000 11135.000 11281.000 11484.000 11521.000 11601.000 11742.000 11828.000 11882.000 11947.000 12021.000 12393.000 12477.000 12659.000 13039.000 13045.000 13072.000 13183.000 13448.000 13603.000 13613.000 13629.000 13652.000 13720.000 13734.000 13760.000 13870.000 13916.000 13919.000 13928.000 14017.000 14038.000 14106.000 14175.000 14228.000 14306.000 14326.000 14426.000 14474.000 14478.000 14534.000 14680.000 14870.000 14947.000 15025.000 15083.000 15165.000 15341.000 15357.000 15384.000 15411.000 15445.000 15489.000 15526.000 15562.000 15605.000 15664.000 15766.000 15778.000 15811.000 15828.000 15905.000 16012.000 16046.000 16102.000 16236.000 16269.000 16408.000 16469.000 16474.000 16528.000 16627.000 16629.000 16644.000 16819.000 16820.000 16836.000 
query 4 nn's (10, 10): 5493369 (10) 3823745 (10) 935279 (10) 4150166 (10) 5135489 (10) 4962535 (10) 2015975 (10) 5466491 (10) 1015238 (10) 484991 (10) 330819 (10) 1162782 (10) 5126636 (10) 8718571 (10) 9398213 (10) 745843 (10) 7508102 (10) 1029172 (10) 3287249 (10) 8171628 (10) 4618448 (10) 3355354 (10) 5345863 (10) 8961414 (10) 5807041 (10) 2827238 (10) 8303120 (10) 8178422 (10) 4243361 (10) 2625230 (10) 523577 (10) 5574338 (10) 7194509 (10) 3553812 (10) 5013855 (10) 175284 (10) 1086928 (10) 3958825 (10) 3806285 (10) 6917344 (10) 1430207 (10) 6415311 (10) 1863408 (10) 3147235 (10) 67796 (10) 9294912 (10) 4529199 (10) 2916108 (10) 8976035 (10) 1417456 (10) 5739776 (10) 5425134 (10) 6985534 (10) 6516336 (10) 9394278 (10) 9114314 (10) 3720874 (10) 9104864 (10) 5171141 (10) 2138168 (10) 6432061 (10) 37561 (10) 9738278 (10) 3546857 (10) 4535770 (10) 125408 (10) 8082742 (10) 4900336 (10) 6221821 (10) 5612366 (10) 1289546 (10) 6099165 (10) 1140393 (10) 8287324 (10) 1911938 (10) 9687221 (10) 7328865 (10) 8915558 (10) 9147704 (10) 73092 (10) 1295801 (10) 4638845 (10) 515945 (10) 8757921 (10) 5765464 (10) 699709 (10) 1083442 (10) 4540668 (10) 3357213 (10) 8505570 (10) 2175967 (10) 2510436 (10) 5799065 (10) 4812318 (10) 4774126 (10) 2469217 (10) 2287348 (10) 600595 (10) 5679320 (10) 6662196 (10) 
     dis: 	81626.000 91268.000 91951.000 92008.000 92149.000 93259.000 93705.000 95679.000 96147.000 96480.000 97440.000 97821.000 98026.000 98595.000 98607.000 98904.000 99585.000 99609.000 100312.000 100692.000 100750.000 100874.000 100892.000 101109.000 101139.000 101261.000 101836.000 101922.000 101985.000 102068.000 102119.000 102274.000 102295.000 102375.000 102391.000 102485.000 102639.000 102640.000 102643.000 102970.000 103074.000 103152.000 103283.000 103298.000 103368.000 103732.000 103884.000 104000.000 104078.000 104284.000 104407.000 104422.000 104425.000 104476.000 104644.000 104787.000 104802.000 104837.000 104941.000 104984.000 105019.000 105268.000 105465.000 105506.000 105547.000 105599.000 105722.000 105858.000 105884.000 105915.000 105958.000 105994.000 106041.000 106117.000 106372.000 106449.000 106576.000 106838.000 106914.000 106971.000 107098.000 107108.000 107110.000 107152.000 107424.000 107432.000 107581.000 107605.000 107617.000 107680.000 107895.000 108207.000 108239.000 108253.000 108484.000 108509.000 108611.000 108698.000 108828.000 108832.000 
[ 165.540s ] *** Query time: 92.687
qps: 107.890
 *** HNSW recall 
HNSW get 989562 postive res from 1000000 results, recall@100:0.990
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.485 0.514 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 372695068, average: 37269.507
finished ivfpq index examples
[ 165.571s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 700 128"
	User time (seconds): 154.64
	System time (seconds): 11.39
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:46.15
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8378276
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3891154
	Voluntary context switches: 3
	Involuntary context switches: 295
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:34
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 700
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.697s ] Loaded metadata, 10000000 attr's found
[ 0.697s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.699s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.713s ] Loaded 10000 sift10M queries
[ 0.781s ] Loaded ground truth, gt_size: 100
[ 0.781s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.304s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 182.476s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 7364551 (19) 4897568 (19) 8343482 (19) 1124068 (19) 3111983 (19) 117870 (19) 8070748 (19) 5527150 (19) 9252115 (19) 1168165 (19) 1335151 (19) 5324756 (19) 1426063 (19) 4650380 (19) 2942711 (19) 4709246 (19) 4168442 (19) 8000565 (19) 542155 (19) 8325692 (19) 307088 (19) 2633237 (19) 7580848 (19) 2686853 (19) 7947931 (19) 992920 (19) 7932973 (19) 3171219 (19) 1988196 (19) 7995120 (19) 8179893 (19) 6802335 (19) 6429462 (19) 5084022 (19) 6218987 (19) 9749474 (19) 8008785 (19) 5662984 (19) 9088748 (19) 9341507 (19) 5269662 (19) 8210098 (19) 2657128 (19) 7994543 (19) 9835212 (19) 3966856 (19) 2607909 (19) 8279864 (19) 6940659 (19) 8690120 (19) 5210731 (19) 9488077 (19) 1300566 (19) 7858512 (19) 9513274 (19) 3582382 (19) 5755720 (19) 1946842 (19) 4533747 (19) 2722398 (19) 6839253 (19) 6782542 (19) 1390855 (19) 2149301 (19) 5674793 (19) 3914666 (19) 4627246 (19) 3888733 (19) 6692521 (19) 7926564 (19) 2450425 (19) 4626206 (19) 3311453 (19) 6945268 (19) 5131905 (19) 3288112 (19) 7928872 (19) 5831698 (19) 2893875 (19) 8214188 (19) 5086120 (19) 7238720 (19) 7912667 (19) 8844767 (19) 2492076 (19) 7144997 (19) 3848198 (19) 2656181 (19) 8551445 (19) 595957 (19) 1701793 (19) 5001993 (19) 4836231 (19) 2750423 (19) 2538193 (19) 6572652 (19) 5508630 (19) 1478923 (19) 3339940 (19) 1879776 (19) 
     dis: 	72592.000 83581.000 92597.000 92837.000 93166.000 95856.000 96531.000 97778.000 100128.000 100204.000 101040.000 101328.000 101610.000 101818.000 102593.000 102899.000 104149.000 104206.000 104733.000 106026.000 106295.000 106876.000 107089.000 107371.000 107376.000 107584.000 108104.000 108217.000 108354.000 108641.000 108715.000 109057.000 109146.000 109466.000 109755.000 109837.000 110076.000 110267.000 110917.000 111004.000 111055.000 111332.000 111720.000 111948.000 112269.000 112502.000 112775.000 112835.000 112929.000 112995.000 113592.000 114642.000 114726.000 114853.000 114998.000 115136.000 115179.000 115684.000 115726.000 115840.000 115842.000 116165.000 116316.000 116354.000 116493.000 116739.000 116813.000 117033.000 117346.000 117603.000 117627.000 117747.000 117749.000 117762.000 118065.000 118586.000 118865.000 118980.000 119376.000 120168.000 120471.000 120550.000 120960.000 121070.000 121256.000 121312.000 121342.000 121435.000 121471.000 121499.000 121573.000 121632.000 122009.000 122047.000 122119.000 122124.000 122305.000 122335.000 122534.000 122732.000 
query 1 nn's (19, 19): 1345854 (19) 9490922 (19) 6861763 (19) 8889219 (19) 3779157 (19) 1411930 (19) 1594746 (19) 2457409 (19) 5935793 (19) 7903037 (19) 6068122 (19) 1204854 (19) 9558281 (19) 4136820 (19) 6157672 (19) 3478621 (19) 4924634 (19) 1917409 (19) 2111946 (19) 9734664 (19) 90305 (19) 8548415 (19) 4924494 (19) 4317184 (19) 2460722 (19) 1742812 (19) 4814997 (19) 7003404 (19) 132725 (19) 749008 (19) 4566723 (19) 1932645 (19) 9928244 (19) 1193556 (19) 8905837 (19) 8225678 (19) 3971206 (19) 8974279 (19) 479775 (19) 8871287 (19) 3359711 (19) 6637812 (19) 5908680 (19) 340915 (19) 2016216 (19) 1840522 (19) 1655080 (19) 5357638 (19) 32221 (19) 6216367 (19) 8331956 (19) 7766962 (19) 9988387 (19) 7300255 (19) 593175 (19) 3850227 (19) 4298384 (19) 8836092 (19) 5793025 (19) 3487690 (19) 7221154 (19) 2146104 (19) 403793 (19) 71132 (19) 9494067 (19) 926213 (19) 2024475 (19) 5556007 (19) 6562910 (19) 7533930 (19) 6762478 (19) 2720534 (19) 1094427 (19) 846887 (19) 9561890 (19) 7133610 (19) 9701553 (19) 5298030 (19) 3381913 (19) 8476379 (19) 661436 (19) 2953878 (19) 3290020 (19) 2872183 (19) 6832344 (19) 1743139 (19) 2079910 (19) 3626102 (19) 1103714 (19) 739349 (19) 6117436 (19) 4379352 (19) 9358670 (19) 9328585 (19) 4956027 (19) 4793116 (19) 4661072 (19) 4706721 (19) 4196641 (19) 9367908 (19) 
     dis: 	63804.000 72753.000 73309.000 73418.000 74946.000 75689.000 76884.000 77012.000 78445.000 79015.000 79998.000 80356.000 81365.000 83467.000 83926.000 84960.000 86245.000 86390.000 87305.000 88041.000 88671.000 88841.000 89821.000 90055.000 91029.000 91384.000 91518.000 91866.000 93086.000 94769.000 94802.000 94951.000 95213.000 95455.000 95654.000 95705.000 97151.000 98073.000 98150.000 98288.000 99045.000 99834.000 100141.000 100296.000 100552.000 101010.000 101193.000 101501.000 101856.000 102275.000 102776.000 102815.000 103121.000 103249.000 104178.000 104537.000 104695.000 105041.000 105556.000 105805.000 106162.000 106736.000 107072.000 108393.000 108417.000 108510.000 108835.000 109590.000 109599.000 109897.000 109949.000 110227.000 110402.000 110708.000 111604.000 111721.000 111741.000 111879.000 111971.000 112093.000 112200.000 112246.000 113754.000 113867.000 113898.000 114063.000 114160.000 114259.000 114775.000 115032.000 115179.000 116154.000 116216.000 116336.000 116363.000 116547.000 116672.000 116864.000 117656.000 117839.000 
query 2 nn's (19, 19): 5397690 (19) 283793 (19) 7779045 (19) 6233731 (19) 5857947 (19) 243867 (19) 4212130 (19) 2526681 (19) 1978906 (19) 8816190 (19) 9069258 (19) 7999911 (19) 342160 (19) 8220257 (19) 8340024 (19) 5945623 (19) 3805324 (19) 5600415 (19) 1587666 (19) 4464945 (19) 8655461 (19) 5148835 (19) 9386743 (19) 6537424 (19) 5324267 (19) 7357334 (19) 6631052 (19) 8701465 (19) 4790579 (19) 7241044 (19) 1030206 (19) 2762828 (19) 5629248 (19) 1909369 (19) 6172797 (19) 6909536 (19) 3847576 (19) 4735060 (19) 9294477 (19) 8638555 (19) 5450319 (19) 8774602 (19) 892172 (19) 6863788 (19) 4140915 (19) 2272259 (19) 6548343 (19) 628449 (19) 8587833 (19) 3409292 (19) 4772966 (19) 9796070 (19) 4851733 (19) 8949426 (19) 4152007 (19) 9391567 (19) 3650017 (19) 2140260 (19) 1329864 (19) 391748 (19) 4571250 (19) 5060541 (19) 407707 (19) 7766278 (19) 8492017 (19) 6302488 (19) 9796788 (19) 6025892 (19) 9088540 (19) 7588028 (19) 1336093 (19) 4714243 (19) 7061975 (19) 4684830 (19) 6991612 (19) 8620416 (19) 9355766 (19) 4994152 (19) 9852957 (19) 2334394 (19) 5702288 (19) 7474553 (19) 9182736 (19) 1384963 (19) 4060465 (19) 7355444 (19) 5754710 (19) 8756204 (19) 1092304 (19) 8511052 (19) 9646764 (19) 33724 (19) 7477849 (19) 4091530 (19) 3766784 (19) 1201378 (19) 6507732 (19) 2034102 (19) 1094276 (19) 1526974 (19) 
     dis: 	61297.000 63549.000 63969.000 64876.000 67040.000 67049.000 70404.000 70683.000 70727.000 70926.000 70999.000 72706.000 73304.000 73567.000 73764.000 73826.000 75707.000 76728.000 76733.000 76929.000 78030.000 78517.000 78525.000 78777.000 78925.000 79520.000 79558.000 79650.000 80187.000 81085.000 81470.000 81749.000 82020.000 82058.000 82275.000 82798.000 83160.000 83270.000 83820.000 84048.000 84184.000 84198.000 84207.000 84282.000 84435.000 84894.000 85586.000 85651.000 85758.000 85912.000 85934.000 85996.000 86103.000 86145.000 86449.000 86720.000 86809.000 86963.000 87121.000 87716.000 88138.000 88356.000 88555.000 89134.000 89234.000 89372.000 90035.000 90359.000 91118.000 91631.000 91638.000 91806.000 92097.000 92608.000 92640.000 92703.000 92901.000 93062.000 93809.000 94247.000 94345.000 94418.000 94698.000 94750.000 94947.000 95056.000 95220.000 95379.000 95675.000 95695.000 96268.000 96314.000 96522.000 96992.000 97205.000 97413.000 97555.000 97675.000 98183.000 98391.000 
query 3 nn's (19, 19): 6942939 (19) 1326424 (19) 9212218 (19) 9558279 (19) 4557732 (19) 8711902 (19) 5591597 (19) 7251408 (19) 5727279 (19) 7372833 (19) 3669244 (19) 9811017 (19) 7723733 (19) 6458284 (19) 1032968 (19) 43953 (19) 3942225 (19) 3244240 (19) 3616969 (19) 9596692 (19) 8365826 (19) 8953729 (19) 3772287 (19) 4900964 (19) 6434863 (19) 3689791 (19) 2399478 (19) 2949879 (19) 480342 (19) 7338668 (19) 2324107 (19) 3356716 (19) 8869494 (19) 5168072 (19) 4261202 (19) 8226480 (19) 4873018 (19) 8479689 (19) 5252290 (19) 4884153 (19) 8076031 (19) 1692092 (19) 1379869 (19) 9283768 (19) 6286280 (19) 5946655 (19) 1219037 (19) 9799221 (19) 1403737 (19) 5312065 (19) 1976852 (19) 8531033 (19) 4743693 (19) 4366857 (19) 2952661 (19) 9169614 (19) 2729384 (19) 66609 (19) 4753321 (19) 3310695 (19) 7056168 (19) 4988050 (19) 3577408 (19) 6970359 (19) 8289591 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	6423.000 8268.000 10863.000 11771.000 13684.000 14062.000 14723.000 14759.000 15198.000 15416.000 15429.000 16433.000 16640.000 17228.000 18191.000 19056.000 19694.000 19860.000 20180.000 20650.000 21000.000 21174.000 21365.000 21410.000 21980.000 22959.000 22989.000 23275.000 23508.000 24393.000 24771.000 24992.000 25092.000 26350.000 26564.000 26669.000 26978.000 27189.000 27577.000 28020.000 28054.000 28803.000 28970.000 29457.000 29887.000 29962.000 30199.000 31030.000 31288.000 31975.000 32896.000 32907.000 33155.000 33233.000 33334.000 33478.000 33563.000 34819.000 34973.000 35340.000 37148.000 37381.000 38657.000 41097.000 44428.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 4901952 (19) 1162961 (19) 1818247 (19) 9839729 (19) 1399428 (19) 5815181 (19) 8156875 (19) 7668723 (19) 3889669 (19) 4588551 (19) 8178942 (19) 299344 (19) 7888972 (19) 1961004 (19) 6373153 (19) 6428554 (19) 5292751 (19) 4177092 (19) 7864556 (19) 773761 (19) 7091950 (19) 5943750 (19) 1632080 (19) 2900612 (19) 353162 (19) 1602649 (19) 3265243 (19) 3028631 (19) 7442089 (19) 199224 (19) 5385965 (19) 104359 (19) 6338147 (19) 7917769 (19) 177390 (19) 966123 (19) 7529137 (19) 9115319 (19) 3066182 (19) 5379967 (19) 5127753 (19) 1673232 (19) 2003085 (19) 9195084 (19) 6561885 (19) 7300925 (19) 8325836 (19) 5481751 (19) 5695419 (19) 643263 (19) 7091775 (19) 8727801 (19) 8622489 (19) 1766497 (19) 1880048 (19) 7241845 (19) 6979123 (19) 3146927 (19) 8833068 (19) 25672 (19) 2349694 (19) 909894 (19) 7401772 (19) 6550244 (19) 3911797 (19) 8278850 (19) 1035106 (19) 8189849 (19) 5053043 (19) 2388487 (19) 6598133 (19) 9231882 (19) 8884599 (19) 9449409 (19) 6082866 (19) 7210818 (19) 3838485 (19) 8632953 (19) 2625537 (19) 3560210 (19) 7431006 (19) 5702188 (19) 1564048 (19) 7570147 (19) 348033 (19) 9138644 (19) 4803317 (19) 7566386 (19) 4396997 (19) 5234245 (19) 4936129 (19) 9014756 (19) 2898418 (19) 7568609 (19) 1792294 (19) 4816259 (19) 593945 (19) 7626312 (19) 6104469 (19) 8258837 (19) 
     dis: 	95535.000 99958.000 102380.000 103529.000 107979.000 108813.000 109124.000 110034.000 110168.000 111251.000 111448.000 111693.000 113107.000 113416.000 113515.000 113902.000 114155.000 114316.000 114813.000 114842.000 114920.000 114939.000 114959.000 115083.000 115556.000 115644.000 115704.000 115773.000 116066.000 116304.000 116368.000 116370.000 116586.000 116777.000 116913.000 117051.000 117347.000 117659.000 117733.000 117914.000 118546.000 118968.000 119635.000 119850.000 119902.000 119914.000 120123.000 120184.000 120639.000 120646.000 120923.000 121408.000 121493.000 121601.000 121954.000 122000.000 122167.000 122838.000 122884.000 122967.000 123316.000 123322.000 123531.000 123575.000 123681.000 123681.000 124116.000 124139.000 124411.000 124463.000 124795.000 124805.000 124971.000 125077.000 125100.000 125583.000 125623.000 125623.000 125711.000 125762.000 125934.000 126049.000 126422.000 126529.000 126601.000 126648.000 126908.000 126927.000 127020.000 127106.000 127292.000 127310.000 127430.000 128260.000 128367.000 128521.000 128625.000 128665.000 128698.000 128877.000 
[ 182.476s ] *** Query time: 100.328
qps: 99.673
 *** HNSW recall 
HNSW get 725342 postive res from 1000000 results, recall@100:0.725
recall dist(10% per bucket): 0.000 0.000 0.000 0.002 0.013 0.053 0.225 0.524 0.180 0.002 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 372695068, average: 37269.507
finished ivfpq index examples
[ 182.507s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 700 128"
	User time (seconds): 165.24
	System time (seconds): 18.46
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:03.73
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8378280
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 5486097
	Voluntary context switches: 3
	Involuntary context switches: 303
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:38
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 700
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.742s ] Loaded metadata, 10000000 attr's found
[ 0.742s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.745s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.747s ] Loaded 10000 sift10M queries
[ 0.816s ] Loaded ground truth, gt_size: 100
[ 0.816s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.478s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 178.309s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 9964582 (20) 8046738 (20) 7382313 (20) 6513249 (20) 1479506 (20) 4197818 (20) 4349443 (20) 2228963 (20) 7425027 (20) 4950158 (20) 732282 (20) 8208614 (20) 824679 (20) 8484280 (20) 6752466 (20) 9325303 (20) 3347679 (20) 7576546 (20) 1177539 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	100207.000 100421.000 106376.000 106684.000 111286.000 113811.000 118912.000 119030.000 119144.000 124600.000 125004.000 128133.000 128833.000 130359.000 130881.000 132140.000 147359.000 148266.000 165650.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 4299663 (20) 586030 (20) 2788374 (20) 3434211 (20) 3337341 (20) 4062732 (20) 1539076 (20) 8283937 (20) 9000132 (20) 1871235 (20) 5658429 (20) 113690 (20) 4595854 (20) 114795 (20) 7260491 (20) 8961166 (20) 8810376 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	82150.000 82375.000 93796.000 103619.000 107679.000 112950.000 113087.000 113101.000 117856.000 124703.000 130763.000 130987.000 132266.000 132910.000 136964.000 142228.000 152717.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 8646849 (20) 6674452 (20) 9787209 (20) 2812305 (20) 9895995 (20) 4675517 (20) 1689488 (20) 1831458 (20) 6578842 (20) 5836019 (20) 7915163 (20) 1017990 (20) 1907619 (20) 5177480 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	68972.000 77529.000 79784.000 82893.000 83016.000 86730.000 90376.000 90797.000 102531.000 103272.000 103566.000 124058.000 125884.000 133616.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 312537 (20) 9187340 (20) 284991 (20) 4596264 (20) 9510656 (20) 3249575 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	12470.000 26560.000 29459.000 31650.000 32774.000 51646.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 14334 (20) 9363446 (20) 644875 (20) 3046582 (20) 2547113 (20) 4425405 (20) 1709960 (20) 3146716 (20) 6933745 (20) 7759350 (20) 3143423 (20) 9113828 (20) 6727525 (20) 8378570 (20) 7743686 (20) 3809158 (20) 9356983 (20) 3918530 (20) 6862470 (20) 7996041 (20) 4670085 (20) 2706189 (20) 9291196 (20) 2387924 (20) 3384122 (20) 6438763 (20) 4179338 (20) 9753166 (20) 4493829 (20) 9114447 (20) 321675 (20) 4081251 (20) 8236968 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	111590.000 113668.000 115653.000 117050.000 126086.000 127604.000 128793.000 129548.000 130844.000 130912.000 132270.000 132683.000 135259.000 136888.000 137272.000 137580.000 140266.000 140618.000 141215.000 143671.000 143727.000 143732.000 144310.000 144516.000 149254.000 151133.000 154224.000 159876.000 160581.000 163311.000 166608.000 187217.000 188112.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 178.309s ] *** Query time: 103.533
qps: 96.587
 *** HNSW recall 
HNSW get 179766 postive res from 1000000 results, recall@100:0.180
recall dist(10% per bucket): 0.099 0.481 0.394 0.025 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 372695068, average: 37269.507
finished ivfpq index examples
[ 178.343s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 700 128"
	User time (seconds): 166.71
	System time (seconds): 12.35
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:59.10
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8377252
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3749594
	Voluntary context switches: 1
	Involuntary context switches: 254
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
