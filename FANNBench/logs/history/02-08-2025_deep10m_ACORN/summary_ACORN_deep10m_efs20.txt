Start time: 00:47
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.202s ] Loaded metadata, 10000000 attr's found
[ 1.202s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.205s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
[ 1.207s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
[ 1.218s ] Loaded ground truth, gt_size: 10
[ 1.218s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2683.800s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.010
[ 3043.988s ] Query results (vector ids, then distances):
query 0 nn's (29325): 9621275 (29543) 2091498 (29819) 1297273 (29527) 2832722 (29894) 2341402 (29502) 2307355 (29325) 363075 (29688) 8397275 (29596) 8513672 (29855) 7534967 (29909) 
     dis: 	0.838 0.874 0.920 0.926 0.952 0.995 0.997 1.004 1.010 1.026 
query 1 nn's (30324): 359266 (2031) 1204323 (2262) 9176370 (2562) 9986720 (1924) 90513 (2127) 4259107 (2711) 427950 (2353) 2982879 (1956) 9030113 (2831) 4658732 (2667) 
     dis: 	0.722 0.767 0.771 0.776 0.778 0.791 0.822 0.826 0.846 0.861 
query 2 nn's (1846): 5926928 (11780) 2872079 (12464) 4293698 (11780) 4047077 (12162) 5541790 (12350) 6253664 (12409) 4492124 (12672) 6833509 (12088) 2528132 (12660) 2423292 (12728) 
     dis: 	0.480 0.527 0.554 0.560 0.561 0.584 0.585 0.588 0.589 0.592 
query 3 nn's (2845): 8831470 (12698) 7003986 (12552) 8612816 (12576) 2943104 (12400) 4453482 (12024) 9883783 (12087) 6543686 (12626) 4885451 (12090) 7940844 (12068) 642367 (12354) 
     dis: 	0.536 0.568 0.573 0.588 0.600 0.603 0.605 0.609 0.625 0.630 
query 4 nn's (11766): 9349021 (15159) 2458144 (16029) 285898 (15776) 6127609 (15451) 1208417 (15868) 7039138 (15585) 1160677 (15774) 4468781 (15829) 8937347 (15868) 3510072 (16063) 
     dis: 	0.283 0.292 0.298 0.320 0.324 0.331 0.335 0.335 0.354 0.356 
[ 3043.988s ] *** Query time: 6.449
qps: 1550.556
 *** acorn recall 
efs:20
acorn get 58247 postive res from 100000 results, recall@10:0.582
recall dist(10% per bucket): 0.064 0.044 0.057 0.066 0.082 0.102 0.118 0.122 0.128 0.122 0.095 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3047.292s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 2615234
ndis: 0
nreorder: 0
average distance computations per query: 261.523
[ 3047.292s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 2995.56
	System time (seconds): 52.34
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 50:47.96
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113393336
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 28490351
	Voluntary context switches: 3
	Involuntary context switches: 1025
	Swaps: 0
	File system inputs: 104
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:43
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.210s ] Loaded metadata, 10000000 attr's found
[ 1.210s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.212s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json
[ 1.214s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json
[ 1.225s ] Loaded ground truth, gt_size: 10
[ 1.225s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2758.298s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.020
[ 3136.254s ] Query results (vector ids, then distances):
query 0 nn's (53590): 9022530 (54782) 1169809 (54292) 5978465 (54470) 7803356 (54784) 9832519 (55561) 3195458 (55175) 7024867 (55043) 1679717 (54957) 659175 (53955) 4189126 (53908) 
     dis: 	0.628 0.745 0.805 0.860 0.887 0.904 0.904 0.907 0.917 0.935 
query 1 nn's (55589): 8845619 (34540) 7891711 (35609) 6409714 (34468) 5283819 (35478) 5602808 (34670) 8970302 (34336) 9507127 (34916) 3577332 (35378) 8292142 (34709) 7323200 (35072) 
     dis: 	0.533 0.588 0.623 0.637 0.645 0.662 0.665 0.668 0.701 0.709 
query 2 nn's (33944): 1197865 (23991) 1425757 (24240) 1162423 (24715) 7247759 (23735) 1313990 (23755) 6275123 (24649) 1779733 (22913) 5863521 (23412) 2535159 (23134) 7679657 (24249) 
     dis: 	0.362 0.367 0.404 0.414 0.420 0.433 0.435 0.445 0.463 0.466 
query 3 nn's (35943): 9603121 (24120) 9629807 (22979) 7325494 (24422) 5314455 (23736) 7110301 (23515) 7317112 (23063) 3176996 (22689) 9988595 (24151) 6878753 (24257) 5426660 (23461) 
     dis: 	0.460 0.524 0.547 0.552 0.570 0.580 0.602 0.603 0.603 0.608 
query 4 nn's (22756): 6208760 (24740) 46417 (24048) 2177874 (24231) 499788 (23723) 2174720 (24049) 5510644 (23428) 3716543 (24013) 8994861 (24632) 1240301 (24568) 6378892 (23810) 
     dis: 	0.260 0.261 0.266 0.281 0.287 0.289 0.294 0.297 0.308 0.310 
[ 3136.254s ] *** Query time: 11.179
qps: 894.498
 *** acorn recall 
efs:20
acorn get 72373 postive res from 100000 results, recall@10:0.724
recall dist(10% per bucket): 0.019 0.015 0.028 0.038 0.056 0.072 0.095 0.126 0.153 0.193 0.206 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3140.397s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 4585831
ndis: 0
nreorder: 0
average distance computations per query: 458.583
[ 3140.397s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 3075.39
	System time (seconds): 66.40
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 52:22.00
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113392316
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 30912209
	Voluntary context switches: 1
	Involuntary context switches: 3989
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:39
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.203s ] Loaded metadata, 10000000 attr's found
[ 1.203s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.205s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json
[ 1.207s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json
[ 1.219s ] Loaded ground truth, gt_size: 10
[ 1.219s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2778.970s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.030
[ 3165.038s ] Query results (vector ids, then distances):
query 0 nn's (40258): 6712645 (42210) 4785843 (42181) 9949059 (43062) 3230660 (41396) 113451 (42333) 1199967 (42171) 8001075 (40291) 3703381 (40441) 1355124 (42102) 4819093 (41735) 
     dis: 	0.781 0.794 0.811 0.856 0.894 0.903 0.926 0.935 0.935 0.941 
query 1 nn's (43257): 2369910 (4212) 7070546 (4171) 3770847 (2969) 1730812 (3815) 8968081 (2469) 5185675 (2810) 9780740 (3655) 9440175 (4904) 3771570 (3003) 1092788 (3090) 
     dis: 	0.645 0.651 0.653 0.657 0.659 0.667 0.670 0.674 0.678 0.678 
query 2 nn's (2404): 2185646 (31329) 2615034 (32132) 6903541 (33104) 1484504 (31381) 6172791 (31857) 1137007 (32681) 7882068 (32402) 947224 (31220) 8712573 (32686) 7896806 (32766) 
     dis: 	0.417 0.438 0.439 0.453 0.454 0.455 0.459 0.461 0.463 0.465 
query 3 nn's (5403): 3444023 (59944) 3730694 (58900) 9627505 (58562) 6372758 (60128) 6073402 (58199) 2773663 (58541) 3743924 (58043) 2856471 (60207) 738299 (59312) 6184802 (60504) 
     dis: 	0.485 0.515 0.536 0.544 0.550 0.565 0.577 0.589 0.589 0.598 
query 4 nn's (30507): 4031273 (53806) 6936704 (52679) 6669304 (53601) 840635 (52445) 4024873 (53859) 1441677 (53562) 5249160 (52930) 4570448 (53851) 4412565 (53488) 1642995 (53597) 
     dis: 	0.233 0.235 0.254 0.275 0.290 0.290 0.294 0.297 0.306 0.307 
[ 3165.038s ] *** Query time: 10.492
qps: 953.121
 *** acorn recall 
efs:20
acorn get 76008 postive res from 100000 results, recall@10:0.760
recall dist(10% per bucket): 0.012 0.012 0.022 0.029 0.044 0.067 0.086 0.115 0.150 0.203 0.260 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3168.260s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 6062083
ndis: 0
nreorder: 0
average distance computations per query: 606.208
[ 3168.260s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 3104.87
	System time (seconds): 64.80
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 52:49.70
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113392316
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 30924443
	Voluntary context switches: 1
	Involuntary context switches: 2705
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:34
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.203s ] Loaded metadata, 10000000 attr's found
[ 1.203s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.205s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json
[ 1.207s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json
[ 1.219s ] Loaded ground truth, gt_size: 10
[ 1.219s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2699.866s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.040
[ 3096.932s ] Query results (vector ids, then distances):
query 0 nn's (10521): 746554 (12151) 8457790 (11186) 7859770 (14123) 4256216 (12951) 2857901 (10609) 792599 (13968) 6013806 (13899) 5601326 (11808) 4570793 (11672) 3879608 (13719) 
     dis: 	0.759 0.779 0.783 0.826 0.836 0.843 0.874 0.891 0.899 0.926 
query 1 nn's (14520): 2809579 (32061) 9522203 (32493) 8029666 (29849) 9526279 (32518) 5096895 (32324) 8259178 (31453) 2765553 (32191) 80280 (30889) 2835847 (32693) 352058 (32598) 
     dis: 	0.639 0.669 0.676 0.685 0.699 0.714 0.720 0.725 0.727 0.728 
query 2 nn's (28851): 4026415 (59774) 5435907 (60104) 2648118 (61955) 5721994 (62072) 5514013 (61979) 556166 (61924) 1107795 (61836) 9890034 (60771) 5446278 (61548) 4261677 (59846) 
     dis: 	0.398 0.420 0.422 0.435 0.441 0.461 0.464 0.465 0.473 0.475 
query 3 nn's (32850): 4375113 (79418) 7528211 (81771) 7592962 (81009) 9985875 (80883) 6766662 (78986) 205709 (80957) 6780207 (81214) 4999293 (80697) 1540432 (79843) 6492159 (80691) 
     dis: 	0.414 0.464 0.516 0.522 0.522 0.531 0.535 0.535 0.545 0.545 
query 4 nn's (59742): 8509683 (93898) 5658986 (93548) 1180358 (94649) 188372 (93903) 8522738 (92485) 3266049 (95865) 3777711 (92908) 542884 (93651) 9421205 (94406) 987772 (95966) 
     dis: 	0.236 0.259 0.260 0.263 0.268 0.288 0.289 0.298 0.301 0.303 
[ 3096.932s ] *** Query time: 13.717
qps: 729.026
 *** acorn recall 
efs:20
acorn get 77265 postive res from 100000 results, recall@10:0.773
recall dist(10% per bucket): 0.009 0.011 0.016 0.030 0.045 0.065 0.082 0.111 0.148 0.196 0.287 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3100.993s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 7161567
ndis: 0
nreorder: 0
average distance computations per query: 716.157
[ 3100.993s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 3037.86
	System time (seconds): 64.53
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 51:42.47
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113391308
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 30829867
	Voluntary context switches: 1
	Involuntary context switches: 2849
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:29
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.201s ] Loaded metadata, 10000000 attr's found
[ 1.201s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.203s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json
[ 1.205s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json
[ 1.217s ] Loaded ground truth, gt_size: 10
[ 1.217s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2751.226s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.050
[ 3154.663s ] Query results (vector ids, then distances):
query 0 nn's (73203): 5876139 (78187) 4148570 (74612) 4042506 (76043) 8372864 (77517) 4483014 (77438) 3380099 (74219) 6137339 (73912) 2149597 (76994) 8417397 (78012) 3197332 (76022) 
     dis: 	0.748 0.769 0.778 0.782 0.790 0.803 0.803 0.838 0.839 0.851 
query 1 nn's (78202): 2173883 (52826) 8445022 (49725) 4138646 (51828) 3965838 (49827) 6058301 (51101) 1969034 (52259) 2031881 (51442) 3094645 (51678) 7712150 (54266) 9793949 (51075) 
     dis: 	0.440 0.493 0.569 0.603 0.614 0.618 0.645 0.649 0.653 0.674 
query 2 nn's (49342): 88126 (50068) 4064719 (48688) 1602654 (52003) 4771981 (52131) 4065673 (50188) 4959567 (50931) 5306563 (48768) 9070320 (52003) 1027858 (52390) 4685721 (50135) 
     dis: 	0.000 0.343 0.376 0.388 0.403 0.409 0.413 0.417 0.419 0.421 
query 3 nn's (54341): 2691447 (64725) 4952825 (63643) 7182132 (65964) 2927531 (65260) 4011357 (64450) 3790713 (62694) 6056821 (62532) 1893351 (65792) 590150 (64592) 4533208 (64530) 
     dis: 	0.471 0.503 0.517 0.522 0.539 0.551 0.554 0.567 0.571 0.572 
query 4 nn's (47427): 4107976 (43357) 9987746 (45057) 7812231 (45431) 4954949 (43277) 7739956 (42700) 2306537 (44197) 8731860 (45878) 9295248 (42806) 6239916 (44727) 3835499 (44683) 
     dis: 	0.237 0.272 0.273 0.273 0.278 0.291 0.292 0.296 0.305 0.305 
[ 3154.663s ] *** Query time: 10.186
qps: 981.783
 *** acorn recall 
efs:20
acorn get 77979 postive res from 100000 results, recall@10:0.780
recall dist(10% per bucket): 0.007 0.011 0.020 0.025 0.040 0.061 0.080 0.115 0.147 0.194 0.300 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3158.401s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 7928007
ndis: 0
nreorder: 0
average distance computations per query: 792.801
[ 3158.401s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 3092.88
	System time (seconds): 67.08
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 52:40.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113391284
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 30929220
	Voluntary context switches: 1
	Involuntary context switches: 4141
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:25
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.196s ] Loaded metadata, 10000000 attr's found
[ 1.196s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.198s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json
[ 1.200s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json
[ 1.211s ] Loaded ground truth, gt_size: 10
[ 1.211s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2774.023s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.060
[ 3185.955s ] Query results (vector ids, then distances):
query 0 nn's (60294): 2554337 (61319) 8575307 (63032) 4561213 (64538) 8333705 (61968) 8834027 (60804) 7580319 (64403) 2666411 (64661) 3015136 (61388) 2505356 (64414) 6320141 (64846) 
     dis: 	0.691 0.701 0.785 0.800 0.804 0.825 0.832 0.837 0.839 0.855 
query 1 nn's (66293): 7550060 (69545) 5866637 (69101) 8714947 (68306) 853856 (70967) 5264252 (66950) 6638627 (68268) 1036334 (68011) 1137666 (68108) 5557805 (68396) 4336887 (68775) 
     dis: 	0.582 0.587 0.597 0.621 0.622 0.630 0.631 0.636 0.645 0.646 
query 2 nn's (65387): 6074272 (10444) 3072554 (12054) 6373152 (15390) 6245274 (12708) 1963860 (13178) 9838555 (14934) 6765244 (13483) 4534316 (10841) 2520736 (15458) 1654306 (13584) 
     dis: 	0.381 0.385 0.387 0.434 0.437 0.437 0.451 0.466 0.467 0.471 
query 3 nn's (71386): 7040122 (10551) 1623263 (14086) 9592084 (13661) 6605090 (10037) 8831470 (12698) 1923103 (13564) 6545122 (13361) 6132614 (9612) 2364471 (9186) 2233855 (12767) 
     dis: 	0.501 0.517 0.524 0.526 0.536 0.538 0.547 0.554 0.556 0.562 
query 4 nn's (9701): 2138623 (11539) 8781673 (13376) 796011 (9364) 9070153 (13313) 3990585 (8809) 1952662 (12421) 7862066 (11087) 8198317 (13724) 1192695 (13449) 7264587 (10139) 
     dis: 	0.271 0.271 0.277 0.277 0.283 0.284 0.288 0.288 0.289 0.296 
[ 3185.955s ] *** Query time: 9.970
qps: 1003.003
 *** acorn recall 
efs:20
acorn get 78377 postive res from 100000 results, recall@10:0.784
recall dist(10% per bucket): 0.008 0.011 0.018 0.024 0.043 0.056 0.080 0.106 0.150 0.197 0.307 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3190.063s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 8488885
ndis: 0
nreorder: 0
average distance computations per query: 848.888
[ 3190.063s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 3124.71
	System time (seconds): 66.79
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 53:11.58
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113392316
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 30929810
	Voluntary context switches: 2
	Involuntary context switches: 2780
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:23
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.207s ] Loaded metadata, 10000000 attr's found
[ 1.207s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.209s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json
[ 1.211s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json
[ 1.223s ] Loaded ground truth, gt_size: 10
[ 1.223s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2790.019s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.070
[ 3208.763s ] Query results (vector ids, then distances):
query 0 nn's (16931): 3629163 (18984) 673133 (17326) 6039182 (17054) 5996160 (22518) 2023175 (22442) 3699251 (18673) 3520645 (19095) 9869629 (21521) 3893544 (21840) 7622076 (23037) 
     dis: 	0.561 0.653 0.727 0.753 0.781 0.784 0.785 0.799 0.800 0.833 
query 1 nn's (23930): 8184616 (77249) 3998360 (77973) 6949823 (79113) 2064774 (80981) 921982 (80882) 7110145 (82784) 1449938 (78844) 854572 (80573) 2410502 (79051) 5210977 (78107) 
     dis: 	0.544 0.663 0.663 0.694 0.696 0.705 0.714 0.716 0.718 0.740 
query 2 nn's (77096): 1011981 (30177) 1197865 (23991) 1425757 (24240) 753853 (27882) 1162423 (24715) 7857729 (26738) 6582118 (27049) 7247759 (23735) 1313990 (23755) 3352884 (24831) 
     dis: 	0.341 0.362 0.367 0.400 0.404 0.406 0.412 0.414 0.420 0.426 
query 3 nn's (84095): 5146625 (48179) 6112071 (48210) 4877130 (47807) 4607447 (49340) 3058217 (48601) 2271528 (46825) 3893114 (48034) 8906651 (46940) 8253000 (47042) 3041673 (45946) 
     dis: 	0.415 0.473 0.478 0.502 0.502 0.504 0.518 0.521 0.525 0.531 
query 4 nn's (23303): 7404011 (71023) 7512766 (66993) 9927916 (68715) 5955407 (67395) 9387443 (66158) 331206 (70690) 324705 (67074) 4796897 (69757) 1269883 (67560) 2338383 (69940) 
     dis: 	0.252 0.262 0.268 0.269 0.279 0.283 0.284 0.286 0.288 0.291 
[ 3208.764s ] *** Query time: 10.602
qps: 943.236
 *** acorn recall 
efs:20
acorn get 78083 postive res from 100000 results, recall@10:0.781
recall dist(10% per bucket): 0.008 0.010 0.017 0.028 0.041 0.063 0.082 0.110 0.142 0.189 0.310 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3211.977s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 8975517
ndis: 0
nreorder: 0
average distance computations per query: 897.552
[ 3211.977s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 3145.88
	System time (seconds): 67.39
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 53:33.37
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113390964
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 30930118
	Voluntary context switches: 2
	Involuntary context switches: 3019
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:19
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_8000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_8000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.200s ] Loaded metadata, 10000000 attr's found
[ 1.200s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.202s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_8000_1_100000_random.json
[ 1.204s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_8000_1_100000_random_10.json
[ 1.216s ] Loaded ground truth, gt_size: 10
[ 1.216s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 9484.539MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.76 (857646708)
   3. nb of reciprocal neighbors: 57.11
   4. nb of neighbors that are also neighbor-of-neighbors: 79.90 (799029375)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 324.11
   4. nb of neighbors that are also neighbor-of-neighbors: 939.70 (234887300)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 941.03 (5845691)
   3. nb of reciprocal neighbors: 669.67
   4. nb of neighbors that are also neighbor-of-neighbors: 940.54 (5842651)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.94 (18471)
   3. nb of reciprocal neighbors: 129.97
   4. nb of neighbors that are also neighbor-of-neighbors: 131.41 (18398)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999362 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2757.724s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.080
[ 3188.416s ] Query results (vector ids, then distances):
query 0 nn's (24179): 7688139 (24618) 8213858 (30182) 5445379 (32153) 5535539 (32020) 186125 (25216) 3234202 (29232) 8927486 (26797) 2501815 (28520) 2986219 (25644) 561810 (27296) 
     dis: 	0.728 0.782 0.794 0.797 0.801 0.801 0.817 0.831 0.834 0.835 
query 1 nn's (32178): 5674482 (61078) 3765153 (56173) 444120 (54464) 6889250 (55350) 4887102 (56702) 353617 (58058) 8008613 (58685) 410878 (55510) 8230832 (56985) 2143994 (61288) 
     dis: 	0.546 0.568 0.577 0.579 0.603 0.615 0.619 0.626 0.628 0.628 
query 2 nn's (54175): 1197865 (23991) 1425757 (24240) 374169 (22205) 753853 (27882) 1162423 (24715) 7857729 (26738) 6582118 (27049) 7247759 (23735) 1313990 (23755) 3352884 (24831) 
     dis: 	0.362 0.367 0.373 0.400 0.404 0.406 0.412 0.414 0.420 0.426 
query 3 nn's (62174): 8083026 (69675) 8935406 (67681) 2691447 (64725) 1674418 (68140) 4952825 (63643) 1532454 (70068) 6689991 (68083) 7182132 (65964) 2927531 (65260) 4011357 (64450) 
     dis: 	0.457 0.469 0.471 0.493 0.503 0.503 0.516 0.517 0.522 0.539 
query 4 nn's (21943): 185230 (50639) 4259071 (48728) 4668213 (49541) 9987746 (45057) 7812231 (45431) 6815706 (48539) 9233596 (45860) 8731860 (45878) 2399145 (50448) 8367309 (50113) 
     dis: 	0.237 0.268 0.268 0.272 0.273 0.277 0.282 0.292 0.295 0.299 
[ 3188.416s ] *** Query time: 11.566
qps: 864.636
 *** acorn recall 
efs:20
acorn get 78087 postive res from 100000 results, recall@10:0.781
recall dist(10% per bucket): 0.007 0.011 0.019 0.026 0.043 0.061 0.080 0.107 0.143 0.195 0.307 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3192.354s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 9367167
ndis: 0
nreorder: 0
average distance computations per query: 936.717
[ 3192.354s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_8000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_8000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 96"
	User time (seconds): 3125.33
	System time (seconds): 68.35
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 53:13.82
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 113391292
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 33030587
	Voluntary context switches: 1
	Involuntary context switches: 4424
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
