Start time: 09:26
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 600
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.408s ] Loaded metadata, 20000000 attr's found
[ 1.408s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.411s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.413s ] Loaded 10000 spacev10m queries
[ 1.483s ] Loaded ground truth, gt_size: 100
[ 1.483s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.932s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 289.019s ] Query results (vector ids, then distances):
query 0 nn's (20, 85697, 88856): 3057373 (86186) 6245302 (10) 7730825 (27721) 7475967 (84477) 3175689 (41822) 5237521 (96133) 6219511 (96429) 2069320 (6) 6371214 (19) 7706600 (10) 1251292 (6) 1051216 (10) 8461271 (17209) 1651899 (32519) 974549 (81590) 5592983 (33189) 4646436 (6) 6165886 (6) 8087660 (19) 439128 (6) 1045134 (19) 6043079 (24710) 7788226 (6) 3234726 (10) 6742178 (19) 5491732 (19) 6226464 (10) 6587752 (6) 4748777 (9151) 4237177 (47754) 7382045 (11516) 5620938 (10) 7570870 (10) 7764003 (98232) 6637959 (10391) 6637437 (80781) 9574097 (80731) 475153 (36708) 3545027 (58763) 8232202 (6) 2051251 (40686) 4272028 (6) 3921625 (39220) 2642322 (10) 7753002 (6) 7229205 (95257) 7967030 (10) 3315591 (33273) 820305 (98667) 5226070 (10) 2847348 (6) 4976322 (6) 8789524 (6) 5397060 (6) 2325492 (10) 2849158 (6) 8077425 (82626) 1600063 (43162) 3546950 (6) 4320855 (90412) 8586101 (30057) 1382759 (8603) 7260887 (34987) 1158741 (71852) 1006652 (6) 8546923 (94427) 3043235 (95510) 6502610 (6) 7162400 (19) 4870446 (6) 6328360 (6) 8574977 (2790) 9831118 (10) 6428114 (10) 6387426 (10) 7368600 (10) 4372069 (12367) 8417448 (6) 4031295 (28881) 8360009 (83556) 7890532 (6) 3414275 (21560) 6149865 (57823) 1981590 (6) 4118277 (80112) 7608712 (6) 6702679 (26303) 3255235 (85486) 99849 (85587) 7485590 (19) 3354651 (70702) 4594055 (96481) 6604289 (19085) 8944014 (6) 9368605 (61523) 2630226 (6) 5762510 (6) 7852559 (31106) 7156081 (60263) 7022336 (6) 
     dis: 	8835.171 11984.315 15242.932 15573.080 17202.637 17420.846 17658.916 17807.652 17999.129 18134.898 18210.213 18235.717 18247.094 18364.305 18491.352 18669.342 18676.291 18679.660 18713.756 18779.660 18818.977 18823.066 18839.238 18873.176 18884.943 18910.895 18913.953 18984.723 18996.697 19005.545 19006.342 19017.912 19065.410 19073.102 19074.166 19111.971 19125.486 19186.174 19202.812 19204.336 19205.473 19275.094 19295.387 19318.172 19329.131 19337.207 19338.195 19399.488 19418.420 19457.777 19495.500 19502.850 19529.449 19549.387 19566.781 19571.389 19581.822 19634.393 19639.059 19697.332 19723.910 19731.660 19749.488 19802.062 19807.721 19845.453 19846.445 19861.303 19886.920 19889.229 19898.105 19913.900 19923.826 19956.035 20011.285 20139.672 20165.482 20178.857 20188.793 20215.723 20226.061 20242.727 20272.904 20306.277 20323.861 20369.672 20422.133 20459.559 20460.477 20481.502 20485.986 20499.316 20510.672 20512.443 20549.740 20567.008 20567.109 20577.418 20580.654 20588.439 
query 1 nn's (20, 52898, 56067): 1746674 (19) 7847812 (6) 2765679 (85884) 7849684 (6) 2019460 (6) 6148658 (10) 2403899 (83973) 3186430 (10) 4323333 (31948) 9155140 (6) 6123324 (10) 9806159 (60121) 4595369 (38364) 2607861 (47814) 8355451 (92066) 1608537 (82271) 1622492 (6) 9139356 (10) 6635954 (6) 9688669 (1449) 2119974 (10) 5768866 (6) 7342548 (6) 3731127 (94518) 904803 (79372) 476583 (85188) 7043697 (77508) 5073685 (15786) 7945383 (6632) 1653004 (10) 3838960 (10) 4692038 (10) 6369998 (6) 7345742 (6) 5177216 (6) 4433133 (57554) 4571718 (6) 1383909 (93079) 1642723 (75555) 8514601 (26919) 3758798 (10) 5128915 (64663) 8219354 (6) 4995991 (5689) 6275231 (40331) 2473334 (6) 2269994 (10) 7072960 (6) 2446430 (6) 9112276 (10) 335231 (4465) 3817290 (6) 5679106 (6) 4676632 (10) 2255275 (38546) 1214872 (10) 3921453 (97880) 2733439 (39511) 2617564 (6) 9621804 (6) 8953579 (44881) 977372 (6) 224635 (70747) 3634499 (10975) 3880127 (19933) 1533791 (80227) 3240321 (59352) 7062572 (19) 875429 (17461) 9829650 (6) 8923280 (10) 7615458 (6) 8954436 (10) 6074434 (10) 72973 (15845) 595237 (23503) 9209491 (52975) 1382883 (580) 505915 (31139) 4448721 (83320) 2347818 (6) 8089906 (6) 7137696 (6) 6586098 (6) 4750176 (10) 7587398 (299) 3056982 (6) 2075475 (30036) 5468593 (60756) 6220061 (37703) 8603328 (6) 7801090 (6) 1917864 (6) 1028584 (10) 9749836 (6) 6251518 (10) 1097312 (6) 8378647 (4500) 5032482 (6) 4127762 (6) 
     dis: 	12721.033 13779.709 14390.200 14708.741 14981.693 15032.479 15427.246 15489.080 16121.125 16200.655 16450.785 16492.754 16616.727 16641.301 16767.760 16803.859 16807.340 16875.818 16937.004 17053.332 17143.246 17148.672 17183.926 17207.236 17260.367 17378.014 17450.424 17522.719 17589.496 17607.273 17655.781 17708.074 17759.387 17793.035 17935.398 18002.617 18038.338 18119.289 18177.639 18336.287 18379.271 18381.043 18480.109 18505.342 18600.824 18678.992 18784.867 18847.619 18854.367 18930.482 18948.512 18971.848 18983.238 19042.012 19060.871 19106.809 19107.154 19114.168 19134.043 19170.627 19190.238 19196.482 19236.963 19284.516 19329.148 19380.770 19418.941 19423.262 19427.143 19428.512 19498.875 19508.629 19511.609 19534.641 19609.764 19650.645 19716.754 19721.701 19725.504 19745.504 19780.213 19802.391 19817.875 19826.293 19832.471 19842.219 19881.486 19881.805 19900.660 19908.713 19911.105 19936.705 19948.049 19960.082 20025.439 20034.252 20035.068 20042.398 20079.055 20093.160 
query 2 nn's (20, 19737, 22901): 8478879 (13282) 2696460 (6) 5181614 (10) 9216945 (74811) 1113387 (52292) 3079793 (78543) 8145838 (10) 5614382 (10) 5604082 (10) 1745627 (36011) 5492464 (6) 9537812 (10) 6534895 (82874) 5537844 (20) 5274807 (2745) 4882835 (79078) 4237649 (45793) 3799591 (6019) 74432 (6) 9140330 (10) 905973 (12368) 4726561 (16382) 6258583 (52488) 4771075 (78497) 4958084 (6) 5124265 (9635) 7238525 (44771) 4030082 (6) 3851844 (6) 9204288 (6) 1242487 (53832) 1332156 (6) 6384734 (6) 7499257 (95875) 5313755 (43835) 3202319 (42606) 1699309 (38675) 6782712 (6) 4521171 (94324) 337957 (83457) 7261238 (6) 2138056 (10) 5387159 (45581) 2162372 (6) 5647387 (53139) 2478276 (6) 5968273 (78514) 3354584 (6) 7786582 (19) 9842163 (53016) 3573740 (6) 1832615 (95769) 2271968 (20) 1876485 (10731) 8905047 (2327) 478471 (31913) 7607455 (92629) 5461905 (77150) 7947603 (69573) 8073671 (67039) 6990273 (193) 9199349 (41771) 3391308 (6) 3258035 (66968) 8312353 (47171) 1763080 (6) 2178878 (19) 9012957 (74510) 2169285 (52067) 4600783 (18634) 9691523 (8675) 8966624 (10) 9706353 (68865) 7558594 (10) 2853056 (6) 9777112 (6) 2595073 (38360) 3178365 (60235) 7529770 (10) 3754439 (45994) 6462606 (6) 5597858 (6) 8872804 (6) 6820102 (10) 4523305 (48167) 9570885 (83638) 8378324 (6) 7538680 (10) 4557344 (20) 79762 (10) 99248 (20) 9972300 (10) 2571939 (94895) 2159560 (10) 879772 (10) 5145362 (19) 4477398 (6) 9169352 (19) 5338327 (51904) 2433676 (10) 
     dis: 	7585.806 11978.782 11985.900 13972.178 14283.449 14515.373 14959.568 15044.174 15063.672 15305.614 15530.616 16322.169 16345.069 16410.693 16502.922 16705.654 16760.826 16772.803 16834.543 16893.121 16903.938 17010.375 17071.457 17164.684 17259.023 17262.711 17281.842 17301.986 17381.592 17506.355 17541.352 17602.453 17609.186 17615.959 17721.551 17770.451 17780.383 17909.945 17928.189 17979.818 17983.736 18013.652 18014.348 18105.834 18113.326 18122.990 18215.113 18222.105 18247.105 18358.646 18372.561 18388.891 18437.158 18469.977 18473.156 18478.961 18486.354 18588.518 18589.078 18602.340 18613.023 18613.848 18616.246 18632.725 18656.174 18676.461 18696.969 18704.986 18709.023 18736.891 18779.863 18783.484 18792.371 18810.184 18888.871 18923.324 18923.939 18941.582 18951.275 19051.541 19092.613 19095.527 19121.930 19132.270 19152.602 19175.428 19202.496 19203.924 19215.879 19263.363 19275.488 19279.574 19317.000 19323.426 19369.398 19389.438 19444.725 19464.895 19570.715 19652.729 
query 3 nn's (20, 68111, 71276): 9924746 (6) 2684832 (6) 3458762 (6) 8996573 (21462) 1355286 (10) 3380688 (6) 3755787 (42162) 8866103 (23791) 5890663 (74759) 583076 (6) 9191656 (10) 7567670 (6) 1540362 (6) 6930154 (6) 2023234 (6) 2501178 (6) 418281 (72324) 6312676 (6) 1231223 (12703) 6033930 (19) 7415856 (10) 3331050 (6) 940134 (6) 6053466 (6) 8053583 (8439) 4464077 (27800) 5597742 (6) 329785 (30160) 6163894 (6) 6976704 (6) 2830930 (6) 3610493 (26549) 182294 (6) 9986892 (6) 245421 (52953) 6423197 (27202) 5839033 (22738) 8148015 (59728) 3445598 (303) 4973951 (58392) 7854906 (10) 5033031 (9356) 7700010 (6) 1666819 (49227) 396901 (84634) 9244088 (10) 1011747 (72337) 9273884 (6) 9636123 (88671) 1623482 (6) 8708171 (77338) 8156398 (6) 3153224 (6) 4089893 (69299) 8303703 (16703) 413231 (94713) 4798791 (63508) 7113382 (6) 5161930 (10) 9995062 (169) 7230098 (10) 4036186 (6) 8017718 (6) 1464919 (63625) 5123426 (6) 6769386 (10) 1800039 (82739) 8593104 (10) 2947930 (6) 8565544 (6) 9804747 (72536) 6041660 (346) 9864959 (71964) 3656913 (3070) 2322863 (57758) 2976116 (6) 271563 (71601) 459828 (6) 5470931 (56609) 5317143 (51389) 9695806 (19) 6365234 (6) 1781717 (90223) 5013823 (15834) 1931579 (10539) 8293130 (6) 8297312 (10) 7958747 (16033) 1545572 (6) 3751176 (6) 9420301 (66844) 4430702 (6) 9453449 (80868) 5711481 (2972) 6506113 (49745) 1166715 (44202) 5841897 (38429) 9166424 (6) 9774479 (57732) 8101158 (10) 
     dis: 	12609.649 15178.960 15311.021 15430.463 15741.062 16077.795 16104.618 16255.612 16323.047 16420.670 16485.033 16573.590 16917.711 16965.426 17008.250 17112.977 17135.520 17203.312 17235.004 17296.008 17342.002 17380.688 17477.016 17548.080 17755.125 17755.668 17855.055 17938.748 17971.883 18181.113 18263.312 18313.586 18349.342 18385.939 18401.098 18523.848 18598.215 18628.396 18694.090 18745.404 18764.613 18774.859 18799.484 18802.266 18953.611 19011.045 19011.855 19108.203 19137.027 19223.451 19230.271 19355.346 19370.490 19402.373 19572.344 19602.469 19749.260 19767.283 19807.684 19900.631 19934.414 19971.840 20037.902 20075.539 20095.621 20095.887 20167.914 20171.266 20180.873 20189.473 20195.504 20232.369 20233.383 20335.039 20337.145 20371.730 20393.115 20422.568 20469.402 20482.143 20491.918 20528.875 20531.992 20536.268 20536.992 20542.264 20558.469 20633.471 20657.941 20663.615 20669.643 20673.566 20726.602 20753.910 20755.547 20756.922 20770.312 20780.328 20780.877 20782.246 
query 4 nn's (20, 51785, 54951): 8270019 (19041) 4610328 (6) 1043529 (93896) 1586369 (74910) 3811109 (95732) 9115539 (50531) 9893369 (85550) 8723982 (6) 1434962 (10) 6169651 (46665) 9262195 (19440) 3265062 (10) 3680629 (8570) 7089096 (6) 2387155 (17009) 5018111 (86762) 4713464 (10) 8840197 (47) 3884416 (6) 7162597 (40208) 9759592 (10) 7095807 (49102) 5056186 (10) 9451393 (97391) 9068300 (10) 9791994 (6) 146343 (61664) 407307 (52542) 181684 (10) 5384466 (10) 3342422 (10) 2108019 (38732) 6688894 (20) 8508002 (6) 6744830 (10) 7323947 (61613) 7114271 (24059) 1097582 (6) 111160 (6) 2093440 (19) 9264059 (3137) 4135582 (6) 7027373 (76361) 2874978 (6) 7374308 (6) 5251940 (6) 6490964 (6) 6857003 (78814) 6946217 (25612) 923960 (19) 7969626 (10) 1171363 (65854) 6175189 (32285) 5373412 (10) 8415623 (13064) 1636971 (66325) 1231766 (6) 8356503 (52509) 7106656 (10) 8567774 (6) 6445254 (6) 9252055 (7469) 1123667 (63798) 5423064 (10) 9448986 (10) 2602464 (10) 4207502 (6) 5891591 (20714) 4887936 (6) 8081008 (6) 6111456 (6) 8240854 (6) 2867924 (6) 9034181 (79723) 5544449 (6399) 7984318 (6) 6950071 (88248) 7074222 (6) 9024121 (40506) 8717234 (6) 735849 (59374) 8223296 (6) 2139587 (66676) 5125132 (6) 5718238 (6) 7454294 (10) 2536618 (10) 7596022 (6) 3779037 (19385) 1587277 (32056) 1183164 (10) 2199718 (6) 6832815 (71047) 2879025 (81074) 1906336 (20) 6091131 (52576) 6885386 (10) 3869392 (10) 6440790 (6) 683182 (10) 
     dis: 	8376.321 8604.088 8720.985 8868.778 8918.448 9046.653 9165.727 9166.999 9226.374 9299.780 9383.051 9401.794 9431.332 9452.924 9519.115 9535.433 9577.733 9637.809 9647.654 9663.180 9675.391 9682.947 9712.376 9728.963 9778.705 9779.630 9822.536 9831.699 9848.763 9862.494 9889.098 9892.646 9897.871 9904.646 9904.970 9910.308 9929.078 9941.742 9947.438 10001.116 10024.438 10028.061 10037.402 10040.773 10043.831 10057.247 10059.649 10059.785 10062.223 10068.751 10083.144 10107.219 10129.300 10143.728 10172.280 10189.678 10202.291 10209.082 10210.212 10214.590 10214.948 10219.358 10222.236 10222.356 10225.166 10226.958 10240.449 10250.300 10254.414 10272.712 10282.132 10284.169 10285.140 10313.068 10315.820 10317.187 10319.779 10320.445 10320.977 10339.339 10355.021 10361.929 10370.611 10372.340 10385.248 10390.229 10390.908 10405.712 10408.793 10411.326 10414.558 10416.357 10423.617 10424.099 10433.091 10446.816 10456.015 10464.345 10466.535 10497.009 
[ 289.019s ] *** Query time: 155.436
qps: 64.335
 *** ivfpq recall 
ivfpq get 690968 postive res from 1000000 results, recall@100:0.691
recall dist(10% per bucket): 0.001 0.007 0.017 0.035 0.080 0.145 0.194 0.208 0.177 0.128 0.007 
finished ivfpq index examples
[ 289.052s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 600 100"
	User time (seconds): 286.59
	System time (seconds): 2.54
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:49.14
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2450340
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1464447
	Voluntary context switches: 1
	Involuntary context switches: 180
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
