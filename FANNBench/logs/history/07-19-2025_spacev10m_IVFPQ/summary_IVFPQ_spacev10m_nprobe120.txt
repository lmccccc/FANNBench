Start time: 09:26
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 120
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.411s ] Loaded metadata, 20000000 attr's found
[ 1.411s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.413s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.416s ] Loaded 10000 spacev10m queries
[ 1.485s ] Loaded ground truth, gt_size: 100
[ 1.485s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.942s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 181.707s ] Query results (vector ids, then distances):
query 0 nn's (20, 85697, 88856): 3057373 (86186) 6245302 (10) 7475967 (84477) 5237521 (96133) 2069320 (6) 7706600 (10) 1251292 (6) 5592983 (33189) 4646436 (6) 439128 (6) 6587752 (6) 4748777 (9151) 4237177 (47754) 7382045 (11516) 7764003 (98232) 6637959 (10391) 9574097 (80731) 2847348 (6) 2325492 (10) 1600063 (43162) 3546950 (6) 7260887 (34987) 4870446 (6) 6387426 (10) 8417448 (6) 6149865 (57823) 3255235 (85486) 6604289 (19085) 5954392 (10) 9009528 (10) 3832090 (6) 7962722 (10) 3696697 (55332) 6090137 (92910) 4208868 (6) 6216537 (99556) 4948706 (6) 6614001 (56860) 5172908 (6) 2074675 (18896) 1548625 (35205) 1170243 (21845) 3760233 (43218) 6921327 (70802) 5990685 (45186) 870233 (30826) 5638449 (66697) 3967267 (43776) 4898597 (33796) 8080075 (38694) 7603568 (6) 6303014 (10) 77153 (37752) 2691368 (10) 7912437 (86383) 8048008 (6) 2830856 (10) 861004 (6) 8075710 (10) 5841551 (10226) 7480478 (6) 1298149 (36260) 3980156 (10) 9255225 (97554) 418222 (10) 6847306 (6) 7765774 (10) 1198605 (13836) 2848113 (82035) 3605798 (19) 4298692 (6) 2942351 (53963) 8832487 (89351) 930254 (6) 4292645 (46184) 8236775 (43004) 9745851 (93352) 580372 (6) 1677428 (10) 1443278 (6) 7700412 (6) 5717626 (10) 4603468 (10) 4881396 (10) 8894979 (75679) 4518335 (16240) 7563857 (65442) 8212939 (991) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	8835.171 11984.315 15573.080 17420.846 17807.652 18134.898 18210.213 18669.342 18676.291 18779.660 18984.723 18996.697 19005.545 19006.342 19073.102 19074.166 19125.486 19495.500 19566.781 19634.393 19639.059 19749.488 19889.229 20011.285 20178.857 20272.904 20459.559 20510.672 20975.852 20991.992 21004.705 21007.832 21206.598 21219.254 21267.285 21283.342 21330.045 21334.680 21360.533 21509.668 21601.516 21643.598 21657.416 21714.863 21725.721 21786.424 21897.156 22121.162 22135.930 22138.637 22155.242 22165.014 22216.629 22291.963 22405.449 22407.586 22463.703 22643.902 22668.545 22738.285 22749.061 22896.873 22909.754 22921.723 22963.111 22972.662 23001.344 23056.793 23319.727 23359.270 23593.746 23602.008 23707.223 23824.777 23952.312 24049.742 24289.141 24294.246 24365.336 24575.594 24658.047 24686.688 24944.039 24962.797 26000.047 26007.547 26336.393 29180.285 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 52898, 56067): 1746674 (19) 7847812 (6) 2765679 (85884) 7849684 (6) 2019460 (6) 6148658 (10) 3186430 (10) 9155140 (6) 6123324 (10) 9806159 (60121) 2607861 (47814) 8355451 (92066) 1622492 (6) 9139356 (10) 6635954 (6) 9688669 (1449) 2119974 (10) 5768866 (6) 3731127 (94518) 476583 (85188) 5073685 (15786) 7945383 (6632) 1653004 (10) 3838960 (10) 4692038 (10) 6369998 (6) 5177216 (6) 4433133 (57554) 4571718 (6) 1642723 (75555) 8514601 (26919) 3758798 (10) 5128915 (64663) 6275231 (40331) 2473334 (6) 2269994 (10) 7072960 (6) 2446430 (6) 9112276 (10) 3817290 (6) 4676632 (10) 2733439 (39511) 9621804 (6) 8953579 (44881) 977372 (6) 224635 (70747) 3240321 (59352) 7062572 (19) 875429 (17461) 9829650 (6) 8954436 (10) 6074434 (10) 8089906 (6) 7137696 (6) 6586098 (6) 4750176 (10) 3056982 (6) 2075475 (30036) 5468593 (60756) 8603328 (6) 6251518 (10) 4127762 (6) 5845498 (6) 1271489 (32265) 790881 (36585) 9383893 (43812) 3585354 (6) 4660557 (32950) 7416818 (10) 2115739 (90167) 1968552 (10) 2600340 (6) 5186615 (51015) 9492588 (10) 8699382 (6) 3122408 (6) 4525575 (15794) 4163316 (10) 931787 (48741) 3358811 (57863) 8716351 (37629) 8331650 (6) 6374893 (24109) 5338376 (6) 3036026 (6) 3014001 (44594) 6605066 (6) 5846031 (65942) 5877666 (10) 1505265 (58727) 3877209 (11661) 8507219 (73621) 3226497 (87318) 7140499 (56502) 5150193 (38493) 6807343 (83534) 1283627 (79446) 5420512 (6) 893447 (40819) 6482026 (6) 
     dis: 	12721.033 13779.709 14390.200 14708.741 14981.693 15032.479 15489.080 16200.655 16450.785 16492.754 16641.301 16767.760 16807.340 16875.818 16937.004 17053.332 17143.246 17148.672 17207.236 17378.014 17522.719 17589.496 17607.273 17655.781 17708.074 17759.387 17935.398 18002.617 18038.338 18177.639 18336.287 18379.271 18381.043 18600.824 18678.992 18784.867 18847.619 18854.367 18930.482 18971.848 19042.012 19114.168 19170.627 19190.238 19196.482 19236.963 19418.941 19423.262 19427.143 19428.512 19511.609 19534.641 19802.391 19817.875 19826.293 19832.471 19881.486 19881.805 19900.660 19911.105 20034.252 20093.160 20288.551 20409.111 20445.562 20483.018 20556.561 20613.836 20619.596 20647.156 20745.600 20886.406 20919.262 20965.068 21072.434 21099.031 21127.641 21359.586 21614.367 21637.271 21654.168 21657.895 21750.801 21876.375 21941.445 22035.848 22044.406 22088.184 22239.680 22243.727 22245.465 22621.070 22803.996 22906.895 22916.314 22957.297 23134.104 23172.016 23310.312 23714.309 
query 2 nn's (20, 19737, 22901): 8478879 (13282) 2696460 (6) 5181614 (10) 9216945 (74811) 1113387 (52292) 8145838 (10) 5614382 (10) 5604082 (10) 9537812 (10) 6534895 (82874) 4882835 (79078) 4237649 (45793) 3799591 (6019) 74432 (6) 4771075 (78497) 4958084 (6) 5124265 (9635) 1242487 (53832) 6384734 (6) 3202319 (42606) 6782712 (6) 2138056 (10) 5968273 (78514) 3573740 (6) 1832615 (95769) 8073671 (67039) 6990273 (193) 9199349 (41771) 3391308 (6) 9012957 (74510) 9691523 (8675) 7558594 (10) 3178365 (60235) 7529770 (10) 3754439 (45994) 6462606 (6) 5597858 (6) 6820102 (10) 4557344 (20) 9972300 (10) 2159560 (10) 879772 (10) 5145362 (19) 9169352 (19) 5338327 (51904) 5417664 (10) 182044 (390) 3254881 (11152) 8516605 (71825) 5144770 (10) 1669320 (6) 8136067 (58419) 9699856 (10) 3607247 (44169) 3224082 (6) 8581257 (58750) 565037 (62723) 4968261 (81142) 2910015 (72510) 8054446 (19) 2282852 (6) 6649594 (6) 3382162 (10) 163218 (10) 3618062 (6) 7619259 (68332) 9116416 (19) 4699430 (19) 5809432 (6) 6676881 (58517) 8930964 (6) 9090341 (59852) 9271662 (6) 5033869 (1471) 9474083 (40503) 1351093 (66560) 7694635 (22165) 5478037 (96860) 1642371 (94932) 7295839 (24925) 66417 (84309) 1801430 (10) 869070 (10) 4972019 (59030) 7949605 (92878) 5493192 (6) 2599340 (10) 8506576 (6) 5900501 (64978) 5665781 (45872) 2362318 (6) 8673953 (33314) 5933314 (10) 8094534 (6) 2712856 (6) 5932188 (10) 5913376 (6) 6873015 (2707) 2289161 (14068) 6569586 (10) 
     dis: 	7585.806 11978.782 11985.900 13972.178 14283.449 14959.568 15044.174 15063.672 16322.169 16345.069 16705.654 16760.826 16772.803 16834.543 17164.684 17259.023 17262.711 17541.352 17609.186 17770.451 17909.945 18013.652 18215.113 18372.561 18388.891 18602.340 18613.023 18613.848 18616.246 18704.986 18779.863 18810.184 18941.582 18951.275 19051.541 19092.613 19095.527 19132.270 19215.879 19279.574 19323.426 19369.398 19389.438 19464.895 19570.715 19697.119 19738.656 19840.414 19932.684 20008.400 20056.801 20110.463 20144.086 20215.377 20286.090 20356.832 20369.318 20408.092 20474.762 20568.777 20792.566 20812.584 20850.383 21259.107 21317.586 21329.293 21355.348 21574.574 21717.898 21798.773 21852.660 21899.852 21931.273 22110.988 22180.287 22220.719 22330.111 22337.404 22374.385 22394.961 22404.064 22419.293 22513.145 22544.273 22584.188 22643.691 22687.000 22762.887 22789.148 23036.156 23065.752 23168.336 23359.582 23677.664 23709.527 23743.203 23796.176 23991.137 23992.234 24775.273 
query 3 nn's (20, 68111, 71276): 2684832 (6) 3458762 (6) 8996573 (21462) 1355286 (10) 3380688 (6) 8866103 (23791) 5890663 (74759) 583076 (6) 9191656 (10) 7567670 (6) 1540362 (6) 6930154 (6) 2023234 (6) 2501178 (6) 418281 (72324) 6312676 (6) 6033930 (19) 7415856 (10) 940134 (6) 6053466 (6) 8053583 (8439) 4464077 (27800) 5597742 (6) 2830930 (6) 9986892 (6) 245421 (52953) 5839033 (22738) 8148015 (59728) 4973951 (58392) 5033031 (9356) 396901 (84634) 8708171 (77338) 3153224 (6) 4089893 (69299) 5161930 (10) 9995062 (169) 8017718 (6) 5123426 (6) 1800039 (82739) 9804747 (72536) 2322863 (57758) 271563 (71601) 5470931 (56609) 5013823 (15834) 1931579 (10539) 8293130 (6) 1545572 (6) 5711481 (2972) 1166715 (44202) 9166424 (6) 1974474 (10) 8694431 (34561) 2393215 (1740) 3292674 (10) 4453479 (32738) 8049812 (10) 5817478 (19) 7082776 (6) 4250145 (81621) 2931895 (37535) 9342257 (67994) 9791135 (19508) 2389535 (59183) 4204788 (6) 7735272 (10) 6934204 (6) 5936475 (90468) 3477819 (15068) 7832989 (11886) 8324382 (6) 1876795 (81675) 6173505 (34212) 4576187 (26338) 2890094 (6) 1581255 (87263) 410687 (64820) 1969443 (55320) 9823275 (69230) 6453223 (61808) 1692306 (20) 7938668 (19) 917772 (10) 4589605 (7145) 2897114 (10) 441499 (75961) 8976253 (42762) 1719747 (98210) 1033250 (10) 6536049 (9380) 5115676 (6) 6985056 (6) 2798675 (26049) 5728111 (12920) 6543976 (6) 3838760 (6) 293348 (10) 3741444 (20) 5090965 (91367) 9855651 (85713) 8017545 (78053) 
     dis: 	15178.960 15311.021 15430.463 15741.062 16077.795 16255.612 16323.047 16420.670 16485.033 16573.590 16917.711 16965.426 17008.250 17112.977 17135.520 17203.312 17296.008 17342.002 17477.016 17548.080 17755.125 17755.668 17855.055 18263.312 18385.939 18401.098 18598.215 18628.396 18745.404 18774.859 18953.611 19230.271 19370.490 19402.373 19807.684 19900.631 20037.902 20095.621 20167.914 20195.504 20337.145 20393.115 20469.402 20536.268 20536.992 20542.264 20657.941 20753.910 20756.922 20780.328 20819.445 20832.480 20850.264 20880.812 20921.123 21078.230 21085.508 21107.492 21214.449 21231.766 21241.453 21264.727 21314.654 21330.551 21368.117 21372.875 21547.402 21658.176 21681.895 21682.375 21715.754 21717.734 21754.326 21852.703 21910.484 21927.559 22020.590 22147.660 22263.354 22302.537 22343.244 22350.740 22355.674 22454.648 22569.113 22946.443 23044.037 23123.594 23124.457 23126.234 23283.273 23416.523 23543.369 23595.742 23696.035 23717.742 23736.926 24093.277 24102.551 24119.189 
query 4 nn's (20, 51785, 54951): 8270019 (19041) 1043529 (93896) 1586369 (74910) 3811109 (95732) 9115539 (50531) 9893369 (85550) 8723982 (6) 9262195 (19440) 3680629 (8570) 2387155 (17009) 4713464 (10) 8840197 (47) 7162597 (40208) 9759592 (10) 407307 (52542) 5384466 (10) 3342422 (10) 6688894 (20) 8508002 (6) 6744830 (10) 2093440 (19) 9264059 (3137) 2874978 (6) 6857003 (78814) 923960 (19) 1171363 (65854) 6445254 (6) 9024121 (40506) 5125132 (6) 3869392 (10) 4460171 (78322) 4904781 (90274) 6698599 (95250) 8251508 (19) 8930542 (10) 4660210 (10) 8980140 (10) 2836189 (99427) 5421140 (6) 1657456 (10) 4057588 (6) 44630 (10) 1958246 (20) 2291838 (6) 3272308 (6) 8761344 (6) 7714481 (60690) 6534354 (6) 7198038 (10) 5711970 (10) 4134263 (59727) 6102265 (7717) 7079464 (6) 7380282 (6) 2832688 (6) 4036070 (10) 6908669 (70128) 1682560 (10) 9243166 (10) 7024431 (52111) 5467086 (6) 7570341 (2698) 2681902 (6) 429842 (19) 4217965 (74365) 788157 (96565) 9656492 (6) 6155237 (88164) 385618 (6) 7784457 (99026) 6527167 (81648) 7467341 (43154) 2379230 (6) 1816668 (6) 8315585 (6344) 3610628 (6) 5676892 (10) 1968629 (73261) 3884977 (4355) 9715918 (6) 4569045 (24967) 8698011 (79556) 2685792 (6) 7387735 (88808) 4672468 (6) 3612686 (10) 6138357 (280) 3728640 (6) 9676405 (96811) 7751301 (92131) 9802068 (10) 2576006 (6) 8160745 (18560) 3772991 (65535) 1844329 (91136) 2436040 (6) 2904003 (19951) 3255526 (19) 552552 (10) 141391 (15560) 
     dis: 	8376.321 8720.985 8868.778 8918.448 9046.653 9165.727 9166.999 9383.051 9431.332 9519.115 9577.733 9637.809 9663.180 9675.391 9831.699 9862.494 9889.098 9897.871 9904.646 9904.970 10001.116 10024.438 10040.773 10059.785 10068.751 10107.219 10214.948 10320.977 10372.340 10464.345 10608.462 10628.943 10765.382 10818.201 10826.172 10844.311 10906.975 10937.984 10965.584 10998.970 11018.197 11038.455 11163.083 11174.542 11188.635 11218.511 11220.136 11227.458 11231.960 11238.404 11244.120 11255.780 11333.136 11400.597 11410.218 11465.885 11485.445 11492.037 11593.635 11697.719 11699.357 11705.025 11777.805 11823.582 11840.928 11846.018 11880.260 11894.788 11944.842 12052.121 12070.022 12101.428 12171.041 12181.639 12187.613 12211.182 12304.976 12311.849 12415.744 12463.707 12495.164 12578.118 12580.939 12619.150 12719.820 12725.140 12779.755 12847.582 12853.453 12925.974 12990.204 13105.951 13246.338 13264.809 13388.266 13440.483 13459.381 13507.066 13553.582 13616.295 
[ 181.707s ] *** Query time: 41.767
qps: 239.422
 *** ivfpq recall 
ivfpq get 336989 postive res from 1000000 results, recall@100:0.337
recall dist(10% per bucket): 0.025 0.111 0.245 0.285 0.228 0.088 0.014 0.002 0.000 0.001 0.001 
finished ivfpq index examples
[ 181.742s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 120 100"
	User time (seconds): 179.08
	System time (seconds): 2.76
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:01.85
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2450344
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1972493
	Voluntary context switches: 1
	Involuntary context switches: 146
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
