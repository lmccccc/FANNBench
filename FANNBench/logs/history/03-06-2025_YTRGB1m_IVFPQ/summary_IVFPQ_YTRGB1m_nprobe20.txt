Start time: 23:50
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512
nprobe: 20
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.118s ] Loaded metadata, 1000000 attr's found
[ 0.118s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.148s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.150s ] Loaded 10000 YTRGB1m queries
[ 0.164s ] Loaded ground truth, gt_size: 10
[ 0.164s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.966s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 261.011s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 929361 (6) 889953 (6) 333483 (6) 418474 (6) 802406 (6) 599702 (6) 70519 (6) 239994 (6) 694505 (6) 210398 (6) 
     dis: 	81.002 83.435 87.254 88.319 89.762 89.936 90.135 90.137 90.622 90.639 
query 1 nn's (6, 6): 302746 (6) 187245 (6) 320776 (6) 630027 (6) 735378 (6) 373852 (6) 138086 (6) 1795 (6) 627139 (6) 411735 (6) 
     dis: 	51.008 53.164 53.855 54.160 54.214 54.368 54.587 54.600 54.834 55.039 
query 2 nn's (6, 6): 326896 (6) 435470 (6) 871743 (6) 529153 (6) 509845 (6) 667162 (6) 464997 (6) 432506 (6) 367807 (6) 698610 (6) 
     dis: 	135.613 135.861 136.185 138.488 139.289 139.829 139.829 139.831 140.195 140.599 
query 3 nn's (6, 6): 505074 (6) 870912 (6) 551084 (6) 873503 (6) 759272 (6) 581576 (6) 469561 (6) 376313 (6) 979326 (6) 954742 (6) 
     dis: 	146.462 154.219 163.064 166.619 168.081 168.654 169.393 169.556 172.729 172.955 
query 4 nn's (6, 6): 719380 (6) 223865 (6) 895955 (6) 461345 (6) 829463 (6) 729225 (6) 62933 (6) 135316 (6) 33136 (6) 969735 (6) 
     dis: 	56.317 66.648 68.564 71.730 73.298 73.811 75.124 75.447 75.487 75.612 
[ 261.011s ] *** Query time: 251.326
qps: 39.789
 *** ivfpq recall 
ivfpq get 91625 postive res from 100000 results, recall@10:0.916
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.002 0.004 0.011 0.037 0.125 0.399 0.422 
finished ivfpq index examples
[ 261.014s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512 20 1024"
	User time (seconds): 258.46
	System time (seconds): 2.78
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:21.25
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2633636
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1001462
	Voluntary context switches: 2
	Involuntary context switches: 207
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:31
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512
nprobe: 20
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.068s ] Loaded metadata, 1000000 attr's found
[ 0.068s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.093s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.094s ] Loaded 10000 YTRGB1m queries
[ 0.101s ] Loaded ground truth, gt_size: 10
[ 0.101s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.055s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 94.862s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 467816 (10) 616256 (10) 597593 (10) 327418 (10) 31562 (10) 751978 (10) 945815 (10) 863882 (10) 283397 (10) 38338 (10) 
     dis: 	89.949 92.654 93.870 95.207 95.243 95.862 95.924 96.295 96.443 96.842 
query 1 nn's (10, 10): 963956 (10) 497306 (10) 506689 (10) 819134 (10) 326679 (10) 853723 (10) 431933 (10) 30000 (10) 724711 (10) 910863 (10) 
     dis: 	53.088 53.331 53.655 54.271 54.367 54.805 56.413 56.864 57.093 57.245 
query 2 nn's (10, 10): 423205 (10) 225875 (10) 619819 (10) 76351 (10) 572163 (10) 320908 (10) 946688 (10) 353253 (10) 302286 (10) 707130 (10) 
     dis: 	132.170 136.024 140.304 141.597 142.265 144.495 144.988 145.252 145.367 145.384 
query 3 nn's (10, 10): 421752 (10) 99295 (10) 14703 (10) 969523 (10) 77517 (10) 311972 (10) 431502 (10) 683491 (10) 960065 (10) 605960 (10) 
     dis: 	144.675 167.177 171.598 172.770 183.512 184.289 185.260 185.562 186.098 186.845 
query 4 nn's (10, 10): 314093 (10) 100485 (10) 58705 (10) 273627 (10) 615031 (10) 272857 (10) 44531 (10) 203716 (10) 209754 (10) 6454 (10) 
     dis: 	52.787 79.750 80.398 82.340 89.308 90.389 90.666 91.725 97.720 98.813 
[ 94.862s ] *** Query time: 85.113
qps: 117.491
 *** ivfpq recall 
ivfpq get 89759 postive res from 100000 results, recall@10:0.898
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.002 0.008 0.021 0.058 0.157 0.395 0.359 
finished ivfpq index examples
[ 94.863s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512 20 1024"
	User time (seconds): 93.50
	System time (seconds): 1.52
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:35.03
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2632616
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 657098
	Voluntary context switches: 4
	Involuntary context switches: 126
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:55
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512
nprobe: 20
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.104s ] Loaded metadata, 1000000 attr's found
[ 0.104s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.134s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.136s ] Loaded 10000 YTRGB1m queries
[ 0.147s ] Loaded ground truth, gt_size: 10
[ 0.148s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.240s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 58.429s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 877336 (19) 114680 (19) 777725 (19) 347661 (19) 715504 (19) 203528 (19) 822524 (19) 790321 (19) 635083 (19) 739658 (19) 
     dis: 	99.247 99.614 102.622 104.433 104.967 105.041 105.504 105.661 106.373 106.474 
query 1 nn's (19, 19): 867145 (19) 944075 (19) 473207 (19) 771649 (19) 739658 (19) 877336 (19) 203528 (19) 266357 (19) 474407 (19) 714582 (19) 
     dis: 	55.472 61.102 61.947 63.705 67.791 68.133 68.171 70.166 70.180 70.273 
query 2 nn's (19, 19): 476128 (19) 917665 (19) 114680 (19) 920409 (19) 593711 (19) 577883 (19) 990093 (19) 715504 (19) 514560 (19) 266357 (19) 
     dis: 	141.677 143.153 146.624 147.065 148.610 150.008 150.655 150.868 150.874 151.449 
query 3 nn's (19, 19): 750794 (19) 861784 (19) 974739 (19) 739765 (19) 877336 (19) 739658 (19) 822524 (19) 777725 (19) 790321 (19) 593711 (19) 
     dis: 	184.691 189.380 190.212 192.355 192.611 193.951 194.169 194.653 194.686 195.608 
query 4 nn's (19, 19): 610165 (19) 615042 (19) 965681 (19) 995580 (19) 767773 (19) 651770 (19) 933620 (19) 629354 (19) 86156 (19) 383339 (19) 
     dis: 	76.269 115.486 148.364 169.481 184.415 210.138 212.637 214.984 228.461 231.870 
[ 58.429s ] *** Query time: 47.739
qps: 209.473
 *** ivfpq recall 
ivfpq get 81163 postive res from 100000 results, recall@10:0.812
recall dist(10% per bucket): 0.000 0.001 0.003 0.006 0.014 0.031 0.074 0.159 0.254 0.296 0.163 
finished ivfpq index examples
[ 58.430s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512 20 1024"
	User time (seconds): 56.97
	System time (seconds): 1.63
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:58.60
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2633636
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 657102
	Voluntary context switches: 8
	Involuntary context switches: 60
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:10
====================
START: running TEST_IVFPQ, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512
nprobe: 20
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.104s ] Loaded metadata, 1000000 attr's found
[ 0.104s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.130s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.132s ] Loaded 10000 YTRGB1m queries
[ 0.144s ] Loaded ground truth, gt_size: 10
[ 0.144s ] Index Params -- d: 1024, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.383s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 55.460s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 481032 (20) 552273 (20) 276769 (20) 956833 (20) 427825 (20) 733579 (20) 979613 (20) 456018 (20) 4223 (20) 414470 (20) 
     dis: 	108.737 114.231 115.123 115.350 115.958 118.513 119.504 121.844 122.486 122.646 
query 1 nn's (20, 20): 481032 (20) 585723 (20) 956833 (20) 552273 (20) 276769 (20) 427825 (20) 979613 (20) 4223 (20) 912090 (20) 998134 (20) 
     dis: 	71.002 72.848 74.120 79.391 80.246 81.825 81.985 86.384 90.437 91.256 
query 2 nn's (20, 20): 979613 (20) 107950 (20) 481032 (20) 276769 (20) 427825 (20) 956833 (20) 733579 (20) 552273 (20) 159144 (20) 4223 (20) 
     dis: 	139.297 151.731 154.636 160.665 161.630 161.633 162.385 163.697 164.376 166.855 
query 3 nn's (20, 20): 481032 (20) 922906 (20) 4223 (20) 956833 (20) 276769 (20) 427825 (20) 289577 (20) 552273 (20) 998134 (20) 534852 (20) 
     dis: 	193.287 196.936 204.198 204.326 204.525 204.728 206.064 206.479 214.012 214.203 
query 4 nn's (20, 20): 410526 (20) 898770 (20) 182093 (20) 733579 (20) 481032 (20) 552273 (20) 427825 (20) 276769 (20) 104105 (20) 456018 (20) 
     dis: 	138.980 211.227 241.095 278.434 279.517 284.440 286.142 287.615 293.050 294.841 
[ 55.460s ] *** Query time: 44.728
qps: 223.574
 *** ivfpq recall 
ivfpq get 57279 postive res from 100000 results, recall@10:0.573
recall dist(10% per bucket): 0.008 0.018 0.031 0.051 0.113 0.186 0.246 0.198 0.100 0.036 0.013 
finished ivfpq index examples
[ 55.461s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json /mnt/data/mocheng/dataset/youtube1m/ivfpq/index/index_ivfpq_sel_1_500_random_512 20 1024"
	User time (seconds): 53.27
	System time (seconds): 2.40
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:55.67
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2631592
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 905227
	Voluntary context switches: 1
	Involuntary context switches: 88
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
