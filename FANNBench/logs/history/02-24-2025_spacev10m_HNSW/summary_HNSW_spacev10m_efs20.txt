Start time: 08:19
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.721s ] Loaded metadata, 10000000 attr's found
[ 0.721s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.724s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.725s ] Loaded 10000 spacev10m queries
[ 0.732s ] Loaded ground truth, gt_size: 10
[ 0.733s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.361s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 83.473s ] Query results (vector ids, then distances):
query 0 nn's (40856, 50855): 606211 (46345) 6583311 (47922) 3082748 (43400) 38473 (46733) 8997960 (41694) 8538301 (43948) 7007393 (50612) 6547416 (46965) 244510 (41564) 1947555 (46272) 
     dis: 	5333.000 6338.000 6920.000 7027.000 7191.000 7544.000 7710.000 7882.000 8194.000 8354.000 
query 1 nn's (25003, 35002): 6693881 (28141) 6631934 (28922) 913237 (31716) 128447 (33616) 1286599 (26580) 4764135 (25237) 9844113 (25407) 8084904 (26103) 7191660 (26554) 2400979 (32818) 
     dis: 	8318.000 9175.000 9300.000 9379.000 9607.000 9898.000 9916.000 10035.000 10220.000 10345.000 
query 2 nn's (52136, 62135): 4927764 (61896) 5193386 (58419) 9602743 (57407) 4710102 (57576) 5423341 (53232) 2961580 (56149) 9485250 (57717) 1425558 (59965) 323907 (52531) 8971627 (61869) 
     dis: 	6596.000 7399.000 8053.000 8124.000 8500.000 8750.000 8960.000 9126.000 9129.000 9180.000 
query 3 nn's (22672, 32671): 7020630 (23256) 391722 (24862) 3188407 (24304) 8232477 (31632) 9892318 (23797) 5621855 (30749) 7435385 (25937) 5563393 (26978) 6703969 (32159) 3517824 (30137) 
     dis: 	8902.000 9931.000 9960.000 10280.000 10541.000 10647.000 11029.000 11117.000 11156.000 11535.000 
query 4 nn's (53667, 63666): 7373067 (53855) 2038833 (53914) 8774147 (59338) 3192757 (54312) 7921516 (63604) 2157254 (54534) 3510502 (59384) 6851242 (63477) 6549886 (63665) 6592347 (55694) 
     dis: 	5809.000 6330.000 6791.000 6817.000 7197.000 7251.000 7293.000 7312.000 7395.000 7578.000 
[ 83.473s ] *** Query time: 13.102
qps: 763.237
 *** HNSW recall 
HNSW get 64992 postive res from 100000 results, recall@10:0.650
recall dist(10% per bucket): 0.020 0.016 0.031 0.050 0.077 0.109 0.142 0.162 0.180 0.140 0.074 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 16793855, average: 1679.386
finished ivfpq index examples
[ 83.474s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 100"
	User time (seconds): 77.56
	System time (seconds): 6.55
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:24.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7263388
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1830416
	Voluntary context switches: 1
	Involuntary context switches: 120
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:52
====================
START: running TEST_HNSW, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.716s ] Loaded metadata, 10000000 attr's found
[ 0.716s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.718s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.720s ] Loaded 10000 spacev10m queries
[ 0.727s ] Loaded ground truth, gt_size: 10
[ 0.727s ] Index Params -- d: 100, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.262s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 88.324s ] Query results (vector ids, then distances):
query 0 nn's (40616, 90615): 1352077 (75218) 1300400 (68247) 525784 (86118) 606211 (46345) 1781760 (80354) 7509422 (86182) 8021837 (54227) 290760 (73276) 6583311 (47922) 1714233 (65633) 
     dis: 	3278.000 3455.000 5270.000 5333.000 5414.000 5894.000 6219.000 6292.000 6338.000 6491.000 
query 1 nn's (23827, 73826): 1027770 (59556) 3024255 (36040) 3545414 (44593) 6716785 (66378) 6693881 (28141) 1087257 (62343) 3843020 (54844) 547651 (43364) 1739613 (53800) 6945939 (60753) 
     dis: 	4889.000 6351.000 7469.000 7593.000 8318.000 8514.000 8685.000 8991.000 9038.000 9078.000 
query 2 nn's (32197, 82196): 4574760 (37531) 5189301 (43405) 8005273 (37538) 4290437 (79182) 3524579 (49429) 8672246 (67919) 8167950 (64329) 4927764 (61896) 5932138 (71360) 8699363 (38066) 
     dis: 	3034.000 3368.000 3855.000 4555.000 5017.000 6310.000 6379.000 6596.000 6968.000 7268.000 
query 3 nn's (10631, 60630): 4286832 (17230) 1208824 (37041) 1165548 (45426) 1681561 (52434) 9732223 (41833) 7020630 (23256) 7375372 (33987) 7371232 (47114) 8694166 (43201) 7664306 (35020) 
     dis: 	4960.000 7689.000 7871.000 8422.000 8881.000 8902.000 9144.000 9274.000 9661.000 9757.000 
query 4 nn's (49705, 99704): 3987492 (98027) 3107282 (67009) 5744224 (51156) 9211260 (81222) 7373067 (53855) 6872756 (95706) 6279473 (68764) 4015525 (99118) 3526517 (65512) 2038833 (53914) 
     dis: 	3787.000 5291.000 5418.000 5775.000 5809.000 5915.000 6062.000 6212.000 6305.000 6330.000 
[ 88.324s ] *** Query time: 14.569
qps: 686.376
 *** HNSW recall 
HNSW get 82985 postive res from 100000 results, recall@10:0.830
recall dist(10% per bucket): 0.022 0.007 0.011 0.017 0.024 0.035 0.053 0.074 0.125 0.208 0.424 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 16793855, average: 1679.386
finished ivfpq index examples
[ 88.325s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 100"
	User time (seconds): 82.46
	System time (seconds): 6.44
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:28.91
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 7266208
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1830398
	Voluntary context switches: 1
	Involuntary context switches: 158
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
