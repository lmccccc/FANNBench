Start time: 05:09
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/attr_sel_1_8_8_random.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_8_8_random_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.022s ] Loaded attributions, 1000000 found
[ 0.022s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.022s ] Loading database
[ 0.376s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.376s ] Indexing database, size 1000000*128 from max 1000000
[ 0.376s ] Adding the vectors to the index
index construction cost:85.620
[ 85.620s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 86.092s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_8_8_random_40_1000
[86.092 s] -----DONE-----
[ 86.092s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/attr_sel_1_8_8_random.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_8_8_random_40_1000 128 40 1000"
	User time (seconds): 8864.44
	System time (seconds): 27.55
	Percent of CPU this job got: 10316%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:26.18
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1486784
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1718331
	Voluntary context switches: 8330
	Involuntary context switches: 190542
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:17
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/attr_sel_1_8_8_random.json
qrange file: /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/qrangesel_1_8_8_random.json
gt file: /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/sif_gt_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_8_8_random_40_1000
ef_search: 400
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/sel_1_8_8_random/attr_sel_1_8_8_random.json
[ 1.340s ] Loaded metadata, 1000000 attr's found
[ 1.340s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.344s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 1.345s ] Loaded 10000 sift1M queries
[ 1.352s ] Loaded ground truth, gt_size: 10
[ 1.352s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 1.939s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.270
[ 421.999s ] Query results (vector ids, then distances):
query 0 nn's (1, 1): 708177 (1) 435345 (0, 1) 872728 (1, 4, 5) 565419 (0, 1) 565814 (1) 910119 (1) 843384 (1, 5) 886630 (1) 68299 (0, 1, 3) 779712 (0, 1, 4) 
     dis: 	65260.000 68247.000 71861.000 75634.000 76051.000 77564.000 77588.000 77660.000 77917.000 78092.000 
query 1 nn's (1, 1): 413247 (0, 1) 880592 (1, 2) 880462 (0, 1) 941776 (0, 1) 586780 (1, 3) 833054 (0, 1) 208391 (1) 976547 (1, 2) 71819 (1) 598353 (1, 2, 7) 
     dis: 	51187.000 54987.000 56396.000 57646.000 58246.000 58464.000 59679.000 61167.000 61982.000 63645.000 
query 2 nn's (1, 1): 408462 (1) 408855 (0, 1) 551743 (1, 3, 7) 900097 (1, 2) 431595 (1) 62269 (1) 150588 (1) 736302 (0, 1) 695462 (1) 534822 (0, 1, 2) 
     dis: 	33608.000 34104.000 36325.000 38137.000 38236.000 39826.000 39984.000 40215.000 40907.000 41204.000 
query 3 nn's (1, 1): 48044 (1) 190621 (1, 3, 4) 190587 (0, 1) 191092 (0, 1) 941084 (1) 839734 (0, 1) 545314 (1, 3) 956544 (1) 191169 (0, 1) 192051 (0, 1, 2) 
     dis: 	32777.000 38013.000 40086.000 40234.000 41374.000 41880.000 41933.000 42167.000 42168.000 42605.000 
query 4 nn's (1, 1): 368246 (0, 1, 4) 340288 (0, 1) 953387 (1, 7) 491554 (1, 6) 807785 (1) 403978 (0, 1) 79424 (0, 1, 7) 59308 (0, 1) 549359 (0, 1) 151654 (1, 3) 
     dis: 	57046.000 57968.000 58065.000 58390.000 58908.000 59193.000 59956.000 60042.000 60779.000 61768.000 
[ 421.999s ] *** Query time: 131.693
qps: 75.934
 *** HNSW recall 
HNSW get 99982 postive res from 100000 results, recall@10:1.000
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.998 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 180455298, average: 18045.530
finished ivfpq index examples
[ 421.999s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query_keyword sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/attr_sel_1_8_8_random.json /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/qrangesel_1_8_8_random.json /mnt/data/mocheng/dataset/sift/sel_1_8_8_random/sif_gt_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_8_8_random_40_1000 400 128"
	User time (seconds): 369.74
	System time (seconds): 59.31
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:09.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 133231596
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 33307093
	Voluntary context switches: 1
	Involuntary context switches: 1430
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
