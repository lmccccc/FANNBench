Start time: 05:16
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64
ef_search: 30 
dim: 1024
metadata or vector loaded from json, size: 2000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.209s ] Loaded metadata, 2000000 attr's found
[ 0.209s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.232s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 40000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
[ 0.236s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
[ 0.247s ] Loaded ground truth, gt_size: 10
[ 0.247s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025537
Average degree per layer:170922.833
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.635s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 30
selectivity: 0.500
[ 79.861s ] Query results (vector ids, then distances):
query 0 nn's (6, 10418, 93742): 418474 (6, 21773) 469118 (6, 50200) 110922 (6, 34343) 953921 (6, 63258) 956829 (6, 90436) 242795 (6, 43333) 70165 (6, 64214) 428766 (6, 75559) 687363 (6, 69919) 157018 (6, 88107) 
     dis: 	88.657 92.759 95.573 96.544 96.595 96.960 97.025 97.447 97.770 97.972 
query 1 nn's (6, 871, 84222): 963956 (6, 4389) 506689 (6, 79696) 630027 (6, 22744) 326679 (6, 51496) 172456 (6, 77471) 627139 (6, 79500) 689633 (6, 33738) 867145 (6, 75730) 380703 (6, 12666) 546210 (6, 60614) 
     dis: 	53.192 53.409 53.659 54.387 54.590 54.590 54.671 55.592 55.684 56.373 
query 2 nn's (6, 2953, 86302): 423205 (6, 45666) 531527 (6, 39427) 871743 (6, 23294) 947479 (6, 46523) 633590 (6, 85670) 308085 (6, 21314) 528201 (6, 60638) 509845 (6, 64148) 666817 (6, 4130) 195836 (6, 80499) 
     dis: 	132.517 135.263 136.001 137.157 137.396 137.761 137.993 139.068 139.336 139.866 
query 3 nn's (6, 1285, 84611): 462979 (6, 80856) 421752 (6, 22012) 505074 (6, 20032) 870912 (6, 18890) 26879 (6, 24793) 205071 (6, 64467) 99295 (6, 70555) 873503 (6, 1635) 62225 (6, 55347) 469561 (6, 55824) 
     dis: 	141.830 145.172 147.460 153.062 159.987 164.129 167.020 167.047 168.615 170.649 
query 4 nn's (6, 13289, 96651): 277825 (6, 93643) 801724 (6, 14278) 590966 (6, 28184) 849368 (6, 63692) 214698 (6, 90999) 950528 (6, 88813) 529024 (6, 42383) 956829 (6, 90436) 174909 (6, 61055) 227176 (6, 54330) 
     dis: 	259.561 260.114 261.003 262.224 262.956 263.786 263.839 263.851 263.979 264.174 
[ 79.861s ] *** Query time: 21.117
qps: 473.552
 *** acorn recall 
efs:30
acorn get 65185 postive res from 100000 results, recall@10:0.652
recall dist(10% per bucket): 0.126 0.039 0.036 0.041 0.046 0.049 0.057 0.070 0.095 0.139 0.301 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[79.862s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 10922009
ndis: 0
nreorder: 0
average distance computations per query: 1092.201
[ 79.862s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query_arbi YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64 30 1024"
	User time (seconds): 74.39
	System time (seconds): 5.96
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:20.36
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5252668
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1850391
	Voluntary context switches: 1
	Involuntary context switches: 164
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:47
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64
ef_search: 30 
dim: 1024
metadata or vector loaded from json, size: 2000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.210s ] Loaded metadata, 2000000 attr's found
[ 0.210s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.234s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 40000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
[ 0.238s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json
[ 0.249s ] Loaded ground truth, gt_size: 10
[ 0.249s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025537
Average degree per layer:170922.833
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.633s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 30
selectivity: 0.100
[ 67.008s ] Query results (vector ids, then distances):
query 0 nn's (10, 29652, 63053): 980214 (10, 37831) 737273 (10, 34014) 952701 (10, 54036) 16765 (10, 60627) 991479 (10, 33876) 863882 (10, 37113) 76521 (10, 40715) 283397 (10, 36692) 38338 (10, 53758) 405113 (10, 38870) 
     dis: 	88.567 91.199 93.375 94.085 96.063 96.189 96.657 96.703 96.869 96.994 
query 1 nn's (10, 21798, 55183): 358433 (10, 38362) 411735 (10, 49642) 762596 (10, 50670) 653907 (10, 48838) 485054 (10, 38934) 753176 (10, 29137) 295338 (10, 24919) 908662 (10, 33959) 821906 (10, 23680) 578863 (10, 26451) 
     dis: 	54.582 55.105 57.311 59.088 59.333 59.368 59.520 60.113 60.181 60.937 
query 2 nn's (10, 52376, 85679): 225875 (10, 59384) 464997 (10, 68941) 698610 (10, 84717) 677717 (10, 80910) 67581 (10, 64447) 907166 (10, 57276) 812421 (10, 77490) 39208 (10, 62797) 189077 (10, 53296) 308623 (10, 67268) 
     dis: 	136.506 139.443 140.740 140.872 142.200 142.668 142.744 143.307 143.481 143.918 
query 3 nn's (10, 54432, 87740): 263195 (10, 76856) 178166 (10, 76813) 136177 (10, 65042) 117658 (10, 66702) 159269 (10, 74077) 373736 (10, 83024) 496154 (10, 68866) 195003 (10, 85359) 242590 (10, 85544) 677532 (10, 72023) 
     dis: 	178.329 180.553 181.359 184.267 184.646 186.855 187.193 187.261 187.428 187.522 
query 4 nn's (10, 16884, 50269): 729225 (10, 37430) 725265 (10, 33624) 565522 (10, 47378) 693282 (10, 41922) 203716 (10, 19962) 561793 (10, 25790) 258251 (10, 45149) 86342 (10, 19300) 88323 (10, 49616) 652567 (10, 18465) 
     dis: 	74.353 78.049 79.761 79.911 93.165 94.433 96.452 99.177 101.451 101.817 
[ 67.008s ] *** Query time: 16.587
qps: 602.891
 *** acorn recall 
efs:30
acorn get 85857 postive res from 100000 results, recall@10:0.859
recall dist(10% per bucket): 0.021 0.006 0.008 0.011 0.019 0.027 0.036 0.065 0.111 0.206 0.490 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[67.009s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 9241845
ndis: 0
nreorder: 0
average distance computations per query: 924.185
[ 67.009s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query_arbi YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64 30 1024"
	User time (seconds): 63.55
	System time (seconds): 3.73
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:07.28
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5252664
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1335278
	Voluntary context switches: 1
	Involuntary context switches: 93
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
