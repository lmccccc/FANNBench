Start time: 05:16
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64
ef_search: 120 
dim: 1024
metadata or vector loaded from json, size: 2000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.212s ] Loaded metadata, 2000000 attr's found
[ 0.212s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.234s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 40000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
[ 0.237s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
[ 0.248s ] Loaded ground truth, gt_size: 10
[ 0.248s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025537
Average degree per layer:170922.833
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.630s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 120
selectivity: 0.500
[ 111.901s ] Query results (vector ids, then distances):
query 0 nn's (6, 10418, 93742): 889953 (6, 90634) 807214 (6, 37616) 333483 (6, 44482) 521249 (6, 53694) 418474 (6, 21773) 662806 (6, 84288) 467816 (6, 85614) 694505 (6, 18385) 809944 (6, 53259) 906365 (6, 44194) 
     dis: 	83.500 85.685 86.921 88.069 88.657 88.756 89.473 90.711 91.455 91.972 
query 1 nn's (6, 871, 84222): 963956 (6, 4389) 506689 (6, 79696) 630027 (6, 22744) 326679 (6, 51496) 172456 (6, 77471) 627139 (6, 79500) 689633 (6, 33738) 867145 (6, 75730) 380703 (6, 12666) 546210 (6, 60614) 
     dis: 	53.192 53.409 53.659 54.387 54.590 54.590 54.671 55.592 55.684 56.373 
query 2 nn's (6, 2953, 86302): 423205 (6, 45666) 531527 (6, 39427) 871743 (6, 23294) 947479 (6, 46523) 633590 (6, 85670) 308085 (6, 21314) 528201 (6, 60638) 509845 (6, 64148) 666817 (6, 4130) 979613 (6, 54991) 
     dis: 	132.517 135.263 136.001 137.157 137.396 137.761 137.993 139.068 139.336 139.364 
query 3 nn's (6, 1285, 84611): 462979 (6, 80856) 421752 (6, 22012) 505074 (6, 20032) 870912 (6, 18890) 26879 (6, 24793) 205071 (6, 64467) 99295 (6, 70555) 873503 (6, 1635) 62225 (6, 55347) 469561 (6, 55824) 
     dis: 	141.830 145.172 147.460 153.062 159.987 164.129 167.020 167.047 168.615 170.649 
query 4 nn's (6, 13289, 96651): 314093 (6, 85930) 719380 (6, 26683) 690285 (6, 73031) 223865 (6, 93355) 461345 (6, 80535) 89809 (6, 43872) 829463 (6, 91228) 135316 (6, 42874) 62933 (6, 91169) 33136 (6, 56031) 
     dis: 	52.671 56.225 63.143 65.602 71.556 72.466 74.037 75.276 75.294 75.644 
[ 111.901s ] *** Query time: 53.670
qps: 186.325
 *** acorn recall 
efs:120
acorn get 84766 postive res from 100000 results, recall@10:0.848
recall dist(10% per bucket): 0.026 0.013 0.011 0.017 0.023 0.029 0.040 0.053 0.087 0.158 0.542 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[111.902s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 28079776
ndis: 0
nreorder: 0
average distance computations per query: 2807.978
[ 111.902s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query_arbi YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64 120 1024"
	User time (seconds): 105.17
	System time (seconds): 7.26
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:52.44
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5252664
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2130379
	Voluntary context switches: 1
	Involuntary context switches: 237
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:47
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: YTRGB1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64
ef_search: 120 
dim: 1024
metadata or vector loaded from json, size: 2000000
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 0.213s ] Loaded metadata, 2000000 attr's found
[ 0.213s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.234s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
metadata or vector loaded from json, size: 40000
loaded query attributes from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
[ 0.238s ] Loaded 10000 YTRGB1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json
[ 0.249s ] Loaded ground truth, gt_size: 10
[ 0.249s ] Index Params -- d: 1024, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 4488.358MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24954 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025537
Average degree per layer:170922.833
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.631s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 120
selectivity: 0.100
[ 97.293s ] Query results (vector ids, then distances):
query 0 nn's (10, 29652, 63053): 980214 (10, 37831) 737273 (10, 34014) 952701 (10, 54036) 336603 (10, 51010) 16765 (10, 60627) 991479 (10, 33876) 863882 (10, 37113) 76521 (10, 40715) 283397 (10, 36692) 38338 (10, 53758) 
     dis: 	88.567 91.199 93.375 94.061 94.085 96.063 96.189 96.657 96.703 96.869 
query 1 nn's (10, 21798, 55183): 358433 (10, 38362) 411735 (10, 49642) 762596 (10, 50670) 653907 (10, 48838) 485054 (10, 38934) 753176 (10, 29137) 295338 (10, 24919) 908662 (10, 33959) 821906 (10, 23680) 578863 (10, 26451) 
     dis: 	54.582 55.105 57.311 59.088 59.333 59.368 59.520 60.113 60.181 60.937 
query 2 nn's (10, 52376, 85679): 225875 (10, 59384) 464997 (10, 68941) 698610 (10, 84717) 677717 (10, 80910) 67581 (10, 64447) 907166 (10, 57276) 812421 (10, 77490) 39208 (10, 62797) 189077 (10, 53296) 308623 (10, 67268) 
     dis: 	136.506 139.443 140.740 140.872 142.200 142.668 142.744 143.307 143.481 143.918 
query 3 nn's (10, 54432, 87740): 263195 (10, 76856) 178166 (10, 76813) 136177 (10, 65042) 117658 (10, 66702) 159269 (10, 74077) 373736 (10, 83024) 496154 (10, 68866) 195003 (10, 85359) 242590 (10, 85544) 677532 (10, 72023) 
     dis: 	178.329 180.553 181.359 184.267 184.646 186.855 187.193 187.261 187.428 187.522 
query 4 nn's (10, 16884, 50269): 729225 (10, 37430) 725265 (10, 33624) 565522 (10, 47378) 693282 (10, 41922) 203716 (10, 19962) 561793 (10, 25790) 258251 (10, 45149) 86342 (10, 19300) 88323 (10, 49616) 652567 (10, 18465) 
     dis: 	74.353 78.049 79.761 79.911 93.165 94.433 96.452 99.177 101.451 101.817 
[ 97.293s ] *** Query time: 46.034
qps: 217.232
 *** acorn recall 
efs:120
acorn get 93980 postive res from 100000 results, recall@10:0.940
recall dist(10% per bucket): 0.004 0.001 0.001 0.002 0.005 0.008 0.015 0.032 0.068 0.173 0.692 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[97.293s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 24425451
ndis: 0
nreorder: 0
average distance computations per query: 2442.545
[ 97.293s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query_arbi YTRGB1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/youtube1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json /mnt/data/mocheng/dataset/youtube1m/acorn/index/index_acorn_sel_2_100000_random_M40_ga25_Mb64 120 1024"
	User time (seconds): 93.46
	System time (seconds): 4.09
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:37.56
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 5252664
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1335110
	Voluntary context switches: 1
	Involuntary context switches: 128
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
