Start time: 04:16
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128
nprobe: 50
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.717s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.719s ] Loaded 10000 sift10M queries
[ 0.788s ] Loaded ground truth, gt_size: 100
[ 0.788s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.941s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 121.187s ] Query results (vector ids, then distances):
query 0 nn's (16495, 66494): 1167995 (22866) 6141318 (31677) 1160663 (44937) 4738758 (63657) 7293718 (39822) 7632021 (61505) 1020562 (25533) 6984373 (66297) 7077742 (48276) 9397776 (41815) 238649 (52700) 9536881 (62309) 7866119 (35104) 77153 (55251) 1835932 (42846) 1077702 (54735) 6951413 (64572) 5770330 (20661) 8435256 (22283) 9251169 (17058) 5343331 (64452) 4689336 (50131) 2481703 (26660) 3255720 (45053) 419470 (53438) 9860956 (45915) 7873580 (61095) 8428377 (21292) 9409479 (53603) 3663987 (28773) 1665852 (42722) 331007 (42101) 6019325 (39083) 463666 (53257) 3879851 (51251) 4897568 (21711) 6002319 (38494) 6871531 (32699) 4294175 (55347) 4770231 (18286) 242725 (22773) 1203246 (35809) 9237550 (19315) 5324763 (21207) 7459877 (65985) 5001655 (54619) 7011791 (23273) 8771139 (53982) 2365415 (44282) 447965 (21988) 4047656 (37028) 3384323 (18456) 1891236 (55041) 839586 (47809) 9906463 (54872) 3049131 (56789) 4671898 (19963) 1415164 (27761) 7200266 (62910) 5228659 (32650) 4532213 (19173) 9839146 (52506) 7895839 (33099) 476293 (42096) 7263957 (52681) 8052577 (63399) 8838842 (42249) 3094752 (38222) 6253443 (59467) 2793536 (56447) 9501438 (62638) 4271011 (16541) 8898051 (65788) 9119171 (57162) 3409110 (29194) 4436135 (46921) 6425728 (45806) 5972935 (59004) 6392245 (58867) 902148 (61383) 1292574 (65818) 6865307 (40092) 9584266 (30762) 6751758 (20089) 8446671 (55365) 2894606 (22434) 2051236 (18470) 434737 (55269) 5315711 (38979) 9107723 (35394) 5600358 (36832) 106542 (62325) 1432946 (31393) 7063460 (21503) 3366295 (53986) 705774 (37942) 5008601 (36205) 8944989 (22466) 8135232 (36517) 2913895 (40741) 
     dis: 	71811.133 73500.852 74111.375 74348.750 75185.805 75950.320 76496.250 76746.344 76941.883 77219.781 77942.109 78612.492 79491.359 79874.648 80126.703 80609.109 80741.164 81171.055 81721.070 81762.570 81829.359 82158.039 82173.984 82329.555 82504.648 82688.367 82700.078 82795.625 82842.961 83099.133 83125.992 83139.656 83414.625 83464.258 83614.141 83704.266 83869.172 84058.938 84188.453 84387.719 84458.016 84580.023 84617.469 84771.617 85074.766 85104.047 85258.070 85290.016 85535.609 85601.664 85609.820 85760.234 85786.719 85888.539 85907.922 85939.953 85949.383 86060.789 86139.750 86322.977 86338.094 86357.391 86453.094 86657.281 86751.719 86796.750 86995.836 87032.438 87116.188 87169.648 87279.617 87307.289 87415.812 87420.484 87490.477 87526.211 87672.586 87681.273 87688.883 87726.469 87837.758 87881.383 87885.398 87903.664 87905.227 87985.891 88085.086 88149.484 88257.484 88262.578 88382.336 88448.797 88534.016 88591.656 88626.898 88757.398 88817.586 88824.984 88901.070 88945.953 
query 1 nn's (9202, 59201): 285986 (29147) 411491 (28374) 7501440 (19981) 1273419 (33970) 3221056 (31139) 8349375 (52325) 469965 (40746) 9791343 (31369) 9958454 (20815) 3309105 (58581) 1120308 (58129) 8596968 (57015) 9009284 (43025) 7917424 (30836) 371485 (21478) 9537422 (38205) 6378991 (24604) 7331745 (31011) 7120642 (56260) 2993914 (24499) 4922660 (25703) 7692715 (33795) 375999 (11846) 5008572 (16803) 9015118 (35539) 296178 (9794) 5531491 (42049) 5509879 (56316) 4870548 (14957) 8879018 (38985) 7693023 (48225) 1843885 (58567) 9933148 (29627) 6073626 (52753) 3786289 (47328) 1341845 (13158) 5516040 (39608) 8646169 (48602) 3631651 (46071) 9167559 (28640) 9781041 (46813) 8590082 (35871) 1350904 (17079) 1784776 (14038) 6174201 (27446) 8588450 (26655) 9245954 (25046) 7342014 (43207) 2473259 (21347) 9211699 (48066) 4689763 (13954) 8918460 (22635) 8152291 (58419) 1000577 (42240) 741761 (13735) 8984166 (19820) 1461697 (9342) 8440112 (16815) 6533284 (58872) 2807070 (21497) 9913606 (25633) 1259657 (41217) 4649124 (10463) 6986308 (42127) 5386381 (56639) 7315015 (40488) 8675363 (15599) 2652241 (18132) 7672903 (50549) 5226515 (31871) 2234566 (43091) 2353489 (36758) 691253 (12031) 8828687 (57507) 6630533 (47319) 6971668 (13402) 4009753 (42973) 2093850 (58698) 8518091 (32017) 9349060 (12055) 1345854 (17575) 7968009 (34408) 5254261 (23886) 1932354 (54429) 6672132 (28461) 3231603 (11404) 3740235 (47884) 8155958 (44047) 482087 (52392) 5790422 (10136) 3891904 (36054) 7513620 (14628) 735668 (54882) 5307850 (28502) 9388703 (42582) 5887328 (45405) 1012664 (54489) 4539661 (11957) 7856853 (44589) 7807906 (37732) 
     dis: 	43521.125 46702.566 46733.703 47133.055 49650.875 50164.102 50999.262 51140.562 51490.145 51613.125 52189.609 52276.391 52515.828 53272.633 54315.500 54728.070 54834.387 54885.574 55214.109 55412.629 56065.488 56211.219 56373.891 56599.789 56973.043 56979.797 57008.246 57045.617 57255.496 57343.086 57365.887 57367.137 57388.648 57524.609 57538.652 57628.867 57685.148 57715.512 57856.258 57859.262 57868.480 57908.715 58117.168 58426.637 58448.340 58460.043 58468.477 58479.996 58630.234 58743.719 58779.207 58824.281 59206.387 59279.160 59436.469 60354.734 60381.355 60503.371 60907.055 60931.785 61005.836 61148.406 61172.559 61364.480 61481.000 61503.867 61677.398 61720.613 61886.758 62000.664 62127.102 62323.406 62483.906 62656.742 62789.754 62898.316 63112.391 63243.469 63252.008 63313.273 63322.180 63344.684 63404.359 63574.988 63674.195 63689.945 63873.516 64006.527 64020.641 64116.547 64312.547 64354.965 64412.359 64654.906 64942.613 64958.828 64995.387 65122.766 65194.938 65231.176 
query 2 nn's (3185, 53184): 4588082 (5850) 289025 (23641) 1931585 (19001) 199400 (49790) 5982237 (43009) 9262583 (10127) 6296252 (42595) 3493381 (41222) 9416415 (22498) 9466222 (12113) 9410320 (17475) 5499961 (41359) 2511585 (51247) 40266 (43315) 4279056 (31979) 436139 (39429) 2448858 (26319) 4154052 (32764) 9609459 (52017) 5988705 (35014) 2601636 (4981) 7654217 (36735) 8068558 (3605) 893390 (20914) 3942637 (41711) 8432027 (41968) 2098752 (8636) 2346097 (47666) 4331583 (20733) 1229611 (42372) 9541874 (40780) 1198061 (39524) 8086660 (10594) 1784913 (17205) 4519717 (16603) 4347605 (5987) 3724739 (11973) 2413882 (42838) 8001622 (38121) 8590994 (28647) 4021389 (14109) 3795529 (39233) 5631784 (19399) 5039283 (52769) 5035777 (42804) 9330360 (23016) 9403244 (18354) 4495608 (32772) 9790465 (51400) 3061201 (36811) 3967402 (4299) 2953864 (3859) 888761 (42790) 8635193 (4483) 1160482 (18573) 4957555 (20414) 4259715 (27472) 1463083 (23709) 6856614 (13752) 2412946 (20189) 4713533 (11323) 2038327 (32825) 9302830 (30435) 1956474 (39813) 3948507 (46592) 8965515 (47906) 764856 (15554) 247874 (27384) 2721859 (45661) 2180225 (33712) 6511526 (45450) 2800256 (3943) 2027436 (10601) 8064334 (52538) 8703413 (48767) 7011882 (21209) 1758192 (46894) 7409471 (23955) 9724885 (20426) 3457019 (10629) 1700496 (39753) 2571149 (4419) 596128 (12783) 5488746 (22698) 2247452 (7760) 3667879 (49905) 8511243 (52818) 4111853 (11705) 483758 (16444) 27015 (15961) 5834114 (42413) 4735422 (29589) 3923684 (43211) 9235536 (48064) 2016764 (36691) 4920403 (27181) 1688252 (51608) 4824470 (28032) 9919092 (44536) 9975313 (47116) 
     dis: 	47684.672 48216.973 48258.941 49445.160 50066.566 50644.941 51004.824 51043.465 51802.625 51875.957 52262.297 52367.953 52454.711 52742.297 52769.785 52794.215 52958.145 52996.742 52999.742 53070.574 53080.223 53303.926 53334.934 53671.156 53785.938 53841.730 53939.363 54172.023 54234.668 54290.211 54646.922 54648.992 54655.434 54680.859 55072.648 55172.934 55366.215 55379.477 55833.586 55857.223 55862.684 56102.254 56115.004 56130.137 56190.469 56256.652 56514.754 56530.672 56666.258 56671.211 56854.211 57004.633 57317.832 57575.926 57608.090 57638.012 57675.762 57907.914 58178.117 58234.988 58285.367 58644.297 58719.820 58759.629 58805.180 58826.785 58873.023 59008.195 59084.023 59152.188 59168.883 59289.770 59290.539 59292.230 59471.156 59546.812 59665.488 59688.074 59708.883 59721.051 59845.891 59911.586 59947.520 59968.434 60015.285 60146.195 60183.750 60244.844 60264.141 60450.352 60451.746 60530.676 60689.125 60757.441 60846.688 60873.590 60923.367 60946.672 60952.449 61028.773 
query 3 nn's (49315, 99314): 980813 (57404) 1527942 (96648) 4147780 (96552) 6151275 (54227) 8410503 (57593) 2965607 (50671) 8174765 (80882) 7301932 (58021) 3643741 (49824) 5124856 (83202) 1218934 (95625) 9132978 (88985) 6917633 (65929) 3421136 (79354) 1417424 (52791) 3143192 (84650) 6411621 (75479) 2892348 (96310) 3041965 (53918) 727241 (54631) 5224964 (92235) 8649378 (64804) 1911911 (93967) 1344917 (94289) 2218358 (96205) 1739894 (59501) 1553832 (56561) 8501071 (59579) 4246457 (73056) 4486659 (62681) 1514080 (69970) 9577990 (76369) 1590183 (88142) 7301436 (87758) 8381210 (50663) 3633444 (58089) 9925791 (97055) 8051314 (74322) 192312 (56033) 5381241 (67484) 879082 (58444) 9354839 (82742) 9313337 (65861) 179529 (69049) 2112048 (90994) 9603354 (76938) 9978957 (58477) 7404448 (97484) 9625994 (68515) 5792548 (50167) 9335193 (61835) 1028926 (67570) 7463079 (77126) 4983026 (77570) 5777538 (67724) 3421950 (66323) 7119531 (90378) 7614050 (89191) 422848 (66608) 2236726 (90758) 3009997 (97202) 686764 (84900) 1061321 (74643) 936598 (90457) 7865854 (55686) 6045699 (86837) 8688385 (51100) 578322 (76455) 7950822 (60752) 6697954 (97706) 5106668 (83807) 8012973 (49730) 7583501 (51620) 2843331 (94548) 3252978 (77827) 8643637 (91536) 3112499 (60951) 7747974 (55824) 3704240 (51893) 597580 (97456) 7216322 (83941) 4995291 (67298) 5181700 (61434) 3379947 (69911) 7556732 (84479) 449169 (84914) 9947826 (87273) 3540851 (56783) 3195943 (64046) 7829631 (88278) 3080406 (50210) 1229577 (98674) 6676311 (50438) 6306155 (92517) 9332155 (77339) 240857 (83846) 2842840 (85067) 9102009 (51785) 1874032 (91903) 7745448 (77965) 
     dis: 	4284.122 4327.126 4456.461 4596.839 4853.428 5025.904 5169.761 5222.189 5265.583 5481.427 5481.641 5578.374 5584.967 5599.367 5660.666 5684.173 5902.099 6067.166 6086.703 6195.484 6362.484 6455.776 6486.042 6670.587 6710.076 6830.077 6883.839 6959.436 6979.414 7016.517 7147.744 7293.963 7445.345 7452.494 7472.198 7564.517 7572.805 7644.766 7652.724 7660.587 7661.223 7669.771 7675.359 7678.588 7720.046 7740.505 7753.538 7815.895 7834.597 8027.159 8091.991 8239.123 8295.193 8295.535 8308.543 8366.799 8367.211 8417.522 8457.550 8461.038 8472.251 8507.688 8583.214 8598.450 8618.451 8682.901 8734.205 8834.267 8842.596 8861.812 8862.541 8923.057 8926.021 8934.488 8986.323 9010.250 9106.928 9148.424 9252.318 9314.415 9334.548 9427.752 9431.464 9468.079 9533.033 9578.398 9640.171 9671.052 9750.365 9760.482 9761.980 9763.779 9825.297 9865.930 9912.546 9958.855 9968.527 10035.211 10052.161 10057.097 
query 4 nn's (35866, 85865): 3477074 (81770) 6578584 (38818) 3389697 (48484) 2524726 (73742) 1149636 (70537) 7358946 (78288) 1141817 (80050) 8630333 (78134) 3637016 (75733) 2989150 (73723) 4830381 (40295) 6357047 (37869) 4775817 (52301) 3842053 (47229) 4719865 (48976) 6637386 (69548) 3329904 (47742) 5257851 (42550) 5707536 (47200) 1829341 (62245) 9383376 (65777) 64045 (81996) 6699578 (59103) 1020874 (60599) 4750135 (57127) 303093 (72258) 417315 (38580) 2045614 (57740) 9632952 (47320) 6258948 (83408) 8693682 (69472) 8296728 (49670) 2721988 (37884) 9821817 (36297) 2454280 (80510) 379765 (80700) 3099917 (49532) 8972367 (43409) 6658100 (78266) 5012556 (55013) 2288117 (77366) 1784595 (44244) 6116720 (45903) 5126636 (78266) 3475746 (46970) 2779329 (58761) 330819 (62462) 3803911 (59233) 2528505 (42180) 9831067 (43682) 1272627 (49473) 3671814 (57552) 6784852 (64491) 2945464 (44763) 1257130 (69650) 1953827 (48134) 8129218 (75084) 6511001 (69553) 6321468 (83457) 4436465 (68543) 4800113 (85440) 3308297 (62108) 308167 (67935) 6135063 (53210) 1591991 (85402) 5277554 (52598) 4355165 (36701) 2827238 (73816) 2534624 (54996) 2160380 (45685) 2178583 (39724) 2085966 (47802) 5928818 (62774) 4027439 (61219) 5807041 (72525) 2334258 (71939) 2126413 (60382) 3157713 (75611) 6652605 (68105) 3003097 (59886) 3554205 (46620) 1430207 (78644) 9074384 (42770) 3958825 (81453) 3069927 (52403) 4704136 (85176) 2780976 (48438) 175284 (37544) 7940118 (83327) 3530997 (65454) 1253413 (45668) 2807499 (85230) 6132133 (35938) 8325663 (40558) 546480 (66899) 3658255 (62121) 3625321 (59556) 7561797 (47754) 3147235 (78099) 2281072 (51768) 
     dis: 	80359.188 81669.555 84516.359 85204.180 86403.453 86956.969 87092.539 87796.148 87948.305 90542.469 90550.727 90920.555 91043.969 91069.352 91775.898 91894.773 92002.102 92153.133 92667.188 93103.156 93239.227 93319.086 93747.180 93761.367 94080.555 94085.805 94757.172 94859.375 95115.875 95127.195 95291.820 95353.547 95979.406 96229.820 96369.953 96423.711 96427.570 96462.617 96761.227 97060.734 97088.094 97701.016 97731.766 97813.484 97840.844 97914.609 98073.367 98619.781 98820.750 98831.547 98889.852 98953.305 98984.383 99265.250 99477.344 99524.188 99586.141 99608.672 99661.930 99699.641 99731.391 99792.469 99878.281 100051.578 100342.578 100375.867 100393.648 100425.906 100762.180 100780.898 100842.891 100895.094 101002.977 101205.031 101392.320 101427.742 101513.414 101620.672 101748.195 101769.227 101867.734 101926.578 101951.078 102363.562 102378.016 102488.172 102528.086 102553.094 102652.766 102800.047 102885.422 102892.938 102914.062 102919.219 103029.484 103218.625 103226.188 103240.250 103446.172 103567.477 
[ 121.187s ] *** Query time: 53.743
qps: 186.070
 *** ivfpq recall 
ivfpq get 863891 postive res from 1000000 results, recall@100:0.864
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.006 0.030 0.081 0.146 0.215 0.501 0.020 
finished ivfpq index examples
[ 121.218s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128 50 128"
	User time (seconds): 117.87
	System time (seconds): 2.24
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:01.43
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3041188
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 774742
	Voluntary context switches: 5770
	Involuntary context switches: 1336
	Swaps: 0
	File system inputs: 340360
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:21
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128
nprobe: 50
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.709s ] Loaded metadata, 10000000 attr's found
[ 0.709s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.712s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.714s ] Loaded 10000 sift10M queries
[ 0.783s ] Loaded ground truth, gt_size: 100
[ 0.783s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.548s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 96.455s ] Query results (vector ids, then distances):
query 0 nn's (30338, 40337): 6141318 (31677) 7293718 (39822) 7866119 (35104) 6019325 (39083) 6002319 (38494) 6871531 (32699) 1203246 (35809) 4047656 (37028) 5228659 (32650) 7895839 (33099) 3094752 (38222) 6865307 (40092) 9584266 (30762) 5315711 (38979) 9107723 (35394) 5600358 (36832) 1432946 (31393) 705774 (37942) 5008601 (36205) 8135232 (36517) 5577977 (34177) 2478200 (32527) 8615059 (36713) 3947830 (38978) 1136638 (31056) 9422333 (33977) 746007 (34895) 8892654 (36847) 4988257 (36327) 1136340 (34358) 8438028 (31678) 9548834 (39161) 8841384 (38576) 4254855 (35011) 2640746 (31954) 3496238 (34854) 9596672 (40182) 4862834 (38903) 6134807 (34370) 9099555 (39603) 9868360 (38444) 8989130 (35440) 223353 (38579) 3532484 (31798) 3206773 (35296) 102938 (32717) 1340784 (39893) 7907051 (32852) 7100864 (37198) 3645920 (34139) 1530219 (33642) 9722001 (36218) 1066507 (33527) 4408250 (32306) 5073149 (38840) 4183417 (38130) 147219 (34878) 1907588 (35276) 7490838 (39808) 9577450 (34723) 6609059 (39227) 8671427 (33099) 5717461 (35827) 33203 (34980) 9645387 (39738) 839322 (37140) 4477722 (38076) 4456411 (32239) 7330607 (37534) 9541266 (36406) 3731251 (38744) 7058191 (38413) 6274817 (37842) 6943042 (33685) 6420776 (38416) 3708659 (39348) 4890114 (31083) 1538515 (35143) 5027969 (30348) 4358804 (32066) 2372487 (34770) 4714388 (32345) 6636512 (37051) 6232931 (38323) 8969276 (32196) 9647022 (36961) 266478 (35820) 5373920 (36612) 7767175 (36163) 9552336 (37976) 2550973 (31072) 1633082 (40222) 1515026 (36358) 4028509 (31048) 6195843 (32202) 3108557 (40112) 6844029 (37167) 163839 (37924) 2733343 (37132) 2144339 (33586) 
     dis: 	73500.852 75185.805 79491.359 83414.625 83869.172 84058.938 84580.023 85609.820 86322.977 86453.094 87032.438 87881.383 87885.398 88257.484 88262.578 88382.336 88534.016 88757.398 88817.586 88901.070 89243.367 89280.336 89539.578 90049.484 90153.484 90948.508 91934.234 92182.250 92328.148 92733.094 92916.508 93003.797 93161.242 93386.250 93438.375 93457.914 93636.750 93748.062 93905.766 94034.336 94109.234 94141.789 94161.516 94199.867 94366.141 94405.055 94453.266 95066.891 95142.953 95328.852 95425.492 95603.078 95945.680 96324.984 96342.453 96351.266 96447.891 96680.719 97036.750 97198.297 97199.219 97314.594 97361.578 97404.484 97406.953 97416.164 97784.430 97803.391 97865.539 97900.406 97913.773 97914.789 98020.938 98027.961 98309.773 98320.164 98326.734 98351.562 98505.273 98514.656 98547.766 98640.086 98730.969 98739.148 98778.211 98870.023 98924.758 99014.039 99045.188 99058.188 99166.414 99193.289 99412.953 99520.938 99600.531 99628.375 99657.719 99903.797 99929.367 99957.977 
query 1 nn's (77037, 87036): 5552416 (78513) 1909131 (86406) 5271910 (85162) 1745130 (81239) 1503119 (86342) 4456023 (81807) 7409966 (77482) 8223991 (85939) 1410399 (79450) 3200275 (77568) 1015812 (81428) 8857836 (86643) 9460541 (85631) 2077396 (86724) 3733744 (80018) 109736 (83008) 8811964 (78982) 8880895 (85935) 8899541 (77302) 5796685 (85349) 7066298 (82075) 9329945 (82932) 3419918 (85008) 6363708 (86935) 4082654 (81611) 5838578 (80325) 3738992 (82987) 7582671 (84196) 5113286 (82655) 3483770 (77125) 2901807 (85802) 9900713 (80753) 4365144 (85163) 8757781 (78436) 2773940 (83061) 6861763 (79255) 1358210 (82366) 5682634 (83480) 4317853 (78238) 9967397 (78546) 4321977 (86855) 1116609 (86888) 8549337 (81124) 9594077 (86656) 5847833 (86661) 2442767 (79429) 6605974 (84206) 4500577 (79020) 801963 (83162) 3595041 (81789) 2280013 (82912) 509915 (81217) 8588534 (77075) 1329486 (82222) 4565789 (86269) 3059195 (82186) 4558935 (86467) 5481254 (81714) 6639650 (81288) 1886034 (78747) 9220661 (83515) 8717769 (79874) 4546662 (85828) 5988769 (77978) 4058523 (78300) 4007564 (84162) 3435845 (77715) 4811463 (85249) 9015685 (78130) 5424055 (81172) 3209840 (77363) 1208441 (84977) 5117797 (86623) 296036 (85169) 9429619 (85840) 7374448 (83457) 5425346 (81306) 8189889 (86632) 8838862 (78806) 9294765 (80557) 767180 (81326) 8032969 (80529) 6679899 (77613) 7452672 (82219) 2380220 (83780) 3170445 (78292) 4010699 (83940) 2765204 (81025) 5234937 (86897) 3975668 (85506) 2742397 (82912) 5248280 (85367) 5250239 (85491) 9746886 (82707) 1444668 (86471) 3365634 (84135) 6423268 (81346) 1053993 (82403) 8476700 (83426) 2244611 (77270) 
     dis: 	43100.453 51780.211 52658.727 54724.656 58268.090 59082.324 60185.367 61373.090 63334.691 63545.773 64018.613 64648.750 64888.977 65356.297 65405.785 65654.898 66050.352 67408.750 67919.445 68110.531 69143.375 70520.227 70721.625 70727.273 71020.727 71329.109 71452.711 71662.414 72222.039 72451.688 72654.219 72773.375 72875.125 72921.297 72966.102 73483.211 73869.562 74250.023 74608.180 74678.117 74740.211 74751.758 74871.078 74948.227 74966.000 75668.836 75829.984 75881.211 75900.125 75914.617 75929.273 76615.023 76795.867 76801.734 76962.383 77016.203 77058.266 77271.422 77474.773 77651.422 78416.070 78635.156 78650.148 79014.766 79474.508 79516.711 80047.875 80130.133 80246.969 80474.008 80576.758 80643.719 81128.766 81152.469 81239.383 81287.266 81312.336 81685.234 81808.484 81814.906 81819.578 82286.961 82313.281 82319.297 82577.242 82664.750 83167.102 83318.609 83350.383 83434.703 83622.922 83720.062 83779.203 83953.562 84260.883 84393.961 84412.969 84527.727 84547.781 84620.180 
query 2 nn's (55705, 65704): 237844 (57153) 8132849 (63316) 2795236 (62148) 9068473 (62147) 8455929 (59448) 8863268 (55928) 4665202 (65519) 8565013 (65663) 1329974 (65153) 4555038 (63166) 8563094 (58325) 1080573 (56490) 8198272 (61501) 6114289 (59111) 7685482 (62295) 5596868 (58496) 7168507 (61488) 8333106 (61471) 2723946 (57827) 9384590 (59693) 5715023 (62436) 4542872 (61400) 8075681 (59224) 8051890 (56266) 1366265 (58751) 945107 (59251) 4647083 (61889) 1795636 (58821) 3224964 (61887) 4898170 (58003) 3108541 (56307) 5228926 (56641) 5520814 (57891) 29358 (65481) 4497755 (65054) 1613547 (58741) 2523582 (58820) 2350493 (63546) 137116 (60929) 330461 (65445) 6247603 (63801) 8084717 (62575) 7454296 (64256) 4703041 (58856) 2883341 (56298) 3860058 (61774) 2540958 (64117) 7651848 (56532) 2461335 (62859) 4743122 (61891) 868456 (62065) 6208823 (61767) 9431634 (57575) 283793 (56625) 9705261 (60516) 5315700 (61751) 2764590 (56554) 9982250 (57564) 8383671 (61008) 245248 (61481) 6553074 (59575) 7221663 (60629) 1015153 (56733) 5985758 (62278) 7464135 (57113) 2721821 (58910) 5270485 (63229) 2382554 (61058) 9212023 (59032) 3612389 (59908) 2220152 (61420) 1143584 (56157) 5787667 (61097) 2007487 (61256) 3714042 (64506) 2352405 (59041) 8597513 (60174) 4299983 (57114) 7028317 (60120) 6222847 (56154) 5074720 (59964) 7975982 (61676) 8394381 (64969) 7671868 (56373) 76377 (63606) 8975057 (60034) 2244705 (58840) 6081638 (56501) 6406251 (59215) 6226545 (59478) 7064875 (60465) 4987842 (57904) 6152369 (64329) 8122567 (57529) 6357699 (63160) 3827773 (62270) 8625024 (62801) 5777679 (60247) 7753511 (58757) 1066001 (63825) 
     dis: 	49548.199 50812.102 51264.723 52297.547 53160.984 53200.441 53551.211 54366.234 55037.547 55131.336 55985.078 56108.410 56315.418 56887.383 56936.867 57440.262 57457.641 57879.695 58295.070 58704.016 58840.953 59112.977 59267.797 59347.168 59401.836 59473.988 59791.035 59905.707 60371.652 60594.816 60742.715 60762.941 61578.500 61684.824 62007.723 62050.496 62081.379 62180.273 62498.605 62762.590 62796.402 62804.035 62940.531 63190.219 63359.312 63448.477 63519.562 63549.082 63754.176 63804.355 63939.082 63975.785 64149.547 64269.680 64311.586 64884.793 65230.160 65459.625 65472.145 65590.922 65795.031 65834.188 65865.836 65872.234 66022.977 66172.883 66231.945 66392.859 66575.953 66901.273 66985.469 67000.820 67147.133 67158.172 67198.453 67301.969 67362.297 67586.945 67608.852 67621.531 67627.453 67681.320 67698.391 67776.125 67930.008 68067.602 68135.680 68237.352 68360.711 68398.727 68417.492 68423.391 68435.938 68474.578 68522.016 68603.242 68619.789 68669.023 68743.594 68756.375 
query 3 nn's (68256, 78255): 6411621 (75479) 4246457 (73056) 1514080 (69970) 9577990 (76369) 8051314 (74322) 179529 (69049) 9603354 (76938) 9625994 (68515) 7463079 (77126) 4983026 (77570) 1061321 (74643) 578322 (76455) 3252978 (77827) 3379947 (69911) 9332155 (77339) 7745448 (77965) 4824483 (76626) 4537205 (69605) 4856979 (75280) 9706597 (74482) 4899384 (72017) 4258600 (71620) 2311118 (74542) 5566648 (76538) 6934608 (78112) 2941694 (75342) 5758654 (75285) 9833335 (77885) 5110678 (76661) 3877232 (75132) 115823 (73565) 3523917 (69249) 2256506 (68295) 4491781 (76846) 6943685 (74006) 8959954 (71809) 6091433 (73224) 5147194 (72622) 3965061 (75682) 1787200 (69230) 8157747 (69658) 1096237 (78243) 1961581 (78022) 5498749 (76453) 6252048 (74147) 116302 (75981) 9604675 (71943) 4104803 (73729) 4338667 (76290) 4933042 (77577) 434846 (75860) 6662913 (70602) 7887517 (75786) 7018328 (77497) 2960857 (72083) 957097 (68545) 2050399 (70248) 8198543 (69740) 8532848 (73219) 9081529 (71677) 5330122 (76348) 3610014 (69045) 650123 (74647) 6306650 (70227) 4664026 (76358) 5429548 (77215) 3547401 (70131) 6089729 (74507) 8663753 (69694) 3004616 (77242) 6901252 (69639) 617732 (74005) 8267830 (72849) 7865409 (71914) 3284716 (71856) 6141330 (71761) 675474 (72788) 2139674 (71194) 2789396 (77393) 5520378 (71660) 848098 (76205) 424664 (69813) 1850642 (68351) 9512018 (69878) 5623544 (73074) 3925959 (76081) 8538918 (76447) 3053302 (73591) 9083030 (74195) 6156871 (73592) 6342790 (75860) 5577884 (76925) 899264 (69740) 7276573 (72528) 4825798 (71816) 7966182 (78001) 3013029 (68711) 2411446 (71039) 2827173 (74629) 2567122 (76314) 
     dis: 	5902.099 6979.414 7147.744 7293.963 7644.766 7678.588 7740.505 7834.597 8295.193 8295.535 8583.214 8834.267 8986.323 9468.079 9912.546 10057.097 10189.954 10275.820 10523.812 10571.801 10671.150 10725.127 10767.311 10858.838 10925.508 10976.805 11019.648 11035.778 11093.441 11166.746 11236.592 11250.336 11325.521 11390.666 11483.820 11572.733 11616.510 11779.773 11833.770 12153.367 12194.686 12220.906 12239.745 12375.732 12435.280 12449.914 12523.508 12545.867 12565.034 12644.866 12773.463 12912.408 12969.443 13068.729 13294.934 13297.147 13393.824 13451.581 13490.021 13521.894 13673.107 13755.936 13764.632 13797.488 13948.451 14027.814 14124.117 14126.686 14186.250 14304.643 14501.382 14511.928 14599.467 14606.385 14643.466 14689.307 14891.082 14910.460 14916.356 14933.408 15141.490 15163.597 15195.853 15226.975 15239.857 15380.092 15536.158 15648.042 15654.681 15741.795 15744.565 15837.763 15885.715 15996.841 16035.794 16106.490 16108.341 16150.433 16168.363 16196.684 
query 4 nn's (32860, 42859): 6578584 (38818) 4830381 (40295) 6357047 (37869) 8478796 (34009) 5257851 (42550) 5499675 (34199) 417315 (38580) 2721988 (37884) 9821817 (36297) 330880 (34126) 2528505 (42180) 4355165 (36701) 7210902 (34563) 2178583 (39724) 2625230 (34952) 933705 (35471) 9074384 (42770) 8843847 (34786) 175284 (37544) 6132133 (35938) 8325663 (40558) 34728 (33521) 6152391 (40418) 9825567 (40718) 9394278 (40775) 4122303 (37458) 3490833 (42009) 5862862 (37162) 8065643 (36769) 4230287 (36808) 4337818 (33817) 9999853 (42029) 1528313 (42186) 5120358 (33605) 4650677 (34446) 280740 (38932) 6071356 (34668) 1397093 (37399) 7808352 (39961) 3410167 (32971) 98254 (39974) 7990209 (38607) 1335451 (34972) 7425844 (37099) 7894101 (33440) 4967060 (39028) 2180042 (39748) 9531307 (34185) 9790527 (41350) 6525822 (37594) 6372520 (34410) 6156042 (34126) 2056959 (38303) 7407009 (40502) 8213375 (36320) 7271858 (37165) 2830882 (36519) 9714306 (39091) 6144797 (39025) 8822602 (40609) 950976 (34292) 3548353 (40181) 3422349 (35314) 8431726 (39699) 2352213 (40069) 807422 (38021) 8054510 (35211) 3794831 (33894) 6873460 (35359) 1061860 (41902) 6782214 (33165) 7655737 (42265) 7223407 (40466) 4459462 (36716) 9716738 (41210) 2103327 (40889) 7296371 (38939) 8010433 (34732) 7754683 (38433) 162221 (41158) 3246353 (37882) 7903043 (41211) 8070317 (40893) 1560188 (42476) 2964027 (33880) 1264959 (36521) 5157552 (38554) 4408742 (37171) 2210403 (40609) 1164201 (37264) 9267963 (37810) 4774816 (37364) 6004145 (39752) 6010697 (34323) 6914911 (35344) 6938534 (40112) 5427744 (32932) 7102014 (41393) 1039186 (37549) 57612 (42612) 
     dis: 	81669.555 90550.727 90920.555 91773.469 92153.133 94565.305 94757.172 95979.406 96229.820 97856.062 98820.750 100393.648 100444.289 100842.891 101610.992 101860.641 101951.078 102156.984 102553.094 102914.062 102919.219 103095.945 103865.922 104094.398 104731.156 105159.328 105234.164 105508.234 105522.000 105666.258 106120.047 106392.734 106579.328 106958.578 107262.258 107752.234 107756.219 108130.312 108157.461 108321.141 108507.227 108776.570 108865.234 109027.234 109404.664 109471.648 109500.109 109568.625 109694.250 109705.188 109840.164 109864.969 110003.297 110122.672 110136.734 110263.750 110388.297 110582.328 110724.242 110823.266 111175.672 111441.594 111550.219 111625.680 111783.695 111957.141 112115.539 112432.453 112493.609 112646.055 113601.125 113734.773 113790.750 114008.438 114037.883 114054.844 114123.312 114184.766 114263.172 114665.781 114742.102 114766.609 114833.016 114906.172 114909.500 114981.766 115226.734 115287.305 115292.836 115455.391 115513.766 115669.344 115686.578 115873.336 115878.594 115951.594 115992.945 116062.586 116070.562 116118.781 
[ 96.455s ] *** Query time: 30.277
qps: 330.287
 *** ivfpq recall 
ivfpq get 796063 postive res from 1000000 results, recall@100:0.796
recall dist(10% per bucket): 0.000 0.000 0.000 0.007 0.034 0.082 0.156 0.177 0.188 0.331 0.024 
finished ivfpq index examples
[ 96.484s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128 50 128"
	User time (seconds): 94.59
	System time (seconds): 2.12
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:36.80
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3041188
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 774226
	Voluntary context switches: 1
	Involuntary context switches: 134
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:25
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128
nprobe: 50
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.701s ] Loaded metadata, 10000000 attr's found
[ 0.701s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.704s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.706s ] Loaded 10000 sift10M queries
[ 0.775s ] Loaded ground truth, gt_size: 100
[ 0.775s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.540s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 98.753s ] Query results (vector ids, then distances):
query 0 nn's (66811, 67810): 8403027 (67450) 2260181 (67765) 952297 (66888) 8710437 (67666) 9378841 (67272) 4173863 (67608) 4910821 (67040) 2620182 (67682) 3843925 (67076) 8845691 (66999) 3813172 (67723) 4929785 (67064) 2758974 (67297) 1938934 (66865) 2762041 (67060) 5492067 (67489) 7102788 (67612) 409266 (67388) 6263573 (67526) 8423848 (67281) 2661201 (67505) 476247 (67555) 9927783 (66921) 4018856 (66829) 9221841 (67314) 5421355 (67569) 1311600 (67177) 9099514 (66886) 8905430 (67146) 1466972 (67100) 7177862 (66881) 7658530 (66926) 767289 (66900) 8491615 (67708) 3711488 (67440) 5333122 (67477) 6752283 (67516) 8473066 (66998) 850290 (67127) 3087653 (67569) 8744813 (67762) 4742405 (67043) 3700980 (67592) 4319167 (67357) 2817178 (66993) 4982206 (67602) 1741740 (67041) 5994314 (67403) 706303 (67672) 4501381 (67793) 4539548 (67183) 3311034 (66834) 3625275 (67611) 3719964 (67633) 280458 (67515) 1886682 (67114) 6520747 (67447) 6909178 (67169) 250312 (66899) 3908902 (67467) 9039408 (67195) 3457826 (66961) 9306062 (67438) 6939401 (67409) 447519 (67586) 7041507 (66826) 4389160 (66970) 5048443 (67777) 1203963 (67278) 18535 (66927) 6855463 (66873) 700127 (66856) 9852432 (66979) 4004131 (66956) 6376795 (66933) 5226934 (67532) 8003012 (67225) 5632163 (66820) 9694573 (66927) 8975896 (66958) 2565589 (67201) 6023320 (67050) 5685824 (67304) 7693531 (67395) 9640319 (66920) 4671892 (66983) 1418631 (67184) 7606068 (67250) 6169546 (67376) 7887315 (67534) 5729 (67227) 4088692 (67757) 6357246 (67287) 6238151 (67428) 9371069 (67019) 9364981 (66872) 6545030 (67116) 2562404 (67775) 7149884 (67572) 2783148 (66950) 
     dis: 	87306.641 90429.758 91243.570 91551.016 91709.312 93481.227 93588.086 95941.523 98294.875 99611.234 100665.969 102278.859 102339.836 103380.391 103438.945 103682.336 105119.133 106200.750 106289.391 106850.883 108933.922 109656.422 109940.672 110062.648 110552.281 111679.375 112029.375 112088.969 112889.234 113195.578 113746.281 113847.969 114035.156 114046.852 115886.430 115902.844 116089.984 116272.305 116719.570 117005.664 117302.867 117579.000 117940.781 118931.664 119606.836 119802.578 120073.609 120116.586 120326.375 120335.266 120672.875 120905.586 120923.922 121317.375 121327.594 121598.516 121611.109 122269.906 122720.195 123397.797 123462.438 123581.531 124254.656 124755.805 125034.000 125041.828 125120.805 125179.047 125823.672 126078.141 126515.406 126717.312 127344.883 127527.133 127655.812 128169.391 128646.500 128676.688 128839.578 129235.688 129304.656 129517.453 130159.672 130441.477 130591.875 130626.484 130706.805 130849.641 131197.125 131223.531 131390.625 132943.531 133074.875 133913.906 134235.406 135085.297 135089.078 135317.141 135665.703 136199.578 
query 1 nn's (80229, 81228): 5838578 (80325) 9900713 (80753) 8549337 (81124) 509915 (81217) 5424055 (81172) 9294765 (80557) 8032969 (80529) 2765204 (81025) 5666656 (80815) 6225217 (80943) 6168230 (80264) 5426587 (80360) 7853731 (80509) 7581274 (81100) 3620796 (80258) 2674497 (80311) 6768824 (80544) 6067204 (80454) 7026865 (81171) 8180678 (81075) 8029168 (80656) 7582695 (80751) 3861622 (80950) 6983565 (80270) 6408 (80621) 7931185 (80636) 5667339 (80392) 3111838 (80707) 6451481 (81107) 8150421 (80634) 7364489 (80263) 553463 (80259) 2246180 (80570) 4278462 (80257) 2499255 (80367) 6504915 (80333) 9211101 (80695) 3476862 (80771) 1714383 (80586) 9654343 (80841) 9442946 (80695) 44901 (81166) 8470707 (81161) 2828683 (80755) 4947700 (80294) 8911613 (80284) 2509938 (80645) 189701 (80601) 6602250 (80967) 8382087 (80438) 4176992 (80959) 3860320 (80802) 855717 (80316) 8442852 (81041) 4479412 (81073) 163817 (80427) 6328935 (80742) 3711993 (81021) 5893925 (80342) 1377258 (81017) 8160407 (80307) 1258305 (81086) 3076896 (80572) 2830600 (80781) 1937820 (80433) 8592796 (81117) 6907313 (80401) 5814915 (80285) 1977575 (80775) 9708248 (81169) 4132515 (80664) 4611358 (80640) 8665171 (80457) 6035761 (80410) 6174301 (81178) 6098453 (80771) 3693500 (80833) 7237585 (81187) 6642302 (80691) 5757904 (80889) 7321457 (80397) 3013284 (80866) 8735609 (80765) 2386431 (81034) 5524919 (80505) 5526411 (80843) 190031 (80572) 3085838 (80315) 6916361 (80547) 9158405 (80888) 2272206 (80560) 3308777 (80343) 8816210 (80353) 1112275 (80319) 778996 (81094) 5389454 (80602) 2031348 (80939) 8249383 (80610) 6971856 (80299) 1430358 (80447) 
     dis: 	71329.109 72773.375 74871.078 76615.023 80474.008 81814.906 82286.961 83318.609 85637.508 86808.953 87443.602 88487.602 88839.875 91341.586 92054.188 92606.406 93457.250 93748.648 95094.859 96376.062 97495.766 97955.703 98282.906 98314.859 98450.859 99261.578 99493.070 99792.805 99954.516 100888.383 101186.023 101868.125 101897.617 101969.055 102625.031 102841.188 103001.141 103037.047 103409.812 104059.258 104086.297 104804.188 105115.406 105189.680 105348.844 105358.531 105868.305 105995.703 106134.844 106932.758 107613.297 107689.172 108044.375 108352.000 108556.852 108628.352 108761.141 109272.086 109865.445 110215.016 110484.953 110888.172 111346.406 111545.023 111635.773 111824.820 112161.742 112683.156 112833.250 112859.898 113056.797 113157.523 113524.562 113847.828 114064.438 114529.578 114930.516 114950.234 115191.734 115878.617 116190.125 116303.008 116613.367 117213.250 117749.984 118054.578 118615.109 118802.453 118880.188 119211.469 119605.688 119697.219 119855.367 119965.547 120056.477 120155.781 120554.047 120659.891 120869.750 121466.578 
query 2 nn's (89717, 90716): 5727909 (90490) 515037 (90656) 4112561 (89860) 5709226 (90258) 86206 (89955) 7466107 (89787) 8860131 (89804) 1380491 (90138) 4347309 (90358) 5043393 (90355) 981842 (89952) 7964601 (89960) 3582852 (90144) 5224373 (90157) 1944507 (90001) 5017634 (90012) 7004103 (89868) 5907913 (89721) 8196817 (89980) 3843694 (90380) 3973290 (89737) 7537883 (90124) 4502826 (90525) 9827814 (90252) 6150520 (90003) 991901 (90604) 7879176 (90271) 2323619 (90250) 4511904 (90618) 4129975 (89746) 2868611 (89951) 7446969 (89822) 729684 (90430) 5908251 (89799) 3636755 (89788) 9803398 (90512) 7715900 (90394) 9362764 (90134) 5782741 (90379) 8894577 (90486) 6947930 (89791) 8861125 (90024) 7058647 (89879) 4148572 (90018) 7728486 (90223) 6046323 (90037) 5567501 (90541) 9376418 (90389) 5680835 (89904) 3303937 (90116) 1965354 (89728) 6951173 (90307) 9571295 (90469) 4958619 (89999) 8637335 (90531) 2029499 (89844) 6327565 (90575) 2480763 (90160) 1065921 (90122) 2292676 (90516) 5958397 (90515) 4712776 (89997) 2428976 (90254) 3125495 (89874) 408310 (90594) 1624938 (90244) 9987830 (90043) 6365848 (90386) 4654462 (89971) 7628202 (90693) 604157 (90634) 5743466 (89821) 6699510 (90457) 7366271 (90548) 5211875 (89752) 6120025 (90333) 5246713 (89806) 9013408 (89969) 6943812 (90269) 8025701 (89729) 7477725 (89973) 1827599 (90653) 3508578 (90663) 6164706 (89967) 5306350 (89892) 8706885 (89869) 3411310 (89939) 9790763 (90317) 5939218 (90144) 3162864 (90425) 5230286 (89866) 2331902 (90139) 3305803 (89874) 371900 (90370) 5636380 (89943) 8481694 (90702) 72977 (90454) 5193298 (90115) 6433191 (89807) 4523271 (90702) 
     dis: 	60107.020 60542.262 61422.031 61483.203 62039.676 62616.762 65610.711 66034.805 66708.586 68369.547 72676.625 72853.820 73942.625 74214.516 74323.688 74524.000 74665.031 75412.406 75598.047 75725.273 75843.961 76609.812 77630.117 77794.844 78144.219 78983.375 79144.289 79834.641 80121.219 80146.258 80456.742 80856.875 80941.883 81017.289 81355.664 81463.375 82082.883 82282.227 82392.883 82459.703 82473.930 82590.156 82672.836 82723.586 82894.812 82951.250 83108.031 83258.562 83740.406 83858.453 84465.281 85141.375 85307.984 85461.188 85568.883 85808.469 85836.406 85882.031 86073.188 86762.453 86932.969 87205.898 87452.992 87628.711 87845.844 88243.781 88423.836 88458.219 88892.852 89125.711 89521.594 89572.438 89642.977 89703.469 89766.562 89800.344 89845.023 89935.367 89989.562 90105.891 90270.367 90449.016 90479.336 90483.773 90628.688 90636.211 90711.953 90805.656 90861.125 90978.648 91012.836 91375.484 91464.328 91715.891 91765.281 91972.719 92050.172 92132.172 92182.734 92589.188 
query 3 nn's (6838, 7837): 840086 (7034) 6281603 (7047) 1180726 (6952) 7890747 (7446) 9231939 (6869) 493857 (7268) 8089617 (7268) 8618960 (7556) 8701088 (6988) 907443 (6923) 4498186 (6839) 3917528 (7833) 9526471 (7592) 7302298 (6887) 9623826 (7197) 232753 (7204) 3094610 (7202) 5548322 (6881) 2009002 (6908) 8362700 (7030) 5466233 (7407) 3647654 (7077) 7210863 (7612) 8404341 (7090) 3258762 (6929) 2090840 (7817) 1486412 (7135) 9245688 (7071) 9140968 (7271) 639753 (7377) 1022275 (7634) 438493 (6876) 7727529 (7430) 7287289 (7361) 606674 (7758) 6081816 (7748) 4909074 (7438) 5354276 (7506) 6046972 (7747) 4299939 (7534) 9161719 (7320) 1554089 (7563) 4926732 (6976) 3692343 (7190) 2000232 (7446) 3779998 (7672) 7514291 (6979) 5538121 (7042) 4450655 (7311) 9778189 (7176) 538489 (7211) 8204406 (7043) 799918 (7655) 5203333 (7269) 452242 (7405) 5172258 (7095) 5488169 (7685) 3615073 (7561) 816336 (7106) 8991739 (6849) 2128995 (7073) 6920826 (7045) 1441085 (7472) 8037472 (6901) 3416045 (7696) 2753223 (7680) 9938976 (7500) 9464792 (7670) 7820689 (6838) 1222837 (7829) 9597935 (7209) 2389755 (7562) 2253039 (7388) 4835206 (6992) 2558587 (7086) 5002736 (7053) 5486652 (7261) 7527407 (7703) 4187347 (7507) 3949103 (7673) 4284323 (7605) 4952836 (7642) 8598492 (7062) 3978452 (7650) 9269979 (7639) 1181329 (7341) 7739196 (7299) 4782467 (7355) 312316 (7641) 374214 (7199) 418466 (7776) 2327647 (7291) 1043026 (7252) 2231159 (6874) 2716133 (7694) 2478369 (7188) 3497137 (7539) 2743695 (6886) 4681538 (6949) 1594161 (7181) 
     dis: 	9068.432 9226.581 11592.768 12349.147 13246.699 13534.274 13836.963 14789.070 15255.722 15923.056 15972.844 16081.310 16292.380 16765.941 18413.824 18428.893 18563.551 18840.000 19439.988 19762.924 20272.957 20598.318 20898.105 21980.914 22882.830 23463.377 23964.256 24158.219 24441.705 24471.453 24568.461 24745.562 24822.615 25016.432 25252.557 25628.879 25672.617 26066.471 26154.783 26188.467 26309.291 26472.859 26633.217 26915.750 27503.555 27582.031 27728.410 27760.695 27768.027 27812.422 27853.783 28037.947 28139.279 28227.955 28278.445 28295.391 28332.213 28376.678 28812.703 28939.164 29094.379 29114.584 29143.395 29422.887 29527.695 29566.752 29596.668 29714.004 29783.703 29852.074 29871.871 30020.934 30139.408 30211.461 30242.318 30317.242 30401.092 30812.596 30863.074 31158.961 31580.285 31581.498 31617.434 31628.146 31805.697 31882.328 31984.074 32013.695 32104.232 32183.188 32208.926 32252.629 32339.496 32612.352 32718.535 33013.938 33075.207 33149.234 33153.477 33226.250 
query 4 nn's (76228, 77227): 6221821 (76784) 1776999 (76473) 3136966 (76552) 608851 (76588) 6556006 (76613) 1271454 (76737) 9294532 (76726) 8562010 (77147) 6506698 (76701) 6561885 (77127) 9908144 (76273) 996143 (76544) 7931620 (77115) 4003644 (77017) 1237322 (76824) 2182713 (76499) 7321437 (76533) 5471390 (76808) 7003764 (76601) 4225267 (76453) 1104536 (76959) 9621610 (76392) 5350180 (76996) 4716095 (76318) 3104556 (76851) 8421997 (77138) 6631838 (76669) 1202792 (76609) 4848526 (76772) 4893260 (77058) 7203146 (76700) 3603190 (76870) 5929608 (76417) 3044764 (76635) 2456428 (76699) 3184003 (77129) 6895571 (77227) 4770446 (76849) 4506929 (76747) 3341326 (76433) 1992637 (77076) 875820 (76299) 4577239 (76908) 6697887 (76774) 8125986 (76649) 2914375 (76359) 6198995 (77177) 628361 (77033) 5723095 (76476) 740572 (76807) 3594766 (76618) 3297486 (77066) 2774988 (77073) 3682231 (77184) 5822737 (76464) 7873365 (77201) 4426498 (77225) 6499290 (76915) 315476 (76477) 7327104 (76795) 7940302 (76788) 3339265 (76367) 4574056 (76247) 2099653 (76861) 9892938 (77072) 7471251 (76329) 3167715 (76314) 2591372 (76706) 2838039 (76525) 6337895 (77172) 8767645 (76521) 7777127 (76317) 9988849 (77188) 6131695 (76390) 4175165 (76431) 2423782 (76387) 5987538 (76997) 1937473 (77059) 9353398 (77088) 654075 (76423) 561315 (76890) 937777 (76525) 5037322 (76951) 1369012 (77049) 6657942 (76747) 649984 (76762) 2525333 (76638) 6913117 (76676) 3222108 (76970) 3277048 (76297) 7324598 (76896) 9446960 (76895) 9495954 (76860) 6085034 (76922) 6433131 (76237) 3070747 (76587) 9377948 (76703) 2095920 (76801) 71322 (76272) 5990335 (77093) 
     dis: 	106119.773 108633.398 110557.609 111464.305 112681.781 113503.672 114619.172 114949.727 117708.391 119336.609 119752.672 120107.070 122454.922 123828.000 124652.031 124903.000 125299.312 125593.984 126240.156 126822.812 127206.375 127615.641 127654.984 128194.523 128291.375 128465.641 128646.453 129902.930 130935.000 131108.938 131626.688 132048.734 132285.031 132292.578 132828.719 132961.031 133309.047 133545.453 135090.938 135195.422 135213.484 136343.141 136377.719 136534.266 136826.500 137308.594 137483.906 137596.656 137846.109 138374.375 138571.062 138827.203 139024.391 139273.766 139419.609 140108.094 140196.344 140324.953 140642.469 141103.031 141340.875 141473.656 141545.609 141583.703 141944.531 142035.359 142040.031 142140.531 142172.312 142340.188 142606.906 142822.734 142993.516 143038.719 143431.250 144283.750 144413.656 144501.156 144943.844 144946.812 145281.688 145819.312 146590.562 146714.688 147016.188 147343.125 147535.547 147751.172 147916.344 147963.859 148268.766 148287.750 148535.859 148880.250 149357.422 149554.219 149674.031 150073.906 150343.906 150557.406 
[ 98.753s ] *** Query time: 28.908
qps: 345.930
 *** ivfpq recall 
ivfpq get 607866 postive res from 1000000 results, recall@100:0.608
recall dist(10% per bucket): 0.000 0.003 0.030 0.114 0.200 0.180 0.153 0.110 0.080 0.117 0.013 
finished ivfpq index examples
[ 98.800s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128 50 128"
	User time (seconds): 93.93
	System time (seconds): 5.20
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:39.17
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3041192
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1505889
	Voluntary context switches: 2
	Involuntary context switches: 179
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:28
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128
nprobe: 50
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.727s ] Loaded metadata, 10000000 attr's found
[ 0.727s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.731s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.733s ] Loaded 10000 sift10M queries
[ 0.803s ] Loaded ground truth, gt_size: 100
[ 0.803s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.853s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 97.196s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1160663 (44937) 1609860 (44874) 6005033 (44913) 4441746 (44893) 2306496 (44877) 8395367 (44860) 6764458 (44853) 4206912 (44936) 3941607 (44878) 1540250 (44867) 3857088 (44896) 4500547 (44862) 9276548 (44880) 8142093 (44844) 1370582 (44857) 7577022 (44918) 2176746 (44891) 2162574 (44878) 7452542 (44920) 7720917 (44885) 5520339 (44843) 1576578 (44870) 2383001 (44874) 8340621 (44846) 1835551 (44937) 6672582 (44858) 8270044 (44858) 4864867 (44934) 8950630 (44934) 565699 (44940) 8780214 (44898) 3382208 (44889) 5547115 (44863) 9501768 (44862) 4637608 (44899) 5950105 (44857) 8141426 (44864) 1879158 (44903) 4981935 (44932) 4707569 (44905) 6993713 (44897) 4985420 (44934) 1618040 (44908) 7661954 (44917) 6294484 (44854) 1777901 (44890) 9048440 (44898) 2693565 (44843) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	74111.375 98690.070 107976.781 108264.734 113892.562 114474.594 118531.742 122454.609 123183.562 126463.859 127904.781 129521.406 132097.406 132665.594 134294.875 134352.750 135424.312 138405.891 141886.094 143432.250 143628.625 144761.156 146226.188 147935.281 152017.922 152868.625 153473.391 154375.828 155517.469 155603.031 157369.359 159120.594 161391.328 161474.609 162040.047 171869.000 172737.078 172908.594 176753.375 178103.438 178963.562 180631.312 181219.766 187880.844 189037.125 196032.781 200554.062 229794.953 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (42821, 42920): 7957648 (42897) 8453351 (42853) 4754171 (42830) 635661 (42825) 1565098 (42885) 4062412 (42832) 5498897 (42903) 7656223 (42884) 2836390 (42856) 7878262 (42866) 9358255 (42832) 4317839 (42837) 9438093 (42916) 8004768 (42868) 7247549 (42843) 8245003 (42875) 2473193 (42880) 6245605 (42913) 4833893 (42841) 997793 (42900) 3355759 (42873) 1654402 (42880) 1715651 (42855) 7140238 (42834) 6011859 (42892) 9160236 (42838) 8829263 (42869) 9330654 (42888) 7746968 (42823) 4377519 (42904) 7124613 (42853) 1597520 (42916) 8026762 (42886) 7119992 (42846) 5940046 (42905) 7475879 (42890) 4056960 (42840) 9434652 (42825) 4852093 (42896) 3377031 (42911) 7508898 (42886) 1138671 (42822) 6121035 (42867) 6747636 (42904) 3899677 (42920) 7391345 (42832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	81398.016 85152.828 85710.414 88213.930 94464.375 95848.938 101654.062 104442.289 106878.703 113163.359 113521.438 114384.547 120055.148 124318.188 125793.992 125860.922 125898.891 126302.617 127058.211 129969.156 133308.500 135567.656 136553.219 137228.219 138881.562 140011.500 140130.062 142418.359 143902.250 145485.438 148158.438 150100.953 154004.203 155849.516 156599.250 157967.156 160817.938 163312.578 175729.656 180875.172 181152.047 181453.094 189922.547 194192.125 195637.406 196059.969 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (13165, 13264): 2858053 (13240) 4306175 (13182) 5121329 (13223) 3494307 (13167) 342160 (13197) 3380755 (13173) 4852920 (13261) 1686475 (13254) 4587441 (13187) 5928403 (13190) 170142 (13196) 7995271 (13198) 297077 (13228) 5807375 (13227) 2422029 (13245) 2399385 (13226) 8231342 (13171) 9993720 (13174) 4985003 (13238) 9317379 (13251) 1646316 (13177) 3582405 (13181) 5086757 (13215) 7327136 (13195) 1764336 (13256) 2917457 (13223) 5131603 (13208) 2999523 (13171) 5810762 (13260) 1327631 (13257) 6930047 (13245) 2379926 (13216) 7238949 (13173) 1220788 (13224) 5106171 (13226) 3772134 (13211) 3929250 (13182) 1358988 (13215) 6477911 (13262) 4472774 (13210) 460860 (13239) 873107 (13206) 3053339 (13238) 4258741 (13232) 207880 (13241) 6000004 (13233) 5681066 (13169) 7926346 (13207) 6571997 (13221) 8579249 (13223) 9924116 (13208) 7947783 (13207) 2052875 (13224) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63257.051 69785.609 70671.016 71208.359 73531.188 75943.695 83253.359 83285.477 84057.227 85335.734 87669.445 87765.344 90957.617 91332.602 92570.641 93615.312 95401.695 95670.789 97143.312 97301.328 98008.141 98258.422 98754.109 101152.070 101190.984 101906.250 105718.703 106286.250 106658.438 107432.539 110575.430 111116.312 112228.352 112887.930 115233.391 115961.125 117923.938 119143.359 119267.453 121368.367 122248.727 122302.500 124666.617 126459.109 128392.031 129225.148 134889.297 135161.812 150709.219 153021.531 167563.547 172471.641 183654.312 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (25839, 25938): 6617844 (25931) 7567068 (25855) 8283506 (25901) 5530477 (25921) 7342247 (25846) 3153441 (25841) 4541290 (25878) 7055827 (25927) 7666009 (25916) 3828929 (25858) 8659845 (25920) 5296853 (25897) 5444185 (25851) 5266080 (25903) 8028650 (25915) 4159403 (25842) 5493352 (25909) 3282057 (25853) 7493345 (25896) 2985299 (25933) 2314723 (25908) 3254490 (25875) 4740908 (25933) 6725 (25840) 7358160 (25938) 1409445 (25871) 3875646 (25854) 7683971 (25848) 8233410 (25841) 1113590 (25904) 828680 (25916) 2503141 (25857) 656623 (25866) 4967338 (25910) 4270171 (25929) 1537659 (25873) 1226282 (25883) 857623 (25937) 2859387 (25879) 2727815 (25868) 8209215 (25872) 3020568 (25844) 5490029 (25892) 813539 (25850) 9353983 (25867) 4947685 (25843) 3630034 (25923) 1373012 (25853) 2794566 (25876) 4647749 (25935) 4749836 (25845) 7146661 (25936) 1932613 (25863) 6219049 (25937) 7466934 (25866) 3019937 (25853) 8839200 (25867) 9008186 (25843) 30150 (25870) 796634 (25850) 7629515 (25839) 5746720 (25878) 4543771 (25888) 1948981 (25850) 5964192 (25851) 9805746 (25863) 688418 (25891) 7497048 (25849) 5355644 (25867) 2716249 (25917) 1961500 (25870) 6926583 (25918) 2655670 (25875) 3106890 (25921) 9515269 (25841) 9613850 (25938) 5778418 (25878) 7729454 (25926) 459764 (25921) 6770584 (25856) 1515927 (25870) 289468 (25857) 2782637 (25882) 261470 (25915) 158463 (25844) 6396281 (25926) 6219096 (25844) 2142374 (25867) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	20140.846 22910.246 23899.230 23905.592 27705.129 30135.160 30199.008 32127.055 32164.057 36313.750 38122.438 39694.273 40162.621 40411.734 41444.648 41836.758 42707.340 44212.566 44391.199 44715.152 44785.945 45107.867 45588.277 46411.945 46505.414 46541.406 46785.543 47693.953 47890.043 49220.512 50305.500 50578.234 51042.309 51463.664 52209.980 52484.707 52487.426 52798.770 53798.930 53836.422 53936.871 54397.766 55164.602 55180.477 55468.336 57721.891 57915.125 57995.789 58085.211 58538.270 58573.211 59069.000 60094.945 60135.895 60913.797 61614.984 61889.031 62872.734 63332.484 63546.984 65154.969 65597.742 65898.328 66417.609 67040.078 67955.625 70520.383 72080.469 72190.516 72249.047 72437.742 72791.391 73789.836 76505.328 76671.664 76835.609 77447.477 78852.508 80328.359 82777.125 85778.281 86623.641 87504.773 91974.125 92370.070 96789.281 103912.312 139775.656 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (45629, 45728): 2160380 (45685) 1253413 (45668) 3124161 (45639) 5720716 (45669) 625529 (45723) 619740 (45674) 2719743 (45724) 3779417 (45727) 2098355 (45685) 2912699 (45657) 8354165 (45727) 3125493 (45654) 325958 (45648) 54831 (45652) 7771577 (45630) 2788136 (45671) 3356010 (45677) 767649 (45700) 1613247 (45724) 8291572 (45709) 298016 (45708) 4406581 (45714) 1061413 (45696) 1678175 (45648) 7545917 (45629) 2570238 (45633) 9881490 (45726) 238901 (45711) 9209147 (45667) 7658211 (45635) 8155860 (45636) 966606 (45718) 5454197 (45688) 4122406 (45631) 6942602 (45705) 2803999 (45711) 8734681 (45688) 4734622 (45723) 5564516 (45636) 1293674 (45714) 9190492 (45715) 8494618 (45725) 8940054 (45680) 726691 (45680) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	100780.898 102885.422 112926.922 113307.797 124023.289 125715.203 128354.555 132163.906 133111.125 136588.922 140306.953 141924.031 144355.141 144902.109 147961.453 149201.734 154876.234 155261.844 156353.906 157245.422 157639.391 157937.297 159930.594 160016.766 161059.625 163992.656 164736.953 164803.719 167142.438 168935.938 169925.062 172721.531 174890.156 176837.750 178251.094 178425.953 178633.141 178686.750 180662.078 180997.609 181272.812 185326.359 190586.922 195266.188 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 97.197s ] *** Query time: 26.734
qps: 374.061
 *** ivfpq recall 
ivfpq get 270835 postive res from 1000000 results, recall@100:0.271
recall dist(10% per bucket): 0.014 0.302 0.375 0.163 0.070 0.038 0.024 0.012 0.003 0.000 0.000 
finished ivfpq index examples
[ 97.225s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_128 50 128"
	User time (seconds): 94.80
	System time (seconds): 2.61
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:37.43
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3040164
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1016009
	Voluntary context switches: 3
	Involuntary context switches: 263
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
