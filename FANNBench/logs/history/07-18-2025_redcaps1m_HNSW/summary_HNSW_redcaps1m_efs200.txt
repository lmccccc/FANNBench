Start time: 21:48
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 200
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.074s ] Loaded metadata, 1000000 attr's found
[ 0.074s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.090s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.091s ] Loaded 10000 redcaps1m queries
[ 0.157s ] Loaded ground truth, gt_size: 100
[ 0.157s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 5.209s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 33.599s ] Query results (vector ids, then distances):
query 0 nn's (1540574211, 1590004802): 727106 (1557359735) 562528 (1586530455) 247269 (1563268918) 864174 (1586141206) 64073 (1552081912) 880422 (1565574478) 297407 (1562582134) 84548 (1557155880) 316095 (1551987403) 302187 (1566023840) 997247 (1547217917) 989732 (1576007752) 966838 (1570564531) 334544 (1563704708) 650558 (1552134375) 363324 (1588150617) 465841 (1541316839) 988753 (1543862249) 132358 (1558810217) 606467 (1568763473) 91712 (1562697586) 628377 (1559504189) 596166 (1579563279) 309200 (1583866074) 389664 (1577080660) 708925 (1576703816) 708700 (1541202222) 818866 (1570902358) 75346 (1564168304) 131965 (1556466636) 825029 (1587509747) 268357 (1575827166) 533175 (1575258274) 493307 (1561727055) 602879 (1548953318) 813377 (1544571766) 909887 (1573250307) 910784 (1555990616) 699054 (1579379170) 927993 (1565326081) 983152 (1550510814) 81228 (1560057467) 823706 (1585149377) 318225 (1582255095) 517796 (1568425301) 492624 (1552841438) 539283 (1562519129) 105541 (1553537809) 174023 (1555779163) 439788 (1565854244) 679931 (1540740143) 952583 (1550911908) 929021 (1555207103) 472918 (1564281975) 422643 (1556978810) 686231 (1566039123) 980277 (1581039128) 517669 (1549396737) 323370 (1580598904) 399187 (1587938124) 331521 (1564901683) 295694 (1561539309) 434594 (1551507970) 553713 (1584927669) 419559 (1588543049) 385435 (1589983348) 627019 (1588778001) 36195 (1542321827) 575822 (1586298011) 549870 (1576336840) 752134 (1583896379) 911872 (1559076268) 556864 (1565655760) 949111 (1587581586) 894678 (1585406115) 343054 (1558917962) 501049 (1585237551) 448032 (1579574671) 393166 (1574050070) 87994 (1584776656) 428229 (1562205224) 46879 (1559067774) 770943 (1585176238) 804923 (1580916714) 582770 (1577556364) 837349 (1587672503) 258712 (1588733584) 301131 (1553274671) 891777 (1558716352) 212755 (1583129224) 275133 (1566629080) 704461 (1567652497) 295644 (1574112377) 834158 (1542767236) 570590 (1588511393) 585624 (1550040776) 662170 (1560280718) 475136 (1564780649) 754292 (1586803647) 751226 (1568222544) 
     dis: 	0.629 0.641 0.676 0.743 0.760 0.769 0.772 0.786 0.787 0.788 0.789 0.790 0.804 0.805 0.812 0.814 0.815 0.822 0.834 0.843 0.850 0.851 0.854 0.854 0.864 0.866 0.872 0.879 0.879 0.884 0.888 0.890 0.895 0.896 0.898 0.898 0.899 0.903 0.903 0.904 0.904 0.905 0.905 0.905 0.908 0.908 0.908 0.909 0.909 0.910 0.911 0.911 0.913 0.913 0.915 0.917 0.918 0.920 0.920 0.920 0.921 0.921 0.921 0.922 0.922 0.923 0.924 0.926 0.927 0.927 0.930 0.931 0.932 0.932 0.933 0.934 0.935 0.935 0.935 0.935 0.936 0.937 0.937 0.937 0.937 0.939 0.939 0.939 0.939 0.939 0.940 0.941 0.942 0.943 0.944 0.944 0.944 0.944 0.945 0.945 
query 1 nn's (1502815998, 1574739098): 741325 (1559616195) 666880 (1555641433) 979250 (1523372340) 622447 (1532959985) 803332 (1530141155) 427146 (1514695882) 428754 (1560720094) 110189 (1507487399) 139424 (1535633696) 284310 (1570817806) 994014 (1549410785) 939001 (1521863047) 964018 (1566639637) 928093 (1551573119) 329834 (1552801370) 795520 (1549367888) 7931 (1531328513) 421889 (1509323403) 979295 (1567526425) 848169 (1567967943) 104425 (1517937828) 459927 (1570948131) 661716 (1569475757) 997966 (1560111653) 630058 (1510985967) 832389 (1509148358) 710350 (1543853777) 866328 (1550960142) 399497 (1531827001) 848037 (1547627912) 195548 (1519575345) 577336 (1551645910) 85059 (1560480821) 671340 (1545504039) 326649 (1542991586) 925374 (1547210027) 272839 (1567350368) 709969 (1549840943) 178695 (1539523827) 743973 (1565255174) 885087 (1525644326) 395948 (1572268410) 408156 (1550161639) 857939 (1506859251) 226358 (1565225638) 964128 (1566424023) 620586 (1542847663) 925657 (1569885810) 721597 (1560048937) 324349 (1565636095) 271263 (1523394425) 544577 (1529068259) 557922 (1542237514) 784003 (1503860978) 795310 (1572108672) 418536 (1508889764) 935736 (1516385240) 837200 (1517967912) 107066 (1564445038) 489550 (1561300577) 80871 (1546322460) 320719 (1526407679) 769260 (1570050053) 770454 (1561685089) 55881 (1516654636) 584466 (1558116296) 169444 (1559524323) 244515 (1565195570) 687772 (1567207126) 816247 (1563724766) 62978 (1548008868) 116279 (1540745988) 785418 (1513559759) 135640 (1562247065) 384623 (1530652501) 77283 (1545499206) 388764 (1538816911) 855763 (1569114081) 288542 (1507728447) 750270 (1568905945) 253736 (1537508888) 811301 (1551198823) 916706 (1560980031) 672841 (1520507128) 820498 (1546321274) 213143 (1530845306) 417828 (1564258459) 785513 (1568160267) 1519 (1561555264) 232066 (1563834787) 82481 (1518972141) 86484 (1550619400) 471226 (1503181567) 865350 (1562057425) 885260 (1562875914) 722158 (1557686757) 344524 (1553054923) 722531 (1562614185) 697547 (1524659876) 485598 (1553564926) 
     dis: 	0.100 0.101 0.101 0.103 0.106 0.106 0.107 0.109 0.110 0.112 0.113 0.113 0.113 0.113 0.113 0.113 0.114 0.114 0.115 0.115 0.115 0.116 0.116 0.117 0.117 0.117 0.117 0.117 0.118 0.118 0.118 0.118 0.118 0.118 0.119 0.119 0.119 0.120 0.120 0.120 0.121 0.122 0.122 0.122 0.122 0.122 0.123 0.123 0.123 0.123 0.123 0.123 0.124 0.125 0.125 0.126 0.126 0.126 0.126 0.127 0.127 0.127 0.127 0.127 0.127 0.127 0.128 0.128 0.128 0.129 0.129 0.129 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.132 0.132 0.132 
query 2 nn's (1565134124, 1606255797): 964377 (1605131892) 306439 (1575579764) 757728 (1605423787) 75885 (1601934153) 374226 (1576918189) 71515 (1570882811) 445298 (1589162214) 771849 (1570744783) 903106 (1586146246) 792564 (1597961764) 328504 (1595799020) 161603 (1602887962) 737868 (1571342287) 530996 (1598262380) 494541 (1567102094) 498270 (1586402085) 435452 (1574701387) 751228 (1585488453) 328089 (1574112193) 929527 (1587699711) 837851 (1605837809) 609504 (1590756439) 41616 (1599772018) 633139 (1583107000) 971858 (1600907724) 507734 (1605297824) 610678 (1584998424) 800558 (1578206579) 625921 (1580310462) 919763 (1580427352) 952981 (1588948381) 24425 (1584502238) 589140 (1597778814) 882709 (1573089021) 25586 (1592565722) 33572 (1567059144) 253786 (1598570829) 988519 (1599418976) 10316 (1600442741) 627502 (1584624938) 879865 (1599868306) 222791 (1569733461) 726914 (1582911767) 684897 (1579890463) 192903 (1602694233) 233822 (1587156920) 976907 (1594577610) 230054 (1603647309) 870630 (1568931614) 403717 (1587585205) 844350 (1601083260) 491378 (1598099263) 341373 (1582339286) 136876 (1579879526) 728355 (1598234783) 509068 (1582362871) 910005 (1589155576) 812326 (1580129904) 88997 (1597461015) 985107 (1565328361) 304775 (1575151723) 184796 (1580838071) 625576 (1604050293) 884477 (1588323027) 645543 (1585948706) 470869 (1582932711) 780551 (1599435257) 74992 (1573424430) 14154 (1594153934) 660131 (1601954615) 550905 (1590498833) 459595 (1582500502) 44865 (1586305134) 312490 (1604872882) 319345 (1568052528) 490170 (1604285031) 435592 (1590078863) 578528 (1604204574) 201205 (1586171256) 965924 (1600027560) 826279 (1597417912) 89667 (1574102696) 557020 (1584521629) 962379 (1591499930) 915391 (1601243129) 752639 (1583106240) 623030 (1597864688) 63845 (1588094783) 258161 (1574306665) 351702 (1601462660) 310380 (1597000036) 620162 (1566431760) 187604 (1594862700) 356369 (1600690480) 652018 (1594040809) 66928 (1580572954) 340495 (1589726708) 785841 (1588265143) 985401 (1586115013) 198935 (1603661610) 
     dis: 	0.226 0.238 0.240 0.256 0.263 0.263 0.264 0.265 0.268 0.271 0.273 0.275 0.275 0.275 0.276 0.276 0.278 0.278 0.280 0.280 0.281 0.281 0.282 0.283 0.283 0.283 0.283 0.284 0.284 0.284 0.285 0.286 0.287 0.288 0.288 0.289 0.290 0.290 0.290 0.290 0.291 0.291 0.292 0.292 0.292 0.293 0.294 0.296 0.296 0.297 0.297 0.297 0.297 0.298 0.298 0.300 0.300 0.301 0.302 0.302 0.303 0.303 0.303 0.303 0.303 0.304 0.304 0.304 0.305 0.305 0.305 0.305 0.305 0.305 0.306 0.306 0.306 0.306 0.307 0.307 0.307 0.307 0.308 0.308 0.309 0.309 0.309 0.309 0.310 0.310 0.310 0.310 0.311 0.311 0.312 0.312 0.313 0.313 0.313 0.313 
query 3 nn's (1564977898, 1606128091): 889987 (1593644784) 783586 (1584449301) 124464 (1588791594) 640717 (1593715105) 687871 (1584368476) 595884 (1603585196) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 456770 (1569878368) 382748 (1593824389) 35100 (1602181028) 369955 (1572446350) 108295 (1585156706) 1172 (1593437402) 183160 (1602553401) 27812 (1566082536) 810505 (1600367373) 669781 (1599946426) 758927 (1600115067) 555783 (1582924247) 879049 (1580410467) 269754 (1600944924) 226331 (1587219459) 899709 (1569431812) 622714 (1601863068) 636892 (1588778659) 170065 (1567980012) 725969 (1596031378) 671717 (1569449284) 469326 (1591653206) 863296 (1568848990) 345300 (1592195475) 225830 (1582762176) 174382 (1591143332) 43568 (1574027594) 4433 (1598650487) 397607 (1576582831) 431136 (1591290445) 989223 (1601168056) 301836 (1586460731) 391302 (1573059058) 800827 (1581281066) 585483 (1591851301) 799434 (1571614920) 696027 (1565089229) 479354 (1574296216) 472875 (1570825151) 638495 (1591051278) 402867 (1586944643) 882799 (1602614385) 208236 (1570403595) 684978 (1569892488) 931871 (1577236835) 184010 (1592663456) 17746 (1578159083) 430216 (1590828473) 433518 (1571765207) 583701 (1579282290) 218254 (1585421290) 328860 (1580625037) 906607 (1590402733) 332772 (1591201180) 100162 (1603446100) 533587 (1578734941) 808853 (1600624761) 418179 (1569261639) 553746 (1565242336) 807512 (1565479561) 567499 (1598482734) 694334 (1583158570) 247163 (1588394370) 222643 (1586742508) 358247 (1598283739) 412295 (1592051871) 340090 (1601066497) 242265 (1582348130) 191420 (1567611844) 309349 (1590795708) 631191 (1576790924) 201176 (1581392986) 944408 (1596325783) 723056 (1596423636) 315020 (1570876084) 37631 (1569700468) 480847 (1575805769) 341069 (1569852456) 706869 (1571407578) 237881 (1577944076) 157117 (1582132864) 302971 (1604786015) 935542 (1579374712) 130248 (1584742028) 521807 (1584918824) 558831 (1600013234) 129828 (1590456161) 923128 (1584271014) 231004 (1598567793) 430670 (1566812498) 26753 (1603235312) 
     dis: 	0.403 0.409 0.449 0.455 0.460 0.462 0.465 0.476 0.496 0.496 0.500 0.501 0.503 0.508 0.509 0.509 0.511 0.513 0.513 0.515 0.517 0.517 0.520 0.522 0.522 0.522 0.526 0.526 0.526 0.526 0.526 0.527 0.528 0.531 0.531 0.531 0.533 0.533 0.534 0.536 0.537 0.537 0.538 0.539 0.539 0.539 0.540 0.540 0.540 0.541 0.544 0.544 0.546 0.546 0.547 0.547 0.549 0.549 0.550 0.551 0.552 0.552 0.553 0.553 0.554 0.555 0.555 0.555 0.555 0.556 0.556 0.556 0.557 0.559 0.560 0.560 0.560 0.561 0.561 0.562 0.562 0.564 0.564 0.565 0.566 0.566 0.566 0.566 0.566 0.567 0.567 0.568 0.568 0.568 0.568 0.569 0.569 0.569 0.569 0.569 
query 4 nn's (1486429184, 1570175082): 582698 (1557087889) 959629 (1553076435) 191044 (1542912543) 46163 (1552605357) 279888 (1555515184) 700754 (1557101934) 754904 (1532757000) 68136 (1537086660) 556169 (1553542108) 54130 (1553866600) 60658 (1512331918) 789873 (1564175719) 589135 (1547166816) 929991 (1548794594) 59094 (1536774042) 455512 (1559505416) 403555 (1549502178) 565451 (1563280600) 834676 (1547757785) 222228 (1543263211) 218677 (1567427396) 902523 (1564343178) 979493 (1540438177) 330129 (1525225883) 584911 (1538696418) 969773 (1527858141) 861337 (1559160334) 481846 (1512692187) 18995 (1561278454) 567017 (1561466150) 143565 (1516103937) 351217 (1545147659) 870723 (1530111079) 616623 (1529427583) 282395 (1552886840) 573206 (1557940034) 507409 (1565232420) 262276 (1518198483) 655488 (1505816775) 857192 (1554140364) 147188 (1501610900) 805996 (1530049195) 51681 (1535136336) 590482 (1550192676) 605725 (1557494891) 500007 (1555794424) 678901 (1558868874) 577889 (1558192255) 732037 (1558530545) 511053 (1554404630) 309894 (1532146088) 842541 (1569071674) 173575 (1509173034) 948602 (1555862584) 148545 (1518097309) 760527 (1492818655) 584115 (1555479090) 244038 (1543691184) 285533 (1567392541) 948484 (1569979308) 392242 (1497525223) 569466 (1522175329) 341328 (1495582876) 907116 (1563321366) 367708 (1513407029) 43574 (1492546668) 573896 (1562646014) 395799 (1560127897) 490515 (1562711345) 440301 (1534385643) 464808 (1521378210) 311214 (1546572875) 204098 (1565367374) 101369 (1531669788) 954881 (1561262229) 56749 (1521485101) 235772 (1551117248) 923538 (1527525691) 850663 (1553673926) 635293 (1564014847) 596233 (1565428603) 583639 (1510024142) 954446 (1568380532) 921524 (1559055905) 745769 (1554844132) 959099 (1569783405) 709494 (1563922629) 940668 (1566892372) 685016 (1551067146) 435576 (1516246088) 156056 (1513534578) 341468 (1497809821) 604226 (1538444207) 246427 (1546653533) 843400 (1549019747) 243614 (1557773802) 547904 (1550941972) 470637 (1514523703) 831639 (1563684890) 853874 (1540154048) 
     dis: 	0.260 0.293 0.300 0.300 0.303 0.304 0.305 0.306 0.307 0.308 0.309 0.313 0.314 0.317 0.317 0.317 0.318 0.320 0.321 0.323 0.323 0.325 0.325 0.325 0.326 0.328 0.328 0.329 0.330 0.330 0.331 0.331 0.332 0.332 0.332 0.332 0.333 0.333 0.334 0.334 0.335 0.335 0.335 0.335 0.337 0.337 0.338 0.338 0.338 0.339 0.340 0.341 0.341 0.344 0.345 0.345 0.345 0.346 0.346 0.346 0.347 0.347 0.348 0.348 0.349 0.349 0.349 0.350 0.351 0.351 0.351 0.352 0.352 0.353 0.353 0.354 0.354 0.354 0.355 0.355 0.356 0.356 0.356 0.357 0.357 0.358 0.358 0.358 0.358 0.358 0.359 0.359 0.359 0.360 0.360 0.360 0.360 0.361 0.361 0.362 
[ 33.599s ] *** Query time: 22.314
qps: 448.145
 *** HNSW recall 
HNSW get 991450 postive res from 1000000 results, recall@100:0.991
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.007 0.342 0.650 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 83114550, average: 8311.455
finished ivfpq index examples
[ 33.632s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 200 512"
	User time (seconds): 27.35
	System time (seconds): 4.17
	Percent of CPU this job got: 93%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:33.84
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2382756
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 1663046
	Voluntary context switches: 10339
	Involuntary context switches: 78
	Swaps: 0
	File system inputs: 274336
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:13
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 200
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.090s ] Loaded metadata, 1000000 attr's found
[ 0.090s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.102s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.104s ] Loaded 10000 redcaps1m queries
[ 0.169s ] Loaded ground truth, gt_size: 100
[ 0.169s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 4.846s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 31.934s ] Query results (vector ids, then distances):
query 0 nn's (1582001887, 1589499026): 562528 (1586530455) 864174 (1586141206) 363324 (1588150617) 309200 (1583866074) 825029 (1587509747) 823706 (1585149377) 318225 (1582255095) 399187 (1587938124) 553713 (1584927669) 419559 (1588543049) 627019 (1588778001) 575822 (1586298011) 752134 (1583896379) 949111 (1587581586) 894678 (1585406115) 501049 (1585237551) 87994 (1584776656) 770943 (1585176238) 837349 (1587672503) 258712 (1588733584) 212755 (1583129224) 570590 (1588511393) 754292 (1586803647) 355967 (1588162763) 864160 (1585410050) 816166 (1584997820) 725140 (1588203922) 773035 (1583799451) 92781 (1588357051) 965396 (1589114636) 44577 (1583002559) 831695 (1588715230) 362104 (1588408854) 657536 (1588367863) 73930 (1583187725) 440172 (1584059747) 397290 (1587362599) 243123 (1588045918) 673888 (1587268110) 128069 (1582458067) 969562 (1588545723) 709790 (1584231792) 145589 (1589118962) 309885 (1583004780) 483972 (1586265495) 872251 (1582070115) 119266 (1584317359) 98292 (1586620802) 458298 (1587578253) 47840 (1588977750) 791821 (1588141526) 333089 (1584203971) 46465 (1586063219) 181904 (1583458154) 839721 (1588844371) 693096 (1589112162) 102300 (1589414238) 146794 (1588907630) 485058 (1584803482) 753889 (1582840733) 536551 (1587750214) 273958 (1582130070) 405743 (1583800821) 818529 (1588052673) 740087 (1586258281) 475498 (1586099195) 83840 (1584594611) 962577 (1586047941) 586468 (1587394950) 876904 (1586209346) 811479 (1583192911) 573653 (1588063754) 150071 (1587505996) 716684 (1588116415) 209035 (1584361020) 240250 (1587296212) 268311 (1585778190) 713659 (1585691570) 634345 (1589465608) 285800 (1582146096) 450728 (1586442002) 929621 (1589242675) 992461 (1587863309) 1199 (1587068028) 649682 (1587936677) 312250 (1582778046) 529307 (1589427321) 949462 (1588727090) 214974 (1584571421) 774464 (1582933225) 192295 (1582219914) 785610 (1587869020) 810130 (1583327514) 520430 (1582852685) 515643 (1585178887) 271241 (1583014591) 490377 (1586009705) 678493 (1586699606) 929480 (1589293373) 48589 (1583615190) 
     dis: 	0.641 0.743 0.814 0.854 0.888 0.905 0.905 0.920 0.922 0.922 0.924 0.927 0.930 0.932 0.933 0.935 0.935 0.937 0.939 0.939 0.939 0.944 0.945 0.945 0.947 0.949 0.952 0.953 0.956 0.957 0.958 0.958 0.960 0.961 0.963 0.963 0.964 0.964 0.967 0.968 0.968 0.968 0.971 0.971 0.976 0.976 0.978 0.981 0.982 0.982 0.983 0.984 0.986 0.988 0.989 0.989 0.990 0.991 0.992 0.992 0.997 0.998 0.999 1.000 1.002 1.002 1.002 1.002 1.003 1.003 1.004 1.004 1.004 1.004 1.006 1.007 1.007 1.008 1.008 1.009 1.009 1.010 1.010 1.011 1.011 1.012 1.012 1.016 1.016 1.017 1.018 1.019 1.019 1.019 1.019 1.021 1.021 1.024 1.024 1.024 
query 1 nn's (1560999281, 1570293538): 964018 (1566639637) 979295 (1567526425) 848169 (1567967943) 661716 (1569475757) 272839 (1567350368) 743973 (1565255174) 226358 (1565225638) 964128 (1566424023) 925657 (1569885810) 324349 (1565636095) 107066 (1564445038) 489550 (1561300577) 769260 (1570050053) 770454 (1561685089) 244515 (1565195570) 687772 (1567207126) 816247 (1563724766) 135640 (1562247065) 855763 (1569114081) 750270 (1568905945) 417828 (1564258459) 785513 (1568160267) 1519 (1561555264) 232066 (1563834787) 865350 (1562057425) 885260 (1562875914) 722531 (1562614185) 654319 (1562203480) 72615 (1562076560) 892976 (1565037919) 623093 (1562598643) 764370 (1562603973) 70419 (1561584228) 469350 (1562335528) 883636 (1564102641) 291657 (1568547556) 642147 (1569768845) 216340 (1567387098) 274103 (1570218669) 901600 (1563702446) 434283 (1561144178) 349713 (1564219857) 606783 (1566702692) 461473 (1563288036) 926275 (1564959288) 639635 (1568309647) 270961 (1563556089) 246783 (1563711236) 80803 (1561544409) 262597 (1569873057) 770215 (1569274956) 199410 (1564269101) 287347 (1564337831) 616405 (1569095085) 942154 (1569191438) 299001 (1565542218) 387132 (1568809665) 885142 (1567946632) 959689 (1565003796) 221752 (1563043037) 667994 (1562513679) 650379 (1565444264) 323338 (1562185350) 946688 (1566749244) 177051 (1564056908) 205822 (1566131347) 677228 (1567664072) 638246 (1563755724) 438588 (1568387607) 885472 (1564532229) 386053 (1564343817) 966460 (1563230205) 606890 (1566143371) 749222 (1564451163) 624583 (1561474781) 244957 (1568787071) 366358 (1561848648) 319222 (1569712617) 982374 (1562959746) 937272 (1565184401) 752414 (1564707273) 257802 (1562161142) 17059 (1569474379) 6219 (1562367310) 720244 (1564039332) 35723 (1569870532) 919586 (1562280089) 121520 (1568076447) 623071 (1567967141) 742178 (1565312437) 528605 (1569761656) 151821 (1564945056) 900158 (1562197870) 126531 (1565671044) 98192 (1567308345) 692254 (1568970205) 111699 (1564180237) 988151 (1567887407) 639650 (1565213390) 349657 (1569258618) 
     dis: 	0.113 0.115 0.115 0.116 0.119 0.120 0.122 0.122 0.123 0.123 0.126 0.127 0.127 0.127 0.128 0.128 0.129 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.134 0.134 0.136 0.136 0.136 0.136 0.137 0.137 0.139 0.139 0.140 0.140 0.140 0.141 0.141 0.141 0.141 0.141 0.142 0.142 0.142 0.142 0.143 0.143 0.144 0.145 0.145 0.145 0.146 0.146 0.146 0.146 0.146 0.147 0.147 0.148 0.148 0.148 0.150 0.150 0.150 0.151 0.151 0.152 0.152 0.152 0.152 0.153 0.154 0.154 0.154 0.154 0.155 0.155 0.155 0.155 0.155 0.155 0.155 0.156 0.156 0.156 0.156 0.157 0.157 0.157 0.157 0.158 0.159 0.159 0.159 0.159 
query 2 nn's (1572763542, 1582585543): 306439 (1575579764) 374226 (1576918189) 435452 (1574701387) 328089 (1574112193) 800558 (1578206579) 625921 (1580310462) 919763 (1580427352) 882709 (1573089021) 684897 (1579890463) 341373 (1582339286) 136876 (1579879526) 509068 (1582362871) 812326 (1580129904) 304775 (1575151723) 184796 (1580838071) 74992 (1573424430) 459595 (1582500502) 89667 (1574102696) 258161 (1574306665) 66928 (1580572954) 736467 (1580426331) 191026 (1575282024) 27739 (1577559718) 382759 (1576615596) 693424 (1577326809) 848308 (1577381740) 782944 (1576643215) 889497 (1574301401) 309618 (1575469598) 782730 (1581701847) 723232 (1580345133) 123871 (1580263351) 758298 (1581370592) 83984 (1573310768) 699521 (1578031471) 748653 (1577738932) 764977 (1577228673) 12386 (1578076967) 889630 (1581035642) 975747 (1581377891) 564355 (1578800006) 320481 (1577758091) 138150 (1574772939) 838497 (1582143070) 306557 (1574359565) 376247 (1578415912) 734423 (1575329377) 72892 (1576591318) 91884 (1582294672) 552350 (1580932122) 156467 (1581027996) 17303 (1575739255) 864290 (1582406470) 584919 (1576459524) 652051 (1578103605) 960438 (1579035074) 121261 (1577918137) 187538 (1573434034) 52225 (1573940490) 986416 (1573608765) 257475 (1581231652) 965896 (1580451684) 197289 (1581006814) 808229 (1580728341) 419992 (1573309297) 42773 (1572925862) 229603 (1576605452) 945221 (1581025505) 465378 (1573412132) 114934 (1581275578) 904109 (1580680796) 940325 (1573737079) 823556 (1576491942) 450225 (1574334272) 314591 (1573929914) 80909 (1574188692) 698388 (1580276852) 541438 (1581262786) 324852 (1574625787) 663798 (1575925679) 845644 (1573608523) 66396 (1580970087) 568084 (1579581921) 120420 (1574258520) 376846 (1580137698) 47969 (1578800802) 648008 (1578100185) 300807 (1579781570) 842322 (1572963584) 182286 (1573695169) 698016 (1575034154) 504313 (1575239697) 277852 (1580283035) 243571 (1575145962) 788272 (1581513344) 855534 (1577747028) 240345 (1579262563) 354254 (1581792997) 458788 (1580163462) 401234 (1577908083) 
     dis: 	0.238 0.263 0.278 0.280 0.284 0.284 0.284 0.288 0.292 0.297 0.298 0.300 0.301 0.303 0.303 0.304 0.305 0.307 0.310 0.312 0.314 0.314 0.315 0.315 0.318 0.318 0.319 0.319 0.319 0.321 0.323 0.323 0.324 0.325 0.325 0.326 0.326 0.326 0.326 0.326 0.326 0.327 0.327 0.328 0.328 0.329 0.330 0.330 0.331 0.331 0.332 0.332 0.333 0.333 0.333 0.335 0.335 0.336 0.336 0.337 0.337 0.337 0.337 0.338 0.338 0.338 0.339 0.339 0.339 0.340 0.341 0.342 0.342 0.342 0.344 0.345 0.345 0.346 0.346 0.347 0.347 0.347 0.348 0.348 0.348 0.349 0.349 0.349 0.349 0.351 0.351 0.352 0.352 0.352 0.352 0.352 0.353 0.353 0.354 0.355 
query 3 nn's (1574977513, 1584382757): 687871 (1584368476) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 555783 (1582924247) 879049 (1580410467) 225830 (1582762176) 397607 (1576582831) 800827 (1581281066) 931871 (1577236835) 17746 (1578159083) 583701 (1579282290) 328860 (1580625037) 533587 (1578734941) 694334 (1583158570) 242265 (1582348130) 631191 (1576790924) 201176 (1581392986) 480847 (1575805769) 237881 (1577944076) 157117 (1582132864) 935542 (1579374712) 923128 (1584271014) 468019 (1576987182) 602682 (1582950625) 929552 (1577063882) 387386 (1582405992) 44181 (1577753526) 48330 (1581407630) 361068 (1575261343) 222131 (1582710031) 132008 (1578950863) 290462 (1582791014) 867736 (1583111572) 945383 (1577663730) 772511 (1581624973) 52399 (1580756502) 268380 (1583626170) 817123 (1581712765) 426950 (1577045978) 324064 (1583709179) 57618 (1579265350) 482952 (1580187897) 753842 (1582435434) 48579 (1577171455) 623185 (1581588604) 590384 (1577822237) 838846 (1576005040) 57396 (1580269242) 130445 (1577597632) 390986 (1577166880) 526488 (1583094282) 940680 (1580909930) 131738 (1575086416) 571622 (1583068987) 40714 (1578214456) 87349 (1582657329) 562142 (1575756985) 108329 (1577944598) 843984 (1577494978) 940165 (1578178197) 541061 (1583333255) 188856 (1578020553) 958845 (1580419124) 578962 (1580770671) 832818 (1576723727) 929569 (1575325450) 654652 (1582428954) 627510 (1581813790) 63127 (1584213793) 705193 (1577259166) 584120 (1582149774) 487195 (1578867571) 749477 (1582393168) 461504 (1581722535) 203777 (1584272451) 206663 (1576469463) 630733 (1582914090) 502023 (1582737844) 919630 (1579012420) 237849 (1580744030) 25409 (1575834517) 302170 (1584376845) 627970 (1579917262) 607359 (1581959525) 693925 (1579039551) 836312 (1578498502) 544709 (1575210593) 380270 (1583416577) 357810 (1579725690) 823847 (1583018793) 146722 (1582838007) 984927 (1581394258) 932936 (1580057153) 646749 (1582773935) 159289 (1582201736) 682591 (1578101857) 737588 (1581187647) 655886 (1583717254) 409947 (1580620932) 
     dis: 	0.460 0.465 0.476 0.496 0.517 0.517 0.531 0.533 0.538 0.546 0.547 0.550 0.552 0.554 0.556 0.560 0.562 0.562 0.566 0.566 0.567 0.568 0.569 0.574 0.575 0.576 0.580 0.584 0.587 0.588 0.591 0.591 0.591 0.592 0.592 0.592 0.593 0.595 0.595 0.596 0.598 0.600 0.600 0.600 0.601 0.601 0.604 0.604 0.605 0.606 0.607 0.607 0.607 0.608 0.608 0.608 0.609 0.611 0.616 0.617 0.618 0.619 0.620 0.620 0.622 0.623 0.623 0.624 0.624 0.624 0.624 0.624 0.625 0.625 0.626 0.627 0.627 0.627 0.628 0.628 0.628 0.629 0.629 0.630 0.631 0.631 0.631 0.631 0.631 0.632 0.632 0.632 0.632 0.635 0.637 0.637 0.638 0.640 0.641 0.642 
query 4 nn's (1517035768, 1535603056): 754904 (1532757000) 330129 (1525225883) 969773 (1527858141) 870723 (1530111079) 616623 (1529427583) 262276 (1518198483) 805996 (1530049195) 51681 (1535136336) 309894 (1532146088) 148545 (1518097309) 569466 (1522175329) 440301 (1534385643) 464808 (1521378210) 101369 (1531669788) 56749 (1521485101) 923538 (1527525691) 4809 (1526640489) 976778 (1529381540) 222638 (1521059736) 158433 (1531143589) 617960 (1533568031) 699783 (1532683504) 327957 (1534474289) 691394 (1526182918) 214285 (1534561001) 877126 (1534786430) 341033 (1523622112) 158019 (1529495719) 271475 (1528418882) 472597 (1518230046) 45427 (1525488953) 899638 (1524615031) 255281 (1520796275) 91846 (1523939963) 611904 (1519355714) 38003 (1527103598) 228976 (1527974395) 968757 (1519826724) 778496 (1528282963) 98515 (1522616211) 542480 (1532986342) 277133 (1530557498) 157423 (1518791927) 939846 (1517192241) 161826 (1532828749) 831230 (1535051164) 721601 (1533082614) 540290 (1533342924) 428148 (1533488237) 782847 (1531012276) 10221 (1517788069) 680596 (1521122410) 839671 (1523328804) 944173 (1522847377) 947987 (1525946923) 101752 (1531697704) 315394 (1527180802) 539547 (1526779523) 64213 (1525665397) 92475 (1521127546) 764831 (1529529895) 779346 (1534007250) 43918 (1534970358) 444190 (1527459759) 277836 (1532827616) 644107 (1532398231) 947172 (1533771790) 310256 (1523752772) 150032 (1522584498) 146214 (1533251276) 474889 (1533414897) 112596 (1525801416) 18688 (1525350416) 646663 (1517599163) 998359 (1531789753) 234557 (1532830773) 13893 (1529081269) 741202 (1520093616) 11708 (1529628187) 912926 (1533570086) 281874 (1533077236) 15543 (1531697110) 132329 (1532801084) 206133 (1517367232) 126523 (1529592102) 521320 (1534879141) 210342 (1525569313) 851179 (1533616116) 32840 (1533555378) 541860 (1533257793) 501609 (1530615759) 934434 (1521044306) 996919 (1524013438) 502306 (1532221649) 125854 (1526682503) 842932 (1531084628) 459784 (1521473183) 938810 (1530583592) 644341 (1521023147) 758583 (1520534151) 
     dis: 	0.305 0.325 0.328 0.332 0.332 0.333 0.335 0.335 0.340 0.345 0.347 0.351 0.351 0.353 0.354 0.354 0.364 0.371 0.371 0.372 0.374 0.379 0.380 0.380 0.382 0.382 0.383 0.383 0.384 0.384 0.384 0.386 0.386 0.386 0.387 0.387 0.388 0.388 0.388 0.388 0.388 0.389 0.391 0.392 0.392 0.392 0.392 0.393 0.393 0.393 0.394 0.395 0.396 0.396 0.396 0.400 0.400 0.401 0.401 0.401 0.402 0.403 0.404 0.404 0.406 0.407 0.408 0.408 0.409 0.409 0.410 0.411 0.411 0.411 0.411 0.412 0.413 0.413 0.413 0.413 0.413 0.414 0.416 0.416 0.416 0.416 0.416 0.416 0.417 0.418 0.418 0.418 0.418 0.419 0.420 0.420 0.421 0.421 0.421 0.422 
[ 31.934s ] *** Query time: 21.283
qps: 469.854
 *** HNSW recall 
HNSW get 892379 postive res from 1000000 results, recall@100:0.892
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.003 0.016 0.069 0.328 0.581 0.004 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 83114550, average: 8311.455
finished ivfpq index examples
[ 31.972s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 200 512"
	User time (seconds): 24.60
	System time (seconds): 5.07
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:32.31
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2384744
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 25
	Minor (reclaiming a frame) page faults: 1192851
	Voluntary context switches: 11797
	Involuntary context switches: 49
	Swaps: 0
	File system inputs: 189696
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:43
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 200
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.085s ] Loaded metadata, 1000000 attr's found
[ 0.085s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.098s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.099s ] Loaded 10000 redcaps1m queries
[ 0.165s ] Loaded ground truth, gt_size: 100
[ 0.165s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.121s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 30.872s ] Query results (vector ids, then distances):
query 0 nn's (1538594774, 1540118398): 754695 (1539668172) 105181 (1539349926) 80643 (1539819925) 383361 (1540071964) 105520 (1540064197) 470762 (1539957790) 90915 (1539863751) 874031 (1538774402) 150694 (1538834659) 75391 (1538671303) 778776 (1539812870) 966203 (1539629796) 933645 (1539570084) 874682 (1539905193) 893073 (1539210313) 78274 (1539532776) 398224 (1539829194) 417596 (1538975551) 903188 (1540033852) 765853 (1539654523) 276891 (1539273634) 709780 (1538948438) 124865 (1538876065) 891469 (1539787728) 870677 (1539260759) 987175 (1538914947) 473314 (1538702726) 420576 (1539328408) 894150 (1538893109) 745947 (1539691846) 399718 (1539291478) 52307 (1538795221) 715550 (1539922137) 900164 (1538766698) 468729 (1539810129) 228941 (1538780512) 495395 (1539657583) 447900 (1539127769) 282557 (1539099912) 462488 (1538739094) 398145 (1538965062) 804527 (1539556914) 535980 (1539616044) 247578 (1539314013) 166726 (1539179211) 529380 (1539711002) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.826 0.935 0.971 0.997 1.029 1.032 1.042 1.043 1.045 1.047 1.056 1.062 1.062 1.063 1.064 1.082 1.088 1.089 1.090 1.097 1.103 1.105 1.109 1.110 1.113 1.115 1.134 1.139 1.143 1.144 1.145 1.147 1.151 1.153 1.156 1.159 1.174 1.189 1.196 1.209 1.214 1.229 1.239 1.241 1.250 1.291 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1558313707, 1559317195): 634858 (1559095216) 747350 (1558405403) 328886 (1559221626) 878375 (1559157897) 840825 (1559253647) 433046 (1558315145) 619059 (1559307158) 409525 (1558370684) 894069 (1558990053) 502253 (1558335904) 847459 (1558414379) 83086 (1558807992) 108637 (1558651601) 195728 (1559144191) 585058 (1558915362) 424854 (1559189379) 932842 (1559313561) 658956 (1559250736) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.134 0.138 0.139 0.144 0.148 0.153 0.161 0.162 0.165 0.166 0.168 0.177 0.181 0.208 0.214 0.216 0.225 0.745 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1581675605, 1582524306): 341373 (1582339286) 509068 (1582362871) 459595 (1582500502) 782730 (1581701847) 838497 (1582143070) 91884 (1582294672) 864290 (1582406470) 354254 (1581792997) 426699 (1581810177) 705 (1582226978) 550860 (1581780468) 228658 (1582286587) 204687 (1582470733) 704540 (1581965214) 282404 (1581960293) 209705 (1581908923) 347005 (1582520891) 701153 (1582034091) 378439 (1581820524) 880558 (1582166419) 878182 (1582491146) 278965 (1582080523) 551666 (1581972741) 217023 (1581955917) 963627 (1581989168) 905340 (1581890796) 150461 (1582510550) 271966 (1581802718) 686195 (1582413070) 96896 (1582440058) 899682 (1581990993) 550828 (1581810172) 667599 (1581950910) 234992 (1582343382) 128732 (1582489502) 387702 (1581806007) 227254 (1582070499) 728269 (1581695773) 293301 (1581733023) 531052 (1581968477) 987084 (1582352577) 895263 (1582085717) 13316 (1582155882) 989680 (1582346097) 188482 (1582135234) 555098 (1581741708) 456103 (1581905785) 481034 (1582062137) 188007 (1582124873) 677479 (1582239534) 819925 (1582257056) 342915 (1582145319) 305081 (1582230945) 689501 (1582514702) 116003 (1582076283) 274225 (1582238874) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.297 0.300 0.305 0.321 0.328 0.331 0.333 0.353 0.356 0.357 0.360 0.366 0.367 0.369 0.369 0.370 0.374 0.379 0.384 0.385 0.385 0.387 0.388 0.390 0.391 0.392 0.393 0.393 0.398 0.400 0.406 0.411 0.416 0.416 0.417 0.419 0.427 0.427 0.432 0.432 0.435 0.445 0.448 0.469 0.470 0.471 0.471 0.474 0.476 0.479 0.506 0.513 0.516 0.516 0.533 0.574 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1541361198, 1542915636): 769868 (1542487532) 493967 (1542294990) 953342 (1542471165) 136421 (1542307684) 175440 (1542245841) 238924 (1542209507) 972437 (1541427748) 385496 (1541953821) 762523 (1542714651) 742777 (1541363545) 470469 (1542471828) 356672 (1542519441) 890826 (1541627340) 925090 (1542531015) 98052 (1542393773) 92303 (1541457923) 706013 (1541385453) 115113 (1541550861) 652694 (1542650891) 413253 (1541594209) 627154 (1541976321) 596591 (1542570636) 400333 (1541401226) 220754 (1541988883) 619115 (1541644156) 424169 (1541388856) 378318 (1541963003) 487073 (1542236932) 233813 (1542123551) 587473 (1542052712) 808913 (1541766388) 229068 (1542774597) 403139 (1542403625) 199056 (1542200974) 329960 (1541957026) 942778 (1542076959) 803914 (1541893103) 460554 (1542663104) 763103 (1541867573) 633020 (1542727756) 654964 (1542894020) 528390 (1541639016) 848060 (1541904453) 857263 (1542316097) 591153 (1542271411) 246408 (1542061656) 2280 (1542438696) 303488 (1541961925) 840715 (1542374437) 995485 (1542522922) 620182 (1542061491) 772245 (1541580230) 744750 (1542294442) 257474 (1542388869) 346634 (1542325639) 703418 (1541648426) 75763 (1541624776) 875220 (1542466103) 36161 (1542519202) 240844 (1542824654) 210165 (1541880985) 681894 (1541889744) 63028 (1542636651) 644595 (1541751422) 477514 (1541425102) 110660 (1542102895) 247437 (1541902959) 572951 (1541370194) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.474 0.561 0.576 0.594 0.597 0.605 0.608 0.611 0.629 0.630 0.634 0.634 0.650 0.652 0.654 0.666 0.670 0.672 0.675 0.677 0.685 0.685 0.688 0.688 0.689 0.699 0.699 0.700 0.709 0.717 0.721 0.721 0.728 0.730 0.734 0.736 0.738 0.740 0.741 0.742 0.744 0.744 0.747 0.754 0.758 0.762 0.773 0.774 0.776 0.782 0.782 0.790 0.790 0.795 0.797 0.802 0.806 0.813 0.823 0.826 0.829 0.833 0.835 0.854 0.854 0.861 0.906 0.938 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1547965400, 1549164333): 929991 (1548794594) 843400 (1549019747) 556735 (1548803052) 359872 (1548277437) 924765 (1548418215) 855122 (1548705861) 802461 (1548697185) 62976 (1548022732) 488089 (1548395559) 213717 (1548537413) 520185 (1548433179) 741617 (1549149038) 356311 (1548857389) 431630 (1548807374) 638905 (1548936508) 480341 (1548646591) 593701 (1549080106) 22045 (1549058584) 159273 (1548284372) 649594 (1548344576) 411121 (1548576149) 946299 (1548080854) 102174 (1548029711) 983711 (1548029525) 38975 (1548105724) 782863 (1548840512) 29663 (1548214689) 383660 (1548352189) 986514 (1549156354) 175612 (1548256353) 595389 (1548924720) 601174 (1549067186) 146628 (1548873736) 407414 (1548951937) 900240 (1548344836) 840082 (1548083052) 229066 (1548102562) 790070 (1548964923) 703680 (1548003844) 61582 (1548024693) 572478 (1548978177) 375710 (1548523323) 415833 (1548017784) 834289 (1548729227) 688556 (1548611510) 576967 (1548632814) 942625 (1549063053) 299995 (1548290804) 566468 (1548886426) 58333 (1548125487) 712868 (1548894905) 945114 (1549142718) 557939 (1548948003) 642645 (1548018898) 808881 (1548086800) 205404 (1548975044) 901563 (1549148631) 54071 (1548289741) 636481 (1548459104) 526030 (1548702892) 159798 (1548555128) 873195 (1548114452) 783258 (1548817219) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.317 0.360 0.374 0.377 0.381 0.383 0.391 0.403 0.406 0.406 0.431 0.435 0.439 0.443 0.449 0.455 0.456 0.456 0.457 0.465 0.466 0.467 0.472 0.475 0.475 0.475 0.477 0.477 0.479 0.480 0.482 0.492 0.493 0.495 0.495 0.499 0.501 0.502 0.502 0.503 0.503 0.504 0.507 0.509 0.510 0.516 0.517 0.517 0.527 0.554 0.555 0.557 0.564 0.572 0.573 0.574 0.585 0.586 0.600 0.626 0.636 0.686 0.708 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 30.872s ] *** Query time: 21.481
qps: 465.536
 *** HNSW recall 
HNSW get 316294 postive res from 1000000 results, recall@100:0.316
recall dist(10% per bucket): 0.003 0.075 0.329 0.414 0.163 0.016 0.001 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 83114550, average: 8311.455
finished ivfpq index examples
[ 30.902s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 200 512"
	User time (seconds): 28.70
	System time (seconds): 2.29
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:31.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2386844
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 595210
	Voluntary context switches: 0
	Involuntary context switches: 52
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:02
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 200
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.075s ] Loaded metadata, 1000000 attr's found
[ 0.075s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.088s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.090s ] Loaded 10000 redcaps1m queries
[ 0.157s ] Loaded ground truth, gt_size: 100
[ 0.157s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 1.933s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 24.562s ] Query results (vector ids, then distances):
query 0 nn's (1538054874, 1538228285): 7045 (1538194886) 503208 (1538089743) 867151 (1538159622) 556867 (1538135476) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.984 1.034 1.077 1.218 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1506909292, 1507230692): 80546 (1507132298) 827419 (1507142402) 550738 (1507215860) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.179 0.257 0.307 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1552519107, 1552626645): 150896 (1552595157) 167260 (1552588486) 847695 (1552610954) 893995 (1552551614) 535492 (1552589209) 263608 (1552545876) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.361 0.362 0.395 0.445 0.478 0.657 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1586951418, 1587012565): 549134 (1586977461) 872475 (1586961587) 754085 (1586980563) 295882 (1586984659) 251534 (1586960773) 691834 (1587004831) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.658 0.692 0.706 0.754 0.792 0.857 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1549236779, 1549369643): 659847 (1549307861) 965697 (1549315582) 137757 (1549310803) 914372 (1549316996) 808259 (1549285505) 211569 (1549255285) 679863 (1549248426) 786040 (1549297162) 247221 (1549325848) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.427 0.450 0.475 0.478 0.481 0.482 0.489 0.529 0.592 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 24.563s ] *** Query time: 17.217
qps: 580.836
 *** HNSW recall 
HNSW get 41180 postive res from 1000000 results, recall@100:0.041
recall dist(10% per bucket): 0.978 0.022 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 83114550, average: 8311.455
finished ivfpq index examples
[ 24.593s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 200 512"
	User time (seconds): 22.70
	System time (seconds): 2.11
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:24.88
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2385832
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 595295
	Voluntary context switches: 1
	Involuntary context switches: 49
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
