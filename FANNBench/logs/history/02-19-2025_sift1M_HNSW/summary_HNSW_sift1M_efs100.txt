Start time: 20:21
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/attr_sel_1_500_random_1.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_1_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.064s ] Loaded attributions, 1000000 found
[ 0.064s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.064s ] Loading database
[ 0.395s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.395s ] Indexing database, size 1000000*128 from max 1000000
[ 0.395s ] Adding the vectors to the index
index construction cost:84.731
[ 84.732s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 85.221s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_1_40_1000
[85.221 s] -----DONE-----
[ 85.221s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/attr_sel_1_500_random_1.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_1_40_1000 128 40 1000"
	User time (seconds): 8755.13
	System time (seconds): 29.77
	Percent of CPU this job got: 10294%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:25.33
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1483712
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1789376
	Voluntary context switches: 8920
	Involuntary context switches: 463705
	Swaps: 0
	File system inputs: 272
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 20:43
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/attr_sel_1_500_random_1.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/qrangesel_1_1_500_random_1.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/sif_gt_sel_1_1_500_random_1_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_1_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/attr_sel_1_500_random_1.json
[ 0.058s ] Loaded metadata, 1000000 attr's found
[ 0.058s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.061s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.063s ] Loaded 10000 sift1M queries
[ 0.071s ] Loaded ground truth, gt_size: 10
[ 0.071s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.680s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 1.000
[ 12.993s ] Query results (vector ids, then distances):
query 0 nn's (1, 1): 932085 (1) 934876 (1) 561813 (1) 708177 (1) 706771 (1) 695756 (1) 435345 (1) 701258 (1) 455537 (1) 872728 (1) 
     dis: 	54229.000 55091.000 59531.000 65260.000 65697.000 67010.000 68247.000 69844.000 71441.000 71861.000 
query 1 nn's (1, 1): 413247 (1) 413071 (1) 706838 (1) 880592 (1) 249062 (1) 400194 (1) 942339 (1) 880462 (1) 987636 (1) 941776 (1) 
     dis: 	51187.000 52570.000 54813.000 54987.000 55586.000 55595.000 56239.000 56396.000 56785.000 57646.000 
query 2 nn's (1, 1): 669835 (1) 408764 (1) 408462 (1) 408855 (1) 551661 (1) 861882 (1) 406273 (1) 406324 (1) 551743 (1) 861530 (1) 
     dis: 	30792.000 31091.000 33608.000 34104.000 34698.000 35704.000 36048.000 36225.000 36325.000 36348.000 
query 3 nn's (1, 1): 970797 (1) 125539 (1) 48044 (1) 191115 (1) 889039 (1) 546470 (1) 123985 (1) 546496 (1) 207768 (1) 831905 (1) 
     dis: 	30510.000 30863.000 32777.000 34876.000 34909.000 35734.000 36107.000 36113.000 36229.000 36624.000 
query 4 nn's (1, 1): 340871 (1) 748397 (1) 748193 (1) 175336 (1) 716433 (1) 112586 (1) 107281 (1) 416604 (1) 371420 (1) 368246 (1) 
     dis: 	45914.000 47367.000 48151.000 48199.000 52559.000 53980.000 54643.000 55814.000 56914.000 57046.000 
[ 12.993s ] *** Query time: 7.252
qps: 1378.847
 *** HNSW recall 
HNSW get 99739 postive res from 100000 results, recall@10:0.997
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.022 0.976 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46859176, average: 4685.918
finished ivfpq index examples
[ 12.993s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/attr_sel_1_500_random_1.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/qrangesel_1_1_500_random_1.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_1/sif_gt_sel_1_1_500_random_1_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_1_40_1000 100 128"
	User time (seconds): 12.35
	System time (seconds): 0.67
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:13.05
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212049
	Voluntary context switches: 1
	Involuntary context switches: 26
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 21:00
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/attr_sel_1_500_random_2.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_2_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.061s ] Loaded attributions, 1000000 found
[ 0.061s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.061s ] Loading database
[ 0.386s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.386s ] Indexing database, size 1000000*128 from max 1000000
[ 0.386s ] Adding the vectors to the index
index construction cost:86.427
[ 86.427s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 86.895s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_2_40_1000
[86.895 s] -----DONE-----
[ 86.895s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/attr_sel_1_500_random_2.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_2_40_1000 128 40 1000"
	User time (seconds): 8791.12
	System time (seconds): 32.31
	Percent of CPU this job got: 10142%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:26.99
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1481660
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1990502
	Voluntary context switches: 9353
	Involuntary context switches: 492099
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656456
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 21:22
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/attr_sel_1_500_random_2.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/qrangesel_1_1_500_random_2.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/sif_gt_sel_1_1_500_random_2_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_2_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/attr_sel_1_500_random_2.json
[ 0.059s ] Loaded metadata, 1000000 attr's found
[ 0.059s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.062s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.064s ] Loaded 10000 sift1M queries
[ 0.071s ] Loaded ground truth, gt_size: 10
[ 0.071s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.718s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.900
[ 13.591s ] Query results (vector ids, then distances):
query 0 nn's (2, 2): 932085 (2) 934876 (2) 708177 (2) 706771 (2) 695756 (2) 435345 (2) 455537 (2) 36538 (2) 562594 (2) 908244 (2) 
     dis: 	54229.000 55091.000 65260.000 65697.000 67010.000 68247.000 71441.000 73344.000 73537.000 73581.000 
query 1 nn's (2, 2): 413247 (2) 880592 (2) 249062 (2) 942339 (2) 880462 (2) 987636 (2) 941776 (2) 586780 (2) 248426 (2) 849742 (2) 
     dis: 	51187.000 54987.000 55586.000 56239.000 56396.000 56785.000 57646.000 58246.000 58741.000 59323.000 
query 2 nn's (2, 2): 669835 (2) 408764 (2) 408462 (2) 408855 (2) 551661 (2) 861882 (2) 406273 (2) 406324 (2) 551743 (2) 861530 (2) 
     dis: 	30792.000 31091.000 33608.000 34104.000 34698.000 35704.000 36048.000 36225.000 36325.000 36348.000 
query 3 nn's (2, 2): 970797 (2) 125539 (2) 48044 (2) 191115 (2) 889039 (2) 546470 (2) 123985 (2) 546496 (2) 207768 (2) 832999 (2) 
     dis: 	30510.000 30863.000 32777.000 34876.000 34909.000 35734.000 36107.000 36113.000 36229.000 36743.000 
query 4 nn's (2, 2): 748397 (2) 748193 (2) 175336 (2) 716433 (2) 112586 (2) 107281 (2) 416604 (2) 371420 (2) 368246 (2) 279082 (2) 
     dis: 	47367.000 48151.000 48199.000 52559.000 53980.000 54643.000 55814.000 56914.000 57046.000 57527.000 
[ 13.591s ] *** Query time: 7.653
qps: 1306.633
 *** HNSW recall 
HNSW get 99688 postive res from 100000 results, recall@10:0.997
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.026 0.971 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46876631, average: 4687.663
finished ivfpq index examples
[ 13.592s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/attr_sel_1_500_random_2.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/qrangesel_1_1_500_random_2.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_2/sif_gt_sel_1_1_500_random_2_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_2_40_1000 100 128"
	User time (seconds): 12.95
	System time (seconds): 0.69
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:13.65
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 852900
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212071
	Voluntary context switches: 2
	Involuntary context switches: 17
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 21:39
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/attr_sel_1_500_random_3.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_3_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.065s ] Loaded attributions, 1000000 found
[ 0.065s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.065s ] Loading database
[ 0.403s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.403s ] Indexing database, size 1000000*128 from max 1000000
[ 0.403s ] Adding the vectors to the index
index construction cost:87.183
[ 87.183s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 87.679s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_3_40_1000
[87.679 s] -----DONE-----
[ 87.679s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/attr_sel_1_500_random_3.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_3_40_1000 128 40 1000"
	User time (seconds): 8847.56
	System time (seconds): 32.42
	Percent of CPU this job got: 10115%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:27.79
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1481664
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1824874
	Voluntary context switches: 8755
	Involuntary context switches: 478219
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:01
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/attr_sel_1_500_random_3.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/qrangesel_1_1_500_random_3.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/sif_gt_sel_1_1_500_random_3_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_3_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/attr_sel_1_500_random_3.json
[ 0.063s ] Loaded metadata, 1000000 attr's found
[ 0.063s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.065s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.067s ] Loaded 10000 sift1M queries
[ 0.074s ] Loaded ground truth, gt_size: 10
[ 0.074s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.760s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.800
[ 13.060s ] Query results (vector ids, then distances):
query 0 nn's (3, 3): 932085 (3) 934876 (3) 561813 (3) 708177 (3) 706771 (3) 695756 (3) 435345 (3) 872728 (3) 36538 (3) 562594 (3) 
     dis: 	54229.000 55091.000 59531.000 65260.000 65697.000 67010.000 68247.000 71861.000 73344.000 73537.000 
query 1 nn's (3, 3): 413071 (3) 249062 (3) 400194 (3) 942339 (3) 880462 (3) 987636 (3) 941776 (3) 586780 (3) 833054 (3) 248426 (3) 
     dis: 	52570.000 55586.000 55595.000 56239.000 56396.000 56785.000 57646.000 58246.000 58464.000 58741.000 
query 2 nn's (3, 3): 408764 (3) 408462 (3) 408855 (3) 551661 (3) 861882 (3) 406273 (3) 406324 (3) 861530 (3) 239766 (3) 900097 (3) 
     dis: 	31091.000 33608.000 34104.000 34698.000 35704.000 36048.000 36225.000 36348.000 36631.000 38137.000 
query 3 nn's (3, 3): 970797 (3) 191115 (3) 889039 (3) 546470 (3) 123985 (3) 546496 (3) 207768 (3) 831905 (3) 832999 (3) 191317 (3) 
     dis: 	30510.000 34876.000 34909.000 35734.000 36107.000 36113.000 36229.000 36624.000 36743.000 37275.000 
query 4 nn's (3, 3): 340871 (3) 748397 (3) 748193 (3) 175336 (3) 716433 (3) 112586 (3) 107281 (3) 416604 (3) 371420 (3) 368246 (3) 
     dis: 	45914.000 47367.000 48151.000 48199.000 52559.000 53980.000 54643.000 55814.000 56914.000 57046.000 
[ 13.060s ] *** Query time: 7.318
qps: 1366.513
 *** HNSW recall 
HNSW get 99678 postive res from 100000 results, recall@10:0.997
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.028 0.970 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46854820, average: 4685.482
finished ivfpq index examples
[ 13.061s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/attr_sel_1_500_random_3.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/qrangesel_1_1_500_random_3.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_3/sif_gt_sel_1_1_500_random_3_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_3_40_1000 100 128"
	User time (seconds): 12.35
	System time (seconds): 0.75
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:13.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853916
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 212045
	Voluntary context switches: 1
	Involuntary context switches: 41
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:18
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/attr_sel_1_500_random_4.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_4_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.065s ] Loaded attributions, 1000000 found
[ 0.065s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.065s ] Loading database
[ 0.414s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.414s ] Indexing database, size 1000000*128 from max 1000000
[ 0.414s ] Adding the vectors to the index
index construction cost:87.277
[ 87.277s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 87.774s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_4_40_1000
[87.774 s] -----DONE-----
[ 87.774s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/attr_sel_1_500_random_4.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_4_40_1000 128 40 1000"
	User time (seconds): 9136.56
	System time (seconds): 35.36
	Percent of CPU this job got: 10436%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:27.88
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1485648
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2041402
	Voluntary context switches: 10608
	Involuntary context switches: 459195
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656456
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:40
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/attr_sel_1_500_random_4.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/qrangesel_1_1_500_random_4.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/sif_gt_sel_1_1_500_random_4_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_4_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/attr_sel_1_500_random_4.json
[ 0.066s ] Loaded metadata, 1000000 attr's found
[ 0.066s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.069s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.070s ] Loaded 10000 sift1M queries
[ 0.077s ] Loaded ground truth, gt_size: 10
[ 0.077s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.760s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.701
[ 17.031s ] Query results (vector ids, then distances):
query 0 nn's (4, 4): 932085 (4) 934876 (4) 561813 (4) 695756 (4) 701258 (4) 455537 (4) 872728 (4) 36538 (4) 562594 (4) 908244 (4) 
     dis: 	54229.000 55091.000 59531.000 67010.000 69844.000 71441.000 71861.000 73344.000 73537.000 73581.000 
query 1 nn's (4, 4): 249062 (4) 942339 (4) 880462 (4) 987636 (4) 941776 (4) 586780 (4) 833054 (4) 849742 (4) 208391 (4) 192537 (4) 
     dis: 	55586.000 56239.000 56396.000 56785.000 57646.000 58246.000 58464.000 59323.000 59679.000 59720.000 
query 2 nn's (4, 4): 408764 (4) 408462 (4) 408855 (4) 861882 (4) 406324 (4) 551743 (4) 861530 (4) 402106 (4) 823095 (4) 900097 (4) 
     dis: 	31091.000 33608.000 34104.000 35704.000 36225.000 36325.000 36348.000 36458.000 37621.000 38137.000 
query 3 nn's (4, 4): 125539 (4) 191115 (4) 546470 (4) 123985 (4) 831905 (4) 191317 (4) 855554 (4) 993773 (4) 907380 (4) 899013 (4) 
     dis: 	30863.000 34876.000 35734.000 36107.000 36624.000 37275.000 38019.000 39153.000 39157.000 39632.000 
query 4 nn's (4, 4): 748397 (4) 748193 (4) 175336 (4) 112586 (4) 107281 (4) 416604 (4) 368246 (4) 279082 (4) 175407 (4) 953387 (4) 
     dis: 	47367.000 48151.000 48199.000 53980.000 54643.000 55814.000 57046.000 57527.000 58065.000 58065.000 
[ 17.031s ] *** Query time: 9.852
qps: 1014.993
 *** HNSW recall 
HNSW get 99681 postive res from 100000 results, recall@10:0.997
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.030 0.969 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46875401, average: 4687.540
finished ivfpq index examples
[ 17.035s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/attr_sel_1_500_random_4.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/qrangesel_1_1_500_random_4.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_4/sif_gt_sel_1_1_500_random_4_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_4_40_1000 100 128"
	User time (seconds): 16.23
	System time (seconds): 0.77
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:17.12
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 214410
	Voluntary context switches: 2
	Involuntary context switches: 62
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:54
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/attr_sel_1_500_random_5.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_5_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.066s ] Loaded attributions, 1000000 found
[ 0.066s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.066s ] Loading database
[ 0.403s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.403s ] Indexing database, size 1000000*128 from max 1000000
[ 0.403s ] Adding the vectors to the index
index construction cost:86.957
[ 86.957s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 87.431s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_5_40_1000
[87.431 s] -----DONE-----
[ 87.431s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/attr_sel_1_500_random_5.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_5_40_1000 128 40 1000"
	User time (seconds): 8775.58
	System time (seconds): 25.03
	Percent of CPU this job got: 10054%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:27.52
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1483712
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1538102
	Voluntary context switches: 6940
	Involuntary context switches: 458511
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:18
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/attr_sel_1_500_random_5.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/qrangesel_1_1_500_random_5.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/sif_gt_sel_1_1_500_random_5_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_5_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/attr_sel_1_500_random_5.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.070s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.071s ] Loaded 10000 sift1M queries
[ 0.078s ] Loaded ground truth, gt_size: 10
[ 0.078s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.749s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.600
[ 14.128s ] Query results (vector ids, then distances):
query 0 nn's (5, 5): 561813 (5) 708177 (5) 706771 (5) 695756 (5) 435345 (5) 455537 (5) 562594 (5) 908244 (5) 619660 (5) 746931 (5) 
     dis: 	59531.000 65260.000 65697.000 67010.000 68247.000 71441.000 73537.000 73581.000 74356.000 75554.000 
query 1 nn's (5, 5): 413247 (5) 706838 (5) 880592 (5) 249062 (5) 400194 (5) 586780 (5) 833054 (5) 192537 (5) 271353 (5) 20845 (5) 
     dis: 	51187.000 54813.000 54987.000 55586.000 55595.000 58246.000 58464.000 59720.000 59720.000 60053.000 
query 2 nn's (5, 5): 669835 (5) 408462 (5) 408855 (5) 551661 (5) 406324 (5) 551743 (5) 861530 (5) 823095 (5) 900097 (5) 431595 (5) 
     dis: 	30792.000 33608.000 34104.000 34698.000 36225.000 36325.000 36348.000 37621.000 38137.000 38236.000 
query 3 nn's (5, 5): 970797 (5) 125539 (5) 123985 (5) 546496 (5) 207768 (5) 831905 (5) 855554 (5) 443320 (5) 722075 (5) 993773 (5) 
     dis: 	30510.000 30863.000 36107.000 36113.000 36229.000 36624.000 38019.000 38260.000 38524.000 39153.000 
query 4 nn's (5, 5): 748397 (5) 748193 (5) 175336 (5) 716433 (5) 112586 (5) 107281 (5) 416604 (5) 371420 (5) 368246 (5) 340288 (5) 
     dis: 	47367.000 48151.000 48199.000 52559.000 53980.000 54643.000 55814.000 56914.000 57046.000 57968.000 
[ 14.128s ] *** Query time: 8.100
qps: 1234.505
 *** HNSW recall 
HNSW get 99615 postive res from 100000 results, recall@10:0.996
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.003 0.032 0.965 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46855967, average: 4685.597
finished ivfpq index examples
[ 14.130s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/attr_sel_1_500_random_5.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/qrangesel_1_1_500_random_5.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_5/sif_gt_sel_1_1_500_random_5_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_5_40_1000 100 128"
	User time (seconds): 13.45
	System time (seconds): 0.75
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:14.20
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 852896
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 214466
	Voluntary context switches: 2
	Involuntary context switches: 27
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:31
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.067s ] Loaded attributions, 1000000 found
[ 0.067s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.067s ] Loading database
[ 0.390s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.390s ] Indexing database, size 1000000*128 from max 1000000
[ 0.390s ] Adding the vectors to the index
index construction cost:87.559
[ 87.559s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 88.028s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000
[88.028 s] -----DONE-----
[ 88.028s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000 128 40 1000"
	User time (seconds): 8870.03
	System time (seconds): 28.43
	Percent of CPU this job got: 10096%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:28.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1482684
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1791528
	Voluntary context switches: 7591
	Involuntary context switches: 468682
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:54
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 0.110s ] Loaded metadata, 1000000 attr's found
[ 0.110s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.113s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.115s ] Loaded 10000 sift1M queries
[ 0.127s ] Loaded ground truth, gt_size: 10
[ 0.127s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.866s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 19.253s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 932085 (6) 934876 (6) 561813 (6) 708177 (6) 695756 (6) 435345 (6) 562594 (6) 600499 (6) 893601 (6) 619660 (6) 
     dis: 	54229.000 55091.000 59531.000 65260.000 67010.000 68247.000 73537.000 73793.000 74016.000 74356.000 
query 1 nn's (6, 6): 413247 (6) 706838 (6) 880592 (6) 400194 (6) 941776 (6) 833054 (6) 248426 (6) 849742 (6) 192537 (6) 202612 (6) 
     dis: 	51187.000 54813.000 54987.000 55595.000 57646.000 58464.000 58741.000 59323.000 59720.000 60695.000 
query 2 nn's (6, 6): 408855 (6) 861882 (6) 402106 (6) 900097 (6) 431595 (6) 306132 (6) 905339 (6) 62269 (6) 311367 (6) 230295 (6) 
     dis: 	34104.000 35704.000 36458.000 38137.000 38236.000 39154.000 39308.000 39826.000 39874.000 40331.000 
query 3 nn's (6, 6): 970797 (6) 546470 (6) 546496 (6) 207768 (6) 831905 (6) 190692 (6) 191317 (6) 855554 (6) 722075 (6) 546767 (6) 
     dis: 	30510.000 35734.000 36113.000 36229.000 36624.000 36892.000 37275.000 38019.000 38524.000 39632.000 
query 4 nn's (6, 6): 416604 (6) 371420 (6) 368246 (6) 403978 (6) 59308 (6) 755045 (6) 81533 (6) 151654 (6) 279356 (6) 548521 (6) 
     dis: 	55814.000 56914.000 57046.000 59193.000 60042.000 60354.000 60485.000 61768.000 61829.000 61937.000 
[ 19.253s ] *** Query time: 11.107
qps: 900.341
 *** HNSW recall 
HNSW get 99508 postive res from 100000 results, recall@10:0.995
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.004 0.041 0.955 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46872908, average: 4687.291
finished ivfpq index examples
[ 19.257s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000 100 128"
	User time (seconds): 17.98
	System time (seconds): 1.12
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:19.35
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 279932
	Voluntary context switches: 1
	Involuntary context switches: 70
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:08
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/attr_sel_1_500_random_7.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_7_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.076s ] Loaded attributions, 1000000 found
[ 0.077s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.077s ] Loading database
[ 0.404s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.404s ] Indexing database, size 1000000*128 from max 1000000
[ 0.404s ] Adding the vectors to the index
index construction cost:87.079
[ 87.079s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 87.563s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_7_40_1000
[87.563 s] -----DONE-----
[ 87.563s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/attr_sel_1_500_random_7.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_7_40_1000 128 40 1000"
	User time (seconds): 9269.82
	System time (seconds): 28.06
	Percent of CPU this job got: 10605%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:27.66
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1480952
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1751447
	Voluntary context switches: 8743
	Involuntary context switches: 448257
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656456
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:31
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/attr_sel_1_500_random_7.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/qrangesel_1_1_500_random_7.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/sif_gt_sel_1_1_500_random_7_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_7_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/attr_sel_1_500_random_7.json
[ 0.105s ] Loaded metadata, 1000000 attr's found
[ 0.105s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.109s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.111s ] Loaded 10000 sift1M queries
[ 0.123s ] Loaded ground truth, gt_size: 10
[ 0.123s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.871s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.400
[ 17.700s ] Query results (vector ids, then distances):
query 0 nn's (7, 7): 932085 (7) 435345 (7) 455537 (7) 893601 (7) 565419 (7) 36267 (7) 454263 (7) 886630 (7) 68299 (7) 779712 (7) 
     dis: 	54229.000 68247.000 71441.000 74016.000 75634.000 76583.000 76664.000 77660.000 77917.000 78092.000 
query 1 nn's (7, 7): 413247 (7) 400194 (7) 941776 (7) 833054 (7) 849742 (7) 987215 (7) 832927 (7) 20845 (7) 948375 (7) 266890 (7) 
     dis: 	51187.000 55595.000 57646.000 58464.000 59323.000 59904.000 60029.000 60053.000 60673.000 60695.000 
query 2 nn's (7, 7): 551743 (7) 239766 (7) 823095 (7) 900097 (7) 906773 (7) 401804 (7) 905339 (7) 69035 (7) 744548 (7) 736302 (7) 
     dis: 	36325.000 36631.000 37621.000 38137.000 39266.000 39297.000 39308.000 39400.000 40014.000 40215.000 
query 3 nn's (7, 7): 48044 (7) 546470 (7) 123985 (7) 832999 (7) 190621 (7) 443320 (7) 993773 (7) 919152 (7) 546767 (7) 899013 (7) 
     dis: 	32777.000 35734.000 36107.000 36743.000 38013.000 38260.000 39153.000 39212.000 39632.000 39632.000 
query 4 nn's (7, 7): 340871 (7) 716433 (7) 107281 (7) 371420 (7) 368246 (7) 279082 (7) 340288 (7) 953387 (7) 491554 (7) 807785 (7) 
     dis: 	45914.000 52559.000 54643.000 56914.000 57046.000 57527.000 57968.000 58065.000 58390.000 58908.000 
[ 17.700s ] *** Query time: 10.829
qps: 923.456
 *** HNSW recall 
HNSW get 99404 postive res from 100000 results, recall@10:0.994
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.005 0.047 0.947 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46848654, average: 4684.865
finished ivfpq index examples
[ 17.700s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/attr_sel_1_500_random_7.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/qrangesel_1_1_500_random_7.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_7/sif_gt_sel_1_1_500_random_7_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_7_40_1000 100 128"
	User time (seconds): 16.37
	System time (seconds): 1.32
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:17.78
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 354546
	Voluntary context switches: 1
	Involuntary context switches: 41
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:44
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/attr_sel_1_500_random_8.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_8_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.069s ] Loaded attributions, 1000000 found
[ 0.069s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.069s ] Loading database
[ 0.390s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.390s ] Indexing database, size 1000000*128 from max 1000000
[ 0.390s ] Adding the vectors to the index
index construction cost:90.777
[ 90.778s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 91.260s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_8_40_1000
[91.260 s] -----DONE-----
[ 91.260s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/attr_sel_1_500_random_8.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_8_40_1000 128 40 1000"
	User time (seconds): 9064.30
	System time (seconds): 27.37
	Percent of CPU this job got: 9951%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:31.36
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1479912
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1724471
	Voluntary context switches: 8779
	Involuntary context switches: 438341
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:08
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/attr_sel_1_500_random_8.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/qrangesel_1_1_500_random_8.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/sif_gt_sel_1_1_500_random_8_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_8_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/attr_sel_1_500_random_8.json
[ 0.135s ] Loaded metadata, 1000000 attr's found
[ 0.135s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.139s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.141s ] Loaded 10000 sift1M queries
[ 0.155s ] Loaded ground truth, gt_size: 10
[ 0.155s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.947s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.300
[ 17.416s ] Query results (vector ids, then distances):
query 0 nn's (8, 8): 934876 (8) 36538 (8) 562594 (8) 619660 (8) 568573 (8) 565814 (8) 722642 (8) 843384 (8) 68299 (8) 721706 (8) 
     dis: 	55091.000 73344.000 73537.000 74356.000 75944.000 76051.000 77587.000 77588.000 77917.000 78655.000 
query 1 nn's (8, 8): 413247 (8) 249062 (8) 942339 (8) 880462 (8) 192537 (8) 517923 (8) 976547 (8) 974985 (8) 980027 (8) 987696 (8) 
     dis: 	51187.000 55586.000 56239.000 56396.000 59720.000 61150.000 61167.000 61333.000 62444.000 62680.000 
query 2 nn's (8, 8): 406273 (8) 406324 (8) 402106 (8) 239766 (8) 527380 (8) 306132 (8) 401804 (8) 905339 (8) 311367 (8) 678042 (8) 
     dis: 	36048.000 36225.000 36458.000 36631.000 38696.000 39154.000 39297.000 39308.000 39874.000 39953.000 
query 3 nn's (8, 8): 125539 (8) 48044 (8) 191115 (8) 546470 (8) 207768 (8) 191317 (8) 443320 (8) 722075 (8) 919152 (8) 546766 (8) 
     dis: 	30863.000 32777.000 34876.000 35734.000 36229.000 37275.000 38260.000 38524.000 39212.000 39814.000 
query 4 nn's (8, 8): 107281 (8) 807785 (8) 403978 (8) 549505 (8) 81533 (8) 278744 (8) 151654 (8) 279356 (8) 110691 (8) 4719 (8) 
     dis: 	54643.000 58908.000 59193.000 59638.000 60485.000 61604.000 61768.000 61829.000 62166.000 62755.000 
[ 17.416s ] *** Query time: 9.691
qps: 1031.922
 *** HNSW recall 
HNSW get 99200 postive res from 100000 results, recall@10:0.992
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.009 0.060 0.930 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46875755, average: 4687.575
finished ivfpq index examples
[ 17.417s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/attr_sel_1_500_random_8.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/qrangesel_1_1_500_random_8.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_8/sif_gt_sel_1_1_500_random_8_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_8_40_1000 100 128"
	User time (seconds): 16.45
	System time (seconds): 0.84
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:17.48
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 851612
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212127
	Voluntary context switches: 2
	Involuntary context switches: 51
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:21
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/attr_sel_1_500_random_9.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_9_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.068s ] Loaded attributions, 1000000 found
[ 0.068s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.068s ] Loading database
[ 0.418s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.418s ] Indexing database, size 1000000*128 from max 1000000
[ 0.418s ] Adding the vectors to the index
index construction cost:90.029
[ 90.029s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 90.499s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_9_40_1000
[90.500 s] -----DONE-----
[ 90.500s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/attr_sel_1_500_random_9.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_9_40_1000 128 40 1000"
	User time (seconds): 8851.28
	System time (seconds): 28.21
	Percent of CPU this job got: 9799%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:30.60
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1481660
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1758578
	Voluntary context switches: 7714
	Involuntary context switches: 495908
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:44
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/attr_sel_1_500_random_9.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/qrangesel_1_1_500_random_9.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/sif_gt_sel_1_1_500_random_9_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_9_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/attr_sel_1_500_random_9.json
[ 0.069s ] Loaded metadata, 1000000 attr's found
[ 0.069s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.073s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.075s ] Loaded 10000 sift1M queries
[ 0.082s ] Loaded ground truth, gt_size: 10
[ 0.082s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.715s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.200
[ 16.689s ] Query results (vector ids, then distances):
query 0 nn's (9, 9): 934876 (9) 561813 (9) 435345 (9) 36538 (9) 600499 (9) 893601 (9) 49874 (9) 480497 (9) 619829 (9) 87578 (9) 
     dis: 	55091.000 59531.000 68247.000 73344.000 73793.000 74016.000 78889.000 79223.000 79309.000 79874.000 
query 1 nn's (9, 9): 706838 (9) 400194 (9) 833054 (9) 202612 (9) 731804 (9) 541805 (9) 480949 (9) 14836 (9) 239335 (9) 250786 (9) 
     dis: 	54813.000 55595.000 58464.000 60695.000 61798.000 62878.000 62997.000 63289.000 63331.000 63393.000 
query 2 nn's (9, 9): 408462 (9) 861882 (9) 69035 (9) 778799 (9) 150588 (9) 695462 (9) 467531 (9) 392607 (9) 778663 (9) 23781 (9) 
     dis: 	33608.000 35704.000 39400.000 39616.000 39984.000 40907.000 41931.000 42706.000 43368.000 43670.000 
query 3 nn's (9, 9): 970797 (9) 48044 (9) 191317 (9) 855554 (9) 191092 (9) 81001 (9) 190895 (9) 81147 (9) 768705 (9) 852240 (9) 
     dis: 	30510.000 32777.000 37275.000 38019.000 40234.000 42181.000 42699.000 42747.000 42781.000 43386.000 
query 4 nn's (9, 9): 175336 (9) 716433 (9) 107281 (9) 491554 (9) 81533 (9) 110691 (9) 30116 (9) 533494 (9) 123410 (9) 242102 (9) 
     dis: 	48199.000 52559.000 54643.000 58390.000 60485.000 62166.000 63010.000 63255.000 65209.000 66712.000 
[ 16.689s ] *** Query time: 9.528
qps: 1049.488
 *** HNSW recall 
HNSW get 98767 postive res from 100000 results, recall@10:0.988
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.011 0.094 0.892 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46854768, average: 4685.477
finished ivfpq index examples
[ 16.693s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/attr_sel_1_500_random_9.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/qrangesel_1_1_500_random_9.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_9/sif_gt_sel_1_1_500_random_9_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_9_40_1000 100 128"
	User time (seconds): 15.63
	System time (seconds): 0.74
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:16.78
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 214407
	Voluntary context switches: 1
	Involuntary context switches: 108
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:55
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.072s ] Loaded attributions, 1000000 found
[ 0.072s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.072s ] Loading database
[ 0.393s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.393s ] Indexing database, size 1000000*128 from max 1000000
[ 0.393s ] Adding the vectors to the index
index construction cost:86.803
[ 86.803s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 87.294s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000
[87.294 s] -----DONE-----
[ 87.294s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000 128 40 1000"
	User time (seconds): 8776.76
	System time (seconds): 22.76
	Percent of CPU this job got: 10068%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:27.39
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1476924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1449493
	Voluntary context switches: 6291
	Involuntary context switches: 462730
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656456
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:18
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 0.105s ] Loaded metadata, 1000000 attr's found
[ 0.105s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.109s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.111s ] Loaded 10000 sift1M queries
[ 0.123s ] Loaded ground truth, gt_size: 10
[ 0.123s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.872s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 18.235s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 910119 (10) 871066 (10) 87578 (10) 225116 (10) 544275 (10) 899809 (10) 732473 (10) 989762 (10) 813701 (10) 570366 (10) 
     dis: 	77564.000 78324.000 79874.000 80639.000 81883.000 81969.000 82401.000 83466.000 83875.000 84080.000 
query 1 nn's (10, 10): 941776 (10) 731804 (10) 122309 (10) 522078 (10) 956542 (10) 395932 (10) 253083 (10) 538688 (10) 815172 (10) 526945 (10) 
     dis: 	57646.000 61798.000 62769.000 63234.000 64382.000 64664.000 65838.000 66780.000 66835.000 66949.000 
query 2 nn's (10, 10): 527380 (10) 906773 (10) 62269 (10) 260648 (10) 746345 (10) 227807 (10) 331338 (10) 310475 (10) 277836 (10) 929985 (10) 
     dis: 	38696.000 39266.000 39826.000 41196.000 44613.000 45049.000 45445.000 45762.000 45878.000 46938.000 
query 3 nn's (10, 10): 546767 (10) 886001 (10) 885710 (10) 768705 (10) 609251 (10) 681907 (10) 994263 (10) 848283 (10) 190979 (10) 190642 (10) 
     dis: 	39632.000 41953.000 42655.000 42781.000 42882.000 42925.000 43074.000 43126.000 44394.000 44707.000 
query 4 nn's (10, 10): 416604 (10) 201628 (10) 293118 (10) 236863 (10) 997836 (10) 322138 (10) 105778 (10) 866737 (10) 279725 (10) 535320 (10) 
     dis: 	55814.000 64201.000 64286.000 64330.000 64352.000 64927.000 65039.000 65302.000 66263.000 66543.000 
[ 18.235s ] *** Query time: 10.702
qps: 934.417
 *** HNSW recall 
HNSW get 97452 postive res from 100000 results, recall@10:0.975
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.006 0.035 0.165 0.794 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46868218, average: 4686.822
finished ivfpq index examples
[ 18.238s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000 100 128"
	User time (seconds): 17.03
	System time (seconds): 1.10
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:18.31
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853916
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 279072
	Voluntary context switches: 0
	Involuntary context switches: 90
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:29
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/attr_sel_1_500_random_11.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_11_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.070s ] Loaded attributions, 1000000 found
[ 0.070s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.070s ] Loading database
[ 0.395s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.396s ] Indexing database, size 1000000*128 from max 1000000
[ 0.396s ] Adding the vectors to the index
index construction cost:89.183
[ 89.183s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 89.661s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_11_40_1000
[89.661 s] -----DONE-----
[ 89.661s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/attr_sel_1_500_random_11.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_11_40_1000 128 40 1000"
	User time (seconds): 8641.53
	System time (seconds): 24.63
	Percent of CPU this job got: 9654%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:29.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1481664
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1684510
	Voluntary context switches: 7221
	Involuntary context switches: 478030
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656464
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:51
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/attr_sel_1_500_random_11.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/qrangesel_1_1_500_random_11.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/sif_gt_sel_1_1_500_random_11_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_11_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/attr_sel_1_500_random_11.json
[ 0.105s ] Loaded metadata, 1000000 attr's found
[ 0.105s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.109s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.111s ] Loaded 10000 sift1M queries
[ 0.123s ] Loaded ground truth, gt_size: 10
[ 0.123s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.840s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.090
[ 18.087s ] Query results (vector ids, then distances):
query 0 nn's (11, 11): 908244 (11) 893601 (11) 236647 (11) 886630 (11) 721706 (11) 886222 (11) 478814 (11) 102903 (11) 882961 (11) 486457 (11) 
     dis: 	73581.000 74016.000 75704.000 77660.000 78655.000 78912.000 80543.000 81069.000 81991.000 82210.000 
query 1 nn's (11, 11): 987636 (11) 208391 (11) 271353 (11) 20845 (11) 395932 (11) 196686 (11) 741996 (11) 739835 (11) 856841 (11) 931691 (11) 
     dis: 	56785.000 59679.000 59720.000 60053.000 64664.000 65338.000 65479.000 65572.000 67178.000 67716.000 
query 2 nn's (11, 11): 669835 (11) 551661 (11) 402106 (11) 527380 (11) 62269 (11) 695462 (11) 534822 (11) 716686 (11) 370619 (11) 299884 (11) 
     dis: 	30792.000 34698.000 36458.000 38696.000 39826.000 40907.000 41204.000 41511.000 43940.000 44243.000 
query 3 nn's (11, 11): 123985 (11) 832999 (11) 907380 (11) 885741 (11) 852354 (11) 81147 (11) 889896 (11) 708739 (11) 930433 (11) 852240 (11) 
     dis: 	36107.000 36743.000 39157.000 39790.000 41638.000 42747.000 43139.000 43313.000 43360.000 43386.000 
query 4 nn's (11, 11): 748397 (11) 112586 (11) 279095 (11) 265906 (11) 713777 (11) 720273 (11) 5164 (11) 780441 (11) 306702 (11) 372151 (11) 
     dis: 	47367.000 53980.000 62409.000 64201.000 65320.000 65489.000 66326.000 66440.000 66598.000 67289.000 
[ 18.088s ] *** Query time: 10.585
qps: 944.702
 *** HNSW recall 
HNSW get 97071 postive res from 100000 results, recall@10:0.971
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.007 0.041 0.182 0.768 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46830807, average: 4683.081
finished ivfpq index examples
[ 18.091s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/attr_sel_1_500_random_11.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/qrangesel_1_1_500_random_11.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_11/sif_gt_sel_1_1_500_random_11_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_11_40_1000 100 128"
	User time (seconds): 17.15
	System time (seconds): 0.83
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:18.20
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 214409
	Voluntary context switches: 1
	Involuntary context switches: 57
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:02
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/attr_sel_1_500_random_12.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_12_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.073s ] Loaded attributions, 1000000 found
[ 0.073s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.073s ] Loading database
[ 0.390s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.390s ] Indexing database, size 1000000*128 from max 1000000
[ 0.390s ] Adding the vectors to the index
index construction cost:89.389
[ 89.389s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 89.893s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_12_40_1000
[89.893 s] -----DONE-----
[ 89.893s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/attr_sel_1_500_random_12.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_12_40_1000 128 40 1000"
	User time (seconds): 8950.48
	System time (seconds): 27.07
	Percent of CPU this job got: 9974%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:30.00
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1484736
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1686803
	Voluntary context switches: 8489
	Involuntary context switches: 474898
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656456
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:24
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/attr_sel_1_500_random_12.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/qrangesel_1_1_500_random_12.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/sif_gt_sel_1_1_500_random_12_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_12_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/attr_sel_1_500_random_12.json
[ 0.105s ] Loaded metadata, 1000000 attr's found
[ 0.105s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.108s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.110s ] Loaded 10000 sift1M queries
[ 0.122s ] Loaded ground truth, gt_size: 10
[ 0.122s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.760s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.080
[ 14.324s ] Query results (vector ids, then distances):
query 0 nn's (12, 12): 934876 (12) 619660 (12) 886630 (12) 68299 (12) 779712 (12) 478814 (12) 860056 (12) 486457 (12) 361496 (12) 882943 (12) 
     dis: 	55091.000 74356.000 77660.000 77917.000 78092.000 80543.000 82023.000 82210.000 84075.000 85654.000 
query 1 nn's (12, 12): 248426 (12) 208391 (12) 14836 (12) 411149 (12) 275502 (12) 993635 (12) 846198 (12) 9574 (12) 802330 (12) 678602 (12) 
     dis: 	58741.000 59679.000 63289.000 65267.000 65338.000 65914.000 66574.000 67555.000 67697.000 68393.000 
query 2 nn's (12, 12): 230295 (12) 23781 (12) 139967 (12) 960494 (12) 746345 (12) 861555 (12) 275762 (12) 398521 (12) 769053 (12) 851856 (12) 
     dis: 	40331.000 43670.000 44289.000 44550.000 44613.000 45134.000 46248.000 46278.000 46507.000 48082.000 
query 3 nn's (12, 12): 191317 (12) 855554 (12) 190630 (12) 857203 (12) 941084 (12) 190996 (12) 13832 (12) 830786 (12) 960672 (12) 843496 (12) 
     dis: 	37275.000 38019.000 40280.000 40672.000 41374.000 42676.000 44245.000 45213.000 45699.000 46140.000 
query 4 nn's (12, 12): 953387 (12) 151654 (12) 30116 (12) 358802 (12) 106921 (12) 441587 (12) 432653 (12) 1538 (12) 363689 (12) 816555 (12) 
     dis: 	58065.000 61768.000 63010.000 64754.000 65432.000 66692.000 68665.000 71437.000 71867.000 71916.000 
[ 14.324s ] *** Query time: 7.890
qps: 1267.487
 *** HNSW recall 
HNSW get 96441 postive res from 100000 results, recall@10:0.964
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.011 0.055 0.206 0.726 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46873747, average: 4687.375
finished ivfpq index examples
[ 14.325s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/attr_sel_1_500_random_12.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/qrangesel_1_1_500_random_12.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_12/sif_gt_sel_1_1_500_random_12_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_12_40_1000 100 128"
	User time (seconds): 13.64
	System time (seconds): 0.75
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:14.41
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212045
	Voluntary context switches: 1
	Involuntary context switches: 22
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:34
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/attr_sel_1_500_random_13.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_13_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.072s ] Loaded attributions, 1000000 found
[ 0.072s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.072s ] Loading database
[ 0.391s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.391s ] Indexing database, size 1000000*128 from max 1000000
[ 0.391s ] Adding the vectors to the index
index construction cost:88.133
[ 88.133s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 88.607s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_13_40_1000
[88.607 s] -----DONE-----
[ 88.607s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/attr_sel_1_500_random_13.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_13_40_1000 128 40 1000"
	User time (seconds): 9075.86
	System time (seconds): 29.58
	Percent of CPU this job got: 10264%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:28.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1481664
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1793836
	Voluntary context switches: 9043
	Involuntary context switches: 472442
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656456
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:57
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/attr_sel_1_500_random_13.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/qrangesel_1_1_500_random_13.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/sif_gt_sel_1_1_500_random_13_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_13_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/attr_sel_1_500_random_13.json
[ 0.070s ] Loaded metadata, 1000000 attr's found
[ 0.070s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.073s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.075s ] Loaded 10000 sift1M queries
[ 0.082s ] Loaded ground truth, gt_size: 10
[ 0.082s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.760s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.070
[ 17.935s ] Query results (vector ids, then distances):
query 0 nn's (13, 13): 957845 (13) 806773 (13) 463781 (13) 670103 (13) 656997 (13) 12840 (13) 933949 (13) 985197 (13) 843563 (13) 86760 (13) 
     dis: 	81399.000 82672.000 82947.000 83576.000 83646.000 84979.000 84986.000 85705.000 87019.000 87816.000 
query 1 nn's (13, 13): 192537 (13) 517923 (13) 766416 (13) 522078 (13) 250786 (13) 913942 (13) 2781 (13) 987074 (13) 876870 (13) 883341 (13) 
     dis: 	59720.000 61150.000 62602.000 63234.000 63393.000 65508.000 65973.000 66681.000 68350.000 68664.000 
query 2 nn's (13, 13): 408462 (13) 900097 (13) 889222 (13) 742474 (13) 669812 (13) 518868 (13) 577672 (13) 398521 (13) 129969 (13) 300888 (13) 
     dis: 	33608.000 38137.000 43287.000 44028.000 44351.000 44922.000 45413.000 46278.000 47169.000 47279.000 
query 3 nn's (13, 13): 970797 (13) 48044 (13) 191115 (13) 546470 (13) 190630 (13) 102152 (13) 190642 (13) 969106 (13) 310401 (13) 830786 (13) 
     dis: 	30510.000 32777.000 34876.000 35734.000 40280.000 43008.000 44707.000 45038.000 45060.000 45213.000 
query 4 nn's (13, 13): 340288 (13) 549359 (13) 151654 (13) 123410 (13) 495449 (13) 629243 (13) 337011 (13) 466909 (13) 787394 (13) 389838 (13) 
     dis: 	57968.000 60779.000 61768.000 65209.000 67581.000 68392.000 68818.000 69172.000 71112.000 71867.000 
[ 17.935s ] *** Query time: 9.715
qps: 1029.319
 *** HNSW recall 
HNSW get 95959 postive res from 100000 results, recall@10:0.960
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.003 0.016 0.060 0.222 0.699 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46827114, average: 4682.711
finished ivfpq index examples
[ 17.936s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/attr_sel_1_500_random_13.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/qrangesel_1_1_500_random_13.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_13/sif_gt_sel_1_1_500_random_13_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_13_40_1000 100 128"
	User time (seconds): 16.76
	System time (seconds): 0.76
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:18.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 213815
	Voluntary context switches: 1
	Involuntary context switches: 88
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:08
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/attr_sel_1_500_random_14.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_14_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.067s ] Loaded attributions, 1000000 found
[ 0.067s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.067s ] Loading database
[ 0.421s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.422s ] Indexing database, size 1000000*128 from max 1000000
[ 0.422s ] Adding the vectors to the index
index construction cost:83.681
[ 83.681s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 84.169s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_14_40_1000
[84.169 s] -----DONE-----
[ 84.169s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/attr_sel_1_500_random_14.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_14_40_1000 128 40 1000"
	User time (seconds): 8458.41
	System time (seconds): 29.74
	Percent of CPU this job got: 10071%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:24.27
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1476644
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1792449
	Voluntary context switches: 9103
	Involuntary context switches: 513158
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:31
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/attr_sel_1_500_random_14.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/qrangesel_1_1_500_random_14.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/sif_gt_sel_1_1_500_random_14_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_14_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/attr_sel_1_500_random_14.json
[ 0.073s ] Loaded metadata, 1000000 attr's found
[ 0.073s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.076s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.078s ] Loaded 10000 sift1M queries
[ 0.085s ] Loaded ground truth, gt_size: 10
[ 0.085s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.685s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.060
[ 15.253s ] Query results (vector ids, then distances):
query 0 nn's (14, 14): 988166 (14) 732473 (14) 931855 (14) 929921 (14) 956632 (14) 61061 (14) 206901 (14) 868610 (14) 839745 (14) 772327 (14) 
     dis: 	81999.000 82401.000 84617.000 84923.000 87780.000 88419.000 88753.000 89259.000 89830.000 89990.000 
query 1 nn's (14, 14): 706838 (14) 833054 (14) 679280 (14) 973155 (14) 955909 (14) 63444 (14) 214320 (14) 753843 (14) 15096 (14) 13549 (14) 
     dis: 	54813.000 58464.000 67384.000 67756.000 68636.000 69191.000 69372.000 69765.000 70321.000 70705.000 
query 2 nn's (14, 14): 431595 (14) 260648 (14) 889222 (14) 104121 (14) 577672 (14) 516925 (14) 940565 (14) 398521 (14) 301460 (14) 926335 (14) 
     dis: 	38236.000 41196.000 43287.000 43289.000 45413.000 45537.000 46193.000 46278.000 46629.000 47776.000 
query 3 nn's (14, 14): 190621 (14) 956544 (14) 102152 (14) 930433 (14) 443513 (14) 855019 (14) 984374 (14) 889047 (14) 983490 (14) 124334 (14) 
     dis: 	38013.000 42167.000 43008.000 43360.000 43463.000 44293.000 45216.000 45744.000 45982.000 46039.000 
query 4 nn's (14, 14): 491554 (14) 30116 (14) 533494 (14) 305983 (14) 265906 (14) 293118 (14) 279883 (14) 115897 (14) 220557 (14) 496866 (14) 
     dis: 	58390.000 63010.000 63255.000 63776.000 64201.000 64286.000 66242.000 66461.000 68559.000 69270.000 
[ 15.253s ] *** Query time: 9.005
qps: 1110.489
 *** HNSW recall 
HNSW get 95141 postive res from 100000 results, recall@10:0.951
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.004 0.021 0.077 0.246 0.650 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46859743, average: 4685.974
finished ivfpq index examples
[ 15.253s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/attr_sel_1_500_random_14.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/qrangesel_1_1_500_random_14.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_14/sif_gt_sel_1_1_500_random_14_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_14_40_1000 100 128"
	User time (seconds): 14.44
	System time (seconds): 0.70
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:15.35
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853916
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212113
	Voluntary context switches: 1
	Involuntary context switches: 82
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:41
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/attr_sel_1_500_random_15.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_15_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.067s ] Loaded attributions, 1000000 found
[ 0.067s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.067s ] Loading database
[ 0.390s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.390s ] Indexing database, size 1000000*128 from max 1000000
[ 0.390s ] Adding the vectors to the index
index construction cost:89.896
[ 89.896s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 90.392s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_15_40_1000
[90.392 s] -----DONE-----
[ 90.392s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/attr_sel_1_500_random_15.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_15_40_1000 128 40 1000"
	User time (seconds): 9110.88
	System time (seconds): 30.51
	Percent of CPU this job got: 10101%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:30.49
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1483692
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1837836
	Voluntary context switches: 8375
	Involuntary context switches: 537901
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:04
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/attr_sel_1_500_random_15.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/qrangesel_1_1_500_random_15.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/sif_gt_sel_1_1_500_random_15_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_15_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/attr_sel_1_500_random_15.json
[ 0.126s ] Loaded metadata, 1000000 attr's found
[ 0.126s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.131s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.134s ] Loaded 10000 sift1M queries
[ 0.146s ] Loaded ground truth, gt_size: 10
[ 0.146s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.876s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.050
[ 14.457s ] Query results (vector ids, then distances):
query 0 nn's (15, 15): 708177 (15) 49874 (15) 619829 (15) 463781 (15) 670103 (15) 813701 (15) 831924 (15) 554637 (15) 16155 (15) 843447 (15) 
     dis: 	65260.000 78889.000 79309.000 82947.000 83576.000 83875.000 88266.000 88288.000 88943.000 89334.000 
query 1 nn's (15, 15): 249062 (15) 833335 (15) 122309 (15) 541805 (15) 885995 (15) 905997 (15) 844161 (15) 698237 (15) 99235 (15) 885692 (15) 
     dis: 	55586.000 61296.000 62769.000 62878.000 66865.000 67911.000 68294.000 68408.000 68971.000 69036.000 
query 2 nn's (15, 15): 408855 (15) 900097 (15) 762362 (15) 742644 (15) 251341 (15) 669805 (15) 369936 (15) 306242 (15) 197078 (15) 103315 (15) 
     dis: 	34104.000 38137.000 42544.000 42628.000 48797.000 48807.000 48885.000 49024.000 50116.000 50183.000 
query 3 nn's (15, 15): 190728 (15) 807831 (15) 190645 (15) 960672 (15) 885692 (15) 703409 (15) 996895 (15) 190986 (15) 867667 (15) 618624 (15) 
     dis: 	39892.000 44482.000 45155.000 45699.000 46360.000 48003.000 49406.000 49832.000 51033.000 53775.000 
query 4 nn's (15, 15): 279356 (15) 30116 (15) 292815 (15) 280705 (15) 372151 (15) 351068 (15) 356787 (15) 305618 (15) 728481 (15) 58849 (15) 
     dis: 	61829.000 63010.000 65771.000 66487.000 67289.000 68766.000 69333.000 69418.000 69788.000 70321.000 
[ 14.457s ] *** Query time: 7.935
qps: 1260.296
 *** HNSW recall 
HNSW get 93895 postive res from 100000 results, recall@10:0.939
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.008 0.030 0.098 0.283 0.579 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46908957, average: 4690.896
finished ivfpq index examples
[ 14.458s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/attr_sel_1_500_random_15.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/qrangesel_1_1_500_random_15.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_15/sif_gt_sel_1_1_500_random_15_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_15_40_1000 100 128"
	User time (seconds): 13.29
	System time (seconds): 0.79
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:14.52
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212046
	Voluntary context switches: 1
	Involuntary context switches: 78
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:15
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/attr_sel_1_500_random_16.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_16_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.069s ] Loaded attributions, 1000000 found
[ 0.069s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.069s ] Loading database
[ 0.395s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.395s ] Indexing database, size 1000000*128 from max 1000000
[ 0.395s ] Adding the vectors to the index
index construction cost:88.216
[ 88.216s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 88.696s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_16_40_1000
[88.696 s] -----DONE-----
[ 88.696s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/attr_sel_1_500_random_16.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_16_40_1000 128 40 1000"
	User time (seconds): 8990.98
	System time (seconds): 28.14
	Percent of CPU this job got: 10155%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:28.81
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1482688
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1747420
	Voluntary context switches: 8482
	Involuntary context switches: 479777
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656456
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:38
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/attr_sel_1_500_random_16.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/qrangesel_1_1_500_random_16.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/sif_gt_sel_1_1_500_random_16_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_16_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/attr_sel_1_500_random_16.json
[ 0.143s ] Loaded metadata, 1000000 attr's found
[ 0.143s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.147s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.150s ] Loaded 10000 sift1M queries
[ 0.166s ] Loaded ground truth, gt_size: 10
[ 0.166s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.913s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.040
[ 16.871s ] Query results (vector ids, then distances):
query 0 nn's (16, 16): 746931 (16) 565419 (16) 678385 (16) 931721 (16) 871600 (16) 929921 (16) 985197 (16) 586295 (16) 13995 (16) 883696 (16) 
     dis: 	75554.000 75634.000 83079.000 83415.000 83748.000 84923.000 85705.000 85742.000 86127.000 87944.000 
query 1 nn's (16, 16): 271353 (16) 832927 (16) 71819 (16) 406020 (16) 723098 (16) 142502 (16) 735648 (16) 862291 (16) 923513 (16) 214299 (16) 
     dis: 	59720.000 60029.000 61982.000 63621.000 66853.000 68788.000 70736.000 70825.000 71037.000 71172.000 
query 2 nn's (16, 16): 678042 (16) 370467 (16) 199020 (16) 929798 (16) 80543 (16) 965346 (16) 717527 (16) 953237 (16) 806888 (16) 111210 (16) 
     dis: 	39953.000 44778.000 45878.000 49693.000 50258.000 51567.000 52195.000 52726.000 52856.000 53461.000 
query 3 nn's (16, 16): 857203 (16) 956544 (16) 190895 (16) 885894 (16) 443325 (16) 191158 (16) 542306 (16) 996910 (16) 947569 (16) 931773 (16) 
     dis: 	40672.000 42167.000 42699.000 44492.000 44708.000 45168.000 49506.000 49739.000 51915.000 52243.000 
query 4 nn's (16, 16): 278801 (16) 236863 (16) 358802 (16) 547650 (16) 518246 (16) 566666 (16) 725319 (16) 120789 (16) 170741 (16) 518472 (16) 
     dis: 	62620.000 64330.000 64754.000 66128.000 69001.000 69312.000 69396.000 71570.000 72514.000 73066.000 
[ 16.871s ] *** Query time: 8.631
qps: 1158.679
 *** HNSW recall 
HNSW get 92216 postive res from 100000 results, recall@10:0.922
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.011 0.044 0.138 0.311 0.493 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46860855, average: 4686.086
finished ivfpq index examples
[ 16.871s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/attr_sel_1_500_random_16.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/qrangesel_1_1_500_random_16.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_16/sif_gt_sel_1_1_500_random_16_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_16_40_1000 100 128"
	User time (seconds): 16.03
	System time (seconds): 0.82
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:16.93
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853916
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212053
	Voluntary context switches: 1
	Involuntary context switches: 58
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:49
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/attr_sel_1_500_random_17.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_17_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.073s ] Loaded attributions, 1000000 found
[ 0.073s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.073s ] Loading database
[ 0.439s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.440s ] Indexing database, size 1000000*128 from max 1000000
[ 0.440s ] Adding the vectors to the index
index construction cost:104.946
[ 104.946s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 105.452s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_17_40_1000
[105.452 s] -----DONE-----
[ 105.452s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/attr_sel_1_500_random_17.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_17_40_1000 128 40 1000"
	User time (seconds): 7721.85
	System time (seconds): 22.52
	Percent of CPU this job got: 7336%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:45.55
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1479612
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1666305
	Voluntary context switches: 7069
	Involuntary context switches: 1013783
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:12
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/attr_sel_1_500_random_17.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/qrangesel_1_1_500_random_17.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/sif_gt_sel_1_1_500_random_17_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_17_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/attr_sel_1_500_random_17.json
[ 0.105s ] Loaded metadata, 1000000 attr's found
[ 0.105s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.108s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.110s ] Loaded 10000 sift1M queries
[ 0.122s ] Loaded ground truth, gt_size: 10
[ 0.122s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.879s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.030
[ 17.859s ] Query results (vector ids, then distances):
query 0 nn's (17, 17): 872728 (17) 701919 (17) 541845 (17) 394507 (17) 989762 (17) 813701 (17) 839679 (17) 15295 (17) 833796 (17) 308335 (17) 
     dis: 	71861.000 79508.000 80761.000 82181.000 83466.000 83875.000 83911.000 91519.000 91577.000 91894.000 
query 1 nn's (17, 17): 974985 (17) 522482 (17) 269046 (17) 990316 (17) 210769 (17) 990877 (17) 795440 (17) 931884 (17) 852939 (17) 411241 (17) 
     dis: 	61333.000 64822.000 72130.000 73123.000 73349.000 73545.000 74290.000 74452.000 74617.000 74840.000 
query 2 nn's (17, 17): 716686 (17) 275138 (17) 68761 (17) 218142 (17) 792663 (17) 655461 (17) 689954 (17) 883298 (17) 977403 (17) 217597 (17) 
     dis: 	41511.000 48108.000 49488.000 50054.000 50213.000 50249.000 51125.000 51226.000 51919.000 54671.000 
query 3 nn's (17, 17): 190630 (17) 857203 (17) 889896 (17) 190642 (17) 886122 (17) 191297 (17) 855361 (17) 560867 (17) 757585 (17) 841652 (17) 
     dis: 	40280.000 40672.000 43139.000 44707.000 44790.000 45744.000 49051.000 49423.000 50972.000 51548.000 
query 4 nn's (17, 17): 410876 (17) 325164 (17) 153534 (17) 403256 (17) 122359 (17) 434341 (17) 698240 (17) 342055 (17) 281841 (17) 495377 (17) 
     dis: 	68760.000 72977.000 75285.000 76960.000 77153.000 77690.000 77876.000 78251.000 78960.000 80779.000 
[ 17.859s ] *** Query time: 10.009
qps: 999.054
 *** HNSW recall 
HNSW get 89487 postive res from 100000 results, recall@10:0.895
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.002 0.006 0.025 0.071 0.179 0.337 0.380 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46878336, average: 4687.834
finished ivfpq index examples
[ 17.860s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/attr_sel_1_500_random_17.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/qrangesel_1_1_500_random_17.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_17/sif_gt_sel_1_1_500_random_17_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_17_40_1000 100 128"
	User time (seconds): 16.66
	System time (seconds): 0.83
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:17.92
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212046
	Voluntary context switches: 1
	Involuntary context switches: 91
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:23
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/attr_sel_1_500_random_18.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_18_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.068s ] Loaded attributions, 1000000 found
[ 0.068s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.068s ] Loading database
[ 0.383s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.383s ] Indexing database, size 1000000*128 from max 1000000
[ 0.383s ] Adding the vectors to the index
index construction cost:107.647
[ 107.647s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 108.189s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_18_40_1000
[108.189 s] -----DONE-----
[ 108.189s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/attr_sel_1_500_random_18.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_18_40_1000 128 40 1000"
	User time (seconds): 8035.40
	System time (seconds): 20.85
	Percent of CPU this job got: 7439%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:48.28
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1481660
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1713372
	Voluntary context switches: 4818
	Involuntary context switches: 971877
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:46
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/attr_sel_1_500_random_18.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/qrangesel_1_1_500_random_18.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/sif_gt_sel_1_1_500_random_18_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_18_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/attr_sel_1_500_random_18.json
[ 0.142s ] Loaded metadata, 1000000 attr's found
[ 0.142s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.146s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.149s ] Loaded 10000 sift1M queries
[ 0.165s ] Loaded ground truth, gt_size: 10
[ 0.165s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 1.023s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.020
[ 17.209s ] Query results (vector ids, then distances):
query 0 nn's (18, 18): 779712 (18) 141844 (18) 722837 (18) 586295 (18) 277780 (18) 710805 (18) 564313 (18) 631060 (18) 482980 (18) 403950 (18) 
     dis: 	78092.000 85136.000 85573.000 85742.000 86552.000 87889.000 89247.000 89426.000 89684.000 91390.000 
query 1 nn's (18, 18): 731804 (18) 196507 (18) 393441 (18) 492783 (18) 977663 (18) 183026 (18) 103968 (18) 690192 (18) 277780 (18) 240178 (18) 
     dis: 	61798.000 70646.000 72198.000 72393.000 73149.000 74623.000 75874.000 76248.000 76368.000 77197.000 
query 2 nn's (18, 18): 776491 (18) 575505 (18) 823487 (18) 235583 (18) 237127 (18) 712812 (18) 953237 (18) 956578 (18) 270853 (18) 584383 (18) 
     dis: 	41845.000 43212.000 49745.000 51518.000 51811.000 52717.000 52726.000 53669.000 53817.000 54304.000 
query 3 nn's (18, 18): 960691 (18) 807831 (18) 183026 (18) 907379 (18) 270165 (18) 912688 (18) 843539 (18) 507912 (18) 390265 (18) 846825 (18) 
     dis: 	43292.000 44482.000 45401.000 47296.000 48807.000 55154.000 55944.000 56968.000 57071.000 57243.000 
query 4 nn's (18, 18): 716433 (18) 403978 (18) 115005 (18) 518472 (18) 619010 (18) 804072 (18) 660969 (18) 512012 (18) 560740 (18) 448873 (18) 
     dis: 	52559.000 59193.000 67477.000 73066.000 74594.000 74950.000 75971.000 77865.000 78230.000 80837.000 
[ 17.209s ] *** Query time: 9.236
qps: 1082.767
 *** HNSW recall 
HNSW get 84253 postive res from 100000 results, recall@10:0.843
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.004 0.022 0.058 0.133 0.245 0.306 0.230 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46901730, average: 4690.173
finished ivfpq index examples
[ 17.210s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/attr_sel_1_500_random_18.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/qrangesel_1_1_500_random_18.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_18/sif_gt_sel_1_1_500_random_18_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_18_40_1000 100 128"
	User time (seconds): 15.97
	System time (seconds): 0.90
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:17.26
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853924
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212052
	Voluntary context switches: 1
	Involuntary context switches: 113
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:56
====================
START: running HNSW_INDEX_CONSTRUCTION, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 128
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000
dim: 128
M: 40
ef_construction: 1000
loaded base attributes, size:1000000
[ 0.075s ] Loaded attributions, 1000000 found
[ 0.075s ] Index Params -- d: 128, M: 40, N: 1000000
====================Vectors====================

[ 0.075s ] Loading database
[ 0.436s ] Loaded base vectors from file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
data loaded, with dim: 128, N=1000000
[ 0.436s ] Indexing database, size 1000000*128 from max 1000000
[ 0.436s ] Adding the vectors to the index
index construction cost:104.760
[ 104.760s ] Vectors added to  index
Index vectors added:1000000
====================Write Index================

[ 105.331s ] Wrote ivbfpq index to file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000
[105.332 s] -----DONE-----
[ 105.332s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_build sift1M 1000000 10 128 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000 128 40 1000"
	User time (seconds): 8277.95
	System time (seconds): 25.72
	Percent of CPU this job got: 7872%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:45.47
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1469376
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1723961
	Voluntary context switches: 5828
	Involuntary context switches: 901418
	Swaps: 0
	File system inputs: 0
	File system outputs: 1656448
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:19
====================
START: running TEST_HNSW, sift data --

dataset: sift1M
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift/sift_base.fvecs
query file: /mnt/data/mocheng/dataset/sift/sift_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000
ef_search: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.107s ] Loaded metadata, 1000000 attr's found
[ 0.107s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.110s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift/sift_query.fvecs
[ 0.112s ] Loaded 10000 sift1M queries
[ 0.124s ] Loaded ground truth, gt_size: 10
[ 0.124s ] Index Params -- d: 128, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 0.804s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 18.298s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 523764 (19) 843447 (19) 577058 (19) 382563 (19) 207296 (19) 842653 (19) 481385 (19) 196773 (19) 225062 (19) 586914 (19) 
     dis: 	88882.000 89334.000 91683.000 92885.000 92897.000 95400.000 97390.000 101715.000 102436.000 103932.000 
query 1 nn's (19, 19): 739835 (19) 369914 (19) 210769 (19) 78495 (19) 989918 (19) 561463 (19) 122292 (19) 206189 (19) 264452 (19) 868500 (19) 
     dis: 	65572.000 70526.000 73349.000 77846.000 77933.000 80065.000 80150.000 81224.000 81669.000 84200.000 
query 2 nn's (19, 19): 299398 (19) 9938 (19) 432692 (19) 332688 (19) 673658 (19) 237272 (19) 194421 (19) 69586 (19) 948895 (19) 365107 (19) 
     dis: 	42089.000 48163.000 49583.000 49623.000 51710.000 52531.000 53514.000 53903.000 57743.000 59144.000 
query 3 nn's (19, 19): 900649 (19) 905793 (19) 224482 (19) 791367 (19) 14646 (19) 739835 (19) 905735 (19) 538974 (19) 49969 (19) 993483 (19) 
     dis: 	42009.000 48419.000 54438.000 63142.000 63595.000 63650.000 66252.000 67216.000 68123.000 69414.000 
query 4 nn's (19, 19): 101436 (19) 242102 (19) 410705 (19) 151491 (19) 660969 (19) 367404 (19) 862798 (19) 720701 (19) 776966 (19) 422048 (19) 
     dis: 	63023.000 66712.000 73000.000 74210.000 75971.000 78238.000 80395.000 80851.000 82100.000 83215.000 
[ 18.298s ] *** Query time: 10.730
qps: 931.964
 *** HNSW recall 
HNSW get 71946 postive res from 100000 results, recall@10:0.719
recall dist(10% per bucket): 0.000 0.001 0.003 0.014 0.043 0.091 0.166 0.222 0.235 0.162 0.063 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 46875719, average: 4687.572
finished ivfpq index examples
[ 18.299s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift1M 1000000 10 1 /mnt/data/mocheng/dataset/sift/sift_base.fvecs /mnt/data/mocheng/dataset/sift/sift_query.fvecs /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/sift/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/sift/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000 100 128"
	User time (seconds): 17.33
	System time (seconds): 0.75
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:18.38
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 853928
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 212079
	Voluntary context switches: 1
	Involuntary context switches: 95
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
