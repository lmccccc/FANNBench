Start time: 05:56
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_6_256
nprobe: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.080s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.081s ] Loaded 10000 redcaps1m queries
[ 0.148s ] Loaded ground truth, gt_size: 100
[ 0.148s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 1.892s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.499
[ 24.664s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 727106 (6) 268161 (6) 646437 (6) 812018 (6) 64073 (6) 302070 (6) 524418 (6) 790037 (6) 84548 (6) 807005 (6) 997247 (6) 334544 (6) 364290 (6) 465841 (6) 571852 (6) 309200 (6) 363324 (6) 736934 (6) 988753 (6) 968022 (6) 596166 (6) 606467 (6) 514381 (6) 171 (6) 478100 (6) 678814 (6) 790030 (6) 568912 (6) 533175 (6) 472918 (6) 124180 (6) 795414 (6) 569239 (6) 105181 (6) 953733 (6) 493307 (6) 679931 (6) 345358 (6) 174023 (6) 996728 (6) 370277 (6) 540453 (6) 331521 (6) 159325 (6) 601044 (6) 323370 (6) 760479 (6) 460924 (6) 486165 (6) 295694 (6) 526743 (6) 373982 (6) 552569 (6) 184145 (6) 510698 (6) 919512 (6) 319315 (6) 825159 (6) 362341 (6) 509649 (6) 981881 (6) 965396 (6) 662170 (6) 753286 (6) 81158 (6) 484885 (6) 570575 (6) 736452 (6) 859257 (6) 77010 (6) 42266 (6) 437827 (6) 149377 (6) 355318 (6) 947396 (6) 595179 (6) 743765 (6) 758723 (6) 80643 (6) 604591 (6) 144940 (6) 628949 (6) 495102 (6) 400432 (6) 227118 (6) 149044 (6) 77001 (6) 293343 (6) 438718 (6) 603131 (6) 2076 (6) 347976 (6) 563448 (6) 171377 (6) 201672 (6) 137656 (6) 593021 (6) 866187 (6) 275545 (6) 141341 (6) 
     dis: 	0.624 0.640 0.679 0.740 0.745 0.755 0.770 0.771 0.775 0.783 0.788 0.795 0.799 0.799 0.802 0.805 0.806 0.808 0.822 0.828 0.838 0.842 0.848 0.848 0.863 0.866 0.866 0.868 0.869 0.873 0.878 0.883 0.889 0.892 0.892 0.894 0.896 0.896 0.900 0.905 0.906 0.906 0.907 0.908 0.910 0.910 0.912 0.913 0.917 0.919 0.921 0.921 0.925 0.925 0.925 0.928 0.929 0.929 0.931 0.931 0.934 0.934 0.938 0.938 0.941 0.942 0.945 0.945 0.947 0.948 0.949 0.950 0.950 0.950 0.950 0.952 0.954 0.958 0.959 0.960 0.960 0.961 0.964 0.964 0.964 0.965 0.965 0.966 0.967 0.969 0.969 0.971 0.971 0.972 0.972 0.974 0.974 0.975 0.976 0.976 
query 1 nn's (6, 6): 363220 (6) 253654 (6) 666880 (6) 622447 (6) 660394 (6) 964028 (6) 428754 (6) 427957 (6) 139424 (6) 896567 (6) 442989 (6) 30989 (6) 667007 (6) 989731 (6) 994014 (6) 459927 (6) 979295 (6) 848169 (6) 439637 (6) 997966 (6) 832389 (6) 661716 (6) 848037 (6) 163712 (6) 441534 (6) 630058 (6) 671340 (6) 118532 (6) 681550 (6) 577336 (6) 994569 (6) 964128 (6) 408156 (6) 51525 (6) 857939 (6) 226358 (6) 698433 (6) 395948 (6) 544577 (6) 925657 (6) 271263 (6) 753841 (6) 766866 (6) 455611 (6) 620586 (6) 602684 (6) 39189 (6) 110364 (6) 377202 (6) 304095 (6) 265490 (6) 557922 (6) 272122 (6) 418536 (6) 563357 (6) 353761 (6) 987081 (6) 769260 (6) 299005 (6) 80871 (6) 60676 (6) 235619 (6) 487009 (6) 584466 (6) 920134 (6) 816247 (6) 971318 (6) 844021 (6) 295835 (6) 916706 (6) 855763 (6) 244515 (6) 288542 (6) 77283 (6) 811301 (6) 672841 (6) 417828 (6) 671475 (6) 663858 (6) 750270 (6) 58319 (6) 1519 (6) 384623 (6) 116279 (6) 387184 (6) 885260 (6) 791914 (6) 366937 (6) 722531 (6) 366807 (6) 722158 (6) 601939 (6) 958421 (6) 678677 (6) 485598 (6) 471226 (6) 316697 (6) 697547 (6) 634858 (6) 389143 (6) 
     dis: 	0.092 0.098 0.100 0.103 0.105 0.106 0.108 0.110 0.111 0.111 0.111 0.111 0.112 0.114 0.114 0.115 0.115 0.115 0.116 0.116 0.117 0.117 0.118 0.118 0.118 0.118 0.119 0.119 0.119 0.119 0.120 0.120 0.120 0.120 0.122 0.122 0.122 0.122 0.122 0.123 0.123 0.124 0.124 0.124 0.124 0.124 0.124 0.124 0.124 0.125 0.126 0.126 0.126 0.126 0.127 0.127 0.127 0.127 0.128 0.128 0.128 0.128 0.128 0.128 0.128 0.129 0.129 0.129 0.129 0.129 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.133 0.133 0.133 
query 2 nn's (6, 6): 355537 (6) 964377 (6) 940490 (6) 620585 (6) 299577 (6) 894254 (6) 773055 (6) 328504 (6) 911854 (6) 792564 (6) 494541 (6) 743927 (6) 980872 (6) 877537 (6) 971858 (6) 507734 (6) 381411 (6) 952981 (6) 444996 (6) 665039 (6) 919763 (6) 222697 (6) 423208 (6) 476689 (6) 623737 (6) 33572 (6) 498025 (6) 93860 (6) 202341 (6) 573824 (6) 230054 (6) 79399 (6) 870630 (6) 136876 (6) 509068 (6) 341373 (6) 72372 (6) 561163 (6) 66777 (6) 88997 (6) 703151 (6) 261708 (6) 985107 (6) 319345 (6) 557020 (6) 184796 (6) 470869 (6) 14154 (6) 915391 (6) 578528 (6) 439807 (6) 490170 (6) 87145 (6) 770456 (6) 10885 (6) 937121 (6) 841847 (6) 259618 (6) 435592 (6) 962379 (6) 943514 (6) 620162 (6) 546876 (6) 866946 (6) 935988 (6) 657 (6) 662999 (6) 62201 (6) 646572 (6) 600470 (6) 699521 (6) 382759 (6) 736467 (6) 309618 (6) 61515 (6) 793716 (6) 477079 (6) 456323 (6) 776456 (6) 889497 (6) 362643 (6) 599464 (6) 366420 (6) 918913 (6) 994858 (6) 736120 (6) 84864 (6) 501728 (6) 516364 (6) 202045 (6) 801949 (6) 845994 (6) 782944 (6) 77279 (6) 730117 (6) 976074 (6) 746136 (6) 723232 (6) 83984 (6) 838497 (6) 
     dis: 	0.222 0.225 0.245 0.260 0.264 0.264 0.266 0.271 0.271 0.273 0.277 0.279 0.280 0.281 0.282 0.282 0.284 0.285 0.285 0.285 0.286 0.286 0.289 0.289 0.289 0.290 0.291 0.292 0.293 0.293 0.294 0.294 0.294 0.296 0.296 0.297 0.298 0.298 0.299 0.300 0.301 0.301 0.301 0.302 0.303 0.305 0.305 0.305 0.305 0.306 0.306 0.307 0.307 0.308 0.308 0.308 0.308 0.309 0.309 0.309 0.310 0.310 0.310 0.311 0.312 0.313 0.314 0.314 0.314 0.314 0.314 0.315 0.315 0.315 0.315 0.315 0.317 0.317 0.317 0.317 0.317 0.317 0.318 0.318 0.318 0.319 0.319 0.321 0.321 0.321 0.321 0.321 0.321 0.322 0.322 0.322 0.322 0.323 0.323 0.324 
query 3 nn's (6, 6): 583699 (6) 689368 (6) 428067 (6) 124464 (6) 595884 (6) 609006 (6) 635563 (6) 905275 (6) 413550 (6) 213744 (6) 305237 (6) 25831 (6) 994151 (6) 456770 (6) 246538 (6) 108295 (6) 758927 (6) 879049 (6) 269754 (6) 421931 (6) 471055 (6) 226331 (6) 640563 (6) 671717 (6) 219959 (6) 174382 (6) 800827 (6) 397607 (6) 663784 (6) 672565 (6) 933991 (6) 799434 (6) 301836 (6) 17746 (6) 931871 (6) 684978 (6) 237125 (6) 382010 (6) 100162 (6) 423285 (6) 418179 (6) 412295 (6) 135464 (6) 332772 (6) 669242 (6) 694334 (6) 835170 (6) 923128 (6) 807512 (6) 237881 (6) 935542 (6) 315020 (6) 37631 (6) 130248 (6) 850509 (6) 642929 (6) 90074 (6) 548723 (6) 355926 (6) 551062 (6) 613946 (6) 720454 (6) 775097 (6) 952161 (6) 601576 (6) 448941 (6) 528192 (6) 99925 (6) 891992 (6) 449855 (6) 4943 (6) 693433 (6) 948694 (6) 67641 (6) 746178 (6) 24908 (6) 505362 (6) 368426 (6) 399710 (6) 565242 (6) 615834 (6) 107648 (6) 101626 (6) 305649 (6) 843147 (6) 704380 (6) 622606 (6) 129940 (6) 289872 (6) 874136 (6) 94707 (6) 48330 (6) 769087 (6) 271935 (6) 470671 (6) 623185 (6) 231500 (6) 268380 (6) 400198 (6) 17471 (6) 
     dis: 	0.401 0.402 0.426 0.445 0.456 0.456 0.458 0.461 0.470 0.475 0.494 0.494 0.496 0.497 0.504 0.507 0.511 0.513 0.514 0.514 0.517 0.520 0.522 0.524 0.526 0.527 0.532 0.537 0.538 0.539 0.540 0.542 0.544 0.544 0.544 0.545 0.546 0.547 0.549 0.552 0.553 0.553 0.554 0.555 0.557 0.559 0.560 0.560 0.560 0.561 0.561 0.562 0.562 0.564 0.565 0.566 0.568 0.568 0.568 0.569 0.569 0.569 0.570 0.570 0.572 0.572 0.573 0.573 0.573 0.574 0.574 0.574 0.575 0.576 0.577 0.578 0.578 0.579 0.579 0.580 0.580 0.582 0.582 0.583 0.583 0.583 0.584 0.584 0.584 0.585 0.585 0.585 0.586 0.587 0.588 0.588 0.588 0.588 0.588 0.588 
query 4 nn's (6, 6): 522469 (6) 582698 (6) 797013 (6) 176027 (6) 931553 (6) 279888 (6) 46163 (6) 68136 (6) 105030 (6) 589135 (6) 929991 (6) 455512 (6) 834676 (6) 59094 (6) 458642 (6) 222228 (6) 902523 (6) 969773 (6) 143565 (6) 282395 (6) 262612 (6) 511053 (6) 573206 (6) 601541 (6) 599829 (6) 51681 (6) 173575 (6) 49802 (6) 982040 (6) 500007 (6) 37748 (6) 584115 (6) 63749 (6) 98599 (6) 148545 (6) 476701 (6) 760527 (6) 464808 (6) 563854 (6) 357242 (6) 101369 (6) 850663 (6) 378800 (6) 921524 (6) 709494 (6) 528890 (6) 516225 (6) 863840 (6) 337236 (6) 126511 (6) 596233 (6) 459414 (6) 724075 (6) 604226 (6) 421589 (6) 604672 (6) 472675 (6) 148956 (6) 610503 (6) 854292 (6) 404390 (6) 14408 (6) 476522 (6) 286504 (6) 120334 (6) 349764 (6) 864439 (6) 145593 (6) 481726 (6) 716943 (6) 402334 (6) 368404 (6) 151023 (6) 285539 (6) 880022 (6) 902864 (6) 664967 (6) 974507 (6) 651595 (6) 902566 (6) 814191 (6) 11638 (6) 72156 (6) 503133 (6) 506084 (6) 830726 (6) 510943 (6) 214285 (6) 268573 (6) 94664 (6) 884068 (6) 400425 (6) 651432 (6) 641662 (6) 789016 (6) 87978 (6) 96345 (6) 544657 (6) 276788 (6) 872328 (6) 
     dis: 	0.259 0.261 0.267 0.269 0.279 0.298 0.299 0.304 0.310 0.311 0.315 0.316 0.316 0.317 0.320 0.324 0.325 0.325 0.330 0.331 0.332 0.333 0.334 0.334 0.335 0.337 0.338 0.338 0.339 0.340 0.341 0.341 0.343 0.344 0.344 0.345 0.346 0.350 0.350 0.351 0.352 0.354 0.354 0.354 0.354 0.354 0.355 0.356 0.357 0.357 0.357 0.358 0.358 0.359 0.359 0.360 0.363 0.364 0.364 0.365 0.366 0.366 0.366 0.367 0.369 0.369 0.369 0.369 0.369 0.369 0.369 0.370 0.371 0.371 0.371 0.372 0.372 0.373 0.373 0.373 0.374 0.374 0.374 0.375 0.375 0.375 0.376 0.376 0.376 0.376 0.377 0.377 0.378 0.378 0.378 0.379 0.379 0.379 0.379 0.381 
[ 24.664s ] *** Query time: 17.647
qps: 566.654
 *** ivfpq recall 
ivfpq get 788615 postive res from 1000000 results, recall@100:0.789
recall dist(10% per bucket): 0.000 0.002 0.010 0.025 0.049 0.077 0.112 0.145 0.190 0.384 0.005 
finished ivfpq index examples
[ 24.695s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_6_256 10 512"
	User time (seconds): 23.51
	System time (seconds): 0.97
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:24.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1346472
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 655073
	Voluntary context switches: 1086
	Involuntary context switches: 40
	Swaps: 0
	File system inputs: 51560
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:06
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_10_256
nprobe: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 0.139s ] Loaded metadata, 1000000 attr's found
[ 0.139s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.200s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.219s ] Loaded 10000 redcaps1m queries
[ 0.361s ] Loaded ground truth, gt_size: 100
[ 0.361s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.063s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 19.336s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 64073 (10) 7102 (10) 554724 (10) 364290 (10) 596166 (10) 927993 (10) 909887 (10) 174023 (10) 996728 (10) 540453 (10) 385435 (10) 760479 (10) 704461 (10) 319315 (10) 81158 (10) 859257 (10) 42266 (10) 212777 (10) 730882 (10) 337818 (10) 664838 (10) 333441 (10) 587985 (10) 403930 (10) 531563 (10) 991709 (10) 451231 (10) 402654 (10) 293992 (10) 37912 (10) 598005 (10) 808237 (10) 610978 (10) 965996 (10) 719450 (10) 401627 (10) 479220 (10) 319303 (10) 986162 (10) 447878 (10) 414882 (10) 731327 (10) 581260 (10) 698236 (10) 336364 (10) 66314 (10) 731563 (10) 719951 (10) 764054 (10) 950599 (10) 580903 (10) 359875 (10) 378456 (10) 817660 (10) 916671 (10) 745572 (10) 278425 (10) 902247 (10) 297780 (10) 948707 (10) 557843 (10) 706012 (10) 417596 (10) 142597 (10) 56169 (10) 774927 (10) 421400 (10) 447069 (10) 582301 (10) 21408 (10) 194403 (10) 390047 (10) 871311 (10) 713169 (10) 995342 (10) 206999 (10) 998698 (10) 642898 (10) 797349 (10) 955683 (10) 161624 (10) 748904 (10) 199787 (10) 321125 (10) 804273 (10) 122534 (10) 607195 (10) 574529 (10) 640526 (10) 255931 (10) 956108 (10) 18427 (10) 979321 (10) 356752 (10) 624177 (10) 199998 (10) 589380 (10) 565000 (10) 122243 (10) 133878 (10) 
     dis: 	0.745 0.754 0.793 0.799 0.838 0.864 0.896 0.900 0.905 0.906 0.908 0.912 0.927 0.929 0.941 0.947 0.949 0.983 0.985 0.989 0.991 0.992 0.998 0.999 1.004 1.005 1.017 1.018 1.019 1.020 1.027 1.036 1.037 1.039 1.044 1.046 1.047 1.047 1.048 1.049 1.050 1.050 1.050 1.053 1.055 1.055 1.057 1.058 1.059 1.059 1.060 1.060 1.062 1.064 1.065 1.068 1.068 1.069 1.070 1.070 1.070 1.073 1.073 1.074 1.074 1.076 1.078 1.078 1.079 1.080 1.080 1.084 1.085 1.087 1.087 1.088 1.088 1.090 1.090 1.092 1.093 1.096 1.097 1.099 1.099 1.102 1.104 1.105 1.106 1.106 1.106 1.109 1.110 1.110 1.111 1.111 1.112 1.114 1.115 1.115 
query 1 nn's (10, 10): 428754 (10) 361537 (10) 979295 (10) 439637 (10) 424951 (10) 681550 (10) 709969 (10) 408156 (10) 371263 (10) 753841 (10) 55881 (10) 837200 (10) 105750 (10) 785418 (10) 858634 (10) 288542 (10) 811301 (10) 82481 (10) 366937 (10) 853505 (10) 633780 (10) 937262 (10) 41053 (10) 195481 (10) 771674 (10) 843111 (10) 698871 (10) 915755 (10) 462482 (10) 527435 (10) 691606 (10) 24719 (10) 507366 (10) 710324 (10) 832229 (10) 859050 (10) 200454 (10) 246783 (10) 280685 (10) 23590 (10) 561139 (10) 980350 (10) 598436 (10) 30217 (10) 250668 (10) 702451 (10) 24923 (10) 865462 (10) 652931 (10) 226285 (10) 312232 (10) 894014 (10) 385587 (10) 959689 (10) 427462 (10) 559169 (10) 615320 (10) 682771 (10) 712818 (10) 977847 (10) 457547 (10) 905827 (10) 726551 (10) 547222 (10) 601637 (10) 32573 (10) 808151 (10) 355234 (10) 666353 (10) 181047 (10) 630147 (10) 606890 (10) 302387 (10) 314837 (10) 653651 (10) 918380 (10) 132397 (10) 396522 (10) 157744 (10) 447406 (10) 452752 (10) 788181 (10) 66765 (10) 578846 (10) 272503 (10) 525392 (10) 741927 (10) 279857 (10) 696364 (10) 524682 (10) 971379 (10) 143541 (10) 495252 (10) 330012 (10) 786916 (10) 991803 (10) 716223 (10) 827011 (10) 759057 (10) 194305 (10) 
     dis: 	0.108 0.110 0.115 0.116 0.119 0.119 0.120 0.120 0.121 0.124 0.125 0.125 0.127 0.129 0.129 0.130 0.130 0.130 0.131 0.133 0.133 0.133 0.134 0.136 0.137 0.138 0.138 0.138 0.139 0.139 0.139 0.139 0.140 0.140 0.140 0.140 0.141 0.141 0.142 0.143 0.143 0.143 0.144 0.144 0.144 0.144 0.145 0.146 0.146 0.146 0.146 0.147 0.147 0.147 0.147 0.147 0.148 0.149 0.149 0.151 0.151 0.151 0.152 0.152 0.153 0.153 0.153 0.153 0.153 0.153 0.154 0.154 0.154 0.154 0.155 0.155 0.156 0.156 0.156 0.156 0.157 0.157 0.157 0.157 0.157 0.158 0.158 0.158 0.158 0.159 0.159 0.159 0.159 0.160 0.160 0.161 0.161 0.161 0.162 0.162 
query 2 nn's (10, 10): 964377 (10) 771849 (10) 400722 (10) 258758 (10) 903106 (10) 530996 (10) 65400 (10) 971858 (10) 381411 (10) 444996 (10) 564449 (10) 253786 (10) 230054 (10) 818470 (10) 625576 (10) 557020 (10) 915391 (10) 304775 (10) 201205 (10) 490170 (10) 943514 (10) 63845 (10) 916423 (10) 62201 (10) 600470 (10) 477079 (10) 784303 (10) 97812 (10) 584919 (10) 419992 (10) 772295 (10) 821258 (10) 356390 (10) 537534 (10) 83455 (10) 659554 (10) 479261 (10) 334263 (10) 468882 (10) 915626 (10) 490339 (10) 634199 (10) 596926 (10) 311370 (10) 854690 (10) 69795 (10) 981107 (10) 347668 (10) 339857 (10) 387561 (10) 20476 (10) 878621 (10) 479904 (10) 535146 (10) 660105 (10) 603302 (10) 872428 (10) 588388 (10) 933951 (10) 15154 (10) 444753 (10) 645170 (10) 577241 (10) 117061 (10) 911700 (10) 892414 (10) 705025 (10) 430652 (10) 217170 (10) 917739 (10) 338156 (10) 65718 (10) 784848 (10) 258660 (10) 140097 (10) 998490 (10) 160303 (10) 594272 (10) 983522 (10) 841614 (10) 52823 (10) 961162 (10) 602944 (10) 788955 (10) 20555 (10) 458570 (10) 467154 (10) 516405 (10) 821635 (10) 769340 (10) 498250 (10) 414297 (10) 337865 (10) 170602 (10) 166866 (10) 84678 (10) 16379 (10) 679371 (10) 883953 (10) 300744 (10) 
     dis: 	0.225 0.264 0.268 0.268 0.269 0.276 0.282 0.282 0.284 0.285 0.285 0.292 0.294 0.301 0.302 0.303 0.305 0.305 0.306 0.307 0.310 0.312 0.313 0.314 0.314 0.317 0.329 0.331 0.333 0.335 0.335 0.337 0.337 0.338 0.340 0.340 0.341 0.341 0.342 0.343 0.344 0.347 0.347 0.350 0.350 0.351 0.352 0.352 0.352 0.353 0.353 0.356 0.357 0.357 0.358 0.359 0.360 0.360 0.361 0.361 0.361 0.362 0.362 0.363 0.363 0.365 0.365 0.367 0.367 0.368 0.372 0.372 0.372 0.372 0.373 0.373 0.375 0.375 0.376 0.377 0.378 0.379 0.379 0.380 0.380 0.381 0.381 0.382 0.383 0.383 0.383 0.383 0.384 0.384 0.385 0.385 0.387 0.387 0.388 0.388 
query 3 nn's (10, 10): 305237 (10) 382010 (10) 309349 (10) 135464 (10) 430670 (10) 706869 (10) 67641 (10) 368426 (10) 289872 (10) 231500 (10) 347025 (10) 209001 (10) 66280 (10) 463948 (10) 839233 (10) 57618 (10) 240780 (10) 627510 (10) 614709 (10) 378228 (10) 243006 (10) 731392 (10) 890599 (10) 264846 (10) 657433 (10) 48205 (10) 25409 (10) 699155 (10) 584120 (10) 919630 (10) 206663 (10) 256278 (10) 596014 (10) 925671 (10) 365571 (10) 808278 (10) 605527 (10) 468412 (10) 932936 (10) 424107 (10) 986356 (10) 757919 (10) 397881 (10) 376659 (10) 387058 (10) 380301 (10) 511765 (10) 462132 (10) 818864 (10) 175192 (10) 791691 (10) 343245 (10) 363108 (10) 695815 (10) 495229 (10) 676444 (10) 890044 (10) 420568 (10) 645070 (10) 131375 (10) 352356 (10) 906513 (10) 120108 (10) 211779 (10) 222300 (10) 596501 (10) 514431 (10) 93809 (10) 639059 (10) 118891 (10) 53779 (10) 424307 (10) 636029 (10) 975181 (10) 751169 (10) 859745 (10) 973019 (10) 820128 (10) 378214 (10) 606004 (10) 195877 (10) 242698 (10) 771157 (10) 686939 (10) 23982 (10) 240374 (10) 70590 (10) 615952 (10) 691663 (10) 904454 (10) 744475 (10) 249397 (10) 994403 (10) 690966 (10) 136186 (10) 502741 (10) 958565 (10) 860752 (10) 89764 (10) 395241 (10) 
     dis: 	0.494 0.547 0.552 0.554 0.561 0.561 0.576 0.579 0.584 0.588 0.593 0.595 0.595 0.596 0.596 0.598 0.601 0.604 0.607 0.609 0.611 0.618 0.618 0.618 0.620 0.621 0.622 0.623 0.624 0.624 0.625 0.626 0.627 0.627 0.630 0.631 0.631 0.632 0.633 0.633 0.633 0.634 0.635 0.636 0.636 0.639 0.639 0.641 0.642 0.643 0.643 0.644 0.644 0.646 0.646 0.650 0.650 0.652 0.658 0.660 0.661 0.663 0.664 0.664 0.665 0.667 0.667 0.670 0.670 0.671 0.673 0.675 0.675 0.677 0.678 0.678 0.680 0.681 0.681 0.681 0.684 0.684 0.684 0.685 0.685 0.686 0.687 0.688 0.688 0.689 0.690 0.692 0.695 0.697 0.697 0.700 0.701 0.703 0.704 0.705 
query 4 nn's (10, 10): 797013 (10) 959629 (10) 878527 (10) 222228 (10) 279836 (10) 732037 (10) 235772 (10) 762488 (10) 490515 (10) 354590 (10) 863840 (10) 596233 (10) 89745 (10) 746306 (10) 807413 (10) 506084 (10) 514616 (10) 864559 (10) 813936 (10) 542480 (10) 385892 (10) 968757 (10) 785149 (10) 186965 (10) 127746 (10) 857426 (10) 872971 (10) 699150 (10) 899146 (10) 21973 (10) 451188 (10) 132719 (10) 2786 (10) 64675 (10) 574239 (10) 41746 (10) 994969 (10) 745761 (10) 164969 (10) 224737 (10) 731263 (10) 166723 (10) 50258 (10) 862489 (10) 63609 (10) 527390 (10) 8786 (10) 542171 (10) 919571 (10) 606 (10) 531131 (10) 571456 (10) 65332 (10) 264680 (10) 665008 (10) 818057 (10) 622227 (10) 782340 (10) 735321 (10) 356311 (10) 345107 (10) 54410 (10) 236631 (10) 179386 (10) 636662 (10) 858619 (10) 190342 (10) 280493 (10) 843057 (10) 192824 (10) 893088 (10) 433407 (10) 771269 (10) 481749 (10) 301064 (10) 2383 (10) 971946 (10) 958035 (10) 525400 (10) 47885 (10) 780001 (10) 644151 (10) 378423 (10) 157357 (10) 800529 (10) 566147 (10) 194669 (10) 475371 (10) 702580 (10) 301308 (10) 473840 (10) 909403 (10) 522673 (10) 712126 (10) 628839 (10) 247742 (10) 936353 (10) 556971 (10) 511818 (10) 138086 (10) 
     dis: 	0.267 0.293 0.303 0.324 0.332 0.334 0.350 0.351 0.352 0.353 0.356 0.357 0.358 0.367 0.368 0.375 0.380 0.382 0.383 0.384 0.384 0.388 0.388 0.390 0.393 0.395 0.395 0.404 0.407 0.407 0.409 0.410 0.410 0.410 0.415 0.416 0.417 0.418 0.418 0.422 0.425 0.425 0.425 0.426 0.426 0.427 0.429 0.429 0.429 0.430 0.430 0.432 0.434 0.435 0.435 0.436 0.438 0.439 0.439 0.441 0.443 0.443 0.443 0.444 0.444 0.447 0.447 0.448 0.449 0.450 0.450 0.450 0.451 0.452 0.452 0.453 0.453 0.454 0.455 0.455 0.457 0.458 0.458 0.460 0.461 0.462 0.462 0.462 0.463 0.463 0.463 0.463 0.464 0.465 0.465 0.466 0.467 0.468 0.468 0.468 
[ 19.337s ] *** Query time: 12.711
qps: 786.696
 *** ivfpq recall 
ivfpq get 637038 postive res from 1000000 results, recall@100:0.637
recall dist(10% per bucket): 0.001 0.012 0.044 0.087 0.126 0.154 0.164 0.145 0.134 0.130 0.004 
finished ivfpq index examples
[ 19.365s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_10_256 10 512"
	User time (seconds): 18.29
	System time (seconds): 0.78
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:19.51
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1346468
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 14
	Minor (reclaiming a frame) page faults: 335763
	Voluntary context switches: 1010
	Involuntary context switches: 64
	Swaps: 0
	File system inputs: 41232
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:14
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_19_256
nprobe: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.066s ] Loaded metadata, 1000000 attr's found
[ 0.066s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.079s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.080s ] Loaded 10000 redcaps1m queries
[ 0.146s ] Loaded ground truth, gt_size: 100
[ 0.146s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 1.994s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 19.330s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 336934 (19) 472918 (19) 193999 (19) 866187 (19) 837484 (19) 789108 (19) 173400 (19) 407599 (19) 561207 (19) 718906 (19) 649642 (19) 818966 (19) 823550 (19) 208480 (19) 124331 (19) 106697 (19) 383322 (19) 425269 (19) 440384 (19) 787784 (19) 774383 (19) 614691 (19) 224166 (19) 999762 (19) 765857 (19) 186224 (19) 404701 (19) 108373 (19) 878533 (19) 266211 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.844 0.873 0.944 0.975 1.065 1.078 1.078 1.082 1.109 1.121 1.123 1.132 1.139 1.164 1.170 1.175 1.185 1.191 1.206 1.207 1.208 1.234 1.235 1.240 1.263 1.275 1.281 1.284 1.290 1.342 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 526331 (19) 158846 (19) 264009 (19) 246783 (19) 434283 (19) 69776 (19) 805880 (19) 916232 (19) 357641 (19) 532410 (19) 220610 (19) 178290 (19) 127320 (19) 291626 (19) 949001 (19) 303648 (19) 125446 (19) 356636 (19) 202933 (19) 336127 (19) 756517 (19) 731451 (19) 714440 (19) 431949 (19) 451915 (19) 682193 (19) 387248 (19) 696276 (19) 77970 (19) 802685 (19) 966935 (19) 339865 (19) 672270 (19) 328398 (19) 872137 (19) 640177 (19) 294751 (19) 89042 (19) 949383 (19) 496355 (19) 341975 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.136 0.138 0.138 0.141 0.142 0.149 0.157 0.161 0.161 0.168 0.172 0.177 0.177 0.180 0.180 0.182 0.186 0.191 0.197 0.197 0.198 0.198 0.199 0.203 0.205 0.209 0.210 0.217 0.221 0.224 0.235 0.248 0.251 0.254 0.255 0.258 0.273 0.275 0.295 0.303 0.334 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 916423 (19) 782944 (19) 366433 (19) 537534 (19) 387561 (19) 546593 (19) 249066 (19) 2227 (19) 166797 (19) 155587 (19) 402665 (19) 588699 (19) 238211 (19) 652706 (19) 518706 (19) 561248 (19) 302530 (19) 563956 (19) 302283 (19) 432628 (19) 477149 (19) 365967 (19) 552285 (19) 881966 (19) 890527 (19) 832830 (19) 746930 (19) 445174 (19) 753888 (19) 941628 (19) 88947 (19) 830516 (19) 529459 (19) 962224 (19) 569795 (19) 530629 (19) 268163 (19) 296485 (19) 899564 (19) 411875 (19) 702211 (19) 111833 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.313 0.321 0.329 0.338 0.353 0.357 0.358 0.359 0.365 0.373 0.380 0.382 0.383 0.386 0.389 0.392 0.392 0.399 0.404 0.406 0.417 0.418 0.419 0.423 0.440 0.449 0.488 0.489 0.493 0.503 0.504 0.505 0.506 0.507 0.510 0.514 0.547 0.562 0.613 0.635 0.667 0.724 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 226331 (19) 493967 (19) 231500 (19) 278147 (19) 584120 (19) 451260 (19) 117780 (19) 592067 (19) 145084 (19) 549270 (19) 683557 (19) 649540 (19) 844361 (19) 573324 (19) 765686 (19) 514909 (19) 484095 (19) 317730 (19) 406050 (19) 650113 (19) 803016 (19) 20400 (19) 771368 (19) 661696 (19) 613973 (19) 287560 (19) 912910 (19) 531609 (19) 546921 (19) 564715 (19) 788556 (19) 741501 (19) 876654 (19) 877927 (19) 235397 (19) 766687 (19) 897556 (19) 894412 (19) 160955 (19) 4421 (19) 516298 (19) 516399 (19) 71379 (19) 863561 (19) 622047 (19) 408515 (19) 835729 (19) 151163 (19) 658089 (19) 752547 (19) 494278 (19) 806760 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.520 0.557 0.588 0.620 0.624 0.661 0.663 0.668 0.673 0.675 0.691 0.702 0.717 0.731 0.732 0.744 0.755 0.758 0.761 0.761 0.766 0.770 0.778 0.779 0.784 0.785 0.786 0.787 0.789 0.790 0.796 0.796 0.797 0.806 0.810 0.832 0.838 0.847 0.852 0.854 0.875 0.882 0.889 0.890 0.910 0.945 0.963 0.967 0.981 1.002 1.004 1.120 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 522469 (19) 402334 (19) 393712 (19) 826811 (19) 947998 (19) 862880 (19) 989983 (19) 25013 (19) 405287 (19) 673302 (19) 562180 (19) 234790 (19) 726960 (19) 663763 (19) 717777 (19) 997740 (19) 747341 (19) 255550 (19) 94729 (19) 597621 (19) 954138 (19) 648881 (19) 679991 (19) 449828 (19) 920073 (19) 66832 (19) 656573 (19) 100693 (19) 132937 (19) 300651 (19) 613077 (19) 4965 (19) 271962 (19) 155828 (19) 204495 (19) 657645 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.259 0.369 0.378 0.415 0.423 0.429 0.437 0.441 0.458 0.458 0.470 0.473 0.477 0.482 0.493 0.504 0.537 0.541 0.543 0.548 0.549 0.551 0.551 0.569 0.574 0.575 0.594 0.596 0.608 0.620 0.629 0.638 0.645 0.660 0.695 0.792 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 19.331s ] *** Query time: 12.450
qps: 803.196
 *** ivfpq recall 
ivfpq get 237898 postive res from 1000000 results, recall@100:0.238
recall dist(10% per bucket): 0.058 0.328 0.344 0.183 0.074 0.013 0.001 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 19.360s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_19_256 10 512"
	User time (seconds): 18.36
	System time (seconds): 0.76
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:19.47
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1345448
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 335699
	Voluntary context switches: 1100
	Involuntary context switches: 33
	Swaps: 0
	File system inputs: 87168
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:19
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_20_256
nprobe: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
[ 0.066s ] Loaded metadata, 1000000 attr's found
[ 0.066s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.079s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.080s ] Loaded 10000 redcaps1m queries
[ 0.147s ] Loaded ground truth, gt_size: 100
[ 0.147s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 1.910s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 19.127s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 665235 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.074 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 431068 (20) 481335 (20) 601684 (20) 556847 (20) 142233 (20) 302104 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.164 0.180 0.203 0.234 0.240 0.288 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 638287 (20) 219747 (20) 775045 (20) 242602 (20) 637631 (20) 28323 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.412 0.415 0.431 0.551 0.573 0.750 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 404058 (20) 582466 (20) 220745 (20) 520498 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.752 0.768 0.839 0.845 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 953970 (20) 931627 (20) 924206 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.438 0.555 0.586 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 19.127s ] *** Query time: 12.392
qps: 806.989
 *** ivfpq recall 
ivfpq get 33035 postive res from 1000000 results, recall@100:0.033
recall dist(10% per bucket): 0.995 0.005 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 19.156s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_500_random_20_256 10 512"
	User time (seconds): 18.14
	System time (seconds): 0.78
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:19.25
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1347488
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 335698
	Voluntary context switches: 1168
	Involuntary context switches: 32
	Swaps: 0
	File system inputs: 26440
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
