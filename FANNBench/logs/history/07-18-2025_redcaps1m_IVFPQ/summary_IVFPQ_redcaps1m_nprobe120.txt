Start time: 21:54
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512
nprobe: 120
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.086s ] Loaded metadata, 1000000 attr's found
[ 0.086s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.098s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.100s ] Loaded 10000 redcaps1m queries
[ 0.168s ] Loaded ground truth, gt_size: 100
[ 0.168s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 77.342s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 288.596s ] Query results (vector ids, then distances):
query 0 nn's (1540574211, 1590004802): 727106 (1557359735) 562528 (1586530455) 247269 (1563268918) 864174 (1586141206) 64073 (1552081912) 880422 (1565574478) 297407 (1562582134) 84548 (1557155880) 316095 (1551987403) 997247 (1547217917) 302187 (1566023840) 966838 (1570564531) 650558 (1552134375) 465841 (1541316839) 334544 (1563704708) 363324 (1588150617) 988753 (1543862249) 135244 (1573331572) 132358 (1558810217) 606467 (1568763473) 596166 (1579563279) 91712 (1562697586) 309200 (1583866074) 708925 (1576703816) 927993 (1565326081) 708700 (1541202222) 75346 (1564168304) 131965 (1556466636) 533175 (1575258274) 602879 (1548953318) 909887 (1573250307) 268357 (1575827166) 813377 (1544571766) 699054 (1579379170) 439788 (1565854244) 493307 (1561727055) 983152 (1550510814) 686231 (1566039123) 763265 (1542459164) 823706 (1585149377) 679931 (1540740143) 318225 (1582255095) 174023 (1555779163) 81228 (1560057467) 492624 (1552841438) 472918 (1564281975) 323370 (1580598904) 422643 (1556978810) 952583 (1550911908) 517669 (1549396737) 980277 (1581039128) 929021 (1555207103) 77303 (1588455303) 276583 (1587145061) 331521 (1564901683) 385435 (1589983348) 399187 (1587938124) 154883 (1581301418) 553713 (1584927669) 419559 (1588543049) 934902 (1582861469) 434594 (1551507970) 295694 (1561539309) 827447 (1565725551) 13080 (1541731484) 894678 (1585406115) 36195 (1542321827) 556864 (1565655760) 752134 (1583896379) 448032 (1579574671) 890540 (1541384870) 950362 (1576998920) 345358 (1552161794) 373982 (1587320434) 949111 (1587581586) 501049 (1585237551) 317245 (1566794544) 540453 (1573344926) 834158 (1542767236) 393166 (1574050070) 704461 (1567652497) 602404 (1541391641) 804923 (1580916714) 428229 (1562205224) 46879 (1559067774) 301131 (1553274671) 258712 (1588733584) 101497 (1571190242) 275133 (1566629080) 983241 (1567994577) 679902 (1581865622) 497362 (1588354910) 184145 (1577120906) 475136 (1564780649) 585624 (1550040776) 662170 (1560280718) 71734 (1577588921) 640854 (1565398416) 94683 (1577768324) 850701 (1563236631) 
     dis: 	0.632 0.638 0.677 0.741 0.750 0.768 0.771 0.780 0.784 0.788 0.789 0.804 0.806 0.808 0.809 0.812 0.819 0.828 0.833 0.842 0.844 0.844 0.848 0.863 0.868 0.871 0.880 0.880 0.889 0.891 0.893 0.894 0.898 0.899 0.901 0.901 0.904 0.905 0.905 0.905 0.905 0.906 0.906 0.907 0.909 0.909 0.910 0.910 0.911 0.911 0.912 0.912 0.913 0.914 0.915 0.917 0.917 0.918 0.918 0.918 0.918 0.919 0.920 0.920 0.924 0.924 0.926 0.929 0.930 0.931 0.931 0.931 0.931 0.932 0.932 0.932 0.934 0.934 0.935 0.935 0.935 0.936 0.936 0.937 0.937 0.938 0.939 0.939 0.939 0.940 0.941 0.942 0.942 0.943 0.944 0.944 0.944 0.945 0.945 0.946 
query 1 nn's (1502815998, 1574739098): 741325 (1559616195) 666880 (1555641433) 979250 (1523372340) 622447 (1532959985) 803332 (1530141155) 427146 (1514695882) 428754 (1560720094) 110189 (1507487399) 139424 (1535633696) 284310 (1570817806) 994014 (1549410785) 939001 (1521863047) 964018 (1566639637) 928093 (1551573119) 329834 (1552801370) 795520 (1549367888) 7931 (1531328513) 421889 (1509323403) 979295 (1567526425) 848169 (1567967943) 104425 (1517937828) 459927 (1570948131) 661716 (1569475757) 832389 (1509148358) 997966 (1560111653) 630058 (1510985967) 710350 (1543853777) 866328 (1550960142) 399497 (1531827001) 195548 (1519575345) 848037 (1547627912) 577336 (1551645910) 85059 (1560480821) 671340 (1545504039) 326649 (1542991586) 925374 (1547210027) 709969 (1549840943) 272839 (1567350368) 178695 (1539523827) 743973 (1565255174) 885087 (1525644326) 408156 (1550161639) 395948 (1572268410) 857939 (1506859251) 226358 (1565225638) 964128 (1566424023) 620586 (1542847663) 925657 (1569885810) 721597 (1560048937) 324349 (1565636095) 544577 (1529068259) 271263 (1523394425) 557922 (1542237514) 784003 (1503860978) 795310 (1572108672) 418536 (1508889764) 935736 (1516385240) 837200 (1517967912) 107066 (1564445038) 489550 (1561300577) 320719 (1526407679) 80871 (1546322460) 770454 (1561685089) 769260 (1570050053) 584466 (1558116296) 55881 (1516654636) 169444 (1559524323) 687772 (1567207126) 244515 (1565195570) 62978 (1548008868) 816247 (1563724766) 116279 (1540745988) 135640 (1562247065) 785418 (1513559759) 855763 (1569114081) 384623 (1530652501) 77283 (1545499206) 388764 (1538816911) 750270 (1568905945) 288542 (1507728447) 253736 (1537508888) 811301 (1551198823) 820498 (1546321274) 916706 (1560980031) 672841 (1520507128) 417828 (1564258459) 213143 (1530845306) 785513 (1568160267) 1519 (1561555264) 86484 (1550619400) 232066 (1563834787) 82481 (1518972141) 865350 (1562057425) 471226 (1503181567) 885260 (1562875914) 722158 (1557686757) 722531 (1562614185) 344524 (1553054923) 697547 (1524659876) 654319 (1562203480) 
     dis: 	0.100 0.101 0.101 0.103 0.106 0.106 0.108 0.109 0.110 0.112 0.112 0.113 0.113 0.113 0.113 0.113 0.114 0.114 0.115 0.115 0.115 0.116 0.116 0.116 0.116 0.117 0.117 0.117 0.118 0.118 0.118 0.118 0.118 0.118 0.119 0.119 0.119 0.120 0.120 0.120 0.121 0.122 0.122 0.122 0.122 0.122 0.123 0.123 0.123 0.123 0.123 0.123 0.124 0.125 0.125 0.126 0.126 0.126 0.126 0.126 0.127 0.127 0.127 0.127 0.127 0.127 0.128 0.128 0.128 0.129 0.129 0.129 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.132 0.132 
query 2 nn's (1565134124, 1606255797): 964377 (1605131892) 306439 (1575579764) 757728 (1605423787) 75885 (1601934153) 374226 (1576918189) 71515 (1570882811) 445298 (1589162214) 771849 (1570744783) 903106 (1586146246) 792564 (1597961764) 328504 (1595799020) 737868 (1571342287) 530996 (1598262380) 161603 (1602887962) 498270 (1586402085) 435452 (1574701387) 494541 (1567102094) 751228 (1585488453) 328089 (1574112193) 929527 (1587699711) 837851 (1605837809) 609504 (1590756439) 633139 (1583107000) 41616 (1599772018) 507734 (1605297824) 971858 (1600907724) 625921 (1580310462) 800558 (1578206579) 610678 (1584998424) 919763 (1580427352) 952981 (1588948381) 24425 (1584502238) 589140 (1597778814) 882709 (1573089021) 25586 (1592565722) 253786 (1598570829) 33572 (1567059144) 988519 (1599418976) 627502 (1584624938) 10316 (1600442741) 879865 (1599868306) 222791 (1569733461) 726914 (1582911767) 684897 (1579890463) 192903 (1602694233) 233822 (1587156920) 976907 (1594577610) 870630 (1568931614) 230054 (1603647309) 341373 (1582339286) 403717 (1587585205) 728355 (1598234783) 844350 (1601083260) 491378 (1598099263) 136876 (1579879526) 910005 (1589155576) 509068 (1582362871) 812326 (1580129904) 88997 (1597461015) 985107 (1565328361) 884477 (1588323027) 184796 (1580838071) 645543 (1585948706) 304775 (1575151723) 625576 (1604050293) 780551 (1599435257) 470869 (1582932711) 74992 (1573424430) 459595 (1582500502) 14154 (1594153934) 312490 (1604872882) 490170 (1604285031) 44865 (1586305134) 550905 (1590498833) 319345 (1568052528) 578528 (1604204574) 660131 (1601954615) 826279 (1597417912) 201205 (1586171256) 435592 (1590078863) 965924 (1600027560) 89667 (1574102696) 962379 (1591499930) 557020 (1584521629) 915391 (1601243129) 258161 (1574306665) 623030 (1597864688) 752639 (1583106240) 63845 (1588094783) 351702 (1601462660) 310380 (1597000036) 620162 (1566431760) 187604 (1594862700) 356369 (1600690480) 785841 (1588265143) 66928 (1580572954) 340495 (1589726708) 652018 (1594040809) 985401 (1586115013) 198935 (1603661610) 
     dis: 	0.226 0.238 0.240 0.257 0.262 0.263 0.264 0.266 0.268 0.271 0.273 0.275 0.275 0.276 0.276 0.277 0.277 0.278 0.280 0.280 0.280 0.281 0.283 0.283 0.283 0.283 0.284 0.284 0.284 0.284 0.285 0.286 0.287 0.288 0.288 0.289 0.289 0.290 0.290 0.290 0.290 0.291 0.292 0.292 0.293 0.293 0.294 0.296 0.296 0.297 0.297 0.297 0.297 0.297 0.298 0.299 0.300 0.300 0.301 0.302 0.303 0.303 0.303 0.303 0.303 0.303 0.303 0.304 0.305 0.305 0.305 0.305 0.305 0.305 0.306 0.306 0.306 0.306 0.306 0.307 0.307 0.308 0.308 0.308 0.309 0.309 0.309 0.309 0.309 0.310 0.310 0.310 0.311 0.311 0.312 0.312 0.312 0.312 0.312 0.313 
query 3 nn's (1564977898, 1606128091): 889987 (1593644784) 783586 (1584449301) 124464 (1588791594) 640717 (1593715105) 687871 (1584368476) 595884 (1603585196) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 456770 (1569878368) 382748 (1593824389) 35100 (1602181028) 369955 (1572446350) 1172 (1593437402) 183160 (1602553401) 108295 (1585156706) 27812 (1566082536) 810505 (1600367373) 669781 (1599946426) 555783 (1582924247) 879049 (1580410467) 758927 (1600115067) 269754 (1600944924) 622714 (1601863068) 226331 (1587219459) 899709 (1569431812) 636892 (1588778659) 910519 (1596209853) 671717 (1569449284) 345300 (1592195475) 863296 (1568848990) 469326 (1591653206) 725969 (1596031378) 170065 (1567980012) 174382 (1591143332) 43568 (1574027594) 431136 (1591290445) 225830 (1582762176) 4433 (1598650487) 397607 (1576582831) 989223 (1601168056) 301836 (1586460731) 696027 (1565089229) 391302 (1573059058) 799434 (1571614920) 800827 (1581281066) 638495 (1591051278) 479354 (1574296216) 585483 (1591851301) 402867 (1586944643) 472875 (1570825151) 208236 (1570403595) 931871 (1577236835) 882799 (1602614385) 17746 (1578159083) 684978 (1569892488) 184010 (1592663456) 583701 (1579282290) 430216 (1590828473) 433518 (1571765207) 332772 (1591201180) 100162 (1603446100) 567499 (1598482734) 218254 (1585421290) 328860 (1580625037) 694334 (1583158570) 807512 (1565479561) 553746 (1565242336) 247163 (1588394370) 808853 (1600624761) 418179 (1569261639) 533587 (1578734941) 222643 (1586742508) 412295 (1592051871) 309349 (1590795708) 631191 (1576790924) 201176 (1581392986) 358247 (1598283739) 191420 (1567611844) 242265 (1582348130) 340090 (1601066497) 944408 (1596325783) 923128 (1584271014) 723056 (1596423636) 480847 (1575805769) 341069 (1569852456) 706869 (1571407578) 315020 (1570876084) 101336 (1597316244) 157117 (1582132864) 237881 (1577944076) 130248 (1584742028) 129828 (1590456161) 521807 (1584918824) 935542 (1579374712) 430670 (1566812498) 37631 (1569700468) 302971 (1604786015) 558831 (1600013234) 434098 (1596184813) 
     dis: 	0.402 0.408 0.447 0.456 0.460 0.461 0.463 0.476 0.495 0.496 0.500 0.502 0.503 0.508 0.510 0.510 0.510 0.512 0.515 0.516 0.517 0.517 0.520 0.521 0.522 0.523 0.524 0.525 0.525 0.526 0.526 0.526 0.527 0.528 0.531 0.531 0.532 0.532 0.533 0.533 0.535 0.536 0.537 0.538 0.539 0.539 0.539 0.539 0.539 0.540 0.541 0.544 0.544 0.545 0.546 0.546 0.547 0.549 0.549 0.549 0.551 0.551 0.552 0.552 0.553 0.553 0.554 0.555 0.555 0.555 0.556 0.556 0.556 0.559 0.559 0.560 0.560 0.560 0.561 0.561 0.561 0.563 0.563 0.564 0.564 0.565 0.565 0.565 0.566 0.566 0.566 0.567 0.567 0.567 0.567 0.567 0.567 0.568 0.569 0.569 
query 4 nn's (1486429184, 1570175082): 582698 (1557087889) 959629 (1553076435) 191044 (1542912543) 46163 (1552605357) 279888 (1555515184) 700754 (1557101934) 68136 (1537086660) 754904 (1532757000) 556169 (1553542108) 231993 (1563749968) 54130 (1553866600) 60658 (1512331918) 789873 (1564175719) 589135 (1547166816) 59094 (1536774042) 929991 (1548794594) 403555 (1549502178) 455512 (1559505416) 834676 (1547757785) 565451 (1563280600) 222228 (1543263211) 218677 (1567427396) 902523 (1564343178) 979493 (1540438177) 330129 (1525225883) 584911 (1538696418) 969773 (1527858141) 861337 (1559160334) 481846 (1512692187) 567017 (1561466150) 18995 (1561278454) 143565 (1516103937) 351217 (1545147659) 870723 (1530111079) 616623 (1529427583) 573206 (1557940034) 262276 (1518198483) 282395 (1552886840) 507409 (1565232420) 655488 (1505816775) 147188 (1501610900) 857192 (1554140364) 805996 (1530049195) 590482 (1550192676) 51681 (1535136336) 605725 (1557494891) 678901 (1558868874) 500007 (1555794424) 511053 (1554404630) 577889 (1558192255) 732037 (1558530545) 309894 (1532146088) 842541 (1569071674) 173575 (1509173034) 584115 (1555479090) 948602 (1555862584) 148545 (1518097309) 760527 (1492818655) 948484 (1569979308) 341328 (1495582876) 285533 (1567392541) 367708 (1513407029) 569466 (1522175329) 244038 (1543691184) 392242 (1497525223) 43574 (1492546668) 907116 (1563321366) 573896 (1562646014) 395799 (1560127897) 311214 (1546572875) 490515 (1562711345) 440301 (1534385643) 464808 (1521378210) 101369 (1531669788) 204098 (1565367374) 56749 (1521485101) 235772 (1551117248) 954881 (1561262229) 850663 (1553673926) 923538 (1527525691) 635293 (1564014847) 596233 (1565428603) 954446 (1568380532) 583639 (1510024142) 435576 (1516246088) 709494 (1563922629) 921524 (1559055905) 685016 (1551067146) 959099 (1569783405) 940668 (1566892372) 156056 (1513534578) 745769 (1554844132) 604226 (1538444207) 243614 (1557773802) 246427 (1546653533) 547904 (1550941972) 341468 (1497809821) 470637 (1514523703) 843400 (1549019747) 831639 (1563684890) 
     dis: 	0.260 0.294 0.300 0.300 0.302 0.304 0.305 0.306 0.306 0.307 0.308 0.309 0.313 0.315 0.317 0.317 0.318 0.318 0.320 0.321 0.323 0.324 0.324 0.325 0.326 0.326 0.327 0.328 0.329 0.329 0.330 0.331 0.331 0.331 0.332 0.333 0.333 0.333 0.334 0.334 0.335 0.335 0.335 0.335 0.335 0.337 0.337 0.337 0.338 0.338 0.338 0.340 0.341 0.342 0.343 0.344 0.344 0.345 0.346 0.346 0.347 0.347 0.348 0.348 0.348 0.349 0.349 0.349 0.350 0.350 0.351 0.351 0.352 0.352 0.352 0.353 0.354 0.354 0.354 0.355 0.355 0.355 0.356 0.356 0.357 0.357 0.357 0.358 0.358 0.358 0.358 0.358 0.359 0.359 0.360 0.360 0.360 0.360 0.360 0.361 
[ 288.596s ] *** Query time: 204.655
qps: 48.863
 *** ivfpq recall 
ivfpq get 984085 postive res from 1000000 results, recall@100:0.984
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.003 0.015 0.654 0.327 
finished ivfpq index examples
[ 288.634s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512 120 512"
	User time (seconds): 212.72
	System time (seconds): 1.96
	Percent of CPU this job got: 74%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:48.81
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2621200
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 849635
	Voluntary context switches: 5559
	Involuntary context switches: 305
	Swaps: 0
	File system inputs: 109792
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:17
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512
nprobe: 120
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.074s ] Loaded metadata, 1000000 attr's found
[ 0.074s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.087s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.088s ] Loaded 10000 redcaps1m queries
[ 0.154s ] Loaded ground truth, gt_size: 100
[ 0.154s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.803s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 129.430s ] Query results (vector ids, then distances):
query 0 nn's (1582001887, 1589499026): 562528 (1586530455) 864174 (1586141206) 363324 (1588150617) 309200 (1583866074) 823706 (1585149377) 318225 (1582255095) 77303 (1588455303) 276583 (1587145061) 399187 (1587938124) 553713 (1584927669) 419559 (1588543049) 934902 (1582861469) 894678 (1585406115) 752134 (1583896379) 373982 (1587320434) 949111 (1587581586) 501049 (1585237551) 258712 (1588733584) 497362 (1588354910) 754292 (1586803647) 45927 (1583656700) 44577 (1583002559) 965396 (1589114636) 725140 (1588203922) 336847 (1582730373) 335014 (1584573509) 978817 (1582339496) 243123 (1588045918) 14804 (1582535607) 831695 (1588715230) 2611 (1588686517) 440172 (1584059747) 397290 (1587362599) 145589 (1589118962) 619330 (1583095620) 108949 (1587674266) 969562 (1588545723) 640553 (1587077190) 317288 (1585987378) 635628 (1582303731) 309885 (1583004780) 683199 (1586999583) 380465 (1583130128) 872251 (1582070115) 745865 (1585940082) 483972 (1586265495) 499404 (1588509080) 600423 (1586520086) 46465 (1586063219) 950960 (1586711122) 98292 (1586620802) 119266 (1584317359) 683374 (1583081928) 203200 (1583870297) 554374 (1584065585) 365588 (1586828976) 805698 (1585157295) 458298 (1587578253) 432022 (1582770915) 572730 (1588392254) 998126 (1589375632) 47840 (1588977750) 976298 (1588789239) 929621 (1589242675) 68790 (1583343311) 361400 (1587392484) 639097 (1586862530) 85927 (1588543458) 914324 (1588878780) 324437 (1584630140) 540086 (1587255977) 29999 (1585247613) 839721 (1588844371) 345621 (1587080036) 181904 (1583458154) 405743 (1583800821) 733532 (1582935754) 876623 (1585678311) 723831 (1586892120) 693096 (1589112162) 767057 (1589427819) 146794 (1588907630) 150071 (1587505996) 557372 (1589156925) 158494 (1588355531) 871201 (1587403484) 900702 (1583432992) 275459 (1582578841) 603787 (1586610050) 311727 (1587140352) 101616 (1583206515) 59018 (1583384352) 484706 (1587765527) 136252 (1584305515) 962577 (1586047941) 428447 (1582226325) 240250 (1587296212) 374517 (1587773316) 83840 (1584594611) 178427 (1586182360) 
     dis: 	0.638 0.741 0.812 0.848 0.905 0.906 0.913 0.914 0.917 0.918 0.918 0.918 0.924 0.930 0.932 0.932 0.932 0.939 0.942 0.946 0.946 0.949 0.950 0.950 0.952 0.955 0.956 0.956 0.957 0.958 0.958 0.961 0.964 0.964 0.967 0.968 0.969 0.970 0.970 0.971 0.972 0.973 0.973 0.975 0.976 0.976 0.977 0.977 0.978 0.979 0.979 0.979 0.980 0.980 0.980 0.980 0.980 0.981 0.981 0.981 0.981 0.982 0.982 0.983 0.983 0.984 0.985 0.985 0.986 0.986 0.986 0.987 0.987 0.988 0.988 0.989 0.990 0.991 0.991 0.991 0.992 0.992 0.994 0.994 0.995 0.995 0.995 0.995 0.997 0.997 0.998 0.998 0.998 0.998 0.999 1.000 1.000 1.002 1.002 1.002 
query 1 nn's (1560999281, 1570293538): 964018 (1566639637) 979295 (1567526425) 848169 (1567967943) 661716 (1569475757) 272839 (1567350368) 743973 (1565255174) 226358 (1565225638) 964128 (1566424023) 925657 (1569885810) 324349 (1565636095) 107066 (1564445038) 489550 (1561300577) 770454 (1561685089) 769260 (1570050053) 687772 (1567207126) 244515 (1565195570) 816247 (1563724766) 135640 (1562247065) 855763 (1569114081) 750270 (1568905945) 417828 (1564258459) 785513 (1568160267) 1519 (1561555264) 232066 (1563834787) 865350 (1562057425) 885260 (1562875914) 722531 (1562614185) 654319 (1562203480) 72615 (1562076560) 892976 (1565037919) 623093 (1562598643) 764370 (1562603973) 70419 (1561584228) 469350 (1562335528) 883636 (1564102641) 291657 (1568547556) 642147 (1569768845) 216340 (1567387098) 901600 (1563702446) 274103 (1570218669) 434283 (1561144178) 606783 (1566702692) 349713 (1564219857) 461473 (1563288036) 926275 (1564959288) 639635 (1568309647) 270961 (1563556089) 246783 (1563711236) 80803 (1561544409) 262597 (1569873057) 770215 (1569274956) 199410 (1564269101) 287347 (1564337831) 616405 (1569095085) 942154 (1569191438) 299001 (1565542218) 387132 (1568809665) 959689 (1565003796) 885142 (1567946632) 667994 (1562513679) 221752 (1563043037) 691339 (1568306837) 650379 (1565444264) 323338 (1562185350) 946688 (1566749244) 177051 (1564056908) 205822 (1566131347) 677228 (1567664072) 638246 (1563755724) 438588 (1568387607) 885472 (1564532229) 386053 (1564343817) 966460 (1563230205) 627506 (1564953028) 606890 (1566143371) 749222 (1564451163) 624583 (1561474781) 244957 (1568787071) 366358 (1561848648) 319222 (1569712617) 982374 (1562959746) 752414 (1564707273) 937272 (1565184401) 257802 (1562161142) 6219 (1562367310) 35723 (1569870532) 720244 (1564039332) 17059 (1569474379) 919586 (1562280089) 542856 (1565018425) 121520 (1568076447) 623071 (1567967141) 528605 (1569761656) 742178 (1565312437) 151821 (1564945056) 126531 (1565671044) 900158 (1562197870) 98192 (1567308345) 111699 (1564180237) 692254 (1568970205) 
     dis: 	0.113 0.115 0.115 0.116 0.120 0.120 0.122 0.122 0.123 0.123 0.126 0.126 0.127 0.127 0.128 0.128 0.129 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.133 0.134 0.136 0.136 0.136 0.136 0.137 0.138 0.139 0.139 0.140 0.140 0.140 0.141 0.141 0.141 0.141 0.141 0.142 0.142 0.142 0.142 0.143 0.143 0.144 0.145 0.145 0.145 0.146 0.146 0.146 0.146 0.146 0.147 0.147 0.147 0.148 0.148 0.148 0.150 0.150 0.150 0.151 0.151 0.151 0.152 0.152 0.152 0.152 0.153 0.154 0.154 0.154 0.155 0.155 0.155 0.155 0.155 0.155 0.155 0.155 0.156 0.156 0.156 0.156 0.156 0.157 0.157 0.157 0.157 0.159 0.159 
query 2 nn's (1572763542, 1582585543): 306439 (1575579764) 374226 (1576918189) 435452 (1574701387) 328089 (1574112193) 625921 (1580310462) 800558 (1578206579) 919763 (1580427352) 882709 (1573089021) 684897 (1579890463) 341373 (1582339286) 136876 (1579879526) 509068 (1582362871) 812326 (1580129904) 184796 (1580838071) 304775 (1575151723) 74992 (1573424430) 459595 (1582500502) 89667 (1574102696) 258161 (1574306665) 66928 (1580572954) 736467 (1580426331) 191026 (1575282024) 27739 (1577559718) 382759 (1576615596) 693424 (1577326809) 848308 (1577381740) 889497 (1574301401) 309618 (1575469598) 782944 (1576643215) 782730 (1581701847) 723232 (1580345133) 123871 (1580263351) 758298 (1581370592) 399537 (1579217682) 748653 (1577738932) 699521 (1578031471) 83984 (1573310768) 764977 (1577228673) 889630 (1581035642) 12386 (1578076967) 564355 (1578800006) 975747 (1581377891) 138150 (1574772939) 320481 (1577758091) 306557 (1574359565) 838497 (1582143070) 376247 (1578415912) 72892 (1576591318) 734423 (1575329377) 552350 (1580932122) 156467 (1581027996) 17303 (1575739255) 584919 (1576459524) 864290 (1582406470) 652051 (1578103605) 121261 (1577918137) 960438 (1579035074) 625452 (1578110274) 52225 (1573940490) 187538 (1573434034) 986416 (1573608765) 409518 (1576352304) 965896 (1580451684) 257475 (1581231652) 419992 (1573309297) 808229 (1580728341) 42773 (1572925862) 229603 (1576605452) 465378 (1573412132) 945221 (1581025505) 475643 (1576549442) 114934 (1581275578) 904109 (1580680796) 450225 (1574334272) 823556 (1576491942) 940325 (1573737079) 314591 (1573929914) 80909 (1574188692) 913084 (1579544680) 541438 (1581262786) 698388 (1580276852) 324852 (1574625787) 663798 (1575925679) 568084 (1579581921) 845644 (1573608523) 66396 (1580970087) 120420 (1574258520) 376846 (1580137698) 648008 (1578100185) 47969 (1578800802) 842322 (1572963584) 300807 (1579781570) 182286 (1573695169) 698016 (1575034154) 504313 (1575239697) 277852 (1580283035) 855534 (1577747028) 788272 (1581513344) 243571 (1575145962) 458788 (1580163462) 
     dis: 	0.238 0.262 0.277 0.280 0.284 0.284 0.284 0.288 0.292 0.297 0.298 0.300 0.300 0.303 0.303 0.304 0.305 0.308 0.309 0.312 0.314 0.315 0.315 0.315 0.318 0.318 0.319 0.320 0.320 0.320 0.323 0.323 0.324 0.324 0.324 0.325 0.326 0.326 0.326 0.326 0.327 0.327 0.327 0.327 0.328 0.328 0.329 0.330 0.330 0.331 0.332 0.332 0.332 0.333 0.333 0.334 0.335 0.335 0.336 0.336 0.336 0.337 0.337 0.337 0.337 0.338 0.338 0.338 0.339 0.339 0.339 0.340 0.341 0.341 0.342 0.342 0.344 0.344 0.344 0.345 0.346 0.346 0.347 0.347 0.347 0.347 0.348 0.348 0.348 0.349 0.349 0.349 0.350 0.351 0.352 0.352 0.352 0.352 0.353 0.353 
query 3 nn's (1574977513, 1584382757): 687871 (1584368476) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 555783 (1582924247) 879049 (1580410467) 225830 (1582762176) 397607 (1576582831) 800827 (1581281066) 931871 (1577236835) 17746 (1578159083) 583701 (1579282290) 328860 (1580625037) 694334 (1583158570) 533587 (1578734941) 631191 (1576790924) 201176 (1581392986) 242265 (1582348130) 923128 (1584271014) 480847 (1575805769) 157117 (1582132864) 237881 (1577944076) 935542 (1579374712) 602682 (1582950625) 468019 (1576987182) 387386 (1582405992) 222131 (1582710031) 44181 (1577753526) 48330 (1581407630) 361068 (1575261343) 290462 (1582791014) 772511 (1581624973) 945383 (1577663730) 132008 (1578950863) 52399 (1580756502) 867736 (1583111572) 268380 (1583626170) 426950 (1577045978) 324064 (1583709179) 358741 (1579123029) 817123 (1581712765) 57618 (1579265350) 623185 (1581588604) 482952 (1580187897) 753842 (1582435434) 48579 (1577171455) 838846 (1576005040) 57396 (1580269242) 590384 (1577822237) 735285 (1583455225) 526488 (1583094282) 571622 (1583068987) 940680 (1580909930) 131738 (1575086416) 390986 (1577166880) 130445 (1577597632) 87349 (1582657329) 135821 (1579577945) 562142 (1575756985) 40714 (1578214456) 947728 (1580335819) 108329 (1577944598) 578962 (1580770671) 843984 (1577494978) 940165 (1578178197) 315993 (1583350885) 541061 (1583333255) 502023 (1582737844) 958845 (1580419124) 627510 (1581813790) 188856 (1578020553) 584120 (1582149774) 63127 (1584213793) 832818 (1576723727) 956168 (1580842580) 654652 (1582428954) 203777 (1584272451) 749477 (1582393168) 919630 (1579012420) 237849 (1580744030) 206663 (1576469463) 705193 (1577259166) 461504 (1581722535) 25409 (1575834517) 544709 (1575210593) 278147 (1578051299) 302170 (1584376845) 627970 (1579917262) 932936 (1580057153) 607359 (1581959525) 396725 (1577846412) 693925 (1579039551) 823847 (1583018793) 357810 (1579725690) 984927 (1581394258) 836312 (1578498502) 380270 (1583416577) 646749 (1582773935) 671997 (1583695541) 189717 (1582566795) 
     dis: 	0.460 0.463 0.476 0.495 0.516 0.517 0.532 0.533 0.539 0.544 0.546 0.549 0.553 0.553 0.556 0.560 0.560 0.561 0.563 0.564 0.566 0.566 0.567 0.574 0.574 0.580 0.584 0.584 0.586 0.589 0.589 0.590 0.591 0.591 0.592 0.592 0.594 0.594 0.595 0.595 0.595 0.598 0.600 0.600 0.600 0.601 0.602 0.604 0.604 0.605 0.605 0.606 0.607 0.607 0.607 0.607 0.608 0.608 0.608 0.609 0.614 0.615 0.615 0.616 0.618 0.619 0.619 0.619 0.620 0.620 0.621 0.622 0.623 0.623 0.623 0.623 0.624 0.624 0.625 0.627 0.627 0.627 0.627 0.627 0.627 0.628 0.629 0.630 0.631 0.631 0.631 0.631 0.631 0.632 0.633 0.633 0.633 0.635 0.636 0.636 
query 4 nn's (1517035768, 1535603056): 754904 (1532757000) 330129 (1525225883) 969773 (1527858141) 870723 (1530111079) 616623 (1529427583) 262276 (1518198483) 805996 (1530049195) 51681 (1535136336) 309894 (1532146088) 148545 (1518097309) 569466 (1522175329) 440301 (1534385643) 464808 (1521378210) 101369 (1531669788) 56749 (1521485101) 923538 (1527525691) 4809 (1526640489) 222638 (1521059736) 976778 (1529381540) 158433 (1531143589) 617960 (1533568031) 327957 (1534474289) 699783 (1532683504) 691394 (1526182918) 877126 (1534786430) 214285 (1534561001) 341033 (1523622112) 158019 (1529495719) 271475 (1528418882) 472597 (1518230046) 45427 (1525488953) 38003 (1527103598) 899638 (1524615031) 91846 (1523939963) 611904 (1519355714) 255281 (1520796275) 778496 (1528282963) 542480 (1532986342) 968757 (1519826724) 98515 (1522616211) 228976 (1527974395) 277133 (1530557498) 157423 (1518791927) 721601 (1533082614) 831230 (1535051164) 939846 (1517192241) 872940 (1530591648) 161826 (1532828749) 540290 (1533342924) 428148 (1533488237) 782847 (1531012276) 10221 (1517788069) 680596 (1521122410) 944173 (1522847377) 839671 (1523328804) 766579 (1530120142) 101752 (1531697704) 947987 (1525946923) 315394 (1527180802) 64213 (1525665397) 92475 (1521127546) 539547 (1526779523) 764831 (1529529895) 779346 (1534007250) 444190 (1527459759) 43918 (1534970358) 277836 (1532827616) 644107 (1532398231) 146214 (1533251276) 310256 (1523752772) 150032 (1522584498) 474889 (1533414897) 112596 (1525801416) 18688 (1525350416) 646663 (1517599163) 998359 (1531789753) 741202 (1520093616) 325809 (1532375093) 234557 (1532830773) 13893 (1529081269) 281874 (1533077236) 11708 (1529628187) 912926 (1533570086) 206133 (1517367232) 521320 (1534879141) 126523 (1529592102) 15543 (1531697110) 851179 (1533616116) 501609 (1530615759) 132329 (1532801084) 210342 (1525569313) 156270 (1523832946) 938810 (1530583592) 541860 (1533257793) 32840 (1533555378) 934434 (1521044306) 502306 (1532221649) 996919 (1524013438) 995003 (1533825398) 164969 (1526173940) 
     dis: 	0.306 0.326 0.327 0.331 0.332 0.333 0.335 0.335 0.340 0.344 0.348 0.351 0.352 0.352 0.353 0.355 0.363 0.366 0.370 0.371 0.375 0.378 0.379 0.380 0.381 0.381 0.382 0.383 0.384 0.384 0.385 0.385 0.386 0.386 0.386 0.386 0.387 0.388 0.388 0.388 0.388 0.389 0.390 0.391 0.391 0.391 0.392 0.392 0.393 0.393 0.394 0.394 0.395 0.396 0.396 0.396 0.397 0.398 0.400 0.401 0.402 0.402 0.402 0.403 0.404 0.404 0.407 0.407 0.408 0.408 0.409 0.410 0.411 0.411 0.411 0.411 0.411 0.412 0.412 0.412 0.412 0.413 0.413 0.414 0.414 0.414 0.415 0.416 0.416 0.417 0.417 0.417 0.417 0.418 0.418 0.418 0.419 0.419 0.419 0.420 
[ 129.430s ] *** Query time: 119.433
qps: 83.729
 *** ivfpq recall 
ivfpq get 970439 postive res from 1000000 results, recall@100:0.970
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.004 0.015 0.049 0.655 0.276 
finished ivfpq index examples
[ 129.467s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512 120 512"
	User time (seconds): 125.98
	System time (seconds): 2.95
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:09.69
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2620328
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 1017929
	Voluntary context switches: 2131
	Involuntary context switches: 232
	Swaps: 0
	File system inputs: 102296
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:46
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512
nprobe: 120
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.077s ] Loaded metadata, 1000000 attr's found
[ 0.077s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.089s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.091s ] Loaded 10000 redcaps1m queries
[ 0.157s ] Loaded ground truth, gt_size: 100
[ 0.157s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.003s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 119.478s ] Query results (vector ids, then distances):
query 0 nn's (1538594774, 1540118398): 754695 (1539668172) 105181 (1539349926) 80643 (1539819925) 688747 (1539751467) 195457 (1538934010) 410145 (1540045273) 852506 (1538704387) 406867 (1539626285) 383361 (1540071964) 72999 (1539511530) 462521 (1539470700) 837392 (1538920256) 719320 (1538804996) 587451 (1540066930) 749410 (1539601562) 90915 (1539863751) 821022 (1538595325) 150694 (1538834659) 874031 (1538774402) 877914 (1538852562) 75391 (1538671303) 898007 (1539443474) 368538 (1539343154) 933645 (1539570084) 975250 (1540020121) 518518 (1539020366) 728574 (1539557502) 19277 (1538934437) 72178 (1539008699) 82387 (1539343357) 520660 (1539132041) 186685 (1539544490) 811369 (1539830890) 430960 (1539419424) 131441 (1539400568) 476531 (1540111135) 989958 (1539579674) 701573 (1539878537) 634265 (1539279873) 269359 (1538842679) 751512 (1539729833) 93454 (1539409536) 244496 (1539223588) 256591 (1540082386) 304164 (1539441594) 188365 (1538611763) 838392 (1539837665) 903188 (1540033852) 897214 (1539825341) 200216 (1539627249) 867677 (1538675201) 300500 (1539548539) 836119 (1539432248) 927742 (1538866356) 943705 (1539425990) 963369 (1540077117) 276891 (1539273634) 765853 (1539654523) 28452 (1539365173) 870677 (1539260759) 417596 (1538975551) 489551 (1539226665) 643581 (1538682215) 54850 (1539953591) 556772 (1539010285) 85961 (1538802646) 455891 (1539289717) 561774 (1538888494) 709780 (1538948438) 382321 (1539081233) 142385 (1538778392) 891469 (1539787728) 944924 (1540070019) 42066 (1539592688) 385250 (1539213013) 932262 (1539395215) 935796 (1539036558) 355654 (1539552700) 669950 (1538897160) 757638 (1538630313) 590281 (1540056297) 591208 (1538878556) 506882 (1539447409) 29016 (1540005904) 390382 (1539386289) 54341 (1539011777) 16908 (1539193341) 451374 (1539124239) 125504 (1538874345) 994103 (1539812261) 275259 (1539032769) 456867 (1539455531) 801876 (1540047087) 678158 (1540091285) 643375 (1539545101) 243754 (1540056521) 881230 (1539042716) 330451 (1539639738) 780381 (1539090983) 67384 (1539871212) 
     dis: 	0.825 0.920 0.970 0.974 0.986 0.990 0.992 0.997 0.998 1.021 1.026 1.027 1.028 1.028 1.033 1.041 1.044 1.045 1.045 1.046 1.049 1.050 1.051 1.053 1.054 1.054 1.054 1.055 1.056 1.066 1.068 1.069 1.070 1.071 1.072 1.073 1.073 1.074 1.074 1.074 1.075 1.079 1.079 1.080 1.081 1.082 1.083 1.083 1.085 1.085 1.085 1.085 1.086 1.087 1.088 1.089 1.089 1.089 1.090 1.092 1.092 1.095 1.097 1.098 1.098 1.098 1.099 1.099 1.099 1.100 1.103 1.103 1.106 1.107 1.108 1.108 1.110 1.110 1.114 1.114 1.115 1.116 1.116 1.116 1.117 1.117 1.119 1.120 1.120 1.124 1.125 1.125 1.127 1.129 1.130 1.131 1.131 1.132 1.132 1.134 
query 1 nn's (1558313707, 1559317195): 634858 (1559095216) 747350 (1558405403) 328886 (1559221626) 878375 (1559157897) 840825 (1559253647) 433046 (1558315145) 977957 (1559149838) 348487 (1559253366) 619059 (1559307158) 409525 (1558370684) 894069 (1558990053) 502253 (1558335904) 847459 (1558414379) 219155 (1559243903) 83086 (1558807992) 82551 (1558977918) 108637 (1558651601) 79458 (1559269747) 781669 (1558490973) 230068 (1558847626) 578948 (1559136620) 620609 (1558456943) 961794 (1558413317) 742667 (1559089743) 195728 (1559144191) 904210 (1559306562) 519066 (1558638878) 10307 (1558925529) 408362 (1558638119) 585058 (1558915362) 252486 (1558496378) 424854 (1559189379) 225455 (1558927378) 591608 (1558670249) 397011 (1559083106) 166315 (1558448258) 765421 (1558720830) 932842 (1559313561) 579042 (1558773453) 847764 (1558894219) 808359 (1558543448) 339841 (1558972247) 648428 (1558632936) 751035 (1558885157) 736397 (1558718335) 842554 (1559266554) 400053 (1558992524) 680641 (1558420474) 295943 (1558848511) 490582 (1559150277) 13244 (1558653965) 526079 (1558982177) 353766 (1558966684) 498462 (1559103515) 120595 (1558534783) 119518 (1558725999) 985979 (1558853808) 40341 (1558718440) 784040 (1559245028) 525284 (1559263100) 368111 (1558341137) 197174 (1558832359) 470375 (1558833742) 835536 (1558643979) 761722 (1559027640) 935237 (1559075107) 733335 (1558364582) 92008 (1559012416) 58531 (1558570337) 683432 (1558976787) 460657 (1558650324) 840386 (1558716836) 640957 (1558480310) 219484 (1558392811) 415633 (1558991282) 453460 (1558751446) 175846 (1559162237) 428732 (1558638009) 232890 (1558821763) 25968 (1558621754) 517776 (1558985422) 355282 (1559085172) 738587 (1559015485) 450286 (1559233342) 222461 (1559228798) 126404 (1558616101) 863942 (1558836604) 864460 (1559061417) 126 (1558716044) 651475 (1558648179) 921916 (1558653827) 658353 (1558714022) 195041 (1558376603) 538522 (1559129885) 817568 (1558498126) 654141 (1559139458) 298826 (1558525096) 644907 (1559045036) 733081 (1559074198) 394447 (1558470638) 
     dis: 	0.134 0.138 0.139 0.144 0.148 0.152 0.157 0.158 0.161 0.162 0.166 0.166 0.168 0.169 0.177 0.180 0.181 0.186 0.191 0.198 0.199 0.200 0.203 0.204 0.208 0.209 0.210 0.212 0.213 0.214 0.214 0.215 0.215 0.217 0.219 0.221 0.225 0.225 0.227 0.231 0.231 0.235 0.236 0.237 0.248 0.249 0.253 0.257 0.260 0.263 0.266 0.267 0.270 0.276 0.276 0.277 0.279 0.285 0.288 0.289 0.293 0.293 0.300 0.302 0.305 0.311 0.312 0.317 0.323 0.325 0.326 0.326 0.328 0.328 0.332 0.332 0.334 0.334 0.336 0.336 0.337 0.337 0.338 0.340 0.342 0.342 0.344 0.344 0.345 0.345 0.345 0.346 0.347 0.348 0.349 0.350 0.351 0.352 0.353 0.353 
query 2 nn's (1581675605, 1582524306): 341373 (1582339286) 509068 (1582362871) 459595 (1582500502) 782730 (1581701847) 838497 (1582143070) 864290 (1582406470) 354254 (1581792997) 625527 (1581820216) 705 (1582226978) 426699 (1581810177) 550860 (1581780468) 228658 (1582286587) 710697 (1582057129) 204687 (1582470733) 704540 (1581965214) 282404 (1581960293) 209705 (1581908923) 500135 (1581679002) 347005 (1582520891) 487042 (1582159097) 781304 (1582459468) 701153 (1582034091) 378439 (1581820524) 880558 (1582166419) 878182 (1582491146) 776146 (1582065578) 884131 (1581883010) 919538 (1582220265) 551666 (1581972741) 278965 (1582080523) 565489 (1582473512) 329121 (1582436943) 217023 (1581955917) 374073 (1581693708) 518821 (1582485179) 905340 (1581890796) 963627 (1581989168) 150461 (1582510550) 382511 (1582488646) 608916 (1582445411) 686195 (1582413070) 96896 (1582440058) 187565 (1582253025) 840659 (1582465030) 563956 (1581866517) 899682 (1581990993) 877743 (1581893795) 539458 (1581712958) 700117 (1582479367) 286821 (1581727323) 550828 (1581810172) 430737 (1582304777) 628863 (1582240118) 534883 (1581811043) 118120 (1582404541) 965151 (1582236561) 667599 (1581950910) 128732 (1582489502) 745163 (1581888495) 387702 (1581806007) 73452 (1582013385) 9518 (1582386442) 332654 (1581888464) 597649 (1582118181) 451914 (1581783626) 140883 (1582050196) 523758 (1581721477) 449169 (1581783626) 245498 (1582441506) 920174 (1582253261) 430356 (1582159997) 89937 (1582006148) 628961 (1581979568) 750878 (1582305805) 249453 (1582379661) 787041 (1582215388) 531052 (1581968477) 925983 (1581877452) 976606 (1581701214) 529287 (1581750000) 306552 (1581680153) 23127 (1581789288) 442689 (1582469518) 916193 (1582445610) 672750 (1582482317) 660382 (1582112279) 32891 (1582083744) 56682 (1582284972) 164683 (1582166300) 915190 (1582389673) 885476 (1581771835) 330554 (1581778705) 727837 (1582159629) 324065 (1582171947) 99290 (1581827168) 113025 (1581704337) 13316 (1582155882) 396759 (1582460390) 455188 (1582062518) 462281 (1581715058) 
     dis: 	0.297 0.300 0.305 0.320 0.328 0.333 0.353 0.356 0.357 0.357 0.360 0.365 0.366 0.368 0.368 0.369 0.370 0.370 0.374 0.376 0.377 0.379 0.384 0.385 0.385 0.386 0.387 0.388 0.388 0.388 0.388 0.389 0.390 0.391 0.391 0.391 0.391 0.393 0.395 0.397 0.398 0.400 0.400 0.402 0.403 0.406 0.407 0.407 0.408 0.410 0.411 0.412 0.413 0.413 0.416 0.416 0.416 0.417 0.418 0.419 0.421 0.422 0.422 0.422 0.422 0.423 0.424 0.425 0.425 0.427 0.428 0.428 0.428 0.429 0.430 0.430 0.431 0.432 0.434 0.434 0.435 0.436 0.439 0.440 0.441 0.441 0.442 0.443 0.444 0.445 0.445 0.445 0.446 0.446 0.447 0.447 0.447 0.447 0.449 0.450 
query 3 nn's (1541361198, 1542915636): 769868 (1542487532) 493967 (1542294990) 953342 (1542471165) 136421 (1542307684) 175440 (1542245841) 238924 (1542209507) 972437 (1541427748) 385496 (1541953821) 762523 (1542714651) 742777 (1541363545) 470469 (1542471828) 356672 (1542519441) 507625 (1542348286) 890826 (1541627340) 925090 (1542531015) 98052 (1542393773) 92303 (1541457923) 706013 (1541385453) 115113 (1541550861) 123236 (1541964208) 215896 (1541366777) 652694 (1542650891) 413253 (1541594209) 111238 (1542231670) 627154 (1541976321) 596591 (1542570636) 400333 (1541401226) 285420 (1541510638) 220754 (1541988883) 619115 (1541644156) 506008 (1542419158) 114248 (1541618982) 424169 (1541388856) 378318 (1541963003) 487073 (1542236932) 180060 (1542136356) 206129 (1542391644) 250576 (1542724381) 148374 (1542546380) 996698 (1542886456) 148668 (1541468583) 233813 (1542123551) 962339 (1541613449) 314753 (1541811190) 19058 (1542683916) 771599 (1541736834) 808913 (1541766388) 587473 (1542052712) 936427 (1541398470) 229068 (1542774597) 698409 (1541885147) 185157 (1541602651) 305881 (1542492001) 403139 (1542403625) 329960 (1541957026) 847126 (1542364386) 539779 (1541644300) 942778 (1542076959) 803914 (1541893103) 633020 (1542727756) 528390 (1541639016) 532025 (1542025838) 418904 (1542801785) 772440 (1541696201) 417363 (1542404536) 300034 (1542336335) 42344 (1541843768) 863161 (1541638272) 752450 (1541372953) 886140 (1542257083) 591957 (1542825421) 28435 (1542037225) 857263 (1542316097) 389118 (1542053718) 782807 (1541965235) 262628 (1541765736) 591153 (1542271411) 988048 (1542242533) 947062 (1541771857) 476044 (1542199373) 164537 (1542725382) 452232 (1542156744) 566141 (1542243087) 452190 (1542203013) 869389 (1542727581) 201849 (1542570741) 843927 (1541997628) 920036 (1541785997) 439972 (1542586375) 540810 (1542712894) 378239 (1542768272) 840715 (1542374437) 687981 (1541904061) 86263 (1542326804) 392590 (1542481466) 924548 (1542053645) 851224 (1541776564) 319146 (1541469696) 916273 (1541977250) 340228 (1541894328) 
     dis: 	0.474 0.562 0.574 0.593 0.596 0.604 0.607 0.613 0.630 0.631 0.633 0.634 0.635 0.649 0.652 0.656 0.665 0.669 0.671 0.674 0.675 0.676 0.678 0.682 0.682 0.684 0.686 0.688 0.689 0.690 0.690 0.698 0.699 0.699 0.700 0.702 0.704 0.704 0.704 0.706 0.709 0.711 0.711 0.711 0.712 0.718 0.718 0.719 0.719 0.722 0.723 0.724 0.725 0.727 0.729 0.731 0.735 0.737 0.738 0.740 0.743 0.744 0.745 0.745 0.745 0.746 0.746 0.746 0.749 0.750 0.750 0.751 0.754 0.755 0.756 0.757 0.757 0.757 0.758 0.758 0.759 0.761 0.765 0.766 0.766 0.771 0.771 0.771 0.773 0.773 0.774 0.774 0.775 0.776 0.777 0.777 0.778 0.779 0.780 0.781 
query 4 nn's (1547965400, 1549164333): 929991 (1548794594) 843400 (1549019747) 556735 (1548803052) 924765 (1548418215) 855122 (1548705861) 802461 (1548697185) 62976 (1548022732) 488089 (1548395559) 213717 (1548537413) 508517 (1548983858) 520185 (1548433179) 332010 (1548064545) 741617 (1549149038) 356311 (1548857389) 431630 (1548807374) 638905 (1548936508) 480341 (1548646591) 22045 (1549058584) 411121 (1548576149) 649594 (1548344576) 457725 (1548034187) 946299 (1548080854) 920881 (1549057866) 933586 (1548384750) 102174 (1548029711) 38975 (1548105724) 782863 (1548840512) 29663 (1548214689) 383660 (1548352189) 175612 (1548256353) 986514 (1549156354) 734757 (1548393630) 595389 (1548924720) 148970 (1548196293) 557991 (1549079696) 146628 (1548873736) 601174 (1549067186) 578879 (1548909289) 154078 (1548805147) 794925 (1548790004) 400844 (1549062908) 407414 (1548951937) 448217 (1549032076) 840082 (1548083052) 229066 (1548102562) 61582 (1548024693) 411967 (1548332419) 790070 (1548964923) 92391 (1548025254) 375710 (1548523323) 33390 (1549127061) 703680 (1548003844) 487999 (1548577353) 303778 (1548345071) 572478 (1548978177) 17178 (1548016432) 834289 (1548729227) 708402 (1548422575) 238667 (1548085050) 415833 (1548017784) 882822 (1549046093) 139157 (1548331227) 120033 (1548098861) 60649 (1548577455) 603797 (1549054437) 631567 (1548759765) 556786 (1547993791) 60294 (1548665327) 576967 (1548632814) 164846 (1549129379) 299995 (1548290804) 359094 (1548258685) 115645 (1548346833) 339383 (1548396820) 236676 (1548478051) 508 (1548297286) 808582 (1548836156) 365016 (1548393377) 152512 (1549072598) 597603 (1548458783) 225486 (1548465866) 678196 (1549018228) 327853 (1548176561) 664518 (1548458525) 545021 (1548190170) 745710 (1549080480) 120216 (1548518369) 401328 (1548016023) 385180 (1548623096) 601512 (1548267408) 803537 (1548666571) 816249 (1548087014) 128286 (1548108186) 580632 (1548295801) 635838 (1548457720) 42648 (1548055782) 163284 (1548197221) 963004 (1548028888) 540540 (1549013801) 94884 (1548774801) 
     dis: 	0.317 0.360 0.374 0.382 0.384 0.391 0.402 0.406 0.406 0.429 0.430 0.431 0.435 0.440 0.443 0.448 0.455 0.456 0.465 0.465 0.466 0.468 0.469 0.470 0.473 0.474 0.475 0.476 0.477 0.479 0.481 0.481 0.482 0.488 0.492 0.492 0.493 0.494 0.494 0.494 0.495 0.496 0.498 0.499 0.500 0.500 0.500 0.501 0.501 0.502 0.503 0.503 0.503 0.504 0.505 0.506 0.507 0.507 0.507 0.507 0.510 0.510 0.511 0.511 0.513 0.514 0.515 0.515 0.516 0.516 0.516 0.516 0.517 0.518 0.519 0.520 0.520 0.520 0.521 0.521 0.522 0.523 0.527 0.528 0.529 0.529 0.530 0.532 0.532 0.535 0.535 0.537 0.537 0.537 0.538 0.538 0.539 0.540 0.541 0.542 
[ 119.479s ] *** Query time: 109.798
qps: 91.077
 *** ivfpq recall 
ivfpq get 845821 postive res from 1000000 results, recall@100:0.846
recall dist(10% per bucket): 0.000 0.000 0.001 0.004 0.016 0.038 0.084 0.155 0.248 0.385 0.069 
finished ivfpq index examples
[ 119.507s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512 120 512"
	User time (seconds): 117.90
	System time (seconds): 1.79
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:59.72
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2623400
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 654327
	Voluntary context switches: 1
	Involuntary context switches: 88
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:05
====================
START: running TEST_IVFPQ, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512
nprobe: 120
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.075s ] Loaded metadata, 1000000 attr's found
[ 0.075s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.087s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.088s ] Loaded 10000 redcaps1m queries
[ 0.155s ] Loaded ground truth, gt_size: 100
[ 0.155s ] Index Params -- d: 512, N: 1000000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.933s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 114.829s ] Query results (vector ids, then distances):
query 0 nn's (1538054874, 1538228285): 7045 (1538194886) 974529 (1538190748) 514184 (1538072518) 86223 (1538088310) 689794 (1538180761) 867151 (1538159622) 346317 (1538095091) 339664 (1538185498) 228397 (1538058574) 21719 (1538101855) 587411 (1538113414) 351589 (1538187008) 593681 (1538067312) 19727 (1538107724) 364895 (1538060120) 800303 (1538147892) 111704 (1538070628) 846087 (1538062792) 505678 (1538055601) 993432 (1538138179) 556955 (1538152652) 200319 (1538194310) 214699 (1538094842) 745686 (1538143830) 872231 (1538169383) 262557 (1538222323) 390791 (1538056091) 33604 (1538165713) 555213 (1538146855) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.981 1.006 1.047 1.052 1.070 1.075 1.076 1.101 1.103 1.124 1.136 1.139 1.140 1.143 1.145 1.151 1.155 1.157 1.163 1.168 1.199 1.200 1.214 1.222 1.225 1.249 1.256 1.259 1.290 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1506909292, 1507230692): 80546 (1507132298) 827419 (1507142402) 724407 (1507017173) 980669 (1507135275) 879114 (1507046281) 848588 (1506958381) 741138 (1507051287) 550738 (1507215860) 483003 (1507147237) 392021 (1507037262) 530409 (1507195997) 810156 (1507209764) 911467 (1507058832) 832565 (1507050107) 380227 (1506999264) 556442 (1507057488) 183134 (1506969609) 703032 (1506916268) 611001 (1507147395) 785001 (1507124632) 971874 (1507162582) 335913 (1506998499) 228497 (1506912775) 805340 (1506981228) 762576 (1506975836) 328109 (1506948896) 882462 (1506954649) 263647 (1507067830) 898984 (1506959836) 51518 (1507059302) 235855 (1506978671) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.179 0.257 0.262 0.276 0.290 0.293 0.304 0.307 0.325 0.336 0.339 0.340 0.340 0.350 0.359 0.362 0.363 0.363 0.378 0.389 0.398 0.412 0.449 0.455 0.465 0.481 0.511 0.542 0.595 0.667 0.736 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1552519107, 1552626645): 167260 (1552588486) 150896 (1552595157) 847695 (1552610954) 853316 (1552534618) 75461 (1552582672) 830100 (1552614396) 95773 (1552560774) 609325 (1552583949) 974118 (1552566634) 792824 (1552550107) 606622 (1552572423) 893995 (1552551614) 810187 (1552550444) 618598 (1552524240) 624671 (1552572153) 881882 (1552539871) 535492 (1552589209) 621752 (1552530420) 950755 (1552520137) 10043 (1552540173) 964886 (1552538756) 650586 (1552543955) 263319 (1552565043) 831447 (1552523634) 487385 (1552524473) 823555 (1552620368) 825121 (1552557189) 992464 (1552523811) 45940 (1552582251) 140064 (1552608448) 481360 (1552556930) 558070 (1552622729) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.362 0.363 0.395 0.406 0.413 0.432 0.435 0.440 0.442 0.443 0.443 0.443 0.444 0.445 0.459 0.464 0.478 0.483 0.498 0.506 0.506 0.512 0.520 0.525 0.526 0.546 0.557 0.563 0.564 0.579 0.602 0.650 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1586951418, 1587012565): 549134 (1586977461) 906513 (1586962259) 296186 (1586968607) 678133 (1586959034) 872475 (1586961587) 754085 (1586980563) 957612 (1586989955) 799000 (1586961952) 185961 (1586974425) 295882 (1586984659) 74214 (1586968496) 501334 (1586969104) 322066 (1586976202) 139388 (1586959452) 764520 (1586975699) 667963 (1587004205) 251534 (1586960773) 651197 (1586955761) 786788 (1586969663) 200905 (1586996445) 371596 (1587005720) 757623 (1586993748) 461437 (1586971752) 208421 (1586972180) 527950 (1586974843) 115327 (1586999841) 885311 (1586966985) 211360 (1587002883) 472395 (1586997133) 87636 (1587009460) 357634 (1586958973) 758593 (1586954180) 908385 (1586998963) 888571 (1586997978) 454839 (1586978917) 18600 (1586951515) 622539 (1586975221) 396190 (1586983332) 263725 (1586984082) 578748 (1587005689) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.658 0.668 0.669 0.678 0.690 0.703 0.717 0.722 0.745 0.753 0.753 0.759 0.765 0.770 0.779 0.779 0.792 0.803 0.822 0.836 0.852 0.854 0.856 0.859 0.874 0.876 0.880 0.882 0.891 0.897 0.909 0.918 0.928 0.934 0.949 0.949 0.969 0.989 1.042 1.054 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1549236779, 1549369643): 659847 (1549307861) 965697 (1549315582) 137757 (1549310803) 914372 (1549316996) 808259 (1549285505) 211569 (1549255285) 679863 (1549248426) 786040 (1549297162) 593569 (1549322629) 949452 (1549302262) 466756 (1549300604) 884654 (1549275772) 322188 (1549294009) 299981 (1549312646) 362461 (1549304154) 765109 (1549347250) 168128 (1549314021) 247221 (1549325848) 41723 (1549249445) 31809 (1549354213) 888523 (1549240981) 96607 (1549301991) 475526 (1549255381) 95750 (1549238066) 84542 (1549320578) 396798 (1549305602) 376490 (1549294026) 356418 (1549332247) 937969 (1549351669) 695950 (1549263731) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.427 0.446 0.474 0.477 0.480 0.482 0.488 0.528 0.534 0.541 0.541 0.543 0.544 0.548 0.551 0.558 0.565 0.592 0.599 0.608 0.628 0.629 0.633 0.658 0.661 0.667 0.667 0.685 0.725 0.725 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 114.830s ] *** Query time: 105.594
qps: 94.702
 *** ivfpq recall 
ivfpq get 302043 postive res from 1000000 results, recall@100:0.302
recall dist(10% per bucket): 0.002 0.091 0.391 0.382 0.122 0.012 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 114.860s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/ivfpq/index/index_ivfpq_sel_1_100000_real_512 120 512"
	User time (seconds): 113.44
	System time (seconds): 1.60
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:55.06
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2621928
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 717642
	Voluntary context switches: 1
	Involuntary context switches: 201
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
