

===============================================================================================================
START: generating groundtruth

N: 1000000
dataset: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
attr: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
qrange: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
output: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
topk: 10
dim: 512
thread_num: 128
start
[2.434 s] Loaded dataset, size=1000000, dim=512
[2.752 s] Loaded attr, size=1000000
[2.752 s] Loading query vectors and attributes
query vecs data loaded, with dim: 512, size=10000
[2.780 s] Loaded query vectors
[2.786 s] Loaded 10000 queries
====================Vectors====================

[60.663 s] Loading database
data loaded, with dim: 512, nb=1000000
[60.663 s] Indexing database, size 1000000*512 from max 1000000
[62.070 s] Adding the vectors to the index
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
====================INDEX====================
[62.219 s] Searching the 10 nearest neighbors of 10000 vectors in the index
here1
nn and dis size: 100000 100000
[62.547 s] Query 0 done, time: 0.295
[64.335 s] Query 6100 done, time: 114.322
[64.485 s] Query 2200 done, time: 139.184
[64.546 s] Query 9300 done, time: 146.198
[67.191 s] Query 8600 done, time: 493.698
[67.848 s] Query 5400 done, time: 575.280
[69.113 s] Query 400 done, time: 731.125
[69.511 s] Query 1500 done, time: 783.906
[69.788 s] Query 7900 done, time: 822.317
[70.585 s] Query 4700 done, time: 919.621
[72.578 s] Query 4000 done, time: 1170.351
[74.973 s] Query 2600 done, time: 1482.278
[75.084 s] Query 7600 done, time: 1494.288
[75.235 s] Query 3300 done, time: 1515.040
[76.263 s] Query 9700 done, time: 1628.727
[76.339 s] Query 100 done, time: 1650.088
[77.326 s] Query 1200 done, time: 1761.835
[78.210 s] Query 7200 done, time: 1897.158
[78.945 s] Query 5800 done, time: 1954.547
[80.212 s] Query 5100 done, time: 2120.843
[80.566 s] Query 6200 done, time: 2153.806
[80.684 s] Query 6500 done, time: 2178.296
[82.247 s] Query 800 done, time: 2378.317
[82.623 s] Query 9000 done, time: 2409.320
[82.687 s] Query 1900 done, time: 2423.793
[82.798 s] Query 9400 done, time: 2441.923
[83.549 s] Query 1600 done, time: 2536.038
[84.094 s] Query 7300 done, time: 2596.322
[85.119 s] Query 3700 done, time: 2731.215
[86.636 s] Query 8300 done, time: 2921.951
[87.428 s] Query 4400 done, time: 3022.912
[87.660 s] Query 2000 done, time: 3044.002
[88.313 s] Query 3000 done, time: 3126.182
[88.987 s] Query 5200 done, time: 3208.258
[89.913 s] Query 9100 done, time: 3317.069
[91.036 s] Query 8700 done, time: 3465.404
[91.067 s] Query 900 done, time: 3472.189
[91.562 s] Query 4800 done, time: 3536.592
[92.542 s] Query 8400 done, time: 3644.865
[92.648 s] Query 2300 done, time: 3660.544
[93.776 s] Query 4100 done, time: 3793.060
[94.454 s] Query 6900 done, time: 3883.911
[97.269 s] Query 5500 done, time: 4205.316
[101.348 s] Query 500 done, time: 4694.534
[101.444 s] Query 1300 done, time: 4703.406
[101.875 s] Query 8000 done, time: 4758.620
[102.410 s] Query 2700 done, time: 4826.001
[102.508 s] Query 3400 done, time: 4839.515
[103.409 s] Query 9800 done, time: 4948.891
[103.638 s] Query 6600 done, time: 4969.048
[105.587 s] Query 5900 done, time: 5223.993
[106.447 s] Query 7700 done, time: 5318.026
[106.842 s] Query 5600 done, time: 5372.199
[107.799 s] Query 2800 done, time: 5484.354
[108.328 s] Query 600 done, time: 5552.101
[109.109 s] Query 200 done, time: 5650.111
[109.633 s] Query 4600 done, time: 5706.828
[110.182 s] Query 4500 done, time: 5780.456
[110.652 s] Query 4900 done, time: 5839.970
[110.761 s] Query 300 done, time: 5857.423
[111.603 s] Query 2400 done, time: 5958.772
[112.766 s] Query 8800 done, time: 6103.669
[114.189 s] Query 6700 done, time: 6269.069
[115.768 s] Query 1700 done, time: 6464.066
[115.820 s] Query 8500 done, time: 6473.235
[116.100 s] Query 3100 done, time: 6510.082
[116.393 s] Query 6300 done, time: 6547.223
[116.672 s] Query 3800 done, time: 6577.775
[117.061 s] Query 7000 done, time: 6618.742
[117.874 s] Query 9900 done, time: 6727.000
[119.731 s] Query 1000 done, time: 6943.893
[120.015 s] Query 9200 done, time: 6985.257
[120.691 s] Query 700 done, time: 7063.594
[123.017 s] Query 3900 done, time: 7333.896
[123.324 s] Query 4200 done, time: 7372.396
[124.519 s] Query 4300 done, time: 7509.655
[124.621 s] Query 2900 done, time: 7519.982
[124.975 s] Query 9500 done, time: 7568.061
[125.182 s] Query 3500 done, time: 7586.307
[125.340 s] Query 8200 done, time: 7604.193
[125.966 s] Query 3200 done, time: 7674.270
[127.074 s] Query 8100 done, time: 7797.399
[128.203 s] Query 7400 done, time: 7925.265
[128.919 s] Query 7100 done, time: 7998.618
[129.295 s] Query 5700 done, time: 8047.901
[130.895 s] Query 2100 done, time: 8212.696
[131.846 s] Query 1400 done, time: 8301.491
[131.898 s] Query 9600 done, time: 8307.286
[133.637 s] Query 3600 done, time: 8475.294
[133.924 s] Query 5300 done, time: 8497.609
[134.937 s] Query 2500 done, time: 8592.900
[135.588 s] Query 7800 done, time: 8650.159
[137.498 s] Query 6000 done, time: 8811.346
[138.559 s] Query 7500 done, time: 8894.135
[139.182 s] Query 5000 done, time: 8932.164
[139.547 s] Query 1100 done, time: 8954.007
[139.564 s] Query 8900 done, time: 8955.074
[139.579 s] Query 6400 done, time: 8955.424
[140.821 s] Query 1800 done, time: 9023.505
[141.282 s] Query 6800 done, time: 9048.040
[146.975 s] Query results (vector ids, then distances):
query 0, qrange {6, 1058, 84346}
      nns 0 id:727106 attr:6 dis:0.62867
      nns 1 id:562528 attr:19 dis:0.640719
      nns 2 id:646437 attr:4080 dis:0.695654
      nns 3 id:864174 attr:6 dis:0.743074
      nns 4 id:451328 attr:6 dis:0.74962
      nns 5 id:7102 attr:10 dis:0.758227
      nns 6 id:64073 attr:3080 dis:0.759647
      nns 7 id:302070 attr:6 dis:0.76279
      nns 8 id:812018 attr:10 dis:0.766257
      nns 9 id:880422 attr:10 dis:0.768696

query 1, qrange {6, 7061, 90400}
      nns 0 id:741325 attr:9382 dis:0.0996124
      nns 1 id:660394 attr:19 dis:0.102913
      nns 2 id:622447 attr:83917 dis:0.102932
      nns 3 id:964028 attr:6 dis:0.105621
      nns 4 id:199154 attr:6 dis:0.106245
      nns 5 id:361663 attr:21698 dis:0.10645
      nns 6 id:427146 attr:6 dis:0.106461
      nns 7 id:361537 attr:83842 dis:0.107414
      nns 8 id:428754 attr:6 dis:0.107467
      nns 9 id:30989 attr:38653 dis:0.108569

query 2, qrange {6, 16654, 99978}
      nns 0 id:355537 attr:64184 dis:0.223724
      nns 1 id:880455 attr:86265 dis:0.225104
      nns 2 id:964377 attr:94796 dis:0.226265
      nns 3 id:306439 attr:57083 dis:0.237904
      nns 4 id:757728 attr:6 dis:0.240495
      nns 5 id:193180 attr:10 dis:0.248944
      nns 6 id:75885 attr:4390 dis:0.256426
      nns 7 id:410774 attr:10 dis:0.258191
      nns 8 id:620585 attr:91800 dis:0.259367
      nns 9 id:273250 attr:10 dis:0.262197

query 3, qrange {6, 310, 83602}
      nns 0 id:689368 attr:6 dis:0.403229
      nns 1 id:124464 attr:6 dis:0.448711
      nns 2 id:595884 attr:10 dis:0.462322
      nns 3 id:461110 attr:6 dis:0.462457
      nns 4 id:889856 attr:10 dis:0.464965
      nns 5 id:609006 attr:10 dis:0.465148
      nns 6 id:306883 attr:54086 dis:0.476244
      nns 7 id:213744 attr:6 dis:0.47694
      nns 8 id:483626 attr:6 dis:0.495982
      nns 9 id:128901 attr:75430 dis:0.496684

query 4, qrange {6, 10534, 93885}
      nns 0 id:582698 attr:10 dis:0.259985
      nns 1 id:189529 attr:80737 dis:0.281352
      nns 2 id:931553 attr:69580 dis:0.283668
      nns 3 id:598411 attr:49936 dis:0.286029
      nns 4 id:892178 attr:6 dis:0.288327
      nns 5 id:421184 attr:10 dis:0.288926
      nns 6 id:315361 attr:25656 dis:0.29357
      nns 7 id:886608 attr:20 dis:0.297353
      nns 8 id:191044 attr:6 dis:0.299727
      nns 9 id:227862 attr:10 dis:0.301145

[146.975 s] *** Query time: 9144.201288
qps:1.09359
cmp per query:1000000
recall: 1 of course
sel distribution: 0 0 0 0 0 1 0 0 0 0 0 
selectivity: 0.500608
finished base index examples
====================WRITING====================
==================WRITING DONE=================
[146.988 s] -----DONE-----
	Command being timed: "../faiss/build/demos/generate_groundtruth_arbi 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json 10 512 128"
	User time (seconds): 5159.62
	System time (seconds): 16.91
	Percent of CPU this job got: 3518%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:27.12
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4044800
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4388781
	Voluntary context switches: 18766
	Involuntary context switches: 971098
	Swaps: 0
	File system inputs: 0
	File system outputs: 1624
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0


===============================================================================================================
START: generating groundtruth

N: 1000000
dataset: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
attr: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
qrange: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
output: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json
topk: 10
dim: 512
thread_num: 128
start
[1.307 s] Loaded dataset, size=1000000, dim=512
[1.552 s] Loaded attr, size=1000000
[1.552 s] Loading query vectors and attributes
query vecs data loaded, with dim: 512, size=10000
[1.568 s] Loaded query vectors
[1.573 s] Loaded 10000 queries
====================Vectors====================

[43.085 s] Loading database
data loaded, with dim: 512, nb=1000000
[43.085 s] Indexing database, size 1000000*512 from max 1000000
[44.025 s] Adding the vectors to the index
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
====================INDEX====================
[44.120 s] Searching the 10 nearest neighbors of 10000 vectors in the index
here1
nn and dis size: 100000 100000
[44.390 s] Query 0 done, time: 0.571
[44.395 s] Query 6100 done, time: 1.094
[44.449 s] Query 2200 done, time: 8.767
[44.743 s] Query 1500 done, time: 18.180
[44.837 s] Query 9300 done, time: 21.205
[44.958 s] Query 5400 done, time: 26.722
[45.341 s] Query 8600 done, time: 41.803
[45.489 s] Query 4700 done, time: 46.147
[45.785 s] Query 4000 done, time: 58.729
[45.812 s] Query 400 done, time: 60.244
[46.045 s] Query 7900 done, time: 68.019
[46.503 s] Query 3300 done, time: 86.455
[46.552 s] Query 6500 done, time: 88.243
[46.861 s] Query 800 done, time: 101.092
[47.070 s] Query 1900 done, time: 109.327
[47.153 s] Query 5800 done, time: 113.755
[47.250 s] Query 9700 done, time: 117.916
[47.426 s] Query 2600 done, time: 124.872
[47.628 s] Query 7200 done, time: 132.127
[47.821 s] Query 9000 done, time: 141.680
[48.493 s] Query 4400 done, time: 169.104
[48.713 s] Query 3700 done, time: 177.552
[48.713 s] Query 8300 done, time: 177.650
[49.013 s] Query 7600 done, time: 190.662
[49.138 s] Query 100 done, time: 197.449
[49.178 s] Query 1200 done, time: 198.616
[49.237 s] Query 3000 done, time: 200.588
[49.239 s] Query 5100 done, time: 200.938
[49.768 s] Query 6900 done, time: 224.552
[50.108 s] Query 2300 done, time: 238.398
[50.242 s] Query 6200 done, time: 244.223
[50.376 s] Query 9400 done, time: 250.009
[50.837 s] Query 500 done, time: 268.288
[50.874 s] Query 5500 done, time: 270.782
[51.004 s] Query 8700 done, time: 274.650
[51.250 s] Query 1600 done, time: 285.209
[51.375 s] Query 7300 done, time: 290.449
[51.726 s] Query 4800 done, time: 306.243
[51.871 s] Query 4100 done, time: 311.863
[52.446 s] Query 8000 done, time: 336.304
[52.765 s] Query 3400 done, time: 349.927
[52.831 s] Query 6600 done, time: 353.807
[53.013 s] Query 900 done, time: 362.703
[53.067 s] Query 2700 done, time: 364.160
[53.133 s] Query 5200 done, time: 366.264
[53.512 s] Query 8400 done, time: 382.239
[53.603 s] Query 1300 done, time: 386.401
[53.696 s] Query 5900 done, time: 391.042
[53.849 s] Query 9800 done, time: 396.519
[54.047 s] Query 7700 done, time: 404.317
[54.261 s] Query 2400 done, time: 412.185
[54.366 s] Query 9100 done, time: 417.567
[54.535 s] Query 2000 done, time: 423.696
[54.995 s] Query 3100 done, time: 444.420
[55.527 s] Query 3800 done, time: 466.247
[55.722 s] Query 7000 done, time: 473.615
[55.799 s] Query 4500 done, time: 477.502
[55.865 s] Query 8100 done, time: 480.812
[56.020 s] Query 5600 done, time: 485.563
[56.120 s] Query 600 done, time: 492.704
[56.326 s] Query 6000 done, time: 499.540
[56.762 s] Query 4900 done, time: 515.126
[56.799 s] Query 6300 done, time: 517.077
[56.870 s] Query 1700 done, time: 520.245
[56.929 s] Query 7400 done, time: 522.368
[57.557 s] Query 9500 done, time: 548.182
[57.563 s] Query 8800 done, time: 548.587
[57.638 s] Query 6700 done, time: 552.158
[58.001 s] Query 4200 done, time: 566.279
[58.001 s] Query 1000 done, time: 566.499
[58.094 s] Query 200 done, time: 569.323
[58.105 s] Query 2800 done, time: 570.491
[58.161 s] Query 9900 done, time: 572.077
[58.222 s] Query 3500 done, time: 574.520
[58.793 s] Query 5300 done, time: 598.616
[59.107 s] Query 7100 done, time: 611.804
[59.350 s] Query 9200 done, time: 621.427
[59.472 s] Query 300 done, time: 627.148
[59.603 s] Query 8500 done, time: 632.368
[59.888 s] Query 1800 done, time: 644.073
[59.888 s] Query 3900 done, time: 644.073
[59.917 s] Query 2500 done, time: 645.340
[60.220 s] Query 5700 done, time: 657.926
[60.279 s] Query 1400 done, time: 660.572
[61.296 s] Query 8900 done, time: 699.885
[61.416 s] Query 3200 done, time: 705.388
[61.796 s] Query 2900 done, time: 720.654
[62.009 s] Query 7800 done, time: 730.496
[62.090 s] Query 2100 done, time: 732.414
[62.264 s] Query 6400 done, time: 739.813
[62.507 s] Query 9600 done, time: 748.275
[62.751 s] Query 4600 done, time: 757.984
[62.931 s] Query 700 done, time: 764.840
[63.198 s] Query 5000 done, time: 774.681
[63.330 s] Query 4300 done, time: 779.654
[63.573 s] Query 8200 done, time: 788.425
[63.849 s] Query 7500 done, time: 798.070
[63.985 s] Query 1100 done, time: 802.351
[64.017 s] Query 3600 done, time: 803.364
[64.182 s] Query 6800 done, time: 807.812
[64.553 s] Query results (vector ids, then distances):
query 0, qrange {10, 66234, 99627}
      nns 0 id:268161 attr:96264 dis:0.659009
      nns 1 id:549163 attr:84314 dis:0.765075
      nns 2 id:334544 attr:10 dis:0.805453
      nns 3 id:766737 attr:23599 dis:0.814754
      nns 4 id:49228 attr:10 dis:0.82794
      nns 5 id:606467 attr:78112 dis:0.843419
      nns 6 id:966405 attr:71092 dis:0.850335
      nns 7 id:403801 attr:91519 dis:0.850361
      nns 8 id:596166 attr:6 dis:0.854261
      nns 9 id:389664 attr:10 dis:0.864291

query 1, qrange {10, 15875, 49153}
      nns 0 id:728340 attr:6 dis:0.10094
      nns 1 id:803332 attr:10 dis:0.106259
      nns 2 id:896567 attr:65282 dis:0.11101
      nns 3 id:7931 attr:93555 dis:0.114049
      nns 4 id:399497 attr:54572 dis:0.117612
      nns 5 id:85059 attr:61117 dis:0.1183
      nns 6 id:441534 attr:6 dis:0.1183
      nns 7 id:857939 attr:9912 dis:0.121997
      nns 8 id:377202 attr:6 dis:0.123971
      nns 9 id:779657 attr:40034 dis:0.124016

query 2, qrange {10, 5684, 39001}
      nns 0 id:940490 attr:6 dis:0.245712
      nns 1 id:301614 attr:6 dis:0.262369
      nns 2 id:773055 attr:93844 dis:0.265336
      nns 3 id:771849 attr:63559 dis:0.265403
      nns 4 id:718316 attr:10 dis:0.267935
      nns 5 id:530996 attr:10 dis:0.275327
      nns 6 id:494541 attr:94906 dis:0.276157
      nns 7 id:995900 attr:10 dis:0.277022
      nns 8 id:328089 attr:60955 dis:0.280081
      nns 9 id:41616 attr:6 dis:0.282325

query 3, qrange {10, 34629, 67933}
      nns 0 id:640717 attr:73295 dis:0.455442
      nns 1 id:108295 attr:63497 dis:0.508483
      nns 2 id:305237 attr:27829 dis:0.512706
      nns 3 id:276603 attr:94801 dis:0.519778
      nns 4 id:269754 attr:10 dis:0.520129
      nns 5 id:469326 attr:6 dis:0.525951
      nns 6 id:219959 attr:83862 dis:0.53007
      nns 7 id:480974 attr:6 dis:0.537561
      nns 8 id:799434 attr:10 dis:0.539082
      nns 9 id:433518 attr:10 dis:0.549019

query 4, qrange {10, 11515, 44854}
      nns 0 id:176027 attr:11855 dis:0.268897
      nns 1 id:695669 attr:51024 dis:0.269097
      nns 2 id:440553 attr:58185 dis:0.306572
      nns 3 id:742084 attr:6 dis:0.307977
      nns 4 id:311275 attr:89697 dis:0.322973
      nns 5 id:604239 attr:97615 dis:0.336084
      nns 6 id:601541 attr:40926 dis:0.336757
      nns 7 id:605725 attr:34136 dis:0.33719
      nns 8 id:487840 attr:6 dis:0.342906
      nns 9 id:65795 attr:43582 dis:0.343508

[64.554 s] *** Query time: 810.276678
qps:12.3415
cmp per query:1000000
recall: 1 of course
sel distribution: 0.8349 0.1651 0 0 0 0 0 0 0 0 0 
selectivity: 0.0997928
finished base index examples
====================WRITING====================
==================WRITING DONE=================
[64.561 s] -----DONE-----
	Command being timed: "../faiss/build/demos/generate_groundtruth_arbi 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json 10 512 128"
	User time (seconds): 2398.93
	System time (seconds): 6.40
	Percent of CPU this job got: 3716%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:04.72
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4044800
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1667371
	Voluntary context switches: 15745
	Involuntary context switches: 106056
	Swaps: 0
	File system inputs: 0
	File system outputs: 1624
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0


===============================================================================================================
START: generating groundtruth

N: 1000000
dataset: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
attr: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
qrange: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json
output: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_10.json
topk: 10
dim: 512
thread_num: 128
start
[1.383 s] Loaded dataset, size=1000000, dim=512
[1.514 s] Loaded attr, size=1000000
[1.514 s] Loading query vectors and attributes
query vecs data loaded, with dim: 512, size=10000
[1.527 s] Loaded query vectors
[1.529 s] Loaded 10000 queries
====================Vectors====================

[12.626 s] Loading database
data loaded, with dim: 512, nb=1000000
[12.626 s] Indexing database, size 1000000*512 from max 1000000
[13.908 s] Adding the vectors to the index
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
====================INDEX====================
[14.059 s] Searching the 10 nearest neighbors of 10000 vectors in the index
here1
nn and dis size: 100000 100000
[14.099 s] Query 2200 done, time: 0.204
[14.100 s] Query 0 done, time: 0.238
[14.120 s] Query 6100 done, time: 0.617
[14.194 s] Query 1500 done, time: 2.615
[14.195 s] Query 9300 done, time: 2.645
[14.210 s] Query 5400 done, time: 3.203
[14.278 s] Query 4700 done, time: 5.157
[14.339 s] Query 8600 done, time: 6.847
[14.379 s] Query 400 done, time: 7.996
[14.389 s] Query 4000 done, time: 8.218
[14.439 s] Query 7900 done, time: 9.772
[14.481 s] Query 3300 done, time: 10.803
[14.508 s] Query 7200 done, time: 11.425
[14.627 s] Query 800 done, time: 14.766
[14.639 s] Query 5800 done, time: 15.031
[14.640 s] Query 9700 done, time: 15.124
[14.641 s] Query 2600 done, time: 15.184
[14.720 s] Query 6500 done, time: 17.268
[14.727 s] Query 1900 done, time: 17.421
[14.796 s] Query 4400 done, time: 19.303
[14.796 s] Query 1200 done, time: 19.303
[14.801 s] Query 8300 done, time: 19.479
[14.826 s] Query 9000 done, time: 20.181
[14.862 s] Query 5100 done, time: 21.059
[14.959 s] Query 7600 done, time: 23.705
[15.000 s] Query 3000 done, time: 24.717
[15.027 s] Query 3700 done, time: 25.579
[15.053 s] Query 2300 done, time: 26.285
[15.134 s] Query 100 done, time: 28.400
[15.192 s] Query 1600 done, time: 29.996
[15.231 s] Query 6200 done, time: 31.051
[15.239 s] Query 6900 done, time: 31.349
[15.258 s] Query 500 done, time: 31.939
[15.340 s] Query 9400 done, time: 34.281
[15.412 s] Query 4800 done, time: 36.145
[15.424 s] Query 5500 done, time: 36.612
[15.509 s] Query 6600 done, time: 38.928
[15.541 s] Query 3400 done, time: 39.779
[15.563 s] Query 4100 done, time: 40.326
[15.576 s] Query 8700 done, time: 40.817
[15.593 s] Query 9800 done, time: 41.145
[15.604 s] Query 8000 done, time: 41.523
[15.638 s] Query 2000 done, time: 42.510
[15.734 s] Query 7300 done, time: 45.301
[15.736 s] Query 9100 done, time: 45.371
[15.797 s] Query 5200 done, time: 47.039
[15.858 s] Query 1300 done, time: 48.780
[15.873 s] Query 900 done, time: 49.162
[15.921 s] Query 3100 done, time: 50.536
[15.921 s] Query 4500 done, time: 50.641
[15.959 s] Query 7000 done, time: 51.528
[15.964 s] Query 7700 done, time: 51.891
[16.055 s] Query 8400 done, time: 54.386
[16.126 s] Query 3800 done, time: 56.136
[16.149 s] Query 5900 done, time: 56.814
[16.172 s] Query 2700 done, time: 57.643
[16.254 s] Query 8800 done, time: 59.883
[16.263 s] Query 2400 done, time: 60.153
[16.263 s] Query 600 done, time: 60.173
[16.269 s] Query 4900 done, time: 60.406
[16.284 s] Query 200 done, time: 60.762
[16.410 s] Query 1000 done, time: 64.423
[16.522 s] Query 1700 done, time: 67.603
[16.531 s] Query 6300 done, time: 67.766
[16.532 s] Query 5600 done, time: 67.826
[16.588 s] Query 9500 done, time: 69.453
[16.639 s] Query 4200 done, time: 70.901
[16.642 s] Query 8100 done, time: 71.035
[16.643 s] Query 6700 done, time: 71.202
[16.670 s] Query 3500 done, time: 71.803
[16.670 s] Query 6000 done, time: 71.838
[16.729 s] Query 4600 done, time: 73.297
[16.749 s] Query 9200 done, time: 73.998
[16.772 s] Query 8500 done, time: 74.614
[16.813 s] Query 1400 done, time: 75.646
[16.831 s] Query 5300 done, time: 76.281
[16.831 s] Query 2800 done, time: 76.291
[16.877 s] Query 9900 done, time: 77.663
[16.983 s] Query 7800 done, time: 80.447
[17.011 s] Query 2100 done, time: 81.260
[17.136 s] Query 700 done, time: 84.390
[17.172 s] Query 1800 done, time: 85.644
[17.174 s] Query 3900 done, time: 85.709
[17.291 s] Query 1100 done, time: 88.689
[17.306 s] Query 5700 done, time: 89.453
[17.309 s] Query 7100 done, time: 89.506
[17.313 s] Query 7400 done, time: 89.627
[17.376 s] Query 3200 done, time: 91.154
[17.461 s] Query 300 done, time: 93.482
[17.590 s] Query 2500 done, time: 97.134
[17.627 s] Query 8900 done, time: 98.013
[17.650 s] Query 6800 done, time: 98.569
[17.653 s] Query 5000 done, time: 98.635
[17.708 s] Query 9600 done, time: 99.810
[17.730 s] Query 6400 done, time: 100.265
[17.779 s] Query 8200 done, time: 101.133
[17.830 s] Query 3600 done, time: 102.320
[17.936 s] Query 2900 done, time: 104.083
[17.952 s] Query 4300 done, time: 104.304
[17.976 s] Query 7500 done, time: 104.442
[18.049 s] Query results (vector ids, then distances):
query 0, qrange {19, 7547, 27573}
      nns 0 id:460924 attr:6 dis:0.922161
      nns 1 id:26967 attr:42492 dis:0.94268
      nns 2 id:747872 attr:10 dis:0.946216
      nns 3 id:391803 attr:12568 dis:0.947112
      nns 4 id:123899 attr:21702 dis:0.957252
      nns 5 id:180898 attr:10 dis:0.958892
      nns 6 id:226432 attr:6 dis:0.964545
      nns 7 id:221361 attr:80695 dis:0.966765
      nns 8 id:197484 attr:6 dis:0.972951
      nns 9 id:588144 attr:6 dis:0.977746

query 1, qrange {19, 19289, 39230}
      nns 0 id:118532 attr:6 dis:0.117108
      nns 1 id:654319 attr:17154 dis:0.132165
      nns 2 id:584544 attr:6 dis:0.134107
      nns 3 id:946986 attr:10 dis:0.140307
      nns 4 id:889339 attr:29860 dis:0.140999
      nns 5 id:702451 attr:50331 dis:0.143504
      nns 6 id:145137 attr:64258 dis:0.143902
      nns 7 id:651702 attr:10 dis:0.14513
      nns 8 id:162918 attr:6 dis:0.14694
      nns 9 id:254995 attr:41592 dis:0.147519

query 2, qrange {19, 21121, 41068}
      nns 0 id:610678 attr:10 dis:0.283346
      nns 1 id:589140 attr:6 dis:0.287321
      nns 2 id:677414 attr:6 dis:0.323915
      nns 3 id:400571 attr:22940 dis:0.340656
      nns 4 id:897152 attr:6 dis:0.346126
      nns 5 id:925220 attr:6 dis:0.349655
      nns 6 id:449631 attr:8327 dis:0.350327
      nns 7 id:665365 attr:13297 dis:0.35655
      nns 8 id:999566 attr:10 dis:0.358535
      nns 9 id:551679 attr:50663 dis:0.359594

query 3, qrange {19, 28857, 48803}
      nns 0 id:725969 attr:89970 dis:0.525755
      nns 1 id:528192 attr:10 dis:0.57485
      nns 2 id:456993 attr:77323 dis:0.5808
      nns 3 id:860912 attr:10 dis:0.590843
      nns 4 id:329971 attr:81945 dis:0.593195
      nns 5 id:996191 attr:32188 dis:0.595381
      nns 6 id:82793 attr:71717 dis:0.60505
      nns 7 id:729567 attr:44365 dis:0.606852
      nns 8 id:170396 attr:10 dis:0.615806
      nns 9 id:64584 attr:10 dis:0.619645

query 4, qrange {19, 67584, 87612}
      nns 0 id:143565 attr:49212 dis:0.33081
      nns 1 id:98599 attr:5092 dis:0.344203
      nns 2 id:517879 attr:2309 dis:0.370042
      nns 3 id:151023 attr:41123 dis:0.374151
      nns 4 id:102916 attr:6 dis:0.37919
      nns 5 id:838409 attr:80116 dis:0.394332
      nns 6 id:96096 attr:6 dis:0.39621
      nns 7 id:660107 attr:67257 dis:0.396806
      nns 8 id:496003 attr:8720 dis:0.424243
      nns 9 id:224737 attr:96064 dis:0.426885

[18.049 s] *** Query time: 104.543240
qps:95.6542
cmp per query:1000000
recall: 1 of course
sel distribution: 1 0 0 0 0 0 0 0 0 0 0 
selectivity: 0.0100265
finished base index examples
====================WRITING====================
==================WRITING DONE=================
[18.065 s] -----DONE-----
	Command being timed: "../faiss/build/demos/generate_groundtruth_arbi 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_10.json 10 512 128"
	User time (seconds): 459.65
	System time (seconds): 3.88
	Percent of CPU this job got: 2538%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:18.25
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4043776
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1398851
	Voluntary context switches: 6167
	Involuntary context switches: 23467
	Swaps: 0
	File system inputs: 0
	File system outputs: 1584
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0


===============================================================================================================
START: generating groundtruth

N: 1000000
dataset: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
attr: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
qrange: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json
output: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_10.json
topk: 10
dim: 512
thread_num: 128
start
[1.337 s] Loaded dataset, size=1000000, dim=512
[1.471 s] Loaded attr, size=1000000
[1.471 s] Loading query vectors and attributes
query vecs data loaded, with dim: 512, size=10000
[1.485 s] Loaded query vectors
[1.488 s] Loaded 10000 queries
====================Vectors====================

[9.650 s] Loading database
data loaded, with dim: 512, nb=1000000
[9.650 s] Indexing database, size 1000000*512 from max 1000000
[10.672 s] Adding the vectors to the index
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
====================INDEX====================
[10.793 s] Searching the 10 nearest neighbors of 10000 vectors in the index
here1
nn and dis size: 100000 100000
[10.803 s] Query 0 done, time: 0.002
[10.813 s] Query 2200 done, time: 0.207
[10.816 s] Query 6100 done, time: 0.508
[10.830 s] Query 5400 done, time: 1.286
[10.833 s] Query 9300 done, time: 1.490
[10.843 s] Query 1500 done, time: 2.122
[10.845 s] Query 8600 done, time: 2.274
[10.848 s] Query 400 done, time: 2.463
[10.850 s] Query 4700 done, time: 2.592
[10.860 s] Query 7900 done, time: 3.251
[10.866 s] Query 4000 done, time: 3.598
[10.873 s] Query 3300 done, time: 4.048
[10.897 s] Query 6500 done, time: 5.413
[10.908 s] Query 9700 done, time: 6.085
[10.913 s] Query 1900 done, time: 6.349
[10.915 s] Query 2600 done, time: 6.461
[10.931 s] Query 1200 done, time: 7.410
[10.936 s] Query 9000 done, time: 7.691
[10.942 s] Query 5800 done, time: 8.058
[10.946 s] Query 4400 done, time: 8.291
[10.949 s] Query 5100 done, time: 8.487
[10.951 s] Query 8300 done, time: 8.606
[10.957 s] Query 3700 done, time: 8.888
[10.959 s] Query 7200 done, time: 9.048
[10.970 s] Query 800 done, time: 9.744
[10.976 s] Query 7600 done, time: 10.146
[10.982 s] Query 100 done, time: 10.428
[10.989 s] Query 3000 done, time: 10.883
[10.992 s] Query 6900 done, time: 11.011
[11.005 s] Query 6200 done, time: 11.874
[11.010 s] Query 4800 done, time: 12.210
[11.013 s] Query 5500 done, time: 12.354
[11.013 s] Query 2300 done, time: 12.410
[11.018 s] Query 1600 done, time: 12.650
[11.041 s] Query 8700 done, time: 14.066
[11.044 s] Query 8000 done, time: 14.163
[11.054 s] Query 4100 done, time: 14.867
[11.056 s] Query 9400 done, time: 14.927
[11.075 s] Query 7300 done, time: 15.977
[11.076 s] Query 900 done, time: 16.032
[11.076 s] Query 3400 done, time: 16.073
[11.080 s] Query 2700 done, time: 16.312
[11.089 s] Query 6600 done, time: 16.836
[11.099 s] Query 9800 done, time: 17.512
[11.111 s] Query 5900 done, time: 18.207
[11.114 s] Query 5200 done, time: 18.372
[11.115 s] Query 9100 done, time: 18.428
[11.129 s] Query 2000 done, time: 19.298
[11.155 s] Query 8400 done, time: 20.845
[11.156 s] Query 4500 done, time: 20.898
[11.160 s] Query 1300 done, time: 21.178
[11.164 s] Query 3800 done, time: 21.500
[11.182 s] Query 7000 done, time: 22.601
[11.182 s] Query 3100 done, time: 22.644
[11.190 s] Query 6300 done, time: 23.030
[11.193 s] Query 2400 done, time: 23.221
[11.194 s] Query 5600 done, time: 23.373
[11.205 s] Query 8800 done, time: 24.002
[11.206 s] Query 1700 done, time: 24.032
[11.220 s] Query 4900 done, time: 24.839
[11.225 s] Query 9500 done, time: 25.160
[11.244 s] Query 3500 done, time: 26.308
[11.248 s] Query 7400 done, time: 26.605
[11.253 s] Query 4200 done, time: 26.923
[11.253 s] Query 8100 done, time: 26.949
[11.271 s] Query 500 done, time: 27.996
[11.271 s] Query 2800 done, time: 28.041
[11.277 s] Query 6000 done, time: 28.335
[11.278 s] Query 1000 done, time: 28.388
[11.285 s] Query 2100 done, time: 28.822
[11.297 s] Query 5300 done, time: 29.523
[11.298 s] Query 9200 done, time: 29.643
[11.298 s] Query 6700 done, time: 29.651
[11.301 s] Query 9900 done, time: 29.744
[11.303 s] Query 200 done, time: 29.935
[11.317 s] Query 8500 done, time: 30.717
[11.341 s] Query 7800 done, time: 32.296
[11.344 s] Query 300 done, time: 32.397
[11.344 s] Query 3900 done, time: 32.404
[11.348 s] Query 7700 done, time: 32.651
[11.361 s] Query 3200 done, time: 33.448
[11.367 s] Query 6400 done, time: 33.835
[11.371 s] Query 7100 done, time: 34.101
[11.388 s] Query 5700 done, time: 35.079
[11.388 s] Query 1800 done, time: 35.119
[11.390 s] Query 9600 done, time: 35.248
[11.394 s] Query 2500 done, time: 35.469
[11.401 s] Query 700 done, time: 35.894
[11.415 s] Query 8200 done, time: 36.654
[11.416 s] Query 1100 done, time: 36.689
[11.435 s] Query 8900 done, time: 37.879
[11.437 s] Query 5000 done, time: 38.022
[11.452 s] Query 3600 done, time: 38.895
[11.464 s] Query 7500 done, time: 39.606
[11.467 s] Query 4300 done, time: 39.708
[11.480 s] Query 6800 done, time: 40.281
[11.481 s] Query 2900 done, time: 40.403
[11.509 s] Query 4600 done, time: 40.899
[11.523 s] Query 600 done, time: 41.076
[11.542 s] Query 1400 done, time: 41.258
[11.650 s] Query results (vector ids, then distances):
query 0, qrange {20, 62584, 65755}
      nns 0 id:773032 attr:6 dis:0.960266
      nns 1 id:160390 attr:6 dis:0.999368
      nns 2 id:808186 attr:19 dis:1.00735
      nns 3 id:599323 attr:85937 dis:1.01078
      nns 4 id:805745 attr:12976 dis:1.01724
      nns 5 id:342532 attr:10 dis:1.01953
      nns 6 id:936239 attr:3210 dis:1.02098
      nns 7 id:694741 attr:84944 dis:1.02479
      nns 8 id:721520 attr:6 dis:1.03208
      nns 9 id:36422 attr:6 dis:1.03267

query 1, qrange {20, 33359, 36530}
      nns 0 id:47436 attr:6 dis:0.164109
      nns 1 id:855537 attr:76169 dis:0.205397
      nns 2 id:849599 attr:4379 dis:0.235619
      nns 3 id:690014 attr:19 dis:0.285868
      nns 4 id:845155 attr:44800 dis:0.306373
      nns 5 id:379711 attr:78033 dis:0.322632
      nns 6 id:458546 attr:6 dis:0.339486
      nns 7 id:443187 attr:73344 dis:0.347093
      nns 8 id:310879 attr:61359 dis:0.359057
      nns 9 id:247027 attr:37826 dis:0.381668

query 2, qrange {20, 65022, 68166}
      nns 0 id:290984 attr:19 dis:0.314245
      nns 1 id:450764 attr:20 dis:0.348991
      nns 2 id:119482 attr:10 dis:0.367059
      nns 3 id:35487 attr:64046 dis:0.374194
      nns 4 id:97834 attr:10 dis:0.384056
      nns 5 id:967691 attr:15492 dis:0.385339
      nns 6 id:251841 attr:26391 dis:0.385376
      nns 7 id:374073 attr:99421 dis:0.390287
      nns 8 id:682890 attr:6 dis:0.393906
      nns 9 id:455911 attr:42086 dis:0.398976

query 3, qrange {20, 77495, 80696}
      nns 0 id:385406 attr:10 dis:0.616566
      nns 1 id:574303 attr:35127 dis:0.626718
      nns 2 id:615829 attr:83162 dis:0.65777
      nns 3 id:137689 attr:70082 dis:0.725514
      nns 4 id:868263 attr:17320 dis:0.733849
      nns 5 id:534088 attr:6 dis:0.737558
      nns 6 id:888873 attr:8339 dis:0.741158
      nns 7 id:990364 attr:6 dis:0.742552
      nns 8 id:370501 attr:87900 dis:0.748391
      nns 9 id:414702 attr:6 dis:0.749224

query 4, qrange {20, 53915, 57058}
      nns 0 id:561735 attr:60870 dis:0.411029
      nns 1 id:210342 attr:428 dis:0.416443
      nns 2 id:333272 attr:6 dis:0.442543
      nns 3 id:283898 attr:6 dis:0.454932
      nns 4 id:444339 attr:19879 dis:0.474139
      nns 5 id:427111 attr:26140 dis:0.483575
      nns 6 id:198779 attr:63298 dis:0.483641
      nns 7 id:773617 attr:61790 dis:0.490322
      nns 8 id:400844 attr:6 dis:0.495676
      nns 9 id:640147 attr:71174 dis:0.497181

[11.651 s] *** Query time: 41.835279
qps:239.033
cmp per query:1000000
recall: 1 of course
sel distribution: 1 0 0 0 0 0 0 0 0 0 0 
selectivity: 0.00100276
finished base index examples
====================WRITING====================
==================WRITING DONE=================
[11.660 s] -----DONE-----
	Command being timed: "../faiss/build/demos/generate_groundtruth_arbi 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_10.json 10 512 128"
	User time (seconds): 93.39
	System time (seconds): 2.64
	Percent of CPU this job got: 811%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:11.83
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4046848
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1052516
	Voluntary context switches: 897
	Involuntary context switches: 4163
	Swaps: 0
	File system inputs: 0
	File system outputs: 1608
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
