Start time: 06:36
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 500
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.071s ] Loaded metadata, 1000000 attr's found
[ 0.071s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.096s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.112s ] Loaded 10000 YTRGB1m queries
[ 0.142s ] Loaded ground truth, gt_size: 10
[ 0.142s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 10.036s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 74.993s ] Query results (vector ids, then distances):
query 0 nn's (1256, 1308): 510683 (1260) 776796 (1294) 857336 (1283) 242809 (1257) 847206 (1263) 700953 (1275) 972394 (1286) 301718 (1269) 379533 (1299) 229020 (1291) 
     dis: 	92.935 94.695 97.720 103.930 104.201 105.218 106.113 106.469 106.652 107.337 
query 1 nn's (8869, 9273): 853723 (9251) 289226 (9045) 899467 (9013) 146952 (9262) 67855 (9144) 189649 (9182) 39208 (9268) 867373 (8991) 726010 (9250) 474261 (8914) 
     dis: 	54.131 60.343 61.078 63.427 67.867 68.242 68.813 69.328 70.427 70.986 
query 2 nn's (1883, 1943): 476128 (1903) 620703 (1905) 891387 (1904) 159822 (1884) 862477 (1910) 236569 (1884) 735131 (1904) 388982 (1936) 281526 (1904) 248211 (1901) 
     dis: 	141.927 148.201 148.590 149.309 150.065 150.578 151.226 151.890 152.555 152.762 
query 3 nn's (3917, 4053): 609297 (3970) 132271 (4037) 963521 (4034) 749227 (3925) 387378 (4031) 45286 (4023) 150035 (3961) 439875 (4008) 254201 (3976) 701378 (3995) 
     dis: 	184.386 188.555 191.211 192.834 192.976 193.914 194.914 195.939 195.990 197.562 
query 4 nn's (6195, 6441): 266702 (6225) 619953 (6242) 82323 (6199) 246790 (6322) 477947 (6220) 133257 (6213) 782564 (6196) 291473 (6438) 59582 (6274) 276639 (6406) 
     dis: 	89.644 132.251 142.849 154.143 180.409 182.511 187.850 194.887 204.973 213.279 
[ 74.993s ] *** Query time: 58.990
qps: 169.519
 *** HNSW recall 
HNSW get 81913 postive res from 100000 results, recall@10:0.819
recall dist(10% per bucket): 0.000 0.001 0.004 0.011 0.024 0.048 0.084 0.124 0.181 0.243 0.281 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 168648525, average: 16864.853
finished ivfpq index examples
[ 74.995s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 500 1024"
	User time (seconds): 62.93
	System time (seconds): 5.95
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:15.31
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4385704
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1633488
	Voluntary context switches: 13312
	Involuntary context switches: 115
	Swaps: 0
	File system inputs: 1099664
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:40
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 500
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.073s ] Loaded metadata, 1000000 attr's found
[ 0.073s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.096s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.137s ] Loaded 10000 YTRGB1m queries
[ 0.186s ] Loaded ground truth, gt_size: 10
[ 0.186s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.881s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 59.833s ] Query results (vector ids, then distances):
query 0 nn's (2164, 2171): 509736 (2170) 733856 (2169) 81848 (2170) 398882 (2170) 951836 (2164) 648810 (2170) 342146 (2167) 537894 (2165) 2976 (2164) 968128 (2166) 
     dis: 	100.257 105.957 107.792 108.196 110.830 115.016 115.710 116.933 117.829 118.526 
query 1 nn's (4231, 4245): 210350 (4235) 189071 (4233) 658033 (4235) 19250 (4241) 846901 (4242) 284592 (4233) 919607 (4232) 767588 (4240) 68713 (4243) 354387 (4240) 
     dis: 	70.158 73.131 81.051 81.357 82.528 82.540 85.839 91.233 97.545 107.279 
query 2 nn's (24551, 24732): 661642 (24628) 14964 (24673) 706569 (24619) 868382 (24602) 793846 (24639) 85078 (24687) 592987 (24555) 943915 (24695) 54327 (24628) 787895 (24560) 
     dis: 	150.181 159.114 160.681 164.764 167.460 167.493 173.496 188.503 189.164 199.022 
query 3 nn's (2590, 2598): 845672 (2591) 163097 (2595) 724224 (2594) 485308 (2591) 224194 (2591) 376476 (2596) 789443 (2598) 461930 (2597) 879952 (2590) 756877 (2593) 
     dis: 	197.914 201.432 205.731 208.681 210.355 210.934 213.320 216.672 227.478 232.479 
query 4 nn's (5249, 5268): 297194 (5257) 995312 (5250) 389230 (5249) 509510 (5267) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	163.781 188.011 272.033 334.961 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 59.833s ] *** Query time: 51.153
qps: 195.493
 *** HNSW recall 
HNSW get 39205 postive res from 100000 results, recall@10:0.392
recall dist(10% per bucket): 0.037 0.095 0.144 0.170 0.170 0.145 0.120 0.068 0.033 0.014 0.003 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 168648525, average: 16864.853
finished ivfpq index examples
[ 59.834s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 500 1024"
	User time (seconds): 56.85
	System time (seconds): 3.11
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:00.05
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4388772
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095799
	Voluntary context switches: 9
	Involuntary context switches: 58
	Swaps: 0
	File system inputs: 8
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
