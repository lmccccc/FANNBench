Start time: 06:36
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 40
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.073s ] Loaded metadata, 1000000 attr's found
[ 0.073s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.095s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.110s ] Loaded 10000 YTRGB1m queries
[ 0.140s ] Loaded ground truth, gt_size: 10
[ 0.140s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 10.031s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 28.258s ] Query results (vector ids, then distances):
query 0 nn's (1256, 1308): 510683 (1260) 857336 (1283) 803931 (1273) 153834 (1285) 732933 (1292) 412995 (1292) 39540 (1257) 100399 (1279) -1 (0) -1 (0) 
     dis: 	92.935 97.720 113.698 126.230 135.478 144.220 176.611 201.508 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (8869, 9273): 853723 (9251) 289226 (9045) 899467 (9013) 189649 (9182) 39208 (9268) 474261 (8914) 737956 (9075) 909568 (9011) 845733 (9049) 147942 (9023) 
     dis: 	54.131 60.343 61.078 68.242 68.813 70.986 72.439 79.120 81.168 86.604 
query 2 nn's (1883, 1943): 476128 (1903) 620703 (1905) 891387 (1904) 568504 (1943) 290935 (1886) 172282 (1943) 736907 (1917) 729778 (1903) 983636 (1904) 814507 (1935) 
     dis: 	141.927 148.201 148.590 155.412 155.821 160.105 160.708 160.925 164.866 166.369 
query 3 nn's (3917, 4053): 387378 (4031) 373578 (3997) 762596 (3982) 304402 (3937) 850476 (4050) 261311 (3983) 744902 (4037) 114735 (3969) 445146 (3947) 666743 (4015) 
     dis: 	192.976 200.369 202.711 204.842 204.977 207.440 207.861 207.871 208.067 210.806 
query 4 nn's (6195, 6441): 266702 (6225) 619953 (6242) 82323 (6199) 246790 (6322) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	89.644 132.251 142.849 154.143 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 28.258s ] *** Query time: 12.801
qps: 781.217
 *** HNSW recall 
HNSW get 31642 postive res from 100000 results, recall@10:0.316
recall dist(10% per bucket): 0.068 0.146 0.194 0.194 0.158 0.112 0.070 0.037 0.018 0.004 0.001 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 18077818, average: 1807.782
finished ivfpq index examples
[ 28.260s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 40 1024"
	User time (seconds): 14.38
	System time (seconds): 7.77
	Percent of CPU this job got: 76%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:28.79
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4387748
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2099736
	Voluntary context switches: 13999
	Involuntary context switches: 41
	Swaps: 0
	File system inputs: 531584
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:40
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 40
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.073s ] Loaded metadata, 1000000 attr's found
[ 0.073s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.095s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.140s ] Loaded 10000 YTRGB1m queries
[ 0.188s ] Loaded ground truth, gt_size: 10
[ 0.188s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.017s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 17.580s ] Query results (vector ids, then distances):
query 0 nn's (2164, 2171): 509736 (2170) 733856 (2169) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	100.257 105.957 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (4231, 4245): 210350 (4235) 189071 (4233) 284592 (4233) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	70.158 73.131 82.540 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (24551, 24732): 943915 (24695) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	188.503 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (2590, 2598): 443198 (2590) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	255.151 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (5249, 5268): 297194 (5257) 995312 (5250) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	163.781 188.011 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 17.580s ] *** Query time: 9.714
qps: 1029.445
 *** HNSW recall 
HNSW get 7750 postive res from 100000 results, recall@10:0.077
recall dist(10% per bucket): 0.480 0.334 0.133 0.042 0.008 0.002 0.001 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 18077818, average: 1807.782
finished ivfpq index examples
[ 17.583s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 40 1024"
	User time (seconds): 14.49
	System time (seconds): 3.28
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:17.86
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4388776
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1170221
	Voluntary context switches: 8
	Involuntary context switches: 30
	Swaps: 0
	File system inputs: 128
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
