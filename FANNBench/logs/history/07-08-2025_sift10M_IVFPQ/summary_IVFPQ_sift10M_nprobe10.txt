Start time: 23:48
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.695s ] Loaded metadata, 10000000 attr's found
[ 0.695s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.698s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.699s ] Loaded 10000 sift10M queries
[ 0.767s ] Loaded ground truth, gt_size: 100
[ 0.767s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.130s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 74.880s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2515600 (6) 4738758 (6) 7077742 (6) 2923944 (6) 8191903 (6) 1928425 (6) 6984373 (6) 9313115 (6) 238649 (6) 9925949 (6) 5579551 (6) 7866119 (6) 7468388 (6) 6951413 (6) 1174332 (6) 9251169 (6) 5343331 (6) 8435256 (6) 2549151 (6) 1297904 (6) 5228659 (6) 463666 (6) 5916323 (6) 9409479 (6) 6019325 (6) 3879851 (6) 7011791 (6) 331007 (6) 2365415 (6) 4072432 (6) 6329451 (6) 476293 (6) 1249067 (6) 4698776 (6) 3022114 (6) 4396835 (6) 9237550 (6) 3094752 (6) 9501438 (6) 7051519 (6) 3049131 (6) 5376243 (6) 7699797 (6) 6253443 (6) 1432946 (6) 6616517 (6) 895148 (6) 8052577 (6) 4321174 (6) 796982 (6) 1588256 (6) 2913895 (6) 9562895 (6) 3366295 (6) 4670831 (6) 6967386 (6) 2707365 (6) 8615059 (6) 2814763 (6) 3884061 (6) 2478200 (6) 5116632 (6) 5072991 (6) 7280820 (6) 6494656 (6) 1963518 (6) 8446671 (6) 3128137 (6) 3947830 (6) 8600618 (6) 4859982 (6) 1339547 (6) 96647 (6) 6012029 (6) 3940464 (6) 308200 (6) 229081 (6) 767932 (6) 2226989 (6) 2785966 (6) 993401 (6) 1217356 (6) 8710437 (6) 3557735 (6) 6307312 (6) 3780750 (6) 221634 (6) 1990996 (6) 972308 (6) 418518 (6) 9803906 (6) 6819570 (6) 1433064 (6) 9915954 (6) 7099159 (6) 8727710 (6) 1567427 (6) 2324013 (6) 4056305 (6) 3195430 (6) 
     dis: 	73713.344 74449.000 75033.797 76887.211 76944.016 77713.047 79123.875 79160.625 79288.008 79460.570 79848.227 79879.164 80065.812 80255.836 80524.172 80605.602 81300.031 81425.648 82009.852 82618.562 82670.953 82689.266 82748.586 82767.234 83249.094 83737.773 83768.516 84183.234 84720.797 84782.445 85074.328 85113.727 85407.672 85799.977 85926.227 86023.672 86161.984 86347.859 86671.859 87058.258 87166.156 87301.820 87640.773 87649.508 87711.938 87728.766 87795.281 87841.156 88048.438 88233.508 88286.758 88337.414 88385.914 88503.148 88559.844 88598.047 88643.023 88661.977 88676.141 88695.617 88841.227 88869.875 88896.695 89044.367 89049.562 89215.664 89422.125 89433.211 89446.430 90094.312 90337.305 90588.438 90684.344 90724.094 90734.258 90779.430 90805.000 90875.680 91002.305 91002.984 91088.125 91208.125 91246.234 91346.344 91394.547 91442.203 91531.562 91562.883 91655.656 92026.594 92193.531 92221.234 92241.539 92336.672 92465.398 92530.234 92804.969 92809.945 92929.625 93004.266 
query 1 nn's (6, 6): 8449497 (6) 1273419 (6) 5552416 (6) 1263214 (6) 4234271 (6) 2253711 (6) 411491 (6) 1233453 (6) 9791343 (6) 9219153 (6) 469965 (6) 6265610 (6) 1909131 (6) 3309105 (6) 8596968 (6) 522429 (6) 7343838 (6) 1120308 (6) 7331745 (6) 7917424 (6) 2993914 (6) 9537422 (6) 1745130 (6) 5531491 (6) 5589386 (6) 9015118 (6) 7120642 (6) 1503119 (6) 375999 (6) 1843885 (6) 3631651 (6) 7692715 (6) 6986308 (6) 9167559 (6) 6073626 (6) 7693023 (6) 8918460 (6) 1526669 (6) 7031326 (6) 8590082 (6) 1346170 (6) 3786289 (6) 4702839 (6) 3050119 (6) 9577495 (6) 1341845 (6) 8440112 (6) 9553578 (6) 1410399 (6) 7342014 (6) 4364584 (6) 8518091 (6) 3744772 (6) 2652241 (6) 895436 (6) 1461697 (6) 6383821 (6) 4009753 (6) 2353489 (6) 5869072 (6) 3083636 (6) 963644 (6) 9868698 (6) 5790422 (6) 695127 (6) 4960102 (6) 2093850 (6) 3200275 (6) 3376639 (6) 3740235 (6) 1012664 (6) 2235415 (6) 8155958 (6) 3594866 (6) 7859261 (6) 7610510 (6) 3648617 (6) 7513620 (6) 8441546 (6) 109736 (6) 3435206 (6) 1932354 (6) 3041986 (6) 3813783 (6) 2027961 (6) 7807906 (6) 5349437 (6) 8488585 (6) 2800769 (6) 7664952 (6) 6672132 (6) 8899541 (6) 2048408 (6) 491814 (6) 8041031 (6) 8890276 (6) 5177998 (6) 6281612 (6) 658816 (6) 2555990 (6) 
     dis: 	34675.906 43367.484 44178.637 45585.180 46459.625 46911.375 46944.781 48208.215 50356.211 50457.156 50862.172 50865.762 50930.734 51774.984 52154.500 52287.395 52916.973 53769.281 54280.656 54321.969 54854.723 54862.301 55052.254 55684.723 55928.781 56188.117 56234.414 56283.613 56306.523 56602.234 56993.523 57096.102 57175.973 57215.098 57264.012 57562.402 57776.910 57839.293 57857.180 57993.969 58092.207 58428.172 58443.680 58487.938 59074.578 59334.367 60103.859 60146.551 61030.488 61074.191 61096.371 61106.062 61224.898 61280.977 61381.047 61403.609 61717.945 61839.684 62165.055 62304.578 63260.641 63355.734 63442.453 63463.910 63469.816 63530.359 63610.539 64252.609 64337.113 64469.559 64538.750 64733.453 65044.641 65057.215 65062.082 65109.535 65161.883 65287.883 65302.855 65643.906 65715.086 65892.430 65904.672 65911.609 65930.492 66006.016 66018.664 66174.453 66190.039 66298.781 66360.617 66583.852 66618.633 66656.820 66671.922 66752.320 66835.469 66864.461 66881.500 66888.617 
query 2 nn's (6, 6): 8667807 (6) 237844 (6) 2304211 (6) 4791170 (6) 9466222 (6) 2448858 (6) 7500565 (6) 6296252 (6) 5988705 (6) 9554416 (6) 9416415 (6) 6347813 (6) 9068473 (6) 893390 (6) 8863268 (6) 8068558 (6) 9410320 (6) 2994193 (6) 4757879 (6) 4279056 (6) 9362419 (6) 6114289 (6) 1329974 (6) 7701746 (6) 9457112 (6) 4555038 (6) 4048068 (6) 1229611 (6) 8915550 (6) 436139 (6) 9559093 (6) 7508409 (6) 419195 (6) 40266 (6) 9330360 (6) 1160482 (6) 8563094 (6) 8476333 (6) 9790465 (6) 8530462 (6) 1463083 (6) 8590994 (6) 5631784 (6) 888761 (6) 3567890 (6) 1956474 (6) 3795529 (6) 5596868 (6) 7011882 (6) 4135242 (6) 5563048 (6) 3061201 (6) 8690196 (6) 8635193 (6) 4713533 (6) 2319775 (6) 5619678 (6) 1860330 (6) 4822642 (6) 2723946 (6) 2038327 (6) 8333106 (6) 8759413 (6) 9384590 (6) 764856 (6) 6511526 (6) 3140269 (6) 1625792 (6) 4111853 (6) 1795636 (6) 2036301 (6) 8064334 (6) 1758192 (6) 1297680 (6) 1561941 (6) 2247452 (6) 1992904 (6) 8075681 (6) 4926809 (6) 4764797 (6) 1601079 (6) 9919092 (6) 8511243 (6) 9117020 (6) 27015 (6) 438531 (6) 3618200 (6) 2891769 (6) 2407252 (6) 1688252 (6) 8266810 (6) 8699826 (6) 1281556 (6) 6202123 (6) 4497755 (6) 247874 (6) 7879817 (6) 5228926 (6) 5520814 (6) 6300888 (6) 
     dis: 	47426.219 48618.285 48717.477 49081.809 50569.738 50719.492 50812.055 51111.473 51314.062 51949.832 52016.340 52399.180 52601.242 52645.602 52915.633 53144.305 53175.371 53371.535 53532.156 53604.242 53851.586 54263.848 54381.930 54475.680 54621.852 54675.426 54762.965 54814.926 55013.816 55137.418 55350.547 55581.117 55788.906 55882.117 56147.039 56225.535 56239.559 56410.578 56458.984 56664.164 56718.816 56800.223 57083.383 57520.980 57582.555 57704.797 57720.645 57830.797 58027.391 58036.250 58055.496 58144.371 58145.320 58162.898 58267.445 58374.852 58394.266 58465.961 58534.133 58541.184 58659.836 58708.711 58709.562 58745.953 58829.391 58927.723 59034.449 59043.293 59149.098 59343.828 59442.957 59493.871 59533.488 59581.746 59674.273 59689.031 59734.508 59838.828 59922.805 60050.113 60112.805 60122.664 60137.340 60232.332 60385.477 60460.508 60604.125 60673.090 60685.297 60685.590 60711.816 60750.867 60752.199 60766.379 60835.195 60843.766 60874.863 60885.707 60896.668 60933.305 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 8174765 (6) 3643741 (6) 1985932 (6) 2965607 (6) 7301932 (6) 3143192 (6) 9132978 (6) 9010353 (6) 8419826 (6) 3459738 (6) 1911911 (6) 727241 (6) 7914184 (6) 8649378 (6) 2218358 (6) 4998281 (6) 6411621 (6) 6760157 (6) 1739894 (6) 4246457 (6) 4486659 (6) 1514080 (6) 1344917 (6) 9019201 (6) 692217 (6) 5755561 (6) 6486623 (6) 3633444 (6) 7709017 (6) 9925791 (6) 2630576 (6) 992744 (6) 5792548 (6) 9625994 (6) 6804450 (6) 7691560 (6) 7119531 (6) 1028926 (6) 9335193 (6) 9354839 (6) 5430458 (6) 5777538 (6) 7749958 (6) 2168780 (6) 7614050 (6) 9517308 (6) 2236726 (6) 6317467 (6) 422848 (6) 840086 (6) 7865854 (6) 6697954 (6) 1502235 (6) 8702151 (6) 686764 (6) 9166 (6) 3252978 (6) 1133113 (6) 5293699 (6) 3828353 (6) 578322 (6) 936598 (6) 6346885 (6) 6281603 (6) 2659564 (6) 7556732 (6) 8344580 (6) 7463079 (6) 82034 (6) 9332155 (6) 8388591 (6) 9421859 (6) 1604878 (6) 7745448 (6) 1085693 (6) 3522530 (6) 5651613 (6) 1229577 (6) 9947826 (6) 9102009 (6) 6306155 (6) 9469929 (6) 5627714 (6) 7278201 (6) 2305251 (6) 5663020 (6) 8381527 (6) 3723247 (6) 1874032 (6) 2842840 (6) 4673685 (6) 5561400 (6) 7691164 (6) 8326154 (6) 5442116 (6) 9484002 (6) 
     dis: 	3992.139 4390.735 4460.316 4869.371 5049.834 5288.036 5306.944 5359.460 5486.950 5496.971 5537.525 5967.745 6124.554 6145.322 6174.690 6198.656 6241.693 6296.265 6305.340 6415.198 6483.879 6591.960 6747.278 6787.027 6964.243 7087.833 7147.005 7228.387 7241.440 7292.860 7326.905 7345.663 7460.148 7477.250 7478.721 7734.474 7766.236 7823.001 7929.480 7961.448 7965.099 7991.773 8005.697 8039.517 8119.035 8121.604 8180.301 8232.581 8248.738 8269.359 8279.927 8289.377 8330.717 8386.378 8450.070 8507.957 8566.945 8598.271 8652.689 8687.346 8701.215 8712.269 8737.256 8952.893 8970.202 8999.791 9076.889 9081.689 9123.775 9139.252 9211.904 9226.656 9265.918 9521.298 9572.715 9593.152 9597.407 9654.684 9656.084 9730.078 9745.374 9788.786 9809.697 9827.951 9869.879 9884.258 9998.140 10004.102 10022.454 10030.300 10109.354 10127.214 10128.482 10139.350 10169.544 10189.079 10216.834 10240.757 10259.992 10283.998 
query 4 nn's (6, 6): 3477074 (6) 1751938 (6) 769923 (6) 1850409 (6) 3495449 (6) 4158427 (6) 8756074 (6) 5314473 (6) 5707536 (6) 1272627 (6) 4719865 (6) 4331349 (6) 417315 (6) 8972367 (6) 2283262 (6) 330880 (6) 163735 (6) 1375658 (6) 2454280 (6) 9831067 (6) 6258948 (6) 6699578 (6) 6784852 (6) 2779329 (6) 5913705 (6) 3903546 (6) 1953827 (6) 2945464 (6) 2617346 (6) 1784595 (6) 3882262 (6) 9488326 (6) 6116720 (6) 5216743 (6) 2288117 (6) 5641404 (6) 2704497 (6) 2160380 (6) 3069927 (6) 6379872 (6) 5862862 (6) 2247722 (6) 2002058 (6) 2115629 (6) 2534624 (6) 2610222 (6) 9167103 (6) 5963276 (6) 1919553 (6) 3554205 (6) 2334258 (6) 4704136 (6) 1387396 (6) 4337818 (6) 5269483 (6) 1715676 (6) 4651630 (6) 9770946 (6) 3625321 (6) 1218866 (6) 4925842 (6) 5938785 (6) 3118155 (6) 1626005 (6) 9646602 (6) 2157689 (6) 1731694 (6) 3916947 (6) 5906273 (6) 7033857 (6) 6083758 (6) 1981145 (6) 963922 (6) 6652605 (6) 4454929 (6) 976407 (6) 6755029 (6) 7252399 (6) 3590722 (6) 7116114 (6) 9981439 (6) 4463149 (6) 7184665 (6) 2145472 (6) 9800522 (6) 280740 (6) 2455344 (6) 9790527 (6) 417612 (6) 7260539 (6) 9865532 (6) 8254535 (6) 9689820 (6) 5289476 (6) 1233316 (6) 377795 (6) 4297920 (6) 2562256 (6) 9412290 (6) 8498841 (6) 
     dis: 	81320.172 82020.328 85400.797 88166.188 90953.297 93389.141 93696.922 94164.961 94376.031 94447.328 94478.422 94622.734 94690.039 94829.570 95037.492 95185.766 95422.609 95619.711 95705.812 95803.266 95929.125 96058.508 96374.961 96487.570 96894.516 96964.695 97154.828 97155.922 97266.703 98315.453 99207.516 99578.062 99807.047 99877.398 99963.688 99979.609 100402.180 100617.773 100726.312 100850.812 101086.219 101102.578 101224.180 101225.766 101301.031 101424.586 101557.859 101758.914 101880.117 101938.609 101971.945 102363.797 102794.125 103003.500 103063.516 103283.141 103368.742 103439.594 103442.492 103581.023 103871.625 103918.336 103923.141 103934.547 104220.828 104248.461 104452.617 104455.141 104513.695 104817.500 104914.266 104922.531 105238.594 105373.602 105439.852 105571.539 105612.469 105618.719 105818.492 106170.141 106213.430 106397.930 106457.625 106756.828 106823.602 106962.977 107007.320 107086.766 107099.445 107099.555 107139.969 107277.062 107316.539 107350.141 107397.234 107423.484 107450.086 107567.984 107591.367 107662.945 
[ 74.881s ] *** Query time: 13.821
qps: 723.528
 *** ivfpq recall 
ivfpq get 598386 postive res from 1000000 results, recall@100:0.598
recall dist(10% per bucket): 0.001 0.009 0.061 0.131 0.157 0.155 0.134 0.122 0.122 0.109 0.000 
finished ivfpq index examples
[ 74.917s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 10 128"
	User time (seconds): 72.33
	System time (seconds): 1.85
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:15.06
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1604364
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 608029
	Voluntary context switches: 3098
	Involuntary context switches: 180
	Swaps: 0
	File system inputs: 73080
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:51
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.694s ] Loaded metadata, 10000000 attr's found
[ 0.694s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.697s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.698s ] Loaded 10000 sift10M queries
[ 0.766s ] Loaded ground truth, gt_size: 100
[ 0.766s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.225s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 70.411s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4160485 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 6002319 (10) 2051236 (10) 3474811 (10) 5128198 (10) 7842689 (10) 4586713 (10) 3068799 (10) 9584266 (10) 2702664 (10) 9082011 (10) 9541713 (10) 9823129 (10) 8423092 (10) 7868374 (10) 2312218 (10) 5008601 (10) 5327123 (10) 2260181 (10) 8031075 (10) 6258663 (10) 3252917 (10) 704919 (10) 4441695 (10) 6800399 (10) 8843894 (10) 4481800 (10) 9309037 (10) 1712794 (10) 4483915 (10) 9158543 (10) 1340784 (10) 9597643 (10) 7292419 (10) 2777973 (10) 7826129 (10) 4107644 (10) 2554600 (10) 8422122 (10) 9428046 (10) 9731665 (10) 3595632 (10) 6992352 (10) 3445007 (10) 6661910 (10) 814714 (10) 1515026 (10) 1549186 (10) 6232931 (10) 4358804 (10) 4441288 (10) 6892646 (10) 2586362 (10) 2130984 (10) 4336645 (10) 3824192 (10) 5964239 (10) 3704799 (10) 1356650 (10) 592287 (10) 362958 (10) 5152630 (10) 6984063 (10) 2501708 (10) 9821579 (10) 8633622 (10) 1698801 (10) 5027026 (10) 2711480 (10) 7417719 (10) 5274495 (10) 5104149 (10) 65587 (10) 129807 (10) 2963409 (10) 8124131 (10) 4276790 (10) 2918179 (10) 7892645 (10) 5312540 (10) 2204978 (10) 1982755 (10) 4870626 (10) 8330406 (10) 4841938 (10) 4452585 (10) 9483067 (10) 2855779 (10) 8135129 (10) 9979343 (10) 9391342 (10) 1675320 (10) 8838434 (10) 596461 (10) 7359590 (10) 698080 (10) 
     dis: 	65808.273 76505.367 78848.219 81671.602 82992.828 84146.875 85129.227 85938.086 86182.430 86398.547 86672.266 88167.461 88249.898 88691.742 89052.102 89736.297 89762.109 89791.359 90031.609 90107.117 90282.688 90627.117 90954.016 90957.234 91219.531 92029.258 92192.648 92315.133 92590.859 93077.773 93418.953 93470.672 93594.852 93670.516 93822.578 93933.766 94287.430 94290.750 94631.688 94700.812 95336.508 95707.633 95986.531 96365.711 96526.562 96849.859 96862.156 96867.312 97107.578 97861.617 98052.516 98176.711 98842.828 99169.812 99508.031 99579.750 99668.844 99673.859 99767.992 100024.547 100079.773 100349.906 100575.891 100783.164 100956.078 101079.648 101577.609 101753.898 101960.727 102091.266 102094.094 102200.031 102337.406 102518.648 102521.477 102827.562 103051.938 103114.109 103240.062 103304.656 103586.531 103847.703 103894.320 104060.172 104143.500 104156.789 104238.633 104332.008 105091.008 105091.180 105126.930 105245.969 105563.633 105749.203 106184.781 106215.805 106394.156 106441.336 106477.766 106603.734 
query 1 nn's (10, 10): 4907604 (10) 4922660 (10) 9933148 (10) 1887729 (10) 1259657 (10) 4689763 (10) 4512099 (10) 8588450 (10) 9349060 (10) 9211699 (10) 3665630 (10) 5226515 (10) 9913606 (10) 7502105 (10) 6674672 (10) 482087 (10) 2532663 (10) 9643854 (10) 4821002 (10) 8063568 (10) 1737968 (10) 1018756 (10) 6618543 (10) 3858730 (10) 5838578 (10) 3241120 (10) 8346283 (10) 2021990 (10) 7851813 (10) 5561330 (10) 6312393 (10) 2070607 (10) 2524359 (10) 9164450 (10) 5632105 (10) 5074486 (10) 9931915 (10) 4178652 (10) 5707690 (10) 801963 (10) 148395 (10) 9964913 (10) 4130277 (10) 9258708 (10) 2949812 (10) 9810387 (10) 3881464 (10) 8757781 (10) 643587 (10) 6579804 (10) 8549337 (10) 3335948 (10) 8881883 (10) 3553376 (10) 1589644 (10) 9220661 (10) 9275179 (10) 5013067 (10) 7379199 (10) 6742700 (10) 7546943 (10) 4357153 (10) 8448472 (10) 5682634 (10) 2749783 (10) 717773 (10) 1208441 (10) 9778277 (10) 4852337 (10) 3423010 (10) 6679899 (10) 2491875 (10) 8603784 (10) 296036 (10) 4221512 (10) 6216048 (10) 9329466 (10) 4226811 (10) 3709667 (10) 4116413 (10) 4813816 (10) 6755025 (10) 7256909 (10) 4774126 (10) 1966536 (10) 6710334 (10) 7352687 (10) 4734717 (10) 5023008 (10) 1743714 (10) 3995625 (10) 4671081 (10) 3170445 (10) 41847 (10) 2286033 (10) 379227 (10) 8935932 (10) 181177 (10) 5402736 (10) 5258400 (10) 
     dis: 	46325.406 53613.809 58435.215 58771.695 59024.137 59604.867 60561.609 60805.348 60923.992 61137.523 61351.906 62036.039 62185.766 62821.535 62901.809 63094.770 64794.828 65575.734 66044.539 66487.398 67115.039 67390.219 67606.312 68060.609 68088.328 68229.148 68439.836 68506.430 69079.711 69526.156 69646.016 70182.828 70275.859 70724.750 70846.703 71475.867 71659.414 71668.938 72083.453 72336.875 72455.211 72786.688 72878.055 73020.516 73158.539 73621.844 74096.547 74374.281 74606.008 74889.297 75413.578 75499.539 75707.039 76293.484 76307.523 76587.547 76661.586 76905.422 77170.797 77663.359 77799.922 77804.688 78245.734 78362.680 78447.445 79187.141 79424.836 79921.820 80137.711 80212.578 80427.789 80675.203 80734.742 80847.086 81152.766 81435.750 81559.500 81567.039 81762.766 81834.820 81861.219 81944.125 82131.234 82576.969 82579.203 82585.211 82605.172 83186.367 83290.766 83386.258 83773.062 83834.148 83908.406 84551.484 84635.609 85113.500 85126.828 85244.156 85373.000 85510.367 
query 2 nn's (10, 10): 3493381 (10) 5637368 (10) 4457160 (10) 2511585 (10) 1198061 (10) 4677344 (10) 5039283 (10) 944526 (10) 49352 (10) 6120728 (10) 2556455 (10) 3667879 (10) 4283746 (10) 3224964 (10) 4848879 (10) 4112561 (10) 9165964 (10) 3095363 (10) 4167330 (10) 9375728 (10) 7221663 (10) 8064263 (10) 5407857 (10) 5274336 (10) 1897720 (10) 8131606 (10) 9830393 (10) 8366019 (10) 4230661 (10) 8084363 (10) 1213154 (10) 1545324 (10) 9982250 (10) 4188703 (10) 4329845 (10) 9970439 (10) 2244705 (10) 419533 (10) 8394381 (10) 3579460 (10) 1418565 (10) 3134622 (10) 1066001 (10) 2652720 (10) 4105778 (10) 2721821 (10) 5638422 (10) 9844531 (10) 2945338 (10) 932507 (10) 1519384 (10) 1070039 (10) 6664994 (10) 7734472 (10) 3570008 (10) 6226545 (10) 6535335 (10) 113541 (10) 7912354 (10) 6070654 (10) 3574174 (10) 9987972 (10) 9257315 (10) 6501663 (10) 3906262 (10) 2499456 (10) 6816240 (10) 8927364 (10) 7384392 (10) 5905660 (10) 5156445 (10) 4571383 (10) 4792533 (10) 1645367 (10) 9767362 (10) 1427452 (10) 3197452 (10) 9255760 (10) 2401892 (10) 3815165 (10) 1767532 (10) 3955289 (10) 4184590 (10) 328944 (10) 319559 (10) 1528109 (10) 4995236 (10) 654756 (10) 5263351 (10) 5585764 (10) 3352436 (10) 9008325 (10) 5090038 (10) 6945654 (10) 216792 (10) 6150520 (10) 2757290 (10) 2873885 (10) 8940063 (10) 6579506 (10) 
     dis: 	50450.598 51124.438 51192.207 52887.113 53682.016 54733.289 56066.062 57075.965 58241.039 58566.074 58709.367 58817.020 59385.438 59812.055 61165.996 61197.766 61257.535 61696.172 61974.961 62081.977 62221.141 62231.758 62290.656 62373.047 62428.094 62798.352 64011.281 64160.453 64590.602 64610.164 65095.047 65298.398 65574.688 65640.664 65696.805 66282.258 66406.336 66434.398 66521.219 66847.633 67019.086 67177.719 67240.656 67733.344 67839.109 67843.781 67942.789 68017.273 68030.938 68173.156 68289.320 68583.352 68720.391 68787.914 68807.609 69118.109 69126.797 69230.086 69391.562 69403.398 69622.648 69762.297 69807.367 69831.328 70166.547 70172.617 70224.156 70309.000 70398.273 70464.344 70541.117 70786.484 70814.203 70883.367 70913.297 70948.336 70998.812 71019.984 71306.234 71528.406 71568.305 71638.930 71689.539 71697.070 71730.328 71839.391 71864.773 71869.203 71870.195 71885.297 72017.250 72069.922 72142.062 72336.312 72368.047 72467.094 72617.742 72716.945 72922.125 73058.344 
query 3 nn's (10, 10): 7269483 (10) 3278687 (10) 8381210 (10) 5381241 (10) 179529 (10) 8051314 (10) 3421950 (10) 1061321 (10) 222255 (10) 3112499 (10) 7216322 (10) 543054 (10) 7829631 (10) 4995291 (10) 3379947 (10) 240857 (10) 5619818 (10) 5026118 (10) 6711509 (10) 9906166 (10) 8372623 (10) 6447621 (10) 6934608 (10) 4189992 (10) 1896951 (10) 2464354 (10) 7505915 (10) 7127184 (10) 6485893 (10) 1656853 (10) 3877232 (10) 8420002 (10) 116302 (10) 3855680 (10) 3485217 (10) 7281219 (10) 406243 (10) 9927644 (10) 4759076 (10) 5661022 (10) 2648578 (10) 3649992 (10) 9231939 (10) 5122599 (10) 2393763 (10) 6993953 (10) 9664797 (10) 8013467 (10) 4593096 (10) 4117204 (10) 3547401 (10) 6468324 (10) 323107 (10) 6365231 (10) 2587214 (10) 3719519 (10) 9600421 (10) 887194 (10) 5329509 (10) 2599501 (10) 8799515 (10) 5618980 (10) 4161085 (10) 9675475 (10) 2139674 (10) 5015756 (10) 3416860 (10) 352619 (10) 9561196 (10) 1448035 (10) 4319199 (10) 8523280 (10) 2596728 (10) 1705936 (10) 2065036 (10) 8995335 (10) 1570115 (10) 4845451 (10) 9692573 (10) 3309893 (10) 2762309 (10) 6144203 (10) 657903 (10) 5087658 (10) 4702241 (10) 3420222 (10) 1425829 (10) 1916764 (10) 3013029 (10) 9407537 (10) 1097904 (10) 3159877 (10) 7745296 (10) 6046982 (10) 7234124 (10) 5820689 (10) 6452764 (10) 5690647 (10) 8279299 (10) 597362 (10) 
     dis: 	4677.812 7108.673 7162.343 7628.874 7642.829 7697.720 8002.963 8458.090 8810.335 9120.275 9182.552 9234.701 9452.702 9553.576 9804.844 10126.396 10309.062 10368.710 10494.709 10504.659 10665.839 10669.762 10795.918 10856.082 11101.407 11277.900 11334.286 11348.063 11686.734 11805.184 11872.945 12228.438 12249.027 12619.093 12703.938 12859.092 12940.490 13036.415 13061.726 13180.498 13499.711 13520.236 13524.174 13664.893 13700.176 13738.918 13796.189 13893.861 13905.682 13908.320 13961.931 13985.818 13995.117 14010.317 14017.967 14075.624 14166.615 14326.561 14381.589 14524.865 14736.498 14753.957 14913.156 15006.664 15088.265 15176.826 15303.273 15344.922 15459.459 15526.449 15550.555 15567.603 15571.929 15579.309 15585.497 15638.057 15652.537 15700.053 15837.261 15839.667 15923.646 15934.093 15968.200 16038.640 16123.329 16129.944 16131.645 16144.712 16194.832 16535.135 16545.189 16782.383 16885.516 16906.008 16918.422 16922.566 16964.225 17005.688 17073.695 17128.648 
query 4 nn's (10, 10): 9104864 (10) 1430207 (10) 3355354 (10) 330819 (10) 8976035 (10) 3147235 (10) 4529199 (10) 4243361 (10) 125408 (10) 3958825 (10) 1231024 (10) 3955594 (10) 7020660 (10) 7328865 (10) 8945068 (10) 9071979 (10) 1667598 (10) 8326523 (10) 4040337 (10) 7407009 (10) 87460 (10) 7184366 (10) 1363370 (10) 4393700 (10) 2103327 (10) 9582021 (10) 4361546 (10) 7903043 (10) 5418798 (10) 5030547 (10) 687310 (10) 8793699 (10) 6511511 (10) 7439152 (10) 4774816 (10) 3173319 (10) 1992696 (10) 6506698 (10) 6010697 (10) 267592 (10) 6786875 (10) 541839 (10) 8015167 (10) 9498236 (10) 2463115 (10) 5370410 (10) 6059525 (10) 4372264 (10) 7833818 (10) 2144541 (10) 949941 (10) 2988827 (10) 5312325 (10) 2781989 (10) 41585 (10) 9275636 (10) 5112799 (10) 8740361 (10) 9727971 (10) 8781029 (10) 6374786 (10) 3267320 (10) 3565997 (10) 9715073 (10) 7599559 (10) 5906851 (10) 8169087 (10) 4108794 (10) 1244785 (10) 4539928 (10) 2839375 (10) 4849656 (10) 7278363 (10) 7003764 (10) 743647 (10) 4136113 (10) 2614199 (10) 625529 (10) 4376378 (10) 9377396 (10) 2493939 (10) 8660856 (10) 4513281 (10) 4196299 (10) 1798729 (10) 9647730 (10) 3555253 (10) 5477601 (10) 9413243 (10) 728246 (10) 1105616 (10) 5498103 (10) 2558746 (10) 6333624 (10) 2013105 (10) 7491906 (10) 5052307 (10) 8005922 (10) 2244910 (10) 6495949 (10) 
     dis: 	97511.852 98487.188 100047.930 100189.570 101238.695 102158.938 102370.266 103648.672 103733.359 104965.500 106647.328 108490.922 108580.703 108690.109 108703.352 110005.398 110190.586 110772.953 111022.547 111167.125 111309.266 111568.602 112034.672 112265.125 112284.117 113286.766 113530.375 113695.797 113949.344 114071.594 114340.000 114461.930 114560.828 114688.641 114957.836 115165.664 115496.391 115605.852 115643.016 115981.320 116597.461 116846.141 117201.023 117442.727 117863.648 117899.359 118043.086 118159.016 118183.875 118398.688 118748.828 119526.453 119605.672 119611.906 119725.797 120940.750 120990.188 121015.711 121017.922 121058.008 121127.172 121175.156 121383.203 121839.938 122094.062 122223.625 122263.656 122435.461 122482.562 122593.188 122598.734 122629.742 122750.797 122774.359 123021.406 123061.125 123101.453 123188.547 123259.047 123263.234 123344.219 123669.039 123935.766 124191.859 124215.336 124285.734 124476.227 124540.000 124571.156 124628.078 124751.594 124942.742 125004.500 125030.609 125108.562 125301.008 125337.781 125556.984 125591.938 125676.031 
[ 70.411s ] *** Query time: 10.152
qps: 985.004
 *** ivfpq recall 
ivfpq get 497445 postive res from 1000000 results, recall@100:0.497
recall dist(10% per bucket): 0.002 0.045 0.150 0.201 0.163 0.129 0.102 0.071 0.062 0.075 0.000 
finished ivfpq index examples
[ 70.440s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 10 128"
	User time (seconds): 69.42
	System time (seconds): 1.13
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:10.57
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1606564
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 415558
	Voluntary context switches: 1
	Involuntary context switches: 91
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:54
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.695s ] Loaded metadata, 10000000 attr's found
[ 0.695s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.698s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.699s ] Loaded 10000 sift10M queries
[ 0.768s ] Loaded ground truth, gt_size: 100
[ 0.768s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.206s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 72.487s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 7364551 (19) 4897568 (19) 1124068 (19) 8343482 (19) 117870 (19) 5818286 (19) 1426063 (19) 8000565 (19) 8325692 (19) 8179893 (19) 1988196 (19) 6429462 (19) 3316513 (19) 6673716 (19) 3582382 (19) 8853367 (19) 4627246 (19) 2266703 (19) 3888733 (19) 1829215 (19) 7973124 (19) 208580 (19) 9432560 (19) 917978 (19) 3339940 (19) 9170106 (19) 2118537 (19) 9083201 (19) 2446067 (19) 8090492 (19) 9009457 (19) 1091628 (19) 4424895 (19) 5198083 (19) 1900950 (19) 2173332 (19) 3122637 (19) 6264884 (19) 9011027 (19) 1669950 (19) 5682433 (19) 5470829 (19) 2925761 (19) 3693950 (19) 1632570 (19) 1927104 (19) 1961267 (19) 5320060 (19) 5381891 (19) 3955536 (19) 213697 (19) 7125701 (19) 8635447 (19) 3025915 (19) 6211338 (19) 2263885 (19) 4328806 (19) 6607948 (19) 9302319 (19) 8485400 (19) 7374556 (19) 1567955 (19) 7812575 (19) 9073238 (19) 3889939 (19) 9768837 (19) 3151463 (19) 6453262 (19) 1988413 (19) 6805834 (19) 2486260 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	73579.352 85006.203 91477.812 92271.867 95413.250 97335.695 100563.688 102545.406 106777.625 106922.188 107280.609 108193.961 109532.609 110284.461 112155.438 112257.008 115973.844 117834.891 118227.359 120001.938 121896.023 122187.234 122533.234 122984.602 123240.078 124097.828 127967.422 128742.219 128889.859 131071.648 131221.469 131711.156 133986.562 134537.672 135731.875 136637.719 138006.422 138507.188 139435.844 139733.047 139950.641 140211.203 140427.328 141154.078 141976.938 143463.250 144365.344 144444.406 144860.953 145835.234 152376.609 153676.844 153772.578 157529.953 157660.031 157980.750 161237.000 164715.703 168052.266 169079.516 169769.938 170203.156 170780.625 172234.562 175948.156 176534.875 185030.469 186036.500 191267.000 193586.344 204812.328 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 1345854 (19) 9490922 (19) 6861763 (19) 3779157 (19) 2457409 (19) 7903037 (19) 5935793 (19) 1204854 (19) 9558281 (19) 6068122 (19) 3478621 (19) 9734664 (19) 2460722 (19) 749008 (19) 9928244 (19) 8225678 (19) 3971206 (19) 9709202 (19) 8974279 (19) 6216367 (19) 7300255 (19) 5908680 (19) 8331956 (19) 1250366 (19) 4298384 (19) 7221154 (19) 4432127 (19) 940086 (19) 6105606 (19) 8914130 (19) 846887 (19) 926213 (19) 1743139 (19) 2024475 (19) 6762478 (19) 3487690 (19) 7667835 (19) 6087898 (19) 9494067 (19) 4956027 (19) 546252 (19) 6785293 (19) 4706721 (19) 4196641 (19) 6484553 (19) 9347133 (19) 4379352 (19) 7598429 (19) 2558494 (19) 4125951 (19) 3306379 (19) 8618702 (19) 691377 (19) 9137275 (19) 2772811 (19) 3921163 (19) 9423077 (19) 449081 (19) 763196 (19) 1037955 (19) 2121463 (19) 2958813 (19) 7475106 (19) 2982318 (19) 3461012 (19) 7868114 (19) 9584045 (19) 2933173 (19) 666424 (19) 3021544 (19) 1235699 (19) 7107658 (19) 4173818 (19) 6813798 (19) 1349504 (19) 4196782 (19) 4280816 (19) 7040703 (19) 6015198 (19) 538277 (19) 4760231 (19) 9730191 (19) 9940844 (19) 7664641 (19) 4478110 (19) 2735306 (19) 9937600 (19) 5410176 (19) 9701189 (19) 818219 (19) 1234451 (19) 5208580 (19) 9877679 (19) 3190250 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	62152.125 71258.836 72143.648 75227.359 75262.156 78014.953 79580.672 81020.188 82008.164 83466.516 83983.984 85191.625 88005.164 94694.125 94861.281 95558.445 97213.727 98339.242 98718.781 99681.562 100217.234 102581.047 103723.484 104358.297 104731.867 104888.242 104933.180 105768.297 105918.133 106614.266 107031.422 107041.336 107588.125 107737.438 108472.078 108860.898 109608.688 110113.766 111856.570 111951.531 113338.672 114541.828 114988.812 117085.945 117184.422 117656.578 118529.969 120786.781 120918.469 120979.211 121423.859 122361.984 123480.016 123855.742 124169.406 124831.773 125209.883 125620.703 126616.945 130401.898 130936.297 131010.297 132958.641 133078.922 133197.078 134022.062 134431.000 134505.469 134928.500 135022.688 135271.875 135353.656 140508.391 142311.938 143615.938 144563.219 145263.094 146337.844 149241.891 149563.406 149600.094 150617.359 150796.562 154061.641 154300.031 156042.062 156342.781 159230.000 160228.688 166712.562 181046.250 182080.562 185203.375 204684.141 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 283793 (19) 5857947 (19) 6233731 (19) 8220257 (19) 342160 (19) 7999911 (19) 1978906 (19) 8000700 (19) 1587666 (19) 6631052 (19) 7241044 (19) 6537424 (19) 7357334 (19) 1334859 (19) 4790579 (19) 1329864 (19) 4371398 (19) 6059799 (19) 8701465 (19) 2272259 (19) 1030206 (19) 4772966 (19) 9837736 (19) 8949426 (19) 9622388 (19) 8774602 (19) 2594493 (19) 9391567 (19) 4152007 (19) 4060465 (19) 5060541 (19) 4994152 (19) 2399385 (19) 4814161 (19) 379262 (19) 6025892 (19) 7474553 (19) 6507732 (19) 3714895 (19) 367068 (19) 7700094 (19) 999413 (19) 1384963 (19) 799528 (19) 1094276 (19) 7807604 (19) 9589204 (19) 3188880 (19) 2883972 (19) 2533320 (19) 5183859 (19) 323837 (19) 2639946 (19) 3099169 (19) 7937375 (19) 4259808 (19) 2073 (19) 5533627 (19) 8491519 (19) 7644897 (19) 1210191 (19) 5674676 (19) 6422551 (19) 1877521 (19) 1384376 (19) 4665948 (19) 9543546 (19) 5757355 (19) 6725226 (19) 840108 (19) 6054877 (19) 452787 (19) 2227485 (19) 7495812 (19) 3138637 (19) 9270589 (19) 9127338 (19) 1864911 (19) 1698076 (19) 4085764 (19) 2146499 (19) 310258 (19) 8536814 (19) 7230826 (19) 2504229 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	64936.852 65610.477 65918.375 72777.039 73270.797 73406.055 74519.117 74846.617 76694.281 78868.797 79564.328 79829.633 80386.641 80754.406 80801.930 81151.594 81179.812 81371.203 81885.094 82906.297 83984.094 84219.445 85520.219 85535.688 85581.719 85845.094 87262.836 87555.211 87956.391 88458.047 88623.484 89526.859 90196.570 90686.422 90702.375 91374.500 93482.414 94405.508 94943.281 95264.414 96366.641 96430.750 97074.883 98122.109 98197.289 99198.211 100266.508 100355.000 100907.305 101008.984 101192.406 101503.531 101965.266 101994.492 102090.672 102935.219 103381.102 103649.453 103660.062 104480.438 104890.352 105088.562 105959.156 106329.648 107419.578 108355.734 110666.539 111458.211 111521.273 111652.062 112096.445 113677.078 114960.188 120951.453 120952.062 122183.453 124389.773 125683.391 131368.375 136764.062 143092.094 144658.344 145877.781 148808.312 155305.016 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 6942939 (19) 1326424 (19) 9212218 (19) 9558279 (19) 4557732 (19) 8711902 (19) 7251408 (19) 7372833 (19) 5727279 (19) 3669244 (19) 5591597 (19) 7723733 (19) 9811017 (19) 1032968 (19) 43953 (19) 3244240 (19) 8538968 (19) 3616969 (19) 9596692 (19) 8365826 (19) 6434863 (19) 8953729 (19) 2820981 (19) 181834 (19) 9405564 (19) 2399478 (19) 2324107 (19) 4714162 (19) 2949879 (19) 6368460 (19) 7338668 (19) 3356716 (19) 4261202 (19) 8869494 (19) 4873018 (19) 5649712 (19) 6974244 (19) 8226480 (19) 8479689 (19) 5319718 (19) 1379869 (19) 5252290 (19) 3973342 (19) 8076031 (19) 5987231 (19) 8960512 (19) 4923540 (19) 4777562 (19) 8747330 (19) 453798 (19) 9182059 (19) 1692092 (19) 3415143 (19) 3694946 (19) 5312065 (19) 7739866 (19) 9047292 (19) 7509727 (19) 5447448 (19) 9169614 (19) 1548544 (19) 4743693 (19) 2729384 (19) 5126656 (19) 66609 (19) 7349500 (19) 5794362 (19) 3310695 (19) 8295810 (19) 5688039 (19) 1451348 (19) 7852060 (19) 7056168 (19) 9392513 (19) 9753280 (19) 9050062 (19) 2519508 (19) 3577408 (19) 4988050 (19) 4101181 (19) 9007819 (19) 6862323 (19) 4369822 (19) 7769533 (19) 9761503 (19) 2324067 (19) 8209171 (19) 820143 (19) 1536347 (19) 1379128 (19) 5507256 (19) 6157334 (19) 3283934 (19) 6970359 (19) 2121267 (19) 2518192 (19) 9758354 (19) 4081968 (19) 6462331 (19) 1527652 (19) 
     dis: 	6419.419 8112.285 10562.180 11913.137 12836.576 14121.793 14731.592 15050.908 15369.242 15574.154 16046.812 16200.450 16355.391 17846.229 18989.713 19990.953 20063.246 20146.754 20864.547 21287.857 21977.617 22008.719 22978.020 23265.906 23282.094 23342.988 23938.752 24023.799 24071.248 24723.648 25012.186 25325.498 25345.936 25442.404 25512.254 25562.314 26089.910 26451.467 26605.521 26671.689 27030.852 27351.516 27623.133 28421.047 28673.361 29184.184 29386.877 29704.049 29936.838 29977.965 30205.613 30370.625 31752.766 31837.648 31870.617 32168.621 32861.387 32915.941 33178.910 33213.992 33421.547 33556.758 33694.652 33726.195 33932.543 34321.961 34679.102 34880.992 35307.012 35332.750 35510.539 36234.996 36349.652 36816.180 37143.406 37323.445 37705.902 37785.469 38092.734 38154.688 38517.438 39684.332 39995.281 40015.836 40229.141 40477.906 40531.844 40750.402 40933.473 41002.582 41102.062 41997.812 42129.641 42280.020 42513.387 43654.492 44122.684 44190.047 44525.570 44994.863 
query 4 nn's (19, 19): 5815181 (19) 5292751 (19) 4177092 (19) 1461067 (19) 8622489 (19) 7091775 (19) 207385 (19) 7570147 (19) 1382975 (19) 2388487 (19) 6188029 (19) 8379595 (19) 3679285 (19) 216867 (19) 7991031 (19) 4214653 (19) 8864564 (19) 4074234 (19) 4746526 (19) 7259903 (19) 4235802 (19) 9220806 (19) 9730837 (19) 2279618 (19) 6581544 (19) 1089109 (19) 833150 (19) 118875 (19) 428321 (19) 1821504 (19) 9416499 (19) 7059461 (19) 2353471 (19) 5505398 (19) 3972844 (19) 6682163 (19) 3234688 (19) 4896968 (19) 9803350 (19) 9928063 (19) 9038926 (19) 2983239 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	108160.312 112720.906 114626.195 117951.055 119308.875 121141.367 123040.391 123740.281 124117.922 125607.766 129315.875 130962.906 131721.812 131933.906 132627.688 134613.719 134844.438 135704.016 137856.000 137994.719 139828.266 140439.406 143130.953 146313.875 150835.812 152512.672 155398.344 157993.406 158639.469 158807.094 160106.859 162719.938 164156.812 165694.531 169379.312 171642.812 176095.281 181284.359 181718.188 182480.031 185609.375 224011.812 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 72.488s ] *** Query time: 10.016
qps: 998.378
 *** ivfpq recall 
ivfpq get 283641 postive res from 1000000 results, recall@100:0.284
recall dist(10% per bucket): 0.053 0.321 0.275 0.151 0.079 0.048 0.031 0.019 0.016 0.007 0.000 
finished ivfpq index examples
[ 72.517s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 10 128"
	User time (seconds): 71.54
	System time (seconds): 1.09
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:12.64
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1604932
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 415561
	Voluntary context switches: 3
	Involuntary context switches: 57
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:56
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.694s ] Loaded metadata, 10000000 attr's found
[ 0.694s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.697s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.698s ] Loaded 10000 sift10M queries
[ 0.767s ] Loaded ground truth, gt_size: 100
[ 0.767s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.211s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 69.281s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 9964582 (20) 3402555 (20) 8844408 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	100756.328 150367.969 161076.906 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 2788374 (20) 3434211 (20) 4062732 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	90853.562 108299.391 112561.922 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 8646849 (20) 6674452 (20) 9787209 (20) 7322999 (20) 7915163 (20) 496691 (20) 2295856 (20) 3679527 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	68024.938 75578.688 76363.094 89126.820 103626.914 103848.766 113796.781 114635.328 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 312537 (20) 9187340 (20) 7626212 (20) 4958933 (20) 284991 (20) 5187251 (20) 4596264 (20) 9510656 (20) 2331467 (20) 5961435 (20) 4915159 (20) 7541142 (20) 3249575 (20) 205984 (20) 2289526 (20) 3712665 (20) 6339381 (20) 8972655 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	13073.052 26837.367 27164.697 27184.062 29002.840 29824.398 32229.176 33649.250 38421.500 42001.848 44367.160 49020.145 51402.121 53681.676 54045.680 54317.633 55969.969 58263.535 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 6193655 (20) 4844799 (20) 4966146 (20) 3972493 (20) 7825259 (20) 4371152 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	129206.125 147900.094 148078.797 154956.656 156010.344 163210.344 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 69.282s ] *** Query time: 9.328
qps: 1072.017
 *** ivfpq recall 
ivfpq get 73386 postive res from 1000000 results, recall@100:0.073
recall dist(10% per bucket): 0.762 0.211 0.023 0.004 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 69.311s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 10 128"
	User time (seconds): 68.29
	System time (seconds): 1.14
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:09.44
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1606564
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 415558
	Voluntary context switches: 1
	Involuntary context switches: 58
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
