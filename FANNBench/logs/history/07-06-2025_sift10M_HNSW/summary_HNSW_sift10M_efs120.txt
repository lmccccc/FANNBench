Start time: 04:02
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 120
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.715s ] Loaded metadata, 10000000 attr's found
[ 0.715s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.718s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.719s ] Loaded 10000 sift10M queries
[ 0.788s ] Loaded ground truth, gt_size: 100
[ 0.788s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.146s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 107.141s ] Query results (vector ids, then distances):
query 0 nn's (16495, 66494): 1167995 (22866) 6141318 (31677) 1160663 (44937) 4738758 (63657) 7293718 (39822) 7632021 (61505) 1020562 (25533) 6984373 (66297) 7077742 (48276) 9397776 (41815) 9536881 (62309) 7860530 (36909) 7866119 (35104) 2375126 (35044) 77153 (55251) 8851580 (35051) 1835932 (42846) 7164607 (51560) 6951413 (64572) 8435256 (22283) 9251169 (17058) 5343331 (64452) 3968857 (50042) 4689336 (50131) 9860956 (45915) 419470 (53438) 7873580 (61095) 2481703 (26660) 9409479 (53603) 3663987 (28773) 1665852 (42722) 9534078 (23152) 8428377 (21292) 6019325 (39083) 1929740 (63695) 3879851 (51251) 5305337 (33050) 9607176 (18423) 6002319 (38494) 6871531 (32699) 4294175 (55347) 1203246 (35809) 4770231 (18286) 7237592 (57273) 9237550 (19315) 7912999 (56114) 7459877 (65985) 7011791 (23273) 5001655 (54619) 447965 (21988) 839586 (47809) 46468 (34801) 9906463 (54872) 4671898 (19963) 3369112 (45196) 4047656 (37028) 5228659 (32650) 3049131 (56789) 6009021 (45302) 1891236 (55041) 9839146 (52506) 1000673 (62068) 7895839 (33099) 4532213 (19173) 7989030 (16945) 7263957 (52681) 8052577 (63399) 476293 (42096) 5356206 (17599) 4218358 (21713) 3094752 (38222) 8838842 (42249) 4436135 (46921) 4271011 (16541) 1415164 (27761) 6425728 (45806) 1449158 (58339) 8446671 (55365) 6392245 (58867) 8898051 (65788) 3409110 (29194) 5600358 (36832) 867263 (31804) 9584266 (30762) 5972935 (59004) 2894606 (22434) 2526554 (55330) 6751758 (20089) 434737 (55269) 9107723 (35394) 6865307 (40092) 5315711 (38979) 3938476 (17749) 6436545 (27643) 1432946 (31393) 3366295 (53986) 7063460 (21503) 4547101 (52945) 8944989 (22466) 2051236 (18470) 
     dis: 	72023.000 73183.000 74292.000 74463.000 75573.000 75587.000 76767.000 76880.000 76934.000 77424.000 78206.000 78859.000 79448.000 79929.000 79964.000 80060.000 80072.000 80358.000 80726.000 81799.000 81847.000 81853.000 82148.000 82232.000 82276.000 82431.000 82438.000 82457.000 82688.000 82852.000 83197.000 83197.000 83232.000 83269.000 83583.000 83717.000 83735.000 83936.000 83988.000 84002.000 84333.000 84353.000 84388.000 84487.000 84526.000 84734.000 84945.000 85235.000 85310.000 85625.000 85800.000 85831.000 85842.000 85847.000 85865.000 85876.000 85928.000 86023.000 86034.000 86203.000 86308.000 86345.000 86379.000 86402.000 86458.000 86743.000 86793.000 86891.000 86902.000 86906.000 86958.000 87152.000 87276.000 87297.000 87361.000 87485.000 87494.000 87510.000 87576.000 87602.000 87631.000 87654.000 87684.000 87824.000 87846.000 87973.000 88157.000 88186.000 88187.000 88236.000 88343.000 88379.000 88404.000 88420.000 88466.000 88619.000 88629.000 88634.000 88800.000 88813.000 
query 1 nn's (9202, 59201): 285986 (29147) 1273419 (33970) 7501440 (19981) 411491 (28374) 3221056 (31139) 8349375 (52325) 469965 (40746) 9958454 (20815) 9791343 (31369) 3309105 (58581) 1120308 (58129) 8596968 (57015) 7917424 (30836) 9009284 (43025) 371485 (21478) 7120642 (56260) 6378991 (24604) 7331745 (31011) 2993914 (24499) 8879018 (38985) 9015118 (35539) 4922660 (25703) 7692715 (33795) 5008572 (16803) 5531491 (42049) 375999 (11846) 4870548 (14957) 5509879 (56316) 9933148 (29627) 6073626 (52753) 296178 (9794) 1843885 (58567) 7693023 (48225) 9537422 (38205) 8646169 (48602) 3631651 (46071) 9781041 (46813) 3786289 (47328) 5516040 (39608) 1341845 (13158) 1784776 (14038) 9167559 (28640) 1350904 (17079) 8590082 (35871) 2473259 (21347) 6174201 (27446) 7342014 (43207) 8588450 (26655) 9245954 (25046) 8918460 (22635) 8152291 (58419) 4689763 (13954) 9211699 (48066) 1000577 (42240) 741761 (13735) 1461697 (9342) 8440112 (16815) 1259657 (41217) 8984166 (19820) 6533284 (58872) 4649124 (10463) 6986308 (42127) 9913606 (25633) 2807070 (21497) 7315015 (40488) 2652241 (18132) 7672903 (50549) 9349060 (12055) 8675363 (15599) 2234566 (43091) 2353489 (36758) 6630533 (47319) 8828687 (57507) 5226515 (31871) 691253 (12031) 4009753 (42973) 6971668 (13402) 482087 (52392) 3231603 (11404) 7968009 (34408) 2093850 (58698) 8518091 (32017) 1932354 (54429) 5790422 (10136) 6672132 (28461) 5254261 (23886) 3740235 (47884) 3891904 (36054) 7513620 (14628) 8155958 (44047) 9388703 (42582) 735668 (54882) 5307850 (28502) 5869072 (17436) 6383821 (40068) 6281612 (57414) 8743749 (50038) 7856853 (44589) 7807906 (37732) 298308 (17361) 
     dis: 	43778.000 46522.000 46910.000 46959.000 49695.000 49997.000 50753.000 51055.000 51493.000 51760.000 52532.000 52768.000 52837.000 52935.000 54431.000 54684.000 54869.000 54968.000 55326.000 56123.000 56457.000 56486.000 56490.000 56506.000 56591.000 56619.000 56915.000 56959.000 57000.000 57111.000 57313.000 57411.000 57450.000 57685.000 57703.000 57719.000 57738.000 57771.000 57779.000 57814.000 57917.000 57926.000 57960.000 58064.000 58119.000 58390.000 58531.000 58633.000 58737.000 58837.000 58925.000 59030.000 59230.000 59284.000 59621.000 60324.000 60340.000 60594.000 60632.000 60780.000 60858.000 60913.000 60931.000 61019.000 61093.000 61403.000 62051.000 62069.000 62084.000 62094.000 62214.000 62563.000 62681.000 62693.000 62694.000 62791.000 62855.000 63173.000 63219.000 63272.000 63407.000 63533.000 63792.000 63807.000 63864.000 63867.000 63956.000 64165.000 64180.000 64475.000 64556.000 64597.000 64772.000 64890.000 64958.000 65021.000 65073.000 65075.000 65184.000 65450.000 
query 2 nn's (3185, 53184): 4588082 (5850) 1931585 (19001) 289025 (23641) 199400 (49790) 5982237 (43009) 9262583 (10127) 3493381 (41222) 6296252 (42595) 9466222 (12113) 9416415 (22498) 436139 (39429) 2511585 (51247) 4279056 (31979) 9609459 (52017) 9410320 (17475) 5988705 (35014) 4154052 (32764) 2448858 (26319) 40266 (43315) 7654217 (36735) 8068558 (3605) 3942637 (41711) 893390 (20914) 8432027 (41968) 2098752 (8636) 2601636 (4981) 4331583 (20733) 1198061 (39524) 8086660 (10594) 1229611 (42372) 2346097 (47666) 9541874 (40780) 5499961 (41359) 1784913 (17205) 4347605 (5987) 4519717 (16603) 3724739 (11973) 2413882 (42838) 4021389 (14109) 5035777 (42804) 8001622 (38121) 8590994 (28647) 9790465 (51400) 3795529 (39233) 6363894 (12238) 9330360 (23016) 5039283 (52769) 3967402 (4299) 3061201 (36811) 888761 (42790) 2953864 (3859) 141025 (31028) 5631784 (19399) 4495608 (32772) 1160482 (18573) 4957555 (20414) 8635193 (4483) 1463083 (23709) 4259715 (27472) 1878319 (14518) 2412946 (20189) 6856614 (13752) 1956474 (39813) 4713533 (11323) 445822 (18954) 3948507 (46592) 2038327 (32825) 247874 (27384) 764856 (15554) 8965515 (47906) 8064334 (52538) 2721859 (45661) 2027436 (10601) 2800256 (3943) 8329652 (11029) 9302830 (30435) 9724885 (20426) 2247452 (7760) 1700496 (39753) 8690196 (29802) 8703413 (48767) 1758192 (46894) 3667879 (49905) 5488746 (22698) 27015 (15961) 2571149 (4419) 5834114 (42413) 7409471 (23955) 8511243 (52818) 9650562 (41043) 9975313 (47116) 596128 (12783) 483758 (16444) 6511526 (45450) 3457019 (10629) 2833092 (35079) 3923684 (43211) 9919092 (44536) 9235536 (48064) 6202123 (50777) 
     dis: 	47637.000 48317.000 48416.000 49395.000 50144.000 50601.000 51043.000 51071.000 51654.000 51724.000 52554.000 52611.000 52719.000 52894.000 52939.000 53001.000 53029.000 53034.000 53080.000 53106.000 53350.000 53664.000 53672.000 53772.000 53912.000 53913.000 54277.000 54288.000 54318.000 54404.000 54464.000 54558.000 54632.000 54759.000 54968.000 55350.000 55376.000 55630.000 55907.000 55983.000 55995.000 56108.000 56197.000 56262.000 56312.000 56319.000 56504.000 56939.000 56977.000 57045.000 57221.000 57318.000 57398.000 57423.000 57554.000 57694.000 57831.000 57848.000 57942.000 58055.000 58237.000 58297.000 58484.000 58526.000 58536.000 58549.000 58701.000 58734.000 58933.000 58955.000 59109.000 59206.000 59233.000 59276.000 59281.000 59365.000 59587.000 59600.000 59681.000 59783.000 59874.000 59887.000 60030.000 60058.000 60080.000 60086.000 60114.000 60126.000 60259.000 60272.000 60295.000 60339.000 60413.000 60574.000 60604.000 60618.000 60631.000 60657.000 60677.000 60696.000 
query 3 nn's (49315, 99314): 980813 (57404) 1527942 (96648) 4147780 (96552) 6151275 (54227) 8410503 (57593) 2965607 (50671) 8174765 (80882) 7301932 (58021) 3643741 (49824) 1218934 (95625) 5124856 (83202) 9132978 (88985) 3421136 (79354) 6917633 (65929) 1417424 (52791) 3143192 (84650) 6411621 (75479) 2892348 (96310) 3041965 (53918) 727241 (54631) 5224964 (92235) 8649378 (64804) 1911911 (93967) 2218358 (96205) 1344917 (94289) 1553832 (56561) 1739894 (59501) 8501071 (59579) 4246457 (73056) 4486659 (62681) 1514080 (69970) 9577990 (76369) 7301436 (87758) 1590183 (88142) 8381210 (50663) 3633444 (58089) 9925791 (97055) 8051314 (74322) 5381241 (67484) 192312 (56033) 879082 (58444) 9313337 (65861) 179529 (69049) 9354839 (82742) 9978957 (58477) 2112048 (90994) 7404448 (97484) 9625994 (68515) 9603354 (76938) 5792548 (50167) 9335193 (61835) 1028926 (67570) 4983026 (77570) 5777538 (67724) 7119531 (90378) 3421950 (66323) 7463079 (77126) 7614050 (89191) 3009997 (97202) 686764 (84900) 2236726 (90758) 422848 (66608) 7865854 (55686) 6045699 (86837) 1061321 (74643) 936598 (90457) 8688385 (51100) 7950822 (60752) 5106668 (83807) 578322 (76455) 2843331 (94548) 6697954 (97706) 8012973 (49730) 7583501 (51620) 8643637 (91536) 3252978 (77827) 3112499 (60951) 3704240 (51893) 7747974 (55824) 7216322 (83941) 597580 (97456) 4995291 (67298) 5181700 (61434) 3379947 (69911) 7556732 (84479) 449169 (84914) 9947826 (87273) 3540851 (56783) 1229577 (98674) 7829631 (88278) 3195943 (64046) 3080406 (50210) 9332155 (77339) 6676311 (50438) 6306155 (92517) 7745448 (77965) 2842840 (85067) 240857 (83846) 9102009 (51785) 4540202 (85638) 
     dis: 	4296.000 4309.000 4550.000 4602.000 4817.000 5013.000 5180.000 5240.000 5279.000 5468.000 5492.000 5559.000 5596.000 5626.000 5643.000 5653.000 5998.000 6047.000 6095.000 6237.000 6378.000 6468.000 6655.000 6693.000 6747.000 6792.000 6845.000 6973.000 6981.000 7021.000 7171.000 7282.000 7394.000 7460.000 7506.000 7509.000 7580.000 7644.000 7666.000 7673.000 7688.000 7693.000 7708.000 7725.000 7788.000 7792.000 7801.000 7825.000 7841.000 8040.000 8123.000 8228.000 8247.000 8322.000 8362.000 8402.000 8404.000 8407.000 8437.000 8491.000 8496.000 8500.000 8579.000 8590.000 8608.000 8643.000 8797.000 8815.000 8875.000 8885.000 8898.000 8912.000 8919.000 8939.000 8954.000 8993.000 9075.000 9212.000 9230.000 9254.000 9370.000 9382.000 9404.000 9470.000 9526.000 9576.000 9621.000 9679.000 9736.000 9746.000 9774.000 9786.000 9813.000 9835.000 9888.000 9980.000 9997.000 10000.000 10018.000 10060.000 
query 4 nn's (35866, 85865): 3477074 (81770) 6578584 (38818) 3389697 (48484) 6413263 (79374) 1141817 (80050) 4344456 (43616) 1149636 (70537) 2524726 (73742) 546979 (84338) 3692806 (78743) 6408001 (79219) 7358946 (78288) 7423926 (65584) 3832333 (60859) 7603300 (57407) 5708200 (65636) 8630333 (78134) 3637016 (75733) 5175563 (46909) 2908498 (78047) 1743659 (74315) 5117098 (71983) 990482 (57004) 6357047 (37869) 3842053 (47229) 2732612 (65651) 4380344 (42821) 6838860 (49930) 4501065 (71247) 8713517 (85738) 567070 (84232) 9170163 (44830) 3823745 (70484) 4831513 (48957) 2989150 (73723) 4775817 (52301) 935279 (38708) 9067729 (68162) 3405146 (73681) 5257851 (42550) 1829341 (62245) 3016662 (80615) 5707536 (47200) 70084 (56331) 6720082 (47192) 6637386 (69548) 64045 (81996) 2015975 (59169) 3647183 (65407) 303093 (72258) 4750135 (57127) 565881 (56948) 6699578 (59103) 3839204 (40859) 1020874 (60599) 8493266 (66603) 417315 (38580) 4422483 (78850) 7434343 (79828) 5475257 (51556) 4399052 (55143) 5826594 (84832) 4901952 (44629) 5729760 (66147) 5001194 (51110) 3099917 (49532) 272409 (47998) 4374812 (62476) 3497336 (45395) 484991 (49791) 4551510 (38108) 2288117 (77366) 992395 (66919) 8296728 (49670) 8972367 (43409) 5221238 (43285) 6658100 (78266) 5953632 (62520) 5012556 (55013) 2454280 (80510) 1194149 (42059) 2721988 (37884) 330819 (62462) 6116720 (45903) 1784595 (44244) 9182395 (79583) 5433383 (70512) 5126636 (78266) 3803911 (59233) 797235 (41978) 3475746 (46970) 2779329 (58761) 7069107 (55837) 487654 (77574) 3308297 (62108) 6784852 (64491) 3671814 (57552) 7223142 (71124) 2996033 (48373) 6562890 (45139) 
     dis: 	80355.000 82172.000 84350.000 84921.000 85933.000 85939.000 85940.000 86290.000 86866.000 86927.000 86935.000 87070.000 87152.000 87409.000 87829.000 88206.000 88437.000 88515.000 88607.000 88949.000 89054.000 89682.000 90021.000 90314.000 90358.000 90596.000 90617.000 90822.000 90882.000 91007.000 91047.000 91164.000 91268.000 91392.000 91566.000 91583.000 91951.000 92148.000 92174.000 92300.000 92442.000 92881.000 93074.000 93335.000 93429.000 93525.000 93643.000 93705.000 93789.000 93920.000 93976.000 94172.000 94180.000 94216.000 94288.000 94291.000 94565.000 94638.000 95017.000 95165.000 95276.000 95431.000 95535.000 95543.000 95630.000 95977.000 96104.000 96273.000 96371.000 96480.000 96528.000 96597.000 96611.000 96677.000 96804.000 96965.000 96976.000 97012.000 97064.000 97065.000 97089.000 97226.000 97440.000 97494.000 97615.000 97667.000 97848.000 98026.000 98148.000 98154.000 98179.000 98187.000 98237.000 98333.000 98394.000 98408.000 98423.000 98488.000 98651.000 98695.000 
[ 107.141s ] *** Query time: 28.599
qps: 349.661
 *** HNSW recall 
HNSW get 939931 postive res from 1000000 results, recall@100:0.940
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.017 0.164 0.714 0.103 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 66183307, average: 6618.331
finished ivfpq index examples
[ 107.180s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 120 128"
	User time (seconds): 88.79
	System time (seconds): 9.83
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:47.72
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8375204
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 5
	Minor (reclaiming a frame) page faults: 2740039
	Voluntary context switches: 26157
	Involuntary context switches: 175
	Swaps: 0
	File system inputs: 695344
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:06
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 120
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.995s ] Loaded metadata, 10000000 attr's found
[ 0.995s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.998s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.000s ] Loaded 10000 sift10M queries
[ 1.070s ] Loaded ground truth, gt_size: 100
[ 1.070s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.728s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 92.015s ] Query results (vector ids, then distances):
query 0 nn's (30338, 40337): 6141318 (31677) 7293718 (39822) 7860530 (36909) 7866119 (35104) 2375126 (35044) 8851580 (35051) 6019325 (39083) 5305337 (33050) 6002319 (38494) 6871531 (32699) 1203246 (35809) 46468 (34801) 4047656 (37028) 5228659 (32650) 7895839 (33099) 3094752 (38222) 5600358 (36832) 867263 (31804) 9584266 (30762) 9107723 (35394) 6865307 (40092) 5315711 (38979) 1432946 (31393) 5008601 (36205) 8615059 (36713) 944203 (37091) 2478200 (32527) 8360507 (37312) 1313109 (34667) 1136638 (31056) 448534 (39582) 3947830 (38978) 9422333 (33977) 746007 (34895) 9672475 (38293) 8892654 (36847) 6440255 (32710) 1136340 (34358) 8612315 (32697) 7589020 (37600) 9548834 (39161) 8841384 (38576) 8200051 (35846) 9099555 (39603) 3532484 (31798) 6134807 (34370) 102938 (32717) 3206773 (35296) 9122103 (34064) 9868360 (38444) 4985966 (32045) 7907051 (32852) 3645920 (34139) 9097134 (39520) 1530219 (33642) 7100864 (37198) 5073149 (38840) 3440180 (37064) 8635455 (35154) 1326722 (30890) 2082844 (36255) 4408250 (32306) 1066507 (33527) 8070406 (31467) 147219 (34878) 1907588 (35276) 8671427 (33099) 6609059 (39227) 9577450 (34723) 1939129 (36144) 9645387 (39738) 4874891 (39564) 5730004 (30594) 6943042 (33685) 3731251 (38744) 6420776 (38416) 9397605 (39656) 3708659 (39348) 5027969 (30348) 1818379 (38208) 9552336 (37976) 624727 (30520) 4358804 (32066) 9647022 (36961) 7767175 (36163) 266478 (35820) 5373920 (36612) 2550973 (31072) 3108557 (40112) 2144339 (33586) 6195843 (32202) 2339853 (37843) 9179265 (35044) 3932990 (33731) 7576695 (37230) 3094630 (30711) 163839 (37924) 4445786 (38368) 9854043 (31784) 1567970 (31938) 
     dis: 	73183.000 75573.000 78859.000 79448.000 79929.000 80060.000 83269.000 83735.000 83988.000 84002.000 84353.000 85831.000 85876.000 85928.000 86379.000 86958.000 87654.000 87684.000 87824.000 88236.000 88343.000 88379.000 88466.000 88866.000 89325.000 89498.000 89521.000 89755.000 89869.000 90165.000 90179.000 90800.000 90926.000 92033.000 92252.000 92310.000 92348.000 92703.000 92750.000 93011.000 93101.000 93280.000 93709.000 93802.000 94066.000 94086.000 94282.000 94393.000 94416.000 94445.000 94497.000 94922.000 95222.000 95233.000 95324.000 95429.000 95557.000 95566.000 95604.000 95715.000 95956.000 96010.000 96234.000 96598.000 96616.000 96779.000 97175.000 97242.000 97285.000 97302.000 97428.000 97582.000 97954.000 97964.000 97990.000 98192.000 98377.000 98398.000 98449.000 98532.000 98727.000 98736.000 98740.000 98891.000 98986.000 99006.000 99065.000 99512.000 99688.000 99691.000 99857.000 99920.000 100002.000 100041.000 100091.000 100106.000 100134.000 100317.000 100358.000 100522.000 
query 1 nn's (77037, 87036): 5552416 (78513) 1909131 (86406) 5271910 (85162) 1745130 (81239) 1503119 (86342) 4456023 (81807) 8223991 (85939) 3200275 (77568) 1015812 (81428) 1410399 (79450) 3733744 (80018) 2077396 (86724) 9460541 (85631) 8811964 (78982) 109736 (83008) 8899541 (77302) 8880895 (85935) 5796685 (85349) 9329945 (82932) 6363708 (86935) 7066298 (82075) 4082654 (81611) 5838578 (80325) 3738992 (82987) 9900713 (80753) 2901807 (85802) 5113286 (82655) 4365144 (85163) 2773940 (83061) 6861763 (79255) 1358210 (82366) 3483770 (77125) 4321977 (86855) 9967397 (78546) 5682634 (83480) 5847833 (86661) 4500577 (79020) 1116609 (86888) 8549337 (81124) 6605974 (84206) 3595041 (81789) 801963 (83162) 2442767 (79429) 509915 (81217) 3059195 (82186) 8588534 (77075) 5481254 (81714) 1886034 (78747) 4546662 (85828) 9220661 (83515) 8717769 (79874) 4558935 (86467) 4058523 (78300) 4811463 (85249) 5424055 (81172) 3435845 (77715) 7374448 (83457) 3209840 (77363) 4430490 (86075) 5234937 (86897) 8838862 (78806) 2380220 (83780) 9429619 (85840) 7452672 (82219) 8032969 (80529) 767180 (81326) 2765204 (81025) 7580269 (82450) 6679899 (77613) 2742397 (82912) 5250239 (85491) 9746886 (82707) 3791268 (86621) 4649157 (79932) 4010699 (83940) 1053993 (82403) 897493 (82032) 1444668 (86471) 9944377 (85256) 1960490 (78133) 942523 (78136) 5666656 (80815) 856712 (84619) 8476700 (83426) 2133762 (86360) 3471626 (85969) 5404107 (84823) 8933398 (79317) 6168230 (80264) 7513389 (84168) 6225217 (80943) 765659 (78650) 5607232 (77189) 5941545 (80770) 4794829 (84782) 8366738 (80505) 5893264 (83994) 7744476 (86218) 35158 (85547) 5939038 (85011) 
     dis: 	42944.000 51310.000 52252.000 54734.000 59550.000 59585.000 61426.000 64056.000 64480.000 64505.000 65583.000 65598.000 65602.000 66348.000 66467.000 66896.000 67701.000 68091.000 70708.000 70710.000 70821.000 71063.000 71072.000 71399.000 72674.000 72743.000 72758.000 72819.000 73221.000 73309.000 73722.000 73935.000 74235.000 74478.000 74500.000 75091.000 75262.000 75355.000 75408.000 75572.000 75624.000 75800.000 75826.000 76465.000 76655.000 77186.000 77578.000 77900.000 78527.000 78559.000 78591.000 78628.000 79138.000 79667.000 80137.000 80457.000 80541.000 80665.000 80727.000 81577.000 81824.000 82062.000 82065.000 82254.000 82276.000 82304.000 83796.000 83813.000 83880.000 84019.000 84289.000 84366.000 84467.000 84567.000 84617.000 84662.000 84856.000 84912.000 84982.000 85043.000 85057.000 85142.000 85192.000 85244.000 85593.000 85729.000 85820.000 85966.000 86482.000 86485.000 86554.000 86812.000 86919.000 87104.000 87110.000 87114.000 87451.000 87577.000 87578.000 87700.000 
query 2 nn's (55705, 65704): 237844 (57153) 8132849 (63316) 2795236 (62148) 9068473 (62147) 8863268 (55928) 8455929 (59448) 4665202 (65519) 8565013 (65663) 4433607 (61698) 1329974 (65153) 4555038 (63166) 8563094 (58325) 1080573 (56490) 8198272 (61501) 6114289 (59111) 7685482 (62295) 5596868 (58496) 8333106 (61471) 2723946 (57827) 4542872 (61400) 9384590 (59693) 8075681 (59224) 8051890 (56266) 3224964 (61887) 4647083 (61889) 4898170 (58003) 5228926 (56641) 3108541 (56307) 5520814 (57891) 4497755 (65054) 29358 (65481) 6247603 (63801) 137116 (60929) 2871507 (64701) 330461 (65445) 2523582 (58820) 7454296 (64256) 8084717 (62575) 7651848 (56532) 2883341 (56298) 2540958 (64117) 283793 (56625) 2461335 (62859) 4391513 (62475) 3860058 (61774) 868456 (62065) 4743122 (61891) 9431634 (57575) 7158950 (63558) 9705261 (60516) 1613547 (58741) 6208823 (61767) 7221663 (60629) 5315700 (61751) 9982250 (57564) 245248 (61481) 8383671 (61008) 6553074 (59575) 1015153 (56733) 5270485 (63229) 2721821 (58910) 5985758 (62278) 5878397 (58972) 2764590 (56554) 6090181 (61186) 9212023 (59032) 1579423 (63799) 3612389 (59908) 7464135 (57113) 3714042 (64506) 2007487 (61256) 4299983 (57114) 4511809 (62276) 2220152 (61420) 8597513 (60174) 5074720 (59964) 668342 (65314) 7975982 (61676) 7028317 (60120) 8394381 (64969) 7671868 (56373) 2352405 (59041) 8975057 (60034) 6406251 (59215) 8122567 (57529) 6222847 (56154) 1066001 (63825) 7064875 (60465) 4987842 (57904) 6357699 (63160) 6152369 (64329) 5777679 (60247) 76377 (63606) 3827773 (62270) 7753511 (58757) 8625024 (62801) 5123161 (55857) 8453706 (60748) 2171325 (57682) 3197452 (58358) 
     dis: 	49294.000 50997.000 51181.000 52145.000 53225.000 53383.000 53809.000 54061.000 54908.000 55134.000 55225.000 55995.000 56182.000 56416.000 56627.000 57176.000 57613.000 57924.000 58328.000 58989.000 59021.000 59158.000 59334.000 60035.000 60225.000 60397.000 60628.000 60710.000 61539.000 61845.000 61858.000 62491.000 62507.000 62667.000 62691.000 62798.000 62909.000 63001.000 63338.000 63404.000 63499.000 63549.000 63628.000 63630.000 63678.000 64004.000 64174.000 64188.000 64334.000 64345.000 64567.000 64786.000 64879.000 64911.000 65420.000 65519.000 65632.000 65675.000 65701.000 65774.000 65778.000 65911.000 66113.000 66246.000 66383.000 66496.000 66769.000 66775.000 66850.000 66858.000 67271.000 67273.000 67312.000 67389.000 67395.000 67550.000 67577.000 67607.000 67733.000 67754.000 67780.000 67874.000 67974.000 68014.000 68196.000 68213.000 68232.000 68245.000 68281.000 68294.000 68420.000 68436.000 68507.000 68531.000 68737.000 69083.000 69301.000 69635.000 69912.000 70005.000 
query 3 nn's (68256, 78255): 6411621 (75479) 4246457 (73056) 1514080 (69970) 9577990 (76369) 8051314 (74322) 179529 (69049) 9625994 (68515) 9603354 (76938) 4983026 (77570) 7463079 (77126) 1061321 (74643) 578322 (76455) 3252978 (77827) 3379947 (69911) 9332155 (77339) 7745448 (77965) 4537205 (69605) 4824483 (76626) 9706597 (74482) 4856979 (75280) 4899384 (72017) 4258600 (71620) 2311118 (74542) 5110678 (76661) 6934608 (78112) 5758654 (75285) 9833335 (77885) 2941694 (75342) 3877232 (75132) 3523917 (69249) 115823 (73565) 2256506 (68295) 4491781 (76846) 6943685 (74006) 6091433 (73224) 8959954 (71809) 5147194 (72622) 3965061 (75682) 1787200 (69230) 8157747 (69658) 1961581 (78022) 6252048 (74147) 5498749 (76453) 1096237 (78243) 4104803 (73729) 9604675 (71943) 116302 (75981) 4338667 (76290) 4933042 (77577) 434846 (75860) 6662913 (70602) 7018328 (77497) 7887517 (75786) 2960857 (72083) 2050399 (70248) 8532848 (73219) 8198543 (69740) 9081529 (71677) 5330122 (76348) 6306650 (70227) 8663753 (69694) 4664026 (76358) 3547401 (70131) 6089729 (74507) 3004616 (77242) 6901252 (69639) 3284716 (71856) 6141330 (71761) 8267830 (72849) 2139674 (71194) 2789396 (77393) 5623544 (73074) 1850642 (68351) 3925959 (76081) 899264 (69740) 9083030 (74195) 6156871 (73592) 5577884 (76925) 9211610 (72496) 2827173 (74629) 2567122 (76314) 6749489 (73113) 1594629 (75741) 5087658 (73217) 9214742 (74411) 8799141 (72946) 3787532 (69962) 2671468 (69158) 4145244 (70239) 2266555 (78065) 7709948 (69177) 3070990 (71417) 6857639 (71565) 6950621 (70175) 134575 (68258) 4573494 (68894) 1776241 (73451) 1901586 (77254) 4506715 (78014) 4639329 (71507) 
     dis: 	5998.000 6981.000 7171.000 7282.000 7644.000 7708.000 7825.000 7841.000 8247.000 8404.000 8608.000 8885.000 8993.000 9470.000 9813.000 9980.000 10154.000 10174.000 10493.000 10532.000 10665.000 10702.000 10792.000 10821.000 10851.000 10977.000 10990.000 10994.000 11135.000 11236.000 11239.000 11270.000 11345.000 11402.000 11545.000 11598.000 11814.000 11823.000 12107.000 12215.000 12233.000 12370.000 12402.000 12425.000 12449.000 12475.000 12477.000 12528.000 12581.000 12703.000 12925.000 12973.000 12997.000 13373.000 13393.000 13452.000 13530.000 13569.000 13660.000 13837.000 13894.000 13904.000 14106.000 14165.000 14232.000 14544.000 14582.000 14633.000 14672.000 14870.000 14933.000 15158.000 15218.000 15407.000 15584.000 15623.000 15797.000 15851.000 16089.000 16178.000 16256.000 16266.000 16310.000 16528.000 16670.000 16837.000 16861.000 16898.000 16954.000 17002.000 17192.000 17232.000 17251.000 17293.000 17369.000 17371.000 17466.000 17527.000 17557.000 17719.000 
query 4 nn's (32860, 42859): 6578584 (38818) 6357047 (37869) 4380344 (42821) 935279 (38708) 5257851 (42550) 7559534 (34726) 3839204 (40859) 417315 (38580) 4551510 (38108) 1194149 (42059) 2721988 (37884) 797235 (41978) 8742734 (35925) 2528505 (42180) 4355165 (36701) 2840566 (32970) 1355777 (35010) 1508852 (41574) 9353798 (42619) 3287249 (35694) 2161200 (41175) 5674137 (35926) 6770270 (37124) 2178583 (39724) 7210902 (34563) 7360489 (42573) 4179938 (41546) 8843847 (34786) 3553812 (41044) 6132133 (35938) 3368229 (35512) 1381124 (33201) 8325663 (40558) 34728 (33521) 230302 (33409) 1449918 (37711) 8210698 (41615) 6361396 (38338) 9825567 (40718) 1417456 (42485) 7548313 (40007) 8065643 (36769) 2071068 (33013) 4186740 (33627) 3587564 (33538) 3732556 (39898) 9687221 (35602) 9999853 (42029) 7367262 (40275) 1528313 (42186) 9934785 (38919) 4650677 (34446) 8227456 (34411) 280740 (38932) 1200356 (37898) 1083442 (40498) 8683631 (38436) 9338967 (33200) 3797890 (38909) 3431944 (35508) 8752105 (41411) 7808352 (39961) 2596769 (36909) 9225825 (34921) 6071356 (34668) 9761569 (39676) 1335451 (34972) 7990209 (38607) 2936661 (33528) 4043920 (35246) 9531307 (34185) 4967060 (39028) 6525822 (37594) 1564511 (36762) 7775035 (34215) 3495365 (38976) 9790527 (41350) 8643309 (41721) 2938765 (37356) 2811339 (39628) 4256098 (40490) 1733049 (35381) 3179613 (42086) 8735480 (33622) 4698262 (34033) 8968005 (38869) 752229 (36922) 807422 (38021) 1716250 (38299) 3548353 (40181) 5258140 (39389) 1402159 (40550) 8054510 (35211) 2417131 (34281) 8451156 (36152) 2352213 (40069) 3452109 (41306) 6970494 (42724) 4223452 (34436) 3325933 (35663) 
     dis: 	82172.000 90314.000 90617.000 91951.000 92300.000 93517.000 94216.000 94565.000 96528.000 97089.000 97226.000 98154.000 99004.000 99006.000 99536.000 99749.000 100068.000 100216.000 100266.000 100312.000 100676.000 101026.000 101255.000 101293.000 101343.000 101655.000 102032.000 102270.000 102375.000 102961.000 103089.000 103263.000 103263.000 103387.000 103690.000 103872.000 104034.000 104191.000 104226.000 104284.000 104285.000 104940.000 105047.000 105180.000 105422.000 106067.000 106449.000 106702.000 106761.000 106783.000 107034.000 107184.000 107296.000 107449.000 107449.000 107581.000 107632.000 107763.000 107864.000 108160.000 108224.000 108291.000 108294.000 108335.000 108912.000 108970.000 108984.000 109206.000 109293.000 109423.000 109522.000 109562.000 109811.000 109913.000 109983.000 110277.000 110316.000 110331.000 110441.000 110575.000 110591.000 110662.000 110808.000 110909.000 110976.000 111100.000 111775.000 111789.000 111839.000 111886.000 111998.000 112185.000 112341.000 112357.000 112390.000 112671.000 112767.000 112852.000 113024.000 113095.000 
[ 92.016s ] *** Query time: 20.904
qps: 478.383
 *** HNSW recall 
HNSW get 762457 postive res from 1000000 results, recall@100:0.762
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.003 0.030 0.159 0.429 0.355 0.023 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 66183307, average: 6618.331
finished ivfpq index examples
[ 92.093s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 120 128"
	User time (seconds): 86.45
	System time (seconds): 6.63
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:33.09
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8375540
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2108610
	Voluntary context switches: 1
	Involuntary context switches: 109
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:09
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 120
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.703s ] Loaded metadata, 10000000 attr's found
[ 0.703s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.705s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.707s ] Loaded 10000 sift10M queries
[ 0.775s ] Loaded ground truth, gt_size: 100
[ 0.775s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.499s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 107.032s ] Query results (vector ids, then distances):
query 0 nn's (66811, 67810): 8403027 (67450) 9378841 (67272) 7733897 (67571) 4173863 (67608) 4910821 (67040) 9107698 (67599) 8845691 (66999) 3526473 (67146) 9314443 (67545) 1938934 (66865) 2762041 (67060) 4701803 (67593) 8423848 (67281) 6263573 (67526) 8049250 (67422) 7148781 (67671) 409266 (67388) 3561475 (67031) 4018856 (66829) 6768337 (67642) 1473467 (67795) 3637471 (67727) 8210098 (66940) 5421355 (67569) 7945013 (67385) 4703390 (67124) 7658530 (66926) 767289 (66900) 5074605 (67699) 8572299 (67776) 4399701 (66952) 2956150 (67208) 1491438 (67316) 6752283 (67516) 5211831 (67128) 4742405 (67043) 8785189 (67454) 7843872 (67530) 4716171 (67295) 2817178 (66993) 8485853 (67803) 6430488 (67186) 9576034 (67393) 6240391 (67615) 2629654 (67724) 7317164 (67705) 9904615 (67616) 6028336 (66848) 4997522 (66920) 6699019 (67538) 7044290 (67386) 2650162 (67778) 354143 (67410) 6872343 (66824) 251879 (67122) 5729944 (67785) 4161477 (67671) 628582 (67410) 9121086 (67619) 4676442 (67781) 3636190 (67410) 445652 (66931) 1041286 (67591) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	87416.000 91614.000 93100.000 93463.000 93775.000 96724.000 99498.000 99530.000 101750.000 103484.000 103933.000 103955.000 105738.000 106104.000 106285.000 106835.000 106941.000 107334.000 109300.000 109366.000 109848.000 110518.000 111332.000 111983.000 113208.000 113295.000 113591.000 114003.000 114081.000 115262.000 115505.000 115646.000 115715.000 116367.000 117077.000 117549.000 118333.000 119387.000 119481.000 119706.000 120649.000 122469.000 122546.000 123051.000 123365.000 123459.000 124580.000 127030.000 127386.000 127510.000 128309.000 128473.000 130080.000 131011.000 137303.000 137444.000 140607.000 142398.000 146772.000 155341.000 156486.000 158452.000 188971.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (80229, 81228): 5838578 (80325) 9900713 (80753) 8549337 (81124) 509915 (81217) 5424055 (81172) 8032969 (80529) 2765204 (81025) 5666656 (80815) 6168230 (80264) 6225217 (80943) 5941545 (80770) 8366738 (80505) 4099900 (80711) 5426587 (80360) 396317 (81225) 3620796 (80258) 2674497 (80311) 7026865 (81171) 3591833 (80960) 6408 (80621) 7931185 (80636) 8150421 (80634) 4278462 (80257) 6451481 (81107) 2075235 (80860) 3476862 (80771) 2499255 (80367) 2509938 (80645) 189701 (80601) 6840018 (80429) 3860320 (80802) 6328935 (80742) 1377258 (81017) 8321964 (81174) 3024802 (80696) 7133610 (80531) 7284954 (80464) 1708492 (80634) 5123707 (80469) 8286268 (81121) 6117808 (80641) 7596408 (81121) 4809089 (81005) 8923376 (80714) 9513961 (80967) 4695817 (80920) 6099104 (80876) 2182533 (80578) 1668321 (80673) 5929840 (80682) 4380431 (80271) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	71072.000 72674.000 75408.000 76465.000 80137.000 82276.000 83796.000 85142.000 86482.000 86554.000 87104.000 87114.000 88931.000 89134.000 89540.000 90700.000 91914.000 94831.000 96421.000 98404.000 99108.000 100309.000 100955.000 101049.000 101052.000 103452.000 103638.000 106189.000 106439.000 106605.000 108412.000 108641.000 109120.000 110324.000 111384.000 111721.000 113135.000 116247.000 116550.000 117058.000 121749.000 123382.000 125865.000 130709.000 131317.000 132260.000 134308.000 137280.000 141369.000 142252.000 158251.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (89717, 90716): 5727909 (90490) 515037 (90656) 5709226 (90258) 4112561 (89860) 86206 (89955) 8860131 (89804) 4347309 (90358) 5406339 (90424) 3582852 (90144) 1944507 (90001) 5017634 (90012) 7734691 (89795) 4502826 (90525) 9827814 (90252) 2581224 (90603) 7879176 (90271) 5908251 (89799) 3636755 (89788) 9803398 (90512) 5782741 (90379) 5567501 (90541) 3303937 (90116) 78458 (89733) 5958397 (90515) 9987830 (90043) 6943812 (90269) 6775926 (90567) 4087839 (89834) 2486146 (90037) 8891587 (89748) 8794287 (89721) 5184032 (90556) 2562449 (90592) 7551109 (89771) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	60084.000 61187.000 61273.000 61277.000 62188.000 65394.000 66548.000 68801.000 74225.000 74255.000 74834.000 77248.000 77430.000 77700.000 78594.000 79161.000 81002.000 81314.000 81419.000 82498.000 83118.000 84308.000 86123.000 86721.000 88026.000 90664.000 95182.000 95610.000 96903.000 101061.000 104291.000 107762.000 118294.000 139822.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (6838, 7837): 840086 (7034) 6281603 (7047) 1180726 (6952) 7890747 (7446) 9231939 (6869) 493857 (7268) 8089617 (7268) 8618960 (7556) 8701088 (6988) 4498186 (6839) 907443 (6923) 232753 (7204) 2407955 (6930) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9013.000 9157.000 11574.000 12341.000 13039.000 13482.000 13812.000 14688.000 15266.000 15771.000 15871.000 18419.000 35892.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (76228, 77227): 4082080 (76531) 2933282 (76829) 1776999 (76473) 3136966 (76552) 1903611 (76234) 6365202 (76568) 3376181 (76798) 9294532 (76726) 1952210 (76924) 4183967 (76467) 5578253 (76991) 4091152 (76530) 5821583 (76393) 1610200 (76943) 1772958 (76963) 7931620 (77115) 3062377 (76467) 6887605 (76999) 6432205 (76861) 345070 (76837) 5647249 (77110) 6413005 (76612) 1411070 (76353) 8958961 (76514) 149842 (76275) 7837262 (77044) 7096022 (76268) 2652478 (76506) 3579927 (77143) 7552846 (76268) 3184003 (77129) 359868 (76412) 8897576 (76871) 5895562 (77071) 1992637 (77076) 2496169 (76730) 8459169 (77158) 4074168 (76362) 6180220 (76416) 2774988 (77073) 4426498 (77225) 7022099 (77023) 4241563 (76910) 8255068 (76480) 209099 (76749) 7582478 (77005) 7911525 (77076) 2132761 (76840) 9095689 (76316) 2342696 (76914) 9305771 (76988) 9203261 (76753) 3693859 (77076) 2689 (76433) 5975169 (76893) 1877854 (76984) 437591 (76250) 9942265 (76841) 8636554 (77144) 32406 (76922) 2469712 (76537) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	99987.000 108149.000 109802.000 110513.000 110888.000 112651.000 113876.000 115279.000 115298.000 116571.000 117003.000 118479.000 119459.000 120012.000 122402.000 122744.000 122765.000 123029.000 125098.000 127122.000 127366.000 128457.000 130937.000 131124.000 131329.000 131785.000 132190.000 132410.000 132667.000 133509.000 133869.000 134931.000 135922.000 136299.000 136493.000 136522.000 136693.000 139293.000 140363.000 140438.000 140466.000 140850.000 140892.000 141461.000 142669.000 144327.000 146206.000 147619.000 148640.000 149395.000 150773.000 153055.000 154683.000 158156.000 162550.000 162970.000 163879.000 172704.000 177080.000 186282.000 204183.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 107.033s ] *** Query time: 31.652
qps: 315.931
 *** HNSW recall 
HNSW get 281991 postive res from 1000000 results, recall@100:0.282
recall dist(10% per bucket): 0.002 0.082 0.494 0.389 0.032 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 66183307, average: 6618.331
finished ivfpq index examples
[ 107.078s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 120 128"
	User time (seconds): 98.88
	System time (seconds): 8.93
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:48.18
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8378280
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2516069
	Voluntary context switches: 1
	Involuntary context switches: 654
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:13
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 120
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.725s ] Loaded metadata, 10000000 attr's found
[ 0.725s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.728s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.730s ] Loaded 10000 sift10M queries
[ 0.800s ] Loaded ground truth, gt_size: 100
[ 0.800s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.283s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 120.482s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1160663 (44937) 1923487 (44877) 6005033 (44913) 4242378 (44889) 6082120 (44907) 973062 (44888) 4500547 (44862) 9015237 (44922) 205633 (44892) 3922979 (44920) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	74292.000 100638.000 107799.000 118326.000 126026.000 127202.000 129320.000 130076.000 139274.000 152011.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (42821, 42920): 4754171 (42830) 1565098 (42885) 4062412 (42832) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	85715.000 93990.000 95550.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (13165, 13264): 2858053 (13240) 5121329 (13223) 4306175 (13182) 3380755 (13173) 6648054 (13203) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63217.000 70372.000 70560.000 75586.000 88435.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (25839, 25938): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (45629, 45728): 2160380 (45685) 5720716 (45669) 81179 (45685) 3779417 (45727) 819390 (45686) 4922302 (45648) 54831 (45652) 6747648 (45640) 4001518 (45702) 5068603 (45727) 694166 (45697) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	101857.000 113419.000 128703.000 132676.000 133900.000 143175.000 145272.000 146533.000 154121.000 158984.000 159530.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 120.482s ] *** Query time: 32.199
qps: 310.572
 *** HNSW recall 
HNSW get 45336 postive res from 1000000 results, recall@100:0.045
recall dist(10% per bucket): 0.971 0.029 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 66183307, average: 6618.331
finished ivfpq index examples
[ 120.550s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 120 128"
	User time (seconds): 108.64
	System time (seconds): 12.91
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:01.56
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8377252
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3389803
	Voluntary context switches: 1
	Involuntary context switches: 248
	Swaps: 0
	File system inputs: 0
	File system outputs: 72
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
