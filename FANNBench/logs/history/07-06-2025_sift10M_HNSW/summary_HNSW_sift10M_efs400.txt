Start time: 04:02
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 400
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.713s ] Loaded metadata, 10000000 attr's found
[ 0.713s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.716s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.718s ] Loaded 10000 sift10M queries
[ 0.788s ] Loaded ground truth, gt_size: 100
[ 0.788s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.154s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 156.841s ] Query results (vector ids, then distances):
query 0 nn's (16495, 66494): 1167995 (22866) 6141318 (31677) 1160663 (44937) 4738758 (63657) 7293718 (39822) 7632021 (61505) 1020562 (25533) 6984373 (66297) 7077742 (48276) 9397776 (41815) 238649 (52700) 9536881 (62309) 7860530 (36909) 7866119 (35104) 2375126 (35044) 77153 (55251) 8851580 (35051) 1835932 (42846) 7164607 (51560) 6951413 (64572) 1077702 (54735) 5770330 (20661) 8435256 (22283) 9251169 (17058) 5343331 (64452) 4874283 (26334) 3968857 (50042) 4689336 (50131) 9860956 (45915) 419470 (53438) 3255720 (45053) 7873580 (61095) 2481703 (26660) 9409479 (53603) 3663987 (28773) 331007 (42101) 1665852 (42722) 9534078 (23152) 8428377 (21292) 6019325 (39083) 392808 (49021) 4897568 (21711) 1929740 (63695) 3879851 (51251) 5305337 (33050) 463666 (53257) 9607176 (18423) 6002319 (38494) 6871531 (32699) 242725 (22773) 4294175 (55347) 1203246 (35809) 4770231 (18286) 5324763 (21207) 7237592 (57273) 9237550 (19315) 7912999 (56114) 7459877 (65985) 7011791 (23273) 2365415 (44282) 5001655 (54619) 447965 (21988) 839586 (47809) 46468 (34801) 9906463 (54872) 4671898 (19963) 3369112 (45196) 4047656 (37028) 5228659 (32650) 3049131 (56789) 6009021 (45302) 1059921 (24441) 1891236 (55041) 7220675 (64056) 6071002 (32340) 9839146 (52506) 7200266 (62910) 1000673 (62068) 3384323 (18456) 7895839 (33099) 4532213 (19173) 7989030 (16945) 7263957 (52681) 8052577 (63399) 476293 (42096) 5356206 (17599) 4218358 (21713) 3094752 (38222) 8838842 (42249) 4436135 (46921) 4271011 (16541) 6253443 (59467) 902148 (61383) 1415164 (27761) 2793536 (56447) 6425728 (45806) 1449158 (58339) 8446671 (55365) 1292574 (65818) 9119171 (57162) 
     dis: 	72023.000 73183.000 74292.000 74463.000 75573.000 75587.000 76767.000 76880.000 76934.000 77424.000 77858.000 78206.000 78859.000 79448.000 79929.000 79964.000 80060.000 80072.000 80358.000 80726.000 80790.000 81243.000 81799.000 81847.000 81853.000 82000.000 82148.000 82232.000 82276.000 82431.000 82432.000 82438.000 82457.000 82688.000 82852.000 83126.000 83197.000 83197.000 83232.000 83269.000 83552.000 83581.000 83583.000 83717.000 83735.000 83787.000 83936.000 83988.000 84002.000 84214.000 84333.000 84353.000 84388.000 84463.000 84487.000 84526.000 84734.000 84945.000 85235.000 85293.000 85310.000 85625.000 85800.000 85831.000 85842.000 85847.000 85865.000 85876.000 85928.000 86023.000 86034.000 86093.000 86203.000 86211.000 86280.000 86308.000 86329.000 86345.000 86376.000 86379.000 86402.000 86458.000 86743.000 86793.000 86891.000 86902.000 86906.000 86958.000 87152.000 87276.000 87297.000 87318.000 87357.000 87361.000 87426.000 87485.000 87494.000 87510.000 87523.000 87559.000 
query 1 nn's (9202, 59201): 285986 (29147) 1273419 (33970) 7501440 (19981) 411491 (28374) 3221056 (31139) 8349375 (52325) 469965 (40746) 9958454 (20815) 9791343 (31369) 3309105 (58581) 1120308 (58129) 8596968 (57015) 7917424 (30836) 9009284 (43025) 371485 (21478) 7120642 (56260) 6378991 (24604) 7331745 (31011) 2993914 (24499) 8879018 (38985) 9015118 (35539) 4922660 (25703) 7692715 (33795) 5008572 (16803) 5531491 (42049) 375999 (11846) 4870548 (14957) 5509879 (56316) 9933148 (29627) 6073626 (52753) 296178 (9794) 1843885 (58567) 7693023 (48225) 9537422 (38205) 8646169 (48602) 3631651 (46071) 9781041 (46813) 3786289 (47328) 5516040 (39608) 1341845 (13158) 1784776 (14038) 9167559 (28640) 1350904 (17079) 8590082 (35871) 2473259 (21347) 6174201 (27446) 7342014 (43207) 8588450 (26655) 9245954 (25046) 8918460 (22635) 8152291 (58419) 4689763 (13954) 9211699 (48066) 1000577 (42240) 741761 (13735) 1461697 (9342) 8440112 (16815) 1259657 (41217) 8984166 (19820) 6533284 (58872) 4649124 (10463) 6986308 (42127) 9913606 (25633) 2807070 (21497) 7315015 (40488) 5386381 (56639) 2652241 (18132) 7672903 (50549) 9349060 (12055) 8675363 (15599) 2234566 (43091) 2353489 (36758) 6630533 (47319) 8828687 (57507) 5226515 (31871) 691253 (12031) 4009753 (42973) 6971668 (13402) 482087 (52392) 3231603 (11404) 7968009 (34408) 2093850 (58698) 8518091 (32017) 1932354 (54429) 1345854 (17575) 5790422 (10136) 6672132 (28461) 5254261 (23886) 3740235 (47884) 3891904 (36054) 7513620 (14628) 8155958 (44047) 9388703 (42582) 735668 (54882) 5307850 (28502) 5869072 (17436) 6383821 (40068) 6281612 (57414) 8743749 (50038) 7856853 (44589) 
     dis: 	43778.000 46522.000 46910.000 46959.000 49695.000 49997.000 50753.000 51055.000 51493.000 51760.000 52532.000 52768.000 52837.000 52935.000 54431.000 54684.000 54869.000 54968.000 55326.000 56123.000 56457.000 56486.000 56490.000 56506.000 56591.000 56619.000 56915.000 56959.000 57000.000 57111.000 57313.000 57411.000 57450.000 57685.000 57703.000 57719.000 57738.000 57771.000 57779.000 57814.000 57917.000 57926.000 57960.000 58064.000 58119.000 58390.000 58531.000 58633.000 58737.000 58837.000 58925.000 59030.000 59230.000 59284.000 59621.000 60324.000 60340.000 60594.000 60632.000 60780.000 60858.000 60913.000 60931.000 61019.000 61093.000 61198.000 61403.000 62051.000 62069.000 62084.000 62094.000 62214.000 62563.000 62681.000 62693.000 62694.000 62791.000 62855.000 63173.000 63219.000 63272.000 63407.000 63533.000 63792.000 63804.000 63807.000 63864.000 63867.000 63956.000 64165.000 64180.000 64475.000 64556.000 64597.000 64772.000 64890.000 64958.000 65021.000 65073.000 65075.000 
query 2 nn's (3185, 53184): 4588082 (5850) 1931585 (19001) 289025 (23641) 199400 (49790) 5982237 (43009) 9262583 (10127) 3493381 (41222) 6296252 (42595) 9466222 (12113) 9416415 (22498) 436139 (39429) 2511585 (51247) 4279056 (31979) 9609459 (52017) 9410320 (17475) 5988705 (35014) 4154052 (32764) 2448858 (26319) 40266 (43315) 7654217 (36735) 8068558 (3605) 3942637 (41711) 893390 (20914) 8432027 (41968) 2098752 (8636) 2601636 (4981) 4331583 (20733) 1198061 (39524) 8086660 (10594) 1229611 (42372) 2346097 (47666) 9541874 (40780) 5499961 (41359) 1784913 (17205) 4347605 (5987) 4519717 (16603) 3724739 (11973) 2413882 (42838) 4450077 (4833) 4021389 (14109) 5035777 (42804) 8001622 (38121) 8590994 (28647) 9790465 (51400) 3795529 (39233) 6363894 (12238) 9330360 (23016) 5039283 (52769) 3967402 (4299) 3061201 (36811) 888761 (42790) 9403244 (18354) 2953864 (3859) 141025 (31028) 5631784 (19399) 4495608 (32772) 1160482 (18573) 4957555 (20414) 8635193 (4483) 1463083 (23709) 4259715 (27472) 1878319 (14518) 2412946 (20189) 6856614 (13752) 1956474 (39813) 4713533 (11323) 445822 (18954) 3948507 (46592) 2038327 (32825) 247874 (27384) 764856 (15554) 8965515 (47906) 8064334 (52538) 2180225 (33712) 2721859 (45661) 2027436 (10601) 2800256 (3943) 8329652 (11029) 9302830 (30435) 9724885 (20426) 2247452 (7760) 1700496 (39753) 8690196 (29802) 8703413 (48767) 1758192 (46894) 3667879 (49905) 5488746 (22698) 27015 (15961) 2571149 (4419) 5834114 (42413) 7409471 (23955) 4111853 (11705) 8511243 (52818) 9650562 (41043) 9975313 (47116) 4735422 (29589) 596128 (12783) 483758 (16444) 6511526 (45450) 3457019 (10629) 
     dis: 	47637.000 48317.000 48416.000 49395.000 50144.000 50601.000 51043.000 51071.000 51654.000 51724.000 52554.000 52611.000 52719.000 52894.000 52939.000 53001.000 53029.000 53034.000 53080.000 53106.000 53350.000 53664.000 53672.000 53772.000 53912.000 53913.000 54277.000 54288.000 54318.000 54404.000 54464.000 54558.000 54632.000 54759.000 54968.000 55350.000 55376.000 55630.000 55719.000 55907.000 55983.000 55995.000 56108.000 56197.000 56262.000 56312.000 56319.000 56504.000 56939.000 56977.000 57045.000 57060.000 57221.000 57318.000 57398.000 57423.000 57554.000 57694.000 57831.000 57848.000 57942.000 58055.000 58237.000 58297.000 58484.000 58526.000 58536.000 58549.000 58701.000 58734.000 58933.000 58955.000 59109.000 59124.000 59206.000 59233.000 59276.000 59281.000 59365.000 59587.000 59600.000 59681.000 59783.000 59874.000 59887.000 60030.000 60058.000 60080.000 60086.000 60114.000 60126.000 60183.000 60259.000 60272.000 60295.000 60303.000 60339.000 60413.000 60574.000 60604.000 
query 3 nn's (49315, 99314): 980813 (57404) 1527942 (96648) 4147780 (96552) 6151275 (54227) 8410503 (57593) 2965607 (50671) 8174765 (80882) 7301932 (58021) 3643741 (49824) 1218934 (95625) 5124856 (83202) 9132978 (88985) 3421136 (79354) 6917633 (65929) 1417424 (52791) 3143192 (84650) 6411621 (75479) 2892348 (96310) 3041965 (53918) 727241 (54631) 5224964 (92235) 8649378 (64804) 1911911 (93967) 2218358 (96205) 1344917 (94289) 1553832 (56561) 1739894 (59501) 8501071 (59579) 4246457 (73056) 4486659 (62681) 1514080 (69970) 9577990 (76369) 7301436 (87758) 1590183 (88142) 8381210 (50663) 3633444 (58089) 9925791 (97055) 8051314 (74322) 5381241 (67484) 192312 (56033) 879082 (58444) 9313337 (65861) 179529 (69049) 9354839 (82742) 9978957 (58477) 2112048 (90994) 7404448 (97484) 9625994 (68515) 9603354 (76938) 5792548 (50167) 9335193 (61835) 1028926 (67570) 4983026 (77570) 5777538 (67724) 7119531 (90378) 3421950 (66323) 7463079 (77126) 7614050 (89191) 3009997 (97202) 686764 (84900) 2236726 (90758) 422848 (66608) 7865854 (55686) 6045699 (86837) 1061321 (74643) 936598 (90457) 8688385 (51100) 7950822 (60752) 5106668 (83807) 578322 (76455) 2843331 (94548) 6697954 (97706) 8012973 (49730) 7583501 (51620) 8643637 (91536) 3252978 (77827) 3112499 (60951) 3704240 (51893) 7747974 (55824) 7216322 (83941) 597580 (97456) 4995291 (67298) 5181700 (61434) 3379947 (69911) 7556732 (84479) 449169 (84914) 9947826 (87273) 3540851 (56783) 1229577 (98674) 7829631 (88278) 3195943 (64046) 3080406 (50210) 9332155 (77339) 6676311 (50438) 6306155 (92517) 7745448 (77965) 2842840 (85067) 240857 (83846) 9102009 (51785) 4540202 (85638) 
     dis: 	4296.000 4309.000 4550.000 4602.000 4817.000 5013.000 5180.000 5240.000 5279.000 5468.000 5492.000 5559.000 5596.000 5626.000 5643.000 5653.000 5998.000 6047.000 6095.000 6237.000 6378.000 6468.000 6655.000 6693.000 6747.000 6792.000 6845.000 6973.000 6981.000 7021.000 7171.000 7282.000 7394.000 7460.000 7506.000 7509.000 7580.000 7644.000 7666.000 7673.000 7688.000 7693.000 7708.000 7725.000 7788.000 7792.000 7801.000 7825.000 7841.000 8040.000 8123.000 8228.000 8247.000 8322.000 8362.000 8402.000 8404.000 8407.000 8437.000 8491.000 8496.000 8500.000 8579.000 8590.000 8608.000 8643.000 8797.000 8815.000 8875.000 8885.000 8898.000 8912.000 8919.000 8939.000 8954.000 8993.000 9075.000 9212.000 9230.000 9254.000 9370.000 9382.000 9404.000 9470.000 9526.000 9576.000 9621.000 9679.000 9736.000 9746.000 9774.000 9786.000 9813.000 9835.000 9888.000 9980.000 9997.000 10000.000 10018.000 10060.000 
query 4 nn's (35866, 85865): 3477074 (81770) 6578584 (38818) 3389697 (48484) 6413263 (79374) 1141817 (80050) 4344456 (43616) 1149636 (70537) 2524726 (73742) 546979 (84338) 9569496 (46755) 3692806 (78743) 6408001 (79219) 7358946 (78288) 7423926 (65584) 3832333 (60859) 7603300 (57407) 5708200 (65636) 8630333 (78134) 3637016 (75733) 5175563 (46909) 2908498 (78047) 1743659 (74315) 6551841 (44576) 5117098 (71983) 990482 (57004) 6357047 (37869) 3842053 (47229) 2732612 (65651) 4380344 (42821) 6838860 (49930) 4501065 (71247) 8713517 (85738) 3650068 (52380) 567070 (84232) 9170163 (44830) 3329904 (47742) 9836279 (55277) 4830381 (40295) 3823745 (70484) 4831513 (48957) 2989150 (73723) 4775817 (52301) 1082443 (61970) 4719865 (48976) 935279 (38708) 9067729 (68162) 3405146 (73681) 5257851 (42550) 1829341 (62245) 9383376 (65777) 3016662 (80615) 5707536 (47200) 70084 (56331) 6720082 (47192) 6637386 (69548) 64045 (81996) 2015975 (59169) 3647183 (65407) 303093 (72258) 4750135 (57127) 565881 (56948) 6699578 (59103) 3839204 (40859) 1020874 (60599) 8493266 (66603) 2974906 (45133) 2045614 (57740) 417315 (38580) 4422483 (78850) 6258948 (83408) 1466559 (35927) 5399121 (81519) 8515169 (70508) 7434343 (79828) 9632952 (47320) 5475257 (51556) 4399052 (55143) 5826594 (84832) 1281985 (76129) 4901952 (44629) 5729760 (66147) 5001194 (51110) 2419196 (53268) 3099917 (49532) 272409 (47998) 379765 (80700) 9821817 (36297) 4374812 (62476) 3497336 (45395) 484991 (49791) 4551510 (38108) 2288117 (77366) 992395 (66919) 8296728 (49670) 4982207 (84124) 8972367 (43409) 5221238 (43285) 6658100 (78266) 5953632 (62520) 1686408 (57093) 
     dis: 	80355.000 82172.000 84350.000 84921.000 85933.000 85939.000 85940.000 86290.000 86866.000 86883.000 86927.000 86935.000 87070.000 87152.000 87409.000 87829.000 88206.000 88437.000 88515.000 88607.000 88949.000 89054.000 89542.000 89682.000 90021.000 90314.000 90358.000 90596.000 90617.000 90822.000 90882.000 91007.000 91009.000 91047.000 91164.000 91223.000 91244.000 91259.000 91268.000 91392.000 91566.000 91583.000 91730.000 91846.000 91951.000 92148.000 92174.000 92300.000 92442.000 92692.000 92881.000 93074.000 93335.000 93429.000 93525.000 93643.000 93705.000 93789.000 93920.000 93976.000 94172.000 94180.000 94216.000 94288.000 94291.000 94292.000 94445.000 94565.000 94638.000 94672.000 94725.000 94807.000 94897.000 95017.000 95103.000 95165.000 95276.000 95431.000 95434.000 95535.000 95543.000 95630.000 95711.000 95977.000 96104.000 96148.000 96157.000 96273.000 96371.000 96480.000 96528.000 96597.000 96611.000 96677.000 96706.000 96804.000 96965.000 96976.000 97012.000 97062.000 
[ 156.842s ] *** Query time: 63.213
qps: 158.195
 *** HNSW recall 
HNSW get 995459 postive res from 1000000 results, recall@100:0.995
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.258 0.742 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 214135581, average: 21413.558
finished ivfpq index examples
[ 156.872s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 400 128"
	User time (seconds): 133.00
	System time (seconds): 15.12
	Percent of CPU this job got: 93%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:37.64
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8375196
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 9
	Minor (reclaiming a frame) page faults: 3470396
	Voluntary context switches: 27335
	Involuntary context switches: 221
	Swaps: 0
	File system inputs: 2125304
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:06
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 400
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.897s ] Loaded metadata, 10000000 attr's found
[ 0.897s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.901s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.903s ] Loaded 10000 sift10M queries
[ 0.997s ] Loaded ground truth, gt_size: 100
[ 0.997s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.628s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 117.726s ] Query results (vector ids, then distances):
query 0 nn's (30338, 40337): 6141318 (31677) 7293718 (39822) 7860530 (36909) 7866119 (35104) 2375126 (35044) 8851580 (35051) 6019325 (39083) 5305337 (33050) 6002319 (38494) 6871531 (32699) 1203246 (35809) 46468 (34801) 4047656 (37028) 5228659 (32650) 6071002 (32340) 7895839 (33099) 3094752 (38222) 5600358 (36832) 867263 (31804) 9584266 (30762) 9107723 (35394) 6865307 (40092) 5315711 (38979) 1432946 (31393) 705774 (37942) 5008601 (36205) 8135232 (36517) 5577977 (34177) 8615059 (36713) 944203 (37091) 2478200 (32527) 6899305 (38669) 8360507 (37312) 1313109 (34667) 1136638 (31056) 448534 (39582) 3947830 (38978) 9422333 (33977) 746007 (34895) 9672475 (38293) 8892654 (36847) 4988257 (36327) 6440255 (32710) 8438028 (31678) 1136340 (34358) 8612315 (32697) 7589020 (37600) 9548834 (39161) 8841384 (38576) 4254855 (35011) 9596672 (40182) 223353 (38579) 8200051 (35846) 9099555 (39603) 8989130 (35440) 3532484 (31798) 6134807 (34370) 4862834 (38903) 102938 (32717) 3206773 (35296) 9122103 (34064) 9868360 (38444) 4985966 (32045) 7907051 (32852) 3645920 (34139) 9097134 (39520) 1530219 (33642) 8435167 (38735) 7100864 (37198) 5073149 (38840) 3440180 (37064) 8635455 (35154) 2947576 (33862) 458819 (31656) 1326722 (30890) 2082844 (36255) 4408250 (32306) 9722001 (36218) 9297762 (33273) 1066507 (33527) 4183417 (38130) 33203 (34980) 8070406 (31467) 147219 (34878) 1907588 (35276) 3452727 (37631) 8671427 (33099) 6609059 (39227) 9577450 (34723) 1939129 (36144) 9645387 (39738) 5717461 (35827) 839322 (37140) 3975533 (33764) 4874891 (39564) 7330607 (37534) 5730004 (30594) 6943042 (33685) 3731251 (38744) 1538515 (35143) 
     dis: 	73183.000 75573.000 78859.000 79448.000 79929.000 80060.000 83269.000 83735.000 83988.000 84002.000 84353.000 85831.000 85876.000 85928.000 86280.000 86379.000 86958.000 87654.000 87684.000 87824.000 88236.000 88343.000 88379.000 88466.000 88599.000 88866.000 88922.000 89184.000 89325.000 89498.000 89521.000 89696.000 89755.000 89869.000 90165.000 90179.000 90800.000 90926.000 92033.000 92252.000 92310.000 92323.000 92348.000 92570.000 92703.000 92750.000 93011.000 93101.000 93280.000 93472.000 93610.000 93709.000 93709.000 93802.000 94059.000 94066.000 94086.000 94103.000 94282.000 94393.000 94416.000 94445.000 94497.000 94922.000 95222.000 95233.000 95324.000 95348.000 95429.000 95557.000 95566.000 95604.000 95635.000 95704.000 95715.000 95956.000 96010.000 96042.000 96101.000 96234.000 96450.000 96595.000 96598.000 96616.000 96779.000 97173.000 97175.000 97242.000 97285.000 97302.000 97428.000 97499.000 97533.000 97552.000 97582.000 97738.000 97954.000 97964.000 97990.000 98014.000 
query 1 nn's (77037, 87036): 5552416 (78513) 1909131 (86406) 5271910 (85162) 1745130 (81239) 1503119 (86342) 4456023 (81807) 7409966 (77482) 8223991 (85939) 3200275 (77568) 1015812 (81428) 1410399 (79450) 8857836 (86643) 3733744 (80018) 2077396 (86724) 9460541 (85631) 8811964 (78982) 109736 (83008) 8899541 (77302) 8880895 (85935) 5796685 (85349) 3419918 (85008) 9329945 (82932) 6363708 (86935) 7066298 (82075) 4082654 (81611) 5838578 (80325) 3738992 (82987) 7582671 (84196) 9900713 (80753) 2901807 (85802) 5113286 (82655) 8757781 (78436) 4365144 (85163) 2773940 (83061) 6861763 (79255) 1358210 (82366) 3483770 (77125) 4321977 (86855) 9967397 (78546) 5682634 (83480) 4317853 (78238) 5847833 (86661) 4500577 (79020) 1116609 (86888) 8549337 (81124) 6605974 (84206) 3595041 (81789) 801963 (83162) 2442767 (79429) 2280013 (82912) 9594077 (86656) 509915 (81217) 3059195 (82186) 4565789 (86269) 8588534 (77075) 6639650 (81288) 5481254 (81714) 1886034 (78747) 1329486 (82222) 4546662 (85828) 9220661 (83515) 5988769 (77978) 8717769 (79874) 4558935 (86467) 4007564 (84162) 4058523 (78300) 4811463 (85249) 5424055 (81172) 3435845 (77715) 7374448 (83457) 3209840 (77363) 4430490 (86075) 5117797 (86623) 1208441 (84977) 5425346 (81306) 8189889 (86632) 5466960 (78112) 5234937 (86897) 296036 (85169) 8838862 (78806) 2380220 (83780) 9429619 (85840) 7452672 (82219) 8032969 (80529) 767180 (81326) 5248280 (85367) 3975668 (85506) 2244611 (77270) 2765204 (81025) 3170445 (78292) 7580269 (82450) 6679899 (77613) 2742397 (82912) 5250239 (85491) 9746886 (82707) 3791268 (86621) 6423268 (81346) 4649157 (79932) 4010699 (83940) 1053993 (82403) 
     dis: 	42944.000 51310.000 52252.000 54734.000 59550.000 59585.000 60255.000 61426.000 64056.000 64480.000 64505.000 65552.000 65583.000 65598.000 65602.000 66348.000 66467.000 66896.000 67701.000 68091.000 70467.000 70708.000 70710.000 70821.000 71063.000 71072.000 71399.000 71610.000 72674.000 72743.000 72758.000 72763.000 72819.000 73221.000 73309.000 73722.000 73935.000 74235.000 74478.000 74500.000 74598.000 75091.000 75262.000 75355.000 75408.000 75572.000 75624.000 75800.000 75826.000 76045.000 76070.000 76465.000 76655.000 77169.000 77186.000 77403.000 77578.000 77900.000 78067.000 78527.000 78559.000 78567.000 78591.000 78628.000 79040.000 79138.000 79667.000 80137.000 80457.000 80541.000 80665.000 80727.000 80981.000 80989.000 81002.000 81106.000 81341.000 81577.000 81665.000 81824.000 82062.000 82065.000 82254.000 82276.000 82304.000 82417.000 83510.000 83789.000 83796.000 83813.000 83813.000 83880.000 84019.000 84289.000 84366.000 84467.000 84509.000 84567.000 84617.000 84662.000 
query 2 nn's (55705, 65704): 237844 (57153) 8132849 (63316) 2795236 (62148) 9068473 (62147) 8863268 (55928) 8455929 (59448) 4665202 (65519) 8565013 (65663) 4433607 (61698) 1329974 (65153) 4555038 (63166) 8563094 (58325) 1080573 (56490) 8198272 (61501) 6114289 (59111) 7685482 (62295) 7168507 (61488) 5596868 (58496) 8333106 (61471) 2723946 (57827) 4542872 (61400) 9384590 (59693) 5715023 (62436) 8075681 (59224) 8051890 (56266) 945107 (59251) 3224964 (61887) 1795636 (58821) 4647083 (61889) 4898170 (58003) 5228926 (56641) 3108541 (56307) 5520814 (57891) 2350493 (63546) 4497755 (65054) 29358 (65481) 9586564 (59008) 6247603 (63801) 137116 (60929) 2871507 (64701) 330461 (65445) 2523582 (58820) 7454296 (64256) 8084717 (62575) 4703041 (58856) 7651848 (56532) 1366265 (58751) 2883341 (56298) 2540958 (64117) 283793 (56625) 2461335 (62859) 4391513 (62475) 3860058 (61774) 6412105 (61120) 868456 (62065) 4743122 (61891) 9431634 (57575) 7158950 (63558) 9705261 (60516) 1613547 (58741) 6208823 (61767) 7221663 (60629) 5315700 (61751) 9982250 (57564) 245248 (61481) 8383671 (61008) 6553074 (59575) 1015153 (56733) 5270485 (63229) 2721821 (58910) 5985758 (62278) 5878397 (58972) 2764590 (56554) 2382554 (61058) 6090181 (61186) 9212023 (59032) 1143584 (56157) 1579423 (63799) 3612389 (59908) 7464135 (57113) 3714042 (64506) 3624966 (62785) 2007487 (61256) 4299983 (57114) 4511809 (62276) 2220152 (61420) 8597513 (60174) 5074720 (59964) 668342 (65314) 7975982 (61676) 6081638 (56501) 7028317 (60120) 8394381 (64969) 7671868 (56373) 2352405 (59041) 8975057 (60034) 6406251 (59215) 4877317 (64096) 8122567 (57529) 6222847 (56154) 
     dis: 	49294.000 50997.000 51181.000 52145.000 53225.000 53383.000 53809.000 54061.000 54908.000 55134.000 55225.000 55995.000 56182.000 56416.000 56627.000 57176.000 57597.000 57613.000 57924.000 58328.000 58989.000 59021.000 59123.000 59158.000 59334.000 59895.000 60035.000 60175.000 60225.000 60397.000 60628.000 60710.000 61539.000 61611.000 61845.000 61858.000 61965.000 62491.000 62507.000 62667.000 62691.000 62798.000 62909.000 63001.000 63300.000 63338.000 63398.000 63404.000 63499.000 63549.000 63628.000 63630.000 63678.000 63832.000 64004.000 64174.000 64188.000 64334.000 64345.000 64567.000 64786.000 64879.000 64911.000 65420.000 65519.000 65632.000 65675.000 65701.000 65774.000 65778.000 65911.000 66113.000 66246.000 66262.000 66383.000 66496.000 66664.000 66769.000 66775.000 66850.000 66858.000 66915.000 67271.000 67273.000 67312.000 67389.000 67395.000 67550.000 67577.000 67607.000 67718.000 67733.000 67754.000 67780.000 67874.000 67974.000 68014.000 68178.000 68196.000 68213.000 
query 3 nn's (68256, 78255): 6411621 (75479) 4246457 (73056) 1514080 (69970) 9577990 (76369) 8051314 (74322) 179529 (69049) 9625994 (68515) 9603354 (76938) 4983026 (77570) 7463079 (77126) 1061321 (74643) 578322 (76455) 3252978 (77827) 3379947 (69911) 9332155 (77339) 7745448 (77965) 4537205 (69605) 4824483 (76626) 9706597 (74482) 4856979 (75280) 4899384 (72017) 4258600 (71620) 2311118 (74542) 5110678 (76661) 5566648 (76538) 6934608 (78112) 5758654 (75285) 9833335 (77885) 2941694 (75342) 3877232 (75132) 3523917 (69249) 115823 (73565) 2256506 (68295) 4491781 (76846) 6943685 (74006) 6091433 (73224) 8959954 (71809) 5147194 (72622) 3965061 (75682) 1787200 (69230) 8157747 (69658) 1961581 (78022) 6252048 (74147) 5498749 (76453) 1096237 (78243) 4104803 (73729) 9604675 (71943) 116302 (75981) 4338667 (76290) 4933042 (77577) 434846 (75860) 6662913 (70602) 7018328 (77497) 7887517 (75786) 957097 (68545) 2960857 (72083) 2050399 (70248) 8532848 (73219) 8198543 (69740) 9081529 (71677) 5330122 (76348) 650123 (74647) 6306650 (70227) 3610014 (69045) 8663753 (69694) 4664026 (76358) 3547401 (70131) 5429548 (77215) 6089729 (74507) 3004616 (77242) 617732 (74005) 7865409 (71914) 6901252 (69639) 3284716 (71856) 6141330 (71761) 8267830 (72849) 5520378 (71660) 2139674 (71194) 2789396 (77393) 5623544 (73074) 424664 (69813) 1850642 (68351) 9512018 (69878) 3925959 (76081) 899264 (69740) 9083030 (74195) 3053302 (73591) 6156871 (73592) 5577884 (76925) 6342790 (75860) 7276573 (72528) 7966182 (78001) 9211610 (72496) 3013029 (68711) 4376452 (73079) 2411446 (71039) 2827173 (74629) 2567122 (76314) 6749489 (73113) 7742784 (68420) 
     dis: 	5998.000 6981.000 7171.000 7282.000 7644.000 7708.000 7825.000 7841.000 8247.000 8404.000 8608.000 8885.000 8993.000 9470.000 9813.000 9980.000 10154.000 10174.000 10493.000 10532.000 10665.000 10702.000 10792.000 10821.000 10846.000 10851.000 10977.000 10990.000 10994.000 11135.000 11236.000 11239.000 11270.000 11345.000 11402.000 11545.000 11598.000 11814.000 11823.000 12107.000 12215.000 12233.000 12370.000 12402.000 12425.000 12449.000 12475.000 12477.000 12528.000 12581.000 12703.000 12925.000 12973.000 12997.000 13280.000 13373.000 13393.000 13452.000 13530.000 13569.000 13660.000 13700.000 13837.000 13838.000 13894.000 13904.000 14106.000 14164.000 14165.000 14232.000 14449.000 14525.000 14544.000 14582.000 14633.000 14672.000 14774.000 14870.000 14933.000 15158.000 15176.000 15218.000 15254.000 15407.000 15584.000 15623.000 15654.000 15797.000 15851.000 15852.000 16025.000 16087.000 16089.000 16102.000 16154.000 16161.000 16178.000 16256.000 16266.000 16275.000 
query 4 nn's (32860, 42859): 6578584 (38818) 6357047 (37869) 4380344 (42821) 4830381 (40295) 935279 (38708) 5257851 (42550) 7559534 (34726) 3839204 (40859) 417315 (38580) 1466559 (35927) 5466491 (32978) 9821817 (36297) 4551510 (38108) 330880 (34126) 1194149 (42059) 2721988 (37884) 3814747 (40292) 797235 (41978) 6468850 (33298) 8742734 (35925) 2528505 (42180) 4355165 (36701) 2840566 (32970) 1355777 (35010) 1508852 (41574) 9353798 (42619) 3287249 (35694) 4943281 (41238) 2161200 (41175) 9293426 (36276) 1947516 (39904) 5674137 (35926) 6770270 (37124) 2178583 (39724) 7210902 (34563) 7360489 (42573) 4179938 (41546) 2625230 (34952) 8843847 (34786) 4982198 (41794) 3553812 (41044) 2423429 (42078) 1086928 (34656) 933705 (35471) 6132133 (35938) 3368229 (35512) 1381124 (33201) 8325663 (40558) 6152391 (40418) 34728 (33521) 8137702 (38188) 230302 (33409) 1449918 (37711) 8210698 (41615) 6361396 (38338) 9825567 (40718) 1417456 (42485) 7548313 (40007) 2352243 (35415) 9394278 (40775) 8065643 (36769) 4122303 (37458) 2071068 (33013) 4186740 (33627) 3587564 (33538) 3490833 (42009) 4337818 (33817) 3739124 (38868) 3732556 (39898) 4033968 (42272) 4738668 (36615) 1800369 (40984) 6819816 (35889) 4230287 (36808) 3300045 (37849) 9687221 (35602) 1319029 (40740) 9999853 (42029) 7367262 (40275) 1528313 (42186) 795939 (35580) 6527495 (38120) 9934785 (38919) 6871356 (38212) 4650677 (34446) 9484373 (39404) 8227456 (34411) 280740 (38932) 1200356 (37898) 3135878 (42728) 1083442 (40498) 8683631 (38436) 4440064 (36556) 9338967 (33200) 3797890 (38909) 4203015 (33199) 1397093 (37399) 3431944 (35508) 8752105 (41411) 7808352 (39961) 
     dis: 	82172.000 90314.000 90617.000 91259.000 91951.000 92300.000 93517.000 94216.000 94565.000 94725.000 95679.000 96157.000 96528.000 96817.000 97089.000 97226.000 97638.000 98154.000 98748.000 99004.000 99006.000 99536.000 99749.000 100068.000 100216.000 100266.000 100312.000 100452.000 100676.000 100967.000 100979.000 101026.000 101255.000 101293.000 101343.000 101655.000 102032.000 102068.000 102270.000 102326.000 102375.000 102613.000 102639.000 102758.000 102961.000 103089.000 103263.000 103263.000 103353.000 103387.000 103459.000 103690.000 103872.000 104034.000 104191.000 104226.000 104284.000 104285.000 104566.000 104644.000 104940.000 104994.000 105047.000 105180.000 105422.000 105839.000 105873.000 105947.000 106067.000 106204.000 106224.000 106328.000 106347.000 106376.000 106438.000 106449.000 106593.000 106702.000 106761.000 106783.000 106857.000 107019.000 107034.000 107154.000 107184.000 107292.000 107296.000 107449.000 107449.000 107512.000 107581.000 107632.000 107673.000 107763.000 107864.000 107954.000 108068.000 108160.000 108224.000 108291.000 
[ 117.726s ] *** Query time: 44.612
qps: 224.156
 *** HNSW recall 
HNSW get 961847 postive res from 1000000 results, recall@100:0.962
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.053 0.820 0.125 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 214135581, average: 21413.558
finished ivfpq index examples
[ 117.757s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 400 128"
	User time (seconds): 112.08
	System time (seconds): 6.15
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:58.24
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8376504
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2108656
	Voluntary context switches: 1
	Involuntary context switches: 116
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:09
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 400
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.700s ] Loaded metadata, 10000000 attr's found
[ 0.700s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.704s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.705s ] Loaded 10000 sift10M queries
[ 0.774s ] Loaded ground truth, gt_size: 100
[ 0.774s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 6.501s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 146.894s ] Query results (vector ids, then distances):
query 0 nn's (66811, 67810): 8403027 (67450) 2260181 (67765) 952297 (66888) 9378841 (67272) 8710437 (67666) 7733897 (67571) 6592213 (67197) 4173863 (67608) 4910821 (67040) 2620182 (67682) 9107698 (67599) 3843925 (67076) 8845691 (66999) 3526473 (67146) 3813172 (67723) 9314443 (67545) 6937422 (67301) 7091250 (67596) 4929785 (67064) 1938934 (66865) 5492067 (67489) 2762041 (67060) 4701803 (67593) 8423848 (67281) 6263573 (67526) 8049250 (67422) 7148781 (67671) 409266 (67388) 3561475 (67031) 3265655 (66976) 4018856 (66829) 6768337 (67642) 476247 (67555) 1473467 (67795) 2036782 (67516) 7212680 (66931) 5147167 (67108) 3637471 (67727) 5284556 (66887) 9221841 (67314) 8210098 (66940) 682125 (67648) 5421355 (67569) 3311703 (66863) 8650332 (67794) 7945013 (67385) 4703390 (67124) 6429861 (66814) 7177862 (66881) 5944896 (67561) 7658530 (66926) 8491615 (67708) 4797604 (67241) 767289 (66900) 5074605 (67699) 3680318 (67353) 7409873 (67552) 9631577 (67273) 3186439 (67131) 8905026 (66859) 5333122 (67477) 8572299 (67776) 5816333 (67209) 4399701 (66952) 2956150 (67208) 1491438 (67316) 8473066 (66998) 6752283 (67516) 1915205 (67152) 3642471 (67213) 5211831 (67128) 4742405 (67043) 1926617 (67042) 2617611 (67362) 8785189 (67454) 5534763 (66946) 7843872 (67530) 4716171 (67295) 2817178 (66993) 4319167 (67357) 5994314 (67403) 8485853 (67803) 4982206 (67602) 3311034 (66834) 1567143 (67027) 6430488 (67186) 9576034 (67393) 3908902 (67467) 6240391 (67615) 8418304 (67748) 2629654 (67724) 6939401 (67409) 7317164 (67705) 7078008 (66904) 9769936 (67712) 9904615 (67616) 447519 (67586) 5308451 (67677) 1293679 (67256) 3813070 (66884) 
     dis: 	87416.000 90521.000 91348.000 91614.000 91758.000 93100.000 93236.000 93463.000 93775.000 96020.000 96724.000 98315.000 99498.000 99530.000 100645.000 101750.000 101980.000 102094.000 102661.000 103484.000 103672.000 103933.000 103955.000 105738.000 106104.000 106285.000 106835.000 106941.000 107334.000 107344.000 109300.000 109366.000 109560.000 109848.000 109952.000 110212.000 110371.000 110518.000 110722.000 110750.000 111332.000 111778.000 111983.000 112624.000 113163.000 113208.000 113295.000 113338.000 113426.000 113491.000 113591.000 113861.000 114001.000 114003.000 114081.000 114261.000 114454.000 114809.000 115089.000 115149.000 115158.000 115262.000 115434.000 115505.000 115646.000 115715.000 116138.000 116367.000 116681.000 116979.000 117077.000 117549.000 117659.000 118291.000 118333.000 118802.000 119387.000 119481.000 119706.000 119890.000 120404.000 120649.000 120695.000 121281.000 122012.000 122469.000 122546.000 122726.000 123051.000 123081.000 123365.000 123441.000 123459.000 123830.000 124139.000 124580.000 125643.000 125780.000 126363.000 126493.000 
query 1 nn's (80229, 81228): 5838578 (80325) 9900713 (80753) 8549337 (81124) 509915 (81217) 5424055 (81172) 8032969 (80529) 2765204 (81025) 5666656 (80815) 6168230 (80264) 6225217 (80943) 5941545 (80770) 8366738 (80505) 4099900 (80711) 5426587 (80360) 396317 (81225) 7853731 (80509) 3620796 (80258) 2674497 (80311) 7581274 (81100) 6768824 (80544) 6067204 (80454) 7830504 (80353) 7026865 (81171) 3591833 (80960) 9688174 (80685) 7582695 (80751) 8180678 (81075) 3861622 (80950) 6408 (80621) 7931185 (80636) 8150421 (80634) 4278462 (80257) 6451481 (81107) 2075235 (80860) 2246180 (80570) 9211101 (80695) 5871892 (80835) 3476862 (80771) 2499255 (80367) 9654343 (80841) 8470707 (81161) 2828683 (80755) 9442946 (80695) 4947700 (80294) 2509938 (80645) 189701 (80601) 6840018 (80429) 8596783 (80298) 6602250 (80967) 7331686 (81058) 3860320 (80802) 8442852 (81041) 6328935 (80742) 4479412 (81073) 163817 (80427) 1377258 (81017) 855717 (80316) 8321964 (81174) 3711642 (80514) 8160407 (80307) 3024802 (80696) 7133610 (80531) 1937820 (80433) 8864906 (80550) 8592796 (81117) 9708248 (81169) 7284954 (80464) 8665171 (80457) 6174301 (81178) 8251593 (81145) 1708492 (80634) 5123707 (80469) 8286268 (81121) 7568765 (80497) 4214367 (80689) 3228451 (80246) 8249383 (80610) 7512752 (80758) 7693476 (80604) 6117808 (80641) 7596408 (81121) 5014304 (80941) 7171650 (80744) 9665612 (80848) 4809089 (81005) 6887958 (80318) 6010605 (80845) 1493815 (80855) 1671240 (80581) 5381633 (81121) 8923376 (80714) 3205391 (81074) 3195498 (81034) 9513961 (80967) 265111 (81188) 4695817 (80920) 4708840 (80763) 6099104 (80876) 3003636 (80376) 7840586 (80337) 
     dis: 	71072.000 72674.000 75408.000 76465.000 80137.000 82276.000 83796.000 85142.000 86482.000 86554.000 87104.000 87114.000 88931.000 89134.000 89540.000 90043.000 90700.000 91914.000 92577.000 93446.000 93733.000 94292.000 94831.000 96421.000 97460.000 97596.000 97687.000 98184.000 98404.000 99108.000 100309.000 100955.000 101049.000 101052.000 101851.000 102321.000 103375.000 103452.000 103638.000 103682.000 104701.000 105109.000 105963.000 106098.000 106189.000 106439.000 106605.000 106925.000 106990.000 107514.000 108412.000 108512.000 108641.000 108695.000 108806.000 109120.000 109146.000 110324.000 110673.000 111189.000 111384.000 111721.000 112243.000 112463.000 112672.000 112902.000 113135.000 114172.000 114206.000 114698.000 116247.000 116550.000 117058.000 117818.000 118189.000 119940.000 120908.000 121184.000 121528.000 121749.000 123382.000 123741.000 124888.000 125414.000 125865.000 126282.000 127151.000 127686.000 129801.000 130267.000 130709.000 130767.000 130884.000 131317.000 131992.000 132260.000 133459.000 134308.000 134542.000 134715.000 
query 2 nn's (89717, 90716): 5727909 (90490) 515037 (90656) 5709226 (90258) 4112561 (89860) 86206 (89955) 7466107 (89787) 8860131 (89804) 1380491 (90138) 4347309 (90358) 5406339 (90424) 5043393 (90355) 3827437 (90317) 3582852 (90144) 1944507 (90001) 5017634 (90012) 5907913 (89721) 8196817 (89980) 7004103 (89868) 3843694 (90380) 7734691 (89795) 4502826 (90525) 9827814 (90252) 2581224 (90603) 6140224 (90545) 991901 (90604) 7611121 (90091) 7879176 (90271) 2323619 (90250) 4129975 (89746) 6150520 (90003) 5908251 (89799) 3636755 (89788) 9803398 (90512) 9028216 (90549) 7715900 (90394) 5782741 (90379) 4717677 (90663) 7728486 (90223) 6947930 (89791) 6046323 (90037) 4312200 (90591) 5567501 (90541) 3303937 (90116) 6951173 (90307) 2029499 (89844) 9571295 (90469) 4958619 (89999) 1965354 (89728) 9308696 (90383) 5995668 (90171) 602185 (89882) 78458 (89733) 1065921 (90122) 5958397 (90515) 9987830 (90043) 408310 (90594) 9786019 (90204) 4280083 (90255) 9860550 (89897) 1827599 (90653) 3411310 (89939) 6943812 (90269) 5230286 (89866) 6699510 (90457) 8508286 (89915) 5636380 (89943) 9634436 (90670) 3965399 (89840) 9445694 (90358) 5582484 (90282) 1646038 (90232) 8665154 (89914) 5047303 (89990) 848795 (90274) 6850200 (89939) 2444634 (89724) 5788105 (90076) 9618442 (90591) 6775926 (90567) 4087839 (89834) 5669101 (89885) 2486146 (90037) 9047294 (90224) 8913447 (89874) 2411802 (90570) 2644484 (90495) 8891587 (89748) 9049519 (90307) 6147616 (90107) 5613321 (90392) 7382536 (90134) 8794287 (89721) 3988450 (90296) 3746243 (89803) 8453937 (90454) 2665671 (90135) 9320796 (90028) 5184032 (90556) 717108 (90311) 4277460 (90188) 
     dis: 	60084.000 61187.000 61273.000 61277.000 62188.000 63202.000 65394.000 66237.000 66548.000 68801.000 68879.000 71749.000 74225.000 74255.000 74834.000 75195.000 75292.000 75351.000 75816.000 77248.000 77430.000 77700.000 78594.000 78664.000 78931.000 79130.000 79161.000 79921.000 80019.000 80381.000 81002.000 81314.000 81419.000 81449.000 82057.000 82498.000 82818.000 82948.000 82990.000 83004.000 83113.000 83118.000 84308.000 84480.000 84920.000 85261.000 85309.000 85507.000 85682.000 86047.000 86102.000 86123.000 86181.000 86721.000 88026.000 88045.000 88257.000 89199.000 89240.000 89735.000 90240.000 90664.000 90668.000 91270.000 92465.000 92628.000 93550.000 93730.000 93771.000 93942.000 93971.000 94116.000 94321.000 94446.000 94449.000 95046.000 95145.000 95152.000 95182.000 95610.000 96369.000 96903.000 97361.000 98458.000 99409.000 100660.000 101061.000 101294.000 101924.000 102215.000 102360.000 104291.000 105078.000 105110.000 107040.000 107305.000 107446.000 107762.000 109702.000 109948.000 
query 3 nn's (6838, 7837): 840086 (7034) 6281603 (7047) 1180726 (6952) 7890747 (7446) 9231939 (6869) 493857 (7268) 8089617 (7268) 8618960 (7556) 8701088 (6988) 4498186 (6839) 907443 (6923) 3917528 (7833) 9526471 (7592) 7302298 (6887) 232753 (7204) 9623826 (7197) 3094610 (7202) 5548322 (6881) 8362700 (7030) 5466233 (7407) 3258762 (6929) 7727529 (7430) 7287289 (7361) 606674 (7758) 1022275 (7634) 6081816 (7748) 1554089 (7563) 2000232 (7446) 452242 (7405) 2128995 (7073) 1222837 (7829) 9597935 (7209) 2389755 (7562) 4187347 (7507) 4681538 (6949) 1594161 (7181) 2743695 (6886) 157819 (7278) 2407955 (6930) 6389619 (7158) 6596528 (7006) 1721692 (7625) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9013.000 9157.000 11574.000 12341.000 13039.000 13482.000 13812.000 14688.000 15266.000 15771.000 15871.000 16066.000 16282.000 16701.000 18419.000 18466.000 18667.000 19324.000 19726.000 20227.000 22891.000 24922.000 25095.000 25174.000 25235.000 25636.000 26228.000 27438.000 28524.000 28934.000 29860.000 29882.000 29978.000 30919.000 32923.000 33087.000 33264.000 34769.000 35892.000 36797.000 43266.000 46330.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (76228, 77227): 1162782 (76796) 1982616 (76760) 4082080 (76531) 6614365 (76756) 6221821 (76784) 1618996 (76691) 8319961 (76609) 6531232 (76299) 2933282 (76829) 1776999 (76473) 3136966 (76552) 608851 (76588) 1903611 (76234) 1539863 (76530) 5352085 (76950) 6292460 (77207) 6365202 (76568) 4730227 (77095) 3376181 (76798) 1271454 (76737) 9294532 (76726) 1952210 (76924) 136176 (76349) 8562010 (77147) 104359 (77032) 4183967 (76467) 5578253 (76991) 7497064 (76252) 6688925 (77117) 4091152 (76530) 5821583 (76393) 7615725 (76929) 1610200 (76943) 3605992 (77175) 8916251 (76273) 5047340 (76256) 1772958 (76963) 473804 (76228) 7931620 (77115) 3062377 (76467) 6887605 (76999) 1359380 (76271) 136735 (76246) 9264739 (76973) 6432205 (76861) 8921634 (76923) 1237322 (76824) 345070 (76837) 1437854 (76356) 5647249 (77110) 6631838 (76669) 8069215 (76940) 6413005 (76612) 5385289 (76499) 1202792 (76609) 6430828 (76811) 6863269 (76828) 1451947 (76896) 1411070 (76353) 9333846 (76872) 8958961 (76514) 9317347 (77172) 149842 (76275) 3722898 (76606) 9864787 (76824) 7837262 (77044) 7096022 (76268) 2652478 (76506) 8186352 (76353) 3579927 (77143) 963886 (76952) 7552846 (76268) 5661830 (76776) 1663865 (76880) 3184003 (77129) 4741185 (76768) 1734363 (76269) 8728186 (77001) 2747631 (76568) 359868 (76412) 6717816 (76430) 8499121 (76653) 8897576 (76871) 2272716 (76874) 5895562 (77071) 1992637 (77076) 2496169 (76730) 7613853 (76960) 8459169 (77158) 6876487 (76440) 8125986 (76649) 1330385 (76337) 9740266 (76703) 9824341 (76530) 4074168 (76362) 1244719 (76509) 9062824 (76289) 9283157 (77220) 6180220 (76416) 2774988 (77073) 
     dis: 	97821.000 98098.000 99987.000 105801.000 105884.000 106853.000 107346.000 107637.000 108149.000 109802.000 110513.000 110772.000 110888.000 110914.000 112236.000 112364.000 112651.000 113198.000 113876.000 115147.000 115279.000 115298.000 115625.000 115798.000 116370.000 116571.000 117003.000 117597.000 117979.000 118479.000 119459.000 119985.000 120012.000 120358.000 121104.000 121793.000 122402.000 122604.000 122744.000 122765.000 123029.000 123431.000 124762.000 124785.000 125098.000 125647.000 126518.000 127122.000 127350.000 127366.000 128391.000 128439.000 128457.000 129417.000 129498.000 129863.000 130062.000 130497.000 130937.000 130996.000 131124.000 131326.000 131329.000 131689.000 131723.000 131785.000 132190.000 132410.000 132663.000 132667.000 133059.000 133509.000 133511.000 133578.000 133869.000 134124.000 134365.000 134503.000 134560.000 134931.000 135136.000 135607.000 135922.000 136000.000 136299.000 136493.000 136522.000 136690.000 136693.000 136774.000 136817.000 137015.000 137451.000 138372.000 139293.000 139314.000 139634.000 139943.000 140363.000 140438.000 
[ 146.895s ] *** Query time: 63.292
qps: 157.998
 *** HNSW recall 
HNSW get 572009 postive res from 1000000 results, recall@100:0.572
recall dist(10% per bucket): 0.000 0.000 0.005 0.028 0.127 0.413 0.381 0.046 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 214135581, average: 21413.558
finished ivfpq index examples
[ 146.950s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 400 128"
	User time (seconds): 131.59
	System time (seconds): 16.05
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:28.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8378272
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4106942
	Voluntary context switches: 1
	Involuntary context switches: 1531
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:13
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 400
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.726s ] Loaded metadata, 10000000 attr's found
[ 0.726s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.729s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.730s ] Loaded 10000 sift10M queries
[ 0.800s ] Loaded ground truth, gt_size: 100
[ 0.800s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.216s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 125.181s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1160663 (44937) 593325 (44939) 1609860 (44874) 1923487 (44877) 6005033 (44913) 9837787 (44900) 8395367 (44860) 4242378 (44889) 4010962 (44911) 3507133 (44908) 3252972 (44843) 6082120 (44907) 973062 (44888) 4500547 (44862) 6158851 (44891) 9015237 (44922) 159064 (44883) 2176746 (44891) 205633 (44892) 9442103 (44923) 545557 (44879) 3922979 (44920) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	74292.000 93971.000 98657.000 100638.000 107799.000 113619.000 115823.000 118326.000 119644.000 121807.000 122391.000 126026.000 127202.000 129320.000 129797.000 130076.000 131129.000 135362.000 139274.000 144324.000 150387.000 152011.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (42821, 42920): 7957648 (42897) 4754171 (42830) 1565098 (42885) 4062412 (42832) 5498897 (42903) 7191186 (42843) 4846142 (42878) 8909252 (42836) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	81752.000 85715.000 93990.000 95550.000 102246.000 133965.000 141874.000 142799.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (13165, 13264): 2858053 (13240) 5121329 (13223) 4306175 (13182) 3494307 (13167) 3380755 (13173) 1686475 (13254) 5928403 (13190) 6648054 (13203) 1646316 (13177) 2596648 (13218) 3081786 (13189) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63217.000 70372.000 70560.000 71173.000 75586.000 83570.000 86007.000 88435.000 96435.000 106823.000 113517.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (25839, 25938): 5530477 (25921) 7342247 (25846) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	23870.000 27610.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (45629, 45728): 2160380 (45685) 1253413 (45668) 1284141 (45665) 5720716 (45669) 966699 (45702) 5722740 (45687) 625529 (45723) 8575841 (45639) 619740 (45674) 2719743 (45724) 81179 (45685) 3779417 (45727) 819390 (45686) 5571420 (45666) 2912699 (45657) 6714133 (45696) 8971032 (45667) 4922302 (45648) 54831 (45652) 6747648 (45640) 9624061 (45677) 7682093 (45721) 8003865 (45641) 7992277 (45649) 4001518 (45702) 4038997 (45680) 5068603 (45727) 694166 (45697) 8373271 (45650) 9607382 (45696) 296169 (45694) 4489768 (45658) 7129973 (45678) 8376150 (45675) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	101857.000 102472.000 103314.000 113419.000 119391.000 120791.000 123741.000 125045.000 125725.000 128228.000 128703.000 132676.000 133900.000 134139.000 137649.000 138102.000 138376.000 143175.000 145272.000 146533.000 148294.000 149687.000 150315.000 153784.000 154121.000 155046.000 158984.000 159530.000 163438.000 168745.000 169873.000 178455.000 193150.000 196443.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 125.182s ] *** Query time: 48.212
qps: 207.419
 *** HNSW recall 
HNSW get 119740 postive res from 1000000 results, recall@100:0.120
recall dist(10% per bucket): 0.310 0.634 0.056 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 214135581, average: 21413.558
finished ivfpq index examples
[ 125.212s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 400 128"
	User time (seconds): 117.73
	System time (seconds): 8.00
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:05.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8378280
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2218718
	Voluntary context switches: 1
	Involuntary context switches: 192
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
