Start time: 23:09
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
K: 100
nprobe: 20
collection name: collection_sift10M_sel_1_100000_random
collection  collection_sift10M_sel_1_100000_random  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  823663  postive res from  1000000  results, recall@ 100 : 0.823663
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 0.000e+00 8.000e-04 4.300e-03 2.620e-02 9.120e-02
 2.043e-01 3.854e-01 2.877e-01 1.000e-04]
10000  queries cost: 148.17858791351318 , qps: 67.48613373098588
	Command being timed: "python -u utils/pymilvus_ivfpq.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json 100 20 collection_sift10M_sel_1_100000_random query 64 128"
	User time (seconds): 86.46
	System time (seconds): 2.97
	Percent of CPU this job got: 32%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:33.03
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 130440
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 101038
	Voluntary context switches: 37411
	Involuntary context switches: 655531
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:44
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
K: 100
nprobe: 20
collection name: collection_sift10M_sel_1_100000_random_128
collection  collection_sift10M_sel_1_100000_random_128  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  863746  postive res from  1000000  results, recall@ 100 : 0.863746
recall dist(10\% per bucket):  [0.     0.     0.     0.0008 0.0043 0.0249 0.0784 0.154  0.2284 0.4904
 0.0188]
10000  queries cost: 193.00006794929504 , qps: 51.81345326068589
	Command being timed: "python -u utils/pymilvus_ivfpq.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json 100 20 collection_sift10M_sel_1_100000_random_128 query 128 128"
	User time (seconds): 83.92
	System time (seconds): 2.38
	Percent of CPU this job got: 20%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:53.24
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 130504
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 96954
	Voluntary context switches: 38046
	Involuntary context switches: 556471
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:12
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
K: 100
nprobe: 20
collection name: collection_sift10M_sel_1_100000_random_128
collection  collection_sift10M_sel_1_100000_random_128  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  804274  postive res from  1000000  results, recall@ 100 : 0.804274
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 3.000e-04 4.500e-03 2.370e-02 7.890e-02 1.433e-01
 1.885e-01 1.997e-01 3.402e-01 2.090e-02]
10000  queries cost: 168.12017440795898 , qps: 59.48126115866431
	Command being timed: "python -u utils/pymilvus_ivfpq.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json 100 20 collection_sift10M_sel_1_100000_random_128 query 128 128"
	User time (seconds): 72.70
	System time (seconds): 1.82
	Percent of CPU this job got: 23%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:13.51
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 130380
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 97400
	Voluntary context switches: 35680
	Involuntary context switches: 524618
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:17
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
K: 100
nprobe: 20
collection name: collection_sift10M_sel_1_100000_random_128
collection  collection_sift10M_sel_1_100000_random_128  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 227, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 401, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 896, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 825, in _execute_search
    response = self._stub.Search(request, timeout=timeout)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_interceptor.py", line 277, in __call__
    response, ignored_call = self._with_call(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_interceptor.py", line 329, in _with_call
    call = self._interceptor.intercept_unary_unary(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/interceptor.py", line 35, in intercept_unary_unary
    response = continuation(new_details, next(new_request_iterator))
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_interceptor.py", line 343, in with_call
    return self._with_call(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_interceptor.py", line 329, in _with_call
    call = self._interceptor.intercept_unary_unary(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/interceptor.py", line 35, in intercept_unary_unary
    response = continuation(new_details, next(new_request_iterator))
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_channel.py", line 1195, in with_call
    ) = self._blocking(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/grpc/_channel.py", line 1162, in _blocking
    event = call.next_event()
  File "src/python/grpcio/grpc/_cython/_cygrpc/channel.pyx.pxi", line 388, in grpc._cython.cygrpc.SegregatedCall.next_event
  File "src/python/grpcio/grpc/_cython/_cygrpc/channel.pyx.pxi", line 213, in grpc._cython.cygrpc._next_call_event
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/threading.py", line 246, in __enter__
    def __enter__(self):
KeyboardInterrupt
Command terminated by signal 2
	Command being timed: "python -u utils/pymilvus_ivfpq.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json 100 20 collection_sift10M_sel_1_100000_random_128 query 128 128"
	User time (seconds): 35.33
	System time (seconds): 2.39
	Percent of CPU this job got: 25%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:25.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 129264
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 79111
	Voluntary context switches: 21534
	Involuntary context switches: 572435
	Swaps: 0
	File system inputs: 136
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:29
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json
K: 100
nprobe: 20
collection name: collection_sift10M_sel_1_100000_random_128
collection  collection_sift10M_sel_1_100000_random_128  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  646951  postive res from  1000000  results, recall@ 100 : 0.646951
recall dist(10\% per bucket):  [0.000e+00 2.000e-04 1.210e-02 6.680e-02 1.694e-01 2.037e-01 1.699e-01
 1.278e-01 9.820e-02 1.365e-01 1.540e-02]
10000  queries cost: 143.12785696983337 , qps: 69.86760098076275
	Command being timed: "python -u utils/pymilvus_ivfpq.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json 100 20 collection_sift10M_sel_1_100000_random_128 query 128 128"
	User time (seconds): 79.44
	System time (seconds): 1.98
	Percent of CPU this job got: 34%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:58.84
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 128388
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 99097
	Voluntary context switches: 30373
	Involuntary context switches: 610692
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:54
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json
K: 100
nprobe: 20
collection name: collection_sift10M_sel_1_100000_random_128
collection  collection_sift10M_sel_1_100000_random_128  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
error, get  55  results, expect  100
res: data: ["[{'id': 1160663, 'distance': 73661.4609375, 'entity': {}}, {'id': 1609860, 'distance': 98874.265625, 'entity': {}}, {'id': 3095531, 'distance': 111892.984375, 'entity': {}}, {'id': 2306496, 'distance': 113950.234375, 'entity': {}}, {'id': 8395367, 'distance': 115542.140625, 'entity': {}}, {'id': 6764458, 'distance': 120020.515625, 'entity': {}}, {'id': 3941607, 'distance': 122052.0625, 'entity': {}}, {'id': 4206912, 'distance': 122505.0390625, 'entity': {}}, {'id': 2598901, 'distance': 123893.8125, 'entity': {}}, {'id': 1540250, 'distance': 124548.1640625, 'entity': {}}, {'id': 916445, 'distance': 124945.3125, 'entity': {}}, {'id': 6158851, 'distance': 127524.015625, 'entity': {}}, {'id': 3857088, 'distance': 127607.28125, 'entity': {}}, {'id': 6459097, 'distance': 128689.8828125, 'entity': {}}, {'id': 9276548, 'distance': 130428.6953125, 'entity': {}}, {'id': 1370582, 'distance': 132261.65625, 'entity': {}}, {'id': 5189045, 'distance': 132812.75, 'entity': {}}, {'id': 6246801, 'distance': 136034.8125, 'entity': {}}, {'id': 967682, 'distance': 138675.96875, 'entity': {}}, {'id': 4315590, 'distance': 138707.046875, 'entity': {}}, {'id': 1665452, 'distance': 141686.75, 'entity': {}}, {'id': 7452542, 'distance': 141966.4375, 'entity': {}}, {'id': 1304271, 'distance': 141986.859375, 'entity': {}}, {'id': 8250800, 'distance': 142749.5625, 'entity': {}}, {'id': 4037290, 'distance': 143557.359375, 'entity': {}}, {'id': 5520339, 'distance': 144212.109375, 'entity': {}}, {'id': 5904156, 'distance': 144560.453125, 'entity': {}}, {'id': 9442103, 'distance': 144843.4375, 'entity': {}}, {'id': 88742, 'distance': 149456.453125, 'entity': {}}, {'id': 8340621, 'distance': 149710.6875, 'entity': {}}, {'id': 2542608, 'distance': 152150.375, 'entity': {}}, {'id': 2265357, 'distance': 156770.75, 'entity': {}}, {'id': 7934258, 'distance': 156938.5625, 'entity': {}}, {'id': 8765142, 'distance': 160251.3125, 'entity': {}}, {'id': 9002249, 'distance': 160729.59375, 'entity': {}}, {'id': 3367200, 'distance': 160958.84375, 'entity': {}}, {'id': 7307614, 'distance': 162858.421875, 'entity': {}}, {'id': 9351641, 'distance': 164837.40625, 'entity': {}}, {'id': 9731487, 'distance': 167522.453125, 'entity': {}}, {'id': 8366888, 'distance': 171621.515625, 'entity': {}}, {'id': 9936961, 'distance': 171975.90625, 'entity': {}}, {'id': 3480965, 'distance': 172616.140625, 'entity': {}}, {'id': 2494134, 'distance': 172819.75, 'entity': {}}, {'id': 714209, 'distance': 173246.484375, 'entity': {}}, {'id': 4865228, 'distance': 173875.90625, 'entity': {}}, {'id': 4707569, 'distance': 177769.265625, 'entity': {}}, {'id': 1011484, 'distance': 179262.484375, 'entity': {}}, {'id': 8279265, 'distance': 182508.46875, 'entity': {}}, {'id': 2150384, 'distance': 183830.3125, 'entity': {}}, {'id': 2913105, 'distance': 184838.765625, 'entity': {}}, {'id': 1500994, 'distance': 189938.390625, 'entity': {}}, {'id': 9413580, 'distance': 194672.953125, 'entity': {}}, {'id': 4139760, 'distance': 203189.8125, 'entity': {}}, {'id': 1091752, 'distance': 203659.234375, 'entity': {}}, {'id': 8004183, 'distance': 204306.0, 'entity': {}}]"]
exp: 44843 <= label <= 44942
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq.py", line 246, in <module>
    if(ids[i][top] == gt[i][gtind]):
IndexError: list index out of range
Command exited with non-zero status 1
	Command being timed: "python -u utils/pymilvus_ivfpq.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json 100 20 collection_sift10M_sel_1_100000_random_128 query 128 128"
	User time (seconds): 2.06
	System time (seconds): 0.92
	Percent of CPU this job got: 241%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:01.23
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 130532
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 7
	Minor (reclaiming a frame) page faults: 40257
	Voluntary context switches: 547
	Involuntary context switches: 540110
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 1
