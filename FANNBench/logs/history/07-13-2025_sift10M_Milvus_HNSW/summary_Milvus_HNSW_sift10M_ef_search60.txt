Start time: 04:27
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json
K: 100
M: 40
ef_construction: 1000
ef_search: 60
distribution: sel_2_100000_random
collection name: collection_hnsw_sift10M_sel_2_100000_random_efc1000
mode: query
d: 128
collection  collection_hnsw_sift10M_sel_2_100000_random_efc1000  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
2025-07-13 19:27:11,324 [ERROR][handler]: RPC error: [search], <MilvusException: (code=1100, message=failed to create query plan: cannot parse expression: label_attr = 6 and 15386 <= range_attr <= 98713, error: line 1:11 token recognition error at: '= ': invalid parameter)>, <Time:{'RPC start': '2025-07-13 19:27:11.246234', 'RPC error': '2025-07-13 19:27:11.323926'}> (decorators.py:140)
2025-07-13 19:27:11,324 [ERROR][search]: Failed to search collection: collection_hnsw_sift10M_sel_2_100000_random_efc1000 (milvus_client.py:415)
Traceback (most recent call last):
  File "utils/pymilvus_hnsw_arbi.py", line 246, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 416, in search
    raise ex from ex
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 401, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 141, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 116, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 896, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 837, in _execute_search
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 826, in _execute_search
    check_status(response.status)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/utils.py", line 64, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=1100, message=failed to create query plan: cannot parse expression: label_attr = 6 and 15386 <= range_attr <= 98713, error: line 1:11 token recognition error at: '= ': invalid parameter)>
Command exited with non-zero status 1
	Command being timed: "python -u utils/pymilvus_hnsw_arbi.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json 100 40 1000 60 sel_2_100000_random collection_hnsw_sift10M_sel_2_100000_random_efc1000 query 128"
	User time (seconds): 2.85
	System time (seconds): 1.67
	Percent of CPU this job got: 63%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:07.16
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 129636
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 40356
	Voluntary context switches: 997
	Involuntary context switches: 572332
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 1
Start time: 04:28
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json
K: 100
M: 40
ef_construction: 1000
ef_search: 60
distribution: sel_2_100000_random
collection name: collection_hnsw_sift10M_sel_2_100000_random_efc1000
mode: query
d: 128
collection  collection_hnsw_sift10M_sel_2_100000_random_efc1000  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
2025-07-13 19:28:52,604 [ERROR][handler]: RPC error: [search], <MilvusException: (code=65535, message=fail to search on QueryNode 8: worker(8) query failed: invalid format string)>, <Time:{'RPC start': '2025-07-13 19:28:51.900840', 'RPC error': '2025-07-13 19:28:52.604152'}> (decorators.py:140)
2025-07-13 19:28:52,604 [ERROR][search]: Failed to search collection: collection_hnsw_sift10M_sel_2_100000_random_efc1000 (milvus_client.py:415)
Traceback (most recent call last):
  File "utils/pymilvus_hnsw_arbi.py", line 246, in <module>
    res = client.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 416, in search
    raise ex from ex
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/milvus_client/milvus_client.py", line 401, in search
    res = conn.search(
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 141, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 116, in handler
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 896, in search
    return self._execute_search(request, timeout, round_decimal=round_decimal, **kwargs)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 837, in _execute_search
    raise e from e
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/grpc_handler.py", line 826, in _execute_search
    check_status(response.status)
  File "/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/pymilvus/client/utils.py", line 64, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=65535, message=fail to search on QueryNode 8: worker(8) query failed: invalid format string)>
Command exited with non-zero status 1
	Command being timed: "python -u utils/pymilvus_hnsw_arbi.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json 100 40 1000 60 sel_2_100000_random collection_hnsw_sift10M_sel_2_100000_random_efc1000 query 128"
	User time (seconds): 2.67
	System time (seconds): 1.95
	Percent of CPU this job got: 321%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:01.43
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 133008
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 40322
	Voluntary context switches: 564
	Involuntary context switches: 765359
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 1
Start time: 05:24
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
K: 10
M: 40
ef_construction: 1000
ef_search: 60
distribution: sel_2_100000_random
collection name: collection_hnsw_sift10M_sel_2_100000_random_efc1000
mode: query
d: 128
collection  collection_hnsw_sift10M_sel_2_100000_random_efc1000  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  99793  postive res from  100000  results, recall@ 10 : 0.99793
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
 0.000e+00 9.000e-04 1.890e-02 9.802e-01]
10000  queries cost: 104.45994901657104 , qps: 95.73046985130776
	Command being timed: "python -u utils/pymilvus_hnsw_arbi.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json 10 40 1000 60 sel_2_100000_random collection_hnsw_sift10M_sel_2_100000_random_efc1000 query 128"
	User time (seconds): 20.03
	System time (seconds): 6.28
	Percent of CPU this job got: 24%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:46.63
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 95032
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 67046
	Voluntary context switches: 23340
	Involuntary context switches: 461454
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:08
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json
K: 10
M: 40
ef_construction: 1000
ef_search: 60
distribution: sel_2_100000_random
collection name: collection_hnsw_sift10M_sel_2_100000_random_efc1000
mode: query
d: 128
collection  collection_hnsw_sift10M_sel_2_100000_random_efc1000  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  99979  postive res from  100000  results, recall@ 10 : 0.99979
recall dist(10\% per bucket):  [0.     0.     0.     0.     0.     0.     0.     0.     0.     0.0021
 0.9979]
10000  queries cost: 131.7691707611084 , qps: 75.89028558227442
	Command being timed: "python -u utils/pymilvus_hnsw_arbi.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json 10 40 1000 60 sel_2_100000_random collection_hnsw_sift10M_sel_2_100000_random_efc1000 query 128"
	User time (seconds): 22.89
	System time (seconds): 5.11
	Percent of CPU this job got: 20%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:14.05
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 96132
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 58404
	Voluntary context switches: 23844
	Involuntary context switches: 546482
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:31
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_10.json
K: 10
M: 40
ef_construction: 1000
ef_search: 60
distribution: sel_2_100000_random
collection name: collection_hnsw_sift10M_sel_2_100000_random_efc1000
mode: query
d: 128
collection  collection_hnsw_sift10M_sel_2_100000_random_efc1000  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  100000  postive res from  100000  results, recall@ 10 : 1.0
recall dist(10\% per bucket):  [0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 1.]
10000  queries cost: 156.06124091148376 , qps: 64.0774092375178
	Command being timed: "python -u utils/pymilvus_hnsw_arbi.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_10.json 10 40 1000 60 sel_2_100000_random collection_hnsw_sift10M_sel_2_100000_random_efc1000 query 128"
	User time (seconds): 19.09
	System time (seconds): 3.22
	Percent of CPU this job got: 14%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:38.44
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 90916
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 59963
	Voluntary context switches: 24160
	Involuntary context switches: 755622
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:16
dataset: sift10M
N: 10000000
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json
ground truth file: /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_10.json
K: 10
M: 40
ef_construction: 1000
ef_search: 60
distribution: sel_2_100000_random
collection name: collection_hnsw_sift10M_sel_2_100000_random_efc1000
mode: query
d: 128
collection  collection_hnsw_sift10M_sel_2_100000_random_efc1000  exists
collection size: data: ["{'count(*)': 10000000}"]
query d: 128
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 10
ids shape: 10000 10
gt shape: (10000, 10)
milvus get  100000  postive res from  100000  results, recall@ 10 : 1.0
recall dist(10\% per bucket):  [0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 1.]
10000  queries cost: 255.8292088508606 , qps: 39.08857805923814
	Command being timed: "python -u utils/pymilvus_hnsw_arbi.py sift10M 10000000 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json /mnt/data/mocheng/dataset/sift10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_10.json 10 40 1000 60 sel_2_100000_random collection_hnsw_sift10M_sel_2_100000_random_efc1000 query 128"
	User time (seconds): 19.40
	System time (seconds): 3.85
	Percent of CPU this job got: 8%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:18.58
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 91948
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 57328
	Voluntary context switches: 27493
	Involuntary context switches: 746128
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
