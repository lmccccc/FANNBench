Start time: 01:32
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 150 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.189s ] Loaded metadata, 10000000 attr's found
[ 1.189s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.192s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
[ 1.195s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json
[ 1.318s ] Loaded ground truth, gt_size: 100
[ 1.318s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999555 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255865
Average degree per layer:1709310.833
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 23.319s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 150
selectivity: 0.500
[ 592.329s ] Query results (vector ids, then distances):
query 0 nn's (16495): 1167995 (22866) 6141318 (31677) 4738758 (63657) 7293718 (39822) 7632021 (61505) 1020562 (25533) 6984373 (66297) 9397776 (41815) 238649 (52700) 9536881 (62309) 7866119 (35104) 2375126 (35044) 77153 (55251) 7164607 (51560) 6951413 (64572) 1077702 (54735) 5770330 (20661) 8435256 (22283) 9251169 (17058) 5343331 (64452) 4874283 (26334) 4689336 (50131) 9860956 (45915) 419470 (53438) 3255720 (45053) 7873580 (61095) 2481703 (26660) 9409479 (53603) 3663987 (28773) 331007 (42101) 9534078 (23152) 8428377 (21292) 6019325 (39083) 392808 (49021) 4897568 (21711) 1929740 (63695) 3879851 (51251) 5305337 (33050) 9607176 (18423) 6871531 (32699) 1203246 (35809) 4770231 (18286) 5324763 (21207) 9237550 (19315) 7459877 (65985) 7011791 (23273) 2365415 (44282) 5001655 (54619) 5686859 (17291) 447965 (21988) 839586 (47809) 46468 (34801) 9906463 (54872) 4671898 (19963) 4047656 (37028) 5228659 (32650) 3049131 (56789) 1059921 (24441) 1891236 (55041) 7220675 (64056) 7200266 (62910) 3384323 (18456) 7895839 (33099) 4532213 (19173) 7989030 (16945) 7263957 (52681) 8052577 (63399) 476293 (42096) 5356206 (17599) 4218358 (21713) 3094752 (38222) 8838842 (42249) 4271011 (16541) 902148 (61383) 6425728 (45806) 8446671 (55365) 9119171 (57162) 6392245 (58867) 8898051 (65788) 3409110 (29194) 5600358 (36832) 9584266 (30762) 5972935 (59004) 2894606 (22434) 7096167 (45019) 7625156 (66413) 434737 (55269) 9107723 (35394) 3938476 (17749) 6436545 (27643) 1432946 (31393) 705774 (37942) 3366295 (53986) 7063460 (21503) 4547101 (52945) 106542 (62325) 8944989 (22466) 2913895 (40741) 7460109 (20638) 3474811 (56942) 
     dis: 	72023.000 73183.000 74463.000 75573.000 75587.000 76767.000 76880.000 77424.000 77858.000 78206.000 79448.000 79929.000 79964.000 80358.000 80726.000 80790.000 81243.000 81799.000 81847.000 81853.000 82000.000 82232.000 82276.000 82431.000 82432.000 82438.000 82457.000 82688.000 82852.000 83126.000 83197.000 83232.000 83269.000 83552.000 83581.000 83583.000 83717.000 83735.000 83936.000 84002.000 84353.000 84388.000 84463.000 84526.000 84945.000 85235.000 85293.000 85310.000 85405.000 85625.000 85800.000 85831.000 85842.000 85847.000 85876.000 85928.000 86023.000 86093.000 86203.000 86211.000 86329.000 86376.000 86379.000 86402.000 86458.000 86743.000 86793.000 86891.000 86902.000 86906.000 86958.000 87152.000 87297.000 87357.000 87485.000 87510.000 87559.000 87576.000 87602.000 87631.000 87654.000 87824.000 87846.000 87973.000 88121.000 88181.000 88187.000 88236.000 88404.000 88420.000 88466.000 88599.000 88619.000 88629.000 88634.000 88679.000 88800.000 88869.000 88977.000 89105.000 
query 1 nn's (66494): 285986 (29147) 1273419 (33970) 7501440 (19981) 411491 (28374) 3221056 (31139) 8349375 (52325) 469965 (40746) 9958454 (20815) 9791343 (31369) 3309105 (58581) 1120308 (58129) 8596968 (57015) 7917424 (30836) 9009284 (43025) 371485 (21478) 7120642 (56260) 6378991 (24604) 7331745 (31011) 2993914 (24499) 8879018 (38985) 9015118 (35539) 4922660 (25703) 7692715 (33795) 5008572 (16803) 5531491 (42049) 375999 (11846) 4870548 (14957) 5509879 (56316) 9933148 (29627) 6073626 (52753) 296178 (9794) 1843885 (58567) 7693023 (48225) 9537422 (38205) 8646169 (48602) 3631651 (46071) 9781041 (46813) 3786289 (47328) 5516040 (39608) 1341845 (13158) 1784776 (14038) 9167559 (28640) 1350904 (17079) 8590082 (35871) 2473259 (21347) 6174201 (27446) 7342014 (43207) 8588450 (26655) 9245954 (25046) 8918460 (22635) 8152291 (58419) 4689763 (13954) 9211699 (48066) 1000577 (42240) 741761 (13735) 1461697 (9342) 8440112 (16815) 1259657 (41217) 8984166 (19820) 6533284 (58872) 4649124 (10463) 6986308 (42127) 9913606 (25633) 2807070 (21497) 7315015 (40488) 5386381 (56639) 2652241 (18132) 7672903 (50549) 9349060 (12055) 8675363 (15599) 2234566 (43091) 2353489 (36758) 6630533 (47319) 8828687 (57507) 5226515 (31871) 691253 (12031) 4009753 (42973) 6971668 (13402) 482087 (52392) 3231603 (11404) 7968009 (34408) 2093850 (58698) 8518091 (32017) 1932354 (54429) 1345854 (17575) 5790422 (10136) 5254261 (23886) 3740235 (47884) 3891904 (36054) 7513620 (14628) 8155958 (44047) 9388703 (42582) 735668 (54882) 5307850 (28502) 5869072 (17436) 6383821 (40068) 6281612 (57414) 8743749 (50038) 7856853 (44589) 7807906 (37732) 
     dis: 	43778.000 46522.000 46910.000 46959.000 49695.000 49997.000 50753.000 51055.000 51493.000 51760.000 52532.000 52768.000 52837.000 52935.000 54431.000 54684.000 54869.000 54968.000 55326.000 56123.000 56457.000 56486.000 56490.000 56506.000 56591.000 56619.000 56915.000 56959.000 57000.000 57111.000 57313.000 57411.000 57450.000 57685.000 57703.000 57719.000 57738.000 57771.000 57779.000 57814.000 57917.000 57926.000 57960.000 58064.000 58119.000 58390.000 58531.000 58633.000 58737.000 58837.000 58925.000 59030.000 59230.000 59284.000 59621.000 60324.000 60340.000 60594.000 60632.000 60780.000 60858.000 60913.000 60931.000 61019.000 61093.000 61198.000 61403.000 62051.000 62069.000 62084.000 62094.000 62214.000 62563.000 62681.000 62693.000 62694.000 62791.000 62855.000 63173.000 63219.000 63272.000 63407.000 63533.000 63792.000 63804.000 63807.000 63867.000 63956.000 64165.000 64180.000 64475.000 64556.000 64597.000 64772.000 64890.000 64958.000 65021.000 65073.000 65075.000 65184.000 
query 2 nn's (9202): 4588082 (5850) 1931585 (19001) 289025 (23641) 199400 (49790) 5982237 (43009) 9262583 (10127) 3493381 (41222) 6296252 (42595) 9466222 (12113) 9416415 (22498) 2511585 (51247) 4279056 (31979) 9609459 (52017) 9410320 (17475) 5988705 (35014) 4154052 (32764) 2448858 (26319) 40266 (43315) 7654217 (36735) 8068558 (3605) 3942637 (41711) 893390 (20914) 8432027 (41968) 2098752 (8636) 2601636 (4981) 4331583 (20733) 1198061 (39524) 8086660 (10594) 1229611 (42372) 2346097 (47666) 9541874 (40780) 5499961 (41359) 1784913 (17205) 4347605 (5987) 4519717 (16603) 3724739 (11973) 2413882 (42838) 4450077 (4833) 4021389 (14109) 5035777 (42804) 8001622 (38121) 8590994 (28647) 9790465 (51400) 3795529 (39233) 6363894 (12238) 9330360 (23016) 5039283 (52769) 3967402 (4299) 3061201 (36811) 2953864 (3859) 141025 (31028) 5631784 (19399) 4495608 (32772) 1160482 (18573) 4957555 (20414) 8635193 (4483) 1463083 (23709) 4259715 (27472) 1878319 (14518) 2412946 (20189) 6856614 (13752) 1956474 (39813) 4713533 (11323) 445822 (18954) 3948507 (46592) 2038327 (32825) 247874 (27384) 764856 (15554) 8965515 (47906) 8064334 (52538) 2180225 (33712) 2721859 (45661) 2027436 (10601) 2800256 (3943) 8329652 (11029) 9724885 (20426) 2247452 (7760) 1700496 (39753) 8690196 (29802) 8703413 (48767) 1758192 (46894) 5488746 (22698) 27015 (15961) 2571149 (4419) 5834114 (42413) 7409471 (23955) 4111853 (11705) 8511243 (52818) 9650562 (41043) 9975313 (47116) 4735422 (29589) 596128 (12783) 483758 (16444) 6511526 (45450) 3457019 (10629) 2833092 (35079) 3923684 (43211) 9919092 (44536) 9235536 (48064) 6202123 (50777) 
     dis: 	47637.000 48317.000 48416.000 49395.000 50144.000 50601.000 51043.000 51071.000 51654.000 51724.000 52611.000 52719.000 52894.000 52939.000 53001.000 53029.000 53034.000 53080.000 53106.000 53350.000 53664.000 53672.000 53772.000 53912.000 53913.000 54277.000 54288.000 54318.000 54404.000 54464.000 54558.000 54632.000 54759.000 54968.000 55350.000 55376.000 55630.000 55719.000 55907.000 55983.000 55995.000 56108.000 56197.000 56262.000 56312.000 56319.000 56504.000 56939.000 56977.000 57221.000 57318.000 57398.000 57423.000 57554.000 57694.000 57831.000 57848.000 57942.000 58055.000 58237.000 58297.000 58484.000 58526.000 58536.000 58549.000 58701.000 58734.000 58933.000 58955.000 59109.000 59124.000 59206.000 59233.000 59276.000 59281.000 59587.000 59600.000 59681.000 59783.000 59874.000 59887.000 60058.000 60080.000 60086.000 60114.000 60126.000 60183.000 60259.000 60272.000 60295.000 60303.000 60339.000 60413.000 60574.000 60604.000 60618.000 60631.000 60657.000 60677.000 60696.000 
query 3 nn's (59201): 980813 (57404) 1527942 (96648) 4147780 (96552) 6151275 (54227) 8410503 (57593) 2965607 (50671) 8174765 (80882) 7301932 (58021) 3643741 (49824) 1218934 (95625) 5124856 (83202) 9132978 (88985) 3421136 (79354) 6917633 (65929) 1417424 (52791) 3143192 (84650) 6411621 (75479) 2892348 (96310) 3041965 (53918) 727241 (54631) 5224964 (92235) 8649378 (64804) 1911911 (93967) 2218358 (96205) 1344917 (94289) 1553832 (56561) 1739894 (59501) 8501071 (59579) 4246457 (73056) 4486659 (62681) 1514080 (69970) 9577990 (76369) 7301436 (87758) 1590183 (88142) 8381210 (50663) 3633444 (58089) 9925791 (97055) 8051314 (74322) 5381241 (67484) 192312 (56033) 879082 (58444) 9313337 (65861) 179529 (69049) 9354839 (82742) 9978957 (58477) 2112048 (90994) 7404448 (97484) 9625994 (68515) 9603354 (76938) 5792548 (50167) 9335193 (61835) 1028926 (67570) 4983026 (77570) 5777538 (67724) 7119531 (90378) 3421950 (66323) 7463079 (77126) 7614050 (89191) 3009997 (97202) 686764 (84900) 2236726 (90758) 422848 (66608) 7865854 (55686) 6045699 (86837) 1061321 (74643) 936598 (90457) 8688385 (51100) 7950822 (60752) 5106668 (83807) 578322 (76455) 2843331 (94548) 6697954 (97706) 8012973 (49730) 7583501 (51620) 8643637 (91536) 3252978 (77827) 3112499 (60951) 3704240 (51893) 7747974 (55824) 7216322 (83941) 597580 (97456) 4995291 (67298) 5181700 (61434) 3379947 (69911) 7556732 (84479) 449169 (84914) 9947826 (87273) 3540851 (56783) 1229577 (98674) 7829631 (88278) 3195943 (64046) 3080406 (50210) 9332155 (77339) 6676311 (50438) 6306155 (92517) 7745448 (77965) 2842840 (85067) 240857 (83846) 9102009 (51785) 4540202 (85638) 
     dis: 	4296.000 4309.000 4550.000 4602.000 4817.000 5013.000 5180.000 5240.000 5279.000 5468.000 5492.000 5559.000 5596.000 5626.000 5643.000 5653.000 5998.000 6047.000 6095.000 6237.000 6378.000 6468.000 6655.000 6693.000 6747.000 6792.000 6845.000 6973.000 6981.000 7021.000 7171.000 7282.000 7394.000 7460.000 7506.000 7509.000 7580.000 7644.000 7666.000 7673.000 7688.000 7693.000 7708.000 7725.000 7788.000 7792.000 7801.000 7825.000 7841.000 8040.000 8123.000 8228.000 8247.000 8322.000 8362.000 8402.000 8404.000 8407.000 8437.000 8491.000 8496.000 8500.000 8579.000 8590.000 8608.000 8643.000 8797.000 8815.000 8875.000 8885.000 8898.000 8912.000 8919.000 8939.000 8954.000 8993.000 9075.000 9212.000 9230.000 9254.000 9370.000 9382.000 9404.000 9470.000 9526.000 9576.000 9621.000 9679.000 9736.000 9746.000 9774.000 9786.000 9813.000 9835.000 9888.000 9980.000 9997.000 10000.000 10018.000 10060.000 
query 4 nn's (3185): 3477074 (81770) 6578584 (38818) 3389697 (48484) 1141817 (80050) 2524726 (73742) 546979 (84338) 9569496 (46755) 3692806 (78743) 7358946 (78288) 7423926 (65584) 3832333 (60859) 7603300 (57407) 5708200 (65636) 8630333 (78134) 3637016 (75733) 1743659 (74315) 6357047 (37869) 4501065 (71247) 8713517 (85738) 3650068 (52380) 9170163 (44830) 9836279 (55277) 3823745 (70484) 2989150 (73723) 4775817 (52301) 1082443 (61970) 4719865 (48976) 9067729 (68162) 3405146 (73681) 9383376 (65777) 3016662 (80615) 5707536 (47200) 1782927 (73442) 6720082 (47192) 64045 (81996) 3647183 (65407) 303093 (72258) 4750135 (57127) 6699578 (59103) 3839204 (40859) 1020874 (60599) 8493266 (66603) 2045614 (57740) 4422483 (78850) 6258948 (83408) 1466559 (35927) 5399121 (81519) 8515169 (70508) 9632952 (47320) 1281985 (76129) 5729760 (66147) 5001194 (51110) 3099917 (49532) 272409 (47998) 9821817 (36297) 4374812 (62476) 4551510 (38108) 992395 (66919) 8972367 (43409) 6658100 (78266) 5012556 (55013) 2454280 (80510) 2721988 (37884) 330819 (62462) 3978865 (68342) 1784595 (44244) 3814747 (40292) 9182395 (79583) 6217116 (43388) 1162782 (76796) 5433383 (70512) 3803911 (59233) 797235 (41978) 3475746 (46970) 7069107 (55837) 3308297 (62108) 6784852 (64491) 3671814 (57552) 5529985 (84687) 7223142 (71124) 3612037 (45314) 2996033 (48373) 6562890 (45139) 75942 (45317) 4732552 (53905) 9036622 (64063) 1257130 (69650) 6511001 (69553) 6321468 (83457) 2945464 (44763) 4436465 (68543) 90367 (61426) 7508102 (80497) 5412258 (79615) 5147412 (53430) 1162961 (65014) 4082080 (76531) 8295863 (45261) 4800113 (85440) 2085966 (47802) 
     dis: 	80355.000 82172.000 84350.000 85933.000 86290.000 86866.000 86883.000 86927.000 87070.000 87152.000 87409.000 87829.000 88206.000 88437.000 88515.000 89054.000 90314.000 90882.000 91007.000 91009.000 91164.000 91244.000 91268.000 91566.000 91583.000 91730.000 91846.000 92148.000 92174.000 92692.000 92881.000 93074.000 93193.000 93429.000 93643.000 93789.000 93920.000 93976.000 94180.000 94216.000 94288.000 94291.000 94445.000 94638.000 94672.000 94725.000 94807.000 94897.000 95103.000 95434.000 95543.000 95630.000 95977.000 96104.000 96157.000 96273.000 96528.000 96611.000 96804.000 96976.000 97064.000 97065.000 97226.000 97440.000 97454.000 97615.000 97638.000 97667.000 97672.000 97821.000 97848.000 98148.000 98154.000 98179.000 98237.000 98394.000 98408.000 98423.000 98439.000 98488.000 98528.000 98651.000 98695.000 98702.000 98858.000 98947.000 99016.000 99056.000 99068.000 99218.000 99231.000 99271.000 99585.000 99799.000 99873.000 99958.000 99987.000 100041.000 100097.000 100170.000 
[ 592.330s ] *** Query time: 56.541
qps: 176.864
 *** acorn recall 
efs:150
acorn get 923490 postive res from 1000000 results, recall@100:0.923
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.004 0.016 0.063 0.194 0.556 0.166 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[592.362s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 67644792
ndis: 0
nreorder: 0
average distance computations per query: 6764.479
[ 592.362s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 150 128"
	User time (seconds): 559.47
	System time (seconds): 23.71
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 9:54.50
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17013896
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 16
	Minor (reclaiming a frame) page faults: 6702269
	Voluntary context switches: 28527
	Involuntary context switches: 1515
	Swaps: 0
	File system inputs: 4346184
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:56
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 150 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.199s ] Loaded metadata, 10000000 attr's found
[ 1.199s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.202s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
[ 1.204s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json
[ 1.328s ] Loaded ground truth, gt_size: 100
[ 1.328s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999555 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255865
Average degree per layer:1709310.833
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 13.073s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 150
selectivity: 0.100
[ 501.292s ] Query results (vector ids, then distances):
query 0 nn's (30338): 6141318 (31677) 7293718 (39822) 7860530 (36909) 7866119 (35104) 2375126 (35044) 8851580 (35051) 6019325 (39083) 5305337 (33050) 6002319 (38494) 6871531 (32699) 1203246 (35809) 46468 (34801) 4047656 (37028) 5228659 (32650) 7895839 (33099) 3094752 (38222) 5600358 (36832) 9584266 (30762) 9107723 (35394) 6865307 (40092) 5315711 (38979) 1432946 (31393) 705774 (37942) 5008601 (36205) 8135232 (36517) 5577977 (34177) 8615059 (36713) 2478200 (32527) 6899305 (38669) 8360507 (37312) 1313109 (34667) 1136638 (31056) 9085685 (31413) 3947830 (38978) 9422333 (33977) 746007 (34895) 8892654 (36847) 4988257 (36327) 6440255 (32710) 1136340 (34358) 8612315 (32697) 9548834 (39161) 2640746 (31954) 8841384 (38576) 4254855 (35011) 9099555 (39603) 8989130 (35440) 3496238 (34854) 3532484 (31798) 6134807 (34370) 4862834 (38903) 102938 (32717) 3206773 (35296) 9868360 (38444) 4985966 (32045) 7907051 (32852) 3645920 (34139) 8435167 (38735) 7100864 (37198) 705927 (35856) 5073149 (38840) 3440180 (37064) 8635455 (35154) 2947576 (33862) 1326722 (30890) 2082844 (36255) 4408250 (32306) 9722001 (36218) 1066507 (33527) 4183417 (38130) 4417381 (38052) 33203 (34980) 147219 (34878) 1907588 (35276) 2562887 (34187) 7490838 (39808) 3452727 (37631) 8671427 (33099) 6609059 (39227) 9577450 (34723) 1939129 (36144) 9645387 (39738) 839322 (37140) 3975533 (33764) 4874891 (39564) 7330607 (37534) 9541266 (36406) 5730004 (30594) 6943042 (33685) 7058191 (38413) 3731251 (38744) 1538515 (35143) 3728785 (35287) 4890114 (31083) 6274817 (37842) 4477722 (38076) 6420776 (38416) 9397605 (39656) 3708659 (39348) 5027969 (30348) 
     dis: 	73183.000 75573.000 78859.000 79448.000 79929.000 80060.000 83269.000 83735.000 83988.000 84002.000 84353.000 85831.000 85876.000 85928.000 86379.000 86958.000 87654.000 87824.000 88236.000 88343.000 88379.000 88466.000 88599.000 88866.000 88922.000 89184.000 89325.000 89521.000 89696.000 89755.000 89869.000 90165.000 90439.000 90800.000 90926.000 92033.000 92310.000 92323.000 92348.000 92703.000 92750.000 93101.000 93245.000 93280.000 93472.000 93802.000 94059.000 94063.000 94066.000 94086.000 94103.000 94282.000 94393.000 94445.000 94497.000 94922.000 95222.000 95348.000 95429.000 95522.000 95557.000 95566.000 95604.000 95635.000 95715.000 95956.000 96010.000 96042.000 96234.000 96450.000 96459.000 96595.000 96616.000 96779.000 97022.000 97050.000 97173.000 97175.000 97242.000 97285.000 97302.000 97428.000 97533.000 97552.000 97582.000 97738.000 97862.000 97954.000 97964.000 97967.000 97990.000 98014.000 98037.000 98037.000 98043.000 98059.000 98192.000 98377.000 98398.000 98449.000 
query 1 nn's (40337): 5552416 (78513) 1909131 (86406) 5271910 (85162) 1745130 (81239) 1503119 (86342) 4456023 (81807) 7409966 (77482) 8223991 (85939) 3200275 (77568) 1015812 (81428) 1410399 (79450) 8857836 (86643) 3733744 (80018) 2077396 (86724) 9460541 (85631) 8811964 (78982) 109736 (83008) 8899541 (77302) 8880895 (85935) 5796685 (85349) 3419918 (85008) 9329945 (82932) 6363708 (86935) 7066298 (82075) 4082654 (81611) 5838578 (80325) 3738992 (82987) 7582671 (84196) 9900713 (80753) 2901807 (85802) 5113286 (82655) 8757781 (78436) 4365144 (85163) 2773940 (83061) 6861763 (79255) 1358210 (82366) 4321977 (86855) 9967397 (78546) 5682634 (83480) 4317853 (78238) 5847833 (86661) 4500577 (79020) 1116609 (86888) 8549337 (81124) 6605974 (84206) 3595041 (81789) 801963 (83162) 2442767 (79429) 2280013 (82912) 9594077 (86656) 509915 (81217) 3059195 (82186) 4565789 (86269) 8588534 (77075) 6639650 (81288) 5481254 (81714) 1886034 (78747) 1329486 (82222) 4546662 (85828) 9220661 (83515) 5988769 (77978) 8717769 (79874) 4558935 (86467) 4007564 (84162) 4058523 (78300) 4811463 (85249) 5424055 (81172) 3435845 (77715) 9015685 (78130) 7374448 (83457) 3209840 (77363) 4430490 (86075) 5117797 (86623) 1208441 (84977) 5425346 (81306) 8189889 (86632) 5466960 (78112) 9294765 (80557) 5234937 (86897) 296036 (85169) 8838862 (78806) 2380220 (83780) 9429619 (85840) 7452672 (82219) 8032969 (80529) 767180 (81326) 5248280 (85367) 3975668 (85506) 2244611 (77270) 2765204 (81025) 3170445 (78292) 7580269 (82450) 6679899 (77613) 2742397 (82912) 5250239 (85491) 9746886 (82707) 3791268 (86621) 6423268 (81346) 4649157 (79932) 4010699 (83940) 
     dis: 	42944.000 51310.000 52252.000 54734.000 59550.000 59585.000 60255.000 61426.000 64056.000 64480.000 64505.000 65552.000 65583.000 65598.000 65602.000 66348.000 66467.000 66896.000 67701.000 68091.000 70467.000 70708.000 70710.000 70821.000 71063.000 71072.000 71399.000 71610.000 72674.000 72743.000 72758.000 72763.000 72819.000 73221.000 73309.000 73722.000 74235.000 74478.000 74500.000 74598.000 75091.000 75262.000 75355.000 75408.000 75572.000 75624.000 75800.000 75826.000 76045.000 76070.000 76465.000 76655.000 77169.000 77186.000 77403.000 77578.000 77900.000 78067.000 78527.000 78559.000 78567.000 78591.000 78628.000 79040.000 79138.000 79667.000 80137.000 80457.000 80504.000 80541.000 80665.000 80727.000 80981.000 80989.000 81002.000 81106.000 81341.000 81418.000 81577.000 81665.000 81824.000 82062.000 82065.000 82254.000 82276.000 82304.000 82417.000 83510.000 83789.000 83796.000 83813.000 83813.000 83880.000 84019.000 84289.000 84366.000 84467.000 84509.000 84567.000 84617.000 
query 2 nn's (77037): 237844 (57153) 8132849 (63316) 2795236 (62148) 9068473 (62147) 8863268 (55928) 8455929 (59448) 4665202 (65519) 8565013 (65663) 4433607 (61698) 1329974 (65153) 4555038 (63166) 8563094 (58325) 1080573 (56490) 8198272 (61501) 6114289 (59111) 7685482 (62295) 7168507 (61488) 5596868 (58496) 8333106 (61471) 2723946 (57827) 4542872 (61400) 9384590 (59693) 5715023 (62436) 8075681 (59224) 8051890 (56266) 945107 (59251) 3224964 (61887) 1795636 (58821) 4647083 (61889) 4898170 (58003) 5228926 (56641) 3108541 (56307) 5520814 (57891) 2350493 (63546) 4497755 (65054) 29358 (65481) 9586564 (59008) 6247603 (63801) 137116 (60929) 2871507 (64701) 330461 (65445) 2523582 (58820) 7454296 (64256) 8084717 (62575) 4703041 (58856) 7651848 (56532) 1366265 (58751) 2883341 (56298) 2540958 (64117) 283793 (56625) 2461335 (62859) 4391513 (62475) 3860058 (61774) 6412105 (61120) 868456 (62065) 4743122 (61891) 9431634 (57575) 7158950 (63558) 9705261 (60516) 6208823 (61767) 7221663 (60629) 5315700 (61751) 9982250 (57564) 245248 (61481) 8383671 (61008) 6553074 (59575) 1015153 (56733) 5270485 (63229) 2721821 (58910) 5985758 (62278) 5878397 (58972) 2382554 (61058) 6090181 (61186) 9212023 (59032) 1143584 (56157) 1579423 (63799) 3612389 (59908) 7464135 (57113) 3714042 (64506) 3624966 (62785) 5787667 (61097) 2007487 (61256) 4299983 (57114) 4511809 (62276) 2220152 (61420) 8597513 (60174) 5074720 (59964) 668342 (65314) 7975982 (61676) 6081638 (56501) 7028317 (60120) 7671868 (56373) 2352405 (59041) 8975057 (60034) 6406251 (59215) 4877317 (64096) 2244705 (58840) 8122567 (57529) 6222847 (56154) 1066001 (63825) 
     dis: 	49294.000 50997.000 51181.000 52145.000 53225.000 53383.000 53809.000 54061.000 54908.000 55134.000 55225.000 55995.000 56182.000 56416.000 56627.000 57176.000 57597.000 57613.000 57924.000 58328.000 58989.000 59021.000 59123.000 59158.000 59334.000 59895.000 60035.000 60175.000 60225.000 60397.000 60628.000 60710.000 61539.000 61611.000 61845.000 61858.000 61965.000 62491.000 62507.000 62667.000 62691.000 62798.000 62909.000 63001.000 63300.000 63338.000 63398.000 63404.000 63499.000 63549.000 63628.000 63630.000 63678.000 63832.000 64004.000 64174.000 64188.000 64334.000 64345.000 64786.000 64879.000 64911.000 65420.000 65519.000 65632.000 65675.000 65701.000 65774.000 65778.000 65911.000 66113.000 66262.000 66383.000 66496.000 66664.000 66769.000 66775.000 66850.000 66858.000 66915.000 67187.000 67271.000 67273.000 67312.000 67389.000 67395.000 67550.000 67577.000 67607.000 67718.000 67733.000 67780.000 67874.000 67974.000 68014.000 68178.000 68183.000 68196.000 68213.000 68232.000 
query 3 nn's (87036): 6411621 (75479) 4246457 (73056) 1514080 (69970) 9577990 (76369) 8051314 (74322) 179529 (69049) 9625994 (68515) 9603354 (76938) 4983026 (77570) 7463079 (77126) 1061321 (74643) 578322 (76455) 3252978 (77827) 3379947 (69911) 9332155 (77339) 7745448 (77965) 4537205 (69605) 4824483 (76626) 9706597 (74482) 4856979 (75280) 4899384 (72017) 4258600 (71620) 2311118 (74542) 5110678 (76661) 5566648 (76538) 6934608 (78112) 5758654 (75285) 9833335 (77885) 2941694 (75342) 3877232 (75132) 3523917 (69249) 115823 (73565) 2256506 (68295) 4491781 (76846) 6943685 (74006) 6091433 (73224) 8959954 (71809) 5147194 (72622) 3965061 (75682) 1787200 (69230) 8157747 (69658) 1961581 (78022) 6252048 (74147) 5498749 (76453) 1096237 (78243) 4104803 (73729) 9604675 (71943) 116302 (75981) 4338667 (76290) 4933042 (77577) 434846 (75860) 6662913 (70602) 7018328 (77497) 7887517 (75786) 957097 (68545) 2960857 (72083) 2050399 (70248) 8532848 (73219) 8198543 (69740) 9081529 (71677) 5330122 (76348) 650123 (74647) 6306650 (70227) 3610014 (69045) 8663753 (69694) 4664026 (76358) 3547401 (70131) 5429548 (77215) 6089729 (74507) 3004616 (77242) 617732 (74005) 7865409 (71914) 6901252 (69639) 3284716 (71856) 6141330 (71761) 8267830 (72849) 5520378 (71660) 2139674 (71194) 675474 (72788) 2789396 (77393) 5623544 (73074) 424664 (69813) 848098 (76205) 1850642 (68351) 9512018 (69878) 3925959 (76081) 8538918 (76447) 899264 (69740) 9083030 (74195) 3053302 (73591) 6156871 (73592) 5577884 (76925) 6342790 (75860) 7276573 (72528) 4825798 (71816) 7966182 (78001) 9211610 (72496) 3013029 (68711) 4376452 (73079) 2411446 (71039) 
     dis: 	5998.000 6981.000 7171.000 7282.000 7644.000 7708.000 7825.000 7841.000 8247.000 8404.000 8608.000 8885.000 8993.000 9470.000 9813.000 9980.000 10154.000 10174.000 10493.000 10532.000 10665.000 10702.000 10792.000 10821.000 10846.000 10851.000 10977.000 10990.000 10994.000 11135.000 11236.000 11239.000 11270.000 11345.000 11402.000 11545.000 11598.000 11814.000 11823.000 12107.000 12215.000 12233.000 12370.000 12402.000 12425.000 12449.000 12475.000 12477.000 12528.000 12581.000 12703.000 12925.000 12973.000 12997.000 13280.000 13373.000 13393.000 13452.000 13530.000 13569.000 13660.000 13700.000 13837.000 13838.000 13894.000 13904.000 14106.000 14164.000 14165.000 14232.000 14449.000 14525.000 14544.000 14582.000 14633.000 14672.000 14774.000 14870.000 14911.000 14933.000 15158.000 15176.000 15192.000 15218.000 15254.000 15407.000 15552.000 15584.000 15623.000 15654.000 15797.000 15851.000 15852.000 16025.000 16027.000 16087.000 16089.000 16102.000 16154.000 16161.000 
query 4 nn's (55705): 6578584 (38818) 6357047 (37869) 4380344 (42821) 4830381 (40295) 5257851 (42550) 8478796 (34009) 7559534 (34726) 3839204 (40859) 1466559 (35927) 9821817 (36297) 4551510 (38108) 1194149 (42059) 2721988 (37884) 3814747 (40292) 797235 (41978) 6468850 (33298) 2528505 (42180) 4355165 (36701) 2840566 (32970) 1355777 (35010) 1508852 (41574) 9353798 (42619) 2161200 (41175) 9293426 (36276) 1947516 (39904) 6559886 (41230) 5674137 (35926) 6770270 (37124) 7210902 (34563) 7360489 (42573) 2625230 (34952) 7261106 (38848) 8843847 (34786) 4982198 (41794) 2423429 (42078) 933705 (35471) 6132133 (35938) 3368229 (35512) 1381124 (33201) 8325663 (40558) 6152391 (40418) 34728 (33521) 8137702 (38188) 230302 (33409) 6361396 (38338) 9825567 (40718) 1417456 (42485) 2352243 (35415) 9394278 (40775) 4122433 (37847) 4122303 (37458) 2071068 (33013) 4186740 (33627) 3587564 (33538) 3732556 (39898) 3529474 (35064) 4230287 (36808) 3300045 (37849) 9687221 (35602) 1319029 (40740) 9999853 (42029) 1528313 (42186) 795939 (35580) 854041 (37966) 6527495 (38120) 6871356 (38212) 4650677 (34446) 9484373 (39404) 8227456 (34411) 280740 (38932) 1200356 (37898) 3135878 (42728) 1083442 (40498) 8683631 (38436) 2479436 (36680) 9338967 (33200) 2596769 (36909) 9225825 (34921) 3410167 (32971) 98254 (39974) 5862862 (37162) 6071356 (34668) 9761569 (39676) 1335451 (34972) 2056959 (38303) 9853628 (34881) 2936661 (33528) 4043920 (35246) 7836935 (35024) 4477928 (39752) 9531307 (34185) 4967060 (39028) 8350010 (42476) 6156042 (34126) 6525822 (37594) 7407009 (40502) 2269026 (42731) 7775035 (34215) 4796788 (40070) 6372520 (34410) 
     dis: 	82172.000 90314.000 90617.000 91259.000 92300.000 93054.000 93517.000 94216.000 94725.000 96157.000 96528.000 97089.000 97226.000 97638.000 98154.000 98748.000 99006.000 99536.000 99749.000 100068.000 100216.000 100266.000 100676.000 100967.000 100979.000 101018.000 101026.000 101255.000 101343.000 101655.000 102068.000 102266.000 102270.000 102326.000 102613.000 102758.000 102961.000 103089.000 103263.000 103263.000 103353.000 103387.000 103459.000 103690.000 104191.000 104226.000 104284.000 104566.000 104644.000 104690.000 104994.000 105047.000 105180.000 105422.000 106067.000 106335.000 106376.000 106438.000 106449.000 106593.000 106702.000 106783.000 106857.000 106968.000 107019.000 107154.000 107184.000 107292.000 107296.000 107449.000 107449.000 107512.000 107581.000 107632.000 107700.000 107763.000 108294.000 108335.000 108612.000 108627.000 108785.000 108912.000 108970.000 108984.000 109120.000 109179.000 109293.000 109423.000 109438.000 109503.000 109522.000 109562.000 109567.000 109785.000 109811.000 109846.000 109901.000 109983.000 110054.000 110071.000 
[ 501.293s ] *** Query time: 66.656
qps: 150.025
 *** acorn recall 
efs:150
acorn get 948944 postive res from 1000000 results, recall@100:0.949
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.004 0.025 0.126 0.620 0.224 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[501.350s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 52449796
ndis: 0
nreorder: 0
average distance computations per query: 5244.979
[ 501.350s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 150 128"
	User time (seconds): 475.55
	System time (seconds): 27.71
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:23.68
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17015944
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 7128278
	Voluntary context switches: 0
	Involuntary context switches: 8483
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:21
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 150 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.252s ] Loaded metadata, 10000000 attr's found
[ 1.252s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.256s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
[ 1.258s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json
[ 1.386s ] Loaded ground truth, gt_size: 100
[ 1.386s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999555 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255865
Average degree per layer:1709310.833
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 13.533s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 150
selectivity: 0.010
[ 413.729s ] Query results (vector ids, then distances):
query 0 nn's (66811): 8403027 (67450) 2260181 (67765) 3704351 (66936) 9378841 (67272) 8710437 (67666) 7733897 (67571) 4173863 (67608) 4910821 (67040) 962371 (66952) 2620182 (67682) 9107698 (67599) 873412 (67168) 3843925 (67076) 8845691 (66999) 3526473 (67146) 3813172 (67723) 9314443 (67545) 6937422 (67301) 2758974 (67297) 4929785 (67064) 1428198 (67700) 561922 (67632) 1938934 (66865) 5492067 (67489) 2762041 (67060) 4701803 (67593) 7102788 (67612) 8423848 (67281) 6263573 (67526) 7127231 (67569) 7148781 (67671) 3561475 (67031) 2569556 (67318) 6768337 (67642) 476247 (67555) 1473467 (67795) 9927783 (66921) 2036782 (67516) 3637471 (67727) 4067947 (67446) 8210098 (66940) 9099514 (66886) 5421355 (67569) 5134913 (66830) 720518 (67517) 8650332 (67794) 8905430 (67146) 6429861 (66814) 5944896 (67561) 1466972 (67100) 8491615 (67708) 4797604 (67241) 767289 (66900) 2347824 (67120) 5074605 (67699) 7409873 (67552) 9631577 (67273) 2066339 (66861) 3186439 (67131) 8905026 (66859) 1373789 (67491) 8572299 (67776) 4243506 (67419) 5816333 (67209) 8106224 (67545) 4399701 (66952) 3711488 (67440) 8473066 (66998) 6752283 (67516) 4571270 (67294) 1270987 (67021) 7491791 (66938) 9677390 (67109) 4742405 (67043) 1926617 (67042) 423904 (67358) 2617611 (67362) 8785189 (67454) 3746697 (67179) 3641995 (67511) 291157 (67764) 5534763 (66946) 1873509 (67453) 3700980 (67592) 7577650 (67743) 4716171 (67295) 8560867 (67506) 7891812 (67633) 605205 (66932) 8314795 (66843) 5708620 (67466) 7227439 (67570) 2817178 (66993) 2753383 (67033) 2578770 (67747) 4319167 (67357) 706303 (67672) 4309167 (67118) 5686217 (66948) 3852574 (67038) 
     dis: 	87416.000 90521.000 90932.000 91614.000 91758.000 93100.000 93463.000 93775.000 94914.000 96020.000 96724.000 96833.000 98315.000 99498.000 99530.000 100645.000 101750.000 101980.000 102582.000 102661.000 103223.000 103345.000 103484.000 103672.000 103933.000 103955.000 105524.000 105738.000 106104.000 106476.000 106835.000 107334.000 108295.000 109366.000 109560.000 109848.000 109904.000 109952.000 110518.000 111147.000 111332.000 111757.000 111983.000 112325.000 112806.000 113163.000 113230.000 113338.000 113491.000 113544.000 113861.000 114001.000 114003.000 114063.000 114081.000 114454.000 114809.000 114966.000 115089.000 115149.000 115157.000 115262.000 115270.000 115434.000 115491.000 115505.000 116029.000 116138.000 116367.000 116523.000 116570.000 116654.000 116811.000 117549.000 117659.000 117932.000 118291.000 118333.000 118347.000 118400.000 118584.000 118802.000 118910.000 119036.000 119404.000 119481.000 119485.000 119502.000 119531.000 119584.000 119587.000 119683.000 119706.000 119743.000 119890.000 119890.000 120053.000 120058.000 120223.000 120292.000 
query 1 nn's (67810): 5838578 (80325) 9900713 (80753) 8549337 (81124) 509915 (81217) 5424055 (81172) 9294765 (80557) 8032969 (80529) 2765204 (81025) 5666656 (80815) 6168230 (80264) 6225217 (80943) 5941545 (80770) 8366738 (80505) 4099900 (80711) 5426587 (80360) 396317 (81225) 7853731 (80509) 3620796 (80258) 2674497 (80311) 7581274 (81100) 6768824 (80544) 6067204 (80454) 7830504 (80353) 3590023 (80534) 7026865 (81171) 3591833 (80960) 9688174 (80685) 8029168 (80656) 7582695 (80751) 8180678 (81075) 3861622 (80950) 6408 (80621) 5667339 (80392) 7931185 (80636) 6983565 (80270) 8045632 (80849) 8150421 (80634) 4278462 (80257) 6451481 (81107) 2075235 (80860) 3111838 (80707) 2246180 (80570) 9211101 (80695) 553463 (80259) 1714383 (80586) 6504915 (80333) 3476862 (80771) 9654343 (80841) 44901 (81166) 8470707 (81161) 6767214 (81156) 711954 (81007) 2828683 (80755) 8911613 (80284) 9442946 (80695) 4947700 (80294) 189701 (80601) 6840018 (80429) 8382087 (80438) 8596783 (80298) 6602250 (80967) 7331686 (81058) 3860320 (80802) 8442852 (81041) 6328935 (80742) 4479412 (81073) 1377258 (81017) 855717 (80316) 5893925 (80342) 8321964 (81174) 2842302 (80516) 3711642 (80514) 3711993 (81021) 1258305 (81086) 8160407 (80307) 3024802 (80696) 3885784 (81038) 2830600 (80781) 6907313 (80401) 1977575 (80775) 7133610 (80531) 1186743 (80239) 5364563 (81106) 1937820 (80433) 8864906 (80550) 8592796 (81117) 5814915 (80285) 7284954 (80464) 4132515 (80664) 4611358 (80640) 8641473 (80656) 6098453 (80771) 6035761 (80410) 8665171 (80457) 6174301 (81178) 8251593 (81145) 6039465 (80462) 6354918 (80749) 2895268 (81070) 3013284 (80866) 
     dis: 	71072.000 72674.000 75408.000 76465.000 80137.000 81418.000 82276.000 83796.000 85142.000 86482.000 86554.000 87104.000 87114.000 88931.000 89134.000 89540.000 90043.000 90700.000 91914.000 92577.000 93446.000 93733.000 94292.000 94819.000 94831.000 96421.000 97460.000 97589.000 97596.000 97687.000 98184.000 98404.000 98491.000 99108.000 99314.000 99607.000 100309.000 100955.000 101049.000 101052.000 101088.000 101851.000 102321.000 102449.000 102625.000 103002.000 103452.000 103682.000 104460.000 104701.000 104772.000 105049.000 105109.000 105346.000 105963.000 106098.000 106439.000 106605.000 106783.000 106925.000 106990.000 107514.000 108412.000 108512.000 108641.000 108695.000 109120.000 109146.000 109701.000 110324.000 110477.000 110673.000 110902.000 110995.000 111189.000 111384.000 111391.000 111462.000 111555.000 111604.000 111721.000 111770.000 112099.000 112243.000 112463.000 112672.000 113125.000 113135.000 113197.000 113309.000 113401.000 113583.000 113955.000 114172.000 114206.000 114698.000 115125.000 115157.000 115316.000 115493.000 
query 2 nn's (80229): 5727909 (90490) 515037 (90656) 5709226 (90258) 4112561 (89860) 86206 (89955) 7466107 (89787) 8860131 (89804) 1380491 (90138) 4347309 (90358) 5406339 (90424) 5043393 (90355) 3827437 (90317) 7964601 (89960) 981842 (89952) 7223463 (89971) 5224373 (90157) 2140486 (90307) 3582852 (90144) 1944507 (90001) 5017634 (90012) 5907913 (89721) 8196817 (89980) 7004103 (89868) 3843694 (90380) 3973290 (89737) 6034490 (90076) 7537883 (90124) 7734691 (89795) 9827814 (90252) 2581224 (90603) 6140224 (90545) 991901 (90604) 7611121 (90091) 7879176 (90271) 729684 (90430) 2323619 (90250) 4129975 (89746) 4511904 (90618) 6594457 (90026) 2868611 (89951) 5908251 (89799) 3636755 (89788) 9803398 (90512) 9028216 (90549) 8423097 (90464) 7715900 (90394) 7446969 (89822) 7058647 (89879) 5782741 (90379) 9362764 (90134) 7156368 (90657) 8894577 (90486) 4717677 (90663) 7728486 (90223) 6947930 (89791) 6046323 (90037) 8861125 (90024) 4312200 (90591) 5680835 (89904) 5567501 (90541) 9376418 (90389) 4148572 (90018) 9453350 (90583) 3303937 (90116) 6951173 (90307) 1175959 (90028) 6041107 (90367) 2029499 (89844) 9328463 (89788) 9571295 (90469) 4958619 (89999) 7040637 (89866) 1965354 (89728) 2480763 (90160) 8637335 (90531) 9308696 (90383) 59872 (89885) 5995668 (90171) 602185 (89882) 6327565 (90575) 78458 (89733) 1065921 (90122) 3348434 (90524) 5958397 (90515) 4712776 (89997) 2428976 (90254) 2292676 (90516) 15387 (90569) 5587985 (90389) 3125495 (89874) 9987830 (90043) 4202025 (90030) 408310 (90594) 1624938 (90244) 534273 (90337) 2618403 (90555) 4280083 (90255) 7628202 (90693) 604157 (90634) 5743466 (89821) 
     dis: 	60084.000 61187.000 61273.000 61277.000 62188.000 63202.000 65394.000 66237.000 66548.000 68801.000 68879.000 71749.000 72707.000 72900.000 73360.000 73471.000 73918.000 74225.000 74255.000 74834.000 75195.000 75292.000 75351.000 75816.000 75911.000 76436.000 76845.000 77248.000 77700.000 78594.000 78664.000 78931.000 79130.000 79161.000 79847.000 79921.000 80019.000 80099.000 80418.000 80541.000 81002.000 81314.000 81419.000 81449.000 82017.000 82057.000 82094.000 82213.000 82498.000 82647.000 82744.000 82770.000 82818.000 82948.000 82990.000 83004.000 83106.000 83113.000 83113.000 83118.000 83155.000 83160.000 83760.000 84308.000 84480.000 84497.000 84630.000 84920.000 85252.000 85261.000 85309.000 85335.000 85507.000 85568.000 85663.000 85682.000 86011.000 86047.000 86102.000 86110.000 86123.000 86181.000 86460.000 86721.000 86808.000 86995.000 87305.000 87336.000 87674.000 87675.000 88026.000 88038.000 88045.000 88163.000 88346.000 88601.000 89199.000 89261.000 89406.000 89547.000 
query 3 nn's (81228): 840086 (7034) 6281603 (7047) 1180726 (6952) 7890747 (7446) 9231939 (6869) 493857 (7268) 8089617 (7268) 8618960 (7556) 8701088 (6988) 4498186 (6839) 907443 (6923) 3917528 (7833) 9526471 (7592) 7302298 (6887) 232753 (7204) 9623826 (7197) 3094610 (7202) 5548322 (6881) 2009002 (6908) 8362700 (7030) 5466233 (7407) 3647654 (7077) 7210863 (7612) 8404341 (7090) 3258762 (6929) 2090840 (7817) 1486412 (7135) 639753 (7377) 9245688 (7071) 9140968 (7271) 438493 (6876) 7727529 (7430) 7287289 (7361) 606674 (7758) 1022275 (7634) 6081816 (7748) 4909074 (7438) 5354276 (7506) 4299939 (7534) 9161719 (7320) 6046972 (7747) 4926732 (6976) 3692343 (7190) 2000232 (7446) 3779998 (7672) 4450655 (7311) 9778189 (7176) 538489 (7211) 7514291 (6979) 8204406 (7043) 5488169 (7685) 5203333 (7269) 3615073 (7561) 5172258 (7095) 799918 (7655) 452242 (7405) 816336 (7106) 6920826 (7045) 2128995 (7073) 8991739 (6849) 1441085 (7472) 9464792 (7670) 8037472 (6901) 3416045 (7696) 2753223 (7680) 7820689 (6838) 9938976 (7500) 1222837 (7829) 9597935 (7209) 2389755 (7562) 2253039 (7388) 5486652 (7261) 2558587 (7086) 5002736 (7053) 4835206 (6992) 7527407 (7703) 4187347 (7507) 3949103 (7673) 4284323 (7605) 3978452 (7650) 8598492 (7062) 4952836 (7642) 9269979 (7639) 7739196 (7299) 418466 (7776) 2327647 (7291) 312316 (7641) 374214 (7199) 1181329 (7341) 4782467 (7355) 1043026 (7252) 2716133 (7694) 4681538 (6949) 1594161 (7181) 2478369 (7188) 1151699 (7211) 2743695 (6886) 3497137 (7539) 6284981 (7401) 5662712 (7477) 
     dis: 	9013.000 9157.000 11574.000 12341.000 13039.000 13482.000 13812.000 14688.000 15266.000 15771.000 15871.000 16066.000 16282.000 16701.000 18419.000 18466.000 18667.000 19324.000 19488.000 19726.000 20227.000 20599.000 20837.000 21551.000 22891.000 23420.000 23999.000 24238.000 24369.000 24433.000 24700.000 24922.000 25095.000 25174.000 25235.000 25636.000 25769.000 26030.000 26166.000 26344.000 26400.000 26839.000 26931.000 27438.000 27560.000 27685.000 27763.000 27846.000 27855.000 27993.000 28246.000 28299.000 28408.000 28468.000 28495.000 28524.000 28642.000 28907.000 28934.000 28986.000 29136.000 29295.000 29434.000 29450.000 29611.000 29766.000 29833.000 29860.000 29882.000 29978.000 30109.000 30221.000 30314.000 30385.000 30513.000 30830.000 30919.000 31169.000 31487.000 31601.000 31737.000 31805.000 31906.000 31912.000 31950.000 32018.000 32096.000 32136.000 32146.000 32174.000 32371.000 32456.000 32923.000 33087.000 33142.000 33185.000 33264.000 33309.000 33320.000 33427.000 
query 4 nn's (89717): 1162782 (76796) 6531232 (76299) 6274805 (76455) 3136966 (76552) 608851 (76588) 6627719 (76242) 5352085 (76950) 6556006 (76613) 4730227 (77095) 3376181 (76798) 8432554 (76502) 136176 (76349) 5043646 (76583) 9022000 (76799) 6862891 (76952) 6506698 (76701) 9474436 (76232) 9721131 (76870) 4091152 (76530) 5004079 (76417) 2186749 (76699) 2471753 (76829) 9908144 (76273) 6561885 (77127) 6361804 (76947) 7615725 (76929) 3605992 (77175) 5047340 (76256) 9599891 (76561) 7931620 (77115) 6887605 (76999) 406301 (77040) 9492467 (76507) 4003644 (77017) 9264739 (76973) 1802148 (76955) 6432205 (76861) 4196262 (76458) 9108671 (77070) 7415358 (77137) 9056744 (77088) 4225267 (76453) 1613898 (76929) 618280 (76777) 6934604 (76932) 7003764 (76601) 9065465 (76564) 5680785 (76237) 9621610 (76392) 1437854 (76356) 5647249 (77110) 6265241 (76979) 2545060 (77092) 9603312 (76264) 1263406 (77210) 3104556 (76851) 6413005 (76612) 8421997 (77138) 7470440 (77106) 8005576 (77073) 3679280 (76653) 5417413 (76820) 7953179 (76649) 9437669 (76359) 2518574 (77174) 7561951 (76747) 7415016 (76757) 2952843 (77163) 8814024 (76386) 9317347 (77172) 149842 (76275) 4954728 (76796) 4882781 (76536) 9185235 (76902) 7630117 (76987) 2316552 (76483) 9386725 (76453) 2652478 (76506) 6882381 (76444) 5608957 (76459) 4848526 (76772) 963886 (76952) 1749595 (76329) 4575870 (76641) 7082080 (76796) 4420380 (76372) 2970562 (76879) 1424280 (76733) 3968102 (77020) 6895571 (77227) 8728186 (77001) 3887443 (76710) 4710601 (76569) 6695911 (77212) 9019179 (76796) 2186468 (76359) 6717816 (76430) 6375400 (76406) 6444765 (77069) 5852646 (76246) 
     dis: 	97821.000 107637.000 110484.000 110513.000 110772.000 110826.000 112236.000 112935.000 113198.000 113876.000 113998.000 115625.000 116160.000 116545.000 116854.000 117235.000 118351.000 118422.000 118479.000 118535.000 119310.000 119429.000 119468.000 119902.000 119958.000 119985.000 120358.000 121793.000 121930.000 122744.000 123029.000 123392.000 123923.000 123972.000 124785.000 125005.000 125098.000 125116.000 125197.000 125280.000 125320.000 125786.000 125801.000 126187.000 126500.000 126504.000 126643.000 126973.000 127332.000 127350.000 127366.000 127732.000 127805.000 128093.000 128364.000 128411.000 128457.000 128538.000 128620.000 128954.000 129301.000 129548.000 129687.000 129859.000 130281.000 130299.000 130795.000 130944.000 131063.000 131326.000 131329.000 131433.000 131447.000 131481.000 131687.000 131712.000 131759.000 132410.000 132482.000 132815.000 132845.000 133059.000 133260.000 133510.000 133522.000 133666.000 133672.000 133731.000 134155.000 134346.000 134503.000 134576.000 134610.000 134621.000 134698.000 135120.000 135136.000 135245.000 135289.000 135376.000 
[ 413.729s ] *** Query time: 59.748
qps: 167.369
 *** acorn recall 
efs:150
acorn get 871495 postive res from 1000000 results, recall@100:0.871
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.007 0.037 0.151 0.335 0.448 0.021 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[413.760s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 14264951
ndis: 0
nreorder: 0
average distance computations per query: 1426.495
[ 413.760s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 150 128"
	User time (seconds): 401.08
	System time (seconds): 13.58
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:54.79
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17014916
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4406735
	Voluntary context switches: 1
	Involuntary context switches: 1853
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:33
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 150 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.311s ] Loaded metadata, 10000000 attr's found
[ 1.311s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.314s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
[ 1.316s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json
[ 1.450s ] Loaded ground truth, gt_size: 100
[ 1.450s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999555 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255865
Average degree per layer:1709310.833
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 13.880s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 150
selectivity: 0.001
[ 470.469s ] Query results (vector ids, then distances):
query 0 nn's (44843): 8250800 (44931) 7720917 (44885) 3078330 (44869) 1984498 (44886) 9501768 (44862) 7343425 (44896) 5430473 (44908) 3177118 (44936) 636717 (44882) 8579487 (44894) 2406483 (44854) 8754007 (44883) 6270926 (44906) 9025696 (44849) 1075493 (44863) 8637309 (44888) 2171504 (44921) 1618040 (44908) 4676 (44896) 5559417 (44888) 4463319 (44872) 7418949 (44871) 297238 (44860) 7531291 (44863) 9067535 (44920) 2796608 (44899) 4738997 (44862) 1522894 (44858) 5340460 (44909) 7363474 (44860) 3248293 (44906) 8630600 (44862) 2358029 (44886) 6018206 (44844) 6312909 (44917) 3147841 (44846) 3483759 (44932) 2757720 (44891) 8080659 (44885) 6486817 (44891) 295420 (44916) 4031854 (44860) 7711180 (44939) 8786718 (44852) 1016892 (44892) 150599 (44854) 6178382 (44941) 9995325 (44929) 9459956 (44936) 1469759 (44931) 9950058 (44865) 1794102 (44929) 7824359 (44886) 7052573 (44920) 776655 (44924) 8321835 (44873) 2 (92353) 4827162 (44891) 6799157 (44872) 7875634 (44887) 8671811 (44917) 238137 (44884) 4089004 (44905) 6208869 (44843) 3409510 (44918) 8839432 (44904) 128329 (44932) 6481247 (44938) 9955419 (44865) 2256144 (44927) 8363540 (44890) 3259508 (44905) 9392722 (44850) 6787191 (44852) 7411605 (44927) 7763899 (44864) 3217964 (44919) 7823437 (44846) 262065 (44921) 510824 (44912) 5074062 (44877) 6415559 (44921) 7180940 (44872) 8397623 (44867) 8381919 (44922) 828567 (44870) 3122040 (44902) 3264788 (44923) 8509617 (44893) 4901525 (44874) 1115320 (44892) 6303976 (44868) 6861908 (44893) 20538 (44923) 2659773 (44894) 1641907 (44884) 5532151 (44861) 1857637 (44879) 42583 (44855) 8530678 (44878) 
     dis: 	143069.000 143555.000 154396.000 159022.000 161075.000 161771.000 163206.000 164499.000 165123.000 165919.000 170311.000 178993.000 179392.000 179810.000 180401.000 181727.000 182070.000 183362.000 185885.000 187786.000 188399.000 190247.000 190378.000 190564.000 190996.000 191140.000 191217.000 192419.000 192491.000 193480.000 195268.000 195366.000 195712.000 196094.000 197575.000 197783.000 199939.000 199955.000 201319.000 202839.000 202973.000 204195.000 205955.000 206068.000 208904.000 210700.000 212941.000 214787.000 215486.000 216223.000 216550.000 217534.000 217688.000 217913.000 218184.000 219071.000 219376.000 219413.000 220289.000 221980.000 223940.000 224368.000 225432.000 226789.000 227202.000 227227.000 227277.000 228148.000 228475.000 228514.000 229061.000 229865.000 229896.000 230067.000 230189.000 231005.000 231073.000 231297.000 231561.000 233652.000 233957.000 234140.000 234807.000 236039.000 236137.000 236774.000 237033.000 237392.000 237529.000 238142.000 238493.000 238957.000 239474.000 239586.000 239607.000 240066.000 240239.000 240649.000 240981.000 241607.000 
query 1 nn's (44942): 7957648 (42897) 4884755 (42853) 2970984 (42893) 7191186 (42843) 4200867 (42836) 8500554 (42884) 2273257 (42859) 8909252 (42836) 3809888 (42834) 6368355 (42838) 3488741 (42850) 4387698 (42902) 2359708 (42825) 6051355 (42850) 7976759 (42872) 9079212 (42857) 7119992 (42846) 1779083 (42852) 9521631 (42901) 2579421 (42830) 1640954 (42844) 9634578 (42836) 4270376 (42903) 2241282 (42841) 2666993 (42909) 900495 (42902) 9339389 (42871) 4468023 (42912) 1360729 (42891) 7717169 (42894) 2030854 (42846) 2396489 (42845) 9961406 (42885) 6970830 (42851) 3297584 (42828) 3145482 (42895) 2291602 (42871) 9343385 (42855) 4350027 (42915) 7477068 (42866) 9240751 (42848) 8430097 (42863) 3728716 (42893) 4114406 (42883) 7944396 (42844) 2987260 (42830) 3791713 (42822) 1181834 (42823) 4657884 (42843) 4550268 (42900) 4824258 (42879) 4026183 (42850) 7203630 (42826) 9459653 (42877) 3483162 (42847) 4349946 (42862) 3751447 (42888) 9705183 (42825) 5765758 (42840) 5097209 (42912) 637808 (42830) 8720055 (42834) 1280352 (42848) 4781282 (42843) 3041586 (42869) 7184878 (42870) 502219 (42883) 1652502 (42839) 4900871 (42833) 7468196 (42916) 5019294 (42908) 5180615 (42824) 9843802 (42920) 3518279 (42844) 8557991 (42874) 2055659 (42877) 8525642 (42861) 6897630 (42891) 3166660 (42889) 290115 (42905) 8878455 (42845) 1647372 (42870) 2698241 (42862) 452881 (42892) 3554258 (42826) 3369868 (42906) 1552840 (42916) 6830795 (42892) 343715 (42920) 7065883 (42865) 2616890 (42917) 1915192 (42919) 5735767 (42851) 7543936 (42853) 1787986 (42858) 3145785 (42834) 6185990 (42909) 5299874 (42846) 8567755 (42828) 8071107 (42913) 
     dis: 	81752.000 126515.000 130270.000 133965.000 139944.000 141388.000 141804.000 142799.000 144482.000 145680.000 146545.000 147642.000 148976.000 153836.000 156585.000 156949.000 157138.000 157523.000 158843.000 160259.000 161516.000 162467.000 162511.000 163044.000 168058.000 169537.000 170781.000 171039.000 172330.000 172814.000 174145.000 174448.000 175261.000 176304.000 177770.000 178038.000 178424.000 179213.000 179415.000 179475.000 179693.000 180389.000 180823.000 181435.000 181500.000 181935.000 182983.000 183325.000 183909.000 184026.000 184968.000 186017.000 187214.000 187219.000 187751.000 188260.000 188627.000 189119.000 189553.000 189557.000 189897.000 190373.000 190458.000 190821.000 191719.000 191897.000 194097.000 196518.000 196939.000 197929.000 198323.000 199877.000 200053.000 200137.000 200483.000 200591.000 201962.000 202178.000 202526.000 203307.000 203356.000 203485.000 203921.000 204613.000 204783.000 206673.000 206810.000 207295.000 207559.000 209033.000 209326.000 209354.000 209364.000 209493.000 209826.000 210156.000 210218.000 210431.000 210663.000 210697.000 
query 2 nn's (42821): 297077 (13228) 4985003 (13238) 2596648 (13218) 3642943 (13195) 9613 (13214) 7238949 (13173) 9629252 (13185) 873107 (13206) 9790996 (13169) 7148357 (13212) 8047376 (13211) 9031671 (13217) 5433036 (13239) 6657764 (13220) 9179998 (13231) 5930381 (13204) 5654256 (13215) 522315 (13195) 8099610 (13222) 9974321 (13227) 2766393 (13261) 7216288 (13196) 427773 (13182) 5803626 (13171) 7718659 (13232) 2165113 (13250) 7762561 (13244) 827400 (13189) 9369792 (13227) 956988 (13243) 8966126 (13245) 8281820 (13174) 6083969 (13263) 7520959 (13231) 1333132 (13239) 1574483 (13184) 3304300 (13231) 7269614 (13209) 5925145 (13222) 357909 (13239) 8749851 (13235) 224245 (13174) 9980923 (13215) 2458199 (13261) 5640174 (13255) 3382704 (13252) 2644179 (13223) 5080254 (13242) 1745380 (13250) 743217 (13264) 9210503 (13244) 1063752 (13187) 6087499 (13220) 827779 (13264) 2626537 (13182) 640689 (13182) 3542976 (13200) 1187950 (13256) 6313069 (13252) 5448714 (13251) 5470218 (13259) 2387198 (13237) 8121829 (13257) 4174262 (13250) 9949103 (13217) 5833522 (13169) 7209477 (13170) 8284105 (13237) 7993857 (13204) 1265472 (13253) 6259516 (13199) 7387047 (13258) 6021204 (13263) 9248918 (13254) 4355336 (13249) 2989863 (13263) 3200900 (13183) 5248563 (13218) 5586907 (13236) 1727851 (13231) 6275928 (13206) 338646 (13166) 6800618 (13227) 6271917 (13171) 6993049 (13257) 4909583 (13196) 9047359 (13232) 2309483 (13197) 6587416 (13166) 2 (92353) 6116433 (13212) 4426309 (13193) 6410220 (13186) 6110854 (13233) 1265411 (13255) 3307652 (13240) 6143029 (13185) 880277 (13262) 3360292 (13235) 3151822 (13170) 
     dis: 	90968.000 98290.000 106823.000 109950.000 111692.000 112364.000 120014.000 121693.000 123261.000 126604.000 129374.000 133073.000 133608.000 133983.000 137050.000 141863.000 144053.000 145276.000 145906.000 146039.000 147888.000 149624.000 150313.000 151855.000 152302.000 154074.000 154247.000 155561.000 156514.000 157235.000 158045.000 159258.000 160745.000 161266.000 161692.000 161736.000 163455.000 164258.000 165027.000 166413.000 166666.000 167300.000 168933.000 170574.000 171661.000 174736.000 175178.000 175327.000 175537.000 176219.000 176483.000 177626.000 178883.000 179175.000 179358.000 180784.000 180840.000 181097.000 181136.000 182231.000 182555.000 184355.000 184645.000 186631.000 186713.000 188203.000 188712.000 188938.000 189824.000 189975.000 191805.000 192539.000 192588.000 192626.000 192834.000 194471.000 194499.000 195002.000 195008.000 195012.000 195210.000 195439.000 195834.000 196953.000 197059.000 197297.000 197842.000 198037.000 199193.000 200182.000 200312.000 201759.000 202272.000 202385.000 202542.000 202585.000 203834.000 205527.000 205993.000 206054.000 
query 3 nn's (42920): 6629608 (25896) 8935190 (25881) 1133697 (25860) 4559467 (25860) 5542583 (25900) 9621318 (25903) 2657750 (25859) 1356892 (25894) 0 (95392) 1 (606) 6976982 (25935) 6376269 (25866) 7213714 (25920) 2 (92353) 7639554 (25912) 9199144 (25934) 783085 (25888) 5109719 (25913) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	198404.000 210468.000 211375.000 230977.000 240478.000 240534.000 243718.000 243919.000 253115.000 257664.000 261764.000 270314.000 275321.000 281193.000 281822.000 293632.000 322257.000 330602.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (13165): 7515673 (45650) 4408469 (45720) 9286246 (45645) 1723821 (45639) 6982100 (45668) 3318408 (45685) 54831 (45652) 6747648 (45640) 5429292 (45682) 6361291 (45687) 2394934 (45697) 9718361 (45683) 2201374 (45639) 5446777 (45705) 4129170 (45632) 9753274 (45636) 9607382 (45696) 3121721 (45728) 5333093 (45719) 9297673 (45631) 8712266 (45677) 5996637 (45660) 3409821 (45693) 5615609 (45654) 4594375 (45660) 3645586 (45695) 1524919 (45645) 9369714 (45713) 8240088 (45638) 144054 (45704) 8243432 (45671) 1475989 (45686) 7194177 (45656) 1541718 (45647) 2801040 (45717) 5227906 (45690) 4762760 (45649) 366673 (45696) 1164223 (45653) 349313 (45640) 7323914 (45697) 5609330 (45680) 8010558 (45721) 7606948 (45675) 1664194 (45677) 4981759 (45639) 9342204 (45642) 8332430 (45660) 1367533 (45650) 2562487 (45637) 4675588 (45717) 1570765 (45637) 9839869 (45676) 2144954 (45688) 6955836 (45680) 9720118 (45632) 7569135 (45658) 1861420 (45669) 4755495 (45712) 2749762 (45712) 576306 (45656) 4727655 (45658) 7983371 (45694) 5091416 (45694) 5729129 (45684) 9907521 (45697) 903222 (45689) 9491004 (45678) 355407 (45696) 8917590 (45688) 3570080 (45673) 2466973 (45647) 4884563 (45678) 5346101 (45715) 4062675 (45640) 8668207 (45702) 4430392 (45683) 1348315 (45640) 2250848 (45676) 2396133 (45704) 3749042 (45632) 423394 (45727) 1808488 (45654) 5819896 (45658) 2919736 (45643) 6124857 (45641) 502422 (45635) 9215999 (45645) 3645428 (45633) 2385586 (45704) 847228 (45644) 5359179 (45667) 1925944 (45659) 6794232 (45687) 3304498 (45645) 433486 (45725) 3720412 (45688) 4138557 (45664) 7254716 (45646) 8102727 (45718) 
     dis: 	134195.000 135585.000 138813.000 141823.000 142190.000 142669.000 145272.000 146533.000 148226.000 152454.000 154346.000 156039.000 157989.000 162422.000 165752.000 165824.000 168745.000 168958.000 169610.000 171422.000 171811.000 172837.000 172941.000 173719.000 173876.000 175133.000 176272.000 176326.000 176832.000 176935.000 177293.000 178023.000 178375.000 178951.000 179065.000 180207.000 181726.000 181852.000 182297.000 184165.000 184532.000 185816.000 186052.000 186693.000 188872.000 188927.000 189099.000 189256.000 189416.000 190069.000 190231.000 190314.000 190355.000 190620.000 191635.000 191653.000 191808.000 191982.000 192057.000 193346.000 194098.000 194657.000 194863.000 194953.000 195617.000 195725.000 195832.000 196187.000 196723.000 196815.000 197038.000 198185.000 198533.000 198834.000 198979.000 199635.000 199785.000 199832.000 200105.000 201127.000 203412.000 203425.000 203475.000 203840.000 204083.000 204435.000 205054.000 205150.000 206518.000 208904.000 210361.000 210676.000 210714.000 210756.000 211123.000 211731.000 211863.000 212149.000 212849.000 214208.000 
[ 470.469s ] *** Query time: 80.367
qps: 124.429
 *** acorn recall 
efs:150
acorn get 101304 postive res from 1000000 results, recall@100:0.101
recall dist(10% per bucket): 0.544 0.283 0.135 0.032 0.005 0.001 0.000 0.000 0.000 0.000 0.000 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[470.528s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 2047609
ndis: 0
nreorder: 0
average distance computations per query: 204.761
[ 470.528s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 150 128"
	User time (seconds): 454.74
	System time (seconds): 17.99
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:52.98
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17015468
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4853976
	Voluntary context switches: 1
	Involuntary context switches: 1063
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
