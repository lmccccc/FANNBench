

===============================================================================================================
START: generating groundtruth

N: 1000000
dataset: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
attr: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
query: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
qrange: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
output: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
topk: 10
dim: 512
start
[1.308 s] Loaded dataset, size=1000000, dim=512
[1.381 s] Loaded attr, size=1000000
[1.381 s] Loading query vectors and attributes
query vecs data loaded, with dim: 512, size=10000
[1.394 s] Loaded query vectors
[1.395 s] Loaded 10000 queries
====================Vectors====================

[28.894 s] Loading database
data loaded, with dim: 512, nb=1000000
[28.894 s] Indexing database, size 1000000*512 from max 1000000
[31.382 s] Adding the vectors to the index
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
====================INDEX====================
[31.471 s] Searching the 10 nearest neighbors of 10000 vectors in the index
here1
nn and dis size: 100000 100000
[31.984 s] Query results (vector ids, then distances):
query 0, qrange [1538054874, 1538228285]
      nns 0 id:599551 attr:1538180628 dis:0.966786
      nns 1 id:7045 attr:1538194886 dis:0.983598
      nns 2 id:68529 attr:1538185404 dis:0.993613
      nns 3 id:947605 attr:1538183011 dis:1.00653
      nns 4 id:271895 attr:1538093972 dis:1.00772
      nns 5 id:974529 attr:1538190748 dis:1.00938
      nns 6 id:213518 attr:1538098918 dis:1.03149
      nns 7 id:503208 attr:1538089743 dis:1.0341
      nns 8 id:600622 attr:1538173133 dis:1.03494
      nns 9 id:514184 attr:1538072518 dis:1.05087

query 1, qrange [1506909292, 1507230692]
      nns 0 id:80546 attr:1507132298 dis:0.179151
      nns 1 id:827419 attr:1507142402 dis:0.256975
      nns 2 id:724407 attr:1507017173 dis:0.26388
      nns 3 id:980669 attr:1507135275 dis:0.275899
      nns 4 id:879114 attr:1507046281 dis:0.289616
      nns 5 id:848588 attr:1506958381 dis:0.2941
      nns 6 id:741138 attr:1507051287 dis:0.30363
      nns 7 id:550738 attr:1507215860 dis:0.307471
      nns 8 id:483003 attr:1507147237 dis:0.325128
      nns 9 id:392021 attr:1507037262 dis:0.336731

query 2, qrange [1552519107, 1552626645]
      nns 0 id:150896 attr:1552595157 dis:0.36116
      nns 1 id:167260 attr:1552588486 dis:0.361815
      nns 2 id:847695 attr:1552610954 dis:0.394954
      nns 3 id:853316 attr:1552534618 dis:0.405833
      nns 4 id:75461 attr:1552582672 dis:0.41337
      nns 5 id:445711 attr:1552610564 dis:0.424661
      nns 6 id:830100 attr:1552614396 dis:0.431323
      nns 7 id:95773 attr:1552560774 dis:0.434676
      nns 8 id:609325 attr:1552583949 dis:0.440085
      nns 9 id:974118 attr:1552566634 dis:0.441971

query 3, qrange [1586951418, 1587012565]
      nns 0 id:549134 attr:1586977461 dis:0.65816
      nns 1 id:906513 attr:1586962259 dis:0.666866
      nns 2 id:296186 attr:1586968607 dis:0.670494
      nns 3 id:678133 attr:1586959034 dis:0.67832
      nns 4 id:872475 attr:1586961587 dis:0.691543
      nns 5 id:69667 attr:1586974827 dis:0.70417
      nns 6 id:754085 attr:1586980563 dis:0.706164
      nns 7 id:150904 attr:1587000916 dis:0.712174
      nns 8 id:957612 attr:1586989955 dis:0.718391
      nns 9 id:799000 attr:1586961952 dis:0.723396

query 4, qrange [1549236779, 1549369643]
      nns 0 id:659847 attr:1549307861 dis:0.426705
      nns 1 id:965697 attr:1549315582 dis:0.449609
      nns 2 id:137757 attr:1549310803 dis:0.4746
      nns 3 id:914372 attr:1549316996 dis:0.477559
      nns 4 id:808259 attr:1549285505 dis:0.480712
      nns 5 id:211569 attr:1549255285 dis:0.481805
      nns 6 id:266464 attr:1549317210 dis:0.488579
      nns 7 id:679863 attr:1549248426 dis:0.489044
      nns 8 id:104611 attr:1549317225 dis:0.491212
      nns 9 id:596352 attr:1549241818 dis:0.495878

[31.984 s] *** Query time: 0.512851
qps:19498.8
cmp per query:1000000
recall: 1 of course
sel distribution: 1 0 0 0 0 0 0 0 0 0 0 
selectivity: 0.00100101
finished base index examples
====================WRITING====================
==================WRITING DONE=================
[31.995 s] -----DONE-----
	Command being timed: "../faiss/build/demos/generate_groundtruth 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json 10 512"
	User time (seconds): 75.72
	System time (seconds): 3.83
	Percent of CPU this job got: 247%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:32.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4041728
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1515193
	Voluntary context switches: 324
	Involuntary context switches: 1231
	Swaps: 0
	File system inputs: 0
	File system outputs: 1600
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0


===============================================================================================================
START: generating groundtruth

N: 1000000
dataset: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
attr: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
query: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
qrange: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
output: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
topk: 10
dim: 512
start
[1.347 s] Loaded dataset, size=1000000, dim=512
[1.420 s] Loaded attr, size=1000000
[1.420 s] Loading query vectors and attributes
query vecs data loaded, with dim: 512, size=10000
[1.434 s] Loaded query vectors
[1.435 s] Loaded 10000 queries
====================Vectors====================

[28.712 s] Loading database
data loaded, with dim: 512, nb=1000000
[28.712 s] Indexing database, size 1000000*512 from max 1000000
[29.663 s] Adding the vectors to the index
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
====================INDEX====================
[29.759 s] Searching the 10 nearest neighbors of 10000 vectors in the index
here1
nn and dis size: 100000 100000
[55.859 s] Query results (vector ids, then distances):
query 0, qrange [1540574211, 1590004802]
      nns 0 id:727106 attr:1557359735 dis:0.62867
      nns 1 id:562528 attr:1586530455 dis:0.640719
      nns 2 id:247269 attr:1563268918 dis:0.675931
      nns 3 id:864174 attr:1586141206 dis:0.743074
      nns 4 id:64073 attr:1552081912 dis:0.759647
      nns 5 id:880422 attr:1565574478 dis:0.768696
      nns 6 id:297407 attr:1562582134 dis:0.77207
      nns 7 id:84548 attr:1557155880 dis:0.785718
      nns 8 id:316095 attr:1551987403 dis:0.787149
      nns 9 id:302187 attr:1566023840 dis:0.788031

query 1, qrange [1502815998, 1574739098]
      nns 0 id:741325 attr:1559616195 dis:0.0996124
      nns 1 id:666880 attr:1555641433 dis:0.100505
      nns 2 id:979250 attr:1523372340 dis:0.1007
      nns 3 id:622447 attr:1532959985 dis:0.102932
      nns 4 id:803332 attr:1530141155 dis:0.106259
      nns 5 id:427146 attr:1514695882 dis:0.106461
      nns 6 id:428754 attr:1560720094 dis:0.107467
      nns 7 id:110189 attr:1507487399 dis:0.109342
      nns 8 id:139424 attr:1535633696 dis:0.109739
      nns 9 id:284310 attr:1570817806 dis:0.111931

query 2, qrange [1565134124, 1606255797]
      nns 0 id:964377 attr:1605131892 dis:0.226265
      nns 1 id:306439 attr:1575579764 dis:0.237904
      nns 2 id:757728 attr:1605423787 dis:0.240495
      nns 3 id:75885 attr:1601934153 dis:0.256426
      nns 4 id:374226 attr:1576918189 dis:0.26283
      nns 5 id:71515 attr:1570882811 dis:0.263239
      nns 6 id:445298 attr:1589162214 dis:0.263825
      nns 7 id:771849 attr:1570744783 dis:0.265403
      nns 8 id:903106 attr:1586146246 dis:0.268205
      nns 9 id:792564 attr:1597961764 dis:0.271363

query 3, qrange [1564977898, 1606128091]
      nns 0 id:889987 attr:1593644784 dis:0.403229
      nns 1 id:783586 attr:1584449301 dis:0.409305
      nns 2 id:124464 attr:1588791594 dis:0.448711
      nns 3 id:640717 attr:1593715105 dis:0.455442
      nns 4 id:687871 attr:1584368476 dis:0.459873
      nns 5 id:595884 attr:1603585196 dis:0.462322
      nns 6 id:889856 attr:1574977953 dis:0.464965
      nns 7 id:306883 attr:1582504320 dis:0.476244
      nns 8 id:110113 attr:1584365036 dis:0.496151
      nns 9 id:456770 attr:1569878368 dis:0.496242

query 4, qrange [1486429184, 1570175082]
      nns 0 id:582698 attr:1557087889 dis:0.259985
      nns 1 id:959629 attr:1553076435 dis:0.29346
      nns 2 id:191044 attr:1542912543 dis:0.299727
      nns 3 id:46163 attr:1552605357 dis:0.299946
      nns 4 id:279888 attr:1555515184 dis:0.302924
      nns 5 id:700754 attr:1557101934 dis:0.304429
      nns 6 id:754904 attr:1532757000 dis:0.305476
      nns 7 id:68136 attr:1537086660 dis:0.305922
      nns 8 id:556169 attr:1553542108 dis:0.306526
      nns 9 id:231993 attr:1563749968 dis:0.306901

[55.860 s] *** Query time: 26.100020
qps:383.141
cmp per query:1000000
recall: 1 of course
sel distribution: 0 0 0 0 0 1 0 0 0 0 0 
selectivity: 0.500001
finished base index examples
====================WRITING====================
==================WRITING DONE=================
[55.868 s] -----DONE-----
	Command being timed: "../faiss/build/demos/generate_groundtruth 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json 10 512"
	User time (seconds): 2869.93
	System time (seconds): 70.23
	Percent of CPU this job got: 5248%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:56.02
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4041728
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3549780
	Voluntary context switches: 124489
	Involuntary context switches: 120980
	Swaps: 0
	File system inputs: 0
	File system outputs: 1600
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
