Start time: 08:39
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 60
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.799s ] Loaded metadata, 10000000 attr's found
[ 0.799s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.841s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.864s ] Loaded 10000 sift10M queries
[ 0.885s ] Loaded ground truth, gt_size: 10
[ 0.885s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.249s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 350.522s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1160663 (44937) 6005033 (44913) 4242378 (44889) 973062 (44888) 4500547 (44862) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	74292.000 107799.000 118326.000 127202.000 129320.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (42821, 42920): 4754171 (42830) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	85715.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (13165, 13264): 2858053 (13240) 6648054 (13203) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63217.000 88435.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (25839, 25938): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (45629, 45728): 5720716 (45669) 4922302 (45648) 54831 (45652) 4001518 (45702) 694166 (45697) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	113419.000 143175.000 145272.000 154121.000 159530.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 350.522s ] *** Query time: 18.642
qps: 536.415
 *** HNSW recall 
HNSW get 16905 postive res from 100000 results, recall@10:0.169
recall dist(10% per bucket): 0.180 0.301 0.281 0.155 0.062 0.018 0.004 0.001 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 32664424, average: 3266.442
finished ivfpq index examples
[ 350.524s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 60 128"
	User time (seconds): 328.91
	System time (seconds): 14.58
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:52.19
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 12919708
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 22
	Minor (reclaiming a frame) page faults: 3847336
	Voluntary context switches: 31367
	Involuntary context switches: 540
	Swaps: 0
	File system inputs: 612120
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:55
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 60
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.786s ] Loaded metadata, 10000000 attr's found
[ 0.786s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.840s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.868s ] Loaded 10000 sift10M queries
[ 0.901s ] Loaded ground truth, gt_size: 10
[ 0.901s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.160s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.002
[ 366.087s ] Query results (vector ids, then distances):
query 0 nn's (73960, 74159): 4876982 (74106) 285279 (74145) 7812315 (73982) 2256311 (73968) 6130081 (74110) 8881763 (74013) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	104530.000 107239.000 114444.000 134832.000 137304.000 160584.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (45733, 45932): 2405583 (45770) 7421974 (45803) 6516659 (45828) 2117666 (45818) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	93519.000 94765.000 101926.000 112181.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (46226, 46425): 4710184 (46391) 556056 (46411) 314327 (46231) 5716701 (46230) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	79760.000 84067.000 91351.000 106379.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (21965, 22164): 692217 (22063) 495406 (21968) 9975712 (22163) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7226.000 13063.000 33097.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (89198, 89397): 2430179 (89254) 5631902 (89204) 5139352 (89338) 3299147 (89237) 859658 (89265) 3745410 (89250) 2438379 (89219) 1064729 (89370) 5320611 (89222) 7138566 (89238) 
     dis: 	97998.000 103589.000 107793.000 109710.000 123364.000 124011.000 124152.000 129328.000 130026.000 130512.000 
[ 366.087s ] *** Query time: 27.971
qps: 357.514
 *** HNSW recall 
HNSW get 26609 postive res from 100000 results, recall@10:0.266
recall dist(10% per bucket): 0.060 0.174 0.260 0.231 0.158 0.076 0.032 0.009 0.002 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 32664424, average: 3266.442
finished ivfpq index examples
[ 366.089s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 60 128"
	User time (seconds): 337.49
	System time (seconds): 20.81
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:07.74
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17500024
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 26
	Minor (reclaiming a frame) page faults: 6178291
	Voluntary context switches: 35986
	Involuntary context switches: 655
	Swaps: 0
	File system inputs: 1348016
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:59
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 60
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.022s ] Loaded metadata, 10000000 attr's found
[ 1.022s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.043s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.045s ] Loaded 10000 sift10M queries
[ 1.073s ] Loaded ground truth, gt_size: 10
[ 1.073s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 18.369s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.003
[ 378.554s ] Query results (vector ids, then distances):
query 0 nn's (64204, 64503): 5343331 (64452) 4731099 (64368) 1638165 (64278) 6124488 (64233) 7673048 (64497) 6678280 (64349) 4820946 (64409) 2257120 (64375) 4124023 (64271) 3492806 (64402) 
     dis: 	81853.000 98772.000 98872.000 99965.000 103564.000 106234.000 108131.000 115844.000 121400.000 125222.000 
query 1 nn's (7601, 7900): 3996839 (7694) 6389334 (7761) 8499244 (7681) 5907695 (7756) 731305 (7865) 6801207 (7889) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	75371.000 83502.000 85032.000 94195.000 96744.000 120640.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (4420, 4719): 8635193 (4483) 909313 (4462) 9141083 (4718) 9830393 (4584) 7912354 (4692) 3969871 (4674) 2151355 (4617) 5840438 (4717) 1614298 (4457) -1 (0) 
     dis: 	57831.000 62187.000 62743.000 63969.000 69132.000 93319.000 95723.000 100304.000 115360.000 340282346638528859811704183484516925440.000 
query 3 nn's (3638, 3937): 7749958 (3697) 4463664 (3711) 2114046 (3654) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	8122.000 11014.000 21815.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (72580, 72879): 6158717 (72811) 7075411 (72662) 7888257 (72768) 6691644 (72777) 9562552 (72621) 9764449 (72874) 7026837 (72687) 6323291 (72675) 5622590 (72732) 6086458 (72805) 
     dis: 	115302.000 118466.000 119441.000 120773.000 120976.000 123712.000 124541.000 130562.000 132102.000 132918.000 
[ 378.554s ] *** Query time: 32.274
qps: 309.846
 *** HNSW recall 
HNSW get 33490 postive res from 100000 results, recall@10:0.335
recall dist(10% per bucket): 0.026 0.098 0.198 0.234 0.209 0.141 0.061 0.024 0.008 0.002 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 32664424, average: 3266.442
finished ivfpq index examples
[ 378.556s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 60 128"
	User time (seconds): 347.37
	System time (seconds): 22.65
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:20.54
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 22289316
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 7793699
	Voluntary context switches: 33273
	Involuntary context switches: 607
	Swaps: 0
	File system inputs: 127592
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 15:00
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 60
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.810s ] Loaded metadata, 10000000 attr's found
[ 0.810s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.813s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.826s ] Loaded 10000 sift10M queries
[ 0.853s ] Loaded ground truth, gt_size: 10
[ 0.853s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.955s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.004
[ 385.805s ] Query results (vector ids, then distances):
query 0 nn's (2310, 2709): 578867 (2476) 9823129 (2499) 5826792 (2456) 6472642 (2459) 3920237 (2407) 9391342 (2314) 6839864 (2554) 9251155 (2669) 6200676 (2595) 3614961 (2356) 
     dis: 	80841.000 90832.000 102086.000 102270.000 102318.000 110758.000 119015.000 120262.000 122259.000 122386.000 
query 1 nn's (23653, 24052): 5254261 (23886) 7856921 (23715) 4135481 (23704) 5778646 (23931) 7549805 (23912) 6951292 (24042) 7221755 (23715) 8704048 (23938) -1 (0) -1 (0) 
     dis: 	63867.000 80459.000 81010.000 89394.000 97946.000 103278.000 111567.000 123193.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (64025, 64424): 7454296 (64256) 6152369 (64329) 146605 (64307) 300585 (64354) 3114826 (64411) 7125336 (64229) 115933 (64306) -1 (0) -1 (0) -1 (0) 
     dis: 	62909.000 68420.000 73158.000 80511.000 89751.000 91002.000 95626.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (90236, 90635): 7119531 (90378) 936598 (90457) 3670440 (90255) 1423490 (90542) 8237128 (90475) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	8362.000 8643.000 13076.000 14419.000 18045.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (42274, 42673): 7360489 (42573) 1417456 (42485) 57612 (42612) 9409440 (42294) 2523545 (42527) 3276754 (42502) 7102407 (42359) 790860 (42347) 8912838 (42557) 2454484 (42665) 
     dis: 	101655.000 104284.000 116698.000 117144.000 123554.000 125257.000 130309.000 132942.000 139866.000 144240.000 
[ 385.805s ] *** Query time: 32.300
qps: 309.596
 *** HNSW recall 
HNSW get 38619 postive res from 100000 results, recall@10:0.386
recall dist(10% per bucket): 0.014 0.064 0.139 0.213 0.228 0.172 0.107 0.045 0.014 0.004 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 32664424, average: 3266.442
finished ivfpq index examples
[ 385.807s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 60 128"
	User time (seconds): 359.28
	System time (seconds): 19.66
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:28.04
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 26694556
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 15
	Minor (reclaiming a frame) page faults: 7160863
	Voluntary context switches: 39181
	Involuntary context switches: 780
	Swaps: 0
	File system inputs: 1165432
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 16:59
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 60
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.723s ] Loaded metadata, 10000000 attr's found
[ 0.723s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.726s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.759s ] Loaded 10000 sift10M queries
[ 0.807s ] Loaded ground truth, gt_size: 10
[ 0.807s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 15.483s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.005
[ 413.042s ] Query results (vector ids, then distances):
query 0 nn's (23240, 23739): 7011791 (23273) 7159863 (23367) 4838491 (23518) 5931273 (23547) 4625600 (23564) 775996 (23374) 1540424 (23616) 6581660 (23429) 7714933 (23524) 4558608 (23288) 
     dis: 	85235.000 101944.000 103381.000 106088.000 109173.000 109841.000 111426.000 112578.000 124644.000 131790.000 
query 1 nn's (86638, 87137): 7523342 (87042) 6363708 (86935) 5847833 (86661) 5234937 (86897) 1448692 (87058) 1009540 (86855) 8424131 (87050) 3440564 (86939) 6028805 (86733) -1 (0) 
     dis: 	69035.000 70710.000 75091.000 81577.000 84199.000 94501.000 106329.000 107511.000 121835.000 340282346638528859811704183484516925440.000 
query 2 nn's (3598, 4097): 8068558 (3605) 2953864 (3859) 2800256 (3943) 1482128 (3797) 1213154 (3674) 4378993 (3989) 1458512 (4014) 4192813 (3845) 9561862 (3620) 1617559 (3761) 
     dis: 	53350.000 57221.000 59276.000 64294.000 68386.000 69422.000 69585.000 71786.000 76564.000 86995.000 
query 3 nn's (87372, 87871): 7301436 (87758) 3872385 (87718) 7070340 (87603) 2334134 (87706) 5656355 (87722) 3041004 (87497) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7394.000 18686.000 18857.000 25134.000 28091.000 31624.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (77119, 77618): 2288117 (77366) 2890529 (77433) 2667975 (77541) 4876196 (77337) 4796353 (77267) 4008219 (77506) 3579927 (77143) 3184003 (77129) 1839148 (77313) 2155133 (77405) 
     dis: 	96597.000 112830.000 117822.000 118288.000 127137.000 128810.000 132667.000 133869.000 135063.000 137082.000 
[ 413.042s ] *** Query time: 42.493
qps: 235.333
 *** HNSW recall 
HNSW get 42849 postive res from 100000 results, recall@10:0.428
recall dist(10% per bucket): 0.008 0.041 0.105 0.183 0.217 0.205 0.138 0.070 0.025 0.007 0.001 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 32664424, average: 3266.442
finished ivfpq index examples
[ 413.044s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 60 128"
	User time (seconds): 383.79
	System time (seconds): 24.40
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:55.43
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 33192868
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 8924777
	Voluntary context switches: 33180
	Involuntary context switches: 595
	Swaps: 0
	File system inputs: 578664
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 18:58
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 60
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.208s ] Loaded metadata, 10000000 attr's found
[ 1.208s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.276s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.314s ] Loaded 10000 sift10M queries
[ 1.341s ] Loaded ground truth, gt_size: 10
[ 1.341s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 19.503s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.006
[ 435.734s ] Query results (vector ids, then distances):
query 0 nn's (53561, 54160): 4874759 (53601) 1973354 (53983) 8997084 (53636) 6423954 (54057) 1824932 (53679) 909713 (54019) 6574993 (53640) 1133171 (53906) 8560034 (53608) 5522731 (53863) 
     dis: 	99997.000 102342.000 102557.000 103724.000 104631.000 111553.000 112903.000 117022.000 119878.000 122004.000 
query 1 nn's (7537, 8136): 1346170 (8078) 9643506 (8041) 7572692 (7996) 4646465 (8091) 3996839 (7694) 8500402 (7579) 6389334 (7761) 8499244 (7681) 2844694 (8133) 5907695 (7756) 
     dis: 	56324.000 61991.000 74068.000 74141.000 75371.000 78635.000 83502.000 85032.000 86736.000 94195.000 
query 2 nn's (31990, 32589): 6757010 (32419) 1883447 (32456) 6005722 (32578) 8415105 (32282) 2414928 (32539) 4278769 (32271) 1819941 (32058) 8718032 (32466) 940456 (32376) 4379612 (32579) 
     dis: 	61808.000 63881.000 63923.000 67665.000 67775.000 68330.000 75819.000 77789.000 77952.000 81443.000 
query 3 nn's (20105, 20704): 3278687 (20238) 1391991 (20268) 5109723 (20631) 8386530 (20268) 430134 (20429) 2515467 (20181) 5385739 (20445) 2570611 (20240) 3517741 (20288) -1 (0) 
     dis: 	7183.000 9540.000 11444.000 11509.000 12043.000 12594.000 17784.000 21236.000 24828.000 340282346638528859811704183484516925440.000 
query 4 nn's (25090, 25689): 3629848 (25458) 139002 (25306) 2325088 (25145) 6383103 (25429) 6987996 (25327) 8512826 (25530) 2988914 (25328) 2736888 (25314) 8710304 (25320) 3933467 (25137) 
     dis: 	98130.000 106444.000 113909.000 113991.000 120332.000 125579.000 129054.000 129596.000 130206.000 130406.000 
[ 435.734s ] *** Query time: 53.444
qps: 187.113
 *** HNSW recall 
HNSW get 46492 postive res from 100000 results, recall@10:0.465
recall dist(10% per bucket): 0.005 0.026 0.079 0.149 0.214 0.213 0.162 0.100 0.040 0.009 0.002 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 32664424, average: 3266.442
finished ivfpq index examples
[ 435.736s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 60 128"
	User time (seconds): 396.59
	System time (seconds): 30.59
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:18.37
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 36318364
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 22
	Minor (reclaiming a frame) page faults: 10817520
	Voluntary context switches: 30473
	Involuntary context switches: 648
	Swaps: 0
	File system inputs: 1132672
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
