Start time: 08:39
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.803s ] Loaded metadata, 10000000 attr's found
[ 0.803s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.841s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.864s ] Loaded 10000 sift10M queries
[ 0.883s ] Loaded ground truth, gt_size: 10
[ 0.883s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.269s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 345.269s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1160663 (44937) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	74292.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (42821, 42920): 4754171 (42830) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	85715.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (13165, 13264): 2858053 (13240) 6648054 (13203) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63217.000 88435.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (25839, 25938): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (45629, 45728): 5720716 (45669) 4922302 (45648) 54831 (45652) 694166 (45697) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	113419.000 143175.000 145272.000 159530.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 345.269s ] *** Query time: 10.878
qps: 919.254
 *** HNSW recall 
HNSW get 7547 postive res from 100000 results, recall@10:0.075
recall dist(10% per bucket): 0.469 0.352 0.140 0.033 0.006 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12138477, average: 1213.848
finished ivfpq index examples
[ 345.270s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 128"
	User time (seconds): 323.70
	System time (seconds): 14.23
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:46.60
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 12917656
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 24
	Minor (reclaiming a frame) page faults: 3375895
	Voluntary context switches: 30868
	Involuntary context switches: 526
	Swaps: 0
	File system inputs: 1289888
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:55
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.786s ] Loaded metadata, 10000000 attr's found
[ 0.786s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.841s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.868s ] Loaded 10000 sift10M queries
[ 0.901s ] Loaded ground truth, gt_size: 10
[ 0.901s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.144s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.002
[ 352.304s ] Query results (vector ids, then distances):
query 0 nn's (73960, 74159): 285279 (74145) 7812315 (73982) 6130081 (74110) 8881763 (74013) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	107239.000 114444.000 137304.000 160584.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (45733, 45932): 2405583 (45770) 6516659 (45828) 2117666 (45818) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	93519.000 101926.000 112181.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (46226, 46425): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (21965, 22164): 692217 (22063) 495406 (21968) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7226.000 13063.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (89198, 89397): 5631902 (89204) 5139352 (89338) 3299147 (89237) 859658 (89265) 3745410 (89250) 1064729 (89370) 7138566 (89238) 3388662 (89327) 6569673 (89311) -1 (0) 
     dis: 	103589.000 107793.000 109710.000 123364.000 124011.000 129328.000 130512.000 132329.000 144063.000 340282346638528859811704183484516925440.000 
[ 352.304s ] *** Query time: 14.800
qps: 675.689
 *** HNSW recall 
HNSW get 12387 postive res from 100000 results, recall@10:0.124
recall dist(10% per bucket): 0.282 0.370 0.218 0.094 0.028 0.006 0.001 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12138477, average: 1213.848
finished ivfpq index examples
[ 352.305s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 128"
	User time (seconds): 330.56
	System time (seconds): 14.22
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:54.15
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17500068
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 27
	Minor (reclaiming a frame) page faults: 4747579
	Voluntary context switches: 36479
	Involuntary context switches: 517
	Swaps: 0
	File system inputs: 713632
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:59
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.022s ] Loaded metadata, 10000000 attr's found
[ 1.022s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.044s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.046s ] Loaded 10000 sift10M queries
[ 1.074s ] Loaded ground truth, gt_size: 10
[ 1.074s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 18.377s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.003
[ 368.296s ] Query results (vector ids, then distances):
query 0 nn's (64204, 64503): 4731099 (64368) 7673048 (64497) 6678280 (64349) 3492806 (64402) 6195250 (64256) 8883354 (64301) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	98772.000 103564.000 106234.000 125222.000 126271.000 130939.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (7601, 7900): 5907695 (7756) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	94195.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (4420, 4719): 8635193 (4483) 909313 (4462) 9141083 (4718) 9830393 (4584) 5840438 (4717) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	57831.000 62187.000 62743.000 63969.000 100304.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (3638, 3937): 7749958 (3697) 4463664 (3711) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	8122.000 11014.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (72580, 72879): 7075411 (72662) 6691644 (72777) 6323291 (72675) 5186764 (72800) 1421684 (72854) 4264057 (72590) 1706104 (72700) 7058034 (72704) -1 (0) -1 (0) 
     dis: 	118466.000 120773.000 130562.000 133173.000 139543.000 165011.000 176410.000 182365.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 368.296s ] *** Query time: 21.398
qps: 467.339
 *** HNSW recall 
HNSW get 16170 postive res from 100000 results, recall@10:0.162
recall dist(10% per bucket): 0.186 0.325 0.275 0.139 0.053 0.017 0.003 0.001 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12138477, average: 1213.848
finished ivfpq index examples
[ 368.298s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 128"
	User time (seconds): 343.26
	System time (seconds): 16.59
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:10.02
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 22290344
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 5967234
	Voluntary context switches: 30855
	Involuntary context switches: 688
	Swaps: 0
	File system inputs: 35368
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 15:00
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.787s ] Loaded metadata, 10000000 attr's found
[ 0.787s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.813s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.826s ] Loaded 10000 sift10M queries
[ 0.855s ] Loaded ground truth, gt_size: 10
[ 0.855s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.955s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.004
[ 387.706s ] Query results (vector ids, then distances):
query 0 nn's (2310, 2709): 578867 (2476) 5826792 (2456) 6472642 (2459) 9391342 (2314) 6839864 (2554) 9251155 (2669) 6200676 (2595) 7766432 (2568) -1 (0) -1 (0) 
     dis: 	80841.000 102086.000 102270.000 110758.000 119015.000 120262.000 122259.000 132363.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (23653, 24052): 5254261 (23886) 4135481 (23704) 8704048 (23938) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63867.000 81010.000 123193.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (64025, 64424): 7454296 (64256) 146605 (64307) 3114826 (64411) 7125336 (64229) 115933 (64306) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	62909.000 73158.000 89751.000 91002.000 95626.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (90236, 90635): 7119531 (90378) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	8362.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (42274, 42673): 1417456 (42485) 2523545 (42527) 8912838 (42557) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	104284.000 123554.000 139866.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 387.706s ] *** Query time: 32.621
qps: 306.549
 *** HNSW recall 
HNSW get 19398 postive res from 100000 results, recall@10:0.194
recall dist(10% per bucket): 0.135 0.276 0.280 0.184 0.088 0.029 0.009 0.001 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12138477, average: 1213.848
finished ivfpq index examples
[ 387.708s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 128"
	User time (seconds): 356.24
	System time (seconds): 24.78
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:30.12
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 26692416
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 17
	Minor (reclaiming a frame) page faults: 8252050
	Voluntary context switches: 39209
	Involuntary context switches: 768
	Swaps: 0
	File system inputs: 722472
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 16:59
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.723s ] Loaded metadata, 10000000 attr's found
[ 0.723s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.726s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.759s ] Loaded 10000 sift10M queries
[ 0.807s ] Loaded ground truth, gt_size: 10
[ 0.807s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 15.506s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.005
[ 421.606s ] Query results (vector ids, then distances):
query 0 nn's (23240, 23739): 7011791 (23273) 7159863 (23367) 4838491 (23518) 4625600 (23564) 775996 (23374) 1540424 (23616) 6581660 (23429) 4558608 (23288) 575835 (23629) 3617730 (23606) 
     dis: 	85235.000 101944.000 103381.000 109173.000 109841.000 111426.000 112578.000 131790.000 135390.000 136975.000 
query 1 nn's (86638, 87137): 6363708 (86935) 5847833 (86661) 5234937 (86897) 1009540 (86855) 8424131 (87050) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	70710.000 75091.000 81577.000 94501.000 106329.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (3598, 4097): 8068558 (3605) 2953864 (3859) 2800256 (3943) 1213154 (3674) 4378993 (3989) 1617559 (3761) 6966779 (3917) 8383547 (3723) -1 (0) -1 (0) 
     dis: 	53350.000 57221.000 59276.000 68386.000 69422.000 86995.000 90594.000 109304.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (87372, 87871): 7301436 (87758) 3872385 (87718) 5656355 (87722) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7394.000 18686.000 28091.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (77119, 77618): 2890529 (77433) 4008219 (77506) 3579927 (77143) 7693488 (77489) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	112830.000 128810.000 132667.000 137783.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 421.606s ] *** Query time: 52.342
qps: 191.052
 *** HNSW recall 
HNSW get 21930 postive res from 100000 results, recall@10:0.219
recall dist(10% per bucket): 0.102 0.238 0.280 0.208 0.110 0.045 0.013 0.003 0.001 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12138477, average: 1213.848
finished ivfpq index examples
[ 421.609s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 128"
	User time (seconds): 377.60
	System time (seconds): 39.33
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:04.41
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 33192864
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 15270805
	Voluntary context switches: 33756
	Involuntary context switches: 836
	Swaps: 0
	File system inputs: 870592
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 18:58
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.208s ] Loaded metadata, 10000000 attr's found
[ 1.208s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.276s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.313s ] Loaded 10000 sift10M queries
[ 1.340s ] Loaded ground truth, gt_size: 10
[ 1.340s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 19.496s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.006
[ 431.484s ] Query results (vector ids, then distances):
query 0 nn's (53561, 54160): 8997084 (53636) 6423954 (54057) 1824932 (53679) 6574993 (53640) 1133171 (53906) 8560034 (53608) 4021860 (53926) 3491937 (54018) 6118860 (53942) 7103964 (53616) 
     dis: 	102557.000 103724.000 104631.000 112903.000 117022.000 119878.000 122394.000 125993.000 132353.000 142515.000 
query 1 nn's (7537, 8136): 9643506 (8041) 7572692 (7996) 4646465 (8091) 8500402 (7579) 5907695 (7756) 9519753 (7982) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	61991.000 74068.000 74141.000 78635.000 94195.000 95220.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (31990, 32589): 1883447 (32456) 8415105 (32282) 2447075 (32402) 9436837 (32320) 4055488 (32056) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63881.000 67665.000 82983.000 93941.000 97485.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20105, 20704): 3278687 (20238) 1391991 (20268) 8386530 (20268) 2515467 (20181) 2570611 (20240) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7183.000 9540.000 11509.000 12594.000 21236.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (25090, 25689): 2325088 (25145) 6987996 (25327) 8512826 (25530) 2988914 (25328) 2736888 (25314) 8710304 (25320) 3933467 (25137) 3531169 (25434) 3851402 (25318) -1 (0) 
     dis: 	113909.000 120332.000 125579.000 129054.000 129596.000 130206.000 130406.000 138225.000 146665.000 340282346638528859811704183484516925440.000 
[ 431.484s ] *** Query time: 47.234
qps: 211.714
 *** HNSW recall 
HNSW get 24136 postive res from 100000 results, recall@10:0.241
recall dist(10% per bucket): 0.079 0.209 0.265 0.228 0.134 0.061 0.019 0.004 0.001 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12138477, average: 1213.848
finished ivfpq index examples
[ 431.486s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_random_40_1000 20 128"
	User time (seconds): 392.91
	System time (seconds): 29.91
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:14.32
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 36315428
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 15
	Minor (reclaiming a frame) page faults: 10773033
	Voluntary context switches: 31721
	Involuntary context switches: 854
	Swaps: 0
	File system inputs: 153856
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
