Start time: 19:19
Start time: 20:49
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.376s ] Loaded metadata, 20000000 attr's found
[ 1.376s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.379s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.381s ] Loaded 10000 spacev10m queries
[ 1.389s ] Loaded ground truth, gt_size: 10
[ 1.389s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.606s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 535.628s ] Query results (vector ids, then distances):
query 0 nn's (6, 738, 84079): 1300400 (10) 8023016 (6) 2436347 (77252) 425302 (6) 3647719 (65816) 5060242 (10) 8021837 (33136) 8207046 (10) 1714233 (17813) 7099403 (46849) 
     dis: 	3451.792 4690.926 5087.593 5217.498 5457.437 6061.578 6236.472 6248.709 6417.146 6432.375 
query 1 nn's (6, 14047, 97384): 7672609 (64506) 8108335 (49439) 3545414 (10) 6716785 (84547) 4465136 (10) 3010609 (46874) 6957767 (49327) 1852123 (51656) 8784659 (52306) 547651 (13056) 
     dis: 	5828.070 6440.204 7509.891 7593.169 7832.273 8391.524 8421.104 8714.764 8765.226 9004.402 
query 2 nn's (6, 2536, 85887): 5189301 (39255) 2755608 (6) 8672246 (6) 7542827 (68034) 2966676 (6) 5193386 (6) 1163082 (10) 2096002 (6) 9964310 (10) 9561351 (95758) 
     dis: 	3383.687 5151.526 6280.505 6856.801 7162.279 7401.517 7548.316 7653.282 8232.525 8304.261 
query 3 nn's (6, 6261, 89602): 1208824 (10) 1165548 (240) 1153720 (10) 9922446 (19) 1681561 (47276) 2871407 (53815) 4150154 (20) 9732223 (29802) 8906949 (25547) 7371232 (6) 
     dis: 	7734.653 7868.146 8343.044 8379.474 8437.070 8743.284 8779.334 8900.137 8931.419 9248.313 
query 4 nn's (6, 4810, 88155): 8316529 (64156) 5624462 (6) 3987492 (6) 1706143 (74584) 9970746 (10) 9323555 (92467) 9211260 (6) 4549236 (423) 4390138 (6) 9052024 (10) 
     dis: 	2200.067 3592.018 3754.258 4565.575 5232.411 5444.871 5811.854 5835.722 5974.076 5982.784 
[ 535.628s ] *** Query time: 15.566
qps: 642.420
 *** ivfpq recall 
ivfpq get 71695 postive res from 100000 results, recall@10:0.717
recall dist(10% per bucket): 0.012 0.025 0.036 0.053 0.061 0.070 0.089 0.103 0.131 0.192 0.230 
finished ivfpq index examples
[ 535.630s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 10 100"
	User time (seconds): 532.02
	System time (seconds): 3.79
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:55.83
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2431908
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1215225
	Voluntary context switches: 0
	Involuntary context switches: 733
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 21:38
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.374s ] Loaded metadata, 20000000 attr's found
[ 1.374s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.376s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.379s ] Loaded 10000 spacev10m queries
[ 1.386s ] Loaded ground truth, gt_size: 10
[ 1.386s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.599s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 493.468s ] Query results (vector ids, then distances):
query 0 nn's (10, 3924, 37259): 5096505 (9625) 290760 (6) 3082748 (6) 2037978 (10) 1360571 (80630) 7305168 (6) 1858226 (10) 4287666 (6) 6240106 (6) 9234384 (6) 
     dis: 	6160.498 6278.234 6912.179 7727.770 7775.480 7796.184 8437.510 8505.412 8817.863 9082.562 
query 1 nn's (10, 9720, 43052): 1027770 (10) 4573755 (44328) 1087257 (20765) 9311189 (14848) 7957281 (57347) 4561316 (10) 5325898 (10) 5642421 (72495) 3171582 (20) 3730938 (10) 
     dis: 	4900.294 7778.962 8504.258 10192.278 10204.871 10290.205 10493.963 10691.302 10739.775 10775.303 
query 2 nn's (10, 65731, 99055): 4574760 (6) 2734445 (62180) 3524579 (72890) 2212807 (72328) 2884416 (6) 3361974 (6) 323907 (85292) 4517312 (6) 6794035 (99007) 7037734 (6) 
     dis: 	3037.224 4128.249 5012.328 6225.845 8934.234 9248.015 9264.332 10462.508 10667.146 10723.768 
query 3 nn's (10, 35398, 68747): 4286832 (6) 1866926 (10) 4371036 (10) 9455216 (10) 6638511 (98660) 8818246 (244) 9398930 (10) 8584054 (6) 6447414 (6) 9793596 (6) 
     dis: 	4919.051 9213.961 9416.685 9468.189 9663.204 10132.153 10182.354 10461.397 10493.938 10579.027 
query 4 nn's (10, 39745, 73096): 6279473 (10230) 7159963 (62873) 3531751 (91022) 8728294 (6) 7177846 (6) 9600067 (19686) 717371 (22576) 1549949 (20503) 9357339 (52719) 7986656 (6) 
     dis: 	6069.213 6531.316 6875.700 6878.477 7002.879 7122.453 7239.672 7385.746 7391.013 7426.277 
[ 493.468s ] *** Query time: 11.303
qps: 884.749
 *** ivfpq recall 
ivfpq get 66530 postive res from 100000 results, recall@10:0.665
recall dist(10% per bucket): 0.015 0.033 0.044 0.064 0.078 0.091 0.101 0.112 0.134 0.166 0.161 
finished ivfpq index examples
[ 493.471s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 10 100"
	User time (seconds): 489.97
	System time (seconds): 3.68
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:13.66
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2432932
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1168402
	Voluntary context switches: 1
	Involuntary context switches: 544
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:07
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.378s ] Loaded metadata, 20000000 attr's found
[ 1.378s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.381s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.383s ] Loaded 10000 spacev10m queries
[ 1.391s ] Loaded ground truth, gt_size: 10
[ 1.391s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.622s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 163.571s ] Query results (vector ids, then distances):
query 0 nn's (19, 24678, 44673): 606211 (23188) 8563527 (92278) 8341867 (22135) 1247229 (31426) 7386818 (6) 5099788 (10) 1295714 (6) 3478005 (74388) 6401363 (71983) 2939481 (89029) 
     dis: 	5289.615 9552.178 9558.711 10041.604 10672.711 11549.822 11899.227 12080.354 12171.408 12633.062 
query 1 nn's (19, 22162, 42151): 7629371 (73090) 7000075 (41024) 9910036 (6) 9504433 (45209) 4745747 (58200) 8597183 (51106) 299136 (10) 6704562 (10) 917900 (10) 6889844 (6) 
     dis: 	11462.951 11665.045 12335.292 12472.165 12577.787 12818.771 12928.420 13235.133 13926.976 14244.695 
query 2 nn's (19, 17210, 37204): 8553474 (6) 3159516 (6) 9752287 (16218) 7408620 (10) 3688345 (14406) 2659846 (6) 9101297 (817) 3730180 (6) 1562549 (50932) 1612308 (10) 
     dis: 	11953.891 12206.623 13664.190 14000.630 14023.646 14093.936 14388.593 14392.973 14405.043 14464.764 
query 3 nn's (19, 37494, 57500): 3279722 (10) 233485 (63137) 3624059 (10908) 8298687 (74835) 3228780 (10) 7061054 (6) 4112389 (84823) 5944039 (39919) 5835892 (6) 9798183 (6266) 
     dis: 	11934.662 12255.984 12583.368 12916.988 13487.640 13670.456 13695.109 14318.245 14461.484 14490.291 
query 4 nn's (19, 12989, 32993): 6527555 (13143) 449527 (71436) 1444782 (20) 2066916 (10) 6871337 (3258) 821831 (11843) 3498846 (10) 1210319 (64652) 3908403 (12127) 990595 (23233) 
     dis: 	6296.200 6766.941 6826.149 6887.528 7687.899 7969.838 8165.363 8328.854 8341.210 8472.323 
[ 163.571s ] *** Query time: 10.954
qps: 912.877
 *** ivfpq recall 
ivfpq get 51092 postive res from 100000 results, recall@10:0.511
recall dist(10% per bucket): 0.036 0.076 0.092 0.103 0.113 0.123 0.117 0.113 0.101 0.081 0.043 
finished ivfpq index examples
[ 163.573s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 10 100"
	User time (seconds): 160.13
	System time (seconds): 3.68
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:43.82
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2432936
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1109100
	Voluntary context switches: 2
	Involuntary context switches: 228
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:26
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json
[ 1.373s ] Loaded metadata, 20000000 attr's found
[ 1.373s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.375s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.378s ] Loaded 10000 spacev10m queries
[ 1.385s ] Loaded ground truth, gt_size: 10
[ 1.385s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.592s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 135.907s ] Query results (vector ids, then distances):
query 0 nn's (20, 85697, 88856): 3057373 (86186) 7475967 (84477) 5237521 (96133) 1600063 (43162) 6387426 (10) 418222 (10) 5717626 (10) 4518335 (16240) -1 (0) -1 (0) 
     dis: 	8835.171 15573.080 17420.846 19634.393 20011.285 22963.111 24686.688 26007.547 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 52898, 56067): 7847812 (6) 7849684 (6) 2019460 (6) 3186430 (10) 9155140 (6) 9806159 (60121) 5768866 (6) 9829650 (6) 790881 (36585) -1 (0) 
     dis: 	13779.709 14708.741 14981.693 15489.080 16200.655 16492.754 17148.672 19428.512 20445.562 340282346638528859811704183484516925440.000 
query 2 nn's (20, 19737, 22901): 8478879 (13282) 9216945 (74811) 1113387 (52292) 5604082 (10) 9537812 (10) 4771075 (78497) 4958084 (6) 2138056 (10) 1832615 (95769) 2159560 (10) 
     dis: 	7585.806 13972.178 14283.449 15063.672 16322.169 17164.684 17259.023 18013.652 18388.891 19323.426 
query 3 nn's (20, 68111, 71276): 8996573 (21462) 583076 (6) 9191656 (10) 7567670 (6) 6930154 (6) 418281 (72324) 940134 (6) 4464077 (27800) 2931895 (37535) 7938668 (19) 
     dis: 	15430.463 16420.670 16485.033 16573.590 16965.426 17135.520 17477.016 17755.668 21231.766 22343.244 
query 4 nn's (20, 51785, 54951): 3869392 (10) 4660210 (10) 44630 (10) 7198038 (10) 1682560 (10) 7784457 (99026) 3884977 (4355) 9715918 (6) 3728640 (6) 3772991 (65535) 
     dis: 	10464.345 10844.311 11038.455 11231.960 11492.037 12052.121 12415.744 12463.707 12847.582 13264.809 
[ 135.907s ] *** Query time: 8.962
qps: 1115.865
 *** ivfpq recall 
ivfpq get 24741 postive res from 100000 results, recall@10:0.247
recall dist(10% per bucket): 0.140 0.208 0.211 0.171 0.128 0.075 0.041 0.018 0.007 0.001 0.001 
finished ivfpq index examples
[ 135.908s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_100000_random_100 10 100"
	User time (seconds): 134.47
	System time (seconds): 1.62
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:16.10
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2432936
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 638483
	Voluntary context switches: 1
	Involuntary context switches: 93
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
