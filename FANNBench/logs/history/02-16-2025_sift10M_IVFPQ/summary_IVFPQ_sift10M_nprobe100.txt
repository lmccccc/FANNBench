Start time: 00:48
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.720s ] Loaded metadata, 10000000 attr's found
[ 0.720s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.723s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.725s ] Loaded 10000 sift10M queries
[ 0.732s ] Loaded ground truth, gt_size: 10
[ 0.732s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.213s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 93.014s ] Query results (vector ids, then distances):
query 0 nn's (66811, 67810): 8403027 (67450) 952297 (66888) 2260181 (67765) 8710437 (67666) 4173863 (67608) 9378841 (67272) 7733897 (67571) 4910821 (67040) 962371 (66952) 2620182 (67682) 
     dis: 	87254.633 90515.289 90954.016 91246.234 91532.055 93027.445 93534.773 93942.539 94280.648 94517.977 
query 1 nn's (80229, 81228): 5838578 (80325) 9900713 (80753) 8549337 (81124) 509915 (81217) 5424055 (81172) 8032969 (80529) 9294765 (80557) 2765204 (81025) 5666656 (80815) 6225217 (80943) 
     dis: 	68088.328 72392.242 75413.578 76671.578 80824.195 81500.852 81630.602 82233.789 83980.414 85266.289 
query 2 nn's (89717, 90716): 5727909 (90490) 515037 (90656) 5709226 (90258) 4112561 (89860) 86206 (89955) 7466107 (89787) 1380491 (90138) 4347309 (90358) 8860131 (89804) 5406339 (90424) 
     dis: 	60198.082 60581.570 60608.613 61197.766 63730.004 63986.961 65590.062 66203.227 66405.414 67515.812 
query 3 nn's (6838, 7837): 840086 (7034) 6281603 (7047) 1180726 (6952) 7890747 (7446) 493857 (7268) 8089617 (7268) 9231939 (6869) 8618960 (7556) 907443 (6923) 8701088 (6988) 
     dis: 	8386.378 9081.689 11529.166 12690.019 12971.577 13302.149 13524.174 14774.678 15346.053 15652.222 
query 4 nn's (76228, 77227): 6614365 (76756) 6531232 (76299) 6221821 (76784) 608851 (76588) 1776999 (76473) 3136966 (76552) 9294532 (76726) 6556006 (76613) 86508 (76949) 4183967 (76467) 
     dis: 	103593.227 106967.109 108749.773 109201.258 111372.148 111424.172 112275.758 112440.086 112486.773 113577.117 
[ 93.014s ] *** Query time: 29.224
qps: 342.186
 *** ivfpq recall 
ivfpq get 83588 postive res from 100000 results, recall@10:0.836
recall dist(10% per bucket): 0.000 0.000 0.001 0.003 0.011 0.024 0.054 0.116 0.247 0.369 0.175 
finished ivfpq index examples
[ 93.015s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 91.95
	System time (seconds): 1.17
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:33.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1587100
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 411150
	Voluntary context switches: 3
	Involuntary context switches: 112
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:50
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.717s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.719s ] Loaded 10000 sift10M queries
[ 0.726s ] Loaded ground truth, gt_size: 10
[ 0.726s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.200s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.020
[ 97.047s ] Query results (vector ids, then distances):
query 0 nn's (21700, 23699): 1167995 (22866) 8435256 (22283) 447965 (21988) 7011791 (23273) 4897568 (21711) 242725 (22773) 4218358 (21713) 3955364 (22508) 2894606 (22434) 8944989 (22466) 
     dis: 	71651.016 81425.648 83733.109 83768.516 85006.203 85041.883 85072.000 86920.211 87147.539 88868.867 
query 1 nn's (36760, 38759): 9537422 (38205) 7807906 (37732) 8168664 (37262) 1590116 (38677) 7336097 (38112) 7280092 (37794) 7898479 (37255) 9388707 (37274) 8224421 (38509) 4389334 (38315) 
     dis: 	54862.301 66006.016 66215.297 68335.234 68409.305 70825.586 71592.047 72185.273 72535.383 72794.523 
query 2 nn's (61077, 63076): 2795236 (62148) 9068473 (62147) 4433607 (61698) 8198272 (61501) 7685482 (62295) 7168507 (61488) 4542872 (61400) 8333106 (61471) 5715023 (62436) 3224964 (61887) 
     dis: 	52135.250 52601.242 55301.043 55552.156 57530.480 57686.258 58384.785 58708.711 59457.438 59812.055 
query 3 nn's (90892, 92891): 5224964 (92235) 2112048 (90994) 8643637 (91536) 6306155 (92517) 1874032 (91903) 6711509 (92233) 596430 (91870) 3628986 (91756) 9940602 (92757) 6129273 (92094) 
     dis: 	6623.638 7541.135 9270.641 9869.879 10128.482 10494.709 10654.918 11332.477 11794.599 11895.970 
query 4 nn's (57033, 59032): 7603300 (57407) 2045614 (57740) 2779329 (58761) 4750135 (57127) 3671814 (57552) 1595103 (57260) 2704497 (57643) 6206858 (57233) 8573587 (58920) 9981439 (58274) 
     dis: 	88149.812 95383.633 96487.570 96575.672 97270.305 100143.312 100402.180 102759.562 104501.445 106213.430 
[ 97.048s ] *** Query time: 31.093
qps: 321.615
 *** ivfpq recall 
ivfpq get 84825 postive res from 100000 results, recall@10:0.848
recall dist(10% per bucket): 0.000 0.000 0.000 0.002 0.005 0.018 0.043 0.106 0.246 0.398 0.182 
finished ivfpq index examples
[ 97.048s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 96.01
	System time (seconds): 1.20
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:37.22
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589156
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 411204
	Voluntary context switches: 1
	Involuntary context switches: 205
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:52
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.720s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.721s ] Loaded 10000 sift10M queries
[ 0.729s ] Loaded ground truth, gt_size: 10
[ 0.729s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.201s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.030
[ 98.437s ] Query results (vector ids, then distances):
query 0 nn's (54121, 57120): 77153 (55251) 1077702 (54735) 4294175 (55347) 7912999 (56114) 1891236 (55041) 5001655 (54619) 9906463 (54872) 3474811 (56942) 3049131 (56789) 434737 (55269) 
     dis: 	79996.469 80161.422 82223.031 84291.852 84974.242 85351.008 85494.734 85938.086 87166.156 88370.242 
query 1 nn's (82364, 85363): 5271910 (85162) 109736 (83008) 5796685 (85349) 3419918 (85008) 9329945 (82932) 4365144 (85163) 801963 (83162) 3738992 (82987) 7582671 (84196) 2773940 (83061) 
     dis: 	53240.984 65643.906 67248.070 70878.383 70886.094 71213.453 72336.875 72680.203 72749.453 72827.633 
query 2 nn's (6232, 9231): 2098752 (8636) 2247452 (7760) 3028 (7303) 5035303 (8748) 6406531 (7309) 7052809 (7125) 6643296 (6465) 6530405 (8619) 3219057 (8835) 9878343 (8761) 
     dis: 	54350.836 59689.031 61322.840 63087.426 63929.898 64783.969 65248.402 65323.816 65430.852 65578.742 
query 3 nn's (13459, 16458): 5240529 (13962) 8702151 (15242) 2659564 (13521) 8323731 (15263) 9469929 (15648) 175293 (16164) 7259842 (14770) 9056511 (15778) 6098062 (14671) 583811 (15788) 
     dis: 	8227.946 8598.271 9123.775 9301.241 9884.258 10660.710 11093.337 11324.514 11392.636 11713.005 
query 4 nn's (29851, 32850): 6203168 (30151) 163735 (30172) 745843 (31043) 1838616 (30045) 6887757 (32792) 571010 (30350) 5113718 (30560) 2724195 (30149) 4777772 (31591) 8527101 (31941) 
     dis: 	89589.109 95422.609 96408.789 96918.578 97323.992 97882.281 101868.438 102102.359 102809.203 103000.648 
[ 98.437s ] *** Query time: 32.089
qps: 311.629
 *** ivfpq recall 
ivfpq get 85251 postive res from 100000 results, recall@10:0.853
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.004 0.013 0.039 0.102 0.249 0.417 0.175 
finished ivfpq index examples
[ 98.438s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 97.39
	System time (seconds): 1.15
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:38.55
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589160
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 475861
	Voluntary context switches: 1
	Involuntary context switches: 140
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:55
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.716s ] Loaded metadata, 10000000 attr's found
[ 0.716s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.719s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.721s ] Loaded 10000 sift10M queries
[ 0.728s ] Loaded ground truth, gt_size: 10
[ 0.728s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.202s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.040
[ 99.509s ] Query results (vector ids, then distances):
query 0 nn's (15498, 19497): 1928425 (16367) 9251169 (17058) 3670000 (15943) 4770231 (18286) 2051236 (18470) 3938476 (17749) 4271011 (16541) 3384323 (18456) 9237550 (19315) 4532213 (19173) 
     dis: 	77713.047 80605.602 82147.250 83576.320 85129.227 85543.109 85699.297 85947.086 86161.984 87622.055 
query 1 nn's (2732, 6731): 522429 (5866) 3652305 (4075) 4757479 (5394) 7143179 (6423) 4702839 (5233) 9815150 (5696) 4493346 (4800) 561862 (3516) 8401639 (5235) 3744772 (4074) 
     dis: 	52287.395 55657.660 56844.254 57247.051 58443.680 58473.879 58820.164 59198.414 60716.141 61224.898 
query 2 nn's (12481, 16480): 4021389 (14109) 1878319 (14518) 764856 (15554) 6856614 (13752) 27015 (15961) 596128 (12783) 2653893 (12489) 483758 (16444) 2941954 (14801) 2043069 (13685) 
     dis: 	56460.441 57470.113 58829.391 59745.781 60385.477 61580.727 61872.570 62133.547 62230.922 62423.500 
query 3 nn's (90049, 94048): 1911911 (93967) 5224964 (92235) 2112048 (90994) 7119531 (90378) 2236726 (90758) 936598 (90457) 8643637 (91536) 6306155 (92517) 1874032 (91903) 6711509 (92233) 
     dis: 	6174.690 6623.638 7541.135 7965.099 8279.927 8999.791 9270.641 9869.879 10128.482 10494.709 
query 4 nn's (10695, 14694): 6062843 (12948) 1850409 (13113) 2320565 (13088) 8229155 (13394) 1903346 (13317) 4831136 (13574) 4812723 (14314) 5641404 (11159) 4483878 (14330) 3355354 (13709) 
     dis: 	83626.516 88166.188 90646.469 92516.812 94277.891 96195.664 98681.711 99979.609 99979.656 100047.930 
[ 99.509s ] *** Query time: 33.715
qps: 296.604
 *** ivfpq recall 
ivfpq get 85377 postive res from 100000 results, recall@10:0.854
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.004 0.010 0.035 0.105 0.256 0.420 0.170 
finished ivfpq index examples
[ 99.511s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 97.03
	System time (seconds): 2.58
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:39.62
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589152
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 808320
	Voluntary context switches: 1
	Involuntary context switches: 229
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:57
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.721s ] Loaded metadata, 10000000 attr's found
[ 0.721s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.724s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.726s ] Loaded 10000 sift10M queries
[ 0.733s ] Loaded ground truth, gt_size: 10
[ 0.733s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.194s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.050
[ 99.622s ] Query results (vector ids, then distances):
query 0 nn's (40485, 45484): 1160663 (44937) 9397776 (41815) 1835932 (42846) 3255720 (45053) 331007 (42101) 1665852 (42722) 2365415 (44282) 476293 (42096) 8838842 (42249) 2913895 (40741) 
     dis: 	75556.305 77291.453 79829.141 81607.492 84183.234 84313.766 84720.797 85113.727 87811.625 88337.414 
query 1 nn's (62037, 67036): 9492445 (65346) 6457655 (62411) 8928604 (64738) 3324707 (62830) 3050119 (62562) 1887729 (66402) 4792793 (64099) 7736754 (65712) 2716664 (64360) 5617171 (65557) 
     dis: 	49631.117 55486.742 57750.543 58099.250 58487.938 58771.695 60753.531 64190.168 65489.469 65711.328 
query 2 nn's (1332, 6331): 4588082 (5850) 2601636 (4981) 8068558 (3605) 2953864 (3859) 4347605 (5987) 3967402 (4299) 8635193 (4483) 5397690 (1707) 2571149 (4419) 1587485 (3349) 
     dis: 	46290.277 52052.090 53144.305 56321.547 56424.289 57569.703 58162.898 60931.715 61223.281 61319.285 
query 3 nn's (5307, 10306): 9019201 (10132) 9257537 (9643) 7691560 (8123) 840086 (7034) 1502235 (5553) 6281603 (7047) 543054 (6170) 4503222 (6224) 9288078 (5891) 2841980 (9811) 
     dis: 	7228.387 7563.409 7961.448 8386.378 8566.945 9081.689 9234.701 9247.495 9991.790 10172.210 
query 4 nn's (61015, 66014): 1082443 (61970) 1829341 (62245) 2732612 (65651) 9383376 (65777) 6784852 (64491) 5928818 (62774) 4374812 (62476) 4027439 (61219) 3308297 (62108) 90367 (61426) 
     dis: 	89547.664 90607.320 91454.977 94352.438 96374.961 98222.734 98542.562 99588.438 99848.023 100031.273 
[ 99.622s ] *** Query time: 34.793
qps: 287.413
 *** ivfpq recall 
ivfpq get 85685 postive res from 100000 results, recall@10:0.857
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.003 0.009 0.033 0.099 0.259 0.418 0.179 
finished ivfpq index examples
[ 99.623s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 97.84
	System time (seconds): 1.90
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:39.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589156
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 623223
	Voluntary context switches: 1
	Involuntary context switches: 134
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:59
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.715s ] Loaded metadata, 10000000 attr's found
[ 0.715s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.718s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.719s ] Loaded 10000 sift10M queries
[ 0.727s ] Loaded ground truth, gt_size: 10
[ 0.727s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.183s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.060
[ 97.387s ] Query results (vector ids, then distances):
query 0 nn's (7094, 13093): 7364551 (11748) 9925949 (12224) 2115887 (12247) 888010 (11612) 5831094 (11683) 906203 (9029) 2707047 (11734) 1249067 (11561) 8610630 (12919) 3517425 (11037) 
     dis: 	73579.352 79460.570 79568.688 80957.234 83108.914 83131.133 85306.969 85407.672 86188.344 86850.359 
query 1 nn's (78125, 84124): 5552416 (78513) 1745130 (81239) 4456023 (81807) 1410399 (79450) 1015812 (81428) 109736 (83008) 3733744 (80018) 8811964 (78982) 5838578 (80325) 9329945 (82932) 
     dis: 	44178.637 55052.254 59736.234 61030.488 63939.305 65643.906 66149.453 66159.078 68088.328 70886.094 
query 2 nn's (22462, 28461): 289025 (23641) 2448858 (26319) 9416415 (22498) 9330360 (23016) 1463083 (23709) 4259715 (27472) 4824470 (28032) 247874 (27384) 4083557 (23166) 5488746 (22698) 
     dis: 	49842.273 50719.492 52016.340 56147.039 56718.816 57117.203 60835.242 60843.766 61091.766 61398.086 
query 3 nn's (92284, 98283): 1527942 (96648) 4147780 (96552) 1218934 (95625) 2892348 (96310) 1911911 (93967) 2218358 (96205) 1344917 (94289) 9925791 (97055) 7404448 (97484) 6697954 (97706) 
     dis: 	4429.167 4460.316 5557.918 5596.319 6174.690 6305.340 7147.005 7477.250 7533.627 8507.957 
query 4 nn's (45322, 51321): 3389697 (48484) 3842053 (47229) 5175563 (46909) 3329904 (47742) 9632952 (47320) 3099917 (49532) 484991 (49791) 5707536 (47200) 1272627 (49473) 4719865 (48976) 
     dis: 	86887.398 89893.477 90696.086 91830.422 92074.500 92486.594 93067.812 94376.031 94447.328 94478.422 
[ 97.387s ] *** Query time: 32.634
qps: 306.424
 *** ivfpq recall 
ivfpq get 85633 postive res from 100000 results, recall@10:0.856
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.009 0.031 0.105 0.260 0.423 0.171 
finished ivfpq index examples
[ 97.387s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 96.33
	System time (seconds): 1.18
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:37.51
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589156
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 411656
	Voluntary context switches: 1
	Involuntary context switches: 63
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:02
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.715s ] Loaded metadata, 10000000 attr's found
[ 0.715s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.718s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.720s ] Loaded 10000 sift10M queries
[ 0.727s ] Loaded ground truth, gt_size: 10
[ 0.727s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.194s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.070
[ 100.992s ] Query results (vector ids, then distances):
query 0 nn's (75730, 82729): 2898305 (81060) 5284494 (77667) 8191903 (80886) 4326493 (75895) 6777756 (78948) 674077 (80486) 905372 (77162) 4845093 (76861) 8644324 (81575) 7873837 (78898) 
     dis: 	66765.047 73328.891 76944.016 80478.695 80602.406 82047.578 83131.031 83156.383 85159.109 85579.766 
query 1 nn's (30634, 37633): 1273419 (33970) 3221056 (31139) 9791343 (31369) 7331745 (31011) 7917424 (30836) 9015118 (35539) 7692715 (33795) 8590082 (35871) 8518091 (32017) 5226515 (31871) 
     dis: 	43367.484 49515.406 50356.211 54280.656 54321.969 56188.117 57096.102 57993.969 61106.062 62036.039 
query 2 nn's (47436, 54435): 5055964 (53394) 199400 (49790) 7500565 (53476) 2511585 (51247) 9609459 (52017) 5039283 (52769) 9790465 (51400) 8965515 (47906) 944526 (53648) 2346097 (47666) 
     dis: 	41496.719 50734.125 50812.055 52887.113 53467.805 56066.062 56458.984 56638.980 57075.965 57442.148 
query 3 nn's (27946, 34945): 1124016 (32722) 6942939 (31279) 5716081 (30383) 7709017 (33997) 2630576 (30837) 8841934 (28458) 992744 (30985) 8660300 (30070) 8590378 (31393) 4372662 (28399) 
     dis: 	6172.330 6419.419 7270.026 7460.148 7478.721 7660.045 7734.474 7840.615 8326.746 8980.230 
query 4 nn's (62210, 69209): 1829341 (62245) 2732612 (65651) 5729760 (66147) 9383376 (65777) 6784852 (64491) 5928818 (62774) 4374812 (62476) 4436465 (68543) 6030505 (67035) 330819 (62462) 
     dis: 	90607.320 91454.977 92756.719 94352.438 96374.961 98222.734 98542.562 99132.461 99435.844 100189.570 
[ 100.992s ] *** Query time: 34.484
qps: 289.991
 *** ivfpq recall 
ivfpq get 85771 postive res from 100000 results, recall@10:0.858
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.002 0.008 0.030 0.095 0.266 0.434 0.165 
finished ivfpq index examples
[ 100.993s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 99.92
	System time (seconds): 1.18
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:41.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1587340
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 411219
	Voluntary context switches: 4
	Involuntary context switches: 117
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:04
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_8000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_8000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.726s ] Loaded metadata, 10000000 attr's found
[ 0.726s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.730s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.731s ] Loaded 10000 sift10M queries
[ 0.739s ] Loaded ground truth, gt_size: 10
[ 0.739s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.172s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.080
[ 95.762s ] Query results (vector ids, then distances):
query 0 nn's (58707, 66706): 7632021 (61505) 4738758 (63657) 9536881 (62309) 6984373 (66297) 6951413 (64572) 5343331 (64452) 7873580 (61095) 7459877 (65985) 1929740 (63695) 7200266 (62910) 
     dis: 	74173.891 74449.000 76589.031 79123.875 80255.836 81300.031 82992.828 84104.430 84965.250 86406.938 
query 1 nn's (46669, 54668): 8349375 (52325) 9781041 (46813) 6073626 (52753) 7693023 (48225) 8646169 (48602) 3786289 (47328) 6630533 (47319) 9211699 (48066) 482087 (52392) 7672903 (50549) 
     dis: 	52268.477 57058.672 57264.012 57562.402 58272.633 58428.172 60250.566 61137.523 63094.770 63280.938 
query 2 nn's (26507, 34506): 4154052 (32764) 4279056 (31979) 141025 (31028) 8590994 (28647) 4259715 (27472) 4495608 (32772) 8690196 (29802) 2180225 (33712) 2038327 (32825) 4735422 (29589) 
     dis: 	53435.875 53604.242 55175.680 56800.223 57117.203 57139.016 58145.320 58300.445 58659.836 58888.234 
query 3 nn's (38147, 46146): 2205832 (41999) 6760157 (42282) 3061225 (38746) 4030248 (43413) 5275424 (38240) 9754475 (42387) 1133113 (44751) 9421859 (41952) 6734945 (42920) 3620717 (41874) 
     dis: 	4390.735 6591.960 6782.892 6951.691 7503.663 7960.268 8712.269 9593.152 10230.865 10231.828 
query 4 nn's (30743, 38742): 8478796 (34009) 6357047 (37869) 5466491 (32978) 417315 (38580) 330880 (34126) 7559534 (34726) 2721988 (37884) 745843 (31043) 5499675 (34199) 6887757 (32792) 
     dis: 	90706.094 91076.484 93482.586 94690.039 95185.766 95637.016 96089.398 96408.789 96483.922 97323.992 
[ 95.762s ] *** Query time: 32.723
qps: 305.599
 *** ivfpq recall 
ivfpq get 85853 postive res from 100000 results, recall@10:0.859
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.002 0.007 0.028 0.095 0.268 0.433 0.167 
finished ivfpq index examples
[ 95.763s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_8000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_8000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 94.78
	System time (seconds): 1.07
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:35.86
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589156
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 411140
	Voluntary context switches: 1
	Involuntary context switches: 103
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:06
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_9000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_9000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.720s ] Loaded metadata, 10000000 attr's found
[ 0.720s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.724s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.725s ] Loaded 10000 sift10M queries
[ 0.732s ] Loaded ground truth, gt_size: 10
[ 0.732s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.198s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.090
[ 103.933s ] Query results (vector ids, then distances):
query 0 nn's (30956, 39955): 6141318 (31677) 7293718 (39822) 7860530 (36909) 7866119 (35104) 5228659 (32650) 1203246 (35809) 6871531 (32699) 6019325 (39083) 6002319 (38494) 867263 (31804) 
     dis: 	72625.461 77124.906 77340.297 79879.164 82670.953 83089.008 83228.117 83249.094 84146.875 84282.883 
query 1 nn's (43590, 52589): 8349375 (52325) 3631651 (46071) 9781041 (46813) 7693023 (48225) 8646169 (48602) 3786289 (47328) 6630533 (47319) 9211699 (48066) 7856853 (44589) 482087 (52392) 
     dis: 	52268.477 56993.523 57058.672 57562.402 58272.633 58428.172 60250.566 61137.523 62920.016 63094.770 
query 2 nn's (59823, 68822): 2304211 (67268) 1571863 (66187) 8132849 (63316) 5637368 (66689) 2795236 (62148) 6347813 (66330) 9068473 (62147) 8565013 (65663) 4665202 (65519) 1329974 (65153) 
     dis: 	48717.477 50657.430 51107.066 51124.438 52135.250 52399.180 52601.242 54066.789 54334.688 54381.930 
query 3 nn's (60707, 69706): 6917633 (65929) 8649378 (64804) 4486659 (62681) 5381241 (67484) 179529 (69049) 9313337 (65861) 9625994 (68515) 1028926 (67570) 3421950 (66323) 9335193 (61835) 
     dis: 	5698.327 6296.265 6964.243 7628.874 7642.829 7684.516 7823.001 7991.773 8002.963 8005.697 
query 4 nn's (66407, 75406): 1149636 (70537) 2524726 (73742) 2989150 (73723) 6637386 (69548) 303093 (72258) 3405146 (73681) 8693682 (69472) 5807041 (72525) 4436465 (68543) 6030505 (67035) 
     dis: 	85033.164 86542.508 88918.922 92282.008 93621.461 93740.383 97240.164 97450.609 99132.461 99435.844 
[ 103.934s ] *** Query time: 37.369
qps: 267.601
 *** ivfpq recall 
ivfpq get 85973 postive res from 100000 results, recall@10:0.860
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.002 0.007 0.027 0.092 0.271 0.434 0.168 
finished ivfpq index examples
[ 103.935s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_9000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_9000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 101.53
	System time (seconds): 2.52
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:44.07
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589160
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 808545
	Voluntary context switches: 2
	Involuntary context switches: 277
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:09
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.720s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.729s ] Loaded ground truth, gt_size: 10
[ 0.729s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.206s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 106.591s ] Query results (vector ids, then distances):
query 0 nn's (30338, 40337): 6141318 (31677) 7293718 (39822) 7860530 (36909) 7866119 (35104) 5228659 (32650) 1203246 (35809) 6871531 (32699) 6019325 (39083) 6002319 (38494) 867263 (31804) 
     dis: 	72625.461 77124.906 77340.297 79879.164 82670.953 83089.008 83228.117 83249.094 84146.875 84282.883 
query 1 nn's (77037, 87036): 5552416 (78513) 1909131 (86406) 5271910 (85162) 1745130 (81239) 1503119 (86342) 4456023 (81807) 7409966 (77482) 8223991 (85939) 1410399 (79450) 1015812 (81428) 
     dis: 	44178.637 50930.734 53240.984 55052.254 56283.613 59736.234 59750.145 59906.508 61030.488 63939.305 
query 2 nn's (55705, 65704): 237844 (57153) 8132849 (63316) 8455929 (59448) 2795236 (62148) 9068473 (62147) 8863268 (55928) 8565013 (65663) 6114289 (59111) 4665202 (65519) 1329974 (65153) 
     dis: 	48618.285 51107.066 51811.285 52135.250 52601.242 52915.633 54066.789 54263.848 54334.688 54381.930 
query 3 nn's (68256, 78255): 6411621 (75479) 4246457 (73056) 1514080 (69970) 9577990 (76369) 179529 (69049) 8051314 (74322) 9625994 (68515) 9603354 (76938) 4983026 (77570) 1061321 (74643) 
     dis: 	6483.879 6787.027 7087.833 7188.678 7642.829 7697.720 7823.001 7832.500 8056.766 8458.090 
query 4 nn's (32860, 42859): 6578584 (38818) 8478796 (34009) 6357047 (37869) 4830381 (40295) 5466491 (32978) 797235 (41978) 417315 (38580) 330880 (34126) 5257851 (42550) 7559534 (34726) 
     dis: 	80538.094 90706.094 91076.484 91450.578 93482.586 93564.945 94690.039 95185.766 95210.969 95637.016 
[ 106.591s ] *** Query time: 39.058
qps: 256.027
 *** ivfpq recall 
ivfpq get 85915 postive res from 100000 results, recall@10:0.859
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.002 0.006 0.028 0.095 0.265 0.438 0.166 
finished ivfpq index examples
[ 106.593s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 100 128"
	User time (seconds): 103.96
	System time (seconds): 2.73
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:46.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1587820
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 808146
	Voluntary context switches: 1
	Involuntary context switches: 265
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
