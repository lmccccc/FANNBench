Start time: 10:27
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_6_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_6_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.149s ] Loaded metadata, 1000000 attr's found
[ 0.149s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.165s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.167s ] Loaded 10000 redcaps1m queries
[ 0.182s ] Loaded ground truth, gt_size: 10
[ 0.182s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.188s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 12.322s ] Query results (vector ids, then distances):
query 0 nn's (1531765284, 1586036106): 562528 (1566573685) 247269 (1560746907) 864174 (1565212170) 7102 (1556316869) 302070 (1544003614) 84548 (1560185703) 316095 (1545934319) 302187 (1583094900) 807005 (1555429005) 524418 (1538962308) 
     dis: 	0.641 0.676 0.743 0.758 0.763 0.786 0.787 0.788 0.793 0.794 
query 1 nn's (1533381414, 1586782162): 979250 (1557017196) 728340 (1574276126) 660394 (1580653062) 803332 (1550464472) 361663 (1577302575) 30989 (1555612472) 110189 (1563057799) 139424 (1566674419) 8069 (1552702111) 667007 (1534812939) 
     dis: 	0.101 0.101 0.103 0.106 0.106 0.109 0.109 0.110 0.112 0.112 
query 2 nn's (1545403871, 1592215459): 355537 (1569549910) 880455 (1563252917) 306439 (1587166763) 757728 (1549394377) 193180 (1590955321) 216922 (1574356506) 410774 (1584487571) 301614 (1549070155) 299577 (1575332164) 445298 (1564084222) 
     dis: 	0.224 0.225 0.238 0.240 0.249 0.256 0.258 0.262 0.264 0.264 
query 3 nn's (1554466574, 1597592400): 689368 (1577995933) 889987 (1577990461) 783586 (1570422403) 428067 (1581847028) 640717 (1596726949) 687871 (1593890469) 889856 (1584822371) 609006 (1597400318) 769868 (1557791942) 456770 (1587028154) 
     dis: 	0.403 0.403 0.409 0.433 0.455 0.460 0.465 0.465 0.474 0.496 
query 4 nn's (1532982229, 1586621511): 421184 (1558289958) 959629 (1573860803) 754904 (1559689119) 54130 (1565384067) 9859 (1559763136) 929991 (1559418568) 403555 (1548539694) 458642 (1534341741) 218677 (1564363182) 676341 (1560085399) 
     dis: 	0.289 0.293 0.305 0.308 0.310 0.317 0.318 0.322 0.323 0.326 
[ 12.323s ] *** Query time: 3.605
qps: 2773.843
 *** HNSW recall 
HNSW get 82000 postive res from 100000 results, recall@10:0.820
recall dist(10% per bucket): 0.003 0.003 0.004 0.008 0.019 0.038 0.074 0.128 0.203 0.270 0.250 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6849595, average: 684.960
finished ivfpq index examples
[ 12.324s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_6_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_6_random_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000 10 512"
	User time (seconds): 10.10
	System time (seconds): 2.25
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:12.56
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2368420
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 590795
	Voluntary context switches: 0
	Involuntary context switches: 389
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:42
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_10_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_10_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.134s ] Loaded metadata, 1000000 attr's found
[ 0.134s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.151s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.153s ] Loaded 10000 redcaps1m queries
[ 0.165s ] Loaded ground truth, gt_size: 10
[ 0.165s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.123s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 11.806s ] Query results (vector ids, then distances):
query 0 nn's (1557954304, 1567262768): 562528 (1566573685) 247269 (1560746907) 864174 (1565212170) 84548 (1560185703) 203647 (1562988215) 334544 (1559547570) 571852 (1565488702) 736934 (1559321953) 173985 (1559618420) 309200 (1566403587) 
     dis: 	0.641 0.676 0.743 0.786 0.794 0.805 0.812 0.824 0.852 0.854 
query 1 nn's (1543323430, 1555317047): 803332 (1550464472) 8069 (1552702111) 795520 (1546185723) 457200 (1554283715) 661716 (1550269939) 832389 (1553171067) 857939 (1547859114) 544577 (1550284878) 39189 (1549285446) 517347 (1546256238) 
     dis: 	0.106 0.112 0.113 0.115 0.116 0.117 0.122 0.123 0.124 0.125 
query 2 nn's (1525726888, 1541614044): 374226 (1540159958) 837851 (1541593920) 423208 (1533881652) 904824 (1539980763) 620162 (1538006352) 487277 (1537441704) 198935 (1540215696) 549665 (1531807629) 993688 (1526912525) 456152 (1538480800) 
     dis: 	0.263 0.281 0.291 0.299 0.310 0.312 0.313 0.326 0.334 0.335 
query 3 nn's (1534908406, 1549231900): 340980 (1543080428) 725969 (1544048521) 533587 (1536279979) 363662 (1548211510) 48330 (1548018027) 948694 (1541692656) 707074 (1547998287) 577970 (1540069651) 98542 (1535418997) 917502 (1538269409) 
     dis: 	0.514 0.526 0.554 0.570 0.587 0.588 0.590 0.599 0.605 0.608 
query 4 nn's (1522115257, 1538882480): 46163 (1526733049) 440553 (1532363045) 458642 (1534341741) 37748 (1522805591) 907116 (1522536287) 68337 (1529255377) 421589 (1538316213) 879112 (1532277352) 834971 (1535898998) 208424 (1526559884) 
     dis: 	0.300 0.307 0.322 0.347 0.348 0.355 0.357 0.369 0.369 0.371 
[ 11.806s ] *** Query time: 3.413
qps: 2929.723
 *** HNSW recall 
HNSW get 59691 postive res from 100000 results, recall@10:0.597
recall dist(10% per bucket): 0.004 0.013 0.033 0.063 0.112 0.169 0.191 0.180 0.139 0.072 0.024 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6849595, average: 684.960
finished ivfpq index examples
[ 11.807s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_10_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_10_random_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000 10 512"
	User time (seconds): 9.78
	System time (seconds): 2.23
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:12.03
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2367396
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 590832
	Voluntary context switches: 2
	Involuntary context switches: 41
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:52
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_19_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_19_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.139s ] Loaded metadata, 1000000 attr's found
[ 0.139s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.153s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.156s ] Loaded 10000 redcaps1m queries
[ 0.167s ] Loaded ground truth, gt_size: 10
[ 0.167s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.092s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 12.198s ] Query results (vector ids, then distances):
query 0 nn's (1494704266, 1497977749): 727106 (1496187355) 549163 (1496080359) 618562 (1495713599) 144195 (1497491939) 442300 (1495661558) 866502 (1495120286) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.629 0.765 0.864 1.002 1.036 1.150 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1587242368, 1587926868): 399497 (1587264520) 178805 (1587285167) 673125 (1587248638) 521622 (1587658685) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.118 0.163 0.183 0.207 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1534119609, 1535595689): 98597 (1535050659) 107214 (1534932033) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.360 0.408 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1602937813, 1603746862): 445023 (1603650389) 361935 (1603480837) 911639 (1603676783) 461410 (1603616801) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.620 0.663 0.695 0.708 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1607253312, 1608069985): 665622 (1607267671) 296909 (1607804517) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.476 0.597 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 12.199s ] *** Query time: 3.532
qps: 2831.265
 *** HNSW recall 
HNSW get 21522 postive res from 100000 results, recall@10:0.215
recall dist(10% per bucket): 0.131 0.254 0.246 0.188 0.104 0.050 0.019 0.006 0.001 0.001 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6849595, average: 684.960
finished ivfpq index examples
[ 12.200s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_19_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_19_random_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000 10 512"
	User time (seconds): 9.86
	System time (seconds): 2.21
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:12.46
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2368416
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 590797
	Voluntary context switches: 1
	Involuntary context switches: 732
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:01
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/timestamp.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_20_random.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_20_random_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/timestamp.json
[ 0.139s ] Loaded metadata, 1000000 attr's found
[ 0.139s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.155s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.158s ] Loaded 10000 redcaps1m queries
[ 0.170s ] Loaded ground truth, gt_size: 10
[ 0.170s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.190s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 12.758s ] Query results (vector ids, then distances):
query 0 nn's (1598265916, 1598326302): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1556721962, 1556828807): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1590889648, 1590963338): 193180 (1590955321) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.249 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1531692163, 1531837350): 33112 (1531778462) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.593 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1576523650, 1576623517): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 12.758s ] *** Query time: 3.635
qps: 2750.878
 *** HNSW recall 
HNSW get 3947 postive res from 100000 results, recall@10:0.039
recall dist(10% per bucket): 0.678 0.259 0.055 0.008 0.001 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6849595, average: 684.960
finished ivfpq index examples
[ 12.759s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/timestamp.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/qrangereal_label_20_random.json /mnt/data/mocheng/dataset/redcaps1m/label/real_label/sif_gt_real_label_20_random_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_real_label_40_1000 10 512"
	User time (seconds): 10.47
	System time (seconds): 2.24
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:13.04
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2368420
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 590798
	Voluntary context switches: 1
	Involuntary context switches: 260
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:34
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 0.103s ] Loaded metadata, 1000000 attr's found
[ 0.103s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.117s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.119s ] Loaded 10000 redcaps1m queries
[ 0.131s ] Loaded ground truth, gt_size: 10
[ 0.131s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.208s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.499
[ 11.952s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 727106 (6) 268161 (6) 646437 (6) 864174 (6) 64073 (6) 302070 (6) 812018 (6) 265404 (6) 84548 (6) 807005 (6) 
     dis: 	0.629 0.659 0.696 0.743 0.760 0.763 0.766 0.771 0.786 0.793 
query 1 nn's (6, 6): 253654 (6) 964028 (6) 30989 (6) 139424 (6) 442989 (6) 667007 (6) 994014 (6) 661716 (6) 997966 (6) 832389 (6) 
     dis: 	0.099 0.106 0.109 0.110 0.110 0.112 0.113 0.116 0.117 0.117 
query 2 nn's (6, 6): 355537 (6) 964377 (6) 940490 (6) 410774 (6) 620585 (6) 374226 (6) 894254 (6) 299577 (6) 773055 (6) 792564 (6) 
     dis: 	0.224 0.226 0.246 0.258 0.259 0.263 0.264 0.264 0.265 0.271 
query 3 nn's (6, 6): 689368 (6) 428067 (6) 124464 (6) 687871 (6) 635563 (6) 595884 (6) 609006 (6) 413550 (6) 456770 (6) 994151 (6) 
     dis: 	0.403 0.433 0.449 0.460 0.460 0.462 0.465 0.477 0.496 0.499 
query 4 nn's (6, 6): 582698 (6) 522469 (6) 797013 (6) 234795 (6) 931553 (6) 46163 (6) 279888 (6) 556169 (6) 742084 (6) 589135 (6) 
     dis: 	0.260 0.260 0.273 0.274 0.284 0.300 0.303 0.307 0.308 0.314 
[ 11.952s ] *** Query time: 3.431
qps: 2914.330
 *** HNSW recall 
HNSW get 82088 postive res from 100000 results, recall@10:0.821
recall dist(10% per bucket): 0.003 0.003 0.004 0.009 0.020 0.037 0.072 0.129 0.196 0.272 0.256 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6846967, average: 684.697
finished ivfpq index examples
[ 11.953s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000 10 512"
	User time (seconds): 9.79
	System time (seconds): 2.30
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:12.18
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2368420
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 590842
	Voluntary context switches: 8
	Involuntary context switches: 30
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:53
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.082s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.083s ] Loaded 10000 redcaps1m queries
[ 0.090s ] Loaded ground truth, gt_size: 10
[ 0.090s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 1.726s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 21.574s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 7102 (10) 64073 (10) 364290 (10) 596166 (10) 437670 (10) 800767 (10) 927993 (10) 670823 (10) 174023 (10) 822773 (10) 
     dis: 	0.758 0.760 0.813 0.854 0.858 0.863 0.904 0.907 0.909 0.958 
query 1 nn's (10, 10): 361537 (10) 408156 (10) 858634 (10) 366937 (10) 853505 (10) 195481 (10) 915755 (10) 200454 (10) 832229 (10) 246783 (10) 
     dis: 	0.107 0.122 0.129 0.133 0.134 0.135 0.139 0.141 0.141 0.142 
query 2 nn's (10, 10): 964377 (10) 258758 (10) 400722 (10) 65400 (10) 971858 (10) 381411 (10) 444996 (10) 253786 (10) 230054 (10) 670180 (10) 
     dis: 	0.226 0.268 0.272 0.281 0.283 0.285 0.286 0.290 0.296 0.300 
query 3 nn's (10, 10): 305237 (10) 863296 (10) 4433 (10) 468019 (10) 707074 (10) 231500 (10) 368426 (10) 66280 (10) 890599 (10) 331567 (10) 
     dis: 	0.513 0.527 0.533 0.574 0.590 0.592 0.595 0.600 0.621 0.626 
query 4 nn's (10, 10): 797013 (10) 959629 (10) 878527 (10) 193229 (10) 490515 (10) 311214 (10) 354590 (10) 68337 (10) 155731 (10) 136565 (10) 
     dis: 	0.273 0.293 0.298 0.339 0.351 0.352 0.355 0.355 0.375 0.377 
[ 21.574s ] *** Query time: 8.489
qps: 1178.037
 *** HNSW recall 
HNSW get 61656 postive res from 100000 results, recall@10:0.617
recall dist(10% per bucket): 0.001 0.007 0.021 0.054 0.102 0.161 0.200 0.202 0.155 0.077 0.020 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6860956, average: 686.096
finished ivfpq index examples
[ 21.576s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000 10 512"
	User time (seconds): 18.15
	System time (seconds): 3.61
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:21.83
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2368420
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 816508
	Voluntary context switches: 5
	Involuntary context switches: 49
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:16
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.069s ] Loaded metadata, 1000000 attr's found
[ 0.069s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.083s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.084s ] Loaded 10000 redcaps1m queries
[ 0.091s ] Loaded ground truth, gt_size: 10
[ 0.091s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 1.995s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 13.099s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 667610 (19) 789108 (19) 667436 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.018 1.078 1.278 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 158846 (19) 434283 (19) 246783 (19) 342349 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.138 0.140 0.142 0.358 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 752639 (19) 916423 (19) 366433 (19) 537534 (19) 166797 (19) 477149 (19) 832830 (19) 78440 (19) 810572 (19) -1 (0) 
     dis: 	0.309 0.317 0.330 0.335 0.369 0.425 0.457 0.475 0.627 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 687871 (19) 226331 (19) 231500 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.460 0.522 0.592 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 522469 (19) 940668 (19) 405287 (19) 407725 (19) 596268 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.260 0.358 0.457 0.480 0.499 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 13.099s ] *** Query time: 4.120
qps: 2427.339
 *** HNSW recall 
HNSW get 22428 postive res from 100000 results, recall@10:0.224
recall dist(10% per bucket): 0.099 0.235 0.271 0.209 0.120 0.048 0.014 0.004 0.001 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6847616, average: 684.762
finished ivfpq index examples
[ 13.099s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000 10 512"
	User time (seconds): 11.15
	System time (seconds): 2.17
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:13.33
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2368424
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 590795
	Voluntary context switches: 3
	Involuntary context switches: 20
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:26
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_20_40_1000
ef_search: 10
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
[ 0.068s ] Loaded metadata, 1000000 attr's found
[ 0.068s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.082s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.084s ] Loaded 10000 redcaps1m queries
[ 0.091s ] Loaded ground truth, gt_size: 10
[ 0.091s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 1.805s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 11.217s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 665235 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.111 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 953970 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.439 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 11.217s ] *** Query time: 3.385
qps: 2954.258
 *** HNSW recall 
HNSW get 4136 postive res from 100000 results, recall@10:0.041
recall dist(10% per bucket): 0.662 0.273 0.057 0.008 0.001 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 6854961, average: 685.496
finished ivfpq index examples
[ 11.218s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_20_40_1000 10 512"
	User time (seconds): 9.42
	System time (seconds): 1.95
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:11.44
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2368420
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 590872
	Voluntary context switches: 1
	Involuntary context switches: 27
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
