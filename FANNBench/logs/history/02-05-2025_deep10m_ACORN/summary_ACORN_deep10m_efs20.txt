Start time: 18:36
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 12
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.684s ] Loaded metadata, 10000000 attr's found
[ 1.684s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.712s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
[ 1.747s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
[ 1.769s ] Loaded ground truth, gt_size: 10
[ 1.769s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 12
--ACORN index created
acorn size: 5452124800, memory: 8976.102MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 604
		indx 3: 1084
		indx 4: 1564
		indx 5: 2044
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 480
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.28 (852753874)
   3. nb of reciprocal neighbors: 56.17
   4. nb of neighbors that are also neighbor-of-neighbors: 79.47 (794706209)
========= LEVEL 1 =======
* stats on level 1, max 480 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 480.00 (119980800)
   3. nb of reciprocal neighbors: 147.78
   4. nb of neighbors that are also neighbor-of-neighbors: 408.93 (102216499)
========= LEVEL 2 =======
* stats on level 2, max 480 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 463.84 (2881358)
   3. nb of reciprocal neighbors: 290.20
   4. nb of neighbors that are also neighbor-of-neighbors: 463.28 (2877901)
========= LEVEL 3 =======
* stats on level 3, max 480 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.55 (18417)
   3. nb of reciprocal neighbors: 129.74
   4. nb of neighbors that are also neighbor-of-neighbors: 131.11 (18356)
========= LEVEL 4 =======
* stats on level 4, max 480 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999437 nodes
	level 1: 249949 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 1480.575s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.010
[ 1848.703s ] Query results (vector ids, then distances):
query 0 nn's (29325): 2832722 (29894) 3168888 (29627) 2307355 (29325) 363075 (29688) 8513672 (29855) 714418 (30258) 6666762 (30059) 675853 (29986) 4744384 (30288) 285522 (29488) 
     dis: 	0.926 0.984 0.995 0.997 1.010 1.014 1.049 1.052 1.060 1.068 
query 1 nn's (30324): 2801987 (2758) 5185675 (2810) 2084479 (2831) 6554139 (2442) 8737201 (2323) 574008 (2463) 6021148 (1950) 8728408 (1878) 8825082 (2733) 4711471 (2306) 
     dis: 	0.631 0.667 0.693 0.729 0.730 0.740 0.745 0.749 0.767 0.771 
query 2 nn's (1846): 3072554 (12054) 6245274 (12708) 9472363 (12698) 6441271 (11802) 7751306 (11959) 9509838 (12195) 4401281 (11786) 1276232 (11982) 2450023 (12060) 1217288 (11810) 
     dis: 	0.385 0.434 0.493 0.500 0.504 0.508 0.538 0.544 0.545 0.553 
query 3 nn's (2845): 3161965 (12188) 9818198 (12053) 8255260 (12649) 5565649 (12462) 8300113 (12017) 6785483 (12255) 9015986 (12440) 7543558 (12553) 4867013 (12641) 4844589 (12733) 
     dis: 	0.635 0.674 0.677 0.685 0.688 0.694 0.714 0.719 0.730 0.732 
query 4 nn's (11766): 9349021 (15159) 285898 (15776) 1208417 (15868) 7039138 (15585) 1160677 (15774) 4468781 (15829) 8937347 (15868) 3510072 (16063) 8898578 (15537) 2881609 (15780) 
     dis: 	0.283 0.298 0.324 0.331 0.335 0.335 0.354 0.356 0.386 0.388 
[ 1848.703s ] *** Query time: 9.772
qps: 1023.326
 *** acorn recall 
efs:20
acorn get 57154 postive res from 100000 results, recall@10:0.572
recall dist(10% per bucket): 0.070 0.048 0.059 0.072 0.078 0.100 0.115 0.124 0.125 0.119 0.089 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[1853.007s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 2458603
ndis: 0
nreorder: 0
average distance computations per query: 245.860
[ 1853.007s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 12 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64 20 96"
	User time (seconds): 1778.83
	System time (seconds): 64.45
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 30:54.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 112350908
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 12
	Minor (reclaiming a frame) page faults: 29411743
	Voluntary context switches: 23086
	Involuntary context switches: 1436
	Swaps: 0
	File system inputs: 1014168
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 20:03
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 12
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.170s ] Loaded metadata, 10000000 attr's found
[ 1.170s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.172s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json
[ 1.174s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json
[ 1.185s ] Loaded ground truth, gt_size: 10
[ 1.185s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 12
--ACORN index created
acorn size: 5452124800, memory: 8976.102MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 604
		indx 3: 1084
		indx 4: 1564
		indx 5: 2044
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 480
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.28 (852753874)
   3. nb of reciprocal neighbors: 56.17
   4. nb of neighbors that are also neighbor-of-neighbors: 79.47 (794706209)
========= LEVEL 1 =======
* stats on level 1, max 480 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 480.00 (119980800)
   3. nb of reciprocal neighbors: 147.78
   4. nb of neighbors that are also neighbor-of-neighbors: 408.93 (102216499)
========= LEVEL 2 =======
* stats on level 2, max 480 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 463.84 (2881358)
   3. nb of reciprocal neighbors: 290.20
   4. nb of neighbors that are also neighbor-of-neighbors: 463.28 (2877901)
========= LEVEL 3 =======
* stats on level 3, max 480 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.55 (18417)
   3. nb of reciprocal neighbors: 129.74
   4. nb of neighbors that are also neighbor-of-neighbors: 131.11 (18356)
========= LEVEL 4 =======
* stats on level 4, max 480 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999437 nodes
	level 1: 249949 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 1467.761s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.020
[ 1839.235s ] Query results (vector ids, then distances):
query 0 nn's (53590): 9022530 (54782) 1169809 (54292) 6059636 (54573) 5978465 (54470) 9832519 (55561) 1679717 (54957) 659175 (53955) 2024988 (55085) 8573787 (54680) 6173900 (53749) 
     dis: 	0.628 0.745 0.779 0.805 0.887 0.907 0.917 0.958 0.981 0.993 
query 1 nn's (55589): 8845619 (34540) 5283819 (35478) 1616716 (35355) 1629456 (34444) 904055 (35808) 683456 (35770) 1316522 (35046) 538076 (35382) 8375538 (34538) 3735333 (35743) 
     dis: 	0.533 0.637 0.660 0.683 0.702 0.712 0.714 0.720 0.723 0.723 
query 2 nn's (33944): 1197865 (23991) 1425757 (24240) 1162423 (24715) 7247759 (23735) 1313990 (23755) 6275123 (24649) 1779733 (22913) 5863521 (23412) 2535159 (23134) 7679657 (24249) 
     dis: 	0.362 0.367 0.404 0.414 0.420 0.433 0.435 0.445 0.463 0.466 
query 3 nn's (35943): 9603121 (24120) 818675 (23040) 9629807 (22979) 5054613 (22930) 7325494 (24422) 5314455 (23736) 7110301 (23515) 7317112 (23063) 3176996 (22689) 9988595 (24151) 
     dis: 	0.460 0.492 0.524 0.527 0.547 0.552 0.570 0.580 0.602 0.603 
query 4 nn's (22756): 6208760 (24740) 46417 (24048) 2177874 (24231) 499788 (23723) 2174720 (24049) 5510644 (23428) 3716543 (24013) 8994861 (24632) 1240301 (24568) 6378892 (23810) 
     dis: 	0.260 0.261 0.266 0.281 0.287 0.289 0.294 0.297 0.308 0.310 
[ 1839.235s ] *** Query time: 6.311
qps: 1584.637
 *** acorn recall 
efs:20
acorn get 71260 postive res from 100000 results, recall@10:0.713
recall dist(10% per bucket): 0.021 0.019 0.031 0.041 0.057 0.074 0.098 0.121 0.153 0.185 0.200 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[1843.006s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 4245559
ndis: 0
nreorder: 0
average distance computations per query: 424.556
[ 1843.006s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 12 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_2000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_2000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64 20 96"
	User time (seconds): 1789.63
	System time (seconds): 54.17
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 30:43.84
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 112350896
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 28232078
	Voluntary context switches: 1
	Involuntary context switches: 941
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 21:19
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 12
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.185s ] Loaded metadata, 10000000 attr's found
[ 1.185s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.186s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json
[ 1.189s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json
[ 1.200s ] Loaded ground truth, gt_size: 10
[ 1.200s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 12
--ACORN index created
acorn size: 5452124800, memory: 8976.102MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 604
		indx 3: 1084
		indx 4: 1564
		indx 5: 2044
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 480
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.28 (852753874)
   3. nb of reciprocal neighbors: 56.17
   4. nb of neighbors that are also neighbor-of-neighbors: 79.47 (794706209)
========= LEVEL 1 =======
* stats on level 1, max 480 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 480.00 (119980800)
   3. nb of reciprocal neighbors: 147.78
   4. nb of neighbors that are also neighbor-of-neighbors: 408.93 (102216499)
========= LEVEL 2 =======
* stats on level 2, max 480 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 463.84 (2881358)
   3. nb of reciprocal neighbors: 290.20
   4. nb of neighbors that are also neighbor-of-neighbors: 463.28 (2877901)
========= LEVEL 3 =======
* stats on level 3, max 480 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.55 (18417)
   3. nb of reciprocal neighbors: 129.74
   4. nb of neighbors that are also neighbor-of-neighbors: 131.11 (18356)
========= LEVEL 4 =======
* stats on level 4, max 480 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999437 nodes
	level 1: 249949 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 1464.995s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.030
[ 1843.730s ] Query results (vector ids, then distances):
query 0 nn's (40258): 7724079 (42074) 6712645 (42210) 4785843 (42181) 9949059 (43062) 8580749 (43208) 3230660 (41396) 2737607 (41391) 113451 (42333) 1199967 (42171) 8001075 (40291) 
     dis: 	0.758 0.781 0.794 0.811 0.837 0.856 0.891 0.894 0.903 0.926 
query 1 nn's (43257): 2801987 (2758) 2369910 (4212) 7070546 (4171) 3770847 (2969) 1730812 (3815) 5185675 (2810) 9780740 (3655) 7979152 (5136) 4897875 (4827) 1429376 (3011) 
     dis: 	0.631 0.645 0.651 0.653 0.657 0.667 0.670 0.680 0.696 0.703 
query 2 nn's (2404): 1228277 (32499) 2185646 (31329) 2615034 (32132) 6903541 (33104) 6172791 (31857) 1137007 (32681) 7882068 (32402) 947224 (31220) 8712573 (32686) 7896806 (32766) 
     dis: 	0.411 0.417 0.438 0.439 0.454 0.455 0.459 0.461 0.463 0.465 
query 3 nn's (5403): 3444023 (59944) 3730694 (58900) 9627505 (58562) 261172 (59994) 6372758 (60128) 6073402 (58199) 2773663 (58541) 3743924 (58043) 2856471 (60207) 738299 (59312) 
     dis: 	0.485 0.515 0.536 0.543 0.544 0.550 0.565 0.577 0.589 0.589 
query 4 nn's (30507): 4031273 (53806) 6936704 (52679) 6669304 (53601) 840635 (52445) 4024873 (53859) 1441677 (53562) 5249160 (52930) 4570448 (53851) 1642995 (53597) 2110568 (53786) 
     dis: 	0.233 0.235 0.254 0.275 0.290 0.290 0.294 0.297 0.307 0.321 
[ 1843.730s ] *** Query time: 5.929
qps: 1686.716
 *** acorn recall 
efs:20
acorn get 75009 postive res from 100000 results, recall@10:0.750
recall dist(10% per bucket): 0.015 0.014 0.022 0.032 0.048 0.066 0.091 0.117 0.145 0.198 0.251 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[1847.761s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 5575472
ndis: 0
nreorder: 0
average distance computations per query: 557.547
[ 1847.761s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 12 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_3000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_3000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64 20 96"
	User time (seconds): 1795.33
	System time (seconds): 53.33
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 30:48.70
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 112350904
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 28230534
	Voluntary context switches: 1
	Involuntary context switches: 1044
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:37
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 12
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.176s ] Loaded metadata, 10000000 attr's found
[ 1.176s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.178s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json
[ 1.180s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json
[ 1.192s ] Loaded ground truth, gt_size: 10
[ 1.192s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 12
--ACORN index created
acorn size: 5452124800, memory: 8976.102MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 604
		indx 3: 1084
		indx 4: 1564
		indx 5: 2044
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 480
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.28 (852753874)
   3. nb of reciprocal neighbors: 56.17
   4. nb of neighbors that are also neighbor-of-neighbors: 79.47 (794706209)
========= LEVEL 1 =======
* stats on level 1, max 480 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 480.00 (119980800)
   3. nb of reciprocal neighbors: 147.78
   4. nb of neighbors that are also neighbor-of-neighbors: 408.93 (102216499)
========= LEVEL 2 =======
* stats on level 2, max 480 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 463.84 (2881358)
   3. nb of reciprocal neighbors: 290.20
   4. nb of neighbors that are also neighbor-of-neighbors: 463.28 (2877901)
========= LEVEL 3 =======
* stats on level 3, max 480 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.55 (18417)
   3. nb of reciprocal neighbors: 129.74
   4. nb of neighbors that are also neighbor-of-neighbors: 131.11 (18356)
========= LEVEL 4 =======
* stats on level 4, max 480 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999437 nodes
	level 1: 249949 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 1459.973s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.040
[ 1933.178s ] Query results (vector ids, then distances):
query 0 nn's (10521): 8537439 (10562) 746554 (12151) 3395768 (12308) 4256216 (12951) 1271127 (12831) 8672666 (12585) 6416324 (12264) 3879608 (13719) 560287 (11660) 6707722 (12217) 
     dis: 	0.701 0.759 0.803 0.826 0.830 0.865 0.895 0.926 0.930 0.932 
query 1 nn's (14520): 5375802 (31707) 6428759 (29681) 2809579 (32061) 4602460 (30310) 5462907 (29223) 809302 (28913) 4803571 (29781) 6075789 (31876) 2214046 (30919) 1331304 (32712) 
     dis: 	0.549 0.633 0.639 0.660 0.671 0.679 0.694 0.701 0.701 0.703 
query 2 nn's (28851): 5435907 (60104) 2648118 (61955) 5721994 (62072) 5514013 (61979) 556166 (61924) 1107795 (61836) 9890034 (60771) 5446278 (61548) 4261677 (59846) 3244502 (60313) 
     dis: 	0.420 0.422 0.435 0.441 0.461 0.464 0.465 0.473 0.475 0.477 
query 3 nn's (32850): 4375113 (79418) 7528211 (81771) 7592962 (81009) 9985875 (80883) 6766662 (78986) 205709 (80957) 6780207 (81214) 4999293 (80697) 1540432 (79843) 5416350 (81217) 
     dis: 	0.414 0.464 0.516 0.522 0.522 0.531 0.535 0.535 0.545 0.546 
query 4 nn's (59742): 8509683 (93898) 5658986 (93548) 1180358 (94649) 188372 (93903) 8522738 (92485) 3266049 (95865) 3777711 (92908) 542884 (93651) 9421205 (94406) 987772 (95966) 
     dis: 	0.236 0.259 0.260 0.263 0.268 0.288 0.289 0.298 0.301 0.303 
[ 1933.178s ] *** Query time: 73.986
qps: 135.161
 *** acorn recall 
efs:20
acorn get 76439 postive res from 100000 results, recall@10:0.764
recall dist(10% per bucket): 0.013 0.012 0.023 0.029 0.045 0.063 0.082 0.113 0.140 0.200 0.280 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[1940.446s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 6597592
ndis: 0
nreorder: 0
average distance computations per query: 659.759
[ 1940.446s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 12 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_4000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_4000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64 20 96"
	User time (seconds): 1804.86
	System time (seconds): 137.19
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 32:22.09
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 112351928
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 59697913
	Voluntary context switches: 1
	Involuntary context switches: 1933
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:20
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 12
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.190s ] Loaded metadata, 10000000 attr's found
[ 1.190s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.192s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json
[ 1.194s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json
[ 1.205s ] Loaded ground truth, gt_size: 10
[ 1.205s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 12
--ACORN index created
acorn size: 5452124800, memory: 8976.102MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 604
		indx 3: 1084
		indx 4: 1564
		indx 5: 2044
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 480
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.28 (852753874)
   3. nb of reciprocal neighbors: 56.17
   4. nb of neighbors that are also neighbor-of-neighbors: 79.47 (794706209)
========= LEVEL 1 =======
* stats on level 1, max 480 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 480.00 (119980800)
   3. nb of reciprocal neighbors: 147.78
   4. nb of neighbors that are also neighbor-of-neighbors: 408.93 (102216499)
========= LEVEL 2 =======
* stats on level 2, max 480 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 463.84 (2881358)
   3. nb of reciprocal neighbors: 290.20
   4. nb of neighbors that are also neighbor-of-neighbors: 463.28 (2877901)
========= LEVEL 3 =======
* stats on level 3, max 480 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.55 (18417)
   3. nb of reciprocal neighbors: 129.74
   4. nb of neighbors that are also neighbor-of-neighbors: 131.11 (18356)
========= LEVEL 4 =======
* stats on level 4, max 480 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999437 nodes
	level 1: 249949 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 1474.486s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.050
[ 1876.922s ] Query results (vector ids, then distances):
query 0 nn's (73203): 4148570 (74612) 4042506 (76043) 8372864 (77517) 3380099 (74219) 6137339 (73912) 2149597 (76994) 3197332 (76022) 8577062 (75411) 1319571 (78064) 9625494 (75066) 
     dis: 	0.769 0.778 0.782 0.803 0.803 0.838 0.851 0.860 0.861 0.881 
query 1 nn's (78202): 2173883 (52826) 4138646 (51828) 6058301 (51101) 1969034 (52259) 2031881 (51442) 8245680 (52585) 1861523 (50033) 4188104 (49438) 1898773 (50055) 4351390 (52776) 
     dis: 	0.440 0.569 0.614 0.618 0.645 0.655 0.670 0.676 0.684 0.685 
query 2 nn's (49342): 88126 (50068) 4064719 (48688) 1602654 (52003) 4771981 (52131) 4065673 (50188) 4959567 (50931) 5306563 (48768) 1027858 (52390) 4685721 (50135) 7482013 (47706) 
     dis: 	0.000 0.343 0.376 0.388 0.403 0.409 0.413 0.419 0.421 0.424 
query 3 nn's (54341): 2691447 (64725) 4952825 (63643) 7182132 (65964) 2927531 (65260) 7095501 (65048) 4011357 (64450) 583724 (64411) 3790713 (62694) 6056821 (62532) 1893351 (65792) 
     dis: 	0.471 0.503 0.517 0.522 0.524 0.539 0.544 0.551 0.554 0.567 
query 4 nn's (47427): 4107976 (43357) 9987746 (45057) 7812231 (45431) 4954949 (43277) 7739956 (42700) 2306537 (44197) 8731860 (45878) 9295248 (42806) 6239916 (44727) 3835499 (44683) 
     dis: 	0.237 0.272 0.273 0.273 0.278 0.291 0.292 0.296 0.305 0.305 
[ 1876.922s ] *** Query time: 9.478
qps: 1055.065
 *** acorn recall 
efs:20
acorn get 77526 postive res from 100000 results, recall@10:0.775
recall dist(10% per bucket): 0.009 0.011 0.020 0.029 0.042 0.062 0.078 0.111 0.146 0.194 0.298 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[1881.502s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 7444787
ndis: 0
nreorder: 0
average distance computations per query: 744.479
[ 1881.502s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 12 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_5000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_5000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64 20 96"
	User time (seconds): 1811.31
	System time (seconds): 60.49
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 31:22.80
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 112350904
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 13
	Minor (reclaiming a frame) page faults: 29309156
	Voluntary context switches: 25607
	Involuntary context switches: 1160
	Swaps: 0
	File system inputs: 1487320
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:26
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 12
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.187s ] Loaded metadata, 10000000 attr's found
[ 1.187s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.189s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json
[ 1.192s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json
[ 1.203s ] Loaded ground truth, gt_size: 10
[ 1.203s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 12
--ACORN index created
acorn size: 5452124800, memory: 8976.102MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 604
		indx 3: 1084
		indx 4: 1564
		indx 5: 2044
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 480
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.28 (852753874)
   3. nb of reciprocal neighbors: 56.17
   4. nb of neighbors that are also neighbor-of-neighbors: 79.47 (794706209)
========= LEVEL 1 =======
* stats on level 1, max 480 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 480.00 (119980800)
   3. nb of reciprocal neighbors: 147.78
   4. nb of neighbors that are also neighbor-of-neighbors: 408.93 (102216499)
========= LEVEL 2 =======
* stats on level 2, max 480 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 463.84 (2881358)
   3. nb of reciprocal neighbors: 290.20
   4. nb of neighbors that are also neighbor-of-neighbors: 463.28 (2877901)
========= LEVEL 3 =======
* stats on level 3, max 480 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.55 (18417)
   3. nb of reciprocal neighbors: 129.74
   4. nb of neighbors that are also neighbor-of-neighbors: 131.11 (18356)
========= LEVEL 4 =======
* stats on level 4, max 480 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999437 nodes
	level 1: 249949 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 1481.611s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.060
[ 1889.826s ] Query results (vector ids, then distances):
query 0 nn's (60294): 8575307 (63032) 4561213 (64538) 8333705 (61968) 8834027 (60804) 7376652 (62245) 7580319 (64403) 2666411 (64661) 6320141 (64846) 7404126 (60427) 404837 (62080) 
     dis: 	0.701 0.785 0.800 0.804 0.824 0.825 0.832 0.855 0.858 0.861 
query 1 nn's (66293): 8714947 (68306) 853856 (70967) 5106708 (68542) 6638627 (68268) 1036334 (68011) 5362566 (66160) 3091084 (67466) 1137666 (68108) 3212155 (69095) 3151612 (69588) 
     dis: 	0.597 0.621 0.625 0.630 0.631 0.633 0.636 0.636 0.650 0.650 
query 2 nn's (65387): 2652656 (14494) 6074272 (10444) 3072554 (12054) 6373152 (15390) 1963860 (13178) 9838555 (14934) 6765244 (13483) 4534316 (10841) 1654306 (13584) 1352105 (13336) 
     dis: 	0.378 0.381 0.385 0.387 0.437 0.437 0.451 0.466 0.471 0.472 
query 3 nn's (71386): 7040122 (10551) 1623263 (14086) 9592084 (13661) 6605090 (10037) 6464610 (12408) 8831470 (12698) 1923103 (13564) 475495 (12045) 6545122 (13361) 4527246 (14165) 
     dis: 	0.501 0.517 0.524 0.526 0.529 0.536 0.538 0.543 0.547 0.552 
query 4 nn's (9701): 2138623 (11539) 8781673 (13376) 796011 (9364) 9070153 (13313) 3990585 (8809) 1952662 (12421) 7862066 (11087) 8198317 (13724) 1120097 (11866) 3147314 (11005) 
     dis: 	0.271 0.271 0.277 0.277 0.283 0.284 0.288 0.288 0.289 0.289 
[ 1889.826s ] *** Query time: 5.588
qps: 1789.493
 *** acorn recall 
efs:20
acorn get 78109 postive res from 100000 results, recall@10:0.781
recall dist(10% per bucket): 0.007 0.011 0.019 0.029 0.041 0.056 0.078 0.113 0.147 0.192 0.308 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[1893.923s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 8130902
ndis: 0
nreorder: 0
average distance computations per query: 813.090
[ 1893.923s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 12 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_6000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_6000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64 20 96"
	User time (seconds): 1823.81
	System time (seconds): 60.24
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 31:34.79
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 112350904
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 14
	Minor (reclaiming a frame) page faults: 28437069
	Voluntary context switches: 27229
	Involuntary context switches: 1629
	Swaps: 0
	File system inputs: 1358280
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:38
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: deep10m
N: 10000000
gamma: 12
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs
query file: /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
attr file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64
ef_search: 20 
dim: 96
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.202s ] Loaded metadata, 10000000 attr's found
[ 1.202s ] Loading query vectors and attributes
query vecs data loaded, with dim: 96, nb=10000
[ 1.204s ] Loaded query vectors from /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json
[ 1.206s ] Loaded 10000 deep10m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json
[ 1.217s ] Loaded ground truth, gt_size: 10
[ 1.217s ] Index Params -- d: 96, M: 40, N: 10000000, gamma: 12
--ACORN index created
acorn size: 5452124800, memory: 8976.102MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 604
		indx 3: 1084
		indx 4: 1564
		indx 5: 2044
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 480
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 12
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 85.28 (852753874)
   3. nb of reciprocal neighbors: 56.17
   4. nb of neighbors that are also neighbor-of-neighbors: 79.47 (794706209)
========= LEVEL 1 =======
* stats on level 1, max 480 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 480.00 (119980800)
   3. nb of reciprocal neighbors: 147.78
   4. nb of neighbors that are also neighbor-of-neighbors: 408.93 (102216499)
========= LEVEL 2 =======
* stats on level 2, max 480 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 463.84 (2881358)
   3. nb of reciprocal neighbors: 290.20
   4. nb of neighbors that are also neighbor-of-neighbors: 463.28 (2877901)
========= LEVEL 3 =======
* stats on level 3, max 480 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.55 (18417)
   3. nb of reciprocal neighbors: 129.74
   4. nb of neighbors that are also neighbor-of-neighbors: 131.11 (18356)
========= LEVEL 4 =======
* stats on level 4, max 480 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999437 nodes
	level 1: 249949 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 1477.438s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.070
[ 1890.526s ] Query results (vector ids, then distances):
query 0 nn's (16931): 3629163 (18984) 9250137 (21673) 673133 (17326) 6039182 (17054) 5996160 (22518) 2023175 (22442) 3699251 (18673) 3520645 (19095) 9869629 (21521) 3893544 (21840) 
     dis: 	0.561 0.643 0.653 0.727 0.753 0.781 0.784 0.785 0.799 0.800 
query 1 nn's (23930): 6502890 (78388) 914733 (81651) 3890979 (83637) 1449938 (78844) 9153099 (77251) 1257956 (83611) 9991446 (81013) 4486462 (77567) 9945811 (81660) 227633 (82873) 
     dis: 	0.605 0.696 0.711 0.714 0.718 0.732 0.735 0.755 0.756 0.758 
query 2 nn's (77096): 1011981 (30177) 1197865 (23991) 1425757 (24240) 753853 (27882) 1162423 (24715) 7857729 (26738) 6582118 (27049) 7247759 (23735) 1313990 (23755) 3352884 (24831) 
     dis: 	0.341 0.362 0.367 0.400 0.404 0.406 0.412 0.414 0.420 0.426 
query 3 nn's (84095): 5146625 (48179) 6112071 (48210) 4877130 (47807) 4607447 (49340) 3058217 (48601) 2271528 (46825) 3893114 (48034) 8906651 (46940) 8253000 (47042) 3041673 (45946) 
     dis: 	0.415 0.473 0.478 0.502 0.502 0.504 0.518 0.521 0.525 0.531 
query 4 nn's (23303): 7404011 (71023) 7512766 (66993) 9927916 (68715) 5955407 (67395) 9387443 (66158) 331206 (70690) 324705 (67074) 1269883 (67560) 2338383 (69940) 78801 (68554) 
     dis: 	0.252 0.262 0.268 0.269 0.279 0.283 0.284 0.288 0.291 0.293 
[ 1890.526s ] *** Query time: 5.444
qps: 1836.893
 *** acorn recall 
efs:20
acorn get 78214 postive res from 100000 results, recall@10:0.782
recall dist(10% per bucket): 0.009 0.010 0.019 0.029 0.040 0.056 0.084 0.102 0.147 0.195 0.310 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[1894.120s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 8741766
ndis: 0
nreorder: 0
average distance computations per query: 874.177
[ 1894.120s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query deep10m 10000000 12 40 64 10 1 /mnt/data/mocheng/dataset/deep10m/base.10M.fvecs /mnt/data/mocheng/dataset/deep10m/query.public.10K.fvecs /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/qrangesel_7000_1_100000_random.json /mnt/data/mocheng/dataset/deep10m/label/sel_1_100000_random/sif_gt_sel_7000_1_100000_random_10.json /mnt/data/mocheng/dataset/deep10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga12_Mb64 20 96"
	User time (seconds): 1829.52
	System time (seconds): 55.24
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 31:34.89
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 112350908
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 16
	Minor (reclaiming a frame) page faults: 28590713
	Voluntary context switches: 24875
	Involuntary context switches: 1105
	Swaps: 0
	File system inputs: 1646336
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
