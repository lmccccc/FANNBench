Start time: 01:17
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 5
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.719s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.720s ] Loaded 10000 spacev10m queries
[ 0.728s ] Loaded ground truth, gt_size: 10
[ 0.728s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.156s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 490.456s ] Query results (vector ids, then distances):
query 0 nn's (51111, 52111): 2427833 (51682) 8140362 (51496) 2390635 (52026) 2483624 (51802) 3163065 (51137) 7402374 (51533) 8324793 (51148) 9438402 (51886) 5482448 (51936) 9256869 (51116) 
     dis: 	47167.891 47464.125 47898.281 51999.168 52413.906 52918.371 52976.492 53661.867 56371.387 56573.211 
query 1 nn's (24588, 25588): 4056736 (24969) 6338457 (25045) 1711700 (24641) 2035250 (25432) 9069058 (24660) 9009741 (24986) 3460884 (25278) 5964487 (25068) 8947909 (25313) 4106178 (24636) 
     dis: 	43445.973 50931.422 51333.117 53788.348 57327.879 58623.586 59108.969 59915.344 62110.578 63407.250 
query 2 nn's (62344, 63344): 7177617 (62433) 8091170 (62831) 798434 (62637) 8768588 (62837) 1370019 (62437) 3918866 (62424) 9027490 (63038) 3560858 (63203) 3488198 (62362) 8885530 (62837) 
     dis: 	42223.043 48413.594 49354.551 51466.508 54408.980 55441.547 55473.414 55816.129 56543.375 57036.105 
query 3 nn's (29217, 30217): 5565405 (29344) 4421559 (29265) 7402542 (30148) 9724475 (29878) 4082592 (30197) 6433192 (30065) 5565859 (29515) 9344265 (29489) 6382606 (30010) 4966849 (30027) 
     dis: 	40171.961 58634.789 62135.098 62644.391 63423.941 64385.836 66030.781 66753.969 67460.820 68833.008 
query 4 nn's (11691, 12691): 4913683 (12573) 3996078 (11775) 7175402 (12682) 8333810 (12690) 1459955 (11791) 3414877 (12093) 1198433 (12068) 2734717 (12579) 6827276 (11962) 6074730 (12128) 
     dis: 	30319.867 33875.797 36062.734 37969.750 40286.527 41214.309 42357.711 42391.430 43147.480 44041.469 
[ 490.457s ] *** Query time: 73.304
qps: 136.419
 *** ivfpq recall 
ivfpq get 455 postive res from 100000 results, recall@10:0.005
recall dist(10% per bucket): 0.956 0.043 0.001 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 490.458s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 5 192"
	User time (seconds): 460.74
	System time (seconds): 32.51
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:13.28
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51395496
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3
	Minor (reclaiming a frame) page faults: 15553514
	Voluntary context switches: 18
	Involuntary context switches: 1041
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:15
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 5
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.721s ] Loaded metadata, 10000000 attr's found
[ 0.721s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.726s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.727s ] Loaded 10000 spacev10m queries
[ 0.735s ] Loaded ground truth, gt_size: 10
[ 0.735s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.060s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 483.324s ] Query results (vector ids, then distances):
query 0 nn's (60460, 61459): 9080559 (60929) 4716803 (60983) 7135093 (60998) 1255437 (60748) 7164688 (60767) 5459247 (60579) 9305110 (61260) 759467 (60505) 7789551 (60702) 7279240 (61445) 
     dis: 	44843.242 45640.773 49692.121 49959.012 50698.789 50829.562 52175.324 52516.246 55086.438 55379.988 
query 1 nn's (96515, 97514): 2858528 (96822) 2644470 (96674) 1918163 (97269) 199583 (96851) 6303489 (97496) 9674543 (97003) 3903781 (96917) 8703515 (97209) 7222137 (97080) 3625947 (97474) 
     dis: 	42757.055 46986.438 49282.117 54975.230 56587.188 57540.109 57813.992 59216.906 60007.637 60687.188 
query 2 nn's (82013, 83012): 9014009 (82578) 7781120 (82237) 935246 (82207) 4921009 (82297) 2253189 (82334) 9316100 (82730) 9858552 (82252) 1709039 (82943) 4307529 (83008) 6280766 (82147) 
     dis: 	41511.988 47096.973 51621.586 51644.977 54264.824 55251.645 56632.832 57612.945 58673.309 58740.270 
query 3 nn's (78919, 79918): 3907723 (79857) 3549535 (79218) 7345399 (79119) 2806985 (79338) 6524397 (78977) 5384118 (79344) 172837 (79776) 4082592 (79537) 2077396 (79432) 3601151 (79011) 
     dis: 	36117.723 58446.855 59571.516 60283.051 61278.824 61726.602 63391.488 63423.941 64176.062 65659.047 
query 4 nn's (34041, 35040): 4358085 (34149) 2731040 (34443) 6327018 (34612) 7617271 (34438) 4085396 (34454) 2311480 (34857) 6816771 (34604) 9002616 (35021) 7120249 (34936) 7263534 (34947) 
     dis: 	33070.551 35043.523 36114.953 36134.719 37149.219 37644.914 38179.828 38304.078 38836.238 39452.172 
[ 483.324s ] *** Query time: 67.040
qps: 149.165
 *** ivfpq recall 
ivfpq get 49025 postive res from 100000 results, recall@10:0.490
recall dist(10% per bucket): 0.033 0.074 0.110 0.123 0.127 0.119 0.111 0.100 0.089 0.083 0.031 
finished ivfpq index examples
[ 483.325s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 5 192"
	User time (seconds): 457.79
	System time (seconds): 27.72
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:06.34
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51466148
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 12880838
	Voluntary context switches: 3346
	Involuntary context switches: 625
	Swaps: 0
	File system inputs: 137456
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:13
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 5
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.772s ] Loaded metadata, 10000000 attr's found
[ 0.772s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.777s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.778s ] Loaded 10000 spacev10m queries
[ 0.786s ] Loaded ground truth, gt_size: 10
[ 0.786s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.258s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 89.247s ] Query results (vector ids, then distances):
query 0 nn's (100, 100): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (89, 89): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (18, 18): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (10, 10): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (96, 96): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 89.247s ] *** Query time: 8.075
qps: 1238.388
 *** ivfpq recall 
ivfpq get 543 postive res from 100000 results, recall@10:0.005
recall dist(10% per bucket): 0.947 0.052 0.001 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 89.249s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 5 192"
	User time (seconds): 86.39
	System time (seconds): 2.09
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:29.46
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1617828
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 617102
	Voluntary context switches: 4996
	Involuntary context switches: 190
	Swaps: 0
	File system inputs: 39992
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
