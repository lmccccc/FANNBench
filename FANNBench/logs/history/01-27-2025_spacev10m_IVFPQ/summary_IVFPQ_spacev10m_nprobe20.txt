Start time: 01:17
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 20
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.719s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.720s ] Loaded 10000 spacev10m queries
[ 0.728s ] Loaded ground truth, gt_size: 10
[ 0.728s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.156s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 495.503s ] Query results (vector ids, then distances):
query 0 nn's (51111, 52111): 9266351 (51119) 3196802 (51685) 650732 (51330) 2427833 (51682) 1741472 (52062) 8140362 (51496) 2390635 (52026) 7087555 (51121) 2483624 (51802) 9101118 (51264) 
     dis: 	43456.102 46504.273 47084.719 47167.891 47367.625 47464.125 47898.281 51439.555 51999.168 52117.094 
query 1 nn's (24588, 25588): 4056736 (24969) 3481345 (25035) 6338457 (25045) 1711700 (24641) 2035250 (25432) 8496465 (24914) 2684638 (24870) 9069058 (24660) 9009741 (24986) 3460884 (25278) 
     dis: 	43445.973 47960.562 50931.422 51333.117 53788.348 54047.727 56673.465 57327.879 58623.586 59108.969 
query 2 nn's (62344, 63344): 7177617 (62433) 3674921 (62985) 8091170 (62831) 798434 (62637) 8768588 (62837) 5300364 (62690) 9468388 (62477) 2773347 (62770) 1370019 (62437) 2556033 (62610) 
     dis: 	42223.043 45696.559 48413.594 49354.551 51466.508 51955.039 52341.332 53859.551 54408.980 55301.320 
query 3 nn's (29217, 30217): 5565405 (29344) 4421559 (29265) 7402542 (30148) 9724475 (29878) 4082592 (30197) 9519664 (29805) 6433192 (30065) 5565859 (29515) 9344265 (29489) 6382606 (30010) 
     dis: 	40171.961 58634.789 62135.098 62644.391 63423.941 64018.480 64385.836 66030.781 66753.969 67460.820 
query 4 nn's (11691, 12691): 4913683 (12573) 3996078 (11775) 7175402 (12682) 8333810 (12690) 1459955 (11791) 3414877 (12093) 1198433 (12068) 2734717 (12579) 6827276 (11962) 6074730 (12128) 
     dis: 	30319.867 33875.797 36062.734 37969.750 40286.527 41214.309 42357.711 42391.430 43147.480 44041.469 
[ 495.503s ] *** Query time: 77.506
qps: 129.022
 *** ivfpq recall 
ivfpq get 621 postive res from 100000 results, recall@10:0.006
recall dist(10% per bucket): 0.940 0.059 0.002 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 495.505s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 20 192"
	User time (seconds): 465.87
	System time (seconds): 32.30
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:18.20
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51396520
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 15372137
	Voluntary context switches: 8
	Involuntary context switches: 784
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:15
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.719s ] Loaded metadata, 10000000 attr's found
[ 0.719s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.724s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.726s ] Loaded 10000 spacev10m queries
[ 0.733s ] Loaded ground truth, gt_size: 10
[ 0.733s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.059s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 486.064s ] Query results (vector ids, then distances):
query 0 nn's (60460, 61459): 9080559 (60929) 3419784 (61105) 1874547 (61356) 4716803 (60983) 5305701 (60534) 9170206 (61158) 2641065 (60915) 8621126 (60588) 7192069 (61410) 7135093 (60998) 
     dis: 	44843.242 45021.797 45256.668 45640.773 45672.391 47527.438 49030.039 49384.715 49594.418 49692.121 
query 1 nn's (96515, 97514): 2858528 (96822) 2644470 (96674) 1918163 (97269) 1814403 (97345) 9988575 (96658) 4225409 (97431) 199583 (96851) 6303489 (97496) 9674543 (97003) 3903781 (96917) 
     dis: 	42757.055 46986.438 49282.117 51476.645 52338.648 52588.074 54975.230 56587.188 57540.109 57813.992 
query 2 nn's (82013, 83012): 9014009 (82578) 7781120 (82237) 6997025 (82444) 9349926 (82712) 139815 (82431) 3984989 (82964) 3481340 (82110) 935246 (82207) 4921009 (82297) 2253189 (82334) 
     dis: 	41511.988 47096.973 47296.395 48481.664 49129.523 50415.188 50697.090 51621.586 51644.977 54264.824 
query 3 nn's (78919, 79918): 3907723 (79857) 3549535 (79218) 7345399 (79119) 2806985 (79338) 6524397 (78977) 5384118 (79344) 4581340 (79141) 172837 (79776) 4082592 (79537) 8713782 (79124) 
     dis: 	36117.723 58446.855 59571.516 60283.051 61278.824 61726.602 62898.234 63391.488 63423.941 63754.805 
query 4 nn's (34041, 35040): 4358085 (34149) 2731040 (34443) 6327018 (34612) 7617271 (34438) 4085396 (34454) 2311480 (34857) 6816771 (34604) 9002616 (35021) 7120249 (34936) 7263534 (34947) 
     dis: 	33070.551 35043.523 36114.953 36134.719 37149.219 37644.914 38179.828 38304.078 38836.238 39452.172 
[ 486.064s ] *** Query time: 71.034
qps: 140.777
 *** ivfpq recall 
ivfpq get 71843 postive res from 100000 results, recall@10:0.718
recall dist(10% per bucket): 0.001 0.006 0.016 0.038 0.054 0.090 0.117 0.159 0.211 0.225 0.084 
finished ivfpq index examples
[ 486.065s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 192"
	User time (seconds): 460.63
	System time (seconds): 27.57
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:09.04
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51465124
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 12880791
	Voluntary context switches: 3310
	Involuntary context switches: 728
	Swaps: 0
	File system inputs: 121392
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:13
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 20
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.771s ] Loaded metadata, 10000000 attr's found
[ 0.771s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.776s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.777s ] Loaded 10000 spacev10m queries
[ 0.785s ] Loaded ground truth, gt_size: 10
[ 0.785s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.259s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 86.176s ] Query results (vector ids, then distances):
query 0 nn's (100, 100): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (89, 89): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (18, 18): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (10, 10): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (96, 96): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 86.176s ] *** Query time: 9.063
qps: 1103.407
 *** ivfpq recall 
ivfpq get 1905 postive res from 100000 results, recall@10:0.019
recall dist(10% per bucket): 0.826 0.159 0.014 0.001 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 86.177s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 20 192"
	User time (seconds): 84.03
	System time (seconds): 1.34
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:26.35
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1618852
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 419624
	Voluntary context switches: 4862
	Involuntary context switches: 144
	Swaps: 0
	File system inputs: 71664
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
