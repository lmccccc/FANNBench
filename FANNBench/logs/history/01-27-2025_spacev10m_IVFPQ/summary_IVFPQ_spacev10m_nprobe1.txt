Start time: 01:17
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 1
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.719s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.720s ] Loaded 10000 spacev10m queries
[ 0.728s ] Loaded ground truth, gt_size: 10
[ 0.728s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.156s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 488.808s ] Query results (vector ids, then distances):
query 0 nn's (51111, 52111): 2483624 (51802) 9256869 (51116) 5232585 (51459) 1669078 (51662) 1391595 (51136) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	51999.168 56573.211 58481.293 60961.086 68920.391 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (24588, 25588): 4056736 (24969) 1711700 (24641) 9069058 (24660) 9009741 (24986) 3460884 (25278) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	43445.973 51333.117 57327.879 58623.586 59108.969 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (62344, 63344): 8091170 (62831) 9507453 (62397) 9804948 (62606) 2429183 (62593) 2255591 (62954) 3851243 (62825) 1539393 (63300) 5932917 (62653) -1 (0) -1 (0) 
     dis: 	48413.594 58274.594 63700.793 68919.102 77688.609 80487.578 84212.492 89639.719 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (29217, 30217): 5565405 (29344) 4421559 (29265) 9724475 (29878) 6433192 (30065) 1060420 (29915) 2314023 (29700) 6962746 (29554) 6270088 (29471) 6754864 (29778) 4400215 (29795) 
     dis: 	40171.961 58634.789 62644.391 64385.836 69247.797 69960.461 70042.039 71032.695 75762.031 78836.680 
query 4 nn's (11691, 12691): 4913683 (12573) 3996078 (11775) 7175402 (12682) 8333810 (12690) 3414877 (12093) 1198433 (12068) 6827276 (11962) 8545724 (12077) 762068 (12629) 5669664 (12104) 
     dis: 	30319.867 33875.797 36062.734 37969.750 41214.309 42357.711 43147.480 44348.027 44901.219 45793.570 
[ 488.808s ] *** Query time: 73.096
qps: 136.806
 *** ivfpq recall 
ivfpq get 191 postive res from 100000 results, recall@10:0.002
recall dist(10% per bucket): 0.981 0.019 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 488.810s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 1 192"
	User time (seconds): 456.61
	System time (seconds): 35.06
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:11.70
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51395496
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3
	Minor (reclaiming a frame) page faults: 17060961
	Voluntary context switches: 17
	Involuntary context switches: 865
	Swaps: 0
	File system inputs: 904
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:15
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 1
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.720s ] Loaded metadata, 10000000 attr's found
[ 0.720s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.725s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.727s ] Loaded 10000 spacev10m queries
[ 0.734s ] Loaded ground truth, gt_size: 10
[ 0.734s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.060s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 476.804s ] Query results (vector ids, then distances):
query 0 nn's (60460, 61459): 9080559 (60929) 4716803 (60983) 9269305 (61021) 2516913 (60669) 904452 (60825) 1877971 (60694) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	44843.242 45640.773 64198.750 65754.984 70119.422 84992.992 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (96515, 97514): 2858528 (96822) 1918163 (97269) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	42757.055 49282.117 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (82013, 83012): 981542 (82729) 8243900 (82350) 1326036 (82364) 2822776 (82777) 7829260 (82251) 6417080 (82973) 4530779 (82572) -1 (0) -1 (0) -1 (0) 
     dis: 	62017.570 66076.961 71308.875 74778.422 76339.906 87345.414 91742.289 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (78919, 79918): 3907723 (79857) 3549535 (79218) 2077396 (79432) 3601151 (79011) 6368015 (79725) 8742269 (79869) 3332857 (79767) 1272804 (79137) 4758643 (78973) 6689008 (79380) 
     dis: 	36117.723 58446.855 64176.062 65659.047 68810.539 76244.484 76355.453 80507.047 81502.617 82248.594 
query 4 nn's (34041, 35040): 4358085 (34149) 2731040 (34443) 6327018 (34612) 7617271 (34438) 4085396 (34454) 2311480 (34857) 7120249 (34936) 7263534 (34947) 5795613 (34351) 7619455 (34635) 
     dis: 	33070.551 35043.523 36114.953 36134.719 37149.219 37644.914 38836.238 39452.172 40712.379 40863.805 
[ 476.805s ] *** Query time: 64.040
qps: 156.152
 *** ivfpq recall 
ivfpq get 20082 postive res from 100000 results, recall@10:0.201
recall dist(10% per bucket): 0.284 0.240 0.166 0.113 0.069 0.047 0.029 0.022 0.017 0.010 0.004 
finished ivfpq index examples
[ 476.805s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 1 192"
	User time (seconds): 451.54
	System time (seconds): 27.34
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 7:59.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51465124
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 12880789
	Voluntary context switches: 3274
	Involuntary context switches: 726
	Swaps: 0
	File system inputs: 172072
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:13
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 1
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.771s ] Loaded metadata, 10000000 attr's found
[ 0.771s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.776s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.777s ] Loaded 10000 spacev10m queries
[ 0.785s ] Loaded ground truth, gt_size: 10
[ 0.785s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.256s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 88.139s ] Query results (vector ids, then distances):
query 0 nn's (100, 100): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (89, 89): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (18, 18): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (10, 10): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (96, 96): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 88.139s ] *** Query time: 7.003
qps: 1427.996
 *** ivfpq recall 
ivfpq get 110 postive res from 100000 results, recall@10:0.001
recall dist(10% per bucket): 0.989 0.011 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 88.141s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 1 192"
	User time (seconds): 85.56
	System time (seconds): 1.82
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:28.35
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1620448
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 542425
	Voluntary context switches: 4904
	Involuntary context switches: 138
	Swaps: 0
	File system inputs: 53888
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
