Start time: 01:17
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 3
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.719s ] Loaded metadata, 10000000 attr's found
[ 0.719s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.724s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.726s ] Loaded 10000 spacev10m queries
[ 0.733s ] Loaded ground truth, gt_size: 10
[ 0.733s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.221s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 506.799s ] Query results (vector ids, then distances):
query 0 nn's (51111, 52111): 2427833 (51682) 8140362 (51496) 2390635 (52026) 2483624 (51802) 3163065 (51137) 7402374 (51533) 8324793 (51148) 9256869 (51116) 8353983 (51611) 3482407 (51518) 
     dis: 	47167.891 47464.125 47898.281 51999.168 52413.906 52918.371 52976.492 56573.211 57790.328 58134.500 
query 1 nn's (24588, 25588): 4056736 (24969) 6338457 (25045) 1711700 (24641) 2035250 (25432) 9069058 (24660) 9009741 (24986) 3460884 (25278) 5964487 (25068) 4106178 (24636) 9586721 (24908) 
     dis: 	43445.973 50931.422 51333.117 53788.348 57327.879 58623.586 59108.969 59915.344 63407.250 64610.598 
query 2 nn's (62344, 63344): 8091170 (62831) 1370019 (62437) 3918866 (62424) 3560858 (63203) 3488198 (62362) 8885530 (62837) 9507453 (62397) 1604052 (63102) 4244568 (63168) 2193852 (62969) 
     dis: 	48413.594 54408.980 55441.547 55816.129 56543.375 57036.105 58274.594 59865.727 60541.438 60858.867 
query 3 nn's (29217, 30217): 5565405 (29344) 4421559 (29265) 7402542 (30148) 9724475 (29878) 6433192 (30065) 5565859 (29515) 1060420 (29915) 2314023 (29700) 6962746 (29554) 6270088 (29471) 
     dis: 	40171.961 58634.789 62135.098 62644.391 64385.836 66030.781 69247.797 69960.461 70042.039 71032.695 
query 4 nn's (11691, 12691): 4913683 (12573) 3996078 (11775) 7175402 (12682) 8333810 (12690) 1459955 (11791) 3414877 (12093) 1198433 (12068) 2734717 (12579) 6827276 (11962) 6074730 (12128) 
     dis: 	30319.867 33875.797 36062.734 37969.750 40286.527 41214.309 42357.711 42391.430 43147.480 44041.469 
[ 506.799s ] *** Query time: 88.852
qps: 112.546
 *** ivfpq recall 
ivfpq get 363 postive res from 100000 results, recall@10:0.004
recall dist(10% per bucket): 0.964 0.035 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 506.800s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_in_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 3 192"
	User time (seconds): 462.38
	System time (seconds): 47.70
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:30.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51398568
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 4
	Minor (reclaiming a frame) page faults: 22508125
	Voluntary context switches: 16
	Involuntary context switches: 709
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:15
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 3
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.721s ] Loaded metadata, 10000000 attr's found
[ 0.721s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.726s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.727s ] Loaded 10000 spacev10m queries
[ 0.734s ] Loaded ground truth, gt_size: 10
[ 0.734s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.070s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 513.772s ] Query results (vector ids, then distances):
query 0 nn's (60460, 61459): 9080559 (60929) 4716803 (60983) 7135093 (60998) 7164688 (60767) 5459247 (60579) 9305110 (61260) 759467 (60505) 7789551 (60702) 7279240 (61445) 7470677 (60980) 
     dis: 	44843.242 45640.773 49692.121 50698.789 50829.562 52175.324 52516.246 55086.438 55379.988 56046.102 
query 1 nn's (96515, 97514): 2858528 (96822) 2644470 (96674) 1918163 (97269) 3903781 (96917) 7222137 (97080) 3625947 (97474) 5549395 (97007) 377068 (96935) 3264339 (96747) 9910665 (96957) 
     dis: 	42757.055 46986.438 49282.117 57813.992 60007.637 60687.188 63736.859 68338.086 70672.688 72695.484 
query 2 nn's (82013, 83012): 9014009 (82578) 7781120 (82237) 4921009 (82297) 9316100 (82730) 9858552 (82252) 1709039 (82943) 4307529 (83008) 6280766 (82147) 4138649 (82357) 6335175 (82961) 
     dis: 	41511.988 47096.973 51644.977 55251.645 56632.832 57612.945 58673.309 58740.270 59116.355 59600.391 
query 3 nn's (78919, 79918): 3907723 (79857) 3549535 (79218) 7345399 (79119) 2806985 (79338) 6524397 (78977) 172837 (79776) 2077396 (79432) 3601151 (79011) 6368015 (79725) 313977 (79820) 
     dis: 	36117.723 58446.855 59571.516 60283.051 61278.824 63391.488 64176.062 65659.047 68810.539 69845.406 
query 4 nn's (34041, 35040): 4358085 (34149) 2731040 (34443) 6327018 (34612) 7617271 (34438) 4085396 (34454) 2311480 (34857) 6816771 (34604) 9002616 (35021) 7120249 (34936) 7263534 (34947) 
     dis: 	33070.551 35043.523 36114.953 36134.719 37149.219 37644.914 38179.828 38304.078 38836.238 39452.172 
[ 513.772s ] *** Query time: 99.180
qps: 100.826
 *** ivfpq recall 
ivfpq get 39163 postive res from 100000 results, recall@10:0.392
recall dist(10% per bucket): 0.075 0.134 0.144 0.147 0.124 0.103 0.081 0.063 0.062 0.046 0.020 
finished ivfpq index examples
[ 513.774s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 3 192"
	User time (seconds): 453.69
	System time (seconds): 62.43
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:36.96
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 51463076
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 30539301
	Voluntary context switches: 3279
	Involuntary context switches: 788
	Swaps: 0
	File system inputs: 151360
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:13
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64
nprobe: 3
dim: 192
loaded base attributes from:/mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.772s ] Loaded metadata, 10000000 attr's found
[ 0.772s ] Loading query vectors and attributes
query vecs data loaded, with dim: 192, nb=10000
[ 0.776s ] Loaded query vectors from /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs
[ 0.778s ] Loaded 10000 spacev10m queries
[ 0.785s ] Loaded ground truth, gt_size: 10
[ 0.785s ] Index Params -- d: 192, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.266s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.000
[ 86.504s ] Query results (vector ids, then distances):
query 0 nn's (100, 100): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (89, 89): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (18, 18): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (10, 10): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (96, 96): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 86.504s ] *** Query time: 7.524
qps: 1328.992
 *** ivfpq recall 
ivfpq get 334 postive res from 100000 results, recall@10:0.003
recall dist(10% per bucket): 0.967 0.032 0.001 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 86.505s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/yfcc10m/base10M.fvecs /mnt/data/mocheng/dataset/yfcc10m/query10k.fvecs /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/qrangesel_1000_1_100000_out_dist.json /mnt/data/mocheng/dataset/yfcc10m/label/sel_1_100000_dist/sif_gt_sel_1000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/yfcc10m/ivfpq/index/index_ivfpq_sel_1_100000_dist_64 3 192"
	User time (seconds): 84.45
	System time (seconds): 1.37
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:26.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1618852
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 419688
	Voluntary context switches: 4937
	Involuntary context switches: 285
	Swaps: 0
	File system inputs: 37320
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
