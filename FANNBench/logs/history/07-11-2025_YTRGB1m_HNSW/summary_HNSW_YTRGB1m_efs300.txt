Start time: 06:09
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 300
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.090s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.091s ] Loaded 10000 YTRGB1m queries
[ 0.157s ] Loaded ground truth, gt_size: 100
[ 0.157s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 13.743s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 53.368s ] Query results (vector ids, then distances):
query 0 nn's (1267, 6842): 986245 (2438) 984621 (1376) 333483 (3213) 521249 (5304) 48714 (3285) 980214 (3358) 662806 (3695) 599702 (5849) 916929 (1333) 499361 (1578) 550823 (2306) 457861 (2688) 680375 (6632) 208021 (3671) 745412 (2410) 366566 (2645) 506665 (1558) 263709 (6739) 821751 (5964) 336603 (4871) 673940 (1914) 492327 (6667) 776796 (1294) 496578 (6234) 19514 (1726) 451807 (5018) 327418 (1759) 958384 (5794) 991479 (1889) 634590 (1960) 80751 (3227) 148116 (5722) 202136 (1684) 953921 (1591) 437459 (5473) 956829 (1988) 913246 (5761) 785594 (2179) 392724 (6459) 126306 (3063) 403197 (2974) 373440 (2001) 301781 (3912) 473207 (5280) 928790 (1921) 151446 (2812) 742291 (3284) 772499 (1576) 23924 (6546) 767101 (6697) 857336 (1283) 736474 (2699) 606062 (4154) 915739 (5456) 854843 (5388) 314104 (1435) 267332 (6586) 361766 (5902) 97757 (2971) 966722 (2387) 696449 (3411) 528429 (2461) 745278 (3309) 218663 (3791) 14572 (5342) 546302 (2102) 907166 (5172) 196808 (1502) 617300 (3148) 692591 (1529) 877336 (1807) 842440 (3523) 960618 (1790) 115812 (1380) 424122 (5216) 90603 (2224) 532465 (4866) 509845 (3059) 228636 (1659) 733667 (2990) 68653 (2930) 365176 (3417) 752039 (3266) 921897 (1925) 699839 (3716) 888221 (1481) 871043 (2232) 287255 (5789) 811631 (5789) 736154 (3441) 559959 (2989) 797209 (6428) 286299 (3905) 798630 (2446) 572163 (6324) 79495 (1635) 154713 (3135) 938241 (4537) 385293 (2339) 343722 (6668) 
     dis: 	82.411 86.047 86.921 88.069 88.391 88.567 88.756 89.420 91.724 92.143 92.250 92.535 92.633 92.745 92.912 92.933 93.096 93.351 93.910 94.061 94.137 94.346 94.695 94.896 94.944 95.141 95.468 95.874 96.063 96.103 96.190 96.290 96.339 96.544 96.570 96.595 96.727 96.728 96.742 96.779 96.836 96.838 96.977 97.046 97.122 97.334 97.409 97.552 97.607 97.666 97.720 98.050 98.162 98.190 98.233 98.247 98.250 98.389 98.413 98.491 98.565 98.578 98.597 98.628 98.658 98.720 98.760 98.804 98.823 98.913 98.952 98.987 99.072 99.113 99.142 99.244 99.263 99.294 99.311 99.358 99.368 99.368 99.395 99.401 99.402 99.426 99.500 99.518 99.518 99.567 99.569 99.574 99.698 99.755 99.763 99.770 99.770 99.772 99.812 99.855 
query 1 nn's (1660, 9508): 230459 (3753) 302746 (1711) 497306 (2143) 506689 (8264) 853723 (9251) 138086 (2308) 373852 (9446) 326679 (7296) 358433 (2215) 689633 (2134) 545680 (1765) 848578 (5045) 586453 (3477) 867145 (3477) 212675 (2980) 30000 (2697) 997428 (4777) 762596 (3982) 724711 (1975) 641093 (5191) 383855 (3706) 546146 (8226) 641020 (3337) 941312 (1688) 267568 (3482) 209172 (2572) 997115 (3442) 499809 (2891) 203058 (8499) 558172 (8694) 878354 (7441) 400581 (4261) 854843 (5388) 666817 (7868) 30138 (3354) 422255 (6055) 301766 (6986) 316563 (4749) 463893 (3965) 908662 (3242) 821906 (7164) 855336 (3986) 289226 (9045) 672148 (3991) 145755 (1979) 302319 (2950) 519648 (4122) 455764 (8077) 899467 (9013) 554657 (2471) 427979 (4299) 633004 (1721) 385515 (4630) 325785 (3140) 23747 (7099) 889441 (3943) 978444 (1877) 473207 (5280) 28365 (5180) 776677 (1806) 499646 (3877) 832537 (1673) 380657 (4109) 844413 (4109) 806534 (5392) 890430 (4922) 178309 (2848) 970271 (3147) 880286 (3001) 114503 (3851) 927330 (4340) 322796 (4504) 340079 (2293) 343722 (6668) 849697 (2919) 35170 (2701) 14572 (5342) 535625 (8224) 707130 (2333) 840311 (6928) 788358 (2146) 749825 (4399) 606832 (6411) 990959 (4835) 401052 (4664) 652195 (4535) 521080 (3037) 146952 (9262) 393726 (2230) 554135 (4709) 462868 (5450) 835729 (6482) 432424 (5134) 536636 (3230) 632909 (3808) 337196 (8584) 504375 (4741) 857567 (2629) 581825 (7549) 748796 (3573) 
     dis: 	49.807 50.920 53.385 53.409 54.131 54.327 54.349 54.387 54.582 54.671 55.071 55.190 55.571 55.592 55.768 56.676 57.041 57.311 57.385 57.629 57.791 57.845 58.112 58.600 58.695 58.750 58.805 58.930 59.126 59.138 59.399 59.488 59.616 59.621 59.634 59.809 59.843 60.037 60.086 60.113 60.181 60.290 60.343 60.396 60.418 60.516 60.620 60.813 61.078 61.097 61.222 61.296 61.335 61.462 61.510 61.594 61.625 61.627 61.651 61.803 61.874 61.932 61.960 61.960 61.995 62.043 62.054 62.157 62.232 62.299 62.371 62.492 62.499 62.535 62.590 62.751 62.793 62.837 62.905 62.962 62.964 62.988 63.047 63.110 63.152 63.282 63.406 63.427 63.525 63.569 63.618 63.621 63.676 63.678 63.685 63.699 63.748 63.766 63.811 63.833 
query 2 nn's (1724, 10052): 423205 (2778) 531527 (2028) 435470 (4103) 871743 (6917) 225875 (3761) 633590 (2353) 528201 (3388) 509845 (3059) 666817 (7868) 979613 (2315) 795823 (2418) 667162 (2608) 698610 (9525) 677717 (2098) 37850 (3810) 76351 (5317) 798437 (2090) 572163 (6324) 44203 (5374) 473207 (5280) 604626 (4097) 476128 (1903) 383560 (6198) 443951 (7383) 223022 (8146) 907166 (5172) 142229 (4776) 812421 (2111) 236892 (2433) 823721 (6753) 630882 (3507) 39208 (9268) 290643 (5230) 867372 (5230) 386531 (3860) 917665 (1758) 423023 (5239) 915528 (6361) 949063 (4593) 932640 (2080) 831224 (2491) 970371 (1827) 851559 (2393) 379259 (6362) 184588 (5632) 946688 (4582) 641427 (3362) 763079 (3029) 969746 (1756) 707130 (2333) 519648 (4122) 320908 (1817) 65926 (9241) 353253 (6420) 597155 (4822) 782560 (4366) 254396 (3142) 356703 (3859) 963167 (4050) 849697 (2919) 680642 (2588) 633712 (4907) 50122 (5663) 899160 (2387) 84539 (5643) 985228 (7900) 146952 (9262) 497144 (4142) 885167 (3033) 732994 (2449) 519970 (2215) 863223 (2470) 763020 (3231) 932857 (8830) 741618 (9016) 605288 (3308) 244227 (4078) 236165 (5450) 558501 (5059) 564154 (6410) 900209 (8837) 167842 (6026) 819590 (4135) 546302 (2102) 446219 (2095) 270729 (7283) 345118 (3063) 508045 (4277) 658912 (2588) 236295 (9051) 132407 (9802) 956829 (1988) 408274 (6114) 726382 (2038) 641688 (6168) 305326 (5264) 914987 (2951) 358307 (1757) 310661 (8886) 247033 (2415) 
     dis: 	132.517 135.263 135.721 136.001 136.506 137.396 137.993 139.068 139.336 139.364 139.694 140.515 140.740 140.872 141.033 141.252 141.481 141.624 141.655 141.696 141.867 141.927 142.023 142.090 142.580 142.668 142.683 142.744 142.869 143.115 143.290 143.307 143.368 143.368 143.420 143.591 143.631 144.096 144.163 144.189 144.344 144.566 144.570 144.617 144.632 144.659 144.693 144.721 144.756 144.939 144.949 144.956 144.971 145.010 145.067 145.118 145.122 145.231 145.256 145.283 145.285 145.323 145.334 145.353 145.486 145.517 145.587 145.650 145.736 145.751 145.839 145.936 145.982 146.012 146.027 146.039 146.045 146.131 146.192 146.220 146.252 146.277 146.292 146.309 146.361 146.414 146.447 146.517 146.518 146.551 146.565 146.684 146.802 146.894 146.900 146.916 147.110 147.126 147.331 147.345 
query 3 nn's (4411, 96384): 462979 (19619) 505074 (5015) 551084 (19440) 99295 (12875) 759272 (73427) 469561 (27078) 14703 (35001) 954742 (18664) 979326 (37641) 669483 (8365) 263195 (22042) 440840 (6170) 997286 (51186) 136177 (7299) 260825 (20057) 647424 (64537) 762909 (16388) 343722 (6668) 878957 (4648) 976180 (4922) 159269 (17223) 750794 (13264) 688852 (63424) 683491 (5347) 827077 (15838) 433245 (14738) 916832 (59789) 346681 (54490) 863647 (22357) 13341 (17517) 550872 (55957) 106987 (74575) 665690 (52020) 447077 (55154) 20352 (87234) 942390 (43613) 939051 (8340) 496154 (4954) 605960 (10890) 980968 (17438) 371257 (9041) 242590 (9493) 365062 (85401) 14572 (5342) 430803 (4709) 968556 (8873) 829520 (16678) 426874 (31024) 64796 (11224) 470530 (5116) 237251 (7053) 679824 (4571) 855530 (6327) 369664 (71930) 826248 (14343) 808082 (65464) 179696 (22798) 25654 (19438) 360005 (30819) 888936 (11998) 46589 (85872) 784717 (4535) 488731 (28745) 666817 (7868) 835969 (32497) 420277 (75695) 861784 (7063) 95475 (62765) 289356 (16886) 263846 (6652) 790206 (43137) 877698 (29252) 492607 (33506) 588086 (13515) 831892 (7646) 616256 (8455) 489829 (4529) 764097 (4529) 346637 (5254) 549981 (10918) 521248 (7371) 70519 (23994) 488682 (17594) 750013 (21049) 782913 (6006) 422255 (6055) 97774 (69439) 233803 (62680) 251977 (6370) 501456 (13653) 768738 (13483) 753624 (12135) 233180 (42722) 909386 (4633) 150833 (37196) 196352 (5812) 666290 (55721) 983705 (10543) 978931 (13810) 465564 (5047) 
     dis: 	141.830 147.460 164.455 167.020 169.516 170.649 171.253 171.878 173.730 176.589 178.330 179.198 179.973 181.360 183.437 183.476 183.497 183.788 184.499 184.638 184.646 184.733 184.969 185.168 185.228 185.319 185.433 185.512 185.611 186.085 186.155 186.271 186.645 186.664 186.694 186.797 186.889 187.193 187.332 187.357 187.419 187.428 187.594 187.699 187.899 188.115 188.177 188.439 188.479 188.564 188.590 188.628 188.697 188.730 188.776 188.792 188.811 188.854 188.872 188.882 188.893 188.922 188.957 188.978 189.037 189.091 189.183 189.271 189.277 189.384 189.450 189.564 189.673 189.726 189.754 189.809 189.851 189.851 189.853 190.052 190.241 190.324 190.326 190.362 190.388 190.439 190.515 190.526 190.527 190.544 190.671 190.819 190.822 190.852 190.856 190.919 190.984 190.997 191.030 191.113 
query 4 nn's (2797, 24298): 719380 (6117) 690285 (9682) 950887 (3058) 461345 (2800) 89809 (2923) 62933 (5287) 969735 (4636) 27286 (4314) 565522 (19123) 693282 (5409) 47460 (3919) 273627 (2842) 644921 (5913) 959418 (5913) 815136 (7725) 615031 (3284) 111408 (14080) 266702 (6225) 188274 (7640) 272857 (3951) 559665 (12525) 343865 (20909) 272496 (18617) 170938 (11027) 983374 (10478) 864885 (19198) 135954 (4746) 739152 (5705) 258251 (3855) 226676 (4119) 15399 (6715) 455363 (3320) 209754 (10381) 661394 (2815) 86342 (3736) 6454 (3445) 786745 (4533) 874168 (15510) 721826 (4048) 276912 (14988) 663997 (3070) 757368 (5521) 302474 (17449) 385674 (10284) 382982 (4717) 404547 (4920) 497393 (11477) 70344 (4839) 36993 (3549) 584795 (10383) 229832 (9081) 912472 (12400) 395213 (5480) 4088 (17006) 498294 (3128) 827290 (13481) 257393 (4241) 275060 (16756) 586210 (2841) 418523 (6069) 935609 (15982) 480782 (3981) 974457 (7853) 333654 (6917) 386301 (20767) 190353 (15609) 775952 (2986) 544230 (3556) 728440 (3870) 502520 (6040) 274883 (5325) 256494 (3107) 176390 (3343) 634282 (3479) 128627 (3185) 696717 (6458) 972938 (2894) 355417 (18277) 751330 (3112) 116068 (16968) 289163 (4384) 571909 (3511) 474720 (9053) 700992 (8185) 293069 (18042) 190638 (10576) 448311 (5539) 347553 (5121) 610034 (2998) 617093 (10582) 407673 (2970) 609376 (15945) 982288 (7738) 491474 (10606) 921753 (4200) 337667 (11728) 308421 (15078) 234841 (7108) 322526 (3554) 176623 (4578) 
     dis: 	56.225 63.143 66.157 71.556 72.466 75.294 75.616 76.658 79.761 79.911 80.512 82.765 85.364 85.364 87.205 89.072 89.257 89.644 90.257 90.618 92.775 93.190 93.271 93.543 95.224 95.693 95.789 96.374 96.452 96.461 97.103 98.303 98.516 98.811 99.177 99.236 99.466 99.828 100.669 101.112 101.224 102.005 102.008 102.415 102.790 104.333 104.634 104.909 105.419 105.425 105.988 106.107 106.557 107.351 107.404 107.546 107.735 108.890 109.168 109.269 109.471 111.196 111.889 112.157 112.985 113.465 114.946 115.196 115.382 116.618 116.943 116.995 117.364 117.862 117.874 117.890 118.047 118.266 119.218 120.623 120.899 120.954 122.207 122.211 122.454 122.729 123.263 123.455 123.507 123.821 124.714 124.754 125.073 126.047 126.250 126.891 126.986 127.612 127.843 127.862 
[ 53.369s ] *** Query time: 34.078
qps: 293.442
 *** HNSW recall 
HNSW get 885761 postive res from 1000000 results, recall@100:0.886
recall dist(10% per bucket): 0.000 0.000 0.001 0.004 0.012 0.026 0.054 0.099 0.190 0.438 0.175 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 102589981, average: 10258.998
finished ivfpq index examples
[ 53.401s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 300 1024"
	User time (seconds): 39.18
	System time (seconds): 4.09
	Percent of CPU this job got: 80%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:53.67
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4405156
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1351726
	Voluntary context switches: 17741
	Involuntary context switches: 101
	Swaps: 0
	File system inputs: 237200
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:27
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 300
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.068s ] Loaded metadata, 1000000 attr's found
[ 0.068s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.092s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.094s ] Loaded 10000 YTRGB1m queries
[ 0.160s ] Loaded ground truth, gt_size: 100
[ 0.160s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.310s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 48.251s ] Query results (vector ids, then distances):
query 0 nn's (38855, 139269): 239994 (69257) 737273 (113404) 469118 (94608) 99619 (56529) 952701 (51288) 973705 (48354) 945815 (121035) 315673 (136096) 863882 (51634) 95475 (62765) 405113 (58331) 568143 (56188) 886648 (67332) 168854 (102701) 687363 (84946) 961694 (52597) 621002 (95283) 777637 (45828) 365062 (85401) 38549 (71441) 332465 (69390) 177205 (64270) 487597 (38858) 845691 (132967) 927007 (105409) 591405 (48860) 697156 (59339) 157253 (50094) 287783 (107613) 685636 (67940) 17042 (58961) 194751 (87459) 833876 (103114) 743615 (63284) 606206 (106200) 6650 (46141) 171157 (50166) 233180 (42722) 723113 (113220) 530852 (39981) 309399 (49073) 611212 (107273) 190812 (68460) 331219 (43651) 208438 (71280) 369664 (71930) 45401 (61365) 791360 (97375) 159479 (134177) 291869 (60821) 64977 (103226) 228654 (49919) 2220 (114060) 233174 (52402) 788030 (131709) 926276 (84589) 382175 (58821) 331006 (93815) 303105 (72726) 124476 (62846) 973665 (51005) 357004 (46372) 401781 (130927) 126870 (78337) 277825 (54571) 792564 (39634) 69523 (78535) 926927 (41279) 171543 (103064) 830061 (79577) 990950 (60583) 969764 (88779) 337939 (39492) 401826 (85550) 612226 (121085) 874351 (106381) 368711 (84197) 668769 (103579) 916832 (59789) 122 (61749) 789868 (115348) 574717 (83547) 219449 (42279) 510532 (136372) 65646 (41980) 532527 (39243) 840279 (93361) 833219 (54275) 475413 (48055) 233803 (62680) 767612 (108997) 151733 (132610) 210707 (132554) 197241 (135209) 485284 (41292) 580731 (40596) 138764 (63968) 83981 (45687) 946913 (72892) 623826 (77627) 
     dis: 	89.980 91.199 92.759 92.927 93.375 95.349 95.953 96.081 96.189 96.407 96.994 97.295 97.387 97.698 97.770 97.799 97.904 98.057 98.121 98.448 98.558 98.570 98.605 98.666 98.666 98.769 99.344 99.355 99.489 99.798 100.014 100.039 100.137 100.280 100.402 100.430 100.546 100.631 100.852 100.875 100.971 100.982 100.991 101.137 101.140 101.372 101.384 101.621 101.710 101.784 101.821 101.848 101.904 101.926 101.964 102.086 102.106 102.113 102.150 102.170 102.176 102.212 102.228 102.279 102.385 102.396 102.398 102.405 102.410 102.480 102.541 102.602 102.603 102.651 102.759 102.764 102.799 102.844 103.011 103.032 103.086 103.100 103.113 103.214 103.244 103.271 103.337 103.401 103.408 103.480 103.591 103.614 103.736 103.751 103.762 103.775 103.776 103.854 103.861 103.865 
query 1 nn's (18169, 37472): 411735 (20503) 380703 (20612) 833378 (33326) 431933 (31516) 360005 (30819) 365136 (35560) 731008 (26372) 146981 (27559) 466827 (32372) 667959 (22694) 341272 (33974) 295338 (23441) 179696 (22798) 19864 (27480) 3603 (31109) 68977 (18686) 192956 (31543) 47728 (27849) 726691 (25268) 946883 (28688) 233078 (29116) 118351 (25619) 598416 (21098) 150833 (37196) 16765 (20200) 52602 (19685) 477114 (30008) 543197 (20634) 500782 (33541) 912768 (18376) 771649 (21020) 974111 (22166) 687142 (33212) 51398 (19663) 264943 (28664) 194780 (19444) 942583 (30751) 821644 (27446) 213076 (29082) 741615 (34604) 821801 (31766) 940537 (24263) 115350 (19329) 527178 (31646) 230172 (33504) 751844 (28760) 359643 (34794) 954116 (18258) 511634 (29803) 211104 (30694) 465103 (21069) 152541 (22903) 448322 (30878) 436716 (21905) 555984 (31852) 912701 (22126) 132155 (26583) 293139 (23353) 376974 (27778) 228240 (22018) 96578 (31995) 495200 (20824) 290862 (23931) 427621 (32279) 881118 (24072) 697711 (18272) 750013 (21049) 957981 (32888) 981996 (21641) 168692 (29115) 427862 (19135) 203528 (24114) 184289 (36069) 383249 (32617) 651655 (31045) 816510 (22437) 117525 (30703) 150740 (19844) 356370 (27771) 304169 (24025) 178299 (35235) 102411 (33855) 637701 (22823) 855115 (30634) 984013 (18208) 20535 (20397) 455847 (33445) 364296 (29202) 410906 (35763) 422419 (36615) 157863 (32552) 752069 (34158) 980063 (21608) 207241 (20673) 842541 (33185) 197643 (28630) 929308 (18785) 902322 (18696) 870111 (21380) 389702 (32628) 
     dis: 	55.105 55.684 56.308 56.479 56.682 57.351 57.361 57.848 59.323 59.359 59.383 59.520 59.794 59.850 60.212 60.388 60.529 60.626 61.442 61.566 61.702 61.919 61.972 62.099 62.190 62.256 62.342 62.574 62.724 63.191 63.328 63.422 63.514 63.650 63.904 63.985 64.031 64.042 64.189 64.415 64.812 64.926 64.988 65.032 65.077 65.123 65.206 65.299 65.339 65.531 65.597 65.610 65.817 65.858 65.985 66.127 66.248 66.251 66.365 66.390 66.453 66.482 66.589 66.639 66.731 67.066 67.106 67.309 67.494 67.609 67.618 67.648 67.694 67.708 67.766 67.789 67.812 67.891 67.893 67.929 67.930 67.963 68.264 68.407 68.425 68.463 68.569 68.710 68.881 68.960 69.009 69.028 69.049 69.106 69.204 69.269 69.309 69.338 69.360 69.419 
query 2 nn's (4082, 5859): 435470 (4103) 76351 (5317) 44203 (5374) 473207 (5280) 604626 (4097) 907166 (5172) 142229 (4776) 290643 (5230) 867372 (5230) 423023 (5239) 949063 (4593) 184588 (5632) 946688 (4582) 519648 (4122) 597155 (4822) 782560 (4366) 633712 (4907) 50122 (5663) 84539 (5643) 497144 (4142) 236165 (5450) 558501 (5059) 819590 (4135) 508045 (4277) 305326 (5264) 328799 (5567) 932543 (4118) 781678 (4994) 71259 (5747) 277446 (5024) 554135 (4709) 436932 (5555) 377529 (4688) 679824 (4571) 712602 (4487) 630699 (4658) 998487 (4202) 569017 (4765) 433589 (5709) 854843 (5388) 17420 (5022) 199535 (5018) 385515 (4630) 247261 (5397) 167374 (5739) 449792 (5825) 438213 (4538) 674462 (4287) 530526 (4798) 947106 (4774) 392694 (4216) 815597 (5254) 493014 (4115) 601030 (5333) 816913 (4756) 551602 (4317) 692734 (4603) 676264 (4336) 432424 (5134) 863861 (4786) 499626 (4172) 366114 (5339) 258599 (5339) 909566 (4479) 629834 (5751) 534055 (4120) 239982 (5050) 882530 (4430) 190977 (5773) 784717 (4535) 532465 (4866) 186275 (4406) 130066 (4554) 927330 (4340) 942850 (4324) 558132 (5707) 335122 (4561) 231442 (5117) 6655 (4340) 359987 (5430) 871871 (4478) 597346 (4542) 859440 (5646) 100836 (4479) 202908 (4271) 925764 (4862) 799123 (5565) 160171 (5805) 909386 (4633) 346075 (4574) 763207 (4398) 59070 (4163) 527491 (5579) 427979 (4299) 342182 (4293) 14572 (5342) 139829 (5411) 24385 (5169) 285773 (5796) 424122 (5216) 
     dis: 	135.721 141.252 141.655 141.696 141.867 142.668 142.683 143.368 143.368 143.631 144.163 144.632 144.659 144.949 145.067 145.118 145.323 145.334 145.486 145.650 146.131 146.192 146.292 146.517 146.916 147.475 147.521 147.704 147.946 148.164 148.335 148.410 148.485 148.536 148.722 148.744 148.996 149.251 149.370 149.894 149.907 150.101 150.116 150.285 150.301 150.437 150.501 150.561 150.566 150.692 150.858 151.028 151.048 151.076 151.268 151.307 151.346 151.575 151.592 151.593 151.653 151.658 151.780 151.821 151.890 152.170 152.279 152.346 152.424 152.488 152.592 152.626 152.687 152.711 152.728 152.845 152.848 152.903 152.926 152.935 152.949 152.992 152.996 153.089 153.120 153.180 153.180 153.241 153.279 153.284 153.420 153.450 153.540 153.581 153.596 153.620 153.672 153.771 153.772 154.127 
query 3 nn's (2262, 3092): 608874 (2611) 117658 (2990) 871467 (2996) 717608 (2612) 523139 (2339) 312252 (2292) 258253 (2335) 849185 (2837) 509845 (3059) 101897 (2384) 633590 (2353) 858706 (2801) 849697 (2919) 19718 (2359) 966722 (2387) 707130 (2333) 352736 (2415) 533120 (2357) 737025 (2790) 771511 (2736) 30000 (2697) 471359 (2978) 798630 (2446) 399100 (3047) 795823 (2418) 712956 (2338) 817369 (2332) 733667 (2990) 457861 (2688) 918714 (2641) 831224 (2491) 243530 (2935) 192949 (3016) 590966 (2778) 976089 (2681) 411099 (2779) 267098 (2969) 835321 (2605) 405398 (2319) 684080 (2336) 613643 (2330) 956822 (2719) 656478 (2421) 292249 (2445) 145583 (2266) 178428 (2642) 351541 (2355) 291162 (3074) 746075 (2776) 247033 (2415) 478079 (2873) 715925 (2919) 825275 (2492) 288929 (2357) 217161 (2663) 544996 (2330) 119905 (2323) 593711 (2913) 588414 (2601) 451866 (2646) 665817 (2828) 629155 (2420) 501231 (2838) 218807 (2348) 244054 (2381) 212398 (2966) 44918 (2661) 3917 (2319) 322631 (2318) 726796 (2932) 554657 (2471) 361877 (2915) 200470 (2419) 377220 (2698) 977854 (2973) 766795 (2538) 526775 (2716) 474688 (2346) 596303 (2414) 323837 (2773) 979403 (2654) 230304 (2882) 925084 (2995) 315960 (2305) 829255 (2695) 561081 (2585) 949836 (3012) 692149 (2726) 822302 (2991) 970365 (2766) 96588 (2525) 547760 (2874) 677320 (2505) 431382 (3013) 643807 (2268) 188351 (2352) 411219 (2633) 959823 (2462) 911902 (2603) 584458 (2749) 
     dis: 	177.477 184.267 185.836 185.953 186.303 186.915 186.954 188.542 188.699 189.435 189.866 189.974 190.094 190.694 191.237 191.816 191.997 192.001 192.041 192.242 192.243 192.279 192.351 192.360 192.444 192.511 192.693 192.797 193.233 193.546 193.615 193.683 193.703 193.866 194.033 194.049 194.058 194.154 194.299 194.318 194.339 194.406 194.437 194.476 194.570 194.629 194.647 194.698 194.752 194.977 194.984 195.007 195.028 195.084 195.136 195.217 195.272 195.563 195.625 195.676 195.692 195.710 195.716 195.875 195.880 195.905 195.949 195.950 196.062 196.300 196.547 196.561 196.616 196.619 196.647 196.650 196.668 196.809 196.837 196.881 196.902 196.909 196.933 197.065 197.087 197.111 197.113 197.223 197.258 197.292 197.299 197.327 197.339 197.507 197.530 197.670 197.730 197.731 197.783 197.784 
query 4 nn's (16428, 32488): 565522 (19123) 343865 (20909) 272496 (18617) 864885 (19198) 302474 (17449) 4088 (17006) 275060 (16756) 552830 (32019) 386301 (20767) 751020 (27082) 355417 (18277) 116068 (16968) 293069 (18042) 447832 (18420) 670582 (19694) 364055 (30344) 215246 (16692) 43472 (19642) 461668 (22573) 433585 (22578) 135006 (19823) 482871 (31752) 80632 (30566) 116975 (28540) 402419 (17404) 969231 (24228) 563483 (25877) 873208 (30361) 431001 (21575) 78554 (27618) 290057 (16747) 153984 (18166) 852896 (18166) 761157 (16912) 304444 (21816) 874283 (25622) 556246 (19761) 142006 (17347) 827661 (20637) 146341 (20254) 619492 (19283) 543121 (25639) 131389 (19666) 623593 (18134) 488630 (30984) 577821 (23826) 440098 (25974) 383160 (23668) 588204 (17716) 201818 (30510) 684777 (27160) 746526 (18730) 824409 (19732) 436165 (18592) 829421 (19896) 583217 (23326) 283216 (17793) 35111 (20340) 525452 (19269) 924570 (24774) 217696 (21238) 485218 (31412) 46598 (20264) 656479 (16617) 412572 (17029) 97457 (17664) 147278 (22121) 14463 (29424) 222797 (17731) 331288 (21606) 822401 (26342) 762346 (27676) 870983 (23558) 592893 (18577) 447972 (20679) 15672 (24317) 494185 (32231) 795207 (29927) 129404 (23330) 122962 (31601) 523379 (26695) 858847 (31474) 672303 (25764) 968281 (25497) 929041 (31461) 311830 (19606) 158351 (30590) 196780 (18444) 717069 (27425) 767957 (29384) 259071 (30286) 789423 (22571) 479317 (18941) 337037 (29716) 659981 (30466) 111364 (17260) 175181 (16742) 522574 (21880) 954617 (29581) 873671 (25607) 
     dis: 	79.761 93.190 93.271 95.693 102.008 107.351 108.890 112.116 112.985 115.876 118.266 120.623 122.454 131.431 136.046 136.089 137.921 141.973 144.884 145.103 150.147 157.582 158.153 158.531 160.879 162.646 166.233 166.339 168.688 169.100 173.069 175.554 175.554 175.576 176.703 177.402 182.206 182.848 183.373 184.562 186.038 186.752 188.367 194.496 194.782 201.050 201.767 202.767 204.364 207.359 207.432 208.200 208.610 209.449 210.626 210.970 211.591 211.929 213.751 214.317 214.906 215.732 216.557 218.588 218.922 219.621 222.845 223.460 228.477 231.479 232.402 232.798 234.506 235.157 235.822 240.526 242.177 250.338 253.747 255.145 258.721 258.933 261.220 268.413 273.213 274.269 274.795 274.959 275.126 275.299 277.897 285.642 285.882 289.065 294.690 301.320 301.565 306.181 308.967 313.857 
[ 48.251s ] *** Query time: 38.404
qps: 260.387
 *** HNSW recall 
HNSW get 740686 postive res from 1000000 results, recall@100:0.741
recall dist(10% per bucket): 0.000 0.000 0.002 0.018 0.058 0.111 0.158 0.229 0.262 0.157 0.005 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 102589981, average: 10258.998
finished ivfpq index examples
[ 48.282s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 300 1024"
	User time (seconds): 44.80
	System time (seconds): 3.75
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:48.56
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4404476
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1165646
	Voluntary context switches: 1
	Involuntary context switches: 104
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:15
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 300
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.067s ] Loaded metadata, 1000000 attr's found
[ 0.067s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.092s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.094s ] Loaded 10000 YTRGB1m queries
[ 0.160s ] Loaded ground truth, gt_size: 100
[ 0.160s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.209s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 43.398s ] Query results (vector ids, then distances):
query 0 nn's (1256, 1308): 510683 (1260) 776796 (1294) 857336 (1283) 242809 (1257) 301718 (1269) 379533 (1299) 229020 (1291) 872768 (1301) 97496 (1267) 215200 (1268) 361566 (1306) 794785 (1256) 751512 (1279) 879227 (1306) 677772 (1287) 953026 (1286) 318062 (1276) 411971 (1271) 462882 (1300) 667785 (1300) 611202 (1281) 965606 (1269) 803931 (1273) 133980 (1272) 962051 (1269) 461082 (1289) 394184 (1287) 108089 (1257) 835655 (1265) 85201 (1279) 821616 (1278) 142657 (1266) 691943 (1277) 900269 (1290) 263275 (1261) 805749 (1266) 759409 (1297) 518345 (1284) 418950 (1278) 735446 (1277) 669085 (1256) 105701 (1278) 935805 (1294) 194389 (1273) 810479 (1277) 721638 (1306) 153834 (1285) 306749 (1275) 304830 (1285) 116938 (1275) 309592 (1296) 22091 (1274) 484838 (1280) 775045 (1283) 732933 (1292) 939782 (1271) 974546 (1257) 51135 (1294) 677279 (1267) 52489 (1297) 109656 (1261) 375564 (1257) 746249 (1265) 371282 (1261) 926386 (1287) 412995 (1292) 750551 (1305) 601822 (1284) 946600 (1267) 250322 (1292) 505372 (1308) 39540 (1257) 904187 (1287) 753648 (1297) 897963 (1287) 135955 (1261) 100399 (1279) 292384 (1260) 510187 (1256) 61296 (1276) 165346 (1281) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	92.935 94.695 97.720 103.930 106.469 106.652 107.337 107.628 107.636 107.904 108.085 108.558 108.840 109.431 110.481 110.732 111.452 111.567 112.900 113.198 113.286 113.607 113.698 114.208 115.382 115.721 116.657 117.144 117.378 117.491 118.311 119.083 119.322 120.274 120.945 121.386 122.108 123.347 123.786 123.825 123.988 124.269 124.520 124.746 124.932 125.604 126.230 127.643 128.301 130.618 131.108 132.036 133.240 134.658 135.478 136.324 136.349 136.612 137.634 138.453 141.127 141.351 141.848 143.194 143.660 144.220 146.763 147.219 147.970 163.435 166.207 176.611 178.073 178.112 182.523 185.186 201.508 212.828 229.163 252.502 382.159 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (8869, 9273): 853723 (9251) 289226 (9045) 899467 (9013) 146952 (9262) 67855 (9144) 189649 (9182) 39208 (9268) 867373 (8991) 726010 (9250) 474261 (8914) 345668 (8887) 265730 (8953) 737956 (9075) 305825 (9235) 795421 (9264) 43518 (9029) 274948 (9007) 693979 (9204) 214631 (8940) 267742 (8935) 304295 (8982) 723029 (9119) 440798 (9058) 464381 (9023) 702455 (8906) 245203 (8938) 909568 (9011) 726231 (9267) 831590 (8887) 197276 (9242) 344918 (9070) 845733 (9049) 334003 (8964) 485527 (9188) 949971 (9086) 969590 (9220) 694762 (9093) 951198 (8919) 147942 (9023) 473562 (9204) 513647 (9086) 11373 (9143) 427998 (9207) 306103 (9135) 283126 (9121) 565027 (9001) 702829 (9089) 233873 (9203) 815853 (9011) 541403 (9026) 167186 (9205) 932108 (9149) 609872 (9053) 317295 (8988) 164604 (9152) 456559 (8963) 998857 (9089) 18131 (8881) 955719 (8982) 557314 (8967) 298087 (8930) 212519 (9089) 359722 (9103) 796205 (9014) 574639 (9244) 933828 (8945) 164522 (9003) 756342 (9190) 131605 (9057) 176047 (9252) 235041 (9152) 240538 (9151) 476041 (9034) 938918 (8909) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	54.131 60.343 61.078 63.427 67.867 68.242 68.813 69.328 70.427 70.986 71.223 72.128 72.439 72.615 72.896 73.822 75.711 76.103 76.803 76.947 77.543 77.858 78.111 78.124 78.342 78.918 79.120 79.380 80.440 80.989 81.051 81.168 82.537 82.864 84.525 84.626 84.638 85.153 86.604 87.017 87.783 88.971 90.917 91.958 92.488 92.870 93.559 94.921 95.974 105.618 107.166 110.863 114.850 115.468 115.567 115.737 117.483 118.725 129.010 144.942 145.460 149.627 162.969 167.248 169.881 170.252 215.046 237.299 243.554 247.136 251.257 389.345 443.841 483.820 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1883, 1943): 476128 (1903) 620703 (1905) 891387 (1904) 159822 (1884) 862477 (1910) 236569 (1884) 281526 (1904) 248211 (1901) 351493 (1942) 664838 (1924) 839265 (1886) 568504 (1943) 290935 (1886) 120594 (1902) 962748 (1916) 814997 (1884) 568894 (1933) 187478 (1905) 377971 (1930) 886493 (1884) 172282 (1943) 921897 (1925) 736907 (1917) 729778 (1903) 943205 (1925) 390391 (1937) 249613 (1916) 983636 (1904) 193390 (1927) 405769 (1922) 814507 (1935) 156480 (1936) 437489 (1899) 837665 (1912) 795242 (1932) 672556 (1929) 165953 (1891) 204291 (1910) 630586 (1903) 639234 (1938) 724393 (1937) 419962 (1927) 281504 (1906) 527914 (1910) 76125 (1934) 91942 (1932) 614649 (1914) 810170 (1928) 339494 (1933) 350089 (1916) 629050 (1890) 25599 (1912) 871690 (1901) 610421 (1940) 289754 (1884) 831477 (1904) 192749 (1914) 743108 (1942) 681531 (1934) 862345 (1942) 562034 (1909) 716605 (1936) 609353 (1942) 288101 (1910) 953484 (1908) 604150 (1905) 210283 (1936) 167824 (1939) 128486 (1888) 915601 (1920) 374473 (1886) 594844 (1904) 15630 (1893) 931426 (1928) 916174 (1929) 678453 (1904) 119235 (1911) 914775 (1903) 188018 (1908) 47975 (1890) 643411 (1893) 34705 (1926) 403210 (1896) 906895 (1900) 88424 (1888) 166170 (1883) 285180 (1890) 568519 (1908) 530451 (1909) 460844 (1900) 164065 (1886) 676583 (1917) 252876 (1941) 437191 (1892) 683530 (1922) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	141.927 148.201 148.590 149.309 150.065 150.578 152.555 152.762 152.879 154.368 155.035 155.412 155.821 156.693 157.273 158.007 158.261 158.339 159.218 159.321 160.105 160.540 160.708 160.925 161.404 162.295 163.175 164.866 165.180 166.215 166.369 166.989 168.874 168.887 169.607 170.464 170.597 171.240 171.939 173.445 174.256 174.794 175.953 176.421 176.486 176.886 179.097 179.525 179.894 181.595 182.464 185.177 187.015 188.544 191.171 191.293 191.362 191.910 192.625 193.249 193.887 195.672 204.885 207.035 208.872 211.667 212.847 214.435 217.757 218.498 220.205 222.424 225.656 228.646 229.585 232.900 242.860 247.980 256.726 265.100 279.050 281.327 325.289 329.443 332.092 333.545 346.565 355.921 376.150 429.240 445.379 502.218 510.239 514.465 801.915 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (3917, 4053): 609297 (3970) 963521 (4034) 749227 (3925) 387378 (4031) 45286 (4023) 150035 (3961) 254201 (3976) 100035 (4013) 184514 (4030) 257384 (4007) 188560 (4007) 46583 (3990) 673145 (3991) 573373 (3988) 373578 (3997) 186394 (3987) 454508 (3990) 826206 (4034) 762596 (3982) 80874 (4027) 360219 (3922) 672148 (3991) 178264 (3967) 920741 (3924) 304402 (3937) 243387 (3918) 789040 (4008) 850476 (4050) 299576 (3972) 932093 (4035) 264575 (4046) 502675 (3983) 261311 (3983) 61132 (3966) 744902 (4037) 114735 (3969) 445146 (3947) 353112 (3977) 380611 (3950) 555305 (4010) 190165 (3927) 399363 (4040) 666743 (4015) 165130 (4013) 125293 (3917) 900029 (3998) 183396 (3978) 82260 (3956) 968992 (4007) 500260 (3942) 248979 (3993) 353082 (3958) 303906 (4041) 483839 (3981) 199302 (4049) 856211 (3934) 278429 (3937) 205059 (4019) 475594 (3945) 155559 (3965) 615233 (3944) 279949 (3930) 213066 (4007) 620393 (3948) 677749 (3991) 141784 (4003) 226168 (3955) 958817 (3922) 523429 (3941) 752385 (3996) 644406 (4046) 322991 (3924) 36287 (3929) 682104 (4007) 867686 (4008) 877435 (3937) 750330 (3924) 601614 (3977) 955582 (4038) 528567 (3937) 572356 (4037) 262127 (3940) 29747 (3940) 806794 (4006) 375114 (4026) 999049 (3992) 455631 (3988) 431979 (3995) 434858 (4014) 987256 (4048) 591605 (3919) 774878 (3952) 267277 (3986) 728172 (4052) 113465 (3938) 352996 (3971) 2765 (4031) 348403 (4052) 595055 (4040) 316737 (3927) 
     dis: 	184.386 191.211 192.834 192.976 193.914 194.914 195.990 197.744 199.257 199.617 199.634 199.800 199.959 199.992 200.369 201.556 201.819 202.231 202.711 202.932 204.071 204.075 204.163 204.168 204.842 204.879 204.955 204.977 205.791 205.923 206.522 206.933 207.440 207.697 207.861 207.871 208.067 208.094 208.202 208.695 209.300 209.641 210.806 210.841 211.675 211.962 212.059 212.106 212.431 212.656 212.899 213.081 214.493 214.606 215.427 215.814 216.205 216.583 217.641 217.735 218.911 219.610 221.454 222.216 222.603 223.537 224.900 225.359 227.477 229.260 230.245 232.136 233.393 233.469 234.923 235.304 235.365 236.321 236.380 239.248 244.048 244.503 245.558 246.997 250.826 252.682 255.179 275.937 286.381 291.043 300.253 302.569 309.212 361.297 362.267 380.330 397.019 400.063 431.898 487.594 
query 4 nn's (6195, 6441): 266702 (6225) 619953 (6242) 82323 (6199) 246790 (6322) 477947 (6220) 133257 (6213) 782564 (6196) 291473 (6438) 59582 (6274) 931967 (6363) 123181 (6420) 511711 (6298) 552765 (6257) 793115 (6413) 982708 (6298) 460502 (6301) 620456 (6416) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	89.644 132.251 142.849 154.143 180.409 182.511 187.850 194.887 204.973 220.604 245.075 252.031 283.565 285.538 287.317 364.235 431.285 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 43.398s ] *** Query time: 34.523
qps: 289.666
 *** HNSW recall 
HNSW get 279464 postive res from 1000000 results, recall@100:0.279
recall dist(10% per bucket): 0.056 0.223 0.280 0.251 0.146 0.037 0.006 0.001 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 102589981, average: 10258.998
finished ivfpq index examples
[ 43.429s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 300 1024"
	User time (seconds): 40.22
	System time (seconds): 3.51
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:43.74
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4406180
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 1100217
	Voluntary context switches: 1
	Involuntary context switches: 76
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 08:33
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 300
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.181s ] Loaded metadata, 1000000 attr's found
[ 0.181s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.205s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.206s ] Loaded 10000 YTRGB1m queries
[ 0.325s ] Loaded ground truth, gt_size: 100
[ 0.325s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.604s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 59.240s ] Query results (vector ids, then distances):
query 0 nn's (2164, 2171): 509736 (2170) 733856 (2169) 81848 (2170) 648810 (2170) 342146 (2167) 537894 (2165) 2976 (2164) 765851 (2165) 677266 (2171) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	100.257 105.957 107.792 115.016 115.710 116.933 117.829 121.053 164.849 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (4231, 4245): 210350 (4235) 189071 (4233) 19250 (4241) 846901 (4242) 284592 (4233) 354387 (4240) 882331 (4238) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	70.158 73.131 81.357 82.528 82.540 107.279 259.937 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (24551, 24732): 706569 (24619) 85078 (24687) 943915 (24695) 54327 (24628) 787895 (24560) 89285 (24628) 408697 (24603) 671578 (24708) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	160.681 167.493 188.503 189.164 199.022 222.614 285.392 299.609 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (2590, 2598): 845672 (2591) 163097 (2595) 485308 (2591) 789443 (2598) 879952 (2590) 756877 (2593) 430156 (2594) 443198 (2590) 400507 (2591) 726308 (2593) 124111 (2598) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	197.914 201.432 208.681 213.320 227.478 232.479 248.108 255.151 275.983 282.032 394.094 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (5249, 5268): 297194 (5257) 995312 (5250) 509510 (5267) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	163.781 188.011 334.961 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 59.240s ] *** Query time: 48.482
qps: 206.264
 *** HNSW recall 
HNSW get 52482 postive res from 1000000 results, recall@100:0.052
recall dist(10% per bucket): 0.887 0.112 0.001 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 102589981, average: 10258.998
finished ivfpq index examples
[ 59.282s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 100 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 300 1024"
	User time (seconds): 51.06
	System time (seconds): 8.65
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:59.85
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4404232
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2353022
	Voluntary context switches: 1
	Involuntary context switches: 147
	Swaps: 0
	File system inputs: 0
	File system outputs: 72
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
