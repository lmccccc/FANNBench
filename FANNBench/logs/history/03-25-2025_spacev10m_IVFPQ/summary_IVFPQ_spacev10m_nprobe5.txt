Start time: 04:32
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100
nprobe: 5
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.712s ] Loaded metadata, 10000000 attr's found
[ 0.712s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.714s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.716s ] Loaded 10000 spacev10m queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.723s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.935s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 72.059s ] Query results (vector ids, then distances):
query 0 nn's (40616, 90615): 1352077 (75218) 1300400 (68247) 525784 (86118) 606211 (46345) 1781760 (80354) 7509422 (86182) 8021837 (54227) 290760 (73276) 6583311 (47922) 1714233 (65633) 
     dis: 	3268.221 3451.792 5269.367 5289.615 5431.436 5895.430 6236.472 6278.234 6319.569 6417.146 
query 1 nn's (23827, 73826): 1027770 (59556) 3545414 (44593) 6716785 (66378) 3843020 (54844) 547651 (43364) 2769394 (73340) 9149269 (64835) 913237 (31716) 1286599 (26580) 2201796 (69121) 
     dis: 	4900.294 7509.891 7593.169 8691.773 9004.402 9178.679 9268.881 9373.139 9544.611 9564.128 
query 2 nn's (32197, 82196): 4574760 (37531) 5189301 (43405) 8005273 (37538) 4290437 (79182) 3524579 (49429) 8672246 (67919) 5932138 (71360) 8699363 (38066) 5193386 (58419) 5236859 (46044) 
     dis: 	3037.224 3383.687 3874.177 4542.042 5012.328 6280.505 6957.796 7276.653 7401.517 7518.517 
query 3 nn's (10631, 60630): 4286832 (17230) 1208824 (37041) 1165548 (45426) 1681561 (52434) 9732223 (41833) 7375372 (33987) 7371232 (47114) 8694166 (43201) 1717763 (23291) 7664306 (35020) 
     dis: 	4919.051 7734.653 7868.146 8437.070 8900.137 9178.121 9248.313 9677.692 9693.879 9711.588 
query 4 nn's (49705, 99704): 3987492 (98027) 9211260 (81222) 6872756 (95706) 9788862 (69419) 4015525 (99118) 9652129 (94239) 2038833 (53914) 1587943 (87738) 2320125 (78596) 9044829 (55243) 
     dis: 	3754.258 5811.854 5914.744 6165.131 6207.134 6290.574 6331.320 6389.488 6409.105 6425.558 
[ 72.059s ] *** Query time: 10.055
qps: 994.521
 *** ivfpq recall 
ivfpq get 64171 postive res from 100000 results, recall@10:0.642
recall dist(10% per bucket): 0.028 0.048 0.057 0.071 0.077 0.083 0.091 0.100 0.117 0.155 0.175 
finished ivfpq index examples
[ 72.060s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_50000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_50000_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100 5 100"
	User time (seconds): 70.61
	System time (seconds): 1.61
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:12.22
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2392996
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 612310
	Voluntary context switches: 1
	Involuntary context switches: 96
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:38
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100
nprobe: 5
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.719s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.721s ] Loaded 10000 spacev10m queries
[ 0.728s ] Loaded ground truth, gt_size: 10
[ 0.728s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.880s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 72.408s ] Query results (vector ids, then distances):
query 0 nn's (40856, 50855): 606211 (46345) 6583311 (47922) 3082748 (43400) 38473 (46733) 8997960 (41694) 8538301 (43948) 7007393 (50612) 6547416 (46965) 2433318 (41182) 244510 (41564) 
     dis: 	5289.615 6319.569 6912.179 7033.922 7179.660 7562.222 7737.246 7846.215 8181.531 8238.786 
query 1 nn's (25003, 35002): 913237 (31716) 1286599 (26580) 4764135 (25237) 7191660 (26554) 2400979 (32818) 2677560 (29840) 1259440 (29909) 1580619 (31013) 7983026 (33895) 6825634 (34589) 
     dis: 	9373.139 9544.611 9887.145 10210.189 10359.908 10692.555 11053.697 11107.436 11132.148 11398.040 
query 2 nn's (52136, 62135): 5193386 (58419) 9602743 (57407) 6648184 (54160) 7126935 (58871) 2557172 (56410) 6451690 (52651) 2655117 (60703) 8719744 (57812) 8060848 (58300) 7430287 (54464) 
     dis: 	7401.517 8058.683 9968.670 10000.562 10072.217 10303.545 10314.253 10883.082 11198.382 11459.719 
query 3 nn's (22672, 32671): 1717763 (23291) 391722 (24862) 3188407 (24304) 4251611 (29775) 9892318 (23797) 5621855 (30749) 3626273 (24674) 6703969 (32159) 2851767 (31496) 5563393 (26978) 
     dis: 	9693.879 9911.799 9963.515 10446.959 10538.189 10713.815 10817.467 11161.422 11180.747 11204.627 
query 4 nn's (53667, 63666): 2038833 (53914) 9044829 (55243) 3192757 (54312) 8627902 (60097) 7921516 (63604) 4734386 (57789) 6851242 (63477) 2157254 (54534) 6549886 (63665) 5627225 (58815) 
     dis: 	6331.320 6425.558 6820.370 7008.999 7161.380 7163.534 7198.533 7239.095 7332.757 7348.586 
[ 72.408s ] *** Query time: 8.398
qps: 1190.713
 *** ivfpq recall 
ivfpq get 58250 postive res from 100000 results, recall@10:0.583
recall dist(10% per bucket): 0.035 0.057 0.072 0.089 0.093 0.095 0.106 0.102 0.105 0.133 0.113 
finished ivfpq index examples
[ 72.409s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_10000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_10000_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100 5 100"
	User time (seconds): 71.00
	System time (seconds): 1.55
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:12.56
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2392988
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 612312
	Voluntary context switches: 1
	Involuntary context switches: 80
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:41
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100
nprobe: 5
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.717s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.718s ] Loaded 10000 spacev10m queries
[ 0.725s ] Loaded ground truth, gt_size: 10
[ 0.725s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.887s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 73.349s ] Query results (vector ids, then distances):
query 0 nn's (4494, 5493): 6149370 (4957) 2272371 (5258) 7693645 (4921) 9641558 (4559) 6166564 (4617) 2939481 (4939) 841307 (4995) 7587297 (4745) 8339032 (4998) 3403324 (5319) 
     dis: 	9906.254 12363.262 12463.322 12572.834 12593.342 12633.062 12912.242 13778.904 14106.844 14108.244 
query 1 nn's (37505, 38504): 5755448 (37848) 5790200 (38489) 4994601 (38150) 364702 (38495) 8391132 (38008) 7789051 (37871) 4358727 (38259) 4114888 (38331) 4415604 (38158) 4732664 (37565) 
     dis: 	11981.357 12582.086 12685.133 12807.728 12835.654 12984.461 13502.615 13877.012 14137.369 14321.002 
query 2 nn's (17888, 18887): 2768752 (18434) 7060335 (18263) 192071 (18322) 4001654 (18856) 3343989 (18166) 3852413 (18339) 8865121 (18145) 651373 (18369) 7090551 (18836) 7253171 (18873) 
     dis: 	7858.528 10548.176 10666.045 11021.605 12302.426 12718.633 12858.840 12881.179 13633.435 13641.033 
query 3 nn's (11109, 12108): 5687185 (12097) 561416 (11821) 8459637 (11541) 3969193 (11781) 7578623 (11167) 1473665 (11327) 5285822 (11716) 6204802 (12016) 6557504 (11784) 3061123 (12077) 
     dis: 	11311.201 12443.826 12725.975 13575.896 13576.689 13598.822 13726.621 13821.068 14102.807 14312.707 
query 4 nn's (17141, 18140): 4786845 (17889) 6998246 (18012) 1076381 (18061) 8170734 (17334) 2187988 (17418) 2580119 (17508) 8124740 (18081) 2602997 (17192) 3522636 (17522) 4083979 (17257) 
     dis: 	6872.748 8726.975 8727.570 8801.138 9308.465 9425.358 9706.603 10040.492 10106.255 10140.066 
[ 73.349s ] *** Query time: 8.169
qps: 1224.115
 *** ivfpq recall 
ivfpq get 41534 postive res from 100000 results, recall@10:0.415
recall dist(10% per bucket): 0.073 0.113 0.128 0.132 0.122 0.115 0.104 0.085 0.064 0.043 0.022 
finished ivfpq index examples
[ 73.350s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_1000_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_1000_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100 5 100"
	User time (seconds): 72.04
	System time (seconds): 1.46
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:13.50
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2392988
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 612318
	Voluntary context switches: 1
	Involuntary context switches: 61
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:44
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100
nprobe: 5
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.712s ] Loaded metadata, 10000000 attr's found
[ 0.712s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.715s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.716s ] Loaded 10000 spacev10m queries
[ 0.723s ] Loaded ground truth, gt_size: 10
[ 0.723s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.856s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 71.357s ] Query results (vector ids, then distances):
query 0 nn's (15274, 15373): 5769046 (15300) 4702781 (15290) 9762541 (15350) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9734.154 15890.248 20202.680 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (47455, 47554): 7518689 (47475) 3080191 (47543) 2932629 (47539) 8831076 (47472) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	14082.488 16598.205 20448.271 23836.430 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (2622, 2721): 6508399 (2700) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	14396.654 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (73957, 74056): 6689609 (74003) 4050481 (73978) 5661120 (74004) 3150044 (74030) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	11787.401 13871.771 16316.687 16320.598 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (58381, 58480): 4103136 (58443) 7200685 (58419) 532679 (58442) 7339652 (58385) 3348493 (58467) 8017355 (58427) 703909 (58417) 1462270 (58452) -1 (0) -1 (0) 
     dis: 	8382.631 10964.821 11245.034 12452.727 12473.959 12651.703 13125.625 13756.365 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 71.357s ] *** Query time: 7.722
qps: 1295.043
 *** ivfpq recall 
ivfpq get 16659 postive res from 100000 results, recall@10:0.167
recall dist(10% per bucket): 0.246 0.286 0.216 0.132 0.072 0.028 0.013 0.005 0.001 0.000 0.000 
finished ivfpq index examples
[ 71.358s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100 5 100"
	User time (seconds): 70.13
	System time (seconds): 1.36
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:11.49
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2393000
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 612334
	Voluntary context switches: 1
	Involuntary context switches: 78
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
