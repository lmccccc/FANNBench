Start time: 00:23
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json
K: 100
nprobe: 100
collection name: collection_redcaps1m_sel_2_100000_random_512
collection  collection_redcaps1m_sel_2_100000_random_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  989454  postive res from  1000000  results, recall@ 100 : 0.989454
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00 1.000e-04
 3.000e-04 2.300e-03 6.730e-01 3.243e-01]
10000  queries cost: 1515.7893879413605 , qps: 6.597222595403774
	Command being timed: "python -u utils/pymilvus_ivfpq_arbi.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_6_2_100000_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_6_2_100000_random_6_100.json 100 100 collection_redcaps1m_sel_2_100000_random_512 query 512 512"
	User time (seconds): 113.90
	System time (seconds): 7.33
	Percent of CPU this job got: 7%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 26:32.48
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 153124
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 96217
	Voluntary context switches: 49207
	Involuntary context switches: 407739
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:50
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_100.json
K: 100
nprobe: 100
collection name: collection_redcaps1m_sel_2_100000_random_512
collection  collection_redcaps1m_sel_2_100000_random_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  987787  postive res from  1000000  results, recall@ 100 : 0.987787
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00 4.000e-04
 1.200e-03 6.800e-03 6.485e-01 3.431e-01]
10000  queries cost: 1659.7265498638153 , qps: 6.025088892396476
	Command being timed: "python -u utils/pymilvus_ivfpq_arbi.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_10_2_100000_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_10_2_100000_random_10_100.json 100 100 collection_redcaps1m_sel_2_100000_random_512 query 512 512"
	User time (seconds): 129.75
	System time (seconds): 8.34
	Percent of CPU this job got: 7%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 29:09.76
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 152880
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3
	Minor (reclaiming a frame) page faults: 97128
	Voluntary context switches: 50991
	Involuntary context switches: 559271
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 03:02
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_100.json
K: 100
nprobe: 100
collection name: collection_redcaps1m_sel_2_100000_random_512
collection  collection_redcaps1m_sel_2_100000_random_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
ids shape: 10000 100
gt shape: (10000, 100)
milvus get  963132  postive res from  1000000  results, recall@ 100 : 0.963132
recall dist(10\% per bucket):  [0.000e+00 0.000e+00 0.000e+00 0.000e+00 4.000e-04 1.700e-03 6.300e-03
 2.160e-02 7.720e-02 6.192e-01 2.736e-01]
10000  queries cost: 1659.5298187732697 , qps: 6.025803144285793
	Command being timed: "python -u utils/pymilvus_ivfpq_arbi.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_19_2_100000_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_19_2_100000_random_19_100.json 100 100 collection_redcaps1m_sel_2_100000_random_512 query 512 512"
	User time (seconds): 145.42
	System time (seconds): 8.28
	Percent of CPU this job got: 8%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 29:13.51
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 152768
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 105669
	Voluntary context switches: 53688
	Involuntary context switches: 524285
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:10
dataset: redcaps1m
N: 1000000
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json
query range file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json
ground truth file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_100.json
K: 100
nprobe: 100
collection name: collection_redcaps1m_sel_2_100000_random_512
collection  collection_redcaps1m_sel_2_100000_random_512  exists
collection size: data: ["{'count(*)': 1000000}"]
query d: 512
get query szie: 10000
get range cnt: 10000
ngt= 10000  nq= 10000  k= 100
error, get  98  results, expect  100
res: data: ["[{'id': 256634, 'distance': 0.9237049221992493, 'entity': {}}, {'id': 613511, 'distance': 0.9343404769897461, 'entity': {}}, {'id': 241761, 'distance': 0.9369649887084961, 'entity': {}}, {'id': 255742, 'distance': 0.9373140335083008, 'entity': {}}, {'id': 966948, 'distance': 0.949451208114624, 'entity': {}}, {'id': 7767, 'distance': 0.9544339179992676, 'entity': {}}, {'id': 241910, 'distance': 0.9650580286979675, 'entity': {}}, {'id': 298234, 'distance': 0.977686882019043, 'entity': {}}, {'id': 653738, 'distance': 0.9814421534538269, 'entity': {}}, {'id': 783306, 'distance': 0.9914982318878174, 'entity': {}}, {'id': 757550, 'distance': 1.0044970512390137, 'entity': {}}, {'id': 933380, 'distance': 1.0078331232070923, 'entity': {}}, {'id': 597729, 'distance': 1.0153018236160278, 'entity': {}}, {'id': 356155, 'distance': 1.0162855386734009, 'entity': {}}, {'id': 336981, 'distance': 1.0189411640167236, 'entity': {}}, {'id': 857568, 'distance': 1.0190902948379517, 'entity': {}}, {'id': 448636, 'distance': 1.0244380235671997, 'entity': {}}, {'id': 531964, 'distance': 1.0255255699157715, 'entity': {}}, {'id': 845113, 'distance': 1.0315852165222168, 'entity': {}}, {'id': 297652, 'distance': 1.0444694757461548, 'entity': {}}, {'id': 807039, 'distance': 1.048026442527771, 'entity': {}}, {'id': 539765, 'distance': 1.0491796731948853, 'entity': {}}, {'id': 503526, 'distance': 1.0492006540298462, 'entity': {}}, {'id': 742864, 'distance': 1.0516133308410645, 'entity': {}}, {'id': 441355, 'distance': 1.0545521974563599, 'entity': {}}, {'id': 736194, 'distance': 1.0586220026016235, 'entity': {}}, {'id': 691141, 'distance': 1.0744775533676147, 'entity': {}}, {'id': 448584, 'distance': 1.0751885175704956, 'entity': {}}, {'id': 472365, 'distance': 1.0836892127990723, 'entity': {}}, {'id': 600540, 'distance': 1.0855286121368408, 'entity': {}}, {'id': 78873, 'distance': 1.088112235069275, 'entity': {}}, {'id': 712762, 'distance': 1.0882658958435059, 'entity': {}}, {'id': 886000, 'distance': 1.0882889032363892, 'entity': {}}, {'id': 571891, 'distance': 1.103212594985962, 'entity': {}}, {'id': 340510, 'distance': 1.1036509275436401, 'entity': {}}, {'id': 206012, 'distance': 1.1066251993179321, 'entity': {}}, {'id': 481549, 'distance': 1.1074793338775635, 'entity': {}}, {'id': 497761, 'distance': 1.1101598739624023, 'entity': {}}, {'id': 444208, 'distance': 1.110817551612854, 'entity': {}}, {'id': 684893, 'distance': 1.1116864681243896, 'entity': {}}, {'id': 692525, 'distance': 1.115785837173462, 'entity': {}}, {'id': 347762, 'distance': 1.1206140518188477, 'entity': {}}, {'id': 340051, 'distance': 1.1227383613586426, 'entity': {}}, {'id': 990450, 'distance': 1.1349084377288818, 'entity': {}}, {'id': 836382, 'distance': 1.1363499164581299, 'entity': {}}, {'id': 361133, 'distance': 1.146252989768982, 'entity': {}}, {'id': 905347, 'distance': 1.1471290588378906, 'entity': {}}, {'id': 784847, 'distance': 1.1482863426208496, 'entity': {}}, {'id': 913982, 'distance': 1.1543769836425781, 'entity': {}}, {'id': 303836, 'distance': 1.157780408859253, 'entity': {}}, {'id': 99853, 'distance': 1.166923999786377, 'entity': {}}, {'id': 228191, 'distance': 1.179135799407959, 'entity': {}}, {'id': 107416, 'distance': 1.1792501211166382, 'entity': {}}, {'id': 565417, 'distance': 1.1813247203826904, 'entity': {}}, {'id': 565207, 'distance': 1.1879191398620605, 'entity': {}}, {'id': 116306, 'distance': 1.2139766216278076, 'entity': {}}, {'id': 986784, 'distance': 1.216424822807312, 'entity': {}}, {'id': 943078, 'distance': 1.222691297531128, 'entity': {}}, {'id': 989794, 'distance': 1.2281080484390259, 'entity': {}}, {'id': 697395, 'distance': 1.2300325632095337, 'entity': {}}, {'id': 67121, 'distance': 1.2304058074951172, 'entity': {}}, {'id': 984678, 'distance': 1.2316222190856934, 'entity': {}}, {'id': 938608, 'distance': 1.2335755825042725, 'entity': {}}, {'id': 997705, 'distance': 1.2346694469451904, 'entity': {}}, {'id': 982848, 'distance': 1.2378268241882324, 'entity': {}}, {'id': 984183, 'distance': 1.2380218505859375, 'entity': {}}, {'id': 169942, 'distance': 1.2388893365859985, 'entity': {}}, {'id': 362073, 'distance': 1.2438443899154663, 'entity': {}}, {'id': 757293, 'distance': 1.2463802099227905, 'entity': {}}, {'id': 968085, 'distance': 1.2513231039047241, 'entity': {}}, {'id': 996107, 'distance': 1.260704755783081, 'entity': {}}, {'id': 997809, 'distance': 1.2663838863372803, 'entity': {}}, {'id': 479311, 'distance': 1.2760893106460571, 'entity': {}}, {'id': 956444, 'distance': 1.276931643486023, 'entity': {}}, {'id': 935578, 'distance': 1.279732584953308, 'entity': {}}, {'id': 675657, 'distance': 1.2819838523864746, 'entity': {}}, {'id': 926522, 'distance': 1.2887353897094727, 'entity': {}}, {'id': 923128, 'distance': 1.2932233810424805, 'entity': {}}, {'id': 965153, 'distance': 1.2977163791656494, 'entity': {}}, {'id': 630756, 'distance': 1.3079545497894287, 'entity': {}}, {'id': 635391, 'distance': 1.3107050657272339, 'entity': {}}, {'id': 374827, 'distance': 1.324476957321167, 'entity': {}}, {'id': 646593, 'distance': 1.328624963760376, 'entity': {}}, {'id': 980466, 'distance': 1.3326714038848877, 'entity': {}}, {'id': 983467, 'distance': 1.3424896001815796, 'entity': {}}, {'id': 982530, 'distance': 1.3524303436279297, 'entity': {}}, {'id': 984571, 'distance': 1.3530073165893555, 'entity': {}}, {'id': 994928, 'distance': 1.3603253364562988, 'entity': {}}, {'id': 417275, 'distance': 1.3628482818603516, 'entity': {}}, {'id': 38953, 'distance': 1.3639477491378784, 'entity': {}}, {'id': 765502, 'distance': 1.3674663305282593, 'entity': {}}, {'id': 988716, 'distance': 1.3741579055786133, 'entity': {}}, {'id': 946491, 'distance': 1.3961337804794312, 'entity': {}}, {'id': 992718, 'distance': 1.4064809083938599, 'entity': {}}, {'id': 950842, 'distance': 1.4191534519195557, 'entity': {}}, {'id': 985389, 'distance': 1.4355570077896118, 'entity': {}}, {'id': 966758, 'distance': 1.4848322868347168, 'entity': {}}, {'id': 994933, 'distance': 1.5676226615905762, 'entity': {}}]"]
exp: label_attr == 20 and 17674 <= range_attr <= 20828
Traceback (most recent call last):
  File "utils/pymilvus_ivfpq_arbi.py", line 247, in <module>
    if(ids[i][top] == gt[i][gtind]):
IndexError: list index out of range
Command exited with non-zero status 1
	Command being timed: "python -u utils/pymilvus_ivfpq_arbi.py redcaps1m 1000000 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/attr_sel_2_100000_random.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/qrangesel_20_2_100000_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_2_100000_random/sif_gt_sel_20_2_100000_random_20_100.json 100 100 collection_redcaps1m_sel_2_100000_random_512 query 512 512"
	User time (seconds): 6.50
	System time (seconds): 3.89
	Percent of CPU this job got: 23%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:43.36
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 152116
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 66088
	Voluntary context switches: 2428
	Involuntary context switches: 605027
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 1
