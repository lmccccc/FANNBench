Start time: 09:16
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.785s ] Loaded metadata, 10000000 attr's found
[ 0.785s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.788s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.790s ] Loaded 10000 sift10M queries
[ 0.807s ] Loaded ground truth, gt_size: 10
[ 0.807s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.095s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.190
[ 110.787s ] Query results (vector ids, then distances):
query 0 nn's (15254, 35254): 4160485 (18340) 2898305 (16783) 4538400 (25471) 6984373 (34761) 5579551 (33289) 2923944 (18397) 7164607 (26189) 9925949 (31632) 578867 (18379) 2549151 (26210) 
     dis: 	65950.000 67180.000 76603.000 76880.000 78568.000 79984.000 80358.000 80660.000 80841.000 81827.000 
query 1 nn's (62177, 82177): 8449497 (78596) 5552416 (65287) 1263214 (70019) 9791343 (75449) 3309105 (69952) 1745130 (71531) 6378991 (73833) 8675999 (69203) 7692715 (63767) 9933148 (62209) 
     dis: 	32633.000 42944.000 47608.000 51493.000 51760.000 54734.000 54869.000 56407.000 56490.000 57000.000 
query 2 nn's (79782, 99782): 3900297 (92680) 1931585 (85608) 289025 (89537) 3493381 (96585) 9416415 (91891) 9068473 (87943) 436139 (84089) 8455929 (99630) 8432027 (82488) 3832486 (91890) 
     dis: 	43033.000 48317.000 48416.000 51043.000 51724.000 52145.000 52554.000 53383.000 53772.000 54273.000 
query 3 nn's (27374, 47374): 4083199 (34822) 8174765 (34010) 3421136 (41115) 2358683 (31685) 3041965 (42645) 8419826 (36357) 6148687 (35583) 7914184 (37145) 1911911 (42656) 2218358 (41867) 
     dis: 	3910.000 5180.000 5596.000 5694.000 6095.000 6096.000 6437.000 6624.000 6655.000 6693.000 
query 4 nn's (66339, 86339): 5493369 (80149) 6062843 (84085) 7423926 (67618) 1743659 (75509) 1967098 (85657) 2173144 (81740) 4380344 (69964) 3495449 (73880) 8478796 (72385) 4962535 (73941) 
     dis: 	81626.000 84746.000 87152.000 89054.000 89742.000 89811.000 90617.000 91051.000 93054.000 93259.000 
[ 110.787s ] *** Query time: 22.368
qps: 447.061
 *** HNSW recall 
HNSW get 95709 postive res from 100000 results, recall@10:0.957
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.005 0.021 0.068 0.203 0.703 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 45101539, average: 4510.154
finished ivfpq index examples
[ 110.790s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 80 128"
	User time (seconds): 94.16
	System time (seconds): 8.15
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:51.45
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8354724
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 22
	Minor (reclaiming a frame) page faults: 2211585
	Voluntary context switches: 36017
	Involuntary context switches: 175
	Swaps: 0
	File system inputs: 1141792
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:03
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.763s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.819s ] Loaded 10000 sift10M queries
[ 0.872s ] Loaded ground truth, gt_size: 10
[ 0.872s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 15.723s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.190
[ 111.839s ] Query results (vector ids, then distances):
query 0 nn's (690, 20690): 4160485 (18340) 2898305 (16783) 1167995 (1952) 5514922 (12940) 1160663 (10585) 4738758 (11351) 788117 (12895) 9313115 (10541) 2923944 (18397) 6951413 (7394) 
     dis: 	65950.000 67180.000 72023.000 72798.000 74292.000 74463.000 78653.000 79682.000 79984.000 80726.000 
query 1 nn's (0, 10578): 4234271 (10566) 7501440 (6611) 9219153 (6637) 5271910 (5870) 4922660 (1131) 7143179 (3507) 296178 (6602) 9781041 (10548) 5516040 (6634) 9245954 (5874) 
     dis: 	44439.000 46910.000 50730.000 52252.000 56486.000 57268.000 57313.000 57738.000 57779.000 58737.000 
query 2 nn's (25853, 45853): 199400 (38630) 9262583 (36356) 5637368 (39458) 9554416 (30928) 4757879 (36366) 8068558 (26985) 2994193 (27765) 9457112 (30097) 8563094 (30121) 3795529 (34831) 
     dis: 	49395.000 50601.000 51405.000 52237.000 53215.000 53350.000 53360.000 54765.000 55995.000 56262.000 
query 3 nn's (3173, 23173): 1527942 (20684) 7301932 (9775) 3643741 (7428) 1985932 (11352) 6917633 (15999) 4904828 (9813) 727241 (22300) 9010353 (14430) 8649378 (15999) 4998281 (8975) 
     dis: 	4309.000 5240.000 5279.000 5371.000 5626.000 6194.000 6237.000 6311.000 6468.000 6624.000 
query 4 nn's (24364, 44364): 7091990 (41850) 1751938 (31660) 1141817 (34826) 4344456 (30879) 1149636 (34794) 1530216 (40303) 7778880 (27757) 9001755 (26934) 6203168 (28560) 9836279 (38717) 
     dis: 	77167.000 84283.000 85933.000 85939.000 85940.000 86529.000 87157.000 87905.000 89955.000 91244.000 
[ 111.840s ] *** Query time: 22.235
qps: 449.738
 *** HNSW recall 
HNSW get 95651 postive res from 100000 results, recall@10:0.957
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.001 0.005 0.019 0.071 0.205 0.698 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 45101539, average: 4510.154
finished ivfpq index examples
[ 111.840s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 80 128"
	User time (seconds): 96.24
	System time (seconds): 8.13
	Percent of CPU this job got: 92%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:52.42
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8356544
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 2104180
	Voluntary context switches: 11512
	Involuntary context switches: 81
	Swaps: 0
	File system inputs: 23632
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:19
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.846s ] Loaded metadata, 10000000 attr's found
[ 0.846s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.849s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.851s ] Loaded 10000 sift10M queries
[ 0.858s ] Loaded ground truth, gt_size: 10
[ 0.858s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 18.498s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.190
[ 103.827s ] Query results (vector ids, then distances):
query 0 nn's (15254, 35254): 4160485 (18340) 2898305 (16783) 4538400 (25471) 6984373 (34761) 5579551 (33289) 2923944 (18397) 7164607 (26189) 9925949 (31632) 578867 (18379) 2549151 (26210) 
     dis: 	65950.000 67180.000 76603.000 76880.000 78568.000 79984.000 80358.000 80660.000 80841.000 81827.000 
query 1 nn's (62177, 82177): 8449497 (78596) 5552416 (65287) 1263214 (70019) 9791343 (75449) 3309105 (69952) 1745130 (71531) 6378991 (73833) 8675999 (69203) 7692715 (63767) 9933148 (62209) 
     dis: 	32633.000 42944.000 47608.000 51493.000 51760.000 54734.000 54869.000 56407.000 56490.000 57000.000 
query 2 nn's (79782, 99782): 3900297 (92680) 1931585 (85608) 289025 (89537) 3493381 (96585) 9416415 (91891) 9068473 (87943) 436139 (84089) 8455929 (99630) 8432027 (82488) 3832486 (91890) 
     dis: 	43033.000 48317.000 48416.000 51043.000 51724.000 52145.000 52554.000 53383.000 53772.000 54273.000 
query 3 nn's (27374, 47374): 4083199 (34822) 8174765 (34010) 3421136 (41115) 2358683 (31685) 3041965 (42645) 8419826 (36357) 6148687 (35583) 7914184 (37145) 1911911 (42656) 2218358 (41867) 
     dis: 	3910.000 5180.000 5596.000 5694.000 6095.000 6096.000 6437.000 6624.000 6655.000 6693.000 
query 4 nn's (66339, 86339): 5493369 (80149) 6062843 (84085) 7423926 (67618) 1743659 (75509) 1967098 (85657) 2173144 (81740) 4380344 (69964) 3495449 (73880) 8478796 (72385) 4962535 (73941) 
     dis: 	81626.000 84746.000 87152.000 89054.000 89742.000 89811.000 90617.000 91051.000 93054.000 93259.000 
[ 103.827s ] *** Query time: 22.033
qps: 453.859
 *** HNSW recall 
HNSW get 95709 postive res from 100000 results, recall@10:0.957
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.005 0.021 0.068 0.203 0.703 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 45101539, average: 4510.154
finished ivfpq index examples
[ 103.829s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 80 128"
	User time (seconds): 83.45
	System time (seconds): 10.99
	Percent of CPU this job got: 90%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:44.67
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8356564
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 2782291
	Voluntary context switches: 31404
	Involuntary context switches: 154
	Swaps: 0
	File system inputs: 418888
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:14
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_30000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_30000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.771s ] Loaded metadata, 10000000 attr's found
[ 1.771s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.776s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.779s ] Loaded 10000 sift10M queries
[ 1.799s ] Loaded ground truth, gt_size: 10
[ 1.799s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 20.170s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.277
[ 140.824s ] Query results (vector ids, then distances):
query 0 nn's (58293, 88293): 6141318 (63712) 6346833 (59051) 1020562 (76197) 7860530 (80963) 796249 (62995) 1174332 (62191) 2375126 (80971) 8851580 (77055) 1835932 (62918) 8606715 (81733) 
     dis: 	73183.000 76136.000 76767.000 78859.000 79534.000 79542.000 79929.000 80060.000 80072.000 80125.000 
query 1 nn's (30225, 60225): 285986 (32478) 4907604 (30932) 9492445 (33263) 8349375 (53556) 3645374 (48863) 9958454 (41038) 8596968 (50404) 7343838 (32423) 7120642 (50430) 2993914 (56694) 
     dis: 	43778.000 46066.000 48691.000 49997.000 50948.000 51055.000 52768.000 54601.000 54684.000 55326.000 
query 2 nn's (6367, 36367): 5982237 (17674) 9262583 (36356) 8132849 (13703) 4677344 (11335) 9554416 (30928) 4279056 (21460) 5988705 (7412) 4757879 (36366) 8068558 (26985) 2994193 (27765) 
     dis: 	50144.000 50601.000 50997.000 52215.000 52237.000 52719.000 53001.000 53215.000 53350.000 53360.000 
query 3 nn's (8242, 38242): 4083199 (34822) 1527942 (20684) 8174765 (34010) 7301932 (9775) 1985932 (11352) 5124856 (24615) 6917633 (15999) 2358683 (31685) 8419826 (36357) 4904828 (9813) 
     dis: 	3910.000 4309.000 5180.000 5240.000 5371.000 5492.000 5626.000 5694.000 6096.000 6194.000 
query 4 nn's (0, 24989): 811272 (3465) 6578584 (18363) 3389697 (19174) 7724095 (2689) 3832333 (8215) 39005 (20693) 2908498 (10554) 1800938 (15242) 5709057 (18391) 9033526 (11353) 
     dis: 	81973.000 82172.000 84350.000 86698.000 87409.000 87925.000 88949.000 89079.000 89153.000 89480.000 
[ 140.824s ] *** Query time: 33.609
qps: 297.542
 *** HNSW recall 
HNSW get 96762 postive res from 100000 results, recall@10:0.968
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.003 0.013 0.047 0.174 0.762 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 45101539, average: 4510.154
finished ivfpq index examples
[ 140.826s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_30000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_30000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 80 128"
	User time (seconds): 114.28
	System time (seconds): 18.08
	Percent of CPU this job got: 92%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:22.36
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8357796
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 28
	Minor (reclaiming a frame) page faults: 3483508
	Voluntary context switches: 28758
	Involuntary context switches: 386
	Swaps: 0
	File system inputs: 787824
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
