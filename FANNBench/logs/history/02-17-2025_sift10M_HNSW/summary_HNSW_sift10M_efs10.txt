Start time: 09:16
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.785s ] Loaded metadata, 10000000 attr's found
[ 0.785s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.788s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.790s ] Loaded 10000 sift10M queries
[ 0.807s ] Loaded ground truth, gt_size: 10
[ 0.807s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.060s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.190
[ 97.142s ] Query results (vector ids, then distances):
query 0 nn's (15254, 35254): 2898305 (16783) 4538400 (25471) 6984373 (34761) 5579551 (33289) 9925949 (31632) 578867 (18379) 9860956 (21446) 5520369 (34781) 9534078 (31650) 9607176 (20707) 
     dis: 	67180.000 76603.000 76880.000 78568.000 80660.000 80841.000 82276.000 82492.000 83197.000 83936.000 
query 1 nn's (62177, 82177): 8449497 (78596) 5552416 (65287) 1263214 (70019) 9791343 (75449) 1745130 (71531) 8675999 (69203) 7692715 (63767) 9933148 (62209) 9537422 (76291) 7315015 (77055) 
     dis: 	32633.000 42944.000 47608.000 51493.000 54734.000 56407.000 56490.000 57000.000 57685.000 61093.000 
query 2 nn's (79782, 99782): 3900297 (92680) 1931585 (85608) 289025 (89537) 3493381 (96585) 436139 (84089) 8455929 (99630) 8432027 (82488) 1198061 (97380) 9541874 (91850) 1784913 (91892) 
     dis: 	43033.000 48317.000 48416.000 51043.000 52554.000 53383.000 53772.000 54288.000 54558.000 54759.000 
query 3 nn's (27374, 47374): 4083199 (34822) 8174765 (34010) 3421136 (41115) 2358683 (31685) 3041965 (42645) 8419826 (36357) 6148687 (35583) 7914184 (37145) 1911911 (42656) 2218358 (41867) 
     dis: 	3910.000 5180.000 5596.000 5694.000 6095.000 6096.000 6437.000 6624.000 6655.000 6693.000 
query 4 nn's (66339, 86339): 6062843 (84085) 3495449 (73880) 64045 (81734) 417315 (77055) 4422483 (74649) 3905693 (73811) 2175783 (72381) 308167 (71554) 7998877 (76241) 9540783 (84815) 
     dis: 	84746.000 91051.000 93643.000 94565.000 94638.000 99349.000 99540.000 100320.000 100785.000 101846.000 
[ 97.142s ] *** Query time: 14.542
qps: 687.678
 *** HNSW recall 
HNSW get 58967 postive res from 100000 results, recall@10:0.590
recall dist(10% per bucket): 0.003 0.014 0.040 0.077 0.121 0.154 0.184 0.170 0.135 0.078 0.024 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 9097358, average: 909.736
finished ivfpq index examples
[ 97.143s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 10 128"
	User time (seconds): 80.79
	System time (seconds): 7.99
	Percent of CPU this job got: 90%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:38.05
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8356764
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 24
	Minor (reclaiming a frame) page faults: 2302894
	Voluntary context switches: 35577
	Involuntary context switches: 158
	Swaps: 0
	File system inputs: 926032
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:03
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.763s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.819s ] Loaded 10000 sift10M queries
[ 0.874s ] Loaded ground truth, gt_size: 10
[ 0.874s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 15.724s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.190
[ 108.293s ] Query results (vector ids, then distances):
query 0 nn's (690, 20690): 2898305 (16783) 1167995 (1952) 5514922 (12940) 4738758 (11351) 578867 (18379) 6871531 (5832) 2992273 (11344) 6648721 (2725) 6328993 (5111) 6799000 (7431) 
     dis: 	67180.000 72023.000 72798.000 74463.000 80841.000 84002.000 84073.000 84842.000 85322.000 85915.000 
query 1 nn's (0, 10578): 4234271 (10566) 7501440 (6611) 4922660 (1131) 296178 (6602) 5226515 (10521) 2342995 (9818) 5307850 (5866) 9460541 (5075) 5252284 (7422) 9329945 (5864) 
     dis: 	44439.000 46910.000 56486.000 57313.000 62693.000 64554.000 64772.000 65602.000 68907.000 70708.000 
query 2 nn's (25853, 45853): 9262583 (36356) 5637368 (39458) 8068558 (26985) 2994193 (27765) 3795529 (34831) 6114289 (41840) 8530462 (43390) 4957555 (42609) 4259715 (28506) 4418406 (32491) 
     dis: 	50601.000 51405.000 53350.000 53360.000 56262.000 56627.000 57216.000 57694.000 57942.000 58485.000 
query 3 nn's (3173, 23173): 1527942 (20684) 7301932 (9775) 3643741 (7428) 1985932 (11352) 727241 (22300) 9010353 (14430) 8649378 (15999) 1344917 (18385) 1739894 (5102) 3278687 (9752) 
     dis: 	4309.000 5240.000 5279.000 5371.000 6237.000 6311.000 6468.000 6747.000 6845.000 7183.000 
query 4 nn's (24364, 44364): 7091990 (41850) 1751938 (31660) 7778880 (27757) 7559534 (24590) 6699578 (42678) 5729760 (25444) 6630737 (35595) 8296728 (41858) 3882262 (38657) 1838616 (38659) 
     dis: 	77167.000 84283.000 87157.000 93517.000 94180.000 95543.000 96446.000 96677.000 97696.000 97745.000 
[ 108.293s ] *** Query time: 20.016
qps: 499.593
 *** HNSW recall 
HNSW get 59216 postive res from 100000 results, recall@10:0.592
recall dist(10% per bucket): 0.003 0.011 0.039 0.077 0.123 0.156 0.179 0.176 0.130 0.081 0.026 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 9097358, average: 909.736
finished ivfpq index examples
[ 108.294s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 10 128"
	User time (seconds): 86.83
	System time (seconds): 14.47
	Percent of CPU this job got: 92%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:49.34
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8356772
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3437086
	Voluntary context switches: 10701
	Involuntary context switches: 158
	Swaps: 0
	File system inputs: 11600
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:19
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.789s ] Loaded metadata, 10000000 attr's found
[ 0.789s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.814s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.844s ] Loaded 10000 sift10M queries
[ 0.863s ] Loaded ground truth, gt_size: 10
[ 0.863s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 18.507s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.190
[ 105.230s ] Query results (vector ids, then distances):
query 0 nn's (15254, 35254): 2898305 (16783) 4538400 (25471) 6984373 (34761) 5579551 (33289) 9925949 (31632) 578867 (18379) 9860956 (21446) 5520369 (34781) 9534078 (31650) 9607176 (20707) 
     dis: 	67180.000 76603.000 76880.000 78568.000 80660.000 80841.000 82276.000 82492.000 83197.000 83936.000 
query 1 nn's (62177, 82177): 8449497 (78596) 5552416 (65287) 1263214 (70019) 9791343 (75449) 1745130 (71531) 8675999 (69203) 7692715 (63767) 9933148 (62209) 9537422 (76291) 7315015 (77055) 
     dis: 	32633.000 42944.000 47608.000 51493.000 54734.000 56407.000 56490.000 57000.000 57685.000 61093.000 
query 2 nn's (79782, 99782): 3900297 (92680) 1931585 (85608) 289025 (89537) 3493381 (96585) 436139 (84089) 8455929 (99630) 8432027 (82488) 1198061 (97380) 9541874 (91850) 1784913 (91892) 
     dis: 	43033.000 48317.000 48416.000 51043.000 52554.000 53383.000 53772.000 54288.000 54558.000 54759.000 
query 3 nn's (27374, 47374): 4083199 (34822) 8174765 (34010) 3421136 (41115) 2358683 (31685) 3041965 (42645) 8419826 (36357) 6148687 (35583) 7914184 (37145) 1911911 (42656) 2218358 (41867) 
     dis: 	3910.000 5180.000 5596.000 5694.000 6095.000 6096.000 6437.000 6624.000 6655.000 6693.000 
query 4 nn's (66339, 86339): 6062843 (84085) 3495449 (73880) 64045 (81734) 417315 (77055) 4422483 (74649) 3905693 (73811) 2175783 (72381) 308167 (71554) 7998877 (76241) 9540783 (84815) 
     dis: 	84746.000 91051.000 93643.000 94565.000 94638.000 99349.000 99540.000 100320.000 100785.000 101846.000 
[ 105.230s ] *** Query time: 20.353
qps: 491.325
 *** HNSW recall 
HNSW get 58967 postive res from 100000 results, recall@10:0.590
recall dist(10% per bucket): 0.003 0.014 0.040 0.077 0.121 0.154 0.184 0.170 0.135 0.078 0.024 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 9097358, average: 909.736
finished ivfpq index examples
[ 105.231s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_20000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_20000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 10 128"
	User time (seconds): 80.75
	System time (seconds): 15.07
	Percent of CPU this job got: 90%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:46.17
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8357788
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 3478909
	Voluntary context switches: 31415
	Involuntary context switches: 193
	Swaps: 0
	File system inputs: 1112064
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:14
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_30000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_30000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 10
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.594s ] Loaded metadata, 10000000 attr's found
[ 1.594s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.599s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 1.603s ] Loaded 10000 sift10M queries
[ 1.621s ] Loaded ground truth, gt_size: 10
[ 1.621s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 20.142s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.277
[ 129.597s ] Query results (vector ids, then distances):
query 0 nn's (58293, 88293): 6141318 (63712) 6346833 (59051) 7860530 (80963) 796249 (62995) 1174332 (62191) 1835932 (62918) 2807602 (69187) 2115887 (77017) 9251169 (62957) 1665852 (61395) 
     dis: 	73183.000 76136.000 78859.000 79534.000 79542.000 80072.000 80454.000 80780.000 81847.000 83197.000 
query 1 nn's (30225, 60225): 285986 (32478) 4907604 (30932) 9492445 (33263) 8349375 (53556) 3645374 (48863) 9958454 (41038) 7343838 (32423) 2993914 (56694) 5008572 (32480) 4870548 (51163) 
     dis: 	43778.000 46066.000 48691.000 49997.000 50948.000 51055.000 54601.000 55326.000 56506.000 56915.000 
query 2 nn's (6367, 36367): 5982237 (17674) 9262583 (36356) 8132849 (13703) 4279056 (21460) 8068558 (26985) 2994193 (27765) 4665202 (19912) 2601636 (7451) 8923155 (19128) 9362419 (12833) 
     dis: 	50144.000 50601.000 50997.000 52719.000 53350.000 53360.000 53809.000 53913.000 54025.000 54496.000 
query 3 nn's (8242, 38242): 4083199 (34822) 1527942 (20684) 8174765 (34010) 7301932 (9775) 1985932 (11352) 5124856 (24615) 2358683 (31685) 8419826 (36357) 727241 (22300) 9010353 (14430) 
     dis: 	3910.000 4309.000 5180.000 5240.000 5371.000 5492.000 5694.000 6096.000 6237.000 6311.000 
query 4 nn's (0, 24989): 6578584 (18363) 3832333 (8215) 39005 (20693) 5709057 (18391) 5117098 (2755) 935279 (12106) 7559534 (24590) 3839204 (5880) 8493266 (5870) 5475257 (8260) 
     dis: 	82172.000 87409.000 87925.000 89153.000 89682.000 91951.000 93517.000 94216.000 94291.000 95165.000 
[ 129.597s ] *** Query time: 23.960
qps: 417.366
 *** HNSW recall 
HNSW get 63201 postive res from 100000 results, recall@10:0.632
recall dist(10% per bucket): 0.003 0.010 0.029 0.054 0.099 0.142 0.177 0.173 0.161 0.108 0.046 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 9097358, average: 909.736
finished ivfpq index examples
[ 129.599s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_30000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_30000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 10 128"
	User time (seconds): 103.64
	System time (seconds): 18.23
	Percent of CPU this job got: 92%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:11.33
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8355980
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 28
	Minor (reclaiming a frame) page faults: 3382714
	Voluntary context switches: 27705
	Involuntary context switches: 271
	Swaps: 0
	File system inputs: 636592
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
