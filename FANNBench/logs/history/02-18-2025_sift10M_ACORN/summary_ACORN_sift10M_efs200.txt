Start time: 08:57
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_50000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_50000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.248s ] Loaded metadata, 10000000 attr's found
[ 1.248s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.251s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_50000_1_100000_in_dist.json
[ 1.253s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_50000_1_100000_in_dist_10.json
[ 1.265s ] Loaded ground truth, gt_size: 10
[ 1.265s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.75 (867450974)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824519639)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959696)
   3. nb of reciprocal neighbors: 102.05
   4. nb of neighbors that are also neighbor-of-neighbors: 966.92 (241691157)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 935.91 (5813894)
   3. nb of reciprocal neighbors: 668.19
   4. nb of neighbors that are also neighbor-of-neighbors: 935.46 (5811092)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 132.94 (18611)
   3. nb of reciprocal neighbors: 131.03
   4. nb of neighbors that are also neighbor-of-neighbors: 132.45 (18543)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999776 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2712.001s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.436
[ 3294.881s ] Query results (vector ids, then distances):
query 0 nn's (9268): 4160485 (18340) 2898305 (16783) 7364551 (50429) 5514922 (12940) 1160663 (10585) 4738758 (11351) 7632021 (51980) 6346833 (59051) 4538400 (25471) 6984373 (34761) 
     dis: 	65950.000 67180.000 72592.000 72798.000 74292.000 74463.000 75587.000 76136.000 76603.000 76880.000 
query 1 nn's (59268): 8449497 (78596) 5552416 (65287) 411491 (84802) 1263214 (70019) 1909131 (90315) 9791343 (75449) 3309105 (69952) 522429 (97325) 1120308 (98119) 9009284 (94271) 
     dis: 	32633.000 42944.000 46959.000 47608.000 51310.000 51493.000 51760.000 52132.000 52532.000 52935.000 
query 2 nn's (58234): 9710602 (77831) 5055964 (61350) 3900297 (92680) 4588082 (73917) 8667807 (51982) 1931585 (85608) 289025 (89537) 1571863 (59842) 237844 (55163) 2304211 (57499) 
     dis: 	40495.000 42316.000 43033.000 47637.000 47988.000 48317.000 48416.000 48528.000 49294.000 49692.000 
query 3 nn's (99999): 4083199 (34822) 1527942 (20684) 8174765 (34010) 7301932 (9775) 3643741 (7428) 1985932 (11352) 5124856 (24615) 3421136 (41115) 6917633 (15999) 2358683 (31685) 
     dis: 	3910.000 4309.000 5180.000 5240.000 5279.000 5371.000 5492.000 5596.000 5626.000 5694.000 
query 4 nn's (48567): 811272 (3465) 6578584 (18363) 3389697 (19174) 7724095 (2689) 7778880 (27757) 3832333 (8215) 9001755 (26934) 39005 (20693) 2908498 (10554) 5709057 (18391) 
     dis: 	81973.000 82172.000 84350.000 86698.000 87157.000 87409.000 87905.000 87925.000 88949.000 89153.000 
[ 3294.881s ] *** Query time: 69.991
qps: 142.876
 *** acorn recall 
efs:200
acorn get 97910 postive res from 100000 results, recall@10:0.979
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.002 0.009 0.028 0.114 0.846 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3299.872s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 84155427
ndis: 0
nreorder: 0
average distance computations per query: 8415.542
[ 3299.872s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_50000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_50000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64 200 128"
	User time (seconds): 3186.06
	System time (seconds): 110.48
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 55:01.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114643640
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 59435990
	Voluntary context switches: 4073
	Involuntary context switches: 4399
	Swaps: 0
	File system inputs: 54624
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:46
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_60000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_60000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.231s ] Loaded metadata, 10000000 attr's found
[ 1.231s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.234s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_60000_1_100000_in_dist.json
[ 1.236s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_60000_1_100000_in_dist_10.json
[ 1.247s ] Loaded ground truth, gt_size: 10
[ 1.247s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.75 (867450974)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824519639)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959696)
   3. nb of reciprocal neighbors: 102.05
   4. nb of neighbors that are also neighbor-of-neighbors: 966.92 (241691157)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 935.91 (5813894)
   3. nb of reciprocal neighbors: 668.19
   4. nb of neighbors that are also neighbor-of-neighbors: 935.46 (5811092)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 132.94 (18611)
   3. nb of reciprocal neighbors: 131.03
   4. nb of neighbors that are also neighbor-of-neighbors: 132.45 (18543)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999776 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2703.720s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.510
[ 3231.483s ] Query results (vector ids, then distances):
query 0 nn's (0): 4160485 (18340) 2898305 (16783) 1167995 (1952) 5514922 (12940) 1160663 (10585) 4738758 (11351) 4538400 (25471) 6984373 (34761) 7468388 (16797) 9397776 (24615) 
     dis: 	65950.000 67180.000 72023.000 72798.000 74292.000 74463.000 76603.000 76880.000 77229.000 77424.000 
query 1 nn's (35095): 8449497 (78596) 5552416 (65287) 411491 (84802) 1263214 (70019) 8349375 (53556) 3645374 (48863) 9958454 (41038) 1909131 (90315) 9791343 (75449) 3309105 (69952) 
     dis: 	32633.000 42944.000 46959.000 47608.000 49997.000 50948.000 51055.000 51310.000 51493.000 51760.000 
query 2 nn's (40929): 9710602 (77831) 5055964 (61350) 3900297 (92680) 4588082 (73917) 8667807 (51982) 1931585 (85608) 289025 (89537) 1571863 (59842) 237844 (55163) 2304211 (57499) 
     dis: 	40495.000 42316.000 43033.000 47637.000 47988.000 48317.000 48416.000 48528.000 49294.000 49692.000 
query 3 nn's (99999): 4083199 (34822) 1527942 (20684) 8174765 (34010) 7301932 (9775) 3643741 (7428) 1985932 (11352) 5124856 (24615) 3421136 (41115) 6917633 (15999) 2358683 (31685) 
     dis: 	3910.000 4309.000 5180.000 5240.000 5279.000 5371.000 5492.000 5596.000 5626.000 5694.000 
query 4 nn's (47719): 7241286 (91854) 3918536 (60607) 9958618 (87984) 5493369 (80149) 7963557 (56702) 1129230 (64537) 6062843 (84085) 769923 (72335) 6388463 (68406) 4119530 (54348) 
     dis: 	77624.000 78379.000 80415.000 81626.000 82038.000 84652.000 84746.000 85317.000 86061.000 86120.000 
[ 3231.483s ] *** Query time: 52.037
qps: 192.171
 *** acorn recall 
efs:200
acorn get 96810 postive res from 100000 results, recall@10:0.968
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.001 0.005 0.015 0.047 0.149 0.782 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3235.511s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 83869414
ndis: 0
nreorder: 0
average distance computations per query: 8386.941
[ 3235.511s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_60000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_60000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64 200 128"
	User time (seconds): 3154.75
	System time (seconds): 77.39
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 53:57.31
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114643636
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 31689772
	Voluntary context switches: 4310
	Involuntary context switches: 3637
	Swaps: 0
	File system inputs: 55856
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:33
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_70000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_70000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.224s ] Loaded metadata, 10000000 attr's found
[ 1.224s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.227s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_70000_1_100000_in_dist.json
[ 1.229s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_70000_1_100000_in_dist_10.json
[ 1.241s ] Loaded ground truth, gt_size: 10
[ 1.241s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.75 (867450974)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824519639)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959696)
   3. nb of reciprocal neighbors: 102.05
   4. nb of neighbors that are also neighbor-of-neighbors: 966.92 (241691157)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 935.91 (5813894)
   3. nb of reciprocal neighbors: 668.19
   4. nb of neighbors that are also neighbor-of-neighbors: 935.46 (5811092)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 132.94 (18611)
   3. nb of reciprocal neighbors: 131.03
   4. nb of neighbors that are also neighbor-of-neighbors: 132.45 (18543)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999776 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2714.634s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.578
[ 3216.632s ] Query results (vector ids, then distances):
query 0 nn's (15938): 4160485 (18340) 2898305 (16783) 6141318 (63712) 2515600 (78596) 7632021 (51980) 6346833 (59051) 4538400 (25471) 1020562 (76197) 6984373 (34761) 9397776 (24615) 
     dis: 	65950.000 67180.000 73183.000 73465.000 75587.000 76136.000 76603.000 76767.000 76880.000 77424.000 
query 1 nn's (85938): 8449497 (78596) 5552416 (65287) 411491 (84802) 1263214 (70019) 8349375 (53556) 3645374 (48863) 9958454 (41038) 1909131 (90315) 9791343 (75449) 3309105 (69952) 
     dis: 	32633.000 42944.000 46959.000 47608.000 49997.000 50948.000 51055.000 51310.000 51493.000 51760.000 
query 2 nn's (39587): 9710602 (77831) 5055964 (61350) 3900297 (92680) 4588082 (73917) 1931585 (85608) 289025 (89537) 3493381 (96585) 7500565 (73913) 9416415 (91891) 4457160 (66048) 
     dis: 	40495.000 42316.000 43033.000 47637.000 48317.000 48416.000 51043.000 51634.000 51724.000 51795.000 
query 3 nn's (99999): 980813 (79374) 2205832 (79419) 4147780 (85690) 6151275 (59824) 8410503 (89524) 7269483 (81722) 2965607 (98158) 1218934 (95023) 9132978 (80186) 1417424 (80951) 
     dis: 	4296.000 4343.000 4550.000 4602.000 4817.000 4894.000 5013.000 5468.000 5559.000 5643.000 
query 4 nn's (60440): 7241286 (91854) 3918536 (60607) 9958618 (87984) 5493369 (80149) 7963557 (56702) 1129230 (64537) 6062843 (84085) 6413263 (47260) 769923 (72335) 6388463 (68406) 
     dis: 	77624.000 78379.000 80415.000 81626.000 82038.000 84652.000 84746.000 84921.000 85317.000 86061.000 
[ 3216.632s ] *** Query time: 51.523
qps: 194.086
 *** acorn recall 
efs:200
acorn get 95966 postive res from 100000 results, recall@10:0.960
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.006 0.022 0.063 0.169 0.737 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3221.174s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 84269402
ndis: 0
nreorder: 0
average distance computations per query: 8426.940
[ 3221.174s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_70000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_70000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64 200 128"
	User time (seconds): 3129.43
	System time (seconds): 78.47
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 53:43.10
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114641504
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 31726151
	Voluntary context switches: 7993
	Involuntary context switches: 5413
	Swaps: 0
	File system inputs: 52608
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 14:23
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_80000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_80000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.248s ] Loaded metadata, 10000000 attr's found
[ 1.248s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.251s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_80000_1_100000_in_dist.json
[ 1.253s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_80000_1_100000_in_dist_10.json
[ 1.265s ] Loaded ground truth, gt_size: 10
[ 1.265s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.75 (867450974)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824519639)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959696)
   3. nb of reciprocal neighbors: 102.05
   4. nb of neighbors that are also neighbor-of-neighbors: 966.92 (241691157)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 935.91 (5813894)
   3. nb of reciprocal neighbors: 668.19
   4. nb of neighbors that are also neighbor-of-neighbors: 935.46 (5811092)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 132.94 (18611)
   3. nb of reciprocal neighbors: 131.03
   4. nb of neighbors that are also neighbor-of-neighbors: 132.45 (18543)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999776 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2741.674s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.641
[ 3291.929s ] Query results (vector ids, then distances):
query 0 nn's (0): 4160485 (18340) 2898305 (16783) 3381228 (1236) 1167995 (1952) 5514922 (12940) 1160663 (10585) 4738758 (11351) 4538400 (25471) 6984373 (34761) 2213388 (30904) 
     dis: 	65950.000 67180.000 70830.000 72023.000 72798.000 74292.000 74463.000 76603.000 76880.000 78558.000 
query 1 nn's (49634): 285986 (32478) 4234271 (10566) 2253711 (24672) 4907604 (30932) 1273419 (11359) 7501440 (6611) 1233453 (14431) 9492445 (33263) 3221056 (24642) 9219153 (6637) 
     dis: 	43778.000 44439.000 45140.000 46066.000 46522.000 46910.000 48662.000 48691.000 49695.000 50730.000 
query 2 nn's (0): 8667807 (51982) 199400 (38630) 5982237 (17674) 9262583 (36356) 4480383 (48064) 8132849 (13703) 6296252 (4337) 5637368 (39458) 9466222 (49715) 4677344 (11335) 
     dis: 	47988.000 49395.000 50144.000 50601.000 50702.000 50997.000 51071.000 51405.000 51654.000 52215.000 
query 3 nn's (44675): 4083199 (34822) 1527942 (20684) 8174765 (34010) 7301932 (9775) 3643741 (7428) 1985932 (11352) 5124856 (24615) 3421136 (41115) 6917633 (15999) 2358683 (31685) 
     dis: 	3910.000 4309.000 5180.000 5240.000 5279.000 5371.000 5492.000 5596.000 5626.000 5694.000 
query 4 nn's (0): 7091990 (41850) 3918536 (60607) 811272 (3465) 7963557 (56702) 6578584 (18363) 1751938 (31660) 3389697 (19174) 1141817 (34826) 1149636 (34794) 2524726 (62153) 
     dis: 	77167.000 78379.000 81973.000 82038.000 82172.000 84283.000 84350.000 85933.000 85940.000 86290.000 
[ 3291.929s ] *** Query time: 89.621
qps: 111.581
 *** acorn recall 
efs:200
acorn get 95531 postive res from 100000 results, recall@10:0.955
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.002 0.008 0.025 0.068 0.191 0.706 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3300.061s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 84650517
ndis: 0
nreorder: 0
average distance computations per query: 8465.052
[ 3300.061s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_80000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_80000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64 200 128"
	User time (seconds): 3126.56
	System time (seconds): 157.89
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 55:02.06
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114639548
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 74343924
	Voluntary context switches: 7953
	Involuntary context switches: 5056
	Swaps: 0
	File system inputs: 59992
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 16:08
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_90000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_90000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.226s ] Loaded metadata, 10000000 attr's found
[ 1.226s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.229s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_90000_1_100000_in_dist.json
[ 1.231s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_90000_1_100000_in_dist_10.json
[ 1.242s ] Loaded ground truth, gt_size: 10
[ 1.242s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.75 (867450974)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824519639)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959696)
   3. nb of reciprocal neighbors: 102.05
   4. nb of neighbors that are also neighbor-of-neighbors: 966.92 (241691157)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 935.91 (5813894)
   3. nb of reciprocal neighbors: 668.19
   4. nb of neighbors that are also neighbor-of-neighbors: 935.46 (5811092)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 132.94 (18611)
   3. nb of reciprocal neighbors: 131.03
   4. nb of neighbors that are also neighbor-of-neighbors: 132.45 (18543)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999776 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2659.278s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.696
[ 3080.823s ] Query results (vector ids, then distances):
query 0 nn's (7998): 4160485 (18340) 2898305 (16783) 5514922 (12940) 6141318 (63712) 2515600 (78596) 5284494 (91876) 1160663 (10585) 4738758 (11351) 7293718 (96562) 7632021 (51980) 
     dis: 	65950.000 67180.000 72798.000 73183.000 73465.000 73728.000 74292.000 74463.000 75573.000 75587.000 
query 1 nn's (97998): 8449497 (78596) 5552416 (65287) 411491 (84802) 1263214 (70019) 8349375 (53556) 3645374 (48863) 9958454 (41038) 1909131 (90315) 9791343 (75449) 3309105 (69952) 
     dis: 	32633.000 42944.000 46959.000 47608.000 49997.000 50948.000 51055.000 51310.000 51493.000 51760.000 
query 2 nn's (35893): 5055964 (61350) 8667807 (51982) 1571863 (59842) 237844 (55163) 199400 (38630) 2304211 (57499) 5982237 (17674) 4791170 (55121) 9262583 (36356) 4480383 (48064) 
     dis: 	42316.000 47988.000 48528.000 49294.000 49395.000 49692.000 50144.000 50576.000 50601.000 50702.000 
query 3 nn's (99999): 4083199 (34822) 1527942 (20684) 8174765 (34010) 7301932 (9775) 3643741 (7428) 1985932 (11352) 5124856 (24615) 3421136 (41115) 6917633 (15999) 2358683 (31685) 
     dis: 	3910.000 4309.000 5180.000 5240.000 5279.000 5371.000 5492.000 5596.000 5626.000 5694.000 
query 4 nn's (0): 7241286 (91854) 3918536 (60607) 9958618 (87984) 5493369 (80149) 7963557 (56702) 1129230 (64537) 6062843 (84085) 769923 (72335) 6388463 (68406) 4119530 (54348) 
     dis: 	77624.000 78379.000 80415.000 81626.000 82038.000 84652.000 84746.000 85317.000 86061.000 86120.000 
[ 3080.823s ] *** Query time: 40.723
qps: 245.564
 *** acorn recall 
efs:200
acorn get 95417 postive res from 100000 results, recall@10:0.954
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.003 0.007 0.025 0.068 0.196 0.699 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3085.403s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 84808326
ndis: 0
nreorder: 0
average distance computations per query: 8480.833
[ 3085.403s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_90000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_90000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64 200 128"
	User time (seconds): 2995.60
	System time (seconds): 73.34
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 51:26.72
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114642620
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 29317745
	Voluntary context switches: 8178
	Involuntary context switches: 2165
	Swaps: 0
	File system inputs: 51176
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 17:53
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_100000_1_100000_in_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_100000_1_100000_in_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 1.249s ] Loaded metadata, 10000000 attr's found
[ 1.249s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.252s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_100000_1_100000_in_dist.json
[ 1.254s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_100000_1_100000_in_dist_10.json
[ 1.265s ] Loaded ground truth, gt_size: 10
[ 1.265s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.75 (867450974)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824519639)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959696)
   3. nb of reciprocal neighbors: 102.05
   4. nb of neighbors that are also neighbor-of-neighbors: 966.92 (241691157)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 935.91 (5813894)
   3. nb of reciprocal neighbors: 668.19
   4. nb of neighbors that are also neighbor-of-neighbors: 935.46 (5811092)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 132.94 (18611)
   3. nb of reciprocal neighbors: 131.03
   4. nb of neighbors that are also neighbor-of-neighbors: 132.45 (18543)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999776 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2718.306s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.748
[ 3154.910s ] Query results (vector ids, then distances):
query 0 nn's (0): 4160485 (18340) 2898305 (16783) 1167995 (1952) 7364551 (50429) 5514922 (12940) 6141318 (63712) 2515600 (78596) 4738758 (11351) 7632021 (51980) 6346833 (59051) 
     dis: 	65950.000 67180.000 72023.000 72592.000 72798.000 73183.000 73465.000 74463.000 75587.000 76136.000 
query 1 nn's (84989): 8449497 (78596) 5552416 (65287) 285986 (32478) 2253711 (24672) 4907604 (30932) 411491 (84802) 1263214 (70019) 9492445 (33263) 3221056 (24642) 8349375 (53556) 
     dis: 	32633.000 42944.000 43778.000 45140.000 46066.000 46959.000 47608.000 48691.000 49695.000 49997.000 
query 2 nn's (16196): 5055964 (61350) 8667807 (51982) 1571863 (59842) 237844 (55163) 199400 (38630) 2304211 (57499) 5982237 (17674) 4791170 (55121) 9262583 (36356) 4480383 (48064) 
     dis: 	42316.000 47988.000 48528.000 49294.000 49395.000 49692.000 50144.000 50576.000 50601.000 50702.000 
query 3 nn's (99999): 4083199 (34822) 980813 (79374) 1527942 (20684) 2205832 (79419) 4147780 (85690) 6151275 (59824) 8410503 (89524) 7269483 (81722) 2965607 (98158) 8174765 (34010) 
     dis: 	3910.000 4296.000 4309.000 4343.000 4550.000 4602.000 4817.000 4894.000 5013.000 5180.000 
query 4 nn's (0): 7241286 (91854) 3918536 (60607) 9958618 (87984) 5493369 (80149) 7963557 (56702) 1129230 (64537) 6062843 (84085) 6413263 (47260) 769923 (72335) 6388463 (68406) 
     dis: 	77624.000 78379.000 80415.000 81626.000 82038.000 84652.000 84746.000 84921.000 85317.000 86061.000 
[ 3154.910s ] *** Query time: 53.197
qps: 187.980
 *** acorn recall 
efs:200
acorn get 95040 postive res from 100000 results, recall@10:0.950
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.003 0.009 0.029 0.072 0.206 0.679 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3161.071s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 84795805
ndis: 0
nreorder: 0
average distance computations per query: 8479.581
[ 3161.071s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_100000_1_100000_in_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_100000_1_100000_in_dist_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_dist_M40_ga25_Mb64 200 128"
	User time (seconds): 3027.30
	System time (seconds): 118.38
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 52:42.93
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114642620
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 54841953
	Voluntary context switches: 8339
	Involuntary context switches: 4216
	Swaps: 0
	File system inputs: 62408
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:14
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/attr_sel_1_500_random_1.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/qrangesel_1_1_500_random_1.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/sif_gt_sel_1_1_500_random_1_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_1_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/attr_sel_1_500_random_1.json
[ 0.918s ] Loaded metadata, 10000000 attr's found
[ 0.918s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.921s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/qrangesel_1_1_500_random_1.json
[ 0.923s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/sif_gt_sel_1_1_500_random_1_10.json
[ 0.934s ] Loaded ground truth, gt_size: 10
[ 0.934s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.75 (867465578)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824545843)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 102.14
   4. nb of neighbors that are also neighbor-of-neighbors: 967.06 (241727406)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 936.42 (5817036)
   3. nb of reciprocal neighbors: 669.22
   4. nb of neighbors that are also neighbor-of-neighbors: 935.94 (5814070)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 132.27 (18518)
   3. nb of reciprocal neighbors: 130.34
   4. nb of neighbors that are also neighbor-of-neighbors: 131.72 (18441)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999860 nodes
	level 1: 249957 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2713.841s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 1.000
[ 2876.871s ] Query results (vector ids, then distances):
query 0 nn's (1): 4160485 (1) 2898305 (1) 1167995 (1) 5514922 (1) 6141318 (1) 2515600 (1) 5284494 (1) 1160663 (1) 4738758 (1) 7293718 (1) 
     dis: 	65950.000 67180.000 72023.000 72798.000 73183.000 73465.000 73728.000 74292.000 74463.000 75573.000 
query 1 nn's (1): 8449497 (1) 5552416 (1) 285986 (1) 4234271 (1) 2253711 (1) 4907604 (1) 1273419 (1) 7501440 (1) 411491 (1) 1263214 (1) 
     dis: 	32633.000 42944.000 43778.000 44439.000 45140.000 46066.000 46522.000 46910.000 46959.000 47608.000 
query 2 nn's (1): 9710602 (1) 5055964 (1) 3900297 (1) 4588082 (1) 8667807 (1) 1931585 (1) 289025 (1) 1571863 (1) 237844 (1) 199400 (1) 
     dis: 	40495.000 42316.000 43033.000 47637.000 47988.000 48317.000 48416.000 48528.000 49294.000 49395.000 
query 3 nn's (1): 4083199 (1) 980813 (1) 1527942 (1) 2205832 (1) 4147780 (1) 6151275 (1) 8410503 (1) 7269483 (1) 2965607 (1) 8174765 (1) 
     dis: 	3910.000 4296.000 4309.000 4343.000 4550.000 4602.000 4817.000 4894.000 5013.000 5180.000 
query 4 nn's (1): 7091990 (1) 3918536 (1) 3477074 (1) 9958618 (1) 5493369 (1) 811272 (1) 7963557 (1) 6578584 (1) 1751938 (1) 3389697 (1) 
     dis: 	77167.000 78379.000 80355.000 80415.000 81626.000 81973.000 82038.000 82172.000 84283.000 84350.000 
[ 2876.871s ] *** Query time: 47.480
qps: 210.617
 *** acorn recall 
efs:200
acorn get 94865 postive res from 100000 results, recall@10:0.949
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.003 0.009 0.027 0.076 0.225 0.659 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[2880.444s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 84850509
ndis: 0
nreorder: 0
average distance computations per query: 8485.051
[ 2880.444s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/attr_sel_1_500_random_1.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/qrangesel_1_1_500_random_1.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_1/sif_gt_sel_1_1_500_random_1_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_1_M40_ga25_Mb64 200 128"
	User time (seconds): 2808.24
	System time (seconds): 73.79
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 48:02.17
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114643640
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 31620042
	Voluntary context switches: 1
	Involuntary context switches: 4211
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:06
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/attr_sel_1_500_random_2.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/qrangesel_1_1_500_random_2.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/sif_gt_sel_1_1_500_random_2_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_2_M40_ga25_Mb64
ef_search: 200 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/attr_sel_1_500_random_2.json
[ 0.937s ] Loaded metadata, 10000000 attr's found
[ 0.937s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.940s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/qrangesel_1_1_500_random_2.json
[ 0.942s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/sif_gt_sel_1_1_500_random_2_10.json
[ 0.954s ] Loaded ground truth, gt_size: 10
[ 0.954s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.74 (867441226)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824510781)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249960000)
   3. nb of reciprocal neighbors: 102.16
   4. nb of neighbors that are also neighbor-of-neighbors: 966.89 (241683797)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 936.06 (5814794)
   3. nb of reciprocal neighbors: 669.56
   4. nb of neighbors that are also neighbor-of-neighbors: 935.61 (5812010)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.91 (18467)
   3. nb of reciprocal neighbors: 129.95
   4. nb of neighbors that are also neighbor-of-neighbors: 131.32 (18385)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999525 nodes
	level 1: 249954 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2727.726s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.900
[ 3043.716s ] Query results (vector ids, then distances):
query 0 nn's (2): 4160485 (2) 2898305 (2) 1167995 (2) 5514922 (2) 6141318 (2) 5284494 (2) 4738758 (2) 7293718 (2) 7632021 (2) 4538400 (2) 
     dis: 	65950.000 67180.000 72023.000 72798.000 73183.000 73728.000 74463.000 75573.000 75587.000 76603.000 
query 1 nn's (2): 8449497 (2) 5552416 (2) 285986 (2) 4234271 (2) 2253711 (2) 4907604 (2) 1273419 (2) 7501440 (2) 411491 (2) 1263214 (2) 
     dis: 	32633.000 42944.000 43778.000 44439.000 45140.000 46066.000 46522.000 46910.000 46959.000 47608.000 
query 2 nn's (2): 9710602 (2) 5055964 (2) 3900297 (2) 4588082 (2) 8667807 (2) 1931585 (2) 289025 (2) 1571863 (2) 237844 (2) 199400 (2) 
     dis: 	40495.000 42316.000 43033.000 47637.000 47988.000 48317.000 48416.000 48528.000 49294.000 49395.000 
query 3 nn's (2): 4083199 (2) 1527942 (2) 2205832 (2) 4147780 (2) 8410503 (2) 7269483 (2) 2965607 (2) 8174765 (2) 7301932 (2) 3643741 (2) 
     dis: 	3910.000 4309.000 4343.000 4550.000 4817.000 4894.000 5013.000 5180.000 5240.000 5279.000 
query 4 nn's (2): 7091990 (2) 7241286 (2) 3918536 (2) 3477074 (2) 9958618 (2) 5493369 (2) 811272 (2) 7963557 (2) 6578584 (2) 1751938 (2) 
     dis: 	77167.000 77624.000 78379.000 80355.000 80415.000 81626.000 81973.000 82038.000 82172.000 84283.000 
[ 3043.716s ] *** Query time: 58.645
qps: 170.518
 *** acorn recall 
efs:200
acorn get 94667 postive res from 100000 results, recall@10:0.947
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.001 0.003 0.009 0.027 0.082 0.229 0.648 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3049.901s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 85693200
ndis: 0
nreorder: 0
average distance computations per query: 8569.320
[ 3049.901s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/attr_sel_1_500_random_2.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/qrangesel_1_1_500_random_2.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random_2/sif_gt_sel_1_1_500_random_2_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_2_M40_ga25_Mb64 200 128"
	User time (seconds): 2922.89
	System time (seconds): 128.41
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 50:52.07
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114640564
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 60375159
	Voluntary context switches: 261
	Involuntary context switches: 4445
	Swaps: 0
	File system inputs: 8
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
