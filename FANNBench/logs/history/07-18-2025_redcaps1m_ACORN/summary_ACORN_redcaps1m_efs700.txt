Start time: 21:43
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64
ef_search: 700 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.148s ] Loaded metadata, 1000000 attr's found
[ 0.148s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.161s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
[ 0.387s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json
[ 0.610s ] Loaded ground truth, gt_size: 100
[ 0.610s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24955 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025538
Average degree per layer:170923.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 6.399s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 700
selectivity: 0.500
[ 182.834s ] Query results (vector ids, then distances):
query 0 nn's (1540574211): 727106 (1557359735) 562528 (1586530455) 247269 (1563268918) 864174 (1586141206) 64073 (1552081912) 880422 (1565574478) 297407 (1562582134) 84548 (1557155880) 316095 (1551987403) 302187 (1566023840) 997247 (1547217917) 966838 (1570564531) 334544 (1563704708) 650558 (1552134375) 363324 (1588150617) 465841 (1541316839) 988753 (1543862249) 132358 (1558810217) 606467 (1568763473) 135244 (1573331572) 91712 (1562697586) 628377 (1559504189) 596166 (1579563279) 309200 (1583866074) 708925 (1576703816) 708700 (1541202222) 75346 (1564168304) 131965 (1556466636) 825029 (1587509747) 268357 (1575827166) 533175 (1575258274) 493307 (1561727055) 602879 (1548953318) 813377 (1544571766) 909887 (1573250307) 683352 (1542840192) 910784 (1555990616) 699054 (1579379170) 927993 (1565326081) 983152 (1550510814) 763265 (1542459164) 318225 (1582255095) 492624 (1552841438) 539283 (1562519129) 105541 (1553537809) 174023 (1555779163) 439788 (1565854244) 679931 (1540740143) 952583 (1550911908) 77303 (1588455303) 929021 (1555207103) 472918 (1564281975) 422643 (1556978810) 276583 (1587145061) 686231 (1566039123) 517669 (1549396737) 323370 (1580598904) 399187 (1587938124) 154883 (1581301418) 331521 (1564901683) 295694 (1561539309) 553713 (1584927669) 827447 (1565725551) 408155 (1574807905) 934902 (1582861469) 419559 (1588543049) 385435 (1589983348) 707913 (1565018236) 323117 (1550674145) 36195 (1542321827) 575822 (1586298011) 636719 (1578991936) 549870 (1576336840) 417523 (1553807091) 950362 (1576998920) 752134 (1583896379) 911872 (1559076268) 592395 (1544423809) 556864 (1565655760) 949111 (1587581586) 894678 (1585406115) 343054 (1558917962) 501049 (1585237551) 448032 (1579574671) 393166 (1574050070) 87994 (1584776656) 317245 (1566794544) 373982 (1587320434) 289857 (1556114753) 46879 (1559067774) 770943 (1585176238) 804923 (1580916714) 456627 (1576840738) 582770 (1577556364) 654930 (1562191777) 101497 (1571190242) 745043 (1585143585) 837349 (1587672503) 258712 (1588733584) 301131 (1553274671) 
     dis: 	0.629 0.641 0.676 0.743 0.760 0.769 0.772 0.786 0.787 0.788 0.789 0.804 0.805 0.812 0.814 0.815 0.822 0.834 0.843 0.848 0.850 0.851 0.854 0.854 0.866 0.872 0.879 0.884 0.888 0.890 0.895 0.896 0.898 0.898 0.899 0.900 0.903 0.903 0.904 0.904 0.904 0.905 0.908 0.908 0.909 0.909 0.910 0.911 0.911 0.913 0.913 0.913 0.915 0.916 0.917 0.920 0.920 0.920 0.920 0.921 0.921 0.922 0.922 0.922 0.922 0.922 0.923 0.923 0.924 0.926 0.927 0.927 0.927 0.929 0.929 0.930 0.931 0.931 0.932 0.932 0.933 0.934 0.935 0.935 0.935 0.935 0.936 0.936 0.936 0.937 0.937 0.937 0.937 0.937 0.938 0.938 0.939 0.939 0.939 0.939 
query 1 nn's (1590004802): 741325 (1559616195) 666880 (1555641433) 979250 (1523372340) 622447 (1532959985) 803332 (1530141155) 427146 (1514695882) 428754 (1560720094) 110189 (1507487399) 139424 (1535633696) 284310 (1570817806) 994014 (1549410785) 939001 (1521863047) 964018 (1566639637) 928093 (1551573119) 329834 (1552801370) 795520 (1549367888) 7931 (1531328513) 421889 (1509323403) 979295 (1567526425) 848169 (1567967943) 104425 (1517937828) 459927 (1570948131) 661716 (1569475757) 997966 (1560111653) 630058 (1510985967) 832389 (1509148358) 710350 (1543853777) 866328 (1550960142) 399497 (1531827001) 848037 (1547627912) 195548 (1519575345) 577336 (1551645910) 85059 (1560480821) 671340 (1545504039) 326649 (1542991586) 925374 (1547210027) 272839 (1567350368) 709969 (1549840943) 178695 (1539523827) 743973 (1565255174) 885087 (1525644326) 395948 (1572268410) 408156 (1550161639) 857939 (1506859251) 226358 (1565225638) 964128 (1566424023) 620586 (1542847663) 925657 (1569885810) 721597 (1560048937) 324349 (1565636095) 271263 (1523394425) 544577 (1529068259) 557922 (1542237514) 784003 (1503860978) 795310 (1572108672) 418536 (1508889764) 935736 (1516385240) 837200 (1517967912) 107066 (1564445038) 489550 (1561300577) 80871 (1546322460) 320719 (1526407679) 769260 (1570050053) 770454 (1561685089) 55881 (1516654636) 584466 (1558116296) 169444 (1559524323) 244515 (1565195570) 687772 (1567207126) 816247 (1563724766) 62978 (1548008868) 116279 (1540745988) 785418 (1513559759) 135640 (1562247065) 384623 (1530652501) 77283 (1545499206) 388764 (1538816911) 855763 (1569114081) 288542 (1507728447) 750270 (1568905945) 253736 (1537508888) 811301 (1551198823) 916706 (1560980031) 672841 (1520507128) 820498 (1546321274) 213143 (1530845306) 417828 (1564258459) 785513 (1568160267) 1519 (1561555264) 232066 (1563834787) 82481 (1518972141) 86484 (1550619400) 471226 (1503181567) 865350 (1562057425) 885260 (1562875914) 722158 (1557686757) 344524 (1553054923) 722531 (1562614185) 697547 (1524659876) 485598 (1553564926) 
     dis: 	0.100 0.101 0.101 0.103 0.106 0.106 0.107 0.109 0.110 0.112 0.113 0.113 0.113 0.113 0.113 0.113 0.114 0.114 0.115 0.115 0.115 0.116 0.116 0.117 0.117 0.117 0.117 0.117 0.118 0.118 0.118 0.118 0.118 0.118 0.119 0.119 0.119 0.120 0.120 0.120 0.121 0.122 0.122 0.122 0.122 0.122 0.123 0.123 0.123 0.123 0.123 0.123 0.124 0.125 0.125 0.126 0.126 0.126 0.126 0.127 0.127 0.127 0.127 0.127 0.127 0.127 0.128 0.128 0.128 0.129 0.129 0.129 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.132 0.132 0.132 
query 2 nn's (1502815998): 964377 (1605131892) 306439 (1575579764) 757728 (1605423787) 75885 (1601934153) 374226 (1576918189) 71515 (1570882811) 445298 (1589162214) 771849 (1570744783) 903106 (1586146246) 792564 (1597961764) 328504 (1595799020) 161603 (1602887962) 737868 (1571342287) 530996 (1598262380) 494541 (1567102094) 498270 (1586402085) 435452 (1574701387) 751228 (1585488453) 328089 (1574112193) 929527 (1587699711) 837851 (1605837809) 609504 (1590756439) 41616 (1599772018) 633139 (1583107000) 971858 (1600907724) 507734 (1605297824) 610678 (1584998424) 800558 (1578206579) 625921 (1580310462) 919763 (1580427352) 952981 (1588948381) 24425 (1584502238) 589140 (1597778814) 882709 (1573089021) 25586 (1592565722) 33572 (1567059144) 253786 (1598570829) 988519 (1599418976) 10316 (1600442741) 627502 (1584624938) 879865 (1599868306) 222791 (1569733461) 726914 (1582911767) 684897 (1579890463) 192903 (1602694233) 233822 (1587156920) 976907 (1594577610) 230054 (1603647309) 870630 (1568931614) 403717 (1587585205) 844350 (1601083260) 491378 (1598099263) 341373 (1582339286) 136876 (1579879526) 728355 (1598234783) 509068 (1582362871) 910005 (1589155576) 812326 (1580129904) 88997 (1597461015) 985107 (1565328361) 304775 (1575151723) 184796 (1580838071) 625576 (1604050293) 884477 (1588323027) 645543 (1585948706) 470869 (1582932711) 780551 (1599435257) 74992 (1573424430) 14154 (1594153934) 660131 (1601954615) 550905 (1590498833) 459595 (1582500502) 44865 (1586305134) 312490 (1604872882) 319345 (1568052528) 490170 (1604285031) 435592 (1590078863) 578528 (1604204574) 201205 (1586171256) 965924 (1600027560) 826279 (1597417912) 89667 (1574102696) 557020 (1584521629) 962379 (1591499930) 915391 (1601243129) 752639 (1583106240) 623030 (1597864688) 63845 (1588094783) 258161 (1574306665) 351702 (1601462660) 310380 (1597000036) 620162 (1566431760) 187604 (1594862700) 356369 (1600690480) 652018 (1594040809) 66928 (1580572954) 340495 (1589726708) 785841 (1588265143) 985401 (1586115013) 198935 (1603661610) 
     dis: 	0.226 0.238 0.240 0.256 0.263 0.263 0.264 0.265 0.268 0.271 0.273 0.275 0.275 0.275 0.276 0.276 0.278 0.278 0.280 0.280 0.281 0.281 0.282 0.283 0.283 0.283 0.283 0.284 0.284 0.284 0.285 0.286 0.287 0.288 0.288 0.289 0.290 0.290 0.290 0.290 0.291 0.291 0.292 0.292 0.292 0.293 0.294 0.296 0.296 0.297 0.297 0.297 0.297 0.298 0.298 0.300 0.300 0.301 0.302 0.302 0.303 0.303 0.303 0.303 0.303 0.304 0.304 0.304 0.305 0.305 0.305 0.305 0.305 0.305 0.306 0.306 0.306 0.306 0.307 0.307 0.307 0.307 0.308 0.308 0.309 0.309 0.309 0.309 0.310 0.310 0.310 0.310 0.311 0.311 0.312 0.312 0.313 0.313 0.313 0.313 
query 3 nn's (1574739098): 889987 (1593644784) 783586 (1584449301) 124464 (1588791594) 640717 (1593715105) 687871 (1584368476) 595884 (1603585196) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 456770 (1569878368) 382748 (1593824389) 35100 (1602181028) 369955 (1572446350) 108295 (1585156706) 1172 (1593437402) 183160 (1602553401) 27812 (1566082536) 810505 (1600367373) 669781 (1599946426) 758927 (1600115067) 555783 (1582924247) 879049 (1580410467) 269754 (1600944924) 226331 (1587219459) 899709 (1569431812) 622714 (1601863068) 636892 (1588778659) 170065 (1567980012) 725969 (1596031378) 671717 (1569449284) 469326 (1591653206) 910519 (1596209853) 863296 (1568848990) 345300 (1592195475) 225830 (1582762176) 174382 (1591143332) 43568 (1574027594) 4433 (1598650487) 397607 (1576582831) 431136 (1591290445) 989223 (1601168056) 301836 (1586460731) 391302 (1573059058) 800827 (1581281066) 585483 (1591851301) 799434 (1571614920) 696027 (1565089229) 479354 (1574296216) 472875 (1570825151) 638495 (1591051278) 402867 (1586944643) 882799 (1602614385) 208236 (1570403595) 684978 (1569892488) 931871 (1577236835) 184010 (1592663456) 17746 (1578159083) 430216 (1590828473) 433518 (1571765207) 583701 (1579282290) 218254 (1585421290) 328860 (1580625037) 906607 (1590402733) 332772 (1591201180) 100162 (1603446100) 533587 (1578734941) 808853 (1600624761) 418179 (1569261639) 553746 (1565242336) 807512 (1565479561) 567499 (1598482734) 694334 (1583158570) 247163 (1588394370) 222643 (1586742508) 358247 (1598283739) 412295 (1592051871) 340090 (1601066497) 242265 (1582348130) 191420 (1567611844) 309349 (1590795708) 631191 (1576790924) 201176 (1581392986) 944408 (1596325783) 723056 (1596423636) 315020 (1570876084) 37631 (1569700468) 480847 (1575805769) 341069 (1569852456) 706869 (1571407578) 237881 (1577944076) 157117 (1582132864) 302971 (1604786015) 935542 (1579374712) 130248 (1584742028) 521807 (1584918824) 558831 (1600013234) 129828 (1590456161) 923128 (1584271014) 231004 (1598567793) 430670 (1566812498) 
     dis: 	0.403 0.409 0.449 0.455 0.460 0.462 0.465 0.476 0.496 0.496 0.500 0.501 0.503 0.508 0.509 0.509 0.511 0.513 0.513 0.515 0.517 0.517 0.520 0.522 0.522 0.522 0.526 0.526 0.526 0.526 0.526 0.526 0.527 0.528 0.531 0.531 0.531 0.533 0.533 0.534 0.536 0.537 0.537 0.538 0.539 0.539 0.539 0.540 0.540 0.540 0.541 0.544 0.544 0.546 0.546 0.547 0.547 0.549 0.549 0.550 0.551 0.552 0.552 0.553 0.553 0.554 0.555 0.555 0.555 0.555 0.556 0.556 0.556 0.557 0.559 0.560 0.560 0.560 0.561 0.561 0.562 0.562 0.564 0.564 0.565 0.566 0.566 0.566 0.566 0.566 0.567 0.567 0.568 0.568 0.568 0.568 0.569 0.569 0.569 0.569 
query 4 nn's (1565134124): 582698 (1557087889) 959629 (1553076435) 191044 (1542912543) 46163 (1552605357) 279888 (1555515184) 700754 (1557101934) 754904 (1532757000) 68136 (1537086660) 556169 (1553542108) 231993 (1563749968) 54130 (1553866600) 60658 (1512331918) 789873 (1564175719) 589135 (1547166816) 929991 (1548794594) 59094 (1536774042) 455512 (1559505416) 403555 (1549502178) 565451 (1563280600) 834676 (1547757785) 222228 (1543263211) 218677 (1567427396) 902523 (1564343178) 979493 (1540438177) 330129 (1525225883) 584911 (1538696418) 969773 (1527858141) 861337 (1559160334) 481846 (1512692187) 18995 (1561278454) 567017 (1561466150) 143565 (1516103937) 351217 (1545147659) 870723 (1530111079) 616623 (1529427583) 282395 (1552886840) 573206 (1557940034) 507409 (1565232420) 262276 (1518198483) 655488 (1505816775) 857192 (1554140364) 147188 (1501610900) 805996 (1530049195) 51681 (1535136336) 590482 (1550192676) 605725 (1557494891) 500007 (1555794424) 678901 (1558868874) 577889 (1558192255) 732037 (1558530545) 511053 (1554404630) 309894 (1532146088) 842541 (1569071674) 173575 (1509173034) 948602 (1555862584) 148545 (1518097309) 760527 (1492818655) 584115 (1555479090) 244038 (1543691184) 285533 (1567392541) 948484 (1569979308) 392242 (1497525223) 569466 (1522175329) 341328 (1495582876) 907116 (1563321366) 367708 (1513407029) 43574 (1492546668) 573896 (1562646014) 395799 (1560127897) 490515 (1562711345) 440301 (1534385643) 464808 (1521378210) 311214 (1546572875) 204098 (1565367374) 101369 (1531669788) 954881 (1561262229) 56749 (1521485101) 235772 (1551117248) 923538 (1527525691) 850663 (1553673926) 635293 (1564014847) 596233 (1565428603) 583639 (1510024142) 954446 (1568380532) 921524 (1559055905) 745769 (1554844132) 959099 (1569783405) 709494 (1563922629) 940668 (1566892372) 685016 (1551067146) 435576 (1516246088) 156056 (1513534578) 341468 (1497809821) 604226 (1538444207) 246427 (1546653533) 843400 (1549019747) 243614 (1557773802) 547904 (1550941972) 470637 (1514523703) 831639 (1563684890) 
     dis: 	0.260 0.293 0.300 0.300 0.303 0.304 0.305 0.306 0.307 0.307 0.308 0.309 0.313 0.314 0.317 0.317 0.317 0.318 0.320 0.321 0.323 0.323 0.325 0.325 0.325 0.326 0.328 0.328 0.329 0.330 0.330 0.331 0.331 0.332 0.332 0.332 0.332 0.333 0.333 0.334 0.334 0.335 0.335 0.335 0.335 0.337 0.337 0.338 0.338 0.338 0.339 0.340 0.341 0.341 0.344 0.345 0.345 0.345 0.346 0.346 0.346 0.347 0.347 0.348 0.348 0.349 0.349 0.349 0.350 0.351 0.351 0.351 0.352 0.352 0.353 0.353 0.354 0.354 0.354 0.355 0.355 0.356 0.356 0.356 0.357 0.357 0.358 0.358 0.358 0.358 0.358 0.359 0.359 0.359 0.360 0.360 0.360 0.360 0.361 0.361 
[ 182.835s ] *** Query time: 127.105
qps: 78.675
 *** acorn recall 
efs:700
acorn get 997828 postive res from 1000000 results, recall@100:0.998
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.104 0.895 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[182.866s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 108627001
ndis: 0
nreorder: 0
average distance computations per query: 10862.700
[ 182.866s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64 700 512"
	User time (seconds): 176.64
	System time (seconds): 3.00
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:03.12
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3245516
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 15
	Minor (reclaiming a frame) page faults: 835955
	Voluntary context switches: 12991
	Involuntary context switches: 238
	Swaps: 0
	File system inputs: 345184
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:06
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64
ef_search: 700 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 1.296s ] Loaded metadata, 1000000 attr's found
[ 1.296s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 3.489s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
[ 3.571s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json
[ 3.865s ] Loaded ground truth, gt_size: 100
[ 3.865s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24955 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025538
Average degree per layer:170923.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 88.923s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 700
selectivity: 0.100
[ 246.207s ] Query results (vector ids, then distances):
query 0 nn's (1582001887): 562528 (1586530455) 864174 (1586141206) 363324 (1588150617) 309200 (1583866074) 825029 (1587509747) 823706 (1585149377) 318225 (1582255095) 77303 (1588455303) 276583 (1587145061) 399187 (1587938124) 553713 (1584927669) 934902 (1582861469) 419559 (1588543049) 575822 (1586298011) 752134 (1583896379) 949111 (1587581586) 894678 (1585406115) 501049 (1585237551) 87994 (1584776656) 373982 (1587320434) 770943 (1585176238) 745043 (1585143585) 837349 (1587672503) 258712 (1588733584) 497362 (1588354910) 570590 (1588511393) 501436 (1582771136) 754292 (1586803647) 355967 (1588162763) 45927 (1583656700) 864160 (1585410050) 816166 (1584997820) 891917 (1587446953) 725140 (1588203922) 336847 (1582730373) 773035 (1583799451) 965908 (1582821695) 335014 (1584573509) 92781 (1588357051) 978817 (1582339496) 14804 (1582535607) 965396 (1589114636) 44577 (1583002559) 772507 (1585417819) 831695 (1588715230) 2611 (1588686517) 460599 (1583376992) 362104 (1588408854) 209552 (1583795115) 149964 (1586840996) 637833 (1588945798) 422331 (1587177845) 657536 (1588367863) 402718 (1582236128) 73930 (1583187725) 440172 (1584059747) 397290 (1587362599) 723770 (1588188067) 243123 (1588045918) 54810 (1584902782) 673888 (1587268110) 554190 (1586188582) 684450 (1588509074) 642661 (1583692700) 128069 (1582458067) 969562 (1588545723) 709790 (1584231792) 619330 (1583095620) 640553 (1587077190) 306926 (1586204417) 753086 (1586966086) 940166 (1584319245) 317288 (1585987378) 145589 (1589118962) 309885 (1583004780) 526005 (1586415517) 635628 (1582303731) 441294 (1584240497) 727949 (1588774382) 554251 (1585583498) 380465 (1583130128) 683199 (1586999583) 571060 (1587942708) 825813 (1588647609) 577099 (1584731125) 108949 (1587674266) 889453 (1587361700) 483972 (1586265495) 745865 (1585940082) 799266 (1584050542) 479687 (1583202107) 413396 (1588665424) 600423 (1586520086) 990023 (1585908624) 526577 (1586475403) 499404 (1588509080) 490953 (1585249606) 119266 (1584317359) 683374 (1583081928) 530370 (1588517869) 
     dis: 	0.641 0.743 0.814 0.854 0.888 0.905 0.905 0.913 0.916 0.920 0.922 0.922 0.922 0.927 0.930 0.932 0.933 0.935 0.935 0.936 0.937 0.939 0.939 0.939 0.942 0.944 0.944 0.945 0.945 0.946 0.947 0.949 0.950 0.952 0.953 0.953 0.955 0.956 0.956 0.956 0.957 0.957 0.958 0.958 0.958 0.958 0.959 0.960 0.960 0.960 0.960 0.960 0.961 0.962 0.963 0.963 0.964 0.964 0.964 0.965 0.967 0.967 0.967 0.967 0.968 0.968 0.968 0.969 0.969 0.969 0.970 0.970 0.970 0.971 0.971 0.972 0.972 0.972 0.972 0.972 0.973 0.973 0.974 0.974 0.975 0.975 0.975 0.976 0.976 0.976 0.977 0.977 0.977 0.977 0.978 0.978 0.978 0.978 0.979 0.979 
query 1 nn's (1589499026): 964018 (1566639637) 979295 (1567526425) 848169 (1567967943) 661716 (1569475757) 272839 (1567350368) 743973 (1565255174) 226358 (1565225638) 964128 (1566424023) 925657 (1569885810) 324349 (1565636095) 107066 (1564445038) 489550 (1561300577) 769260 (1570050053) 770454 (1561685089) 244515 (1565195570) 687772 (1567207126) 816247 (1563724766) 135640 (1562247065) 855763 (1569114081) 750270 (1568905945) 417828 (1564258459) 785513 (1568160267) 1519 (1561555264) 232066 (1563834787) 865350 (1562057425) 885260 (1562875914) 722531 (1562614185) 654319 (1562203480) 72615 (1562076560) 892976 (1565037919) 623093 (1562598643) 764370 (1562603973) 70419 (1561584228) 469350 (1562335528) 883636 (1564102641) 291657 (1568547556) 642147 (1569768845) 216340 (1567387098) 274103 (1570218669) 901600 (1563702446) 434283 (1561144178) 349713 (1564219857) 606783 (1566702692) 461473 (1563288036) 926275 (1564959288) 639635 (1568309647) 270961 (1563556089) 246783 (1563711236) 80803 (1561544409) 262597 (1569873057) 770215 (1569274956) 199410 (1564269101) 287347 (1564337831) 616405 (1569095085) 942154 (1569191438) 299001 (1565542218) 387132 (1568809665) 885142 (1567946632) 959689 (1565003796) 221752 (1563043037) 667994 (1562513679) 691339 (1568306837) 650379 (1565444264) 323338 (1562185350) 946688 (1566749244) 177051 (1564056908) 205822 (1566131347) 677228 (1567664072) 638246 (1563755724) 438588 (1568387607) 885472 (1564532229) 386053 (1564343817) 966460 (1563230205) 627506 (1564953028) 606890 (1566143371) 749222 (1564451163) 624583 (1561474781) 244957 (1568787071) 366358 (1561848648) 319222 (1569712617) 982374 (1562959746) 937272 (1565184401) 752414 (1564707273) 257802 (1562161142) 17059 (1569474379) 6219 (1562367310) 720244 (1564039332) 35723 (1569870532) 919586 (1562280089) 121520 (1568076447) 542856 (1565018425) 623071 (1567967141) 742178 (1565312437) 528605 (1569761656) 151821 (1564945056) 900158 (1562197870) 126531 (1565671044) 98192 (1567308345) 692254 (1568970205) 111699 (1564180237) 
     dis: 	0.113 0.115 0.115 0.116 0.119 0.120 0.122 0.122 0.123 0.123 0.126 0.127 0.127 0.127 0.128 0.128 0.129 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.134 0.134 0.136 0.136 0.136 0.136 0.137 0.137 0.139 0.139 0.140 0.140 0.140 0.141 0.141 0.141 0.141 0.141 0.142 0.142 0.142 0.142 0.143 0.143 0.144 0.145 0.145 0.145 0.146 0.146 0.146 0.146 0.146 0.146 0.147 0.147 0.148 0.148 0.148 0.150 0.150 0.150 0.151 0.151 0.152 0.152 0.152 0.152 0.152 0.153 0.154 0.154 0.154 0.154 0.155 0.155 0.155 0.155 0.155 0.155 0.155 0.156 0.156 0.156 0.156 0.156 0.157 0.157 0.157 0.157 0.158 0.159 
query 2 nn's (1560999281): 306439 (1575579764) 374226 (1576918189) 435452 (1574701387) 328089 (1574112193) 800558 (1578206579) 625921 (1580310462) 919763 (1580427352) 882709 (1573089021) 684897 (1579890463) 341373 (1582339286) 136876 (1579879526) 509068 (1582362871) 812326 (1580129904) 304775 (1575151723) 184796 (1580838071) 74992 (1573424430) 459595 (1582500502) 89667 (1574102696) 258161 (1574306665) 66928 (1580572954) 736467 (1580426331) 191026 (1575282024) 27739 (1577559718) 382759 (1576615596) 693424 (1577326809) 848308 (1577381740) 782944 (1576643215) 889497 (1574301401) 309618 (1575469598) 782730 (1581701847) 723232 (1580345133) 123871 (1580263351) 399537 (1579217682) 758298 (1581370592) 83984 (1573310768) 699521 (1578031471) 748653 (1577738932) 764977 (1577228673) 12386 (1578076967) 889630 (1581035642) 975747 (1581377891) 564355 (1578800006) 320481 (1577758091) 138150 (1574772939) 838497 (1582143070) 306557 (1574359565) 376247 (1578415912) 734423 (1575329377) 72892 (1576591318) 91884 (1582294672) 552350 (1580932122) 156467 (1581027996) 17303 (1575739255) 864290 (1582406470) 584919 (1576459524) 652051 (1578103605) 960438 (1579035074) 625452 (1578110274) 121261 (1577918137) 187538 (1573434034) 52225 (1573940490) 986416 (1573608765) 257475 (1581231652) 965896 (1580451684) 197289 (1581006814) 409518 (1576352304) 808229 (1580728341) 419992 (1573309297) 42773 (1572925862) 229603 (1576605452) 945221 (1581025505) 465378 (1573412132) 475643 (1576549442) 114934 (1581275578) 904109 (1580680796) 940325 (1573737079) 823556 (1576491942) 450225 (1574334272) 314591 (1573929914) 913084 (1579544680) 80909 (1574188692) 698388 (1580276852) 541438 (1581262786) 324852 (1574625787) 663798 (1575925679) 845644 (1573608523) 66396 (1580970087) 568084 (1579581921) 120420 (1574258520) 376846 (1580137698) 47969 (1578800802) 648008 (1578100185) 300807 (1579781570) 842322 (1572963584) 182286 (1573695169) 698016 (1575034154) 504313 (1575239697) 277852 (1580283035) 243571 (1575145962) 788272 (1581513344) 
     dis: 	0.238 0.263 0.278 0.280 0.284 0.284 0.284 0.288 0.292 0.297 0.298 0.300 0.301 0.303 0.303 0.304 0.305 0.307 0.310 0.312 0.314 0.314 0.315 0.315 0.318 0.318 0.319 0.319 0.319 0.321 0.323 0.323 0.324 0.324 0.325 0.325 0.326 0.326 0.326 0.326 0.326 0.326 0.327 0.327 0.328 0.328 0.329 0.330 0.330 0.331 0.331 0.332 0.332 0.333 0.333 0.333 0.335 0.335 0.335 0.336 0.336 0.337 0.337 0.337 0.337 0.337 0.338 0.338 0.338 0.339 0.339 0.339 0.340 0.340 0.341 0.342 0.342 0.342 0.344 0.344 0.345 0.345 0.346 0.346 0.347 0.347 0.347 0.348 0.348 0.348 0.349 0.349 0.349 0.349 0.351 0.351 0.352 0.352 0.352 0.352 
query 3 nn's (1570293538): 687871 (1584368476) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 555783 (1582924247) 879049 (1580410467) 225830 (1582762176) 397607 (1576582831) 800827 (1581281066) 931871 (1577236835) 17746 (1578159083) 583701 (1579282290) 328860 (1580625037) 533587 (1578734941) 694334 (1583158570) 242265 (1582348130) 631191 (1576790924) 201176 (1581392986) 480847 (1575805769) 237881 (1577944076) 157117 (1582132864) 935542 (1579374712) 923128 (1584271014) 468019 (1576987182) 602682 (1582950625) 929552 (1577063882) 387386 (1582405992) 44181 (1577753526) 48330 (1581407630) 361068 (1575261343) 83031 (1576293557) 222131 (1582710031) 132008 (1578950863) 290462 (1582791014) 867736 (1583111572) 945383 (1577663730) 772511 (1581624973) 52399 (1580756502) 358741 (1579123029) 268380 (1583626170) 817123 (1581712765) 426950 (1577045978) 324064 (1583709179) 57618 (1579265350) 482952 (1580187897) 753842 (1582435434) 48579 (1577171455) 623185 (1581588604) 735285 (1583455225) 590384 (1577822237) 838846 (1576005040) 57396 (1580269242) 130445 (1577597632) 390986 (1577166880) 526488 (1583094282) 135821 (1579577945) 940680 (1580909930) 131738 (1575086416) 571622 (1583068987) 40714 (1578214456) 87349 (1582657329) 562142 (1575756985) 880932 (1576699551) 947728 (1580335819) 108329 (1577944598) 843984 (1577494978) 940165 (1578178197) 315993 (1583350885) 541061 (1583333255) 188856 (1578020553) 958845 (1580419124) 578962 (1580770671) 832818 (1576723727) 929569 (1575325450) 654652 (1582428954) 627510 (1581813790) 956168 (1580842580) 63127 (1584213793) 705193 (1577259166) 584120 (1582149774) 487195 (1578867571) 461504 (1581722535) 203777 (1584272451) 206663 (1576469463) 630733 (1582914090) 502023 (1582737844) 919630 (1579012420) 237849 (1580744030) 25409 (1575834517) 302170 (1584376845) 278147 (1578051299) 396725 (1577846412) 627970 (1579917262) 607359 (1581959525) 693925 (1579039551) 836312 (1578498502) 544709 (1575210593) 380270 (1583416577) 357810 (1579725690) 823847 (1583018793) 
     dis: 	0.460 0.465 0.476 0.496 0.517 0.517 0.531 0.533 0.538 0.546 0.547 0.550 0.552 0.554 0.556 0.560 0.562 0.562 0.566 0.566 0.567 0.568 0.569 0.574 0.575 0.576 0.580 0.584 0.587 0.588 0.590 0.591 0.591 0.591 0.592 0.592 0.592 0.593 0.595 0.595 0.595 0.596 0.598 0.600 0.600 0.600 0.601 0.601 0.604 0.604 0.604 0.605 0.606 0.607 0.607 0.607 0.607 0.608 0.608 0.608 0.609 0.611 0.611 0.615 0.616 0.617 0.618 0.619 0.619 0.620 0.620 0.622 0.623 0.623 0.624 0.624 0.624 0.624 0.624 0.624 0.625 0.626 0.627 0.627 0.627 0.628 0.628 0.628 0.629 0.629 0.629 0.630 0.630 0.631 0.631 0.631 0.631 0.631 0.632 0.632 
query 4 nn's (1572763542): 754904 (1532757000) 330129 (1525225883) 969773 (1527858141) 870723 (1530111079) 616623 (1529427583) 262276 (1518198483) 805996 (1530049195) 51681 (1535136336) 309894 (1532146088) 148545 (1518097309) 569466 (1522175329) 440301 (1534385643) 464808 (1521378210) 101369 (1531669788) 56749 (1521485101) 923538 (1527525691) 4809 (1526640489) 976778 (1529381540) 222638 (1521059736) 158433 (1531143589) 617960 (1533568031) 699783 (1532683504) 327957 (1534474289) 691394 (1526182918) 214285 (1534561001) 877126 (1534786430) 341033 (1523622112) 158019 (1529495719) 271475 (1528418882) 472597 (1518230046) 45427 (1525488953) 899638 (1524615031) 255281 (1520796275) 91846 (1523939963) 611904 (1519355714) 38003 (1527103598) 228976 (1527974395) 968757 (1519826724) 778496 (1528282963) 98515 (1522616211) 542480 (1532986342) 277133 (1530557498) 157423 (1518791927) 939846 (1517192241) 161826 (1532828749) 831230 (1535051164) 872940 (1530591648) 721601 (1533082614) 540290 (1533342924) 428148 (1533488237) 782847 (1531012276) 10221 (1517788069) 680596 (1521122410) 839671 (1523328804) 944173 (1522847377) 766579 (1530120142) 947987 (1525946923) 101752 (1531697704) 315394 (1527180802) 539547 (1526779523) 64213 (1525665397) 92475 (1521127546) 764831 (1529529895) 779346 (1534007250) 43918 (1534970358) 444190 (1527459759) 277836 (1532827616) 644107 (1532398231) 947172 (1533771790) 310256 (1523752772) 150032 (1522584498) 146214 (1533251276) 474889 (1533414897) 112596 (1525801416) 18688 (1525350416) 646663 (1517599163) 998359 (1531789753) 234557 (1532830773) 325809 (1532375093) 13893 (1529081269) 741202 (1520093616) 11708 (1529628187) 912926 (1533570086) 281874 (1533077236) 15543 (1531697110) 132329 (1532801084) 206133 (1517367232) 126523 (1529592102) 521320 (1534879141) 210342 (1525569313) 851179 (1533616116) 156270 (1523832946) 32840 (1533555378) 541860 (1533257793) 501609 (1530615759) 934434 (1521044306) 996919 (1524013438) 502306 (1532221649) 995003 (1533825398) 368963 (1531194974) 
     dis: 	0.305 0.325 0.328 0.332 0.332 0.333 0.335 0.335 0.340 0.345 0.347 0.351 0.351 0.353 0.354 0.354 0.364 0.371 0.371 0.372 0.374 0.379 0.380 0.380 0.382 0.382 0.383 0.383 0.384 0.384 0.384 0.386 0.386 0.386 0.387 0.387 0.388 0.388 0.388 0.388 0.388 0.389 0.391 0.392 0.392 0.392 0.392 0.392 0.393 0.393 0.393 0.394 0.395 0.396 0.396 0.396 0.396 0.400 0.400 0.401 0.401 0.401 0.402 0.403 0.404 0.404 0.406 0.407 0.408 0.408 0.409 0.409 0.410 0.411 0.411 0.411 0.411 0.412 0.412 0.413 0.413 0.413 0.413 0.413 0.414 0.416 0.416 0.416 0.416 0.416 0.416 0.417 0.417 0.418 0.418 0.418 0.418 0.419 0.419 0.420 
[ 246.207s ] *** Query time: 117.759
qps: 84.919
 *** acorn recall 
efs:700
acorn get 998994 postive res from 1000000 results, recall@100:0.999
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.076 0.924 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[246.241s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 69301422
ndis: 0
nreorder: 0
average distance computations per query: 6930.143
[ 246.241s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64 700 512"
	User time (seconds): 157.66
	System time (seconds): 3.22
	Percent of CPU this job got: 65%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 4:06.46
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3245516
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 13
	Minor (reclaiming a frame) page faults: 832510
	Voluntary context switches: 16470
	Involuntary context switches: 307
	Swaps: 0
	File system inputs: 262728
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:38
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64
ef_search: 700 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.158s ] Loaded metadata, 1000000 attr's found
[ 0.158s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.170s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
[ 0.194s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json
[ 0.356s ] Loaded ground truth, gt_size: 100
[ 0.356s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24955 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025538
Average degree per layer:170923.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2.845s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 700
selectivity: 0.010
[ 169.711s ] Query results (vector ids, then distances):
query 0 nn's (1538594774): 754695 (1539668172) 726200 (1540008636) 105181 (1539349926) 593061 (1539613516) 132222 (1538667325) 80643 (1539819925) 688747 (1539751467) 438901 (1539813717) 316477 (1539042271) 761464 (1539388044) 195457 (1538934010) 432450 (1539734933) 428337 (1539401485) 714105 (1539901706) 852506 (1538704387) 466111 (1539474262) 383361 (1540071964) 410145 (1540045273) 406867 (1539626285) 10415 (1538766225) 403179 (1540068939) 736697 (1539997885) 19284 (1539575577) 115357 (1538780125) 765453 (1540079679) 105561 (1538699982) 191774 (1539561123) 605487 (1539736569) 827267 (1538944678) 286683 (1539676487) 889495 (1539530761) 960865 (1539260129) 851245 (1539098448) 296757 (1539473322) 113527 (1539452058) 685450 (1540112311) 316520 (1539569144) 72999 (1539511530) 761580 (1539813405) 15847 (1539717351) 708757 (1538969184) 784125 (1539820331) 837392 (1538920256) 50420 (1538719597) 462521 (1539470700) 978846 (1539606208) 585886 (1539400554) 587451 (1540066930) 719320 (1538804996) 515473 (1539551428) 105520 (1540064197) 455885 (1538797413) 94766 (1538961197) 544414 (1539136801) 734231 (1538957771) 195836 (1538662199) 162121 (1539045824) 470762 (1539957790) 916686 (1539104564) 156384 (1539732652) 134875 (1539134241) 319776 (1539638443) 832075 (1539306045) 114481 (1539925306) 648454 (1539400165) 749410 (1539601562) 326131 (1539534545) 659402 (1539580654) 453024 (1539296927) 836290 (1539993669) 548635 (1539549938) 916382 (1538956979) 941630 (1539538246) 725474 (1539160156) 647654 (1539025046) 446053 (1538846818) 295477 (1538962703) 329360 (1539606553) 995673 (1538954898) 82698 (1538940588) 565939 (1538704534) 90915 (1539863751) 273178 (1539020518) 874031 (1538774402) 519138 (1539483106) 327195 (1539881499) 619188 (1539354076) 708448 (1539783778) 150694 (1538834659) 821022 (1538595325) 583484 (1538989577) 877914 (1538852562) 559208 (1539974728) 760773 (1539986784) 776049 (1538808986) 498187 (1539450359) 217757 (1539050373) 709353 (1539884117) 563696 (1539543706) 668425 (1539011872) 
     dis: 	0.826 0.926 0.935 0.966 0.969 0.971 0.974 0.982 0.985 0.986 0.987 0.988 0.989 0.990 0.992 0.995 0.997 0.998 0.999 1.001 1.003 1.005 1.006 1.007 1.008 1.011 1.012 1.012 1.014 1.014 1.015 1.015 1.018 1.018 1.019 1.020 1.020 1.021 1.023 1.023 1.023 1.024 1.026 1.026 1.026 1.026 1.027 1.027 1.028 1.029 1.029 1.029 1.029 1.029 1.030 1.030 1.030 1.032 1.032 1.032 1.033 1.033 1.034 1.035 1.035 1.035 1.036 1.036 1.036 1.036 1.037 1.037 1.039 1.039 1.040 1.040 1.040 1.041 1.041 1.041 1.042 1.042 1.042 1.043 1.043 1.044 1.044 1.045 1.045 1.045 1.045 1.046 1.046 1.046 1.046 1.047 1.047 1.048 1.048 1.048 
query 1 nn's (1540118398): 634858 (1559095216) 747350 (1558405403) 328886 (1559221626) 878375 (1559157897) 840825 (1559253647) 433046 (1558315145) 977957 (1559149838) 348487 (1559253366) 619059 (1559307158) 409525 (1558370684) 894069 (1558990053) 502253 (1558335904) 847459 (1558414379) 219155 (1559243903) 83086 (1558807992) 82551 (1558977918) 108637 (1558651601) 79458 (1559269747) 781669 (1558490973) 230068 (1558847626) 578948 (1559136620) 620609 (1558456943) 961794 (1558413317) 742667 (1559089743) 195728 (1559144191) 904210 (1559306562) 519066 (1558638878) 10307 (1558925529) 408362 (1558638119) 585058 (1558915362) 252486 (1558496378) 225455 (1558927378) 424854 (1559189379) 591608 (1558670249) 397011 (1559083106) 166315 (1558448258) 932842 (1559313561) 765421 (1558720830) 579042 (1558773453) 847764 (1558894219) 808359 (1558543448) 339841 (1558972247) 751035 (1558885157) 648428 (1558632936) 736397 (1558718335) 842554 (1559266554) 400053 (1558992524) 680641 (1558420474) 295943 (1558848511) 490582 (1559150277) 13244 (1558653965) 526079 (1558982177) 353766 (1558966684) 120595 (1558534783) 498462 (1559103515) 119518 (1558725999) 985979 (1558853808) 40341 (1558718440) 784040 (1559245028) 525284 (1559263100) 368111 (1558341137) 197174 (1558832359) 470375 (1558833742) 835536 (1558643979) 761722 (1559027640) 935237 (1559075107) 733335 (1558364582) 92008 (1559012416) 58531 (1558570337) 460657 (1558650324) 683432 (1558976787) 840386 (1558716836) 219484 (1558392811) 640957 (1558480310) 453460 (1558751446) 175846 (1559162237) 428732 (1558638009) 232890 (1558821763) 25968 (1558621754) 517776 (1558985422) 355282 (1559085172) 738587 (1559015485) 450286 (1559233342) 126404 (1558616101) 222461 (1559228798) 863942 (1558836604) 864460 (1559061417) 126 (1558716044) 651475 (1558648179) 658353 (1558714022) 921916 (1558653827) 817568 (1558498126) 195041 (1558376603) 538522 (1559129885) 654141 (1559139458) 298826 (1558525096) 644907 (1559045036) 733081 (1559074198) 394447 (1558470638) 765733 (1558783794) 
     dis: 	0.134 0.138 0.139 0.144 0.148 0.153 0.158 0.158 0.161 0.162 0.165 0.166 0.168 0.169 0.177 0.180 0.181 0.186 0.191 0.198 0.199 0.201 0.203 0.204 0.208 0.209 0.210 0.213 0.213 0.214 0.214 0.215 0.216 0.218 0.219 0.220 0.225 0.225 0.227 0.231 0.232 0.236 0.236 0.237 0.248 0.249 0.253 0.257 0.260 0.263 0.266 0.267 0.271 0.276 0.276 0.277 0.279 0.284 0.288 0.289 0.293 0.293 0.300 0.301 0.305 0.310 0.312 0.317 0.323 0.326 0.326 0.327 0.328 0.328 0.332 0.334 0.334 0.336 0.336 0.337 0.337 0.338 0.340 0.342 0.342 0.343 0.343 0.345 0.345 0.346 0.346 0.347 0.347 0.348 0.351 0.351 0.352 0.353 0.353 0.354 
query 2 nn's (1558313707): 341373 (1582339286) 509068 (1582362871) 459595 (1582500502) 782730 (1581701847) 838497 (1582143070) 91884 (1582294672) 864290 (1582406470) 354254 (1581792997) 426699 (1581810177) 705 (1582226978) 625527 (1581820216) 550860 (1581780468) 710697 (1582057129) 228658 (1582286587) 204687 (1582470733) 704540 (1581965214) 282404 (1581960293) 209705 (1581908923) 500135 (1581679002) 347005 (1582520891) 781304 (1582459468) 487042 (1582159097) 701153 (1582034091) 986948 (1581969627) 378439 (1581820524) 880558 (1582166419) 878182 (1582491146) 776146 (1582065578) 884131 (1581883010) 278965 (1582080523) 551666 (1581972741) 919538 (1582220265) 565489 (1582473512) 217023 (1581955917) 329121 (1582436943) 374073 (1581693708) 196103 (1581858039) 518821 (1582485179) 32449 (1581958487) 963627 (1581989168) 905340 (1581890796) 150461 (1582510550) 271966 (1581802718) 582384 (1582295732) 382511 (1582488646) 608916 (1582445411) 686195 (1582413070) 187565 (1582253025) 96896 (1582440058) 840659 (1582465030) 281035 (1581991105) 563956 (1581866517) 899682 (1581990993) 877743 (1581893795) 969638 (1582423609) 700117 (1582479367) 539458 (1581712958) 286821 (1581727323) 550828 (1581810172) 430737 (1582304777) 628863 (1582240118) 534883 (1581811043) 698079 (1581808909) 667599 (1581950910) 234992 (1582343382) 965151 (1582236561) 118120 (1582404541) 128732 (1582489502) 745163 (1581888495) 387702 (1581806007) 73452 (1582013385) 9518 (1582386442) 451914 (1581783626) 194296 (1581867858) 140883 (1582050196) 332654 (1581888464) 698383 (1582149276) 597649 (1582118181) 523758 (1581721477) 449169 (1581783626) 245498 (1582441506) 227254 (1582070499) 920174 (1582253261) 728269 (1581695773) 89937 (1582006148) 430356 (1582159997) 628961 (1581979568) 750878 (1582305805) 249453 (1582379661) 787041 (1582215388) 925983 (1581877452) 293301 (1581733023) 531052 (1581968477) 216550 (1581970549) 317904 (1582384187) 529287 (1581750000) 55141 (1581993308) 976606 (1581701214) 987084 (1582352577) 306552 (1581680153) 
     dis: 	0.297 0.300 0.305 0.321 0.328 0.331 0.333 0.353 0.356 0.357 0.357 0.360 0.366 0.366 0.367 0.369 0.369 0.370 0.370 0.374 0.377 0.378 0.379 0.381 0.384 0.385 0.385 0.386 0.387 0.387 0.388 0.388 0.388 0.390 0.390 0.390 0.391 0.391 0.391 0.391 0.392 0.393 0.393 0.396 0.396 0.398 0.398 0.400 0.400 0.402 0.403 0.403 0.406 0.407 0.408 0.408 0.409 0.410 0.411 0.412 0.413 0.413 0.415 0.416 0.416 0.416 0.416 0.417 0.418 0.419 0.421 0.422 0.422 0.422 0.423 0.423 0.423 0.423 0.424 0.425 0.425 0.427 0.427 0.427 0.428 0.428 0.429 0.429 0.430 0.430 0.432 0.432 0.432 0.433 0.433 0.433 0.433 0.435 0.435 0.435 
query 3 nn's (1559317195): 769868 (1542487532) 493967 (1542294990) 953342 (1542471165) 136421 (1542307684) 175440 (1542245841) 238924 (1542209507) 972437 (1541427748) 385496 (1541953821) 762523 (1542714651) 742777 (1541363545) 470469 (1542471828) 507625 (1542348286) 356672 (1542519441) 890826 (1541627340) 925090 (1542531015) 319210 (1541871361) 98052 (1542393773) 706013 (1541385453) 115113 (1541550861) 215896 (1541366777) 652694 (1542650891) 123236 (1541964208) 256044 (1541542861) 413253 (1541594209) 111238 (1542231670) 627154 (1541976321) 596591 (1542570636) 400333 (1541401226) 220754 (1541988883) 619115 (1541644156) 285420 (1541510638) 506008 (1542419158) 253649 (1542569331) 564109 (1542599254) 424169 (1541388856) 378318 (1541963003) 487073 (1542236932) 114248 (1541618982) 206129 (1542391644) 250576 (1542724381) 180060 (1542136356) 148374 (1542546380) 435976 (1541967361) 148668 (1541468583) 996698 (1542886456) 964252 (1542845867) 233813 (1542123551) 314753 (1541811190) 962339 (1541613449) 19058 (1542683916) 587473 (1542052712) 771599 (1541736834) 936427 (1541398470) 808913 (1541766388) 229068 (1542774597) 698409 (1541885147) 185157 (1541602651) 305881 (1542492001) 515096 (1542846999) 403139 (1542403625) 764294 (1541700682) 199056 (1542200974) 847126 (1542364386) 329960 (1541957026) 539779 (1541644300) 942778 (1542076959) 89954 (1542393697) 803914 (1541893103) 218132 (1542831881) 460554 (1542663104) 763103 (1541867573) 706924 (1541365792) 515738 (1541718420) 633020 (1542727756) 654964 (1542894020) 528390 (1541639016) 417363 (1542404536) 42344 (1541843768) 418904 (1542801785) 532025 (1542025838) 848060 (1541904453) 772440 (1541696201) 863161 (1541638272) 781807 (1542004147) 300034 (1542336335) 752450 (1541372953) 382155 (1541441370) 886140 (1542257083) 591957 (1542825421) 28435 (1542037225) 500493 (1542043666) 857263 (1542316097) 821336 (1542331798) 389118 (1542053718) 128425 (1542473765) 988048 (1542242533) 591153 (1542271411) 476044 (1542199373) 870835 (1542610894) 164537 (1542725382) 
     dis: 	0.474 0.561 0.576 0.594 0.597 0.605 0.608 0.611 0.629 0.630 0.634 0.634 0.634 0.650 0.652 0.653 0.654 0.670 0.672 0.675 0.675 0.675 0.676 0.677 0.681 0.685 0.685 0.688 0.688 0.689 0.690 0.690 0.693 0.693 0.699 0.699 0.700 0.702 0.704 0.705 0.706 0.706 0.707 0.707 0.707 0.708 0.709 0.712 0.713 0.715 0.717 0.719 0.719 0.721 0.721 0.722 0.724 0.725 0.727 0.728 0.728 0.730 0.732 0.734 0.735 0.736 0.736 0.738 0.739 0.740 0.741 0.741 0.742 0.742 0.744 0.744 0.744 0.744 0.744 0.747 0.747 0.748 0.748 0.749 0.749 0.750 0.750 0.751 0.751 0.752 0.754 0.754 0.755 0.755 0.756 0.757 0.758 0.758 0.759 0.759 
query 4 nn's (1581675605): 929991 (1548794594) 843400 (1549019747) 556735 (1548803052) 359872 (1548277437) 924765 (1548418215) 855122 (1548705861) 802461 (1548697185) 62976 (1548022732) 488089 (1548395559) 213717 (1548537413) 508517 (1548983858) 520185 (1548433179) 332010 (1548064545) 741617 (1549149038) 356311 (1548857389) 431630 (1548807374) 638905 (1548936508) 480341 (1548646591) 593701 (1549080106) 22045 (1549058584) 159273 (1548284372) 649594 (1548344576) 411121 (1548576149) 946299 (1548080854) 457725 (1548034187) 920881 (1549057866) 933586 (1548384750) 102174 (1548029711) 983711 (1548029525) 38975 (1548105724) 782863 (1548840512) 549098 (1549160164) 29663 (1548214689) 383660 (1548352189) 986514 (1549156354) 175612 (1548256353) 734757 (1548393630) 595389 (1548924720) 519155 (1549093206) 650276 (1548735658) 148970 (1548196293) 601174 (1549067186) 557991 (1549079696) 146628 (1548873736) 578879 (1548909289) 794925 (1548790004) 154078 (1548805147) 407414 (1548951937) 900240 (1548344836) 400844 (1549062908) 448217 (1549032076) 840082 (1548083052) 307317 (1548972614) 229066 (1548102562) 411967 (1548332419) 92391 (1548025254) 790070 (1548964923) 703680 (1548003844) 33390 (1549127061) 572478 (1548978177) 303778 (1548345071) 375710 (1548523323) 240833 (1548647780) 125485 (1548720258) 17178 (1548016432) 321502 (1548719711) 415833 (1548017784) 676032 (1548091413) 238667 (1548085050) 708402 (1548422575) 834289 (1548729227) 688556 (1548611510) 882822 (1549046093) 139157 (1548331227) 60649 (1548577455) 120033 (1548098861) 846418 (1547994090) 603797 (1549054437) 815122 (1548295842) 556786 (1547993791) 631567 (1548759765) 164846 (1549129379) 60294 (1548665327) 576967 (1548632814) 359094 (1548258685) 234452 (1548123512) 942625 (1549063053) 299995 (1548290804) 519526 (1548662604) 115645 (1548346833) 339383 (1548396820) 236676 (1548478051) 808582 (1548836156) 941697 (1548888365) 930936 (1549091475) 365016 (1548393377) 534262 (1548472421) 508 (1548297286) 152512 (1549072598) 225486 (1548465866) 
     dis: 	0.317 0.360 0.374 0.377 0.381 0.383 0.391 0.403 0.406 0.406 0.429 0.431 0.431 0.435 0.439 0.443 0.449 0.455 0.456 0.456 0.457 0.465 0.466 0.467 0.467 0.469 0.471 0.472 0.475 0.475 0.475 0.476 0.477 0.477 0.479 0.480 0.481 0.482 0.485 0.488 0.488 0.492 0.492 0.493 0.493 0.494 0.494 0.495 0.495 0.496 0.498 0.499 0.499 0.501 0.501 0.502 0.502 0.502 0.503 0.503 0.504 0.504 0.505 0.505 0.505 0.506 0.507 0.507 0.507 0.508 0.509 0.510 0.510 0.511 0.511 0.511 0.512 0.512 0.514 0.514 0.515 0.516 0.516 0.516 0.516 0.517 0.517 0.517 0.518 0.518 0.518 0.520 0.520 0.520 0.521 0.521 0.521 0.521 0.522 0.522 
[ 169.712s ] *** Query time: 134.328
qps: 74.445
 *** acorn recall 
efs:700
acorn get 985403 postive res from 1000000 results, recall@100:0.985
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.672 0.326 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[169.745s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 19781062
ndis: 0
nreorder: 0
average distance computations per query: 1978.106
[ 169.745s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64 700 512"
	User time (seconds): 163.38
	System time (seconds): 6.64
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:50.07
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3245652
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1718976
	Voluntary context switches: 9
	Involuntary context switches: 395
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:02
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64
ef_search: 700 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.146s ] Loaded metadata, 1000000 attr's found
[ 0.146s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.160s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
[ 0.176s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json
[ 0.334s ] Loaded ground truth, gt_size: 100
[ 0.334s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24955 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025538
Average degree per layer:170923.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 3.276s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 700
selectivity: 0.001
[ 36.265s ] Query results (vector ids, then distances):
query 0 nn's (1538054874): 291056 (1538175426) 739909 (1538073461) 0 (1568768349) 681590 (1538188501) 1 (1587241519) 763582 (1538057631) 22831 (1538198281) 106108 (1538165652) 530354 (1538092692) 934862 (1538196824) 956771 (1538147067) 275774 (1538150251) 5106 (1538208874) 207313 (1538095001) 238406 (1538160756) 561711 (1538125919) 2 (1603315169) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.210 1.253 1.253 1.254 1.274 1.279 1.279 1.280 1.301 1.322 1.334 1.345 1.348 1.384 1.389 1.426 1.426 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (1538228285): 0 (1568768349) 2 (1603315169) 1 (1587241519) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.806 0.948 0.965 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1506909292): 884982 (1552530804) 215731 (1552585200) 0 (1568768349) 2 (1603315169) 1 (1587241519) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.604 0.637 0.748 0.865 0.913 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1507230692): 214229 (1586996509) 0 (1568768349) 1 (1587241519) 837966 (1586965415) 650460 (1586991518) 2 (1603315169) 78632 (1587006878) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.992 1.025 1.180 1.210 1.316 1.324 1.379 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1552519107): 1 (1587241519) 0 (1568768349) 2 (1603315169) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.784 0.997 1.039 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 36.266s ] *** Query time: 2.268
qps: 4409.276
 *** acorn recall 
efs:700
acorn get 9644 postive res from 1000000 results, recall@100:0.010
recall dist(10% per bucket): 0.974 0.020 0.005 0.002 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[36.340s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 96740
ndis: 0
nreorder: 0
average distance computations per query: 9.674
[ 36.341s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64 700 512"
	User time (seconds): 33.22
	System time (seconds): 3.39
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:36.73
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3242716
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 912971
	Voluntary context switches: 10
	Involuntary context switches: 120
	Swaps: 0
	File system inputs: 1024
	File system outputs: 72
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
