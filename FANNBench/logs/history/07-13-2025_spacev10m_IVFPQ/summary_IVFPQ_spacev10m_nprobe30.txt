Start time: 10:31
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_6_2_500_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_6_2_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 30
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.365s ] Loaded metadata, 20000000 attr's found
[ 1.365s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.368s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.370s ] Loaded 10000 spacev10m queries
[ 1.439s ] Loaded ground truth, gt_size: 100
[ 1.439s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.571s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 539.212s ] Query results (vector ids, then distances):
query 0 nn's (6, 4634, 87963): 1352077 (82446) 1300400 (19) 5030532 (6) 8023016 (6) 2436347 (67552) 606211 (66919) 1781760 (6) 4853416 (6) 3647719 (55397) 290760 (6) 1714233 (67459) 5096505 (19076) 6583311 (23661) 8021837 (17602) 6313468 (10) 2721656 (6) 9148464 (6) 6309057 (69314) 2204643 (18253) 5585254 (6) 7634466 (6) 4779084 (6) 4592488 (6) 8997960 (10) 2382485 (32850) 8538301 (97867) 3881211 (54102) 7007393 (39260) 4279856 (6) 2037978 (19) 5275548 (6) 4022185 (63960) 890298 (10) 6547416 (6) 7305168 (6) 106800 (10) 521477 (78019) 9600306 (6) 2415040 (6) 8846971 (9611) 4066846 (6) 511283 (97145) 1947555 (99275) 2646514 (20) 3828638 (6) 5004916 (19) 4932580 (6) 4915045 (84441) 4287666 (19) 6478048 (6) 6240106 (6) 5950387 (33701) 3057373 (30535) 2605318 (10) 7983463 (16904) 9234384 (6) 8097566 (6) 5236967 (56510) 9957153 (6927) 7330716 (6) 1357760 (6) 8563527 (86849) 8849839 (32910) 3651927 (69293) 3636367 (57022) 8341867 (92823) 7826722 (10) 7115332 (6) 3611695 (34903) 587457 (71981) 9169598 (6) 3622412 (6) 5320284 (6) 1666 (6) 9715655 (71983) 488103 (25628) 9576118 (10) 5560302 (10) 4715886 (6) 841711 (19771) 1545295 (94099) 1954970 (10) 4104937 (41784) 74334 (19) 5839410 (10) 1604234 (10) 6487757 (80253) 7887947 (33537) 3815686 (6) 2912614 (10) 5014941 (3680) 1985395 (38906) 2210342 (6) 3178566 (10) 3341474 (10) 4795860 (10) 7905927 (56841) 9469914 (6) 9426007 (67842) 8504623 (82848) 
     dis: 	3341.555 3558.984 4275.268 4520.620 5024.053 5260.997 5329.049 5518.065 5521.637 6092.811 6122.817 6247.640 6254.688 6361.337 6520.098 6534.335 6571.315 6627.021 6703.960 6712.188 6712.188 6923.574 7006.466 7085.572 7166.396 7292.290 7292.523 7475.898 7668.837 7770.476 7814.050 7830.836 7865.851 7878.941 7930.551 7963.682 8068.920 8104.739 8125.620 8219.742 8229.662 8238.021 8305.371 8357.732 8422.494 8430.933 8562.139 8628.605 8660.164 8738.425 8759.140 8870.273 8877.213 8877.850 8887.686 8912.922 9008.827 9013.942 9033.175 9115.459 9148.111 9164.880 9184.734 9216.428 9228.418 9237.871 9239.459 9360.211 9364.410 9373.359 9381.196 9383.824 9386.525 9431.528 9432.357 9450.677 9504.428 9529.215 9541.047 9567.089 9567.345 9632.602 9677.152 9680.544 9711.540 9714.913 9744.189 9756.121 9765.999 9782.039 9783.742 9826.719 9854.002 9875.965 9950.687 9956.871 9971.771 9975.606 9980.904 9996.572 
query 1 nn's (6, 5470, 88798): 1027770 (6) 7672609 (15924) 3024255 (72395) 6716785 (31805) 4573755 (79398) 3010609 (46230) 6693881 (88858) 3843020 (6) 8596579 (663) 1852123 (33745) 1739093 (95935) 547651 (59182) 2769394 (10) 4731052 (10) 6631934 (10) 5453229 (59158) 5778168 (6) 3255981 (95716) 4023729 (26268) 9559160 (10) 5312590 (6) 2848947 (43197) 7504439 (21717) 9311189 (74798) 8268659 (24674) 5140912 (19) 2342379 (4483) 3823789 (73220) 1262717 (59275) 2308516 (6) 9353295 (21460) 5321556 (10) 5374088 (10) 7995495 (98550) 3467889 (13970) 7070658 (6) 4936049 (2652) 765304 (10) 1674348 (10) 4561316 (6) 7957281 (51267) 9750308 (6) 5325898 (6) 497310 (10) 2400979 (55852) 5907642 (6) 5183877 (8660) 8598995 (26412) 3193849 (71730) 7714223 (55685) 2677560 (10) 2077395 (13249) 5888778 (10) 1119716 (10) 8377057 (96074) 5427517 (57589) 7898285 (20686) 1847088 (10) 3730938 (10) 6005945 (68913) 3171582 (10) 5116926 (6) 3579661 (49531) 7107065 (73072) 6783786 (6) 3302437 (60178) 3699133 (9100) 2775410 (10) 1259440 (10) 3767930 (6) 6218290 (10) 4952577 (38738) 7896078 (6) 8219055 (91011) 9979859 (8212) 7208440 (6) 8300390 (6) 8086137 (78267) 307231 (83108) 6481742 (6) 6314594 (6) 1386102 (6) 4414583 (66231) 3510541 (14975) 2233630 (6) 7000075 (67909) 5755448 (10) 9780570 (6) 3253492 (19) 1010768 (10) 1175501 (54050) 7430809 (86109) 3940736 (6) 3787303 (80206) 829204 (6) 1587846 (20) 419655 (45354) 6255602 (10) 4333009 (8114) 8680758 (6) 
     dis: 	4951.676 5879.518 6388.603 7614.397 7797.702 8396.163 8396.801 8588.030 8631.122 8661.861 9137.823 9148.979 9206.575 9239.021 9293.700 9385.241 9463.719 9671.066 9681.187 9757.467 9757.604 9759.240 9797.882 9801.692 9808.093 9820.999 9916.422 9917.418 9923.583 9938.969 9964.014 9964.785 9964.950 10060.589 10145.601 10211.613 10290.739 10295.046 10299.835 10321.362 10332.029 10352.860 10373.654 10399.735 10437.386 10472.448 10484.000 10489.525 10507.036 10572.902 10662.205 10665.625 10743.326 10757.227 10777.031 10779.470 10800.264 10809.167 10811.119 10821.417 10858.062 10910.203 10929.021 10972.246 10983.195 11002.873 11015.050 11024.872 11047.003 11080.872 11087.094 11142.678 11143.221 11149.586 11202.398 11256.481 11274.488 11294.567 11301.396 11319.311 11323.146 11369.698 11373.731 11396.531 11405.533 11418.250 11426.594 11456.836 11464.286 11503.037 11506.643 11513.305 11514.986 11559.668 11578.215 11608.293 11610.409 11622.009 11632.678 11665.165 
query 2 nn's (6, 6014, 89345): 4574760 (19) 5189301 (576) 8005273 (50044) 4290437 (88854) 3524579 (28904) 9191130 (6) 5932138 (19) 7542827 (81765) 2966676 (20) 8699363 (46816) 5193386 (6) 5236859 (26256) 2096002 (6) 4969561 (36325) 9602743 (63312) 9746650 (19) 5423341 (98433) 190238 (6) 6688464 (6) 6212714 (6) 7670329 (55245) 9485250 (6) 3361974 (19) 1233143 (76083) 4578631 (10151) 2153650 (6) 9339955 (77172) 4195631 (81781) 9023762 (19) 7126935 (54438) 4493257 (19861) 2557172 (10) 801867 (1420) 3405939 (41719) 3578812 (6) 3890438 (6) 6451690 (10) 2655117 (33644) 9743895 (19399) 6371127 (62350) 6665934 (6) 8264753 (46954) 894483 (50988) 4517312 (6) 8719744 (6) 6105163 (55827) 7822601 (94854) 7037734 (6) 1349042 (6) 5597353 (11322) 192071 (80804) 6334408 (10) 1978808 (6) 2953283 (45238) 6489161 (98401) 1358363 (91958) 8672644 (20) 9957421 (59987) 7111817 (96507) 1264837 (72639) 512960 (10) 6010182 (163) 5430287 (6035) 2353418 (10) 5422621 (34999) 5461858 (6) 4001654 (6) 494920 (6) 1282146 (6) 9177119 (92400) 6561981 (75072) 5891991 (38072) 5800932 (6) 8060848 (6) 7276798 (19) 9247159 (34997) 6829020 (6) 6399400 (10) 3436280 (6) 6403508 (6) 8873657 (60621) 349510 (19) 4489586 (6) 3989900 (10) 7585231 (82270) 7444447 (11040) 5943431 (82537) 2873617 (31338) 7545774 (19) 6791210 (174) 4998301 (10847) 9117124 (6) 2826478 (6) 2262803 (40535) 7643282 (10) 951709 (93918) 3542525 (89751) 3548091 (56653) 3408851 (33846) 4011639 (37249) 
     dis: 	3040.931 3396.189 4005.862 4578.350 4985.623 6238.109 6557.125 6887.648 7112.242 7260.264 7288.263 7407.258 7529.874 7825.517 8071.849 8136.970 8789.828 8922.498 8953.350 9043.457 9050.707 9124.141 9172.170 9278.067 9685.342 9786.212 9805.555 9839.009 9908.007 9917.584 9933.327 10037.378 10149.090 10155.821 10201.693 10210.879 10277.791 10298.174 10370.032 10383.254 10416.560 10450.468 10565.965 10583.876 10602.193 10656.849 10694.041 10702.812 10705.393 10720.469 10740.497 10784.173 10815.025 10818.419 10855.636 10859.858 10901.356 10908.032 10946.392 10950.449 10971.548 10999.236 11001.598 11004.789 11005.186 11036.880 11099.745 11122.602 11123.942 11151.174 11165.704 11174.820 11182.323 11182.670 11192.567 11193.875 11238.701 11254.425 11263.108 11324.973 11351.111 11377.294 11378.176 11381.695 11384.511 11385.029 11407.836 11416.600 11418.353 11419.724 11431.283 11439.910 11466.683 11483.881 11502.423 11536.722 11560.019 11564.069 11572.392 11580.558 
query 3 nn's (6, 13264, 96604): 7481558 (6) 1153720 (6) 9922446 (6) 9732223 (67656) 4150154 (6) 4000886 (19) 7375372 (6) 5679390 (6) 3092361 (93495) 4371036 (19) 1866926 (20) 220595 (4429) 1717763 (49900) 9455216 (10) 3489463 (13849) 7909680 (10) 2272653 (31186) 2845726 (6) 1986111 (70350) 909327 (37225) 1212415 (45485) 9100185 (6767) 7775637 (69406) 9232458 (10) 3358568 (6) 4559449 (70007) 4474761 (37344) 6920544 (6) 8741259 (80737) 1074776 (10) 6447414 (10) 8559924 (10) 1174052 (6) 5785595 (92238) 7623822 (10) 6334064 (19) 8821621 (19778) 9591320 (10) 484745 (76485) 3085720 (6) 9444180 (6) 9671911 (54409) 8159578 (10) 5962673 (64701) 9987911 (32012) 7550297 (62902) 8656601 (10842) 4183705 (48176) 5356231 (28859) 383549 (88962) 7082379 (30821) 2423598 (6) 5683960 (20) 398589 (91023) 6546803 (27494) 237313 (82839) 5566014 (6) 8171167 (60812) 4885973 (60583) 7726743 (87762) 3483488 (6) 5826985 (8208) 7110321 (38270) 5119260 (6) 8669768 (6) 8871347 (27387) 205735 (55518) 5946592 (6) 5868840 (6) 2343424 (6) 8726555 (87460) 2824029 (96979) 8182930 (6) 3071605 (84231) 8860902 (10) 264481 (25267) 4653543 (53190) 2838160 (6) 730245 (57267) 8145731 (84190) 5176976 (6) 1430920 (10) 3922636 (10) 9760951 (87875) 662720 (6) 3212141 (46591) 3042886 (6) 2018818 (6) 188678 (6) 9069999 (10179) 3266491 (54860) 9754021 (91838) 8345750 (493) 8477134 (6) 7492776 (6) 4886181 (77009) 5056650 (10) 4570984 (6) 3279722 (10) 756034 (6) 
     dis: 	7873.033 8346.340 8473.836 8686.969 8712.388 8737.447 8843.779 9173.876 9200.078 9418.432 9443.771 9564.521 9582.531 9751.061 9852.841 10028.703 10037.766 10081.150 10126.018 10135.577 10266.923 10302.910 10320.559 10324.750 10329.043 10441.537 10551.779 10566.543 10581.117 10595.141 10658.848 10676.953 10782.791 10793.126 10823.746 10825.712 10869.390 10883.352 10903.383 10906.606 10908.412 10920.675 10943.934 10965.323 10970.995 10991.217 11020.549 11050.146 11103.997 11104.361 11118.092 11126.637 11128.555 11146.557 11153.344 11231.453 11234.869 11264.336 11298.812 11307.168 11313.547 11329.581 11332.737 11345.025 11373.238 11385.428 11414.640 11414.846 11452.295 11516.638 11517.953 11541.860 11543.170 11548.719 11566.475 11605.434 11615.858 11631.541 11646.640 11647.182 11648.897 11671.286 11703.753 11721.332 11730.315 11767.832 11784.119 11786.933 11790.985 11802.447 11809.736 11820.295 11861.299 11861.536 11865.833 11872.591 11877.770 11878.121 11881.330 11885.672 
query 4 nn's (6, 16092, 99434): 8316529 (78440) 5624462 (6) 3987492 (10) 1706143 (58697) 9534901 (61115) 9970746 (6) 2953313 (31770) 6872756 (6) 3849231 (45260) 6279473 (67720) 4015525 (60650) 6095172 (6) 8302917 (83970) 9652129 (8860) 3526517 (79687) 9833382 (20) 9578545 (38315) 3468105 (50889) 9801790 (6) 2279438 (6) 9193832 (6) 3693862 (19) 2320125 (97918) 3037959 (54920) 1384227 (58201) 57144 (10) 5562283 (61388) 1171695 (95893) 2190868 (6) 4842135 (720) 3480152 (6) 6557844 (10) 7100626 (10) 9374623 (24548) 6082909 (3495) 9240243 (16525) 3655068 (6) 6836665 (22125) 349859 (85986) 1546917 (47014) 5685630 (6) 2066916 (6) 3646712 (20) 8359241 (10735) 6289012 (6) 5688541 (17185) 3598596 (6) 7045085 (3107) 3195289 (77764) 6685392 (10) 3484563 (72573) 9438625 (59366) 2795570 (6) 3421968 (6) 3795738 (6) 7558970 (6) 703166 (6) 4734386 (60) 1444782 (6) 8728294 (6) 3531751 (38537) 1066421 (10811) 4942478 (10) 5506147 (46761) 4491189 (23862) 7177846 (10) 4637157 (97947) 9436869 (65469) 9688429 (49785) 6902589 (94014) 8360636 (6) 8641215 (16208) 1240644 (19) 5663813 (39402) 9600067 (89820) 9765986 (6) 8701864 (6) 3852808 (19) 569140 (10) 7637276 (6) 6738443 (66076) 1555419 (68239) 3949243 (30072) 1426152 (10) 1060205 (64173) 5123136 (6) 2798193 (15717) 6310952 (10) 9426967 (55989) 288977 (78531) 4175678 (6) 6297263 (80695) 9195081 (15430) 6680137 (37549) 4567297 (83931) 7987544 (6) 8456127 (81371) 7131413 (14229) 1718685 (9412) 717371 (70769) 
     dis: 	2177.756 3610.687 3856.535 4314.966 5071.824 5305.715 5784.582 6043.119 6069.313 6100.910 6211.677 6247.159 6294.575 6339.760 6349.282 6359.874 6368.127 6377.483 6436.075 6451.869 6453.242 6465.331 6472.816 6477.264 6480.089 6537.355 6544.390 6555.624 6561.318 6585.419 6603.510 6674.421 6678.773 6681.778 6726.060 6726.776 6770.410 6774.033 6775.717 6776.958 6781.140 6800.159 6800.361 6803.143 6808.993 6812.826 6821.971 6829.889 6830.399 6844.074 6847.915 6851.883 6865.872 6874.183 6891.355 6905.359 6913.929 6914.599 6924.547 6931.497 6935.372 6940.821 6947.667 6958.853 6974.124 6974.285 6989.806 6991.185 6992.943 6997.358 7006.054 7026.451 7031.828 7036.965 7040.643 7075.711 7075.991 7076.980 7081.312 7098.359 7111.177 7136.868 7170.935 7181.502 7189.365 7190.633 7192.285 7194.382 7195.683 7211.999 7220.397 7224.686 7236.736 7236.926 7251.373 7257.670 7258.022 7264.528 7264.637 7265.658 
[ 539.212s ] *** Query time: 20.185
qps: 495.417
 *** ivfpq recall 
ivfpq get 742081 postive res from 1000000 results, recall@100:0.742
recall dist(10% per bucket): 0.001 0.007 0.018 0.038 0.060 0.090 0.119 0.165 0.263 0.240 0.001 
finished ivfpq index examples
[ 539.260s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_6_2_500_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_6_2_500_random_6_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 30 100"
	User time (seconds): 537.25
	System time (seconds): 2.11
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:59.37
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1328036
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 709353
	Voluntary context switches: 13
	Involuntary context switches: 424
	Swaps: 0
	File system inputs: 88
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:12
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_10_2_500_random_10.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_10_2_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 30
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.366s ] Loaded metadata, 20000000 attr's found
[ 1.366s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.368s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.371s ] Loaded 10000 spacev10m queries
[ 1.439s ] Loaded ground truth, gt_size: 100
[ 1.439s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.565s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 492.617s ] Query results (vector ids, then distances):
query 0 nn's (10, 49216, 82548): 9694965 (27290) 4617714 (10) 5261441 (70272) 2807977 (57285) 1354982 (6) 5475688 (10) 1168348 (6) 3249603 (84271) 2204374 (6) 9347328 (20) 8662145 (57844) 5594224 (6) 8725926 (10) 6554307 (31307) 2641910 (10) 374574 (10) 2029623 (96987) 3612104 (469) 1895416 (19) 1055 (60878) 9128531 (39254) 5816885 (87198) 3388855 (16869) 3709236 (10) 8474279 (99661) 8394786 (6) 8067752 (6) 6967437 (15331) 1358141 (63775) 2167163 (92355) 3322281 (16511) 8361821 (78819) 3909075 (88219) 1952371 (36843) 1545663 (62351) 8843034 (6) 3121541 (54399) 9253806 (19) 1106014 (6) 5667758 (6) 4846164 (10) 7706220 (6) 4246173 (46158) 5118287 (47838) 867306 (6) 451046 (6) 8793164 (10) 7976764 (6) 2630733 (93961) 8046497 (19065) 2640588 (10) 2447136 (10) 178350 (6) 303346 (6) 1449574 (6) 9846571 (46425) 946120 (6) 1801081 (40880) 7437237 (38120) 4246848 (6) 6132210 (6) 3791236 (6) 321600 (6) 8048413 (36726) 3956609 (67255) 4900059 (69984) 6092077 (86902) 3307659 (16712) 5822268 (20) 6780323 (16668) 7044885 (58428) 1068138 (6) 4644935 (35334) 5232970 (6) 8336078 (10) 540774 (6) 9869612 (10) 841307 (22672) 8006237 (37660) 1470023 (16176) 9115507 (94361) 2939481 (77525) 9451378 (20) 3496198 (6) 5723965 (33957) 1494916 (6) 6004864 (6) 6219674 (6) 5019051 (31368) 9364877 (98709) 5414760 (10) 3678606 (10) 2317182 (10) 3230501 (81914) 4903531 (92153) 2872184 (6) 1283040 (10) 2623787 (37495) 2697372 (10) 7180179 (56886) 
     dis: 	5911.416 7570.556 8546.633 8626.439 8796.165 8956.002 8977.087 9036.808 9047.820 9171.195 9176.939 9252.262 9383.501 9718.043 9763.932 9930.701 9979.620 10035.731 10074.014 10144.688 10161.907 10379.304 10485.183 10495.199 10538.968 10539.939 10555.514 10695.173 10752.307 10773.809 10775.234 10793.109 10855.145 10912.846 10989.469 11030.062 11044.351 11083.309 11093.573 11158.271 11305.354 11344.889 11394.449 11437.445 11463.000 11526.027 11527.418 11528.486 11565.747 11623.289 11624.393 11632.980 11652.653 11682.121 11763.303 11764.689 11786.266 11881.955 11889.455 12043.473 12095.396 12120.975 12241.635 12310.344 12377.398 12396.055 12403.488 12408.215 12499.623 12507.023 12610.508 12636.355 12651.193 12675.994 12688.618 12817.035 12834.342 12846.305 12859.492 12864.278 12865.811 12904.840 12960.396 13028.123 13055.076 13065.236 13154.176 13403.679 13557.166 13577.062 13591.586 13685.346 13796.666 13805.995 13841.998 13907.092 13928.447 13970.297 14017.549 14062.647 
query 1 nn's (10, 19883, 53197): 8108335 (18245) 3545414 (6) 7980366 (6) 2201796 (6) 9943863 (72533) 4612326 (6) 1656217 (31418) 6716625 (8793) 987766 (6) 9542350 (20) 6270422 (6) 3402133 (40204) 3695413 (38708) 1141657 (29520) 7666189 (33935) 7629371 (62316) 3375782 (10) 1377453 (92143) 5984083 (55264) 7852133 (48732) 9609504 (6) 5156753 (46443) 7452717 (80282) 9025213 (47303) 1230317 (88781) 8605143 (96144) 4172721 (33612) 8313860 (20) 3916292 (10) 4052065 (943) 9675336 (10) 6340832 (6) 5969404 (6) 8578191 (80570) 7198190 (6) 822082 (6) 8597183 (92680) 4848017 (96029) 1548410 (6) 9080943 (45566) 1106933 (66863) 9304025 (40455) 4539076 (6) 3409365 (68957) 8271386 (6) 9005626 (6) 106949 (36090) 6214884 (6) 7529166 (19) 9997186 (6) 5893116 (6) 8118481 (59488) 8004010 (6) 5753693 (18424) 424928 (10) 5064267 (7697) 9651263 (75158) 6888185 (45970) 3429255 (71191) 6492634 (6) 7760599 (2591) 5219432 (10) 9439157 (53603) 316839 (50959) 7471161 (18059) 7968900 (10) 7443572 (6) 4953510 (6) 8746874 (6) 4559158 (6) 6704562 (6) 1797620 (6) 7841909 (86138) 3144041 (14549) 1060947 (57734) 7423517 (12007) 7499767 (21876) 9924846 (10) 3091928 (6) 2686220 (6) 953193 (39754) 8045386 (6) 3651163 (57349) 9200089 (47120) 9857448 (10) 4190346 (6) 314492 (10) 2404310 (6) 2647145 (12838) 7871849 (65067) 406887 (12005) 4654980 (6) 82259 (22113) 7739832 (6) 9914953 (13288) 6074925 (40569) 252233 (26846) 7612246 (6) 6935398 (6) 1826658 (10) 
     dis: 	6451.890 7656.533 9476.132 9537.359 10604.575 10868.520 10900.485 11077.724 11117.977 11167.115 11202.352 11331.343 11401.885 11445.806 11472.104 11495.251 11522.844 11655.184 11675.902 11747.900 11813.738 11839.787 11884.328 11907.352 11930.157 11942.696 11959.719 11993.186 12071.688 12076.197 12124.131 12202.911 12257.375 12282.089 12321.452 12361.763 12458.396 12487.219 12542.164 12596.742 12597.363 12615.846 12628.961 12746.881 12830.779 12831.565 12851.830 12860.848 12862.309 12872.225 12882.973 12909.492 12918.238 12932.668 12938.355 13046.267 13065.055 13128.266 13179.291 13197.472 13199.329 13215.770 13244.033 13252.455 13254.919 13255.920 13257.512 13285.107 13297.586 13297.731 13298.832 13303.853 13336.201 13367.515 13367.924 13376.664 13383.908 13386.250 13415.354 13415.883 13436.497 13454.143 13471.936 13495.406 13504.307 13515.107 13516.961 13529.872 13537.403 13540.510 13551.119 13581.082 13607.392 13609.064 13609.666 13614.617 13615.211 13617.365 13619.135 13619.896 
query 2 nn's (10, 1495, 34809): 5798651 (35315) 2432557 (71478) 323907 (36040) 8559091 (34095) 5745884 (10) 6672275 (15201) 4297707 (71309) 6794035 (37698) 7634670 (10) 1401743 (90829) 3322631 (72968) 3776514 (6) 3686996 (6) 5329091 (40732) 4972945 (97216) 5749330 (20) 2594487 (17466) 8755245 (48968) 1481914 (6) 3199638 (6) 3771101 (35665) 700264 (19) 3709896 (6) 4858138 (6) 7408759 (12138) 5087430 (10) 3261993 (14585) 1699600 (6) 3597868 (19) 7147975 (52921) 6257635 (80949) 6042148 (6) 6561491 (54689) 5908619 (96322) 5292532 (6) 6799372 (6) 9568973 (59337) 8991918 (20) 401438 (6) 5394801 (8020) 9961916 (6) 7147896 (10) 3065484 (10) 4698927 (31133) 8516242 (20) 5579144 (10) 6689469 (61442) 1762639 (94131) 3145209 (21131) 6179775 (78722) 6679312 (6) 6182142 (6) 9598171 (85018) 9705570 (10) 9353814 (6) 9076857 (23165) 5968964 (6) 6307828 (6) 9968918 (6) 1665093 (89793) 5012551 (38783) 7876191 (46503) 8611942 (6) 7652161 (3662) 2925428 (6) 7418908 (6) 6362692 (6) 9989075 (22940) 9955713 (46214) 1898905 (80773) 6043134 (6) 6861922 (6) 3026188 (6) 8919214 (19) 9275827 (98904) 1572554 (6) 4883342 (6) 3575834 (20) 8711849 (88148) 2274653 (22743) 7153445 (99) 991494 (6) 5383072 (6) 1066595 (42272) 4424715 (65817) 7142785 (92065) 2883953 (28797) 7166334 (6) 6529948 (10) 1949894 (226) 2726847 (65119) 4215659 (66740) 824498 (6) 4343169 (82922) 7634223 (32545) 9317104 (6) 7378423 (12288) 5071350 (6) 5511915 (63027) 1566962 (6) 
     dis: 	8973.196 9429.855 9447.551 9454.530 9516.260 9573.036 10245.340 10634.850 10999.327 11013.273 11141.714 11167.684 11201.961 11346.439 11405.870 11421.523 11522.168 11600.450 11803.267 11925.976 11950.146 11955.770 11974.082 11976.057 11980.894 12051.997 12075.556 12084.806 12176.004 12186.615 12239.631 12251.314 12253.938 12288.053 12296.513 12332.492 12339.119 12357.623 12366.826 12371.369 12450.336 12482.055 12488.575 12523.222 12532.150 12549.798 12560.768 12639.295 12643.191 12669.887 12692.404 12715.731 12748.943 12750.605 12750.646 12765.095 12772.497 12822.723 12839.324 12855.684 12865.336 12880.500 12921.646 12924.045 12954.686 12972.489 12982.391 13021.944 13033.193 13062.755 13075.010 13080.336 13097.685 13106.352 13168.781 13185.899 13187.521 13192.910 13209.119 13209.758 13216.340 13223.549 13239.156 13283.759 13300.156 13308.207 13316.566 13344.140 13356.403 13421.013 13423.035 13459.789 13515.959 13521.693 13531.207 13535.535 13535.674 13545.440 13559.102 13573.104 
query 3 nn's (10, 6802, 40120): 2187959 (59205) 4889443 (12568) 9398930 (6) 5081773 (71771) 9793596 (10) 629955 (16039) 7885127 (85394) 2851767 (78752) 5676630 (6) 4194256 (6) 9698504 (6) 1892004 (6) 3787993 (61247) 6922913 (28247) 5924329 (40823) 4925397 (24403) 1174438 (20) 4957815 (55006) 4642116 (19) 3907409 (93602) 181911 (88468) 7865786 (6) 445803 (98256) 5988838 (10) 312551 (55582) 7062232 (6) 4991264 (19) 2605021 (71552) 436298 (6) 6370666 (6) 443057 (83616) 839498 (10) 1359896 (10) 4334213 (58227) 6563460 (10) 7541460 (10) 3626423 (17416) 8453511 (42100) 8581597 (99075) 2082227 (20371) 7528916 (6) 6743076 (6) 173114 (6) 8324929 (76837) 2772844 (6) 3908037 (68482) 1252238 (10) 522697 (10548) 2153783 (3696) 8768561 (70229) 2058181 (87168) 6000334 (6) 1606884 (6) 3067976 (6) 5788714 (6) 7469627 (90516) 1088105 (44403) 8970199 (59070) 1240381 (52) 9268984 (6) 7567043 (77669) 5570654 (6) 8851651 (48708) 9308855 (60454) 2212301 (45369) 7756249 (31103) 1411734 (10) 4503777 (95098) 1473665 (53802) 1348580 (6) 7498922 (6) 7676978 (19) 6806756 (10) 6590066 (10) 1319961 (27491) 5542604 (6) 8696524 (6) 8108413 (55655) 5439593 (42318) 1735635 (68299) 5384598 (6) 7430988 (19) 6983171 (87209) 9054751 (9692) 7526460 (10) 2714939 (31715) 7389605 (59409) 3138790 (6) 6870454 (10) 9449666 (6) 9610280 (6) 4826141 (65902) 7520424 (10) 4543118 (10) 7983811 (38973) 2714870 (19) 9072810 (6) 7593591 (68927) 8901802 (6) 1384187 (24908) 
     dis: 	9525.734 10077.080 10280.201 10516.162 10574.636 10879.118 11184.463 11219.842 11478.780 11495.786 11692.943 11767.880 11782.334 11971.541 12030.041 12065.431 12079.988 12100.439 12365.315 12423.898 12431.572 12456.683 12508.024 12547.254 12630.514 12649.941 12670.691 12691.202 12766.611 12767.747 12778.926 12819.637 12880.619 12907.828 12946.287 12952.965 12955.870 12974.994 13008.255 13034.025 13050.234 13056.111 13068.133 13069.822 13093.390 13142.956 13158.894 13171.982 13186.372 13243.730 13247.036 13286.600 13291.371 13325.331 13338.748 13366.168 13378.840 13391.693 13428.039 13497.223 13499.436 13537.684 13582.209 13584.241 13587.830 13590.982 13593.918 13623.541 13630.539 13640.541 13647.046 13650.781 13657.463 13674.159 13674.197 13692.166 13751.307 13803.286 13858.739 13881.520 13899.842 13914.092 13922.900 13964.254 13972.166 13973.626 13997.019 14052.562 14061.696 14062.375 14063.604 14075.867 14107.786 14109.541 14126.113 14175.424 14199.061 14213.991 14245.283 14246.639 
query 4 nn's (10, 52190, 85533): 4352168 (6) 9211260 (10) 4390138 (6) 5922287 (95540) 1587943 (65369) 6581013 (36021) 8608979 (43214) 9519711 (95583) 8452116 (6) 8902014 (6) 4505796 (6) 7921516 (10) 5350870 (6) 500157 (69378) 1113458 (6) 4847349 (68899) 6851242 (6) 4314613 (929) 3020513 (83567) 6587421 (75844) 8483760 (19) 4514688 (10) 4159743 (89783) 7650915 (52535) 5509171 (2095) 9654936 (10) 5627225 (72788) 9244311 (85003) 5518218 (6) 7009572 (20) 8019290 (6) 2966237 (22143) 6296356 (10) 1595830 (19) 7232690 (6) 3689417 (89259) 6857077 (69557) 2668513 (52443) 5979415 (69024) 8664243 (11851) 1780947 (91736) 5464207 (48972) 7601363 (34906) 307550 (6) 6471787 (26378) 7868398 (10) 5451308 (10) 2714041 (88868) 7447299 (45652) 1180414 (10) 2503898 (6) 7106185 (61203) 8007590 (6) 6871337 (16107) 3652531 (68921) 6862934 (10) 9972111 (51891) 4535787 (82982) 2355914 (6) 7786235 (46075) 9928941 (2272) 1193052 (6) 7664685 (15473) 4486020 (6) 8248472 (6) 1291989 (8443) 7271477 (90247) 1751542 (10) 7228802 (10) 6631862 (6) 6284344 (10) 1777191 (23933) 431743 (76452) 5091437 (9774) 883849 (35294) 5752111 (48530) 9822847 (91803) 7018715 (60181) 6872346 (10) 2156786 (6) 3805483 (88714) 3146552 (6) 5997432 (6) 4243855 (16936) 9439305 (61997) 4576227 (58639) 4167917 (4987) 456872 (6) 345476 (10) 6510749 (40709) 8034111 (42256) 9018520 (6) 7544631 (13421) 2559121 (23853) 4027259 (22699) 3860846 (6) 543477 (88482) 6723712 (10) 3008018 (6) 4745104 (6) 
     dis: 	5324.612 5539.291 5889.110 6221.112 6377.479 6554.955 6584.656 6756.838 7018.376 7066.201 7100.781 7169.192 7184.787 7186.653 7194.491 7223.747 7230.535 7232.089 7255.493 7288.326 7293.473 7296.087 7298.745 7305.452 7315.059 7315.148 7335.834 7342.071 7347.542 7369.658 7369.871 7405.180 7416.179 7428.093 7440.983 7444.456 7449.402 7461.515 7479.589 7480.220 7492.733 7504.526 7511.851 7526.651 7536.147 7550.273 7559.689 7598.278 7599.678 7604.738 7625.745 7628.004 7665.208 7665.815 7675.397 7693.378 7712.363 7716.701 7724.138 7725.036 7725.882 7732.869 7733.348 7740.587 7741.565 7754.009 7755.174 7767.408 7772.837 7775.736 7777.229 7778.033 7805.796 7806.062 7810.957 7827.914 7840.125 7856.350 7868.212 7873.853 7880.010 7893.391 7903.212 7906.018 7924.141 7926.288 7932.834 7945.244 7954.769 7955.306 7957.603 7961.704 7961.722 7962.396 7987.390 7990.422 7990.681 7993.239 8001.019 8012.750 
[ 492.617s ] *** Query time: 13.214
qps: 756.764
 *** ivfpq recall 
ivfpq get 659825 postive res from 1000000 results, recall@100:0.660
recall dist(10% per bucket): 0.002 0.015 0.040 0.072 0.097 0.122 0.151 0.177 0.208 0.113 0.001 
finished ivfpq index examples
[ 492.656s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_10_2_500_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_10_2_500_random_10_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 30 100"
	User time (seconds): 490.85
	System time (seconds): 1.88
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:12.75
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1328036
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 635779
	Voluntary context switches: 1
	Involuntary context switches: 702
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:31
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_19_2_500_random_19.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_19_2_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 30
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.370s ] Loaded metadata, 20000000 attr's found
[ 1.370s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.372s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.375s ] Loaded 10000 spacev10m queries
[ 1.443s ] Loaded ground truth, gt_size: 100
[ 1.443s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.580s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 159.151s ] Query results (vector ids, then distances):
query 0 nn's (19, 54085, 74094): 3676917 (585) 8266715 (66672) 4491502 (6) 4882576 (6) 4426046 (10) 433915 (91530) 1644403 (88941) 907845 (4261) 257160 (6) 445072 (6) 5259061 (88566) 212096 (10) 846869 (73953) 7991325 (53098) 9489169 (69854) 8177215 (80736) 9250903 (42927) 2007920 (10) 4103915 (45105) 609838 (10) 4491816 (10) 5607709 (23521) 6301292 (10) 7590413 (26437) 2613614 (20) 1241741 (65385) 390124 (10) 8938384 (10) 9684629 (81622) 1913520 (10) 7462049 (75884) 4141505 (23463) 2827357 (66431) 9960032 (20) 7345331 (10257) 4865959 (81534) 9487879 (34895) 9363233 (7576) 4704534 (6) 5462644 (6) 5309511 (34979) 6498004 (6) 1014778 (10) 5878329 (78151) 8788339 (70210) 1005494 (6) 5051611 (23822) 5062409 (66251) 5166521 (80934) 8740194 (6) 3391099 (446) 3678459 (64580) 5851137 (88030) 8250807 (80342) 4015856 (20) 4491372 (10) 6093226 (10) 6915544 (6) 9438519 (60002) 7033950 (6) 9962573 (76958) 5440539 (98252) 8460829 (76640) 5293649 (96075) 983327 (80576) 9378610 (10) 3393559 (1797) 5848656 (6) 6563590 (6) 3045222 (10) 5660124 (10) 7643933 (53149) 2313772 (10) 2093064 (6) 2180179 (76626) 8137814 (6) 161062 (6) 9624076 (6) 9374397 (84750) 5690411 (95924) 9501432 (10) 8928805 (71553) 8319084 (6) 1829268 (6) 1842339 (94579) 9299922 (6) 1671720 (6) 7836631 (59844) 1749039 (54376) 931884 (10) 4981633 (65433) 1431274 (6) 3993919 (12400) 5814175 (90238) 8096693 (44806) 5211865 (51747) 2523099 (12715) 2848952 (6) 6265441 (9193) 2188208 (10) 
     dis: 	7983.470 9198.772 11411.658 11412.396 11698.703 13399.312 13700.120 14192.066 14478.933 15736.026 16263.006 16492.916 16794.787 16855.725 16945.385 17238.832 17253.740 17544.555 17801.383 17816.881 18035.883 18064.609 18190.490 18210.697 18273.387 18273.492 18286.441 18370.016 18418.836 18458.807 18469.428 18491.648 18510.357 18520.266 18547.055 18622.348 18660.486 18709.750 18744.312 18769.311 18869.266 18879.895 18911.004 18919.066 19086.359 19115.531 19149.312 19201.434 19218.393 19223.340 19284.461 19301.578 19346.643 19359.033 19374.305 19375.494 19377.738 19415.057 19440.602 19532.137 19538.713 19560.990 19581.711 19650.750 19668.508 19738.662 19851.076 19936.131 19941.732 19947.338 19964.104 19993.002 20005.242 20007.691 20057.971 20080.213 20104.203 20153.051 20161.691 20161.938 20247.584 20263.119 20316.533 20332.352 20364.793 20366.344 20411.805 20447.859 20524.641 20536.996 20552.287 20562.125 20571.262 20576.973 20577.031 20685.066 20745.689 20803.123 20831.273 20861.869 
query 1 nn's (19, 51456, 71454): 9149269 (26405) 2054287 (32509) 7684675 (58291) 1614850 (6) 6240107 (16061) 8109414 (6) 1367688 (10) 3398393 (71117) 4461812 (6) 5823959 (7813) 9471600 (10) 1320404 (10) 500808 (10) 512161 (73267) 576366 (6) 859643 (39347) 6216352 (6) 7387245 (10807) 5161060 (20) 9192134 (10) 2383569 (8803) 872980 (20) 934402 (10) 5759290 (10) 6694691 (6924) 2525056 (6) 8478537 (71987) 3840375 (48395) 7023022 (19) 7971597 (44319) 2764078 (6) 8168477 (63841) 7495293 (62009) 93425 (85830) 8264275 (18427) 387061 (15943) 489553 (36016) 625664 (10) 5243518 (10) 9851412 (10) 7585735 (56859) 9354356 (6) 6666242 (6) 9374443 (3940) 3246818 (6) 1252275 (57248) 2771303 (28330) 546238 (6) 5140053 (48747) 1992806 (6) 9859362 (10) 1513344 (10) 1171459 (22832) 8134395 (43069) 3853134 (6) 2393356 (6) 9146808 (6) 8544458 (6) 7396947 (67767) 1545707 (72514) 9641892 (6) 8074895 (34182) 33627 (55995) 6140489 (25240) 2946464 (6) 6604005 (24619) 1991556 (20) 2574170 (6) 6545643 (54433) 6242032 (6) 4047172 (6) 1140654 (6) 739360 (6) 3004961 (27246) 7771013 (16169) 3353060 (10) 8943818 (6) 9033767 (17832) 6254638 (10) 1531649 (30936) 9225798 (10) 5654007 (99946) 9252297 (72477) 4884130 (10) 3257481 (69146) 3740147 (79089) 1640754 (6) 8017453 (6341) 9606338 (20) 8279264 (6) 1864360 (6) 9330501 (2579) 4891482 (10) 2627104 (6) 4951771 (38757) 3083250 (6) 6214833 (35958) 2456302 (6) 9127539 (13065) 6146777 (43922) 
     dis: 	9182.754 10339.520 11319.307 12734.326 12931.402 13036.351 13122.611 13176.967 13927.658 13962.732 14100.131 14101.123 14176.512 14188.735 14375.414 14441.926 14524.308 14545.646 14650.859 14719.461 14725.352 14740.543 14914.919 14954.512 14981.710 15022.878 15140.539 15172.258 15173.440 15269.138 15279.447 15297.650 15302.834 15425.865 15498.174 15617.104 15794.008 15797.463 15822.177 15823.322 15877.455 15883.115 15915.482 15955.762 15958.771 15980.346 16097.771 16136.898 16165.316 16184.536 16274.990 16292.977 16313.177 16330.119 16337.062 16346.633 16418.539 16551.250 16562.549 16572.977 16596.246 16630.312 16630.334 16678.514 16680.605 16861.633 16877.336 16913.086 16926.924 16933.521 16950.318 16986.082 17030.969 17063.836 17068.898 17078.906 17083.201 17084.963 17135.742 17144.426 17207.359 17210.484 17243.449 17251.297 17268.078 17301.135 17305.914 17365.145 17386.121 17396.047 17423.203 17425.236 17435.713 17445.070 17498.107 17498.539 17500.398 17506.084 17527.383 17556.115 
query 2 nn's (19, 77343, 97360): 2433280 (19) 7187535 (12323) 613441 (78850) 6291171 (68591) 9608237 (67916) 4264587 (88110) 7743420 (10) 6883351 (86733) 5429885 (77103) 2992613 (7650) 2331863 (67999) 454849 (5694) 8679578 (10) 5239857 (99081) 7803542 (10) 8700855 (31240) 6331450 (6) 5699749 (85055) 5622039 (70171) 1835764 (10) 7120262 (10) 4419695 (96005) 1242605 (20995) 8124614 (6) 1492365 (25731) 6765608 (10) 5642195 (42529) 5022344 (6) 924832 (6) 4407277 (24311) 201128 (6) 6574740 (19) 4008394 (10) 7029285 (66010) 3615620 (19) 739812 (6) 5609306 (6) 8835352 (10) 1339118 (6) 288059 (7406) 5977034 (6) 435058 (6) 1681426 (10) 4851161 (48931) 1473461 (99032) 6812426 (10) 2594818 (10) 9646683 (51689) 5841140 (20) 3170242 (6) 8130805 (94095) 8322740 (6) 9178881 (93482) 4120165 (646) 1034635 (88133) 981088 (6) 144622 (10) 7823581 (90841) 7239494 (6) 4307737 (92324) 8117922 (6) 765680 (6) 291735 (82432) 6175249 (76445) 6362157 (62649) 977059 (86100) 6399396 (6) 634902 (10) 6017182 (6) 1276399 (58688) 21420 (6) 6447242 (6) 6958379 (50045) 573638 (6) 5539840 (10) 9727331 (47151) 5613422 (10) 2640319 (54246) 2661178 (10) 3593819 (95074) 2539344 (6) 4863077 (50456) 3562650 (10) 3307229 (29039) 7278643 (7751) 6398868 (6) 9981835 (24867) 722444 (10) 4612021 (33867) 9481615 (59357) 9177532 (6) 2264084 (6) 6781 (47476) 4052611 (6339) 8053826 (10) 5959529 (1344) 7372386 (6) 5044123 (42062) 8880227 (72111) 8824088 (6) 
     dis: 	9938.313 11624.403 12080.166 13071.408 13085.940 13365.021 13412.664 13496.703 13511.149 13553.408 13563.426 13830.087 14028.129 14071.002 14115.970 14262.457 14323.703 14356.434 14411.028 14478.088 14494.453 14546.540 14912.559 14983.092 15135.140 15172.118 15181.707 15204.662 15255.425 15469.810 15474.172 15512.969 15568.771 15581.827 15597.879 15784.271 15919.807 16057.451 16072.816 16134.382 16137.526 16289.045 16302.572 16434.199 16447.312 16491.934 16540.211 16593.486 16599.971 16661.637 16667.324 16698.244 16723.102 16804.094 16815.059 16879.791 16904.836 16939.775 16948.594 16967.027 16997.703 17021.949 17120.164 17126.393 17151.604 17270.146 17309.424 17313.904 17376.547 17409.887 17451.398 17505.504 17540.691 17559.529 17687.988 17709.527 17727.424 17734.682 17762.719 17784.307 17876.053 17891.941 17947.389 17951.047 17985.141 18019.705 18091.125 18114.010 18142.432 18181.070 18265.303 18344.039 18368.789 18383.752 18446.402 18464.871 18468.348 18472.391 18502.316 18584.521 
query 3 nn's (19, 13157, 33160): 7320373 (58147) 5651044 (6) 4645015 (66590) 347839 (84820) 860298 (6) 7969254 (6) 5105366 (6) 37729 (31657) 4867364 (6) 1185027 (98655) 7408569 (55359) 6675522 (6) 5763972 (6) 5167877 (7081) 1535783 (48782) 3826459 (59911) 4525331 (28708) 6924895 (81278) 6117373 (50828) 1305951 (59966) 9411819 (37987) 9955663 (9305) 4532365 (98485) 9200867 (5091) 9191819 (29959) 4152738 (6) 589404 (6) 1054196 (6) 116684 (10) 6981837 (58046) 4671705 (46330) 3021380 (6) 149089 (88172) 1379687 (85395) 4514384 (10) 8728526 (6) 6164882 (6) 6680575 (65334) 934827 (27672) 3871150 (6) 8213213 (42403) 819484 (6) 5832226 (10) 949978 (6) 1254792 (6) 7305252 (10) 9713552 (10) 1399957 (86788) 9727426 (10) 4447694 (19) 5905099 (70787) 7334026 (10) 7822280 (10) 569966 (6) 4943709 (58499) 517076 (10) 9066956 (6) 5636214 (6) 9924729 (83182) 1638774 (10) 2756802 (10) 8179974 (6) 4119836 (6) 8808242 (6) 8372265 (88772) 1566760 (6) 9581901 (73388) 951807 (25573) 7618661 (13935) 5324457 (78631) 9757738 (6) 8927208 (10) 6665599 (91751) 7250823 (6291) 2920333 (14941) 1418483 (71325) 2829986 (10) 8800890 (6) 8565326 (6) 4688034 (10) 1308918 (6) 938963 (1343) 3347008 (6) 8615080 (10) 9770209 (78886) 5929126 (6) 4609759 (78917) 9614924 (20) 8990564 (6) 1854167 (33299) 6258742 (19) 813146 (10) 4230916 (480) 3342249 (5531) 998282 (10) 6698943 (3670) 6139363 (2596) 8391239 (52916) 2989425 (81686) 1624020 (6) 
     dis: 	12743.900 12785.460 13365.457 13419.297 13586.329 13668.193 13699.751 13989.547 14025.472 14062.062 14184.836 14574.146 14654.264 14711.461 14850.059 14867.275 15034.268 15058.938 15156.275 15188.428 15323.150 15395.353 15480.045 15520.625 15778.988 15826.028 15975.352 15995.049 16166.560 16168.237 16311.081 16444.723 16567.502 16592.656 16629.125 16669.146 16698.318 16712.746 16725.996 16727.439 16744.182 16998.896 17034.215 17035.994 17063.117 17071.398 17150.012 17161.182 17166.002 17242.750 17314.771 17329.750 17367.176 17432.244 17438.814 17444.445 17595.164 17606.074 17647.834 17733.256 17798.908 17836.930 17870.301 17962.771 17973.871 18014.457 18017.111 18029.266 18045.748 18078.299 18117.707 18127.660 18154.094 18224.145 18246.820 18257.270 18301.068 18314.559 18324.588 18480.248 18492.516 18493.793 18534.404 18580.227 18590.055 18661.396 18726.514 18743.756 18784.842 18823.867 18857.986 18867.279 18879.344 18908.723 18920.838 18953.646 18977.264 19012.738 19036.070 19078.771 
query 4 nn's (19, 17387, 37379): 523134 (6) 4732096 (10) 1973506 (6) 6139726 (10) 4469667 (43183) 8988515 (35550) 6569452 (10) 34166 (10) 5754923 (51873) 7630728 (6) 5215029 (72087) 5390707 (27512) 4530712 (10) 3199881 (96988) 1441979 (14528) 2367539 (14430) 6707649 (45790) 4243053 (92238) 4504834 (6) 6583682 (6) 229235 (61886) 9883399 (58942) 5623622 (6) 6801081 (94526) 1957755 (99362) 4532575 (39631) 4209461 (50572) 6479322 (6) 4369045 (42661) 8922961 (44153) 8559522 (10) 8132503 (74582) 6077177 (30450) 3069835 (99908) 6677893 (61444) 2852659 (3372) 8794083 (90338) 8166060 (10) 250784 (6) 1196598 (6) 3173945 (58037) 7638966 (10) 5431574 (6) 1536587 (92016) 5125127 (66439) 7141776 (10) 3401777 (56712) 2423134 (10) 7549379 (52756) 8205769 (3888) 9862137 (71238) 9055146 (6) 4452608 (10) 9482109 (61788) 5666978 (6) 9326185 (76632) 8133329 (33667) 4607027 (97186) 104081 (18964) 3375922 (10) 9508153 (92060) 2664998 (6) 4030322 (6) 4877488 (10) 2138460 (6) 7987555 (30446) 9542988 (6) 7765017 (24716) 6923439 (89212) 9594729 (44569) 2384364 (6) 2424866 (6) 5762765 (37457) 3722920 (6) 9992356 (6) 2052855 (38456) 1097337 (46143) 3451270 (6) 3425196 (6) 9852817 (33625) 5129661 (50797) 1040935 (84523) 5643568 (6) 6505010 (6) 6429670 (6) 5473857 (6043) 7428535 (56209) 7306587 (70105) 7343709 (26392) 619662 (10) 3509938 (6) 3861405 (12827) 9465535 (11490) 726882 (19) 5443355 (57677) 6916228 (19) 8852075 (95700) 3833166 (6) 296064 (6) 645889 (83861) 
     dis: 	6672.447 6976.264 7149.876 7427.866 7512.737 7670.168 7694.484 7870.772 7944.321 8016.206 8034.459 8072.688 8165.882 8181.971 8191.631 8192.799 8278.959 8293.625 8399.081 8475.537 8480.027 8505.926 8513.638 8552.811 8581.345 8608.859 8624.795 8638.262 8645.483 8646.700 8650.368 8662.189 8710.638 8785.477 8785.949 8798.516 8800.214 8828.809 8830.798 8851.603 8926.790 8933.418 8944.104 8976.639 9006.043 9016.916 9019.951 9063.853 9081.445 9090.883 9113.401 9130.602 9131.814 9139.240 9141.045 9164.483 9166.060 9181.502 9200.898 9208.091 9211.625 9275.118 9282.506 9303.017 9342.521 9425.481 9443.381 9458.661 9469.869 9484.186 9492.304 9537.613 9541.775 9590.400 9593.519 9593.673 9602.691 9614.539 9616.414 9659.479 9672.014 9686.943 9692.039 9763.492 9774.987 9781.737 9802.100 9807.731 9810.950 9815.611 9826.801 9881.907 9885.228 9922.433 9924.688 9931.090 9936.672 9936.773 9958.453 9961.518 
[ 159.152s ] *** Query time: 11.140
qps: 897.640
 *** ivfpq recall 
ivfpq get 414214 postive res from 1000000 results, recall@100:0.414
recall dist(10% per bucket): 0.020 0.094 0.159 0.192 0.209 0.164 0.104 0.046 0.011 0.002 0.000 
finished ivfpq index examples
[ 159.183s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_19_2_500_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_19_2_500_random_19_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 30 100"
	User time (seconds): 158.34
	System time (seconds): 0.92
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:39.27
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1328036
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 362757
	Voluntary context switches: 5
	Involuntary context switches: 276
	Swaps: 0
	File system inputs: 0
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:43
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_20_2_500_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_20_2_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 30
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.363s ] Loaded metadata, 20000000 attr's found
[ 1.363s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.365s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.368s ] Loaded 10000 spacev10m queries
[ 1.437s ] Loaded ground truth, gt_size: 100
[ 1.437s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.584s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 134.983s ] Query results (vector ids, then distances):
query 0 nn's (20, 90181, 93345): 9227489 (34911) 5105824 (6) 1372881 (62716) 8482810 (19) 5571087 (161) 7508287 (83704) 2987138 (6) 8451430 (6) 9294288 (10) 9362057 (79412) 5715923 (70300) 957243 (10039) 5805755 (41282) 9487548 (10) 5677096 (6) 3539552 (6) 4610640 (6) 1927622 (19) 7619293 (30428) 1638878 (191) 8104814 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	10732.834 14368.220 16257.496 16804.012 17088.859 17535.420 17899.668 18396.961 18795.682 19622.910 19723.330 20629.576 20723.320 21203.426 21455.953 22220.199 22349.129 22627.363 22998.031 23391.184 24010.648 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 59593, 62758): 8799879 (22518) 6496767 (76736) 112662 (6) 4786973 (3764) 7082387 (30088) 8420486 (10) 6919424 (6) 3069239 (23231) 1274619 (4255) 9459514 (6) 6731123 (38104) 9678472 (6) 8638626 (6) 1446866 (10) 830754 (10) 703802 (6) 4408344 (6) 2897518 (6) 7141914 (6) 2917275 (66588) 7944825 (27331) 7886266 (6) 6180530 (6) 3271413 (80372) 2821244 (6) 4005923 (51236) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	12057.234 12290.301 14399.174 14571.910 14720.905 14923.604 15458.473 15666.773 16977.812 17136.037 17377.793 17679.125 17780.668 17997.113 18404.625 18607.598 18870.537 19001.396 19443.838 20094.211 20259.824 20274.391 20507.727 20893.992 20993.934 22341.146 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 41561, 44722): 9909884 (6) 2167857 (64546) 2743912 (6) 6644950 (6) 9993387 (69441) 5927608 (10) 8529174 (19) 3299047 (87558) 2199820 (10) 5315787 (68836) 9743574 (10) 8378316 (10) 1538109 (26365) 9398239 (17048) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	14938.047 16102.095 17460.246 17794.314 17820.605 18187.592 18306.965 18879.957 19157.840 19387.773 19499.316 19658.195 20566.842 22702.092 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 4197, 7363): 2360519 (23305) 5497231 (43800) 6752785 (3284) 5108046 (10) 5376610 (6) 5492399 (13395) 218723 (44991) 6491301 (9475) 5380131 (41291) 2989856 (20) 3600110 (10) 8040391 (69389) 2724644 (10) 4022169 (99498) 6229320 (6) 7385549 (77992) 4682375 (2960) 8735139 (7398) 3492659 (41726) 9220048 (6) 7651518 (6) 2624284 (6) 5551386 (6) 9693526 (10) 2882551 (8834) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9903.758 11838.703 13358.748 13872.616 16283.851 16519.746 16697.068 16710.932 16746.600 16870.084 17468.668 17663.695 18263.369 18736.381 18977.672 19035.703 19587.070 19995.047 20110.797 20587.793 20981.922 21144.418 21159.441 21322.754 21865.836 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 78842, 82010): 6766851 (51212) 3093046 (10) 494240 (6) 6206323 (56620) 4197183 (67547) 150712 (6) 4637283 (25653) 1039081 (24302) 563072 (6) 5554835 (48707) 7608030 (6) 9543424 (6) 9255969 (82169) 3051587 (52435) 8851163 (29347) 544102 (10) 5792112 (6) 7135235 (3168) 3983625 (63223) 3284352 (6) 491377 (57122) 8176669 (55686) 6852687 (93035) 2057039 (73643) 1570758 (6) 119569 (3625) 1632815 (36860) 99754 (6) 2212152 (10) 7445977 (7574) 4999077 (14219) 7168602 (19) 2637799 (57506) 6751481 (10938) 6844757 (77034) 5733389 (68444) 1913769 (76177) 1625862 (6) 2995839 (50193) 7584444 (6) 5451944 (6) 2708835 (82662) 9660982 (6) 9023856 (6) 448129 (97216) 180415 (90766) 6940946 (6) 3467012 (6) 6071480 (6) 1561208 (6) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7387.994 7892.229 8652.887 8833.570 8853.506 8964.199 9239.968 9259.113 9945.878 9968.318 10023.236 10087.937 10154.420 10171.689 10738.857 10923.706 10945.336 11142.448 11198.121 11279.054 11341.941 11409.243 11661.771 11733.495 11829.182 11917.359 12290.866 12365.443 12378.988 12400.143 12641.760 12695.197 12786.711 12945.677 12997.043 13133.381 13159.487 13346.601 13412.748 13570.338 13712.331 14189.521 14238.615 14261.783 14776.113 15096.949 15311.802 16254.774 17100.500 18342.287 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 134.983s ] *** Query time: 11.062
qps: 904.027
 *** ivfpq recall 
ivfpq get 135905 postive res from 1000000 results, recall@100:0.136
recall dist(10% per bucket): 0.265 0.571 0.154 0.009 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 135.015s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_20_2_500_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_20_2_500_random_20_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 30 100"
	User time (seconds): 134.17
	System time (seconds): 0.95
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:15.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1328040
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 362718
	Voluntary context switches: 4
	Involuntary context switches: 98
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
