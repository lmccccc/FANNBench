Start time: 08:19
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.761s ] Loaded metadata, 10000000 attr's found
[ 0.761s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.763s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.765s ] Loaded 10000 sift10M queries
[ 0.773s ] Loaded ground truth, gt_size: 10
[ 0.773s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.312s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.078
[ 2986.983s ] Query results (vector ids, then distances):
query 0 nn's (14071, 22071): 2898305 (16783) 578867 (18379) 9860956 (21446) 9607176 (20707) 9103413 (18425) 1000673 (18318) 8052577 (17624) 476293 (21482) 6392245 (20684) 6436545 (19953) 
     dis: 	67180.000 80841.000 82276.000 83936.000 86265.000 86345.000 86793.000 86891.000 87576.000 88420.000 
query 1 nn's (38925, 46925): 9958454 (41038) 3786289 (46579) 4512099 (39486) 2235415 (41809) 1015812 (41048) 7512095 (46490) 9868698 (40309) 5796685 (40324) 2890986 (44977) 8263593 (41769) 
     dis: 	51055.000 57771.000 60127.000 62601.000 64480.000 65166.000 66830.000 68091.000 69262.000 69581.000 
query 2 nn's (66733, 74733): 4588082 (73917) 7500565 (73913) 8086660 (68439) 271911 (70728) 2953864 (73136) 5631784 (66875) 8635193 (70758) 1625792 (67647) 4283746 (69195) 4542872 (66877) 
     dis: 	47637.000 51634.000 54318.000 54365.000 57221.000 57398.000 57831.000 58508.000 58925.000 58989.000 
query 3 nn's (45159, 53159): 5275424 (48831) 179529 (47340) 2112048 (48858) 7691560 (52816) 7119531 (52069) 7463079 (46530) 6697954 (52735) 7583501 (48101) 543054 (47307) 3080406 (48852) 
     dis: 	7338.000 7708.000 7792.000 8087.000 8362.000 8404.000 8912.000 8939.000 9374.000 9786.000 
query 4 nn's (42699, 50699): 4366121 (45715) 1850409 (48067) 4775817 (43422) 3850790 (45711) 330819 (49633) 2779329 (48090) 9432297 (43407) 5295225 (43403) 6268630 (50434) 8138322 (50449) 
     dis: 	86842.000 88322.000 91583.000 94997.000 97440.000 98187.000 99812.000 100324.000 100480.000 101067.000 
[ 2986.983s ] *** Query time: 992.860
qps: 10.072
 *** HNSW recall 
HNSW get 63589 postive res from 100000 results, recall@10:0.636
recall dist(10% per bucket): 0.001 0.006 0.019 0.049 0.099 0.144 0.188 0.200 0.161 0.098 0.035 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 2986.997s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_8000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_8000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 2331.80
	System time (seconds): 533.12
	Percent of CPU this job got: 95%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 50:08.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 402760616
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 100742
	Minor (reclaiming a frame) page faults: 215273616
	Voluntary context switches: 126771
	Involuntary context switches: 10989
	Swaps: 0
	File system inputs: 6591040
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 10:04
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.715s ] Loaded metadata, 10000000 attr's found
[ 0.715s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.718s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.719s ] Loaded 10000 sift10M queries
[ 0.727s ] Loaded ground truth, gt_size: 10
[ 0.727s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.240s ] Searching the 10 nearest neighbors of 10000 vectors in the index
Command terminated by signal 9
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_9000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_9000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 880.74
	System time (seconds): 140.84
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 17:21.10
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 228292516
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1597
	Minor (reclaiming a frame) page faults: 57130840
	Voluntary context switches: 27255
	Involuntary context switches: 1801
	Swaps: 0
	File system inputs: 2453864
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:35
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_out_dist.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_out_dist_10.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000
ef_search: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json
[ 0.713s ] Loaded metadata, 10000000 attr's found
[ 0.713s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.716s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.717s ] Loaded 10000 sift10M queries
[ 0.724s ] Loaded ground truth, gt_size: 10
[ 0.724s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 17.141s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.097
[ 3145.967s ] Query results (vector ids, then distances):
query 0 nn's (85681, 95681): 5284494 (91876) 5423931 (88734) 8465570 (89525) 5710919 (92652) 447965 (90273) 2986000 (87210) 1059921 (93452) 3658860 (89545) 1810730 (93412) 1449158 (86398) 
     dis: 	73728.000 77145.000 81280.000 82540.000 85625.000 85736.000 86093.000 86389.000 87272.000 87494.000 
query 1 nn's (52091, 62091): 8349375 (53556) 2993914 (56694) 8928604 (55927) 1000577 (53555) 6533284 (53548) 6630533 (53554) 4357659 (52774) 6804146 (59040) 9643854 (61454) 7664952 (52813) 
     dis: 	49997.000 55326.000 57196.000 59284.000 60780.000 62563.000 63824.000 64130.000 66298.000 67496.000 
query 2 nn's (0, 6478): 6296252 (4337) 9410320 (416) 8042944 (5823) 4555038 (1934) 6290196 (5878) 8075681 (2737) 4848879 (1165) 2319775 (4274) 2797798 (4287) 5520814 (1931) 
     dis: 	51071.000 52939.000 55019.000 55225.000 57466.000 59158.000 60775.000 61323.000 61446.000 61539.000 
query 3 nn's (13119, 23119): 1527942 (20684) 6917633 (15999) 727241 (22300) 9010353 (14430) 8649378 (15999) 1344917 (18385) 4486659 (15228) 6486623 (17599) 7709017 (16843) 6804450 (19179) 
     dis: 	4309.000 5626.000 6237.000 6311.000 6468.000 6747.000 7021.000 7208.000 7327.000 7797.000 
query 4 nn's (44344, 54344): 4366121 (45715) 3692806 (52797) 1850409 (48067) 3850790 (45711) 330819 (49633) 9401433 (53565) 2779329 (48090) 2996033 (52837) 3903546 (52754) 2945464 (51196) 
     dis: 	86842.000 86927.000 88322.000 94997.000 97440.000 97795.000 98187.000 98651.000 98840.000 99218.000 
[ 3145.968s ] *** Query time: 1103.497
qps: 9.062
 *** HNSW recall 
HNSW get 66370 postive res from 100000 results, recall@10:0.664
recall dist(10% per bucket): 0.001 0.004 0.013 0.043 0.082 0.126 0.176 0.203 0.180 0.123 0.050 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 12116731, average: 1211.673
finished ivfpq index examples
[ 3145.969s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/attr_sel_1_100000_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/qrangesel_10000_1_100000_out_dist.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_dist/sif_gt_sel_10000_1_100000_out_dist_10.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_100000_dist_40_1000 20 128"
	User time (seconds): 2656.14
	System time (seconds): 480.02
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 52:49.88
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 463912868
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 18280
	Minor (reclaiming a frame) page faults: 257279332
	Voluntary context switches: 41777
	Involuntary context switches: 9199
	Swaps: 0
	File system inputs: 2828928
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
