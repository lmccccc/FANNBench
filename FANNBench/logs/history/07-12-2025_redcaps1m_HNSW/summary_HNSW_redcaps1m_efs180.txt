Start time: 05:55
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000
ef_search: 180
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 0.137s ] Loaded metadata, 1000000 attr's found
[ 0.137s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.148s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.149s ] Loaded 10000 redcaps1m queries
[ 0.214s ] Loaded ground truth, gt_size: 100
[ 0.214s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 4.408s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.499
[ 31.538s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 727106 (6) 268161 (6) 646437 (6) 864174 (6) 64073 (6) 302070 (6) 812018 (6) 265404 (6) 84548 (6) 997247 (6) 807005 (6) 524418 (6) 790037 (6) 334544 (6) 571852 (6) 364290 (6) 363324 (6) 465841 (6) 988753 (6) 736934 (6) 754695 (6) 49228 (6) 606467 (6) 256653 (6) 966405 (6) 628377 (6) 596166 (6) 309200 (6) 437670 (6) 654910 (6) 514381 (6) 155463 (6) 568912 (6) 678814 (6) 968022 (6) 790030 (6) 760995 (6) 449397 (6) 75346 (6) 795414 (6) 171 (6) 46518 (6) 825029 (6) 533175 (6) 493307 (6) 412764 (6) 813377 (6) 124180 (6) 720013 (6) 86846 (6) 983152 (6) 81228 (6) 542754 (6) 105541 (6) 953733 (6) 174023 (6) 439788 (6) 679931 (6) 952583 (6) 656336 (6) 603318 (6) 211611 (6) 929021 (6) 472918 (6) 760479 (6) 612577 (6) 323370 (6) 130347 (6) 331521 (6) 295694 (6) 434594 (6) 553713 (6) 460924 (6) 159325 (6) 419559 (6) 569239 (6) 996728 (6) 370277 (6) 627019 (6) 13080 (6) 549870 (6) 752134 (6) 958477 (6) 911872 (6) 556864 (6) 894678 (6) 319315 (6) 343054 (6) 532454 (6) 501049 (6) 105181 (6) 393166 (6) 373982 (6) 140252 (6) 761117 (6) 825159 (6) 478100 (6) 468315 (6) 837349 (6) 589468 (6) 
     dis: 	0.629 0.659 0.696 0.743 0.760 0.763 0.766 0.771 0.786 0.789 0.793 0.794 0.800 0.805 0.812 0.813 0.814 0.815 0.822 0.824 0.826 0.828 0.843 0.849 0.850 0.851 0.854 0.854 0.858 0.861 0.862 0.864 0.867 0.873 0.876 0.877 0.877 0.877 0.879 0.883 0.883 0.885 0.888 0.895 0.896 0.897 0.898 0.899 0.902 0.903 0.904 0.905 0.908 0.909 0.909 0.909 0.910 0.911 0.911 0.911 0.912 0.913 0.913 0.913 0.914 0.919 0.920 0.921 0.921 0.921 0.921 0.922 0.922 0.922 0.922 0.923 0.924 0.924 0.924 0.926 0.927 0.930 0.930 0.931 0.932 0.933 0.933 0.934 0.934 0.935 0.935 0.935 0.936 0.937 0.937 0.938 0.938 0.938 0.939 0.940 
query 1 nn's (6, 6): 363220 (6) 253654 (6) 666880 (6) 660394 (6) 622447 (6) 964028 (6) 428754 (6) 30989 (6) 139424 (6) 442989 (6) 427957 (6) 896567 (6) 667007 (6) 994014 (6) 979295 (6) 439637 (6) 848169 (6) 989731 (6) 459927 (6) 661716 (6) 997966 (6) 630058 (6) 832389 (6) 118532 (6) 163712 (6) 848037 (6) 577336 (6) 441534 (6) 671340 (6) 681550 (6) 994569 (6) 51525 (6) 395948 (6) 408156 (6) 857939 (6) 265490 (6) 455611 (6) 226358 (6) 698433 (6) 964128 (6) 753841 (6) 620586 (6) 925657 (6) 766866 (6) 271263 (6) 544577 (6) 602684 (6) 557922 (6) 377202 (6) 39189 (6) 304095 (6) 110364 (6) 353761 (6) 418536 (6) 987081 (6) 60676 (6) 80871 (6) 563357 (6) 769260 (6) 299005 (6) 584466 (6) 272122 (6) 235619 (6) 295835 (6) 244515 (6) 487009 (6) 920134 (6) 816247 (6) 116279 (6) 971318 (6) 387184 (6) 384623 (6) 844021 (6) 77283 (6) 855763 (6) 8007 (6) 288542 (6) 750270 (6) 791914 (6) 253736 (6) 811301 (6) 916706 (6) 672841 (6) 671475 (6) 58319 (6) 417828 (6) 663858 (6) 1519 (6) 471226 (6) 366807 (6) 885260 (6) 722158 (6) 601939 (6) 993212 (6) 722531 (6) 697547 (6) 49556 (6) 485598 (6) 228624 (6) 530176 (6) 
     dis: 	0.092 0.099 0.101 0.103 0.103 0.106 0.107 0.109 0.110 0.110 0.111 0.111 0.112 0.113 0.115 0.115 0.115 0.116 0.116 0.116 0.117 0.117 0.117 0.117 0.117 0.118 0.118 0.118 0.118 0.120 0.120 0.121 0.122 0.122 0.122 0.122 0.122 0.122 0.122 0.122 0.123 0.123 0.123 0.123 0.123 0.123 0.124 0.124 0.124 0.124 0.125 0.125 0.125 0.126 0.126 0.127 0.127 0.127 0.127 0.127 0.127 0.128 0.128 0.128 0.128 0.128 0.128 0.129 0.129 0.129 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.132 
query 2 nn's (6, 6): 355537 (6) 964377 (6) 940490 (6) 410774 (6) 620585 (6) 374226 (6) 894254 (6) 299577 (6) 773055 (6) 718316 (6) 792564 (6) 911854 (6) 328504 (6) 161603 (6) 494541 (6) 328089 (6) 980872 (6) 41616 (6) 877537 (6) 971858 (6) 507734 (6) 95136 (6) 665039 (6) 919763 (6) 743927 (6) 471110 (6) 381411 (6) 952981 (6) 444996 (6) 93860 (6) 623737 (6) 882709 (6) 25586 (6) 222697 (6) 33572 (6) 498025 (6) 10316 (6) 573824 (6) 423208 (6) 476689 (6) 726914 (6) 202341 (6) 604084 (6) 317022 (6) 230054 (6) 870630 (6) 403717 (6) 72372 (6) 341373 (6) 136876 (6) 66777 (6) 957685 (6) 509068 (6) 994934 (6) 561163 (6) 88997 (6) 785259 (6) 985107 (6) 261708 (6) 747237 (6) 192832 (6) 184796 (6) 884477 (6) 703151 (6) 24332 (6) 325507 (6) 470869 (6) 14154 (6) 485950 (6) 319345 (6) 490170 (6) 435592 (6) 588334 (6) 965924 (6) 187392 (6) 89667 (6) 87145 (6) 211045 (6) 645790 (6) 841847 (6) 649892 (6) 557020 (6) 962379 (6) 73413 (6) 915391 (6) 752639 (6) 259618 (6) 116449 (6) 215560 (6) 866946 (6) 620162 (6) 770456 (6) 662999 (6) 10885 (6) 187604 (6) 937121 (6) 439807 (6) 110124 (6) 943514 (6) 66928 (6) 
     dis: 	0.224 0.226 0.246 0.258 0.259 0.263 0.264 0.264 0.265 0.268 0.271 0.272 0.273 0.275 0.276 0.280 0.282 0.282 0.283 0.283 0.283 0.283 0.284 0.284 0.285 0.285 0.285 0.285 0.286 0.287 0.288 0.288 0.288 0.288 0.289 0.289 0.290 0.291 0.291 0.291 0.292 0.293 0.294 0.296 0.296 0.296 0.297 0.297 0.297 0.298 0.298 0.298 0.300 0.300 0.301 0.302 0.302 0.302 0.302 0.302 0.302 0.303 0.303 0.303 0.304 0.304 0.304 0.305 0.305 0.306 0.306 0.306 0.307 0.307 0.307 0.307 0.308 0.308 0.308 0.308 0.308 0.308 0.308 0.309 0.309 0.309 0.309 0.310 0.310 0.310 0.310 0.311 0.311 0.311 0.311 0.311 0.311 0.311 0.311 0.312 
query 3 nn's (6, 6): 689368 (6) 583699 (6) 428067 (6) 124464 (6) 905275 (6) 687871 (6) 635563 (6) 595884 (6) 609006 (6) 213744 (6) 413550 (6) 456770 (6) 128901 (6) 25831 (6) 994151 (6) 382748 (6) 35100 (6) 246538 (6) 525367 (6) 108295 (6) 1172 (6) 183160 (6) 27812 (6) 305237 (6) 810505 (6) 758927 (6) 421931 (6) 879049 (6) 276603 (6) 269754 (6) 471055 (6) 226331 (6) 171575 (6) 636892 (6) 671717 (6) 640563 (6) 694867 (6) 219959 (6) 174382 (6) 549278 (6) 4433 (6) 397607 (6) 431136 (6) 994604 (6) 301836 (6) 800827 (6) 585483 (6) 799434 (6) 696027 (6) 933991 (6) 663784 (6) 208236 (6) 684978 (6) 931871 (6) 184010 (6) 17746 (6) 672565 (6) 433518 (6) 583701 (6) 382010 (6) 218254 (6) 906607 (6) 332772 (6) 100162 (6) 423285 (6) 280271 (6) 237125 (6) 418179 (6) 807512 (6) 694334 (6) 677322 (6) 358247 (6) 412295 (6) 191420 (6) 835170 (6) 705993 (6) 944408 (6) 723056 (6) 214834 (6) 290571 (6) 315020 (6) 669242 (6) 37631 (6) 480847 (6) 840055 (6) 296579 (6) 237881 (6) 90074 (6) 157117 (6) 948385 (6) 935542 (6) 130248 (6) 521807 (6) 129828 (6) 923128 (6) 768716 (6) 67641 (6) 769540 (6) 135464 (6) 681711 (6) 
     dis: 	0.403 0.405 0.433 0.449 0.459 0.460 0.460 0.462 0.465 0.477 0.477 0.496 0.497 0.498 0.499 0.500 0.501 0.503 0.505 0.508 0.509 0.509 0.511 0.513 0.513 0.515 0.516 0.517 0.520 0.520 0.520 0.522 0.525 0.526 0.526 0.527 0.529 0.530 0.531 0.532 0.533 0.533 0.534 0.536 0.537 0.538 0.539 0.539 0.539 0.541 0.543 0.544 0.546 0.546 0.547 0.547 0.548 0.549 0.550 0.550 0.551 0.552 0.553 0.553 0.554 0.555 0.555 0.555 0.555 0.556 0.557 0.559 0.560 0.561 0.563 0.564 0.564 0.564 0.564 0.564 0.565 0.565 0.566 0.566 0.566 0.566 0.566 0.567 0.567 0.567 0.568 0.568 0.568 0.569 0.569 0.571 0.572 0.572 0.572 0.573 
query 4 nn's (6, 6): 582698 (6) 522469 (6) 176027 (6) 797013 (6) 234795 (6) 931553 (6) 46163 (6) 279888 (6) 68136 (6) 556169 (6) 742084 (6) 331507 (6) 589135 (6) 929991 (6) 59094 (6) 189525 (6) 455512 (6) 105030 (6) 908309 (6) 834676 (6) 458642 (6) 222228 (6) 359688 (6) 222372 (6) 910110 (6) 969773 (6) 481846 (6) 567017 (6) 941111 (6) 143565 (6) 870723 (6) 282395 (6) 573206 (6) 262612 (6) 599829 (6) 857192 (6) 673629 (6) 147188 (6) 805996 (6) 51681 (6) 726345 (6) 590482 (6) 604239 (6) 601541 (6) 605725 (6) 500007 (6) 678901 (6) 829234 (6) 577889 (6) 511053 (6) 49802 (6) 982040 (6) 309894 (6) 173575 (6) 476701 (6) 487840 (6) 65795 (6) 63749 (6) 183252 (6) 98599 (6) 148545 (6) 760527 (6) 584115 (6) 948484 (6) 37748 (6) 392242 (6) 341328 (6) 717879 (6) 446346 (6) 563854 (6) 395799 (6) 464808 (6) 311214 (6) 204098 (6) 357242 (6) 101369 (6) 378800 (6) 56749 (6) 827261 (6) 528890 (6) 516225 (6) 850663 (6) 635293 (6) 325091 (6) 596233 (6) 459414 (6) 583639 (6) 954446 (6) 207939 (6) 421589 (6) 921524 (6) 959099 (6) 709494 (6) 863840 (6) 685016 (6) 365642 (6) 604226 (6) 246427 (6) 843400 (6) 724075 (6) 
     dis: 	0.260 0.260 0.269 0.273 0.274 0.284 0.300 0.303 0.306 0.307 0.308 0.314 0.314 0.317 0.317 0.317 0.317 0.318 0.319 0.321 0.322 0.323 0.324 0.324 0.325 0.328 0.329 0.330 0.330 0.331 0.332 0.332 0.332 0.332 0.334 0.334 0.334 0.335 0.335 0.335 0.335 0.335 0.336 0.337 0.337 0.337 0.338 0.338 0.338 0.339 0.340 0.340 0.340 0.341 0.342 0.343 0.344 0.344 0.344 0.344 0.345 0.345 0.345 0.346 0.347 0.347 0.348 0.348 0.350 0.350 0.350 0.351 0.352 0.352 0.352 0.353 0.353 0.354 0.354 0.354 0.354 0.355 0.355 0.355 0.356 0.356 0.356 0.356 0.357 0.357 0.357 0.358 0.358 0.358 0.358 0.359 0.359 0.360 0.360 0.360 
[ 31.538s ] *** Query time: 22.008
qps: 454.376
 *** HNSW recall 
HNSW get 989025 postive res from 1000000 results, recall@100:0.989
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.010 0.405 0.584 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 75007256, average: 7500.726
finished ivfpq index examples
[ 31.575s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_6_40_1000 180 512"
	User time (seconds): 25.86
	System time (seconds): 3.86
	Percent of CPU this job got: 93%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:31.72
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2384804
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2205333
	Voluntary context switches: 8840
	Involuntary context switches: 63
	Swaps: 0
	File system inputs: 241784
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:05
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000
ef_search: 180
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 0.071s ] Loaded metadata, 1000000 attr's found
[ 0.071s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.084s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.086s ] Loaded 10000 redcaps1m queries
[ 0.152s ] Loaded ground truth, gt_size: 100
[ 0.152s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 21.937s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 47.101s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 7102 (10) 64073 (10) 364290 (10) 596166 (10) 554724 (10) 437670 (10) 800767 (10) 997239 (10) 909887 (10) 699054 (10) 927993 (10) 670823 (10) 174023 (10) 952583 (10) 760479 (10) 385435 (10) 911872 (10) 319315 (10) 428229 (10) 468315 (10) 891777 (10) 704461 (10) 354877 (10) 827492 (10) 897196 (10) 492310 (10) 540453 (10) 822773 (10) 533245 (10) 477941 (10) 397290 (10) 81158 (10) 627102 (10) 673888 (10) 767624 (10) 11316 (10) 692306 (10) 859257 (10) 204674 (10) 345798 (10) 941563 (10) 696719 (10) 375105 (10) 737031 (10) 163220 (10) 119266 (10) 501562 (10) 589350 (10) 530994 (10) 570812 (10) 86219 (10) 199035 (10) 181904 (10) 974701 (10) 111229 (10) 146794 (10) 619190 (10) 908109 (10) 417209 (10) 382449 (10) 409763 (10) 806918 (10) 676868 (10) 459835 (10) 822309 (10) 283620 (10) 438747 (10) 241033 (10) 784947 (10) 35687 (10) 499870 (10) 702395 (10) 947605 (10) 240250 (10) 818180 (10) 674691 (10) 513609 (10) 607879 (10) 972697 (10) 956253 (10) 44407 (10) 677072 (10) 777258 (10) 490377 (10) 403930 (10) 540184 (10) 461379 (10) 847502 (10) 314818 (10) 775542 (10) 322777 (10) 531563 (10) 41276 (10) 212777 (10) 113176 (10) 318606 (10) 881716 (10) 755473 (10) 355714 (10) 54641 (10) 
     dis: 	0.758 0.760 0.813 0.854 0.855 0.858 0.863 0.889 0.899 0.903 0.904 0.907 0.909 0.911 0.914 0.923 0.931 0.933 0.936 0.938 0.939 0.941 0.945 0.946 0.947 0.947 0.950 0.958 0.960 0.960 0.964 0.965 0.966 0.967 0.969 0.969 0.970 0.970 0.971 0.972 0.973 0.974 0.975 0.977 0.978 0.978 0.980 0.980 0.981 0.985 0.985 0.985 0.988 0.988 0.989 0.991 0.993 0.994 0.994 0.996 0.996 0.996 0.999 0.999 1.001 1.001 1.001 1.002 1.005 1.005 1.005 1.006 1.007 1.007 1.009 1.010 1.012 1.012 1.012 1.013 1.015 1.016 1.018 1.021 1.022 1.022 1.023 1.023 1.023 1.024 1.024 1.025 1.026 1.027 1.027 1.028 1.028 1.028 1.029 1.029 
query 1 nn's (10, 10): 361537 (10) 428754 (10) 979295 (10) 439637 (10) 424951 (10) 681550 (10) 709969 (10) 371263 (10) 408156 (10) 753841 (10) 105750 (10) 837200 (10) 55881 (10) 858634 (10) 785418 (10) 288542 (10) 811301 (10) 82481 (10) 937262 (10) 41053 (10) 633780 (10) 366937 (10) 853505 (10) 195481 (10) 771674 (10) 469350 (10) 527435 (10) 843111 (10) 24719 (10) 698871 (10) 462482 (10) 915755 (10) 859050 (10) 200454 (10) 507366 (10) 691606 (10) 832229 (10) 280685 (10) 598436 (10) 23590 (10) 250668 (10) 246783 (10) 561139 (10) 980350 (10) 702451 (10) 30217 (10) 427462 (10) 616405 (10) 652931 (10) 865462 (10) 226285 (10) 959689 (10) 24923 (10) 312232 (10) 894014 (10) 385587 (10) 559169 (10) 615320 (10) 682771 (10) 712818 (10) 547222 (10) 457547 (10) 905827 (10) 977847 (10) 302387 (10) 892547 (10) 808151 (10) 606890 (10) 32573 (10) 666353 (10) 601637 (10) 918380 (10) 726551 (10) 314837 (10) 181047 (10) 578846 (10) 653651 (10) 161138 (10) 452752 (10) 845466 (10) 788181 (10) 132397 (10) 447406 (10) 525392 (10) 396522 (10) 279857 (10) 143623 (10) 495252 (10) 66765 (10) 971379 (10) 696364 (10) 272503 (10) 143541 (10) 349657 (10) 919231 (10) 524682 (10) 330012 (10) 716223 (10) 630691 (10) 805264 (10) 
     dis: 	0.107 0.107 0.115 0.115 0.119 0.120 0.120 0.120 0.122 0.123 0.126 0.126 0.127 0.129 0.130 0.130 0.130 0.131 0.132 0.133 0.133 0.133 0.134 0.135 0.136 0.136 0.137 0.138 0.139 0.139 0.139 0.139 0.139 0.141 0.141 0.141 0.141 0.141 0.142 0.142 0.142 0.142 0.143 0.143 0.144 0.144 0.145 0.145 0.145 0.145 0.146 0.146 0.146 0.147 0.147 0.147 0.148 0.148 0.150 0.150 0.150 0.150 0.151 0.151 0.152 0.152 0.152 0.152 0.153 0.153 0.154 0.154 0.154 0.154 0.154 0.155 0.155 0.155 0.156 0.157 0.157 0.157 0.157 0.157 0.157 0.158 0.158 0.158 0.158 0.158 0.159 0.159 0.159 0.159 0.160 0.160 0.160 0.161 0.161 0.161 
query 2 nn's (10, 10): 964377 (10) 771849 (10) 258758 (10) 903106 (10) 400722 (10) 530996 (10) 65400 (10) 971858 (10) 625921 (10) 381411 (10) 564449 (10) 444996 (10) 253786 (10) 230054 (10) 17779 (10) 670180 (10) 818470 (10) 304775 (10) 625576 (10) 490170 (10) 201205 (10) 89667 (10) 245232 (10) 557020 (10) 915391 (10) 63845 (10) 943514 (10) 66928 (10) 62201 (10) 785841 (10) 336181 (10) 600470 (10) 916423 (10) 825350 (10) 477079 (10) 174123 (10) 307736 (10) 549665 (10) 536360 (10) 501517 (10) 554381 (10) 921459 (10) 114422 (10) 784303 (10) 849125 (10) 97812 (10) 772295 (10) 584919 (10) 652051 (10) 914567 (10) 537534 (10) 975511 (10) 374008 (10) 52225 (10) 356390 (10) 748721 (10) 961842 (10) 419992 (10) 92880 (10) 281934 (10) 465378 (10) 475643 (10) 83455 (10) 659554 (10) 697558 (10) 915626 (10) 468882 (10) 835469 (10) 634199 (10) 50141 (10) 286812 (10) 334263 (10) 741514 (10) 490339 (10) 216278 (10) 497341 (10) 949079 (10) 575134 (10) 14748 (10) 854690 (10) 882969 (10) 596926 (10) 698016 (10) 20476 (10) 215608 (10) 311370 (10) 346374 (10) 539349 (10) 579636 (10) 347925 (10) 339857 (10) 981107 (10) 277748 (10) 579823 (10) 603302 (10) 878621 (10) 347668 (10) 367613 (10) 471333 (10) 491299 (10) 
     dis: 	0.226 0.265 0.268 0.268 0.272 0.275 0.281 0.283 0.284 0.285 0.286 0.286 0.290 0.296 0.300 0.300 0.303 0.303 0.303 0.306 0.307 0.307 0.308 0.308 0.309 0.309 0.311 0.312 0.312 0.313 0.313 0.314 0.317 0.317 0.318 0.320 0.323 0.326 0.327 0.328 0.329 0.329 0.329 0.331 0.331 0.332 0.332 0.333 0.333 0.334 0.335 0.335 0.336 0.336 0.337 0.337 0.338 0.338 0.339 0.339 0.339 0.340 0.341 0.341 0.341 0.342 0.342 0.344 0.344 0.344 0.345 0.345 0.345 0.345 0.346 0.346 0.347 0.348 0.348 0.349 0.349 0.349 0.351 0.351 0.351 0.352 0.352 0.352 0.353 0.353 0.354 0.354 0.355 0.355 0.355 0.356 0.357 0.358 0.358 0.358 
query 3 nn's (10, 10): 461110 (10) 382748 (10) 305237 (10) 636892 (10) 863296 (10) 694867 (10) 4433 (10) 431136 (10) 994604 (10) 459020 (10) 583701 (10) 382010 (10) 309349 (10) 723056 (10) 706869 (10) 157117 (10) 129828 (10) 430670 (10) 768716 (10) 67641 (10) 135464 (10) 468019 (10) 893013 (10) 289872 (10) 219659 (10) 99294 (10) 491681 (10) 707074 (10) 740355 (10) 231500 (10) 142896 (10) 463948 (10) 347025 (10) 368426 (10) 211105 (10) 451704 (10) 166166 (10) 712807 (10) 839233 (10) 57618 (10) 66280 (10) 151545 (10) 729567 (10) 378228 (10) 534568 (10) 87349 (10) 240780 (10) 911155 (10) 209001 (10) 243006 (10) 100678 (10) 692075 (10) 614709 (10) 596789 (10) 187295 (10) 890599 (10) 160681 (10) 879996 (10) 657433 (10) 48205 (10) 929569 (10) 627510 (10) 165235 (10) 584120 (10) 211402 (10) 487195 (10) 472338 (10) 856701 (10) 331567 (10) 270587 (10) 699155 (10) 694326 (10) 574303 (10) 700302 (10) 435934 (10) 206663 (10) 919630 (10) 25409 (10) 958801 (10) 416085 (10) 605527 (10) 179038 (10) 87933 (10) 502874 (10) 731392 (10) 170952 (10) 563479 (10) 365571 (10) 468412 (10) 356672 (10) 596014 (10) 932936 (10) 424107 (10) 632483 (10) 376659 (10) 808278 (10) 511765 (10) 397881 (10) 153701 (10) 757919 (10) 
     dis: 	0.462 0.500 0.513 0.526 0.527 0.529 0.533 0.534 0.536 0.548 0.550 0.550 0.561 0.564 0.566 0.567 0.569 0.569 0.571 0.572 0.572 0.574 0.574 0.580 0.582 0.587 0.590 0.590 0.591 0.592 0.592 0.593 0.594 0.595 0.596 0.597 0.598 0.599 0.599 0.600 0.600 0.601 0.607 0.608 0.608 0.609 0.610 0.611 0.612 0.613 0.614 0.615 0.618 0.619 0.620 0.621 0.621 0.622 0.622 0.623 0.623 0.624 0.624 0.624 0.625 0.625 0.626 0.626 0.626 0.626 0.626 0.626 0.627 0.627 0.627 0.627 0.628 0.629 0.629 0.629 0.630 0.630 0.630 0.631 0.632 0.632 0.634 0.634 0.634 0.634 0.635 0.635 0.635 0.636 0.636 0.636 0.637 0.638 0.638 0.640 
query 4 nn's (10, 10): 797013 (10) 959629 (10) 878527 (10) 222228 (10) 567017 (10) 279836 (10) 702801 (10) 732037 (10) 193229 (10) 490515 (10) 311214 (10) 56749 (10) 235772 (10) 354590 (10) 68337 (10) 762488 (10) 89745 (10) 596233 (10) 863840 (10) 157179 (10) 746306 (10) 523875 (10) 807413 (10) 155731 (10) 136565 (10) 359872 (10) 506084 (10) 586104 (10) 792935 (10) 959185 (10) 933197 (10) 557403 (10) 864559 (10) 514616 (10) 121999 (10) 268279 (10) 246737 (10) 385892 (10) 186965 (10) 968757 (10) 565245 (10) 542480 (10) 813936 (10) 139503 (10) 485716 (10) 785149 (10) 838409 (10) 247570 (10) 839671 (10) 3606 (10) 447662 (10) 872971 (10) 127746 (10) 857426 (10) 100588 (10) 481433 (10) 917518 (10) 401060 (10) 536255 (10) 282874 (10) 699150 (10) 451188 (10) 570843 (10) 260203 (10) 21973 (10) 155547 (10) 646918 (10) 824178 (10) 899146 (10) 421118 (10) 512978 (10) 132719 (10) 528205 (10) 413483 (10) 645343 (10) 41746 (10) 2786 (10) 637776 (10) 901229 (10) 907659 (10) 994969 (10) 412561 (10) 64675 (10) 672149 (10) 745761 (10) 164969 (10) 827102 (10) 866469 (10) 519474 (10) 564862 (10) 139550 (10) 50258 (10) 724882 (10) 574239 (10) 528967 (10) 63609 (10) 136925 (10) 527390 (10) 224737 (10) 346442 (10) 
     dis: 	0.273 0.293 0.298 0.323 0.330 0.332 0.335 0.338 0.339 0.351 0.352 0.354 0.354 0.355 0.355 0.355 0.356 0.356 0.358 0.365 0.367 0.370 0.371 0.375 0.377 0.377 0.378 0.378 0.380 0.380 0.382 0.383 0.383 0.383 0.384 0.385 0.386 0.387 0.387 0.388 0.388 0.388 0.389 0.390 0.392 0.392 0.394 0.395 0.396 0.396 0.396 0.396 0.397 0.398 0.400 0.402 0.403 0.404 0.405 0.405 0.406 0.406 0.407 0.407 0.408 0.408 0.409 0.410 0.410 0.410 0.411 0.413 0.414 0.414 0.415 0.415 0.417 0.417 0.417 0.418 0.418 0.419 0.419 0.419 0.420 0.420 0.420 0.420 0.421 0.421 0.421 0.421 0.423 0.424 0.424 0.424 0.426 0.426 0.427 0.427 
[ 47.101s ] *** Query time: 19.349
qps: 516.817
 *** HNSW recall 
HNSW get 874242 postive res from 1000000 results, recall@100:0.874
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.002 0.005 0.023 0.105 0.396 0.469 0.001 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 75025361, average: 7502.536
finished ivfpq index examples
[ 47.134s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_10_40_1000 180 512"
	User time (seconds): 24.18
	System time (seconds): 15.03
	Percent of CPU this job got: 82%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:47.36
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2385828
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 7
	Minor (reclaiming a frame) page faults: 1281144
	Voluntary context switches: 7368
	Involuntary context switches: 176
	Swaps: 0
	File system inputs: 744896
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:13
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000
ef_search: 180
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.070s ] Loaded metadata, 1000000 attr's found
[ 0.070s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.082s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.083s ] Loaded 10000 redcaps1m queries
[ 0.149s ] Loaded ground truth, gt_size: 100
[ 0.149s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 4.418s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 27.266s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 109422 (19) 336934 (19) 81228 (19) 472918 (19) 193999 (19) 166382 (19) 112401 (19) 866187 (19) 144195 (19) 667610 (19) 721021 (19) 724821 (19) 789108 (19) 806631 (19) 754848 (19) 185026 (19) 382980 (19) 797536 (19) 905338 (19) 865528 (19) 114116 (19) 105074 (19) 718906 (19) 125629 (19) 561207 (19) 655785 (19) 307754 (19) 208480 (19) 579873 (19) 667436 (19) 864993 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.859 0.862 0.905 0.913 0.947 0.974 0.979 0.996 1.002 1.018 1.034 1.054 1.078 1.083 1.088 1.118 1.122 1.125 1.129 1.135 1.147 1.153 1.183 1.192 1.200 1.204 1.220 1.222 1.245 1.278 1.363 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 526331 (19) 158846 (19) 264009 (19) 434283 (19) 246783 (19) 69776 (19) 805880 (19) 916232 (19) 357641 (19) 532410 (19) 220610 (19) 178290 (19) 127320 (19) 949001 (19) 303648 (19) 125446 (19) 336127 (19) 202933 (19) 431949 (19) 538342 (19) 696276 (19) 578712 (19) 563150 (19) 342349 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.135 0.138 0.139 0.140 0.142 0.149 0.156 0.160 0.161 0.167 0.174 0.177 0.177 0.181 0.182 0.185 0.196 0.197 0.200 0.214 0.221 0.243 0.255 0.358 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 752639 (19) 436923 (19) 916423 (19) 782944 (19) 366433 (19) 425512 (19) 537534 (19) 313405 (19) 347848 (19) 546593 (19) 387561 (19) 971675 (19) 382912 (19) 71679 (19) 224729 (19) 166797 (19) 155587 (19) 174426 (19) 342793 (19) 588699 (19) 238211 (19) 518706 (19) 652706 (19) 445869 (19) 614780 (19) 871553 (19) 561248 (19) 318335 (19) 302530 (19) 280805 (19) 46232 (19) 223642 (19) 573640 (19) 450899 (19) 828745 (19) 965930 (19) 477149 (19) 397924 (19) 308377 (19) 796455 (19) 377408 (19) 174647 (19) 960803 (19) 512273 (19) 832830 (19) 503692 (19) 293417 (19) 833278 (19) 332861 (19) 905605 (19) 78440 (19) 786893 (19) 26918 (19) 60006 (19) 810572 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.309 0.314 0.317 0.319 0.330 0.330 0.335 0.337 0.355 0.358 0.361 0.362 0.363 0.365 0.368 0.369 0.374 0.375 0.377 0.382 0.383 0.385 0.388 0.388 0.390 0.391 0.393 0.394 0.396 0.399 0.401 0.415 0.415 0.417 0.420 0.421 0.425 0.426 0.430 0.448 0.448 0.451 0.451 0.452 0.457 0.459 0.460 0.460 0.463 0.470 0.475 0.480 0.535 0.599 0.627 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 687871 (19) 226331 (19) 493967 (19) 239054 (19) 840258 (19) 231500 (19) 358741 (19) 89977 (19) 584120 (19) 82288 (19) 432511 (19) 776600 (19) 748862 (19) 611390 (19) 659758 (19) 414971 (19) 388276 (19) 117780 (19) 930132 (19) 421073 (19) 451260 (19) 108439 (19) 592067 (19) 947158 (19) 145084 (19) 600352 (19) 535798 (19) 150328 (19) 508788 (19) 649540 (19) 30559 (19) 665295 (19) 902097 (19) 821435 (19) 571191 (19) 426453 (19) 573324 (19) 425659 (19) 326989 (19) 723383 (19) 864506 (19) 346177 (19) 570635 (19) 652550 (19) 803189 (19) 484095 (19) 406050 (19) 287789 (19) 636816 (19) 554351 (19) 613973 (19) 555528 (19) 287560 (19) 800881 (19) 954957 (19) 235397 (19) 695024 (19) 630361 (19) 947629 (19) 523278 (19) 208770 (19) 275842 (19) 90707 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.460 0.522 0.561 0.587 0.589 0.592 0.595 0.611 0.624 0.643 0.644 0.650 0.653 0.654 0.657 0.660 0.661 0.663 0.663 0.667 0.668 0.670 0.670 0.676 0.678 0.681 0.692 0.694 0.700 0.710 0.715 0.719 0.721 0.729 0.731 0.731 0.735 0.739 0.749 0.750 0.750 0.750 0.756 0.763 0.764 0.764 0.765 0.769 0.773 0.779 0.786 0.798 0.798 0.801 0.809 0.812 0.840 0.852 0.868 0.910 0.921 1.014 1.079 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 522469 (19) 940668 (19) 402334 (19) 393712 (19) 135893 (19) 826811 (19) 699126 (19) 862880 (19) 221380 (19) 989983 (19) 25013 (19) 819697 (19) 122272 (19) 405287 (19) 914891 (19) 673302 (19) 472411 (19) 562180 (19) 745360 (19) 758419 (19) 407725 (19) 337647 (19) 494790 (19) 833270 (19) 548498 (19) 596268 (19) 842312 (19) 156900 (19) 720843 (19) 866457 (19) 660682 (19) 881672 (19) 357329 (19) 402812 (19) 375718 (19) 751518 (19) 178863 (19) 620601 (19) 354871 (19) 635235 (19) 27140 (19) 461314 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.260 0.358 0.372 0.380 0.411 0.416 0.435 0.436 0.436 0.438 0.441 0.445 0.445 0.457 0.460 0.465 0.467 0.470 0.475 0.476 0.480 0.485 0.487 0.496 0.498 0.499 0.501 0.505 0.506 0.511 0.518 0.525 0.533 0.540 0.550 0.578 0.611 0.612 0.634 0.646 0.671 0.788 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 27.267s ] *** Query time: 17.758
qps: 563.129
 *** HNSW recall 
HNSW get 296582 postive res from 1000000 results, recall@100:0.297
recall dist(10% per bucket): 0.002 0.102 0.388 0.397 0.103 0.008 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 74994579, average: 7499.458
finished ivfpq index examples
[ 27.298s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000 180 512"
	User time (seconds): 21.10
	System time (seconds): 3.99
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:27.54
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2385828
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095214
	Voluntary context switches: 8893
	Involuntary context switches: 57
	Swaps: 0
	File system inputs: 232968
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:18
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_20_40_1000
ef_search: 180
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
[ 0.106s ] Loaded metadata, 1000000 attr's found
[ 0.106s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.121s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.122s ] Loaded 10000 redcaps1m queries
[ 0.188s ] Loaded ground truth, gt_size: 100
[ 0.188s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 4.352s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 26.604s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 665235 (20) 251490 (20) 762660 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.111 1.194 1.295 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 481335 (20) 940086 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.180 0.342 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 222596 (20) 863730 (20) 899188 (20) 497610 (20) 584924 (20) 817111 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.341 0.378 0.396 0.402 0.413 0.551 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 543905 (20) 372832 (20) 404058 (20) 807104 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.684 0.744 0.756 0.764 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 953970 (20) 51097 (20) 732677 (20) 236605 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.439 0.475 0.478 0.576 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 26.605s ] *** Query time: 16.630
qps: 601.336
 *** HNSW recall 
HNSW get 38353 postive res from 1000000 results, recall@100:0.038
recall dist(10% per bucket): 0.980 0.020 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 75027977, average: 7502.798
finished ivfpq index examples
[ 26.635s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_20_40_1000 180 512"
	User time (seconds): 22.49
	System time (seconds): 1.91
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:26.80
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2383908
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 595209
	Voluntary context switches: 9053
	Involuntary context switches: 63
	Swaps: 0
	File system inputs: 282184
	File system outputs: 72
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
