Start time: 06:35
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_50
nprobe: 600
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.217s ] Loaded metadata, 10000000 attr's found
[ 1.217s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.263s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.290s ] Loaded 10000 spacev10m queries
[ 1.309s ] Loaded ground truth, gt_size: 10
[ 1.309s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.167s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 137.234s ] Query results (vector ids, then distances):
query 0 nn's (15274, 15373): 5769046 (15300) 6224069 (15338) 4702781 (15290) 2493110 (15304) 3801107 (15313) 6782267 (15338) 7780681 (15282) 7095541 (15328) 3577769 (15337) 6529736 (15348) 
     dis: 	9339.131 11950.436 15215.113 15890.318 16731.143 16816.945 16938.816 17158.535 17221.633 17311.945 
query 1 nn's (47455, 47554): 7518689 (47475) 3240786 (47517) 8895531 (47457) 3718329 (47526) 8854808 (47533) 2593429 (47531) 3080191 (47543) 2850999 (47531) 3740147 (47481) 574370 (47461) 
     dis: 	14099.950 14212.223 16183.473 16298.674 16342.668 16405.682 16455.492 16681.650 17301.135 17408.818 
query 2 nn's (2622, 2721): 9318566 (2630) 2863448 (2661) 3213761 (2637) 6508399 (2700) 1562829 (2650) 3947897 (2715) 9670994 (2700) 2611515 (2635) 3913522 (2654) 2705292 (2700) 
     dis: 	13562.081 13782.050 14350.572 14386.454 14651.077 15156.483 15555.991 15673.642 15733.375 15786.271 
query 3 nn's (73957, 74056): 6689609 (74003) 4050481 (73978) 3760026 (74053) 3150044 (74030) 5661120 (74004) 1038480 (73987) 2140224 (74017) 1231887 (74000) 7040076 (74003) 2279439 (74049) 
     dis: 	11728.946 14037.242 15498.991 15767.667 16288.726 16447.516 16518.201 16656.152 16932.016 17208.389 
query 4 nn's (58381, 58480): 3852825 (58478) 4103136 (58443) 6808813 (58381) 1006805 (58478) 1999660 (58444) 9684351 (58456) 8984060 (58471) 3871589 (58382) 8896456 (58451) 1919573 (58401) 
     dis: 	7666.274 8303.525 8356.072 8514.808 8689.705 9137.789 9156.240 9166.632 9182.004 9324.730 
[ 137.234s ] *** Query time: 77.893
qps: 128.382
 *** ivfpq recall 
ivfpq get 83991 postive res from 100000 results, recall@10:0.840
recall dist(10% per bucket): 0.000 0.000 0.002 0.004 0.009 0.022 0.052 0.109 0.239 0.385 0.178 
finished ivfpq index examples
[ 137.235s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_50 600 100"
	User time (seconds): 135.21
	System time (seconds): 0.91
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:17.31
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1271716
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 332059
	Voluntary context switches: 1945
	Involuntary context switches: 159
	Swaps: 0
	File system inputs: 332576
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:39
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100
nprobe: 600
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.719s ] Loaded metadata, 10000000 attr's found
[ 0.719s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.722s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.723s ] Loaded 10000 spacev10m queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.139s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 169.374s ] Query results (vector ids, then distances):
query 0 nn's (15274, 15373): 5769046 (15300) 6224069 (15338) 4702781 (15290) 2493110 (15304) 6782267 (15338) 3801107 (15313) 7780681 (15282) 6529736 (15348) 2811379 (15348) 2632440 (15328) 
     dis: 	9734.154 12225.413 15890.248 16056.235 16924.531 17014.207 17118.711 17172.607 17294.500 17338.156 
query 1 nn's (47455, 47554): 7518689 (47475) 3240786 (47517) 8895531 (47457) 8854808 (47533) 2593429 (47531) 3718329 (47526) 3080191 (47543) 9083689 (47518) 2850999 (47531) 3740147 (47481) 
     dis: 	14082.488 14118.312 16035.816 16057.749 16307.691 16440.287 16598.205 17147.426 17248.885 17261.963 
query 2 nn's (2622, 2721): 9318566 (2630) 2863448 (2661) 6508399 (2700) 3213761 (2637) 1562829 (2650) 3947897 (2715) 9670994 (2700) 2611515 (2635) 603741 (2706) 2705292 (2700) 
     dis: 	13582.500 13861.713 14396.654 14402.362 15135.433 15341.539 15481.450 15554.947 15808.301 15888.982 
query 3 nn's (73957, 74056): 6689609 (74003) 4050481 (73978) 3760026 (74053) 5661120 (74004) 3150044 (74030) 1231887 (74000) 1038480 (73987) 2140224 (74017) 7040076 (74003) 1522104 (74017) 
     dis: 	11787.401 13871.771 15722.424 16316.687 16320.598 16465.969 16525.426 16762.617 16955.184 17344.215 
query 4 nn's (58381, 58480): 3852825 (58478) 4103136 (58443) 6808813 (58381) 1006805 (58478) 1999660 (58444) 3871589 (58382) 9684351 (58456) 8896456 (58451) 1919573 (58401) 8984060 (58471) 
     dis: 	7603.550 8382.631 8416.706 8419.477 8432.660 9108.533 9150.084 9152.819 9198.583 9372.254 
[ 169.374s ] *** Query time: 112.186
qps: 89.138
 *** ivfpq recall 
ivfpq get 87902 postive res from 100000 results, recall@10:0.879
recall dist(10% per bucket): 0.000 0.000 0.002 0.004 0.008 0.020 0.045 0.080 0.146 0.308 0.387 
finished ivfpq index examples
[ 169.376s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100 600 100"
	User time (seconds): 165.48
	System time (seconds): 2.88
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:49.52
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2390948
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 888165
	Voluntary context switches: 3219
	Involuntary context switches: 338
	Swaps: 0
	File system inputs: 376528
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:42
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100
nprobe: 600
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.714s ] Loaded metadata, 10000000 attr's found
[ 0.714s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.717s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.718s ] Loaded 10000 spacev10m queries
[ 0.725s ] Loaded ground truth, gt_size: 10
[ 0.725s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.820s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 182.943s ] Query results (vector ids, then distances):
query 0 nn's (15274, 15373): 5769046 (15300) 6224069 (15338) 4702781 (15290) 2493110 (15304) 6782267 (15338) 3801107 (15313) 7780681 (15282) 6529736 (15348) 2811379 (15348) 2632440 (15328) 
     dis: 	9734.154 12225.413 15890.248 16056.235 16924.531 17014.207 17118.711 17172.607 17294.500 17338.156 
query 1 nn's (47455, 47554): 7518689 (47475) 3240786 (47517) 8895531 (47457) 8854808 (47533) 2593429 (47531) 3718329 (47526) 3080191 (47543) 9083689 (47518) 2850999 (47531) 3740147 (47481) 
     dis: 	14082.488 14118.312 16035.816 16057.749 16307.691 16440.287 16598.205 17147.426 17248.885 17261.963 
query 2 nn's (2622, 2721): 9318566 (2630) 2863448 (2661) 6508399 (2700) 3213761 (2637) 1562829 (2650) 3947897 (2715) 9670994 (2700) 2611515 (2635) 603741 (2706) 2705292 (2700) 
     dis: 	13582.500 13861.713 14396.654 14402.362 15135.433 15341.539 15481.450 15554.947 15808.301 15888.982 
query 3 nn's (73957, 74056): 6689609 (74003) 4050481 (73978) 3760026 (74053) 5661120 (74004) 3150044 (74030) 1231887 (74000) 1038480 (73987) 2140224 (74017) 7040076 (74003) 1522104 (74017) 
     dis: 	11787.401 13871.771 15722.424 16316.687 16320.598 16465.969 16525.426 16762.617 16955.184 17344.215 
query 4 nn's (58381, 58480): 3852825 (58478) 4103136 (58443) 6808813 (58381) 1006805 (58478) 1999660 (58444) 3871589 (58382) 9684351 (58456) 8896456 (58451) 1919573 (58401) 8984060 (58471) 
     dis: 	7603.550 8382.631 8416.706 8419.477 8432.660 9108.533 9150.084 9152.819 9198.583 9372.254 
[ 182.943s ] *** Query time: 123.017
qps: 81.289
 *** ivfpq recall 
ivfpq get 87902 postive res from 100000 results, recall@10:0.879
recall dist(10% per bucket): 0.000 0.000 0.002 0.004 0.008 0.020 0.045 0.080 0.146 0.308 0.387 
finished ivfpq index examples
[ 182.944s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_100000_random_100 600 100"
	User time (seconds): 181.61
	System time (seconds): 1.44
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:03.07
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2389920
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 613369
	Voluntary context switches: 1
	Involuntary context switches: 207
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:59
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100
nprobe: 600
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.754s ] Loaded metadata, 10000000 attr's found
[ 0.754s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 0.756s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 0.758s ] Loaded 10000 spacev10m queries
[ 0.765s ] Loaded ground truth, gt_size: 10
[ 0.765s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 4.178s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 198.893s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 6443191 (20) 4699240 (20) 7019431 (20) 4459358 (20) 337940 (20) 4283885 (20) 1535087 (20) 9528752 (20) 9935667 (20) 3931559 (20) 
     dis: 	12183.217 12270.143 16160.129 16676.064 17386.770 17880.533 17910.324 17953.172 17992.535 18207.014 
query 1 nn's (20, 20): 9246122 (20) 6649015 (20) 9227196 (20) 8711930 (20) 662332 (20) 3943773 (20) 6290607 (20) 1940283 (20) 7923085 (20) 6779370 (20) 
     dis: 	13139.062 14440.965 14605.871 15184.494 15359.936 16166.264 16581.238 16616.625 16701.602 16707.025 
query 2 nn's (20, 20): 9777979 (20) 3713444 (20) 8465646 (20) 7745024 (20) 8225973 (20) 5699749 (20) 8198536 (20) 5706769 (20) 1840238 (20) 1649478 (20) 
     dis: 	11114.170 11821.822 13209.668 13937.360 14451.120 14546.093 14743.147 15112.273 15450.026 15798.482 
query 3 nn's (20, 20): 9781225 (20) 7701998 (20) 5023237 (20) 4869461 (20) 2376755 (20) 6286207 (20) 5512851 (20) 4455726 (20) 9714787 (20) 3977496 (20) 
     dis: 	11810.748 13300.700 15682.982 16343.217 16704.359 16877.375 17068.734 17286.791 17372.137 17397.291 
query 4 nn's (20, 20): 2805400 (20) 4834736 (20) 9988614 (20) 9490690 (20) 4816065 (20) 2867132 (20) 5121589 (20) 5608022 (20) 3733057 (20) 4122631 (20) 
     dis: 	8020.513 8131.236 8313.282 8420.460 8728.763 8795.764 8876.340 9016.697 9049.032 9089.684 
[ 198.893s ] *** Query time: 136.117
qps: 73.466
 *** ivfpq recall 
ivfpq get 87679 postive res from 100000 results, recall@10:0.877
recall dist(10% per bucket): 0.000 0.001 0.001 0.005 0.007 0.021 0.045 0.077 0.153 0.310 0.379 
finished ivfpq index examples
[ 198.894s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query spacev10m 10000000 10 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_1_500_random_100 600 100"
	User time (seconds): 196.16
	System time (seconds): 1.59
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 3:18.98
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2390948
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 612828
	Voluntary context switches: 4433
	Involuntary context switches: 332
	Swaps: 0
	File system inputs: 291416
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
