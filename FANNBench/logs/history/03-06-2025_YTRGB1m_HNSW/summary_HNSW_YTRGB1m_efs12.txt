Start time: 23:50
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 12
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.068s ] Loaded metadata, 1000000 attr's found
[ 0.068s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.096s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.097s ] Loaded 10000 YTRGB1m queries
[ 0.104s ] Loaded ground truth, gt_size: 10
[ 0.104s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.837s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 14.701s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 929361 (6) 986245 (6) 889953 (6) 418474 (6) 599702 (6) 70519 (6) 239994 (6) 210398 (6) 694505 (6) 737273 (6) 
     dis: 	80.477 82.411 83.500 88.657 89.420 89.759 89.980 90.671 90.711 91.199 
query 1 nn's (6, 6): 302746 (6) 630027 (6) 320776 (6) 735378 (6) 373852 (6) 627139 (6) 1795 (6) 411735 (6) 586453 (6) 380703 (6) 
     dis: 	50.920 53.659 53.817 54.281 54.349 54.590 54.868 55.105 55.571 55.684 
query 2 nn's (6, 6): 326896 (6) 871743 (6) 509845 (6) 464997 (6) 367807 (6) 86011 (6) 677717 (6) 604626 (6) 856461 (6) 236892 (6) 
     dis: 	135.169 136.001 139.068 139.443 140.482 140.808 140.872 141.867 142.286 142.869 
query 3 nn's (6, 6): 997286 (6) 916832 (6) 829520 (6) 64796 (6) 874268 (6) 679824 (6) 369664 (6) 179696 (6) 784717 (6) 289356 (6) 
     dis: 	179.973 185.433 188.177 188.479 188.550 188.628 188.730 188.811 188.922 189.277 
query 4 nn's (6, 6): 719380 (6) 223865 (6) 895955 (6) 461345 (6) 829463 (6) 729225 (6) 135316 (6) 969735 (6) 27286 (6) 286063 (6) 
     dis: 	56.225 65.602 68.052 71.556 74.037 74.353 75.276 75.616 76.658 79.681 
[ 14.701s ] *** Query time: 5.402
qps: 1851.284
 *** HNSW recall 
HNSW get 59597 postive res from 100000 results, recall@10:0.596
recall dist(10% per bucket): 0.092 0.045 0.051 0.056 0.069 0.083 0.090 0.108 0.128 0.142 0.135 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8879447, average: 887.945
finished ivfpq index examples
[ 14.701s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 12 1024"
	User time (seconds): 11.02
	System time (seconds): 3.91
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:14.93
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4387752
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 1095848
	Voluntary context switches: 9
	Involuntary context switches: 24
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:31
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 12
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.069s ] Loaded metadata, 1000000 attr's found
[ 0.069s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.095s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.097s ] Loaded 10000 YTRGB1m queries
[ 0.107s ] Loaded ground truth, gt_size: 10
[ 0.107s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.638s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 14.276s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 616256 (10) 821751 (10) 597593 (10) 945815 (10) 863882 (10) 751978 (10) 742291 (10) 267332 (10) 278160 (10) 743615 (10) 
     dis: 	92.667 93.910 94.717 95.953 96.189 96.228 97.409 98.250 99.509 100.280 
query 1 nn's (10, 10): 963956 (10) 497306 (10) 506689 (10) 819134 (10) 853723 (10) 326679 (10) 431933 (10) 910863 (10) 271824 (10) 731008 (10) 
     dis: 	53.192 53.385 53.409 54.079 54.131 54.387 56.479 56.883 56.884 57.361 
query 2 nn's (10, 10): 572163 (10) 302286 (10) 949757 (10) 389086 (10) 990950 (10) 408274 (10) 362588 (10) 819134 (10) 252417 (10) 159822 (10) 
     dis: 	141.624 145.060 145.911 146.089 146.507 146.802 147.490 148.828 148.871 149.309 
query 3 nn's (10, 10): 819134 (10) 707130 (10) 949757 (10) 30000 (10) 383855 (10) 408274 (10) 129092 (10) 572163 (10) 771516 (10) 660733 (10) 
     dis: 	191.440 191.816 191.870 192.243 192.600 192.644 192.803 194.444 195.730 195.783 
query 4 nn's (10, 10): 314093 (10) 100485 (10) 58705 (10) 273627 (10) 615031 (10) 272857 (10) 44531 (10) 209754 (10) 634282 (10) 407673 (10) 
     dis: 	52.671 79.436 80.453 82.765 89.072 90.618 92.173 98.516 117.862 124.714 
[ 14.276s ] *** Query time: 5.223
qps: 1914.666
 *** HNSW recall 
HNSW get 44845 postive res from 100000 results, recall@10:0.448
recall dist(10% per bucket): 0.073 0.072 0.093 0.123 0.137 0.142 0.123 0.104 0.079 0.042 0.012 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8879447, average: 887.945
finished ivfpq index examples
[ 14.277s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 12 1024"
	User time (seconds): 10.74
	System time (seconds): 3.78
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:14.58
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4387748
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095845
	Voluntary context switches: 3
	Involuntary context switches: 37
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 01:55
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 12
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.073s ] Loaded metadata, 1000000 attr's found
[ 0.073s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.098s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.099s ] Loaded 10000 YTRGB1m queries
[ 0.106s ] Loaded ground truth, gt_size: 10
[ 0.106s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 2.929s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 11.388s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 395436 (19) 334895 (19) 437300 (19) 20671 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	106.114 113.881 122.971 273.664 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 867145 (19) 443185 (19) 554841 (19) 350176 (19) 671252 (19) 944144 (19) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	55.592 79.334 84.453 107.405 135.429 404.785 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 514560 (19) 348433 (19) 951213 (19) 827653 (19) 194240 (19) 104537 (19) 540822 (19) 724071 (19) -1 (0) -1 (0) 
     dis: 	150.586 158.422 177.144 180.834 209.302 220.993 240.654 515.360 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 473207 (19) 593711 (19) 916098 (19) 431500 (19) 400439 (19) 746207 (19) 474407 (19) 996864 (19) 951213 (19) -1 (0) 
     dis: 	194.447 195.563 198.751 199.153 201.400 201.703 206.463 206.591 223.834 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 610165 (19) 615042 (19) 86156 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	76.739 116.264 230.735 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 11.388s ] *** Query time: 4.031
qps: 2480.488
 *** HNSW recall 
HNSW get 16924 postive res from 100000 results, recall@10:0.169
recall dist(10% per bucket): 0.211 0.298 0.244 0.139 0.069 0.026 0.010 0.003 0.001 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8879447, average: 887.945
finished ivfpq index examples
[ 11.389s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 12 1024"
	User time (seconds): 8.64
	System time (seconds): 3.07
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:11.72
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4387744
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095800
	Voluntary context switches: 1
	Involuntary context switches: 22
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 02:10
====================
START: running TEST_HNSW, sift data --

dataset: YTRGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 12
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.104s ] Loaded metadata, 1000000 attr's found
[ 0.104s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.132s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.135s ] Loaded 10000 YTRGB1m queries
[ 0.156s ] Loaded ground truth, gt_size: 10
[ 0.156s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.371s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 12.609s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 159144 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	107.911 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 585723 (20) 956833 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	152.558 162.157 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 800612 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	334.245 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 12.609s ] *** Query time: 4.502
qps: 2221.117
 *** HNSW recall 
HNSW get 3078 postive res from 100000 results, recall@10:0.031
recall dist(10% per bucket): 0.740 0.219 0.035 0.005 0.001 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8879447, average: 887.945
finished ivfpq index examples
[ 12.610s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YTRGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 12 1024"
	User time (seconds): 9.41
	System time (seconds): 3.39
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:12.89
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4385612
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095793
	Voluntary context switches: 1
	Involuntary context switches: 51
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
