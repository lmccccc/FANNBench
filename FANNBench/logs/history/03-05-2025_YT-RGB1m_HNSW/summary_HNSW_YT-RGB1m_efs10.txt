Start time: 05:58
====================
START: running TEST_HNSW, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 10
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.108s ] Loaded metadata, 1000000 attr's found
[ 0.108s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.135s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.137s ] Loaded 10000 YT-RGB1m queries
[ 0.149s ] Loaded ground truth, gt_size: 10
[ 0.149s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.557s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 14.064s ] Query results (vector ids, then distances):
query 0 nn's (1267, 6842): 986245 (2438) 984621 (1376) 521249 (5304) 499361 (1578) 457861 (2688) 680375 (6632) 821751 (5964) 336603 (4871) 492327 (6667) 496578 (6234) 
     dis: 	82.411 86.047 88.069 92.143 92.535 92.633 93.910 94.061 94.346 94.896 
query 1 nn's (1660, 9508): 230459 (3753) 302746 (1711) 497306 (2143) 506689 (8264) 853723 (9251) 373852 (9446) 326679 (7296) 358433 (2215) 689633 (2134) 545680 (1765) 
     dis: 	49.807 50.920 53.385 53.409 54.131 54.349 54.387 54.582 54.671 55.071 
query 2 nn's (1724, 10052): 871743 (6917) 633590 (2353) 528201 (3388) 509845 (3059) 666817 (7868) 795823 (2418) 677717 (2098) 37850 (3810) 572163 (6324) 604626 (4097) 
     dis: 	136.001 137.396 137.993 139.068 139.336 139.694 140.872 141.033 141.624 141.867 
query 3 nn's (4411, 96384): 136177 (7299) 260825 (20057) 762909 (16388) 750794 (13264) 827077 (15838) 433245 (14738) 106987 (74575) 20352 (87234) 942390 (43613) 605960 (10890) 
     dis: 	181.360 183.437 183.497 184.733 185.228 185.319 186.271 186.694 186.797 187.332 
query 4 nn's (2797, 24298): 719380 (6117) 690285 (9682) 950887 (3058) 461345 (2800) 89809 (2923) 969735 (4636) 27286 (4314) 565522 (19123) 47460 (3919) 273627 (2842) 
     dis: 	56.225 63.143 66.157 71.556 72.466 75.616 76.658 79.761 80.512 82.765 
[ 14.064s ] *** Query time: 5.217
qps: 1916.782
 *** HNSW recall 
HNSW get 55409 postive res from 100000 results, recall@10:0.554
recall dist(10% per bucket): 0.115 0.052 0.056 0.064 0.072 0.084 0.095 0.113 0.122 0.126 0.101 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8191501, average: 819.150
finished ivfpq index examples
[ 14.064s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 10 1024"
	User time (seconds): 10.63
	System time (seconds): 3.73
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:14.36
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4387240
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1110312
	Voluntary context switches: 5
	Involuntary context switches: 26
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:43
====================
START: running TEST_HNSW, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 10
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.069s ] Loaded metadata, 1000000 attr's found
[ 0.069s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.093s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.094s ] Loaded 10000 YT-RGB1m queries
[ 0.101s ] Loaded ground truth, gt_size: 10
[ 0.101s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.378s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 12.260s ] Query results (vector ids, then distances):
query 0 nn's (38855, 139269): 239994 (69257) 737273 (113404) 99619 (56529) 952701 (51288) 405113 (58331) 886648 (67332) 961694 (52597) 621002 (95283) 38549 (71441) 17042 (58961) 
     dis: 	89.980 91.199 92.927 93.375 96.994 97.387 97.799 97.904 98.448 100.014 
query 1 nn's (18169, 37472): 411735 (20503) 380703 (20612) 833378 (33326) 431933 (31516) 365136 (35560) 731008 (26372) 667959 (22694) 341272 (33974) 295338 (23441) 179696 (22798) 
     dis: 	55.105 55.684 56.308 56.479 57.351 57.361 59.359 59.383 59.520 59.794 
query 2 nn's (4082, 5859): 604626 (4097) 907166 (5172) 142229 (4776) 290643 (5230) 184588 (5632) 782560 (4366) 50122 (5663) 84539 (5643) 558501 (5059) 819590 (4135) 
     dis: 	141.867 142.668 142.683 143.368 144.632 145.118 145.334 145.486 146.192 146.292 
query 3 nn's (2262, 3092): 871467 (2996) 523139 (2339) 312252 (2292) 258253 (2335) 633590 (2353) 737025 (2790) 771511 (2736) 817369 (2332) 267098 (2969) 956822 (2719) 
     dis: 	185.836 186.303 186.915 186.954 189.866 192.041 192.242 192.693 194.058 194.406 
query 4 nn's (16428, 32488): 565522 (19123) 272496 (18617) 864885 (19198) 4088 (17006) 275060 (16756) 552830 (32019) 355417 (18277) 116068 (16968) 293069 (18042) 447832 (18420) 
     dis: 	79.761 93.271 95.693 107.351 108.890 112.116 118.266 120.623 122.454 131.431 
[ 12.260s ] *** Query time: 4.187
qps: 2388.493
 *** HNSW recall 
HNSW get 40401 postive res from 100000 results, recall@10:0.404
recall dist(10% per bucket): 0.100 0.087 0.112 0.131 0.133 0.135 0.121 0.088 0.059 0.025 0.008 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8191501, average: 819.150
finished ivfpq index examples
[ 12.261s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 10 1024"
	User time (seconds): 9.02
	System time (seconds): 3.55
	Percent of CPU this job got: 100%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:12.57
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4388764
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095798
	Voluntary context switches: 1
	Involuntary context switches: 20
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:05
====================
START: running TEST_HNSW, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 10
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.068s ] Loaded metadata, 1000000 attr's found
[ 0.068s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.091s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.093s ] Loaded 10000 YT-RGB1m queries
[ 0.100s ] Loaded ground truth, gt_size: 10
[ 0.100s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.343s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 11.637s ] Query results (vector ids, then distances):
query 0 nn's (1256, 1308): 412995 (1292) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	144.220 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (8869, 9273): 853723 (9251) 899467 (9013) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	54.131 61.078 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (1883, 1943): 620703 (1905) 891387 (1904) 568504 (1943) 290935 (1886) 172282 (1943) 814507 (1935) 165953 (1891) 630586 (1903) 527914 (1910) 192749 (1914) 
     dis: 	148.201 148.590 155.412 155.821 160.105 166.369 170.597 171.939 176.421 191.362 
query 3 nn's (3917, 4053): 387378 (4031) 304402 (3937) 261311 (3983) 183396 (3978) 213066 (4007) 316737 (3927) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	192.976 204.842 207.440 212.059 221.454 487.594 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (6195, 6441): 266702 (6225) 619953 (6242) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	89.644 132.251 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 11.637s ] *** Query time: 3.894
qps: 2568.321
 *** HNSW recall 
HNSW get 15308 postive res from 100000 results, recall@10:0.153
recall dist(10% per bucket): 0.259 0.306 0.219 0.122 0.061 0.023 0.007 0.002 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8191501, average: 819.150
finished ivfpq index examples
[ 11.637s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 10 1024"
	User time (seconds): 8.44
	System time (seconds): 3.47
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:11.91
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4387748
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095861
	Voluntary context switches: 7
	Involuntary context switches: 26
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 07:21
====================
START: running TEST_HNSW, sift data --

dataset: YT-RGB1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs
query file: /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
attr file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000
ef_search: 10
dim: 1024
loaded base attributes from:/mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.068s ] Loaded metadata, 1000000 attr's found
[ 0.068s ] Loading query vectors and attributes
query vecs data loaded, with dim: 1024, nb=10000
[ 0.093s ] Loaded query vectors from /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs
[ 0.095s ] Loaded 10000 YT-RGB1m queries
[ 0.102s ] Loaded ground truth, gt_size: 10
[ 0.102s ] Index Params -- d: 1024, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 3.328s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 12.074s ] Query results (vector ids, then distances):
query 0 nn's (2164, 2171): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (4231, 4245): 189071 (4233) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	73.131 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (24551, 24732): 943915 (24695) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	188.503 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (2590, 2598): -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (5249, 5268): 297194 (5257) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	163.781 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 12.074s ] *** Query time: 4.179
qps: 2392.721
 *** HNSW recall 
HNSW get 3506 postive res from 100000 results, recall@10:0.035
recall dist(10% per bucket): 0.711 0.236 0.047 0.006 0.001 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 8191501, average: 819.150
finished ivfpq index examples
[ 12.075s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query YT-RGB1m 1000000 10 1 /mnt/data/mocheng/dataset/youtube1m/rgb.fvecs /mnt/data/mocheng/dataset/youtube1m/rgb_query.fvecs /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/youtube1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json /mnt/data/mocheng/dataset/youtube1m/hnsw/index/index_hnsw_sel_1_100000_real_40_1000 10 1024"
	User time (seconds): 8.91
	System time (seconds): 3.39
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:12.30
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 4388772
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1095795
	Voluntary context switches: 1
	Involuntary context switches: 21
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
