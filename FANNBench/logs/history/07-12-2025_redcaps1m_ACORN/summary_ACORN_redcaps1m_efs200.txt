Start time: 05:51
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_6_M40_ga25_Mb64
ef_search: 200 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json
[ 0.136s ] Loaded metadata, 1000000 attr's found
[ 0.136s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.147s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json
[ 0.148s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json
[ 0.263s ] Loaded ground truth, gt_size: 100
[ 0.263s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999919 nodes
level 1 : 24956 nodes
level 2 : 621 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025513
Average degree per layer:170918.833
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 5.156s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.499
[ 106.004s ] Query results (vector ids, then distances):
query 0 nn's (6): 727106 (6) 268161 (6) 646437 (6) 864174 (6) 64073 (6) 302070 (6) 812018 (6) 265404 (6) 84548 (6) 997247 (6) 807005 (6) 524418 (6) 790037 (6) 334544 (6) 571852 (6) 364290 (6) 363324 (6) 465841 (6) 988753 (6) 736934 (6) 754695 (6) 49228 (6) 606467 (6) 966405 (6) 628377 (6) 596166 (6) 309200 (6) 437670 (6) 654910 (6) 514381 (6) 155463 (6) 568912 (6) 678814 (6) 968022 (6) 790030 (6) 760995 (6) 75346 (6) 795414 (6) 171 (6) 825029 (6) 983533 (6) 493307 (6) 813377 (6) 124180 (6) 683352 (6) 720013 (6) 86846 (6) 983152 (6) 352345 (6) 542754 (6) 105541 (6) 953733 (6) 174023 (6) 439788 (6) 679931 (6) 952583 (6) 656336 (6) 211611 (6) 472918 (6) 760479 (6) 612577 (6) 323370 (6) 130347 (6) 331521 (6) 295694 (6) 434594 (6) 553713 (6) 460924 (6) 159325 (6) 419559 (6) 569239 (6) 370277 (6) 549870 (6) 958477 (6) 911872 (6) 556864 (6) 894678 (6) 319315 (6) 105181 (6) 393166 (6) 140252 (6) 761117 (6) 825159 (6) 478100 (6) 101497 (6) 837349 (6) 983241 (6) 126915 (6) 895701 (6) 295644 (6) 10822 (6) 510453 (6) 611101 (6) 718649 (6) 585624 (6) 14042 (6) 662170 (6) 459620 (6) 95737 (6) 347269 (6) 
     dis: 	0.629 0.659 0.696 0.743 0.760 0.763 0.766 0.771 0.786 0.789 0.793 0.794 0.800 0.805 0.812 0.813 0.814 0.815 0.822 0.824 0.826 0.828 0.843 0.850 0.851 0.854 0.854 0.858 0.861 0.862 0.864 0.867 0.873 0.876 0.877 0.877 0.879 0.883 0.883 0.888 0.891 0.896 0.898 0.899 0.900 0.902 0.903 0.904 0.907 0.908 0.909 0.909 0.909 0.910 0.911 0.911 0.911 0.913 0.913 0.914 0.919 0.920 0.921 0.921 0.921 0.921 0.922 0.922 0.922 0.922 0.923 0.924 0.927 0.930 0.931 0.932 0.933 0.933 0.935 0.935 0.937 0.937 0.938 0.938 0.938 0.939 0.940 0.941 0.941 0.942 0.942 0.943 0.943 0.944 0.944 0.944 0.944 0.945 0.945 0.945 
query 1 nn's (6): 363220 (6) 253654 (6) 666880 (6) 660394 (6) 622447 (6) 964028 (6) 428754 (6) 30989 (6) 139424 (6) 442989 (6) 427957 (6) 896567 (6) 667007 (6) 994014 (6) 979295 (6) 439637 (6) 848169 (6) 989731 (6) 459927 (6) 661716 (6) 997966 (6) 630058 (6) 832389 (6) 118532 (6) 163712 (6) 848037 (6) 577336 (6) 441534 (6) 671340 (6) 681550 (6) 994569 (6) 51525 (6) 395948 (6) 408156 (6) 857939 (6) 265490 (6) 455611 (6) 226358 (6) 698433 (6) 964128 (6) 753841 (6) 620586 (6) 925657 (6) 766866 (6) 271263 (6) 544577 (6) 602684 (6) 557922 (6) 377202 (6) 39189 (6) 304095 (6) 110364 (6) 353761 (6) 418536 (6) 987081 (6) 60676 (6) 80871 (6) 563357 (6) 769260 (6) 299005 (6) 584466 (6) 272122 (6) 235619 (6) 295835 (6) 244515 (6) 487009 (6) 920134 (6) 816247 (6) 116279 (6) 971318 (6) 387184 (6) 384623 (6) 844021 (6) 77283 (6) 855763 (6) 8007 (6) 288542 (6) 750270 (6) 791914 (6) 253736 (6) 811301 (6) 916706 (6) 672841 (6) 671475 (6) 58319 (6) 417828 (6) 663858 (6) 1519 (6) 471226 (6) 366807 (6) 885260 (6) 722158 (6) 601939 (6) 993212 (6) 722531 (6) 697547 (6) 49556 (6) 485598 (6) 228624 (6) 530176 (6) 
     dis: 	0.092 0.099 0.101 0.103 0.103 0.106 0.107 0.109 0.110 0.110 0.111 0.111 0.112 0.113 0.115 0.115 0.115 0.116 0.116 0.116 0.117 0.117 0.117 0.117 0.117 0.118 0.118 0.118 0.118 0.120 0.120 0.121 0.122 0.122 0.122 0.122 0.122 0.122 0.122 0.122 0.123 0.123 0.123 0.123 0.123 0.123 0.124 0.124 0.124 0.124 0.125 0.125 0.125 0.126 0.126 0.127 0.127 0.127 0.127 0.127 0.127 0.128 0.128 0.128 0.128 0.128 0.128 0.129 0.129 0.129 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.130 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.131 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.132 0.132 
query 2 nn's (6): 355537 (6) 964377 (6) 940490 (6) 410774 (6) 620585 (6) 374226 (6) 894254 (6) 299577 (6) 773055 (6) 718316 (6) 792564 (6) 911854 (6) 328504 (6) 161603 (6) 494541 (6) 328089 (6) 980872 (6) 41616 (6) 877537 (6) 971858 (6) 507734 (6) 95136 (6) 665039 (6) 919763 (6) 743927 (6) 471110 (6) 381411 (6) 952981 (6) 444996 (6) 93860 (6) 623737 (6) 882709 (6) 25586 (6) 222697 (6) 33572 (6) 498025 (6) 10316 (6) 573824 (6) 423208 (6) 476689 (6) 726914 (6) 202341 (6) 604084 (6) 79399 (6) 317022 (6) 230054 (6) 870630 (6) 403717 (6) 72372 (6) 341373 (6) 136876 (6) 66777 (6) 957685 (6) 509068 (6) 994934 (6) 561163 (6) 88997 (6) 785259 (6) 985107 (6) 747237 (6) 192832 (6) 184796 (6) 884477 (6) 703151 (6) 24332 (6) 325507 (6) 470869 (6) 14154 (6) 485950 (6) 319345 (6) 490170 (6) 435592 (6) 578528 (6) 588334 (6) 965924 (6) 89667 (6) 87145 (6) 211045 (6) 645790 (6) 841847 (6) 649892 (6) 557020 (6) 962379 (6) 73413 (6) 915391 (6) 752639 (6) 259618 (6) 116449 (6) 215560 (6) 866946 (6) 620162 (6) 770456 (6) 662999 (6) 187604 (6) 937121 (6) 439807 (6) 110124 (6) 839527 (6) 943514 (6) 66928 (6) 
     dis: 	0.224 0.226 0.246 0.258 0.259 0.263 0.264 0.264 0.265 0.268 0.271 0.272 0.273 0.275 0.276 0.280 0.282 0.282 0.283 0.283 0.283 0.283 0.284 0.284 0.285 0.285 0.285 0.285 0.286 0.287 0.288 0.288 0.288 0.288 0.289 0.289 0.290 0.291 0.291 0.291 0.292 0.293 0.294 0.296 0.296 0.296 0.296 0.297 0.297 0.297 0.298 0.298 0.298 0.300 0.300 0.301 0.302 0.302 0.302 0.302 0.302 0.303 0.303 0.303 0.304 0.304 0.304 0.305 0.305 0.306 0.306 0.306 0.306 0.307 0.307 0.307 0.308 0.308 0.308 0.308 0.308 0.308 0.308 0.309 0.309 0.309 0.309 0.310 0.310 0.310 0.310 0.311 0.311 0.311 0.311 0.311 0.311 0.311 0.311 0.312 
query 3 nn's (6): 689368 (6) 583699 (6) 428067 (6) 124464 (6) 905275 (6) 687871 (6) 635563 (6) 595884 (6) 609006 (6) 213744 (6) 413550 (6) 456770 (6) 128901 (6) 25831 (6) 994151 (6) 382748 (6) 35100 (6) 246538 (6) 525367 (6) 108295 (6) 1172 (6) 183160 (6) 27812 (6) 305237 (6) 810505 (6) 758927 (6) 421931 (6) 879049 (6) 276603 (6) 269754 (6) 471055 (6) 226331 (6) 171575 (6) 636892 (6) 671717 (6) 640563 (6) 694867 (6) 219959 (6) 174382 (6) 549278 (6) 4433 (6) 397607 (6) 431136 (6) 994604 (6) 301836 (6) 800827 (6) 585483 (6) 799434 (6) 696027 (6) 933991 (6) 663784 (6) 208236 (6) 684978 (6) 931871 (6) 184010 (6) 17746 (6) 672565 (6) 433518 (6) 583701 (6) 382010 (6) 218254 (6) 906607 (6) 332772 (6) 100162 (6) 423285 (6) 280271 (6) 237125 (6) 418179 (6) 807512 (6) 694334 (6) 677322 (6) 358247 (6) 412295 (6) 191420 (6) 835170 (6) 705993 (6) 944408 (6) 723056 (6) 214834 (6) 290571 (6) 315020 (6) 669242 (6) 37631 (6) 480847 (6) 840055 (6) 296579 (6) 237881 (6) 90074 (6) 157117 (6) 935542 (6) 130248 (6) 521807 (6) 129828 (6) 923128 (6) 768716 (6) 67641 (6) 769540 (6) 135464 (6) 681711 (6) 565242 (6) 
     dis: 	0.403 0.405 0.433 0.449 0.459 0.460 0.460 0.462 0.465 0.477 0.477 0.496 0.497 0.498 0.499 0.500 0.501 0.503 0.505 0.508 0.509 0.509 0.511 0.513 0.513 0.515 0.516 0.517 0.520 0.520 0.520 0.522 0.525 0.526 0.526 0.527 0.529 0.530 0.531 0.532 0.533 0.533 0.534 0.536 0.537 0.538 0.539 0.539 0.539 0.541 0.543 0.544 0.546 0.546 0.547 0.547 0.548 0.549 0.550 0.550 0.551 0.552 0.553 0.553 0.554 0.555 0.555 0.555 0.555 0.556 0.557 0.559 0.560 0.561 0.563 0.564 0.564 0.564 0.564 0.564 0.565 0.565 0.566 0.566 0.566 0.566 0.566 0.567 0.567 0.568 0.568 0.568 0.569 0.569 0.571 0.572 0.572 0.572 0.573 0.573 
query 4 nn's (6): 582698 (6) 522469 (6) 176027 (6) 797013 (6) 234795 (6) 931553 (6) 46163 (6) 279888 (6) 68136 (6) 556169 (6) 742084 (6) 331507 (6) 589135 (6) 929991 (6) 59094 (6) 189525 (6) 455512 (6) 105030 (6) 908309 (6) 834676 (6) 458642 (6) 222228 (6) 359688 (6) 222372 (6) 902523 (6) 910110 (6) 969773 (6) 481846 (6) 567017 (6) 941111 (6) 143565 (6) 870723 (6) 282395 (6) 573206 (6) 262612 (6) 599829 (6) 857192 (6) 673629 (6) 147188 (6) 805996 (6) 51681 (6) 726345 (6) 590482 (6) 604239 (6) 601541 (6) 605725 (6) 500007 (6) 678901 (6) 829234 (6) 577889 (6) 511053 (6) 49802 (6) 982040 (6) 309894 (6) 173575 (6) 476701 (6) 487840 (6) 65795 (6) 63749 (6) 183252 (6) 98599 (6) 148545 (6) 760527 (6) 584115 (6) 948484 (6) 37748 (6) 392242 (6) 341328 (6) 717879 (6) 446346 (6) 563854 (6) 395799 (6) 464808 (6) 311214 (6) 204098 (6) 357242 (6) 101369 (6) 378800 (6) 56749 (6) 827261 (6) 528890 (6) 516225 (6) 635293 (6) 325091 (6) 596233 (6) 459414 (6) 583639 (6) 954446 (6) 207939 (6) 421589 (6) 921524 (6) 959099 (6) 709494 (6) 863840 (6) 365642 (6) 604226 (6) 246427 (6) 843400 (6) 724075 (6) 227128 (6) 
     dis: 	0.260 0.260 0.269 0.273 0.274 0.284 0.300 0.303 0.306 0.307 0.308 0.314 0.314 0.317 0.317 0.317 0.317 0.318 0.319 0.321 0.322 0.323 0.324 0.324 0.325 0.325 0.328 0.329 0.330 0.330 0.331 0.332 0.332 0.332 0.332 0.334 0.334 0.334 0.335 0.335 0.335 0.335 0.335 0.336 0.337 0.337 0.337 0.338 0.338 0.338 0.339 0.340 0.340 0.340 0.341 0.342 0.343 0.344 0.344 0.344 0.344 0.345 0.345 0.345 0.346 0.347 0.347 0.348 0.348 0.350 0.350 0.350 0.351 0.352 0.352 0.352 0.353 0.353 0.354 0.354 0.354 0.354 0.355 0.355 0.356 0.356 0.356 0.356 0.357 0.357 0.357 0.358 0.358 0.358 0.359 0.359 0.360 0.360 0.360 0.360 
[ 106.004s ] *** Query time: 53.264
qps: 187.745
 *** acorn recall 
efs:200
acorn get 980259 postive res from 1000000 results, recall@100:0.980
recall dist(10% per bucket): 0.007 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.014 0.378 0.599 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[106.042s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 47046849
ndis: 0
nreorder: 0
average distance computations per query: 4704.685
[ 106.042s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/attr_sel_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_6/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_6_M40_ga25_Mb64 200 512"
	User time (seconds): 98.98
	System time (seconds): 4.85
	Percent of CPU this job got: 97%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:46.38
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3244628
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 12
	Minor (reclaiming a frame) page faults: 1427563
	Voluntary context switches: 8523
	Involuntary context switches: 173
	Swaps: 0
	File system inputs: 280296
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:02
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_10_M40_ga25_Mb64
ef_search: 200 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json
[ 0.101s ] Loaded metadata, 1000000 attr's found
[ 0.101s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.113s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json
[ 0.115s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json
[ 0.234s ] Loaded ground truth, gt_size: 100
[ 0.234s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999973 nodes
level 1 : 24955 nodes
level 2 : 623 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025568
Average degree per layer:170928.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 5.220s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.100
[ 70.953s ] Query results (vector ids, then distances):
query 0 nn's (10): 7102 (10) 64073 (10) 364290 (10) 596166 (10) 554724 (10) 437670 (10) 800767 (10) 997239 (10) 909887 (10) 699054 (10) 927993 (10) 71366 (10) 670823 (10) 174023 (10) 952583 (10) 760479 (10) 385435 (10) 996728 (10) 323117 (10) 950362 (10) 319315 (10) 289857 (10) 468315 (10) 891777 (10) 704461 (10) 497362 (10) 718649 (10) 354877 (10) 827492 (10) 555305 (10) 45927 (10) 258029 (10) 492310 (10) 671123 (10) 595229 (10) 632139 (10) 866331 (10) 673772 (10) 284244 (10) 898033 (10) 100538 (10) 307845 (10) 822773 (10) 533245 (10) 477941 (10) 419752 (10) 605567 (10) 1645 (10) 10727 (10) 157026 (10) 558793 (10) 989751 (10) 403556 (10) 397290 (10) 70435 (10) 185329 (10) 627102 (10) 673888 (10) 767624 (10) 692306 (10) 328333 (10) 42266 (10) 422157 (10) 481649 (10) 859257 (10) 9231 (10) 204674 (10) 526005 (10) 345798 (10) 374394 (10) 609339 (10) 941563 (10) 696719 (10) 166382 (10) 557883 (10) 527411 (10) 528752 (10) 394564 (10) 270810 (10) 413379 (10) 413396 (10) 737031 (10) 163220 (10) 761684 (10) 788364 (10) 792552 (10) 594403 (10) 119266 (10) 616608 (10) 926514 (10) 501562 (10) 589350 (10) 530994 (10) 9593 (10) 61916 (10) 605173 (10) 386557 (10) 587043 (10) 956653 (10) 533351 (10) 
     dis: 	0.758 0.760 0.813 0.854 0.855 0.858 0.863 0.889 0.899 0.903 0.904 0.907 0.907 0.909 0.911 0.914 0.923 0.924 0.924 0.929 0.933 0.936 0.938 0.939 0.941 0.942 0.944 0.945 0.946 0.946 0.946 0.947 0.947 0.948 0.949 0.952 0.953 0.955 0.956 0.957 0.958 0.958 0.958 0.960 0.960 0.960 0.961 0.961 0.961 0.962 0.962 0.964 0.964 0.964 0.966 0.966 0.966 0.967 0.969 0.970 0.970 0.970 0.970 0.970 0.970 0.971 0.971 0.972 0.972 0.972 0.972 0.973 0.974 0.974 0.975 0.975 0.975 0.976 0.976 0.977 0.977 0.977 0.978 0.978 0.978 0.978 0.978 0.978 0.980 0.980 0.980 0.980 0.981 0.981 0.982 0.982 0.983 0.983 0.984 0.984 
query 1 nn's (10): 361537 (10) 428754 (10) 979295 (10) 439637 (10) 424951 (10) 681550 (10) 709969 (10) 371263 (10) 408156 (10) 753841 (10) 105750 (10) 837200 (10) 55881 (10) 858634 (10) 785418 (10) 288542 (10) 811301 (10) 82481 (10) 937262 (10) 41053 (10) 633780 (10) 366937 (10) 853505 (10) 195481 (10) 771674 (10) 469350 (10) 527435 (10) 843111 (10) 24719 (10) 698871 (10) 462482 (10) 915755 (10) 859050 (10) 710324 (10) 200454 (10) 507366 (10) 691606 (10) 832229 (10) 280685 (10) 598436 (10) 23590 (10) 250668 (10) 246783 (10) 561139 (10) 980350 (10) 702451 (10) 30217 (10) 427462 (10) 616405 (10) 652931 (10) 865462 (10) 226285 (10) 959689 (10) 24923 (10) 312232 (10) 894014 (10) 385587 (10) 559169 (10) 615320 (10) 682771 (10) 712818 (10) 547222 (10) 457547 (10) 905827 (10) 977847 (10) 302387 (10) 892547 (10) 808151 (10) 606890 (10) 32573 (10) 630147 (10) 666353 (10) 601637 (10) 918380 (10) 726551 (10) 314837 (10) 181047 (10) 355234 (10) 578846 (10) 653651 (10) 161138 (10) 452752 (10) 157744 (10) 845466 (10) 788181 (10) 132397 (10) 447406 (10) 525392 (10) 396522 (10) 279857 (10) 143623 (10) 495252 (10) 66765 (10) 971379 (10) 696364 (10) 272503 (10) 741927 (10) 143541 (10) 349657 (10) 919231 (10) 
     dis: 	0.107 0.107 0.115 0.115 0.119 0.120 0.120 0.120 0.122 0.123 0.126 0.126 0.127 0.129 0.130 0.130 0.130 0.131 0.132 0.133 0.133 0.133 0.134 0.135 0.136 0.136 0.137 0.138 0.139 0.139 0.139 0.139 0.139 0.141 0.141 0.141 0.141 0.141 0.141 0.142 0.142 0.142 0.142 0.143 0.143 0.144 0.144 0.145 0.145 0.145 0.145 0.146 0.146 0.146 0.147 0.147 0.147 0.148 0.148 0.150 0.150 0.150 0.150 0.151 0.151 0.152 0.152 0.152 0.152 0.153 0.153 0.153 0.154 0.154 0.154 0.154 0.154 0.154 0.155 0.155 0.155 0.156 0.156 0.157 0.157 0.157 0.157 0.157 0.157 0.158 0.158 0.158 0.158 0.158 0.159 0.159 0.159 0.159 0.159 0.160 
query 2 nn's (10): 964377 (10) 771849 (10) 258758 (10) 903106 (10) 400722 (10) 530996 (10) 65400 (10) 971858 (10) 625921 (10) 648247 (10) 381411 (10) 564449 (10) 444996 (10) 253786 (10) 230054 (10) 17779 (10) 670180 (10) 818470 (10) 304775 (10) 625576 (10) 490170 (10) 201205 (10) 89667 (10) 245232 (10) 557020 (10) 915391 (10) 63845 (10) 943514 (10) 66928 (10) 62201 (10) 785841 (10) 336181 (10) 600470 (10) 916423 (10) 825350 (10) 477079 (10) 174123 (10) 307736 (10) 399537 (10) 549665 (10) 536360 (10) 501517 (10) 554381 (10) 921459 (10) 114422 (10) 507084 (10) 784303 (10) 849125 (10) 97812 (10) 772295 (10) 584919 (10) 652051 (10) 914567 (10) 537534 (10) 975511 (10) 374008 (10) 52225 (10) 356390 (10) 748721 (10) 961842 (10) 419992 (10) 479261 (10) 92880 (10) 821258 (10) 281934 (10) 465378 (10) 475643 (10) 354713 (10) 83455 (10) 659554 (10) 697558 (10) 915626 (10) 468882 (10) 934422 (10) 835469 (10) 634199 (10) 50141 (10) 286812 (10) 741514 (10) 490339 (10) 216278 (10) 497341 (10) 324852 (10) 949079 (10) 575134 (10) 14748 (10) 681405 (10) 854690 (10) 882969 (10) 596926 (10) 961910 (10) 698016 (10) 20476 (10) 215608 (10) 789122 (10) 311370 (10) 346374 (10) 539349 (10) 69795 (10) 579636 (10) 
     dis: 	0.226 0.265 0.268 0.268 0.272 0.275 0.281 0.283 0.284 0.284 0.285 0.286 0.286 0.290 0.296 0.300 0.300 0.303 0.303 0.303 0.306 0.307 0.307 0.308 0.308 0.309 0.309 0.311 0.312 0.312 0.313 0.313 0.314 0.317 0.317 0.318 0.320 0.323 0.324 0.326 0.327 0.328 0.329 0.329 0.329 0.329 0.331 0.331 0.332 0.332 0.333 0.333 0.334 0.335 0.335 0.336 0.336 0.337 0.337 0.338 0.338 0.339 0.339 0.339 0.339 0.339 0.340 0.341 0.341 0.341 0.341 0.342 0.342 0.343 0.344 0.344 0.344 0.345 0.345 0.345 0.346 0.346 0.346 0.347 0.348 0.348 0.348 0.349 0.349 0.349 0.350 0.351 0.351 0.351 0.352 0.352 0.352 0.352 0.352 0.353 
query 3 nn's (10): 461110 (10) 382748 (10) 305237 (10) 636892 (10) 863296 (10) 694867 (10) 4433 (10) 431136 (10) 994604 (10) 459020 (10) 583701 (10) 382010 (10) 309349 (10) 723056 (10) 706869 (10) 157117 (10) 129828 (10) 430670 (10) 768716 (10) 67641 (10) 135464 (10) 468019 (10) 893013 (10) 289872 (10) 219659 (10) 99294 (10) 491681 (10) 707074 (10) 740355 (10) 231500 (10) 142896 (10) 463948 (10) 347025 (10) 368426 (10) 211105 (10) 451704 (10) 166166 (10) 712807 (10) 839233 (10) 57618 (10) 66280 (10) 151545 (10) 856275 (10) 735285 (10) 729567 (10) 378228 (10) 534568 (10) 87349 (10) 240780 (10) 812871 (10) 911155 (10) 209001 (10) 243006 (10) 838034 (10) 100678 (10) 692075 (10) 6035 (10) 614709 (10) 596789 (10) 187295 (10) 890599 (10) 160681 (10) 879996 (10) 657433 (10) 48205 (10) 929569 (10) 516288 (10) 627510 (10) 165235 (10) 584120 (10) 211402 (10) 487195 (10) 472338 (10) 856701 (10) 331567 (10) 270587 (10) 699155 (10) 694326 (10) 264846 (10) 574303 (10) 700302 (10) 435934 (10) 206663 (10) 919630 (10) 25409 (10) 958801 (10) 416085 (10) 605527 (10) 179038 (10) 256278 (10) 87933 (10) 60116 (10) 502874 (10) 731392 (10) 587971 (10) 170952 (10) 226976 (10) 563479 (10) 365571 (10) 751019 (10) 
     dis: 	0.462 0.500 0.513 0.526 0.527 0.529 0.533 0.534 0.536 0.548 0.550 0.550 0.561 0.564 0.566 0.567 0.569 0.569 0.571 0.572 0.572 0.574 0.574 0.580 0.582 0.587 0.590 0.590 0.591 0.592 0.592 0.593 0.594 0.595 0.596 0.597 0.598 0.599 0.599 0.600 0.600 0.601 0.602 0.604 0.607 0.608 0.608 0.609 0.610 0.611 0.611 0.612 0.613 0.614 0.614 0.615 0.616 0.618 0.619 0.620 0.621 0.621 0.622 0.622 0.623 0.623 0.624 0.624 0.624 0.624 0.625 0.625 0.626 0.626 0.626 0.626 0.626 0.626 0.627 0.627 0.627 0.627 0.627 0.628 0.629 0.629 0.629 0.630 0.630 0.630 0.630 0.631 0.631 0.632 0.632 0.632 0.632 0.634 0.634 0.634 
query 4 nn's (10): 797013 (10) 959629 (10) 878527 (10) 222228 (10) 567017 (10) 279836 (10) 702801 (10) 732037 (10) 193229 (10) 490515 (10) 311214 (10) 56749 (10) 235772 (10) 354590 (10) 68337 (10) 762488 (10) 89745 (10) 596233 (10) 863840 (10) 139832 (10) 157179 (10) 746306 (10) 523875 (10) 807413 (10) 155731 (10) 136565 (10) 359872 (10) 506084 (10) 586104 (10) 792935 (10) 959185 (10) 933197 (10) 557403 (10) 864559 (10) 514616 (10) 121999 (10) 268279 (10) 246737 (10) 762697 (10) 385892 (10) 186965 (10) 968757 (10) 565245 (10) 542480 (10) 813936 (10) 139503 (10) 485716 (10) 785149 (10) 838409 (10) 285861 (10) 247570 (10) 839671 (10) 3606 (10) 447662 (10) 872971 (10) 127746 (10) 118381 (10) 857426 (10) 608016 (10) 100588 (10) 481433 (10) 917518 (10) 401060 (10) 536255 (10) 282874 (10) 699150 (10) 451188 (10) 570843 (10) 260203 (10) 21973 (10) 155547 (10) 646918 (10) 824178 (10) 899146 (10) 421118 (10) 512978 (10) 612757 (10) 883537 (10) 132719 (10) 528205 (10) 413483 (10) 645343 (10) 41746 (10) 2786 (10) 637776 (10) 901229 (10) 907659 (10) 994969 (10) 412561 (10) 64675 (10) 672149 (10) 995003 (10) 745761 (10) 976689 (10) 164969 (10) 827102 (10) 866469 (10) 519474 (10) 564862 (10) 139550 (10) 
     dis: 	0.273 0.293 0.298 0.323 0.330 0.332 0.335 0.338 0.339 0.351 0.352 0.354 0.354 0.355 0.355 0.355 0.356 0.356 0.358 0.363 0.365 0.367 0.370 0.371 0.375 0.377 0.377 0.378 0.378 0.380 0.380 0.382 0.383 0.383 0.383 0.384 0.385 0.386 0.387 0.387 0.387 0.388 0.388 0.388 0.389 0.390 0.392 0.392 0.394 0.395 0.395 0.396 0.396 0.396 0.396 0.397 0.397 0.398 0.399 0.400 0.402 0.403 0.404 0.405 0.405 0.406 0.406 0.407 0.407 0.408 0.408 0.409 0.410 0.410 0.410 0.411 0.412 0.413 0.413 0.414 0.414 0.415 0.415 0.417 0.417 0.417 0.418 0.418 0.419 0.419 0.419 0.419 0.420 0.420 0.420 0.420 0.420 0.421 0.421 0.421 
[ 70.954s ] *** Query time: 46.261
qps: 216.167
 *** acorn recall 
efs:200
acorn get 991502 postive res from 1000000 results, recall@100:0.992
recall dist(10% per bucket): 0.001 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.004 0.356 0.639 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[70.984s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 31017556
ndis: 0
nreorder: 0
average distance computations per query: 3101.756
[ 70.984s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/attr_sel_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_10/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_10_M40_ga25_Mb64 200 512"
	User time (seconds): 65.75
	System time (seconds): 2.91
	Percent of CPU this job got: 96%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:11.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3243380
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1264286
	Voluntary context switches: 8647
	Involuntary context switches: 214
	Swaps: 0
	File system inputs: 361792
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:10
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_19_M40_ga25_Mb64
ef_search: 200 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.109s ] Loaded metadata, 1000000 attr's found
[ 0.109s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.120s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
[ 0.122s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json
[ 0.238s ] Loaded ground truth, gt_size: 100
[ 0.238s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999978 nodes
level 1 : 24956 nodes
level 2 : 623 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025574
Average degree per layer:170929.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 5.664s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.010
[ 51.326s ] Query results (vector ids, then distances):
query 0 nn's (19): 336934 (19) 81228 (19) 472918 (19) 193999 (19) 295817 (19) 787898 (19) 166382 (19) 112401 (19) 262545 (19) 377893 (19) 164539 (19) 744433 (19) 140595 (19) 866187 (19) 603787 (19) 939624 (19) 928742 (19) 490303 (19) 144195 (19) 341066 (19) 84607 (19) 27051 (19) 681699 (19) 749461 (19) 200260 (19) 201524 (19) 694517 (19) 76312 (19) 440287 (19) 215497 (19) 667610 (19) 262563 (19) 437300 (19) 538482 (19) 960943 (19) 456318 (19) 205397 (19) 451476 (19) 589023 (19) 146229 (19) 774496 (19) 684390 (19) 668483 (19) 221689 (19) 217842 (19) 988288 (19) 347697 (19) 513599 (19) 486216 (19) 295555 (19) 36422 (19) 626527 (19) 941348 (19) 721021 (19) 354041 (19) 359912 (19) 818394 (19) 661405 (19) 908044 (19) 9232 (19) 315311 (19) 214573 (19) 384014 (19) 274617 (19) 830300 (19) 546707 (19) 341737 (19) 148071 (19) 856881 (19) 446053 (19) 667725 (19) 648379 (19) 187622 (19) 959757 (19) 523408 (19) 91303 (19) 581509 (19) 245501 (19) 825769 (19) 739538 (19) 712602 (19) 902809 (19) 406210 (19) 270385 (19) 747739 (19) 406728 (19) 278880 (19) 878865 (19) 618086 (19) 218824 (19) 181097 (19) 941096 (19) 608019 (19) 190814 (19) 800313 (19) 257725 (19) 592473 (19) 781020 (19) 411530 (19) 124759 (19) 
     dis: 	0.862 0.905 0.913 0.947 0.965 0.972 0.974 0.979 0.983 0.983 0.989 0.993 0.996 0.996 0.997 0.998 0.998 1.001 1.002 1.002 1.004 1.005 1.010 1.010 1.013 1.014 1.014 1.015 1.016 1.017 1.018 1.018 1.018 1.020 1.020 1.023 1.023 1.024 1.025 1.025 1.025 1.026 1.027 1.029 1.029 1.030 1.030 1.031 1.031 1.032 1.033 1.033 1.033 1.034 1.034 1.034 1.035 1.035 1.035 1.036 1.036 1.036 1.036 1.037 1.037 1.038 1.038 1.039 1.039 1.040 1.040 1.041 1.042 1.042 1.043 1.043 1.043 1.043 1.044 1.044 1.044 1.045 1.045 1.046 1.046 1.047 1.047 1.047 1.047 1.047 1.048 1.048 1.049 1.049 1.049 1.049 1.050 1.050 1.050 1.051 
query 1 nn's (19): 526331 (19) 158846 (19) 264009 (19) 434283 (19) 246783 (19) 69776 (19) 805880 (19) 916232 (19) 357641 (19) 774551 (19) 532410 (19) 220610 (19) 178290 (19) 127320 (19) 949001 (19) 291626 (19) 303648 (19) 125446 (19) 356636 (19) 336127 (19) 202933 (19) 756517 (19) 731451 (19) 431949 (19) 714440 (19) 451915 (19) 415619 (19) 408759 (19) 397469 (19) 387248 (19) 682193 (19) 834559 (19) 538342 (19) 712436 (19) 696276 (19) 77970 (19) 802685 (19) 517452 (19) 966935 (19) 858352 (19) 578712 (19) 899672 (19) 339865 (19) 672270 (19) 170638 (19) 563150 (19) 328398 (19) 640177 (19) 959784 (19) 196391 (19) 863374 (19) 701323 (19) 318726 (19) 370640 (19) 294751 (19) 931480 (19) 68768 (19) 89042 (19) 85113 (19) 792365 (19) 320616 (19) 248544 (19) 949383 (19) 803796 (19) 567870 (19) 547766 (19) 496355 (19) 136534 (19) 746971 (19) 580639 (19) 417212 (19) 91910 (19) 390006 (19) 512169 (19) 706396 (19) 320927 (19) 149180 (19) 587619 (19) 838744 (19) 410226 (19) 129467 (19) 520243 (19) 999488 (19) 392021 (19) 341975 (19) 615172 (19) 995403 (19) 270899 (19) 668757 (19) 360122 (19) 544140 (19) 34893 (19) 822095 (19) 111242 (19) 221526 (19) 944349 (19) 808729 (19) 180778 (19) 960448 (19) 30845 (19) 
     dis: 	0.135 0.138 0.139 0.140 0.142 0.149 0.156 0.160 0.161 0.166 0.167 0.174 0.177 0.177 0.181 0.182 0.182 0.185 0.195 0.196 0.197 0.198 0.198 0.200 0.201 0.206 0.207 0.209 0.209 0.210 0.211 0.211 0.214 0.217 0.221 0.223 0.224 0.226 0.236 0.241 0.243 0.246 0.250 0.252 0.254 0.255 0.256 0.257 0.259 0.263 0.263 0.264 0.269 0.269 0.273 0.273 0.274 0.274 0.279 0.282 0.287 0.294 0.295 0.298 0.306 0.308 0.309 0.309 0.311 0.312 0.313 0.316 0.321 0.322 0.323 0.323 0.325 0.327 0.328 0.329 0.332 0.333 0.336 0.337 0.339 0.340 0.340 0.340 0.346 0.350 0.350 0.351 0.351 0.353 0.358 0.360 0.362 0.364 0.366 0.370 
query 2 nn's (19): 752639 (19) 436923 (19) 916423 (19) 782944 (19) 366433 (19) 425512 (19) 537534 (19) 313405 (19) 510609 (19) 347848 (19) 249066 (19) 546593 (19) 2227 (19) 387561 (19) 971675 (19) 382912 (19) 71679 (19) 224729 (19) 166797 (19) 895611 (19) 308870 (19) 155587 (19) 174426 (19) 342793 (19) 764496 (19) 588699 (19) 238211 (19) 518706 (19) 652706 (19) 445869 (19) 438231 (19) 614780 (19) 871553 (19) 429947 (19) 561248 (19) 318335 (19) 382511 (19) 302530 (19) 342462 (19) 557 (19) 557152 (19) 770967 (19) 280805 (19) 179676 (19) 757798 (19) 604583 (19) 46232 (19) 331454 (19) 563956 (19) 302283 (19) 853434 (19) 432628 (19) 527907 (19) 390042 (19) 652509 (19) 617559 (19) 223642 (19) 573640 (19) 657355 (19) 703910 (19) 450899 (19) 64907 (19) 345959 (19) 365967 (19) 828745 (19) 724730 (19) 158758 (19) 965930 (19) 881966 (19) 422672 (19) 552285 (19) 477149 (19) 609483 (19) 415545 (19) 397924 (19) 949999 (19) 183363 (19) 748422 (19) 899632 (19) 70420 (19) 831158 (19) 308377 (19) 834119 (19) 412342 (19) 608807 (19) 761794 (19) 818761 (19) 426796 (19) 907098 (19) 218188 (19) 307773 (19) 623938 (19) 662128 (19) 621950 (19) 289553 (19) 306552 (19) 605999 (19) 537543 (19) 699973 (19) 890527 (19) 
     dis: 	0.309 0.314 0.317 0.319 0.330 0.330 0.335 0.337 0.346 0.355 0.357 0.358 0.360 0.361 0.362 0.363 0.365 0.368 0.369 0.371 0.371 0.374 0.375 0.377 0.377 0.382 0.383 0.385 0.388 0.388 0.388 0.390 0.391 0.392 0.393 0.394 0.396 0.396 0.397 0.397 0.398 0.398 0.399 0.399 0.399 0.399 0.401 0.403 0.403 0.404 0.405 0.407 0.408 0.409 0.410 0.411 0.415 0.415 0.416 0.417 0.417 0.418 0.419 0.420 0.420 0.420 0.421 0.421 0.423 0.423 0.423 0.425 0.425 0.426 0.426 0.426 0.427 0.427 0.429 0.430 0.430 0.430 0.431 0.431 0.432 0.432 0.432 0.433 0.433 0.433 0.433 0.433 0.434 0.434 0.435 0.435 0.436 0.438 0.438 0.438 
query 3 nn's (19): 687871 (19) 226331 (19) 493967 (19) 239054 (19) 840258 (19) 231500 (19) 358741 (19) 89977 (19) 584120 (19) 938737 (19) 278147 (19) 82288 (19) 432511 (19) 776600 (19) 361397 (19) 748862 (19) 841366 (19) 611390 (19) 659758 (19) 414971 (19) 388276 (19) 117780 (19) 930132 (19) 905969 (19) 103041 (19) 421073 (19) 451260 (19) 108439 (19) 592067 (19) 947158 (19) 145084 (19) 549270 (19) 600352 (19) 231174 (19) 786328 (19) 211388 (19) 535798 (19) 649571 (19) 150328 (19) 683557 (19) 508788 (19) 76913 (19) 649540 (19) 654995 (19) 19058 (19) 30559 (19) 167349 (19) 844361 (19) 665295 (19) 728591 (19) 902097 (19) 859186 (19) 172859 (19) 392380 (19) 746538 (19) 821435 (19) 865326 (19) 571191 (19) 426453 (19) 532857 (19) 139377 (19) 573324 (19) 732177 (19) 765686 (19) 425659 (19) 421136 (19) 514909 (19) 785934 (19) 996891 (19) 490001 (19) 521372 (19) 246490 (19) 904629 (19) 614433 (19) 34214 (19) 326989 (19) 723383 (19) 864506 (19) 814067 (19) 478302 (19) 455319 (19) 384771 (19) 531600 (19) 329757 (19) 139151 (19) 74219 (19) 931011 (19) 704809 (19) 457960 (19) 570635 (19) 375597 (19) 707338 (19) 238988 (19) 231538 (19) 20400 (19) 652550 (19) 317730 (19) 972185 (19) 650113 (19) 803189 (19) 
     dis: 	0.460 0.522 0.561 0.587 0.589 0.592 0.595 0.611 0.624 0.626 0.629 0.643 0.644 0.650 0.652 0.653 0.653 0.654 0.657 0.660 0.661 0.663 0.663 0.663 0.665 0.667 0.668 0.670 0.670 0.676 0.678 0.679 0.681 0.681 0.683 0.684 0.692 0.692 0.694 0.695 0.700 0.709 0.710 0.714 0.715 0.715 0.715 0.717 0.719 0.720 0.721 0.723 0.724 0.726 0.728 0.729 0.729 0.731 0.731 0.733 0.733 0.735 0.736 0.736 0.739 0.740 0.742 0.744 0.744 0.746 0.746 0.746 0.747 0.747 0.747 0.749 0.750 0.750 0.750 0.751 0.752 0.752 0.753 0.753 0.753 0.754 0.754 0.755 0.756 0.756 0.758 0.760 0.761 0.762 0.762 0.763 0.763 0.764 0.764 0.764 
query 4 nn's (19): 522469 (19) 940668 (19) 402334 (19) 393712 (19) 637586 (19) 135893 (19) 826811 (19) 947998 (19) 699126 (19) 862880 (19) 221380 (19) 989983 (19) 25013 (19) 343364 (19) 819697 (19) 122272 (19) 167033 (19) 405287 (19) 896541 (19) 914891 (19) 943070 (19) 52833 (19) 301884 (19) 673302 (19) 767552 (19) 472411 (19) 562180 (19) 234790 (19) 240731 (19) 745360 (19) 455226 (19) 758419 (19) 600085 (19) 746659 (19) 447111 (19) 222946 (19) 778267 (19) 726960 (19) 407725 (19) 734757 (19) 67891 (19) 663763 (19) 544859 (19) 337647 (19) 979691 (19) 407735 (19) 494790 (19) 339424 (19) 344486 (19) 36770 (19) 330442 (19) 194216 (19) 717777 (19) 641166 (19) 833270 (19) 465637 (19) 85340 (19) 548498 (19) 70567 (19) 862901 (19) 596268 (19) 912303 (19) 957789 (19) 213166 (19) 144437 (19) 842312 (19) 396976 (19) 156900 (19) 168484 (19) 720843 (19) 546044 (19) 997740 (19) 458995 (19) 866457 (19) 227087 (19) 100677 (19) 175155 (19) 281236 (19) 276714 (19) 189655 (19) 660682 (19) 205695 (19) 317364 (19) 803480 (19) 452143 (19) 108276 (19) 278479 (19) 871328 (19) 971813 (19) 387962 (19) 369261 (19) 807319 (19) 335930 (19) 141808 (19) 115345 (19) 609636 (19) 776801 (19) 175957 (19) 16865 (19) 487204 (19) 
     dis: 	0.260 0.358 0.372 0.380 0.385 0.411 0.416 0.430 0.435 0.436 0.436 0.438 0.441 0.443 0.445 0.445 0.448 0.457 0.458 0.460 0.460 0.462 0.463 0.465 0.466 0.467 0.470 0.473 0.473 0.475 0.475 0.476 0.477 0.477 0.477 0.478 0.479 0.480 0.480 0.481 0.482 0.483 0.483 0.485 0.485 0.486 0.487 0.487 0.488 0.490 0.491 0.492 0.494 0.495 0.496 0.497 0.497 0.498 0.498 0.499 0.499 0.499 0.500 0.500 0.500 0.501 0.503 0.505 0.505 0.506 0.506 0.507 0.511 0.511 0.511 0.512 0.513 0.514 0.515 0.517 0.518 0.518 0.519 0.519 0.520 0.521 0.521 0.521 0.521 0.522 0.522 0.522 0.523 0.523 0.524 0.524 0.524 0.525 0.525 0.525 
[ 51.327s ] *** Query time: 32.595
qps: 306.797
 *** acorn recall 
efs:200
acorn get 940684 postive res from 1000000 results, recall@100:0.941
recall dist(10% per bucket): 0.001 0.000 0.000 0.001 0.001 0.002 0.003 0.013 0.109 0.831 0.040 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[51.357s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 8117890
ndis: 0
nreorder: 0
average distance computations per query: 811.789
[ 51.357s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_19_M40_ga25_Mb64 200 512"
	User time (seconds): 45.92
	System time (seconds): 2.65
	Percent of CPU this job got: 94%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:51.59
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3245512
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 13
	Minor (reclaiming a frame) page faults: 832507
	Voluntary context switches: 8984
	Involuntary context switches: 49
	Swaps: 0
	File system inputs: 425576
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:18
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_20_M40_ga25_Mb64
ef_search: 200 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json
[ 0.095s ] Loaded metadata, 1000000 attr's found
[ 0.095s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.107s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json
[ 0.109s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json
[ 0.227s ] Loaded ground truth, gt_size: 100
[ 0.227s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999962 nodes
level 1 : 24956 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025557
Average degree per layer:170926.167
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 5.319s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 200
selectivity: 0.001
[ 18.928s ] Query results (vector ids, then distances):
query 0 nn's (20): 925980 (20) 0 (441) 1 (2) 127104 (20) 201171 (20) 854235 (20) 731101 (20) 592691 (20) 544529 (20) 2 (73) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.211 1.253 1.274 1.335 1.351 1.373 1.378 1.416 1.425 1.426 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20): 127104 (20) 0 (441) 925980 (20) 731101 (20) 854235 (20) 592691 (20) 2 (73) 544529 (20) 1 (2) 201171 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.778 0.806 0.856 0.876 0.893 0.898 0.948 0.948 0.965 0.969 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20): 0 (441) 925980 (20) 127104 (20) 2 (73) 592691 (20) 854235 (20) 544529 (20) 1 (2) 201171 (20) 731101 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.748 0.769 0.817 0.865 0.873 0.877 0.877 0.913 0.917 0.962 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20): 0 (441) 925980 (20) 127104 (20) 731101 (20) 854235 (20) 592691 (20) 1 (2) 544529 (20) 201171 (20) 2 (73) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.025 1.042 1.050 1.094 1.157 1.180 1.180 1.205 1.249 1.324 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20): 127104 (20) 854235 (20) 201171 (20) 925980 (20) 544529 (20) 731101 (20) 592691 (20) 1 (2) 0 (441) 2 (73) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.603 0.675 0.690 0.701 0.718 0.725 0.766 0.784 0.997 1.039 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 18.929s ] *** Query time: 1.168
qps: 8558.014
 *** acorn recall 
efs:200
acorn get 7596 postive res from 1000000 results, recall@100:0.008
recall dist(10% per bucket): 1.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[18.970s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 70000
ndis: 0
nreorder: 0
average distance computations per query: 7.000
[ 18.970s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 100 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/attr_sel_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_20/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_500_random_20_M40_ga25_Mb64 200 512"
	User time (seconds): 13.98
	System time (seconds): 2.80
	Percent of CPU this job got: 86%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:19.38
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3245516
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 840448
	Voluntary context switches: 9562
	Involuntary context switches: 71
	Swaps: 0
	File system inputs: 670616
	File system outputs: 72
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
