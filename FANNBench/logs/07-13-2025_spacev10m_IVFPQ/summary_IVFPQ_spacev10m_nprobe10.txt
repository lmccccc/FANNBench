Start time: 10:31
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_6_2_500_random_6.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_6_2_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.365s ] Loaded metadata, 20000000 attr's found
[ 1.365s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.368s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.370s ] Loaded 10000 spacev10m queries
[ 1.439s ] Loaded ground truth, gt_size: 100
[ 1.439s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.573s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 527.815s ] Query results (vector ids, then distances):
query 0 nn's (6, 4634, 87963): 1352077 (82446) 1300400 (19) 5030532 (6) 8023016 (6) 2436347 (67552) 606211 (66919) 1781760 (6) 4853416 (6) 3647719 (55397) 290760 (6) 1714233 (67459) 5096505 (19076) 6583311 (23661) 8021837 (17602) 6313468 (10) 2721656 (6) 9148464 (6) 6309057 (69314) 2204643 (18253) 5585254 (6) 7634466 (6) 4779084 (6) 4592488 (6) 8997960 (10) 2382485 (32850) 8538301 (97867) 3881211 (54102) 7007393 (39260) 4279856 (6) 2037978 (19) 5275548 (6) 4022185 (63960) 890298 (10) 6547416 (6) 7305168 (6) 106800 (10) 521477 (78019) 9600306 (6) 2415040 (6) 8846971 (9611) 4066846 (6) 511283 (97145) 1947555 (99275) 2646514 (20) 3828638 (6) 5004916 (19) 4932580 (6) 4915045 (84441) 4287666 (19) 6478048 (6) 6240106 (6) 5950387 (33701) 3057373 (30535) 2605318 (10) 7983463 (16904) 9234384 (6) 8097566 (6) 5236967 (56510) 9957153 (6927) 7330716 (6) 1357760 (6) 8563527 (86849) 8849839 (32910) 3651927 (69293) 3636367 (57022) 8341867 (92823) 7826722 (10) 7115332 (6) 3611695 (34903) 587457 (71981) 9169598 (6) 3622412 (6) 5320284 (6) 1666 (6) 9715655 (71983) 488103 (25628) 9576118 (10) 5560302 (10) 4715886 (6) 841711 (19771) 1545295 (94099) 1954970 (10) 4104937 (41784) 74334 (19) 5839410 (10) 1604234 (10) 6487757 (80253) 7887947 (33537) 3815686 (6) 2912614 (10) 5014941 (3680) 1985395 (38906) 2210342 (6) 3178566 (10) 3341474 (10) 4795860 (10) 7905927 (56841) 9469914 (6) 9426007 (67842) 8504623 (82848) 
     dis: 	3341.555 3558.984 4275.268 4520.620 5024.053 5260.997 5329.049 5518.065 5521.637 6092.811 6122.817 6247.640 6254.688 6361.337 6520.098 6534.335 6571.315 6627.021 6703.960 6712.188 6712.188 6923.574 7006.466 7085.572 7166.396 7292.290 7292.523 7475.898 7668.837 7770.476 7814.050 7830.836 7865.851 7878.941 7930.551 7963.682 8068.920 8104.739 8125.620 8219.742 8229.662 8238.021 8305.371 8357.732 8422.494 8430.933 8562.139 8628.605 8660.164 8738.425 8759.140 8870.273 8877.213 8877.850 8887.686 8912.922 9008.827 9013.942 9033.175 9115.459 9148.111 9164.880 9184.734 9216.428 9228.418 9237.871 9239.459 9360.211 9364.410 9373.359 9381.196 9383.824 9386.525 9431.528 9432.357 9450.677 9504.428 9529.215 9541.047 9567.089 9567.345 9632.602 9677.152 9680.544 9711.540 9714.913 9744.189 9756.121 9765.999 9782.039 9783.742 9826.719 9854.002 9875.965 9950.687 9956.871 9971.771 9975.606 9980.904 9996.572 
query 1 nn's (6, 5470, 88798): 1027770 (6) 7672609 (15924) 3024255 (72395) 6716785 (31805) 4573755 (79398) 3010609 (46230) 6693881 (88858) 3843020 (6) 8596579 (663) 1852123 (33745) 1739093 (95935) 547651 (59182) 2769394 (10) 4731052 (10) 6631934 (10) 5453229 (59158) 5778168 (6) 3255981 (95716) 9559160 (10) 5312590 (6) 7504439 (21717) 9311189 (74798) 8268659 (24674) 5140912 (19) 2342379 (4483) 1262717 (59275) 2308516 (6) 5321556 (10) 5374088 (10) 7995495 (98550) 3467889 (13970) 765304 (10) 1674348 (10) 4561316 (6) 7957281 (51267) 9750308 (6) 5325898 (6) 497310 (10) 2400979 (55852) 5907642 (6) 5183877 (8660) 8598995 (26412) 7714223 (55685) 2677560 (10) 2077395 (13249) 1119716 (10) 8377057 (96074) 5427517 (57589) 7898285 (20686) 1847088 (10) 3730938 (10) 6005945 (68913) 3171582 (10) 5116926 (6) 3579661 (49531) 7107065 (73072) 6783786 (6) 3302437 (60178) 3699133 (9100) 2775410 (10) 1259440 (10) 3767930 (6) 6218290 (10) 4952577 (38738) 7896078 (6) 8219055 (91011) 9979859 (8212) 7208440 (6) 8300390 (6) 8086137 (78267) 307231 (83108) 1386102 (6) 4414583 (66231) 3510541 (14975) 2233630 (6) 7000075 (67909) 5755448 (10) 9780570 (6) 3253492 (19) 1010768 (10) 1175501 (54050) 7430809 (86109) 3787303 (80206) 829204 (6) 1587846 (20) 419655 (45354) 6255602 (10) 4333009 (8114) 8680758 (6) 8829523 (9535) 2781736 (6) 3721755 (7956) 1189377 (87468) 9514926 (10) 3071375 (15845) 9416444 (10) 6487413 (93244) 6894603 (95776) 2518537 (40893) 603218 (6) 
     dis: 	4951.676 5879.518 6388.603 7614.397 7797.702 8396.163 8396.801 8588.030 8631.122 8661.861 9137.823 9148.979 9206.575 9239.021 9293.700 9385.241 9463.719 9671.066 9757.467 9757.604 9797.882 9801.692 9808.093 9820.999 9916.422 9923.583 9938.969 9964.785 9964.950 10060.589 10145.601 10295.046 10299.835 10321.362 10332.029 10352.860 10373.654 10399.735 10437.386 10472.448 10484.000 10489.525 10572.902 10662.205 10665.625 10757.227 10777.031 10779.470 10800.264 10809.167 10811.119 10821.417 10858.062 10910.203 10929.021 10972.246 10983.195 11002.873 11015.050 11024.872 11047.003 11080.872 11087.094 11142.678 11143.221 11149.586 11202.398 11256.481 11274.488 11294.567 11301.396 11369.698 11373.731 11396.531 11405.533 11418.250 11426.594 11456.836 11464.286 11503.037 11506.643 11513.305 11559.668 11578.215 11608.293 11610.409 11622.009 11632.678 11665.165 11688.594 11697.951 11717.602 11725.858 11741.981 11749.455 11754.886 11759.063 11801.319 11806.127 11813.087 
query 2 nn's (6, 6014, 89345): 4574760 (19) 5189301 (576) 8005273 (50044) 4290437 (88854) 3524579 (28904) 9191130 (6) 5932138 (19) 7542827 (81765) 2966676 (20) 8699363 (46816) 5193386 (6) 5236859 (26256) 2096002 (6) 4969561 (36325) 9602743 (63312) 5423341 (98433) 190238 (6) 6212714 (6) 7670329 (55245) 3361974 (19) 1233143 (76083) 4578631 (10151) 2153650 (6) 9339955 (77172) 9023762 (19) 7126935 (54438) 4493257 (19861) 2557172 (10) 801867 (1420) 3405939 (41719) 3578812 (6) 3890438 (6) 6451690 (10) 2655117 (33644) 8264753 (46954) 894483 (50988) 4517312 (6) 8719744 (6) 6105163 (55827) 7822601 (94854) 7037734 (6) 5597353 (11322) 192071 (80804) 6334408 (10) 1978808 (6) 2953283 (45238) 1358363 (91958) 8672644 (20) 7111817 (96507) 1264837 (72639) 512960 (10) 6010182 (163) 2353418 (10) 5422621 (34999) 5461858 (6) 4001654 (6) 494920 (6) 9177119 (92400) 6561981 (75072) 5891991 (38072) 5800932 (6) 8060848 (6) 9247159 (34997) 6829020 (6) 6399400 (10) 3436280 (6) 6403508 (6) 8873657 (60621) 349510 (19) 3989900 (10) 7585231 (82270) 5943431 (82537) 2873617 (31338) 7545774 (19) 6791210 (174) 4998301 (10847) 2262803 (40535) 7643282 (10) 951709 (93918) 3542525 (89751) 3548091 (56653) 4011639 (37249) 4956255 (38591) 8553474 (6) 5844655 (44918) 2506689 (91647) 7839327 (46501) 1001168 (19) 7931618 (10) 3630079 (94725) 6226278 (6) 3462861 (48779) 503519 (33105) 6256134 (6) 7430287 (97186) 6383130 (10) 2419337 (34393) 8584412 (6) 2182461 (44838) 8001182 (20) 
     dis: 	3040.931 3396.189 4005.862 4578.350 4985.623 6238.109 6557.125 6887.648 7112.242 7260.264 7288.263 7407.258 7529.874 7825.517 8071.849 8789.828 8922.498 9043.457 9050.707 9172.170 9278.067 9685.342 9786.212 9805.555 9908.007 9917.584 9933.327 10037.378 10149.090 10155.821 10201.693 10210.879 10277.791 10298.174 10450.468 10565.965 10583.876 10602.193 10656.849 10694.041 10702.812 10720.469 10740.497 10784.173 10815.025 10818.419 10859.858 10901.356 10946.392 10950.449 10971.548 10999.236 11004.789 11005.186 11036.880 11099.745 11122.602 11151.174 11165.704 11174.820 11182.323 11182.670 11193.875 11238.701 11254.425 11263.108 11324.973 11351.111 11377.294 11381.695 11384.511 11407.836 11416.600 11418.353 11419.724 11431.283 11483.881 11502.423 11536.722 11560.019 11564.069 11580.558 11596.914 11641.461 11650.820 11656.019 11668.416 11677.971 11681.242 11681.732 11701.179 11711.404 11735.277 11736.208 11739.817 11740.010 11742.165 11745.401 11747.770 11748.390 
query 3 nn's (6, 13264, 96604): 7481558 (6) 1153720 (6) 9922446 (6) 9732223 (67656) 4150154 (6) 7375372 (6) 5679390 (6) 3092361 (93495) 4371036 (19) 1866926 (20) 220595 (4429) 1717763 (49900) 9455216 (10) 3489463 (13849) 7909680 (10) 2272653 (31186) 2845726 (6) 1986111 (70350) 909327 (37225) 1212415 (45485) 9100185 (6767) 7775637 (69406) 9232458 (10) 3358568 (6) 4559449 (70007) 4474761 (37344) 6920544 (6) 8741259 (80737) 1074776 (10) 6447414 (10) 8559924 (10) 1174052 (6) 5785595 (92238) 7623822 (10) 6334064 (19) 8821621 (19778) 9591320 (10) 484745 (76485) 3085720 (6) 9444180 (6) 9671911 (54409) 8159578 (10) 5962673 (64701) 9987911 (32012) 7550297 (62902) 8656601 (10842) 4183705 (48176) 383549 (88962) 7082379 (30821) 2423598 (6) 5683960 (20) 398589 (91023) 6546803 (27494) 237313 (82839) 5566014 (6) 8171167 (60812) 4885973 (60583) 7726743 (87762) 3483488 (6) 5826985 (8208) 7110321 (38270) 5119260 (6) 8669768 (6) 8871347 (27387) 205735 (55518) 5946592 (6) 5868840 (6) 8726555 (87460) 2824029 (96979) 8182930 (6) 3071605 (84231) 8860902 (10) 264481 (25267) 4653543 (53190) 2838160 (6) 730245 (57267) 8145731 (84190) 5176976 (6) 1430920 (10) 3922636 (10) 9760951 (87875) 662720 (6) 3212141 (46591) 3042886 (6) 2018818 (6) 188678 (6) 9069999 (10179) 3266491 (54860) 9754021 (91838) 8345750 (493) 8477134 (6) 7492776 (6) 4886181 (77009) 5056650 (10) 4570984 (6) 3279722 (10) 756034 (6) 7639060 (10) 9469428 (6) 7557678 (10) 
     dis: 	7873.033 8346.340 8473.836 8686.969 8712.388 8843.779 9173.876 9200.078 9418.432 9443.771 9564.521 9582.531 9751.061 9852.841 10028.703 10037.766 10081.150 10126.018 10135.577 10266.923 10302.910 10320.559 10324.750 10329.043 10441.537 10551.779 10566.543 10581.117 10595.141 10658.848 10676.953 10782.791 10793.126 10823.746 10825.712 10869.390 10883.352 10903.383 10906.606 10908.412 10920.675 10943.934 10965.323 10970.995 10991.217 11020.549 11050.146 11104.361 11118.092 11126.637 11128.555 11146.557 11153.344 11231.453 11234.869 11264.336 11298.812 11307.168 11313.547 11329.581 11332.737 11345.025 11373.238 11385.428 11414.640 11414.846 11452.295 11517.953 11541.860 11543.170 11548.719 11566.475 11605.434 11615.858 11631.541 11646.640 11647.182 11648.897 11671.286 11703.753 11721.332 11730.315 11767.832 11784.119 11786.933 11790.985 11802.447 11809.736 11820.295 11861.299 11861.536 11865.833 11872.591 11877.770 11878.121 11881.330 11885.672 11888.877 11901.706 11915.839 
query 4 nn's (6, 16092, 99434): 8316529 (78440) 5624462 (6) 3987492 (10) 1706143 (58697) 9970746 (6) 2953313 (31770) 6872756 (6) 3849231 (45260) 6279473 (67720) 4015525 (60650) 6095172 (6) 9652129 (8860) 9833382 (20) 9578545 (38315) 2279438 (6) 2320125 (97918) 3037959 (54920) 1384227 (58201) 57144 (10) 5562283 (61388) 1171695 (95893) 2190868 (6) 4842135 (720) 7100626 (10) 9374623 (24548) 9240243 (16525) 3655068 (6) 6836665 (22125) 2066916 (6) 3646712 (20) 6289012 (6) 5688541 (17185) 3598596 (6) 7045085 (3107) 3195289 (77764) 6685392 (10) 3484563 (72573) 9438625 (59366) 3795738 (6) 7558970 (6) 703166 (6) 4734386 (60) 1444782 (6) 8728294 (6) 3531751 (38537) 1066421 (10811) 4491189 (23862) 7177846 (10) 9436869 (65469) 9688429 (49785) 6902589 (94014) 8641215 (16208) 1240644 (19) 5663813 (39402) 9600067 (89820) 9765986 (6) 3852808 (19) 569140 (10) 7637276 (6) 6738443 (66076) 3949243 (30072) 1426152 (10) 6297263 (80695) 9195081 (15430) 7987544 (6) 1718685 (9412) 717371 (70769) 1674437 (22193) 7841648 (10) 7476660 (10) 3154654 (10) 7867459 (6241) 1094228 (6) 8453361 (74215) 2596717 (99164) 7986656 (19) 7647900 (6) 9964092 (10) 7272461 (34706) 1549949 (86288) 6129496 (10) 4759620 (10) 5406100 (10) 7245758 (6) 6473453 (25211) 7125428 (10) 5764213 (31963) 5332671 (13292) 2667518 (6) 7786143 (61175) 5401605 (82228) 6436827 (48027) 3493533 (65357) 9357339 (30922) 5602950 (20) 1874504 (6) 9420647 (43389) 1694508 (10) 5230386 (6) 5842981 (22369) 
     dis: 	2177.756 3610.687 3856.535 4314.966 5305.715 5784.582 6043.119 6069.313 6100.910 6211.677 6247.159 6339.760 6359.874 6368.127 6451.869 6472.816 6477.264 6480.089 6537.355 6544.390 6555.624 6561.318 6585.419 6678.773 6681.778 6726.776 6770.410 6774.033 6800.159 6800.361 6808.993 6812.826 6821.971 6829.889 6830.399 6844.074 6847.915 6851.883 6891.355 6905.359 6913.929 6914.599 6924.547 6931.497 6935.372 6940.821 6974.124 6974.285 6991.185 6992.943 6997.358 7026.451 7031.828 7036.965 7040.643 7075.711 7076.980 7081.312 7098.359 7111.177 7170.935 7181.502 7224.686 7236.736 7257.670 7264.637 7265.658 7270.813 7291.545 7300.887 7317.777 7328.855 7337.930 7338.009 7355.038 7364.542 7412.569 7413.237 7413.875 7422.197 7427.381 7430.794 7445.556 7449.566 7472.110 7478.459 7479.727 7487.987 7496.024 7499.956 7507.706 7516.125 7524.712 7545.219 7547.197 7563.553 7568.721 7578.038 7580.200 7583.933 
[ 527.816s ] *** Query time: 10.527
qps: 949.950
 *** ivfpq recall 
ivfpq get 629093 postive res from 1000000 results, recall@100:0.629
recall dist(10% per bucket): 0.009 0.040 0.064 0.083 0.098 0.120 0.124 0.145 0.179 0.139 0.001 
finished ivfpq index examples
[ 527.847s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_6_2_500_random_6.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_6_2_500_random_6_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 10 100"
	User time (seconds): 526.88
	System time (seconds): 1.08
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:47.96
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1329060
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 362683
	Voluntary context switches: 2
	Involuntary context switches: 182
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:12
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_10_2_500_random_10.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_10_2_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.364s ] Loaded metadata, 20000000 attr's found
[ 1.364s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.366s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.368s ] Loaded 10000 spacev10m queries
[ 1.437s ] Loaded ground truth, gt_size: 100
[ 1.437s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.556s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 487.841s ] Query results (vector ids, then distances):
query 0 nn's (10, 49216, 82548): 9694965 (27290) 4617714 (10) 5261441 (70272) 2807977 (57285) 1354982 (6) 5475688 (10) 1168348 (6) 3249603 (84271) 2204374 (6) 9347328 (20) 8662145 (57844) 5594224 (6) 8725926 (10) 6554307 (31307) 2641910 (10) 374574 (10) 2029623 (96987) 3612104 (469) 1895416 (19) 1055 (60878) 9128531 (39254) 5816885 (87198) 3388855 (16869) 3709236 (10) 8474279 (99661) 8394786 (6) 8067752 (6) 6967437 (15331) 1358141 (63775) 2167163 (92355) 3322281 (16511) 8361821 (78819) 3909075 (88219) 1952371 (36843) 1545663 (62351) 8843034 (6) 3121541 (54399) 9253806 (19) 1106014 (6) 5667758 (6) 4846164 (10) 7706220 (6) 4246173 (46158) 5118287 (47838) 867306 (6) 451046 (6) 8793164 (10) 7976764 (6) 2630733 (93961) 8046497 (19065) 2640588 (10) 2447136 (10) 178350 (6) 303346 (6) 1449574 (6) 9846571 (46425) 946120 (6) 1801081 (40880) 7437237 (38120) 4246848 (6) 6132210 (6) 3791236 (6) 321600 (6) 8048413 (36726) 3956609 (67255) 4900059 (69984) 6092077 (86902) 3307659 (16712) 5822268 (20) 6780323 (16668) 7044885 (58428) 1068138 (6) 4644935 (35334) 5232970 (6) 8336078 (10) 540774 (6) 9869612 (10) 841307 (22672) 8006237 (37660) 1470023 (16176) 9115507 (94361) 2939481 (77525) 9451378 (20) 3496198 (6) 1494916 (6) 6004864 (6) 6219674 (6) 5019051 (31368) 9364877 (98709) 5414760 (10) 3678606 (10) 2317182 (10) 3230501 (81914) 4903531 (92153) 2872184 (6) 1283040 (10) 2623787 (37495) 2697372 (10) 7180179 (56886) 4842257 (42930) 
     dis: 	5911.416 7570.556 8546.633 8626.439 8796.165 8956.002 8977.087 9036.808 9047.820 9171.195 9176.939 9252.262 9383.501 9718.043 9763.932 9930.701 9979.620 10035.731 10074.014 10144.688 10161.907 10379.304 10485.183 10495.199 10538.968 10539.939 10555.514 10695.173 10752.307 10773.809 10775.234 10793.109 10855.145 10912.846 10989.469 11030.062 11044.351 11083.309 11093.573 11158.271 11305.354 11344.889 11394.449 11437.445 11463.000 11526.027 11527.418 11528.486 11565.747 11623.289 11624.393 11632.980 11652.653 11682.121 11763.303 11764.689 11786.266 11881.955 11889.455 12043.473 12095.396 12120.975 12241.635 12310.344 12377.398 12396.055 12403.488 12408.215 12499.623 12507.023 12610.508 12636.355 12651.193 12675.994 12688.618 12817.035 12834.342 12846.305 12859.492 12864.278 12865.811 12904.840 12960.396 13028.123 13065.236 13154.176 13403.679 13557.166 13577.062 13591.586 13685.346 13796.666 13805.995 13841.998 13907.092 13928.447 13970.297 14017.549 14062.647 14223.829 
query 1 nn's (10, 19883, 53197): 8108335 (18245) 3545414 (6) 7980366 (6) 2201796 (6) 4612326 (6) 1656217 (31418) 987766 (6) 6270422 (6) 3402133 (40204) 3695413 (38708) 1141657 (29520) 7629371 (62316) 3375782 (10) 1377453 (92143) 7852133 (48732) 5156753 (46443) 7452717 (80282) 9025213 (47303) 8605143 (96144) 4172721 (33612) 8313860 (20) 3916292 (10) 6340832 (6) 5969404 (6) 8597183 (92680) 4848017 (96029) 1548410 (6) 9080943 (45566) 1106933 (66863) 9304025 (40455) 3409365 (68957) 8271386 (6) 9005626 (6) 106949 (36090) 6214884 (6) 7529166 (19) 9997186 (6) 8118481 (59488) 8004010 (6) 5753693 (18424) 424928 (10) 5064267 (7697) 9651263 (75158) 6888185 (45970) 3429255 (71191) 6492634 (6) 5219432 (10) 9439157 (53603) 316839 (50959) 7968900 (10) 4953510 (6) 4559158 (6) 6704562 (6) 1797620 (6) 7841909 (86138) 3144041 (14549) 1060947 (57734) 7423517 (12007) 3091928 (6) 2686220 (6) 953193 (39754) 8045386 (6) 3651163 (57349) 9200089 (47120) 4190346 (6) 314492 (10) 2404310 (6) 2647145 (12838) 406887 (12005) 4654980 (6) 82259 (22113) 9914953 (13288) 7612246 (6) 6935398 (6) 3980766 (6) 729196 (19) 1361458 (10) 757854 (10) 5672497 (45819) 4332264 (10) 6910939 (88982) 8820658 (10) 8686909 (72427) 3237044 (6) 9742671 (83159) 8609610 (6) 3960296 (6) 1258816 (6) 9771805 (68697) 8760588 (10) 4590075 (38531) 5112973 (6776) 3666862 (6) 9681222 (6) 5387681 (75072) 4556833 (12564) 1524255 (8603) 3155939 (49783) 3074010 (10) 7950587 (92826) 
     dis: 	6451.890 7656.533 9476.132 9537.359 10868.520 10900.485 11117.977 11202.352 11331.343 11401.885 11445.806 11495.251 11522.844 11655.184 11747.900 11839.787 11884.328 11907.352 11942.696 11959.719 11993.186 12071.688 12202.911 12257.375 12458.396 12487.219 12542.164 12596.742 12597.363 12615.846 12746.881 12830.779 12831.565 12851.830 12860.848 12862.309 12872.225 12909.492 12918.238 12932.668 12938.355 13046.267 13065.055 13128.266 13179.291 13197.472 13215.770 13244.033 13252.455 13255.920 13285.107 13297.731 13298.832 13303.853 13336.201 13367.515 13367.924 13376.664 13415.354 13415.883 13436.497 13454.143 13471.936 13495.406 13515.107 13516.961 13529.872 13537.403 13551.119 13581.082 13607.392 13609.666 13617.365 13619.135 13659.279 13681.337 13718.688 13735.217 13876.090 13915.246 13924.533 13948.371 13953.199 13971.926 14018.514 14031.162 14049.965 14090.555 14103.891 14107.097 14110.271 14181.509 14242.120 14290.011 14303.126 14318.266 14354.705 14365.747 14390.149 14391.295 
query 2 nn's (10, 1495, 34809): 323907 (36040) 8559091 (34095) 6672275 (15201) 4297707 (71309) 6794035 (37698) 7634670 (10) 1401743 (90829) 3322631 (72968) 3776514 (6) 3686996 (6) 4972945 (97216) 5749330 (20) 2594487 (17466) 8755245 (48968) 3771101 (35665) 700264 (19) 3709896 (6) 4858138 (6) 7408759 (12138) 5087430 (10) 3261993 (14585) 1699600 (6) 3597868 (19) 5908619 (96322) 5292532 (6) 6799372 (6) 9568973 (59337) 8991918 (20) 5394801 (8020) 3065484 (10) 4698927 (31133) 8516242 (20) 5579144 (10) 1762639 (94131) 3145209 (21131) 6179775 (78722) 6182142 (6) 9598171 (85018) 9353814 (6) 9076857 (23165) 5968964 (6) 6307828 (6) 9968918 (6) 1665093 (89793) 5012551 (38783) 7876191 (46503) 8611942 (6) 7652161 (3662) 2925428 (6) 7418908 (6) 9989075 (22940) 9955713 (46214) 1898905 (80773) 6043134 (6) 6861922 (6) 3026188 (6) 8919214 (19) 9275827 (98904) 4883342 (6) 3575834 (20) 8711849 (88148) 2274653 (22743) 7153445 (99) 5383072 (6) 1066595 (42272) 4424715 (65817) 7142785 (92065) 2883953 (28797) 7166334 (6) 2726847 (65119) 4215659 (66740) 824498 (6) 4343169 (82922) 7378423 (12288) 5511915 (63027) 9398400 (6) 6487049 (44591) 3000913 (60191) 442047 (28731) 4262419 (91377) 9065586 (6) 6798056 (6) 7031817 (20052) 4012089 (39232) 3458658 (6) 4437183 (41099) 433968 (6) 2452588 (10) 819867 (24112) 8203454 (6) 3285880 (6) 1458865 (64739) 8260789 (34194) 9610283 (24685) 6031357 (48) 5981880 (6) 5901859 (7047) 6109711 (72410) 5666277 (69278) 5317952 (10) 
     dis: 	9447.551 9454.530 9573.036 10245.340 10634.850 10999.327 11013.273 11141.714 11167.684 11201.961 11405.870 11421.523 11522.168 11600.450 11950.146 11955.770 11974.082 11976.057 11980.894 12051.997 12075.556 12084.806 12176.004 12288.053 12296.513 12332.492 12339.119 12357.623 12371.369 12488.575 12523.222 12532.150 12549.798 12639.295 12643.191 12669.887 12715.731 12748.943 12750.646 12765.095 12772.497 12822.723 12839.324 12855.684 12865.336 12880.500 12921.646 12924.045 12954.686 12972.489 13021.944 13033.193 13062.755 13075.010 13080.336 13097.685 13106.352 13168.781 13187.521 13192.910 13209.119 13209.758 13216.340 13239.156 13283.759 13300.156 13308.207 13316.566 13344.140 13423.035 13459.789 13515.959 13521.693 13535.674 13559.102 13578.695 13605.123 13617.908 13634.160 13656.274 13703.617 13706.699 13768.822 13798.376 13854.620 13897.062 13906.320 13920.192 13941.792 13950.811 13951.785 13972.611 13973.155 13981.631 13982.828 13983.053 13991.542 14003.143 14028.095 14031.850 
query 3 nn's (10, 6802, 40120): 2187959 (59205) 4889443 (12568) 9398930 (6) 5081773 (71771) 9793596 (10) 629955 (16039) 7885127 (85394) 2851767 (78752) 5676630 (6) 4194256 (6) 9698504 (6) 1892004 (6) 3787993 (61247) 6922913 (28247) 5924329 (40823) 1174438 (20) 4957815 (55006) 4642116 (19) 3907409 (93602) 445803 (98256) 5988838 (10) 312551 (55582) 7062232 (6) 2605021 (71552) 436298 (6) 443057 (83616) 839498 (10) 1359896 (10) 4334213 (58227) 6563460 (10) 7541460 (10) 3626423 (17416) 8453511 (42100) 8581597 (99075) 2082227 (20371) 7528916 (6) 6743076 (6) 173114 (6) 8324929 (76837) 2772844 (6) 3908037 (68482) 522697 (10548) 2153783 (3696) 8768561 (70229) 6000334 (6) 1606884 (6) 3067976 (6) 5788714 (6) 7469627 (90516) 1088105 (44403) 8970199 (59070) 1240381 (52) 9268984 (6) 7567043 (77669) 5570654 (6) 8851651 (48708) 9308855 (60454) 2212301 (45369) 7756249 (31103) 1411734 (10) 4503777 (95098) 1473665 (53802) 1348580 (6) 7498922 (6) 7676978 (19) 6806756 (10) 1319961 (27491) 5542604 (6) 8696524 (6) 8108413 (55655) 1735635 (68299) 5384598 (6) 7430988 (19) 6983171 (87209) 9054751 (9692) 7526460 (10) 7389605 (59409) 6870454 (10) 9449666 (6) 9610280 (6) 7520424 (10) 4543118 (10) 7983811 (38973) 2714870 (19) 7593591 (68927) 8901802 (6) 1384187 (24908) 9093845 (20311) 5218561 (23907) 6347966 (10) 6545739 (21371) 8081952 (20) 4468006 (6) 5113097 (82486) 7765676 (10) 6618862 (6) 3598061 (80961) 3803929 (66878) 4954682 (6) 511859 (93690) 
     dis: 	9525.734 10077.080 10280.201 10516.162 10574.636 10879.118 11184.463 11219.842 11478.780 11495.786 11692.943 11767.880 11782.334 11971.541 12030.041 12079.988 12100.439 12365.315 12423.898 12508.024 12547.254 12630.514 12649.941 12691.202 12766.611 12778.926 12819.637 12880.619 12907.828 12946.287 12952.965 12955.870 12974.994 13008.255 13034.025 13050.234 13056.111 13068.133 13069.822 13093.390 13142.956 13171.982 13186.372 13243.730 13286.600 13291.371 13325.331 13338.748 13366.168 13378.840 13391.693 13428.039 13497.223 13499.436 13537.684 13582.209 13584.241 13587.830 13590.982 13593.918 13623.541 13630.539 13640.541 13647.046 13650.781 13657.463 13674.197 13692.166 13751.307 13803.286 13881.520 13899.842 13914.092 13922.900 13964.254 13972.166 13997.019 14061.696 14062.375 14063.604 14107.786 14109.541 14126.113 14175.424 14213.991 14245.283 14246.639 14248.149 14288.441 14296.225 14305.848 14313.551 14316.464 14317.342 14321.727 14352.283 14355.986 14360.604 14376.154 14386.282 
query 4 nn's (10, 52190, 85533): 4352168 (6) 9211260 (10) 4390138 (6) 5922287 (95540) 1587943 (65369) 6581013 (36021) 8608979 (43214) 9519711 (95583) 4505796 (6) 7921516 (10) 5350870 (6) 500157 (69378) 1113458 (6) 6851242 (6) 4514688 (10) 7650915 (52535) 9654936 (10) 5627225 (72788) 5518218 (6) 7009572 (20) 8019290 (6) 6296356 (10) 3689417 (89259) 6857077 (69557) 2668513 (52443) 8664243 (11851) 5464207 (48972) 307550 (6) 6471787 (26378) 7868398 (10) 5451308 (10) 2714041 (88868) 7447299 (45652) 1180414 (10) 6871337 (16107) 6862934 (10) 9972111 (51891) 4535787 (82982) 7786235 (46075) 7664685 (15473) 4486020 (6) 1291989 (8443) 7228802 (10) 6631862 (6) 5091437 (9774) 883849 (35294) 9822847 (91803) 6872346 (10) 4243855 (16936) 4576227 (58639) 345476 (10) 6510749 (40709) 8034111 (42256) 7544631 (13421) 6723712 (10) 4745104 (6) 5072122 (6) 9962536 (6) 9266635 (87289) 1687246 (6) 7856605 (18943) 9357825 (93923) 5737814 (10) 4253371 (71452) 4679495 (29520) 1179006 (10) 8293057 (28432) 8073349 (30825) 7073046 (20) 750278 (6) 6893646 (6) 3956615 (65177) 9024642 (19) 2163722 (10) 990595 (5039) 9738018 (6) 5811284 (6) 4013840 (10) 7608110 (6) 4806839 (82518) 9925399 (63332) 3613192 (6) 2234665 (21562) 285777 (36889) 1613079 (96882) 5068788 (20) 8747609 (7535) 6214910 (10) 820423 (86808) 8810474 (6) 7640936 (10) 4829869 (37223) 8676013 (94865) 7909110 (10) 2013596 (10) 9081585 (63377) 714272 (6) 1568895 (20843) 7434790 (10) 2114400 (6) 
     dis: 	5324.612 5539.291 5889.110 6221.112 6377.479 6554.955 6584.656 6756.838 7100.781 7169.192 7184.787 7186.653 7194.491 7230.535 7296.087 7305.452 7315.148 7335.834 7347.542 7369.658 7369.871 7416.179 7444.456 7449.402 7461.515 7480.220 7504.526 7526.651 7536.147 7550.273 7559.689 7598.278 7599.678 7604.738 7665.815 7693.378 7712.363 7716.701 7725.036 7733.348 7740.587 7754.009 7772.837 7775.736 7806.062 7810.957 7840.125 7868.212 7906.018 7926.288 7954.769 7955.306 7957.603 7961.722 7993.239 8012.750 8018.408 8020.466 8059.936 8078.809 8088.072 8093.528 8100.172 8130.963 8176.796 8190.342 8192.080 8236.551 8239.227 8250.646 8252.586 8266.124 8276.827 8283.551 8310.549 8345.392 8346.346 8355.012 8367.413 8373.561 8382.674 8393.197 8402.534 8411.881 8437.203 8455.224 8460.552 8480.780 8483.575 8486.016 8496.146 8506.225 8508.362 8514.502 8517.184 8526.335 8534.168 8535.390 8544.693 8563.604 
[ 487.841s ] *** Query time: 8.929
qps: 1119.974
 *** ivfpq recall 
ivfpq get 516486 postive res from 1000000 results, recall@100:0.516
recall dist(10% per bucket): 0.021 0.077 0.111 0.121 0.135 0.137 0.136 0.123 0.097 0.041 0.001 
finished ivfpq index examples
[ 487.887s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_10_2_500_random_10.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_10_2_500_random_10_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 10 100"
	User time (seconds): 486.09
	System time (seconds): 1.90
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 8:08.00
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1329060
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 629248
	Voluntary context switches: 1
	Involuntary context switches: 361
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:31
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_19_2_500_random_19.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_19_2_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.369s ] Loaded metadata, 20000000 attr's found
[ 1.369s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.372s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.374s ] Loaded 10000 spacev10m queries
[ 1.443s ] Loaded ground truth, gt_size: 100
[ 1.443s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.573s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 155.224s ] Query results (vector ids, then distances):
query 0 nn's (19, 54085, 74094): 3676917 (585) 8266715 (66672) 4491502 (6) 4882576 (6) 4426046 (10) 433915 (91530) 907845 (4261) 445072 (6) 5259061 (88566) 212096 (10) 846869 (73953) 7991325 (53098) 9489169 (69854) 8177215 (80736) 4103915 (45105) 4491816 (10) 6301292 (10) 7590413 (26437) 2827357 (66431) 4865959 (81534) 9363233 (7576) 4704534 (6) 5309511 (34979) 5878329 (78151) 5051611 (23822) 5062409 (66251) 3678459 (64580) 8250807 (80342) 9438519 (60002) 8460829 (76640) 5848656 (6) 6563590 (6) 7643933 (53149) 2313772 (10) 2093064 (6) 161062 (6) 1829268 (6) 9299922 (6) 1749039 (54376) 1431274 (6) 3993919 (12400) 8096693 (44806) 3338116 (6) 8884538 (10) 9526487 (25406) 4976098 (6) 3278779 (99883) 2375826 (6) 7279248 (6) 3775437 (1996) 2541868 (6) 94162 (6) 6723369 (30850) 5502211 (39256) 8528276 (19) 8341316 (10) 5786895 (68740) 6097262 (19) 4108163 (72821) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	7983.470 9198.772 11411.658 11412.396 11698.703 13399.312 14192.066 15736.026 16263.006 16492.916 16794.787 16855.725 16945.385 17238.832 17801.383 18035.883 18190.490 18210.697 18510.357 18622.348 18709.750 18744.312 18869.266 18919.066 19149.312 19201.434 19301.578 19359.033 19440.602 19581.711 19936.131 19941.732 19993.002 20005.242 20007.691 20104.203 20332.352 20366.344 20524.641 20562.125 20571.262 20577.031 20925.188 21022.502 21039.795 21360.494 21670.172 21728.250 22015.451 22150.203 22388.742 22477.555 22599.434 22658.551 22926.977 23072.699 24602.941 25250.818 26748.127 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 51456, 71454): 9149269 (26405) 2054287 (32509) 7684675 (58291) 1614850 (6) 6240107 (16061) 8109414 (6) 1367688 (10) 3398393 (71117) 9471600 (10) 1320404 (10) 500808 (10) 576366 (6) 6216352 (6) 7387245 (10807) 5161060 (20) 9192134 (10) 872980 (20) 934402 (10) 5759290 (10) 8478537 (71987) 3840375 (48395) 7023022 (19) 7971597 (44319) 7495293 (62009) 93425 (85830) 387061 (15943) 489553 (36016) 7585735 (56859) 9354356 (6) 6666242 (6) 5140053 (48747) 1992806 (6) 1513344 (10) 8134395 (43069) 9146808 (6) 8544458 (6) 7396947 (67767) 1545707 (72514) 9641892 (6) 33627 (55995) 6140489 (25240) 2946464 (6) 1991556 (20) 2574170 (6) 1140654 (6) 739360 (6) 7771013 (16169) 3353060 (10) 8943818 (6) 9225798 (10) 5654007 (99946) 8017453 (6341) 9606338 (20) 8279264 (6) 6214833 (35958) 9301469 (2233) 3171072 (10) 8691451 (13616) 1111640 (6) 7351679 (30205) 8233666 (20) 50838 (6) 1191770 (6) 4296258 (6) 2799935 (79402) 4532595 (91924) 9335047 (90408) 5554510 (6) 2941434 (6) 553573 (83779) 8486388 (6) 3122332 (6) 1264458 (10) 9918250 (19) 7268155 (77764) 234594 (6) 4883068 (6) 596595 (25056) 3039614 (20) 6826862 (10) 5472795 (91777) 7328161 (39306) 1344247 (21301) 6294548 (6) 8660986 (20) 5956528 (10) 4388578 (6) 97534 (10) 3109466 (6) 5052916 (6) 2570100 (19) 5132635 (94729) 8077577 (86544) 2895001 (60483) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9182.754 10339.520 11319.307 12734.326 12931.402 13036.351 13122.611 13176.967 14100.131 14101.123 14176.512 14375.414 14524.308 14545.646 14650.859 14719.461 14740.543 14914.919 14954.512 15140.539 15172.258 15173.440 15269.138 15302.834 15425.865 15617.104 15794.008 15877.455 15883.115 15915.482 16165.316 16184.536 16292.977 16330.119 16418.539 16551.250 16562.549 16572.977 16596.246 16630.334 16678.514 16680.605 16877.336 16913.086 16986.082 17030.969 17068.898 17078.906 17083.201 17207.359 17210.484 17365.145 17386.121 17396.047 17500.398 17647.260 17727.891 17787.906 18175.979 18283.066 18297.053 18305.305 18311.055 18495.246 18495.551 18574.789 18608.746 18773.174 18856.928 18869.371 18910.803 19000.996 19013.578 19058.523 19104.475 19115.834 19178.150 19324.006 19364.344 19373.129 19393.273 19570.283 19739.383 20249.939 20282.668 20371.672 21045.512 21060.348 21071.889 21234.586 21296.383 21512.086 21657.504 23779.834 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 77343, 97360): 2433280 (19) 7187535 (12323) 6291171 (68591) 9608237 (67916) 7743420 (10) 2992613 (7650) 2331863 (67999) 454849 (5694) 8679578 (10) 5239857 (99081) 7803542 (10) 7120262 (10) 4419695 (96005) 8124614 (6) 1492365 (25731) 6765608 (10) 5642195 (42529) 924832 (6) 4407277 (24311) 201128 (6) 4008394 (10) 7029285 (66010) 5609306 (6) 8835352 (10) 288059 (7406) 5977034 (6) 4851161 (48931) 1473461 (99032) 3170242 (6) 1034635 (88133) 144622 (10) 7239494 (6) 4307737 (92324) 977059 (86100) 1276399 (58688) 6958379 (50045) 2640319 (54246) 2661178 (10) 2539344 (6) 3307229 (29039) 7278643 (7751) 9177532 (6) 5044123 (42062) 8824088 (6) 9527934 (6) 7416526 (10) 174226 (10) 3460184 (6) 7862222 (6) 1507801 (47918) 6566738 (10) 9970067 (66031) 4525137 (22910) 5322226 (10) 919689 (73860) 3919448 (6) 200115 (68887) 8585350 (6) 3029424 (6) 4307224 (6) 87859 (58746) 5878648 (20) 8774649 (28427) 8851862 (6) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9938.313 11624.403 13071.408 13085.940 13412.664 13553.408 13563.426 13830.087 14028.129 14071.002 14115.970 14494.453 14546.540 14983.092 15135.140 15172.118 15181.707 15255.425 15469.810 15474.172 15568.771 15581.827 15919.807 16057.451 16134.382 16137.526 16434.199 16447.312 16661.637 16815.059 16904.836 16948.594 16967.027 17270.146 17409.887 17540.691 17734.682 17762.719 17876.053 17951.047 17985.141 18265.303 18472.391 18584.521 18626.549 18749.721 19032.416 19088.164 19117.133 19152.016 19356.008 19469.703 19633.732 19678.062 19711.367 19766.283 20209.129 20419.148 21484.805 21796.133 21973.084 22032.578 22555.312 22793.617 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 13157, 33160): 7320373 (58147) 5651044 (6) 4645015 (66590) 347839 (84820) 860298 (6) 7969254 (6) 5105366 (6) 37729 (31657) 4867364 (6) 1185027 (98655) 7408569 (55359) 6675522 (6) 5763972 (6) 1535783 (48782) 3826459 (59911) 1305951 (59966) 9411819 (37987) 9955663 (9305) 589404 (6) 6981837 (58046) 3021380 (6) 149089 (88172) 4514384 (10) 3871150 (6) 8213213 (42403) 819484 (6) 5832226 (10) 1254792 (6) 9713552 (10) 1399957 (86788) 4447694 (19) 5905099 (70787) 7822280 (10) 517076 (10) 5636214 (6) 1638774 (10) 2756802 (10) 8808242 (6) 7618661 (13935) 9757738 (6) 6665599 (91751) 7250823 (6291) 8800890 (6) 8565326 (6) 938963 (1343) 9614924 (20) 998282 (10) 8391239 (52916) 7930494 (6) 2537272 (6) 2977610 (6) 9122384 (6) 4249240 (6) 8024954 (10) 2931329 (17411) 6187627 (54869) 647146 (6) 769845 (43512) 475726 (6) 3948904 (10) 8513764 (6) 9760399 (95323) 8754500 (6) 3371164 (6) 606344 (10) 8611953 (31963) 7827317 (43249) 6768460 (19) 8331510 (6) 5823815 (56911) 5122258 (10) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	12743.900 12785.460 13365.457 13419.297 13586.329 13668.193 13699.751 13989.547 14025.472 14062.062 14184.836 14574.146 14654.264 14850.059 14867.275 15188.428 15323.150 15395.353 15975.352 16168.237 16444.723 16567.502 16629.125 16727.439 16744.182 16998.896 17034.215 17063.117 17150.012 17161.182 17242.750 17314.771 17367.176 17444.445 17606.074 17733.256 17798.908 17962.771 18045.748 18117.707 18154.094 18224.145 18314.559 18324.588 18493.793 18743.756 18920.838 19012.738 19306.477 19777.129 19820.945 19946.270 20076.305 20218.234 20368.242 20411.668 20422.238 20560.727 20743.527 20815.406 20885.594 20972.965 21004.531 21191.852 21220.250 21471.594 22154.281 22167.586 22702.379 22990.979 24586.359 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 17387, 37379): 523134 (6) 4732096 (10) 5754923 (51873) 7630728 (6) 5215029 (72087) 5390707 (27512) 3199881 (96988) 1441979 (14528) 6583682 (6) 229235 (61886) 4532575 (39631) 4209461 (50572) 4369045 (42661) 8922961 (44153) 8132503 (74582) 2852659 (3372) 1196598 (6) 3173945 (58037) 5431574 (6) 2423134 (10) 9862137 (71238) 9055146 (6) 9482109 (61788) 9326185 (76632) 3375922 (10) 4030322 (6) 7765017 (24716) 6923439 (89212) 2384364 (6) 2424866 (6) 5762765 (37457) 3722920 (6) 2052855 (38456) 1040935 (84523) 6505010 (6) 619662 (10) 8852075 (95700) 296064 (6) 2852658 (19) 2923150 (6) 3167963 (17587) 1676664 (6) 6998137 (72979) 1660999 (1751) 7872386 (6) 1450031 (21000) 3530450 (6) 641373 (37488) 1539854 (10) 1082286 (6) 9261248 (6) 7867574 (6) 2822536 (10) 6084451 (14621) 7390370 (10) 9612598 (6) 7940778 (6) 4428700 (10) 6323526 (6) 5041567 (88039) 969210 (6) 4267226 (6) 5656345 (93698) 6931278 (6) 5341285 (55682) 62139 (39935) 5046372 (6) 5345167 (18590) 4221298 (10) 198487 (90676) 5506381 (47903) 6767396 (6) 5082889 (16660) 8628252 (6) 1536905 (44834) 3632052 (6) 8468817 (40922) 7432222 (6) 8848792 (6) 3857157 (96945) 1930120 (6) 7106925 (33169) 3632190 (10) 22115 (50433) 2430414 (6) 3180343 (7372) 80185 (85504) 9655665 (85012) 5327475 (84607) 8140963 (9975) 8503119 (52451) 5905485 (34028) 1776135 (14713) 8355100 (10) 7669888 (6) 5722516 (6) 2702176 (6) 246834 (6) 9920023 (82153) 3685946 (10) 
     dis: 	6672.447 6976.264 7944.321 8016.206 8034.459 8072.688 8181.971 8191.631 8475.537 8480.027 8608.859 8624.795 8645.483 8646.700 8662.189 8798.516 8851.603 8926.790 8944.104 9063.853 9113.401 9130.602 9139.240 9164.483 9208.091 9282.506 9458.661 9469.869 9492.304 9537.613 9541.775 9590.400 9593.673 9686.943 9763.492 9815.611 9936.672 9958.453 9993.965 10060.236 10102.625 10106.953 10114.277 10191.740 10211.365 10238.611 10266.468 10319.323 10325.791 10352.969 10385.477 10420.998 10538.915 10549.122 10608.941 10622.615 10645.668 10654.433 10822.717 10834.750 10861.094 10945.802 10954.862 10956.660 10988.188 10994.201 11058.656 11061.376 11141.412 11207.559 11262.682 11398.777 11404.496 11428.232 11462.520 11587.684 11598.519 11632.125 11646.518 11679.924 11757.520 11787.693 11835.477 11866.022 11893.852 11914.496 11934.055 11958.250 11985.356 12119.342 12133.967 12194.461 12212.154 12260.171 12313.692 12336.842 12439.733 12446.803 12478.072 12483.508 
[ 155.224s ] *** Query time: 7.588
qps: 1317.838
 *** ivfpq recall 
ivfpq get 250500 postive res from 1000000 results, recall@100:0.251
recall dist(10% per bucket): 0.117 0.261 0.273 0.204 0.100 0.035 0.008 0.002 0.001 0.000 0.000 
finished ivfpq index examples
[ 155.255s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_19_2_500_random_19.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_19_2_500_random_19_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 10 100"
	User time (seconds): 154.44
	System time (seconds): 0.89
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:35.34
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1329060
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 362669
	Voluntary context switches: 1
	Involuntary context switches: 186
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:43
====================
START: running TEST_IVFPQ, sift data --

dataset: spacev10m
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs
query file: /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
attr file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
qrange file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_20_2_500_random_20.json
gt file: /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_20_2_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50
nprobe: 10
dim: 100
loaded base attributes from:/mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json
[ 1.408s ] Loaded metadata, 20000000 attr's found
[ 1.408s ] Loading query vectors and attributes
query vecs data loaded, with dim: 100, nb=10000
[ 1.410s ] Loaded query vectors from /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs
[ 1.413s ] Loaded 10000 spacev10m queries
[ 1.485s ] Loaded ground truth, gt_size: 100
[ 1.485s ] Index Params -- d: 100, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.668s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 137.362s ] Query results (vector ids, then distances):
query 0 nn's (20, 90181, 93345): 9227489 (34911) 5105824 (6) 1372881 (62716) 8482810 (19) 5571087 (161) 7508287 (83704) 8451430 (6) 9362057 (79412) 5805755 (41282) 9487548 (10) 4610640 (6) 1927622 (19) 7619293 (30428) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	10732.834 14368.220 16257.496 16804.012 17088.859 17535.420 18396.961 19622.910 20723.320 21203.426 22349.129 22627.363 22998.031 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 59593, 62758): 8799879 (22518) 6496767 (76736) 4786973 (3764) 7082387 (30088) 8420486 (10) 6919424 (6) 1274619 (4255) 9459514 (6) 830754 (10) 703802 (6) 7141914 (6) 4005923 (51236) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	12057.234 12290.301 14571.910 14720.905 14923.604 15458.473 16977.812 17136.037 18404.625 18607.598 19443.838 22341.146 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 41561, 44722): 9909884 (6) 2167857 (64546) 2743912 (6) 8529174 (19) 3299047 (87558) 2199820 (10) 5315787 (68836) 9743574 (10) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	14938.047 16102.095 17460.246 18306.965 18879.957 19157.840 19387.773 19499.316 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 4197, 7363): 2360519 (23305) 5497231 (43800) 6752785 (3284) 5492399 (13395) 5380131 (41291) 3600110 (10) 8040391 (69389) 9693526 (10) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	9903.758 11838.703 13358.748 16519.746 16746.600 17468.668 17663.695 21322.754 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 78842, 82010): 494240 (6) 4637283 (25653) 5554835 (48707) 7135235 (3168) 3983625 (63223) 491377 (57122) 2057039 (73643) 1570758 (6) 1632815 (36860) 99754 (6) 7445977 (7574) 2637799 (57506) 6844757 (77034) 2995839 (50193) 9023856 (6) 448129 (97216) 3467012 (6) 1561208 (6) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	8652.887 9239.968 9968.318 11142.448 11198.121 11341.941 11733.495 11829.182 12290.866 12365.443 12400.143 12786.711 12997.043 13412.748 14261.783 14776.113 16254.774 18342.287 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 137.363s ] *** Query time: 8.269
qps: 1209.350
 *** ivfpq recall 
ivfpq get 58745 postive res from 1000000 results, recall@100:0.059
recall dist(10% per bucket): 0.863 0.137 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
finished ivfpq index examples
[ 137.396s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query_arbi spacev10m 10000000 100 1 /mnt/data/mocheng/dataset/spacev10m/base10M.fvecs /mnt/data/mocheng/dataset/spacev10m/query10k.fvecs /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/attr_sel_2_500_random.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/qrangesel_20_2_500_random_20.json /mnt/data/mocheng/dataset/spacev10m/label/sel_2_500_random/sif_gt_sel_20_2_500_random_20_100.json /mnt/data/mocheng/dataset/spacev10m/ivfpq/index/index_ivfpq_sel_2_500_random_50 10 100"
	User time (seconds): 136.54
	System time (seconds): 0.93
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:17.49
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1329060
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 362663
	Voluntary context switches: 1
	Involuntary context switches: 72
	Swaps: 0
	File system inputs: 0
	File system outputs: 72
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
