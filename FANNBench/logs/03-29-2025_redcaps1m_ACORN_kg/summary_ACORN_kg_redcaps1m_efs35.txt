Start time: 06:30
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64
ef_search: 35 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.152s ] Loaded metadata, 1000000 attr's found
[ 0.152s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.164s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
[ 0.167s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
[ 0.178s ] Loaded ground truth, gt_size: 10
[ 0.178s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999918 nodes
level 1 : 24954 nodes
level 2 : 623 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025512
Average degree per layer:170918.667
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2.452s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 35
selectivity: 1.000
[ 27.964s ] Query results (vector ids, then distances):
query 0 nn's (1250443791): 265404 (1530180402) 49228 (1595605317) 548160 (1606410873) 437670 (1596130852) 800767 (1597551450) 75346 (1564168304) 602879 (1548953318) 813377 (1544571766) 86846 (1500367075) 938509 (1522528411) 
     dis: 	0.771 0.828 0.836 0.858 0.863 0.879 0.898 0.898 0.903 0.904 
query 1 nn's (1609459076): 363220 (1580588215) 253654 (1604521057) 666880 (1555641433) 979250 (1523372340) 728340 (1587919683) 622447 (1532959985) 964028 (1579883899) 199154 (1601707637) 803332 (1530141155) 361663 (1607858914) 
     dis: 	0.092 0.099 0.101 0.101 0.101 0.103 0.106 0.106 0.106 0.106 
query 2 nn's (1250443791): 582384 (1582295732) 467742 (1609207957) 706700 (1606261780) 243553 (1568753382) 354715 (1540167683) 622798 (1556152887) 404702 (1538167950) 229394 (1527006058) 989632 (1570827777) 56081 (1524506922) 
     dis: 	0.396 0.397 0.398 0.398 0.399 0.403 0.403 0.404 0.407 0.409 
query 3 nn's (1609459076): 689368 (1563091635) 889987 (1593644784) 583699 (1511048352) 783586 (1584449301) 907599 (1562830155) 124464 (1588791594) 640717 (1593715105) 905275 (1491272214) 687871 (1584368476) 595884 (1603585196) 
     dis: 	0.403 0.403 0.405 0.409 0.446 0.449 0.455 0.459 0.460 0.462 
query 4 nn's (1250443791): 582698 (1557087889) 522469 (1606475445) 695669 (1587844268) 797013 (1605732191) 234795 (1600891554) 189529 (1600981496) 931553 (1570901224) 598411 (1595872318) 892178 (1586648068) 421184 (1600363229) 
     dis: 	0.260 0.260 0.269 0.273 0.274 0.281 0.284 0.286 0.288 0.289 
[ 27.964s ] *** Query time: 18.450
qps: 542.016
 *** acorn recall 
efs:35
acorn get 75691 postive res from 100000 results, recall@10:0.757
recall dist(10% per bucket): 0.143 0.006 0.008 0.009 0.011 0.019 0.028 0.051 0.097 0.199 0.429 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[27.966s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 17454382
ndis: 0
nreorder: 0
average distance computations per query: 1745.438
[ 27.966s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64 35 512"
	User time (seconds): 25.59
	System time (seconds): 2.62
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:28.22
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3227880
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 862712
	Voluntary context switches: 1
	Involuntary context switches: 97
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:34
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64
ef_search: 35 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.150s ] Loaded metadata, 1000000 attr's found
[ 0.150s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.161s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json
[ 0.164s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json
[ 0.175s ] Loaded ground truth, gt_size: 10
[ 0.175s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999918 nodes
level 1 : 24954 nodes
level 2 : 623 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025512
Average degree per layer:170918.667
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2.519s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 35
selectivity: 0.500
[ 69.490s ] Query results (vector ids, then distances):
query 0 nn's (1540574211): 297407 (1562582134) 75346 (1564168304) 813377 (1544571766) 77303 (1588455303) 422643 (1556978810) 13080 (1541731484) 36195 (1542321827) 317245 (1566794544) 456627 (1576840738) 745043 (1585143585) 
     dis: 	0.772 0.879 0.898 0.913 0.915 0.926 0.926 0.936 0.937 0.939 
query 1 nn's (1590004802): 741325 (1559616195) 666880 (1555641433) 979250 (1523372340) 622447 (1532959985) 803332 (1530141155) 427146 (1514695882) 428754 (1560720094) 110189 (1507487399) 139424 (1535633696) 284310 (1570817806) 
     dis: 	0.100 0.101 0.101 0.103 0.106 0.106 0.107 0.109 0.110 0.112 
query 2 nn's (1502815998): 582384 (1582295732) 243553 (1568753382) 989632 (1570827777) 111196 (1595607052) 654633 (1601080735) 566297 (1596130491) 734045 (1573436974) 763088 (1580442825) 796627 (1580425923) 763137 (1567791948) 
     dis: 	0.396 0.398 0.407 0.409 0.411 0.412 0.412 0.413 0.414 0.415 
query 3 nn's (1574739098): 889987 (1593644784) 783586 (1584449301) 124464 (1588791594) 640717 (1593715105) 687871 (1584368476) 595884 (1603585196) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 456770 (1569878368) 
     dis: 	0.403 0.409 0.449 0.455 0.460 0.462 0.465 0.476 0.496 0.496 
query 4 nn's (1565134124): 582698 (1557087889) 46163 (1552605357) 279888 (1555515184) 700754 (1557101934) 754904 (1532757000) 68136 (1537086660) 556169 (1553542108) 231993 (1563749968) 54130 (1553866600) 60658 (1512331918) 
     dis: 	0.260 0.300 0.303 0.304 0.305 0.306 0.307 0.307 0.308 0.309 
[ 69.490s ] *** Query time: 17.757
qps: 563.151
 *** acorn recall 
efs:35
acorn get 83398 postive res from 100000 results, recall@10:0.834
recall dist(10% per bucket): 0.100 0.005 0.004 0.007 0.009 0.009 0.018 0.033 0.056 0.148 0.611 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[69.491s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 15742716
ndis: 0
nreorder: 0
average distance computations per query: 1574.272
[ 69.491s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_6_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_6_1_100000_real_10.json /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64 35 512"
	User time (seconds): 65.99
	System time (seconds): 3.73
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:09.73
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3226856
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1125861
	Voluntary context switches: 1
	Involuntary context switches: 127
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:39
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64
ef_search: 35 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.144s ] Loaded metadata, 1000000 attr's found
[ 0.144s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.157s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json
[ 0.160s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json
[ 0.172s ] Loaded ground truth, gt_size: 10
[ 0.172s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999918 nodes
level 1 : 24954 nodes
level 2 : 623 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025512
Average degree per layer:170918.667
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2.405s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 35
selectivity: 0.100
[ 54.670s ] Query results (vector ids, then distances):
query 0 nn's (1582001887): 562528 (1586530455) 864174 (1586141206) 363324 (1588150617) 309200 (1583866074) 825029 (1587509747) 318225 (1582255095) 77303 (1588455303) 399187 (1587938124) 553713 (1584927669) 419559 (1588543049) 
     dis: 	0.641 0.743 0.814 0.854 0.888 0.905 0.913 0.920 0.922 0.922 
query 1 nn's (1589499026): 964018 (1566639637) 979295 (1567526425) 848169 (1567967943) 661716 (1569475757) 272839 (1567350368) 743973 (1565255174) 226358 (1565225638) 964128 (1566424023) 925657 (1569885810) 324349 (1565636095) 
     dis: 	0.113 0.115 0.115 0.116 0.119 0.120 0.122 0.122 0.123 0.123 
query 2 nn's (1560999281): 306439 (1575579764) 374226 (1576918189) 435452 (1574701387) 328089 (1574112193) 919763 (1580427352) 882709 (1573089021) 341373 (1582339286) 509068 (1582362871) 812326 (1580129904) 184796 (1580838071) 
     dis: 	0.238 0.263 0.278 0.280 0.284 0.288 0.297 0.300 0.301 0.303 
query 3 nn's (1570293538): 687871 (1584368476) 889856 (1574977953) 306883 (1582504320) 110113 (1584365036) 555783 (1582924247) 879049 (1580410467) 225830 (1582762176) 397607 (1576582831) 800827 (1581281066) 931871 (1577236835) 
     dis: 	0.460 0.465 0.476 0.496 0.517 0.517 0.531 0.533 0.538 0.546 
query 4 nn's (1572763542): 754904 (1532757000) 330129 (1525225883) 969773 (1527858141) 870723 (1530111079) 616623 (1529427583) 262276 (1518198483) 805996 (1530049195) 51681 (1535136336) 309894 (1532146088) 148545 (1518097309) 
     dis: 	0.305 0.325 0.328 0.332 0.332 0.333 0.335 0.335 0.340 0.345 
[ 54.670s ] *** Query time: 13.081
qps: 764.457
 *** acorn recall 
efs:35
acorn get 92469 postive res from 100000 results, recall@10:0.925
recall dist(10% per bucket): 0.040 0.002 0.001 0.001 0.003 0.004 0.008 0.016 0.041 0.125 0.759 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[54.671s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 10734103
ndis: 0
nreorder: 0
average distance computations per query: 1073.410
[ 54.671s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_10_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_10_1_100000_real_10.json /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64 35 512"
	User time (seconds): 52.44
	System time (seconds): 2.37
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:54.82
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3227876
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 817202
	Voluntary context switches: 1
	Involuntary context switches: 59
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:45
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64
ef_search: 35 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.148s ] Loaded metadata, 1000000 attr's found
[ 0.148s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.160s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json
[ 0.163s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json
[ 0.174s ] Loaded ground truth, gt_size: 10
[ 0.174s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999918 nodes
level 1 : 24954 nodes
level 2 : 623 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025512
Average degree per layer:170918.667
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2.437s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 35
selectivity: 0.010
[ 42.636s ] Query results (vector ids, then distances):
query 0 nn's (1538594774): 403179 (1540068939) 832075 (1539306045) 648454 (1539400165) 326131 (1539534545) 82698 (1538940588) 668425 (1539011872) 926428 (1538859340) 118594 (1539257731) 186685 (1539544490) 992479 (1539422762) 
     dis: 	1.003 1.034 1.035 1.036 1.041 1.048 1.062 1.066 1.071 1.071 
query 1 nn's (1540118398): 875872 (1558643715) 927127 (1558717337) 947374 (1558652811) 418500 (1558839857) 286925 (1559180513) 420326 (1559091059) 733452 (1559175588) 464470 (1558400701) 939302 (1558567980) 971334 (1559186451) 
     dis: 	0.577 0.592 0.618 0.626 0.635 0.647 0.669 0.674 0.676 0.678 
query 2 nn's (1558313707): 582384 (1582295732) 463137 (1582497954) 655207 (1581722332) 743948 (1582200368) 213207 (1582318129) 941683 (1581872624) 129396 (1582425867) 170775 (1582409936) 938378 (1581968627) 52527 (1581710552) 
     dis: 	0.396 0.446 0.465 0.467 0.467 0.469 0.473 0.477 0.479 0.480 
query 3 nn's (1559317195): 769868 (1542487532) 493967 (1542294990) 953342 (1542471165) 136421 (1542307684) 175440 (1542245841) 972437 (1541427748) 385496 (1541953821) 762523 (1542714651) 742777 (1541363545) 470469 (1542471828) 
     dis: 	0.474 0.561 0.576 0.594 0.597 0.608 0.611 0.629 0.630 0.634 
query 4 nn's (1581675605): 929991 (1548794594) 843400 (1549019747) 556735 (1548803052) 359872 (1548277437) 924765 (1548418215) 855122 (1548705861) 802461 (1548697185) 62976 (1548022732) 488089 (1548395559) 213717 (1548537413) 
     dis: 	0.317 0.360 0.374 0.377 0.381 0.383 0.391 0.403 0.406 0.406 
[ 42.636s ] *** Query time: 8.443
qps: 1184.466
 *** acorn recall 
efs:35
acorn get 72070 postive res from 100000 results, recall@10:0.721
recall dist(10% per bucket): 0.136 0.017 0.013 0.014 0.019 0.027 0.047 0.070 0.117 0.204 0.337 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[42.637s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 2573170
ndis: 0
nreorder: 0
average distance computations per query: 257.317
[ 42.637s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_19_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_19_1_100000_real_10.json /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64 35 512"
	User time (seconds): 40.38
	System time (seconds): 2.40
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:42.79
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3227880
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 817204
	Voluntary context switches: 1
	Involuntary context switches: 92
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 06:50
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64
ef_search: 35 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.145s ] Loaded metadata, 1000000 attr's found
[ 0.145s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.158s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json
[ 0.161s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json
[ 0.172s ] Loaded ground truth, gt_size: 10
[ 0.172s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999918 nodes
level 1 : 24954 nodes
level 2 : 623 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025512
Average degree per layer:170918.667
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2.487s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 35
selectivity: 0.001
[ 35.499s ] Query results (vector ids, then distances):
query 0 nn's (1538054874): 291056 (1538175426) 739909 (1538073461) 0 (1568768349) 681590 (1538188501) 1 (1587241519) 763582 (1538057631) 22831 (1538198281) 106108 (1538165652) 530354 (1538092692) 956771 (1538147067) 
     dis: 	1.210 1.253 1.253 1.254 1.274 1.279 1.279 1.280 1.301 1.334 
query 1 nn's (1538228285): 947217 (1507065090) 0 (1568768349) 142283 (1507211460) 403732 (1507083745) 482301 (1507017455) 519340 (1506948297) 2 (1603315169) 988562 (1506911852) 1 (1587241519) 810888 (1506981627) 
     dis: 	0.748 0.806 0.818 0.881 0.893 0.910 0.948 0.950 0.965 0.983 
query 2 nn's (1506909292): 0 (1568768349) 2 (1603315169) 1 (1587241519) 361047 (1552613267) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.748 0.865 0.913 1.063 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (1507230692): 0 (1568768349) 1 (1587241519) 837966 (1586965415) 650460 (1586991518) 2 (1603315169) 78632 (1587006878) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	1.025 1.180 1.210 1.316 1.324 1.379 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (1552519107): 1 (1587241519) 0 (1568768349) 2 (1603315169) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	0.784 0.997 1.039 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 35.499s ] *** Query time: 2.282
qps: 4382.303
 *** acorn recall 
efs:35
acorn get 897 postive res from 100000 results, recall@10:0.009
recall dist(10% per bucket): 0.954 0.026 0.008 0.005 0.003 0.002 0.001 0.000 0.000 0.000 0.000 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[35.500s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 88973
ndis: 0
nreorder: 0
average distance computations per query: 8.897
[ 35.500s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_20_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_20_1_100000_real_10.json /mnt/data/mocheng/dataset/redcaps1m/acorn_kg/index/index_acorn_kg_sel_1_100000_real_M40_ga25_Mb64 35 512"
	User time (seconds): 33.24
	System time (seconds): 2.50
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:35.74
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3227880
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 817202
	Voluntary context switches: 1
	Involuntary context switches: 63
	Swaps: 0
	File system inputs: 0
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
