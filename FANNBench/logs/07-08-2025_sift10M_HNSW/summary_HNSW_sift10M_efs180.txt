Start time: 23:26
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 180
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.753s ] Loaded metadata, 10000000 attr's found
[ 0.753s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.756s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.776s ] Loaded 10000 sift10M queries
[ 0.845s ] Loaded ground truth, gt_size: 100
[ 0.845s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 16.135s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 106.205s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2898305 (6) 1167995 (6) 5514922 (6) 2515600 (6) 1160663 (6) 4738758 (6) 6346833 (6) 6984373 (6) 7077742 (6) 9397776 (6) 238649 (6) 5579551 (6) 8191903 (6) 7860530 (6) 1928425 (6) 7866119 (6) 1174332 (6) 9313115 (6) 2375126 (6) 2923944 (6) 8851580 (6) 7164607 (6) 2807602 (6) 9925949 (6) 888010 (6) 6951413 (6) 2115887 (6) 578867 (6) 2078396 (6) 8435256 (6) 2549151 (6) 9251169 (6) 5343331 (6) 4689336 (6) 1892471 (6) 419470 (6) 2481703 (6) 5520369 (6) 5710919 (6) 9409479 (6) 1665852 (6) 6019325 (6) 1297904 (6) 5916323 (6) 2250118 (6) 5341499 (6) 6321391 (6) 1929740 (6) 3879851 (6) 5305337 (6) 4072432 (6) 3022114 (6) 7237592 (6) 9237550 (6) 7912999 (6) 7011791 (6) 2365415 (6) 6328993 (6) 5308027 (6) 5835685 (6) 447965 (6) 2986000 (6) 6527573 (6) 4671898 (6) 5228659 (6) 7455148 (6) 5376243 (6) 3435228 (6) 3670000 (6) 3049131 (6) 6009021 (6) 8983756 (6) 1249067 (6) 4396835 (6) 7220675 (6) 9103413 (6) 6071002 (6) 9839146 (6) 7033151 (6) 1000673 (6) 4532213 (6) 7989030 (6) 8644324 (6) 197299 (6) 8150587 (6) 8052577 (6) 476293 (6) 5356206 (6) 4218358 (6) 3094752 (6) 4698776 (6) 1810730 (6) 8610630 (6) 1858008 (6) 6329451 (6) 2793536 (6) 8446671 (6) 4624202 (6) 7873837 (6) 6392245 (6) 
     dis: 	67180.000 72023.000 72798.000 73465.000 74292.000 74463.000 76136.000 76880.000 76934.000 77424.000 77858.000 78568.000 78749.000 78859.000 79208.000 79448.000 79542.000 79682.000 79929.000 79984.000 80060.000 80358.000 80454.000 80660.000 80692.000 80726.000 80780.000 80841.000 81711.000 81799.000 81827.000 81847.000 81853.000 82232.000 82386.000 82431.000 82457.000 82492.000 82540.000 82688.000 83197.000 83269.000 83349.000 83357.000 83391.000 83435.000 83457.000 83583.000 83717.000 83735.000 84223.000 84253.000 84487.000 84526.000 84734.000 85235.000 85293.000 85322.000 85487.000 85597.000 85625.000 85736.000 85782.000 85847.000 85928.000 85963.000 85985.000 86005.000 86005.000 86023.000 86034.000 86063.000 86100.000 86119.000 86211.000 86265.000 86280.000 86308.000 86333.000 86345.000 86402.000 86458.000 86523.000 86697.000 86702.000 86793.000 86891.000 86902.000 86906.000 86958.000 87100.000 87272.000 87333.000 87358.000 87404.000 87426.000 87510.000 87536.000 87559.000 87576.000 
query 1 nn's (6, 6): 8449497 (6) 5552416 (6) 4234271 (6) 2253711 (6) 1273419 (6) 411491 (6) 1263214 (6) 1233453 (6) 9219153 (6) 469965 (6) 1909131 (6) 9791343 (6) 3309105 (6) 6265610 (6) 522429 (6) 1120308 (6) 8596968 (6) 7917424 (6) 7343838 (6) 7120642 (6) 1745130 (6) 7331745 (6) 2993914 (6) 4702839 (6) 1346170 (6) 5589386 (6) 9015118 (6) 7692715 (6) 5531491 (6) 375999 (6) 6073626 (6) 1843885 (6) 7693023 (6) 9537422 (6) 3631651 (6) 3786289 (6) 1341845 (6) 9167559 (6) 8590082 (6) 7031326 (6) 8175356 (6) 1526669 (6) 3050119 (6) 7342014 (6) 8918460 (6) 895436 (6) 5313986 (6) 1000577 (6) 1503119 (6) 1461697 (6) 8440112 (6) 9577495 (6) 6986308 (6) 4364584 (6) 2652241 (6) 8675363 (6) 2353489 (6) 3744772 (6) 963644 (6) 695127 (6) 2235415 (6) 4009753 (6) 3083636 (6) 7968009 (6) 5423598 (6) 9553578 (6) 2093850 (6) 7859261 (6) 8518091 (6) 6692864 (6) 1932354 (6) 5790422 (6) 6672132 (6) 3740235 (6) 3200275 (6) 3891904 (6) 7513620 (6) 491814 (6) 8155958 (6) 1410399 (6) 7062500 (6) 9388703 (6) 735668 (6) 4960102 (6) 5349437 (6) 5869072 (6) 6383821 (6) 6281612 (6) 8743749 (6) 7512095 (6) 7807906 (6) 298308 (6) 5887328 (6) 1012664 (6) 8857836 (6) 2077396 (6) 4539661 (6) 2307688 (6) 7610510 (6) 3648617 (6) 
     dis: 	32633.000 42944.000 44439.000 45140.000 46522.000 46959.000 47608.000 48662.000 50730.000 50753.000 51310.000 51493.000 51760.000 51836.000 52132.000 52532.000 52768.000 52837.000 54601.000 54684.000 54734.000 54968.000 55326.000 55982.000 56324.000 56410.000 56457.000 56490.000 56591.000 56619.000 57111.000 57411.000 57450.000 57685.000 57719.000 57771.000 57814.000 57926.000 58064.000 58257.000 58298.000 58488.000 58502.000 58531.000 58837.000 59156.000 59169.000 59284.000 59550.000 60324.000 60340.000 60725.000 60913.000 61385.000 61403.000 62084.000 62214.000 62251.000 62305.000 62405.000 62601.000 62791.000 62992.000 63272.000 63282.000 63382.000 63407.000 63431.000 63533.000 63600.000 63792.000 63807.000 63864.000 63956.000 64056.000 64165.000 64180.000 64377.000 64475.000 64505.000 64512.000 64556.000 64597.000 64813.000 64817.000 64890.000 64958.000 65021.000 65073.000 65166.000 65184.000 65450.000 65514.000 65547.000 65552.000 65598.000 65629.000 65748.000 65923.000 66221.000 
query 2 nn's (6, 6): 8667807 (6) 1571863 (6) 237844 (6) 199400 (6) 2304211 (6) 4791170 (6) 6296252 (6) 2795236 (6) 7500565 (6) 9466222 (6) 9416415 (6) 9068473 (6) 9554416 (6) 436139 (6) 4279056 (6) 9410320 (6) 5988705 (6) 4154052 (6) 2448858 (6) 40266 (6) 4757879 (6) 8863268 (6) 8068558 (6) 2994193 (6) 5770225 (6) 3942637 (6) 893390 (6) 8923155 (6) 3832486 (6) 1229611 (6) 2346097 (6) 9362419 (6) 9457112 (6) 4433607 (6) 9559093 (6) 1329974 (6) 4555038 (6) 4048068 (6) 7701746 (6) 4450077 (6) 409456 (6) 419195 (6) 2393824 (6) 8563094 (6) 8590994 (6) 9790465 (6) 3795529 (6) 9330360 (6) 8198272 (6) 6347813 (6) 8915550 (6) 6114289 (6) 1860330 (6) 3967402 (6) 3061201 (6) 3140269 (6) 5563048 (6) 888761 (6) 7508409 (6) 7685482 (6) 8530462 (6) 8070798 (6) 5631784 (6) 1160482 (6) 5596868 (6) 4861540 (6) 8635193 (6) 1463083 (6) 8333106 (6) 3567890 (6) 2723946 (6) 1956474 (6) 4418406 (6) 1625792 (6) 4713533 (6) 445822 (6) 2038327 (6) 247874 (6) 4135242 (6) 764856 (6) 1297680 (6) 9384590 (6) 8064334 (6) 5715023 (6) 8801441 (6) 8075681 (6) 2027436 (6) 8329652 (6) 1561941 (6) 1992904 (6) 752202 (6) 2247452 (6) 8476333 (6) 8690196 (6) 2407252 (6) 1758192 (6) 945107 (6) 5619678 (6) 27015 (6) 5727909 (6) 
     dis: 	47988.000 48528.000 49294.000 49395.000 49692.000 50576.000 51071.000 51181.000 51634.000 51654.000 51724.000 52145.000 52237.000 52554.000 52719.000 52939.000 53001.000 53029.000 53034.000 53080.000 53215.000 53225.000 53350.000 53360.000 53412.000 53664.000 53672.000 54025.000 54273.000 54404.000 54464.000 54496.000 54765.000 54908.000 55005.000 55134.000 55225.000 55277.000 55365.000 55719.000 55753.000 55957.000 55985.000 55995.000 56108.000 56197.000 56262.000 56319.000 56416.000 56449.000 56449.000 56627.000 56884.000 56939.000 56977.000 57016.000 57031.000 57045.000 57099.000 57176.000 57216.000 57245.000 57398.000 57554.000 57613.000 57716.000 57831.000 57848.000 57924.000 58195.000 58328.000 58484.000 58485.000 58508.000 58526.000 58536.000 58701.000 58734.000 58766.000 58933.000 58977.000 59021.000 59109.000 59123.000 59135.000 59158.000 59233.000 59281.000 59320.000 59330.000 59512.000 59600.000 59745.000 59783.000 59815.000 59887.000 59895.000 60058.000 60080.000 60084.000 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 3143192 (6) 3459738 (6) 6411621 (6) 8419826 (6) 727241 (6) 9010353 (6) 8649378 (6) 4998281 (6) 7914184 (6) 1911911 (6) 2218358 (6) 1344917 (6) 1739894 (6) 4246457 (6) 4486659 (6) 6760157 (6) 1514080 (6) 6486623 (6) 692217 (6) 9019201 (6) 7709017 (6) 2630576 (6) 3633444 (6) 9925791 (6) 5755561 (6) 992744 (6) 9354839 (6) 6804450 (6) 9625994 (6) 9517308 (6) 5792548 (6) 7691560 (6) 7749958 (6) 9335193 (6) 1028926 (6) 6317467 (6) 5777538 (6) 5430458 (6) 7119531 (6) 7463079 (6) 7614050 (6) 1502235 (6) 686764 (6) 2236726 (6) 422848 (6) 7865854 (6) 8344580 (6) 936598 (6) 8702151 (6) 9166 (6) 5293699 (6) 578322 (6) 2659564 (6) 6697954 (6) 1133113 (6) 3252978 (6) 840086 (6) 2168780 (6) 6346885 (6) 6281603 (6) 3828353 (6) 9421859 (6) 5651613 (6) 7556732 (6) 82034 (6) 9947826 (6) 9469929 (6) 1229577 (6) 5663020 (6) 9332155 (6) 6306155 (6) 1604878 (6) 5627714 (6) 7745448 (6) 618359 (6) 2842840 (6) 9102009 (6) 4540202 (6) 1874032 (6) 2305251 (6) 4673685 (6) 3118365 (6) 1085693 (6) 7786145 (6) 2009843 (6) 5561400 (6) 6629787 (6) 3566371 (6) 8381527 (6) 3522530 (6) 
     dis: 	3910.000 4343.000 4550.000 4817.000 5013.000 5180.000 5240.000 5279.000 5371.000 5559.000 5653.000 5862.000 5998.000 6096.000 6237.000 6311.000 6468.000 6624.000 6624.000 6655.000 6693.000 6747.000 6845.000 6981.000 7021.000 7029.000 7171.000 7208.000 7226.000 7233.000 7327.000 7486.000 7509.000 7580.000 7587.000 7661.000 7725.000 7797.000 7825.000 7861.000 8040.000 8087.000 8122.000 8123.000 8228.000 8312.000 8322.000 8355.000 8362.000 8404.000 8407.000 8414.000 8491.000 8496.000 8500.000 8579.000 8594.000 8643.000 8809.000 8830.000 8860.000 8885.000 8903.000 8912.000 8946.000 8993.000 9013.000 9100.000 9153.000 9157.000 9207.000 9490.000 9491.000 9526.000 9581.000 9621.000 9695.000 9736.000 9763.000 9813.000 9888.000 9946.000 9965.000 9980.000 9990.000 9997.000 10018.000 10060.000 10063.000 10084.000 10176.000 10216.000 10238.000 10242.000 10249.000 10267.000 10280.000 10281.000 10292.000 10335.000 
query 4 nn's (6, 6): 7241286 (6) 3918536 (6) 3477074 (6) 811272 (6) 7963557 (6) 1751938 (6) 1141817 (6) 4344456 (6) 6388463 (6) 4119530 (6) 3220361 (6) 546979 (6) 6408001 (6) 7423926 (6) 7603300 (6) 9001755 (6) 5708200 (6) 1850409 (6) 8630333 (6) 3637016 (6) 5175563 (6) 1800938 (6) 5709057 (6) 1337546 (6) 5117098 (6) 2173144 (6) 990482 (6) 3842053 (6) 2732612 (6) 4380344 (6) 6838860 (6) 4501065 (6) 8713517 (6) 3650068 (6) 3495449 (6) 9170163 (6) 9836279 (6) 2251576 (6) 4831513 (6) 2989150 (6) 4719865 (6) 9067729 (6) 4128605 (6) 1543122 (6) 4766049 (6) 5707536 (6) 1903346 (6) 7559534 (6) 4158427 (6) 64045 (6) 3647183 (6) 303093 (6) 8229155 (6) 565881 (6) 6699578 (6) 3839204 (6) 1020874 (6) 1375658 (6) 417315 (6) 2283262 (6) 5568433 (6) 6258948 (6) 1466559 (6) 8885018 (6) 149112 (6) 4399052 (6) 5826594 (6) 603409 (6) 8838225 (6) 163735 (6) 8756074 (6) 9973187 (6) 6630737 (6) 2288117 (6) 4982207 (6) 8972367 (6) 4331349 (6) 6658100 (6) 7493856 (6) 1686408 (6) 2454280 (6) 5314473 (6) 3978865 (6) 2617346 (6) 6116720 (6) 5287225 (6) 1784595 (6) 3814747 (6) 9182395 (6) 3882262 (6) 9418375 (6) 1368878 (6) 2430179 (6) 3803911 (6) 797235 (6) 2779329 (6) 7302816 (6) 6754072 (6) 487654 (6) 5641404 (6) 
     dis: 	77624.000 78379.000 80355.000 81973.000 82038.000 84283.000 85933.000 85939.000 86061.000 86120.000 86625.000 86866.000 86935.000 87152.000 87829.000 87905.000 88206.000 88322.000 88437.000 88515.000 88607.000 89079.000 89153.000 89297.000 89682.000 89811.000 90021.000 90358.000 90596.000 90617.000 90822.000 90882.000 91007.000 91009.000 91051.000 91164.000 91244.000 91292.000 91392.000 91566.000 91846.000 92148.000 92212.000 92925.000 93001.000 93074.000 93119.000 93517.000 93603.000 93643.000 93789.000 93920.000 94031.000 94172.000 94180.000 94216.000 94288.000 94418.000 94565.000 94612.000 94664.000 94672.000 94725.000 94730.000 95203.000 95276.000 95431.000 95437.000 95449.000 95492.000 95830.000 96272.000 96446.000 96597.000 96706.000 96804.000 96929.000 96976.000 96986.000 97062.000 97065.000 97247.000 97454.000 97472.000 97494.000 97524.000 97615.000 97638.000 97667.000 97696.000 97741.000 97773.000 97998.000 98148.000 98154.000 98187.000 98200.000 98226.000 98333.000 98399.000 
[ 106.206s ] *** Query time: 33.156
qps: 301.604
 *** HNSW recall 
HNSW get 971545 postive res from 1000000 results, recall@100:0.972
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.035 0.671 0.291 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 97889203, average: 9788.920
finished ivfpq index examples
[ 106.237s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 180 128"
	User time (seconds): 90.01
	System time (seconds): 7.65
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:46.67
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8375280
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 2413654
	Voluntary context switches: 37602
	Involuntary context switches: 165
	Swaps: 0
	File system inputs: 1212744
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:31
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 180
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.697s ] Loaded metadata, 10000000 attr's found
[ 0.697s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.700s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.711s ] Loaded 10000 sift10M queries
[ 0.779s ] Loaded ground truth, gt_size: 100
[ 0.779s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.328s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 117.727s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4160485 (10) 7632021 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 392808 (10) 6002319 (10) 1203246 (10) 8364178 (10) 5368660 (10) 7842689 (10) 5128198 (10) 7263957 (10) 1698351 (10) 4586713 (10) 902148 (10) 1708550 (10) 9584266 (10) 7585271 (10) 4124875 (10) 9082011 (10) 5315711 (10) 8423092 (10) 2051236 (10) 5008601 (10) 3474811 (10) 3390335 (10) 9541713 (10) 5327123 (10) 2702664 (10) 8360507 (10) 7868374 (10) 3072377 (10) 3539433 (10) 1508937 (10) 5306693 (10) 9823129 (10) 8031075 (10) 151474 (10) 4699500 (10) 704919 (10) 7868501 (10) 8843894 (10) 8483563 (10) 6800399 (10) 7135049 (10) 3287109 (10) 3252917 (10) 5500930 (10) 7826129 (10) 3865688 (10) 2048439 (10) 4441695 (10) 5109782 (10) 8746173 (10) 429808 (10) 4910351 (10) 993318 (10) 7258709 (10) 9433071 (10) 1712794 (10) 593325 (10) 8989130 (10) 4483915 (10) 7486828 (10) 678609 (10) 51805 (10) 4107644 (10) 9428046 (10) 7100864 (10) 6052873 (10) 9158543 (10) 2554600 (10) 4481800 (10) 3509825 (10) 3720397 (10) 3445007 (10) 1752009 (10) 8308360 (10) 5455770 (10) 6992352 (10) 9309037 (10) 1213188 (10) 3235354 (10) 4849968 (10) 3373175 (10) 7155655 (10) 4302155 (10) 6609059 (10) 814714 (10) 406534 (10) 5041594 (10) 740641 (10) 4111283 (10) 4887402 (10) 2777973 (10) 9731665 (10) 5124567 (10) 5170662 (10) 
     dis: 	65950.000 75587.000 77145.000 78877.000 82000.000 82438.000 83552.000 83988.000 84353.000 85161.000 85365.000 85925.000 86198.000 86743.000 87049.000 87310.000 87357.000 87415.000 87824.000 87858.000 88190.000 88302.000 88379.000 88743.000 88813.000 88866.000 89105.000 89178.000 89360.000 89388.000 89539.000 89755.000 89923.000 90113.000 90219.000 90535.000 90636.000 90832.000 91152.000 91159.000 91179.000 91428.000 91451.000 91501.000 91774.000 91791.000 91868.000 92098.000 92104.000 92187.000 92364.000 92411.000 92495.000 92534.000 92570.000 92804.000 92859.000 93071.000 93077.000 93335.000 93440.000 93522.000 93971.000 94059.000 94107.000 94227.000 94424.000 94694.000 94698.000 95088.000 95429.000 95469.000 95538.000 95614.000 95738.000 95806.000 95855.000 96008.000 96052.000 96187.000 96370.000 96471.000 96563.000 96648.000 96881.000 96974.000 97069.000 97138.000 97182.000 97242.000 97360.000 97367.000 97393.000 97463.000 97463.000 97549.000 97600.000 97763.000 97823.000 98044.000 
query 1 nn's (10, 10): 4907604 (10) 4922660 (10) 9933148 (10) 8588450 (10) 4689763 (10) 9211699 (10) 3665630 (10) 4512099 (10) 1259657 (10) 9913606 (10) 1887729 (10) 6335574 (10) 9349060 (10) 2234566 (10) 5226515 (10) 482087 (10) 6674672 (10) 8346283 (10) 9643854 (10) 1737968 (10) 7502105 (10) 4821002 (10) 9980694 (10) 8063568 (10) 6618543 (10) 4399493 (10) 3858730 (10) 2021990 (10) 5561330 (10) 6312393 (10) 9285737 (10) 9931915 (10) 5838578 (10) 9164450 (10) 7851813 (10) 2532663 (10) 5707690 (10) 643587 (10) 2070607 (10) 7077341 (10) 8757781 (10) 4365144 (10) 9719889 (10) 4389334 (10) 3335948 (10) 7094836 (10) 1018756 (10) 4178652 (10) 8903515 (10) 9810387 (10) 2949812 (10) 148395 (10) 9964913 (10) 9967397 (10) 5682634 (10) 5632105 (10) 4892821 (10) 2524359 (10) 9258708 (10) 5934521 (10) 8549337 (10) 9275179 (10) 954343 (10) 801963 (10) 1395848 (10) 717773 (10) 4130277 (10) 1111247 (10) 2604205 (10) 3553376 (10) 6132369 (10) 8448472 (10) 8881883 (10) 9820536 (10) 1589644 (10) 7379199 (10) 4546662 (10) 9220661 (10) 3881464 (10) 7546943 (10) 4771033 (10) 8226202 (10) 9849685 (10) 4177090 (10) 1208441 (10) 8603784 (10) 2749783 (10) 3709667 (10) 7843147 (10) 5013067 (10) 4116413 (10) 5234937 (10) 296036 (10) 6755025 (10) 4948712 (10) 4221512 (10) 6742700 (10) 2507742 (10) 9122301 (10) 3501300 (10) 
     dis: 	46066.000 56486.000 57000.000 58633.000 59030.000 59230.000 59901.000 60127.000 60594.000 60931.000 60959.000 62023.000 62069.000 62094.000 62693.000 63173.000 65576.000 65936.000 66298.000 66468.000 66544.000 66583.000 66656.000 67923.000 68018.000 68168.000 68711.000 69141.000 69463.000 69703.000 69780.000 70925.000 71072.000 71233.000 71312.000 71473.000 71509.000 71707.000 71823.000 72328.000 72763.000 72819.000 72863.000 73017.000 73194.000 73295.000 73570.000 73621.000 73710.000 73816.000 73959.000 74323.000 74470.000 74478.000 74500.000 74524.000 74826.000 74847.000 74879.000 74941.000 75408.000 75463.000 75517.000 75800.000 75832.000 75898.000 76030.000 76379.000 76605.000 76694.000 76786.000 76799.000 76837.000 77121.000 77383.000 77617.000 78527.000 78559.000 78885.000 78981.000 79165.000 79443.000 80298.000 80872.000 80989.000 81034.000 81185.000 81201.000 81355.000 81364.000 81397.000 81577.000 81665.000 81731.000 81898.000 81976.000 81998.000 82115.000 82146.000 82150.000 
query 2 nn's (10, 10): 3493381 (10) 5637368 (10) 4457160 (10) 4677344 (10) 2511585 (10) 1198061 (10) 9541874 (10) 5039283 (10) 49352 (10) 944526 (10) 1878319 (10) 4907071 (10) 6120728 (10) 4283746 (10) 8051890 (10) 3667879 (10) 3224964 (10) 2556455 (10) 4848879 (10) 7366864 (10) 8064263 (10) 4112561 (10) 5407857 (10) 5088938 (10) 9375728 (10) 871001 (10) 909313 (10) 3095363 (10) 1897720 (10) 5274336 (10) 3211459 (10) 4167330 (10) 1883447 (10) 9830393 (10) 2660391 (10) 9355645 (10) 1545324 (10) 8131606 (10) 4230661 (10) 9557793 (10) 3327268 (10) 5813545 (10) 7221663 (10) 4042128 (10) 9534509 (10) 9165964 (10) 4188703 (10) 8860131 (10) 9982250 (10) 8084363 (10) 4329845 (10) 2721821 (10) 1545425 (10) 3579460 (10) 419533 (10) 9970439 (10) 1418565 (10) 1025392 (10) 8394381 (10) 206324 (10) 7734472 (10) 932507 (10) 5638422 (10) 1066001 (10) 3689971 (10) 9745256 (10) 6226545 (10) 4817838 (10) 1213154 (10) 4090854 (10) 8366019 (10) 1916939 (10) 3134622 (10) 1806609 (10) 5371863 (10) 7912354 (10) 3574174 (10) 1133891 (10) 9475689 (10) 6070654 (10) 3570008 (10) 7161229 (10) 6501663 (10) 2945338 (10) 3197452 (10) 414710 (10) 6280184 (10) 1767532 (10) 2499456 (10) 8927364 (10) 9255760 (10) 1269865 (10) 1312078 (10) 116058 (10) 3906262 (10) 9767362 (10) 5843586 (10) 328944 (10) 1210416 (10) 9257315 (10) 
     dis: 	51043.000 51405.000 51795.000 52215.000 52611.000 54288.000 54558.000 56504.000 56721.000 57351.000 58055.000 58349.000 58777.000 58925.000 59334.000 60030.000 60035.000 60483.000 60775.000 60895.000 61267.000 61277.000 61472.000 61905.000 61926.000 61978.000 62187.000 62427.000 62513.000 62866.000 62890.000 62974.000 63881.000 63969.000 64048.000 64103.000 64224.000 64299.000 64307.000 64373.000 64853.000 64853.000 64879.000 64963.000 64988.000 64998.000 65374.000 65394.000 65420.000 65606.000 65763.000 65778.000 65944.000 65966.000 66656.000 66904.000 67130.000 67259.000 67754.000 67875.000 67926.000 68223.000 68231.000 68232.000 68269.000 68305.000 68375.000 68377.000 68386.000 68570.000 68668.000 68748.000 68929.000 69026.000 69070.000 69132.000 69162.000 69305.000 69409.000 69430.000 69582.000 69610.000 69924.000 69996.000 70005.000 70037.000 70384.000 70601.000 70719.000 70765.000 70934.000 70962.000 71192.000 71268.000 71354.000 71518.000 71575.000 71599.000 71608.000 71630.000 
query 3 nn's (10, 10): 7269483 (10) 3278687 (10) 8381210 (10) 8051314 (10) 5381241 (10) 179529 (10) 222255 (10) 3421950 (10) 1061321 (10) 3112499 (10) 7216322 (10) 543054 (10) 4995291 (10) 3379947 (10) 7829631 (10) 240857 (10) 5619818 (10) 4189992 (10) 8372623 (10) 9906166 (10) 6711509 (10) 5026118 (10) 6934608 (10) 6447621 (10) 3877232 (10) 1896951 (10) 2464354 (10) 6485893 (10) 7127184 (10) 1656853 (10) 406243 (10) 6776211 (10) 8420002 (10) 7505915 (10) 4759076 (10) 116302 (10) 3855680 (10) 9231939 (10) 5661022 (10) 3485217 (10) 9664797 (10) 5122599 (10) 2648578 (10) 2587214 (10) 9927644 (10) 808011 (10) 6468324 (10) 3649992 (10) 7281219 (10) 5329509 (10) 4593096 (10) 3547401 (10) 9600421 (10) 887194 (10) 4117204 (10) 3719519 (10) 5618980 (10) 3416860 (10) 6993953 (10) 2599501 (10) 4161085 (10) 2139674 (10) 9675475 (10) 8799515 (10) 9407537 (10) 2762309 (10) 1425829 (10) 4319199 (10) 9561196 (10) 657903 (10) 1705936 (10) 5015756 (10) 1916764 (10) 8523280 (10) 5224258 (10) 2065036 (10) 352619 (10) 6144203 (10) 1570115 (10) 7745296 (10) 3309893 (10) 3159877 (10) 2596728 (10) 5087658 (10) 5690647 (10) 597362 (10) 699672 (10) 9692573 (10) 7234124 (10) 6046982 (10) 6452764 (10) 2864799 (10) 5247878 (10) 8333322 (10) 2322794 (10) 4819296 (10) 4323947 (10) 7781833 (10) 9283487 (10) 9562321 (10) 
     dis: 	4894.000 7183.000 7506.000 7644.000 7666.000 7708.000 8395.000 8402.000 8608.000 9075.000 9254.000 9374.000 9382.000 9470.000 9746.000 10000.000 10277.000 10287.000 10420.000 10511.000 10611.000 10652.000 10851.000 11105.000 11135.000 11281.000 11484.000 11521.000 11601.000 11742.000 11828.000 11882.000 11947.000 12021.000 12393.000 12477.000 12659.000 13039.000 13045.000 13072.000 13183.000 13448.000 13603.000 13629.000 13720.000 13760.000 13870.000 13916.000 13928.000 14017.000 14038.000 14106.000 14175.000 14228.000 14306.000 14326.000 14426.000 14474.000 14478.000 14534.000 14680.000 14870.000 15025.000 15083.000 15165.000 15341.000 15357.000 15411.000 15445.000 15489.000 15526.000 15562.000 15605.000 15664.000 15766.000 15778.000 15828.000 15905.000 16012.000 16236.000 16269.000 16469.000 16474.000 16528.000 16629.000 16819.000 16820.000 16836.000 16894.000 16896.000 17103.000 17140.000 17358.000 17384.000 17418.000 17470.000 17538.000 17553.000 17631.000 17688.000 
query 4 nn's (10, 10): 935279 (10) 4150166 (10) 5135489 (10) 2015975 (10) 5466491 (10) 1015238 (10) 484991 (10) 330819 (10) 1162782 (10) 5126636 (10) 8718571 (10) 9398213 (10) 1029172 (10) 3287249 (10) 4618448 (10) 5345863 (10) 8961414 (10) 5807041 (10) 2827238 (10) 8303120 (10) 8178422 (10) 523577 (10) 5574338 (10) 7194509 (10) 3553812 (10) 5013855 (10) 3958825 (10) 1430207 (10) 6415311 (10) 1863408 (10) 3147235 (10) 67796 (10) 9294912 (10) 2916108 (10) 8976035 (10) 1417456 (10) 5739776 (10) 6985534 (10) 6516336 (10) 9114314 (10) 3720874 (10) 9104864 (10) 6432061 (10) 3546857 (10) 4535770 (10) 8082742 (10) 4900336 (10) 5612366 (10) 1911938 (10) 9687221 (10) 7328865 (10) 8915558 (10) 73092 (10) 4638845 (10) 8757921 (10) 699709 (10) 1083442 (10) 4540668 (10) 3357213 (10) 8505570 (10) 2175967 (10) 2510436 (10) 5799065 (10) 4812318 (10) 2469217 (10) 2287348 (10) 600595 (10) 616243 (10) 3628157 (10) 1335451 (10) 2239735 (10) 7590178 (10) 541647 (10) 2467722 (10) 3955594 (10) 448740 (10) 4562455 (10) 4393700 (10) 5418798 (10) 8742544 (10) 8388617 (10) 6518969 (10) 1231024 (10) 2738901 (10) 8945068 (10) 9159103 (10) 5010103 (10) 4906511 (10) 8889299 (10) 830182 (10) 1871772 (10) 3899677 (10) 8401602 (10) 1667598 (10) 9137206 (10) 2831125 (10) 1644395 (10) 1645438 (10) 6365202 (10) 4804320 (10) 
     dis: 	91951.000 92008.000 92149.000 93705.000 95679.000 96147.000 96480.000 97440.000 97821.000 98026.000 98595.000 98607.000 99609.000 100312.000 100750.000 100892.000 101109.000 101139.000 101261.000 101836.000 101922.000 102119.000 102274.000 102295.000 102375.000 102391.000 102640.000 103074.000 103152.000 103283.000 103298.000 103368.000 103732.000 104000.000 104078.000 104284.000 104407.000 104425.000 104476.000 104787.000 104802.000 104837.000 105019.000 105506.000 105547.000 105722.000 105858.000 105915.000 106372.000 106449.000 106576.000 106838.000 106971.000 107108.000 107152.000 107432.000 107581.000 107605.000 107617.000 107680.000 107895.000 108207.000 108239.000 108253.000 108509.000 108611.000 108698.000 108854.000 108888.000 108984.000 109227.000 109273.000 109323.000 109377.000 109417.000 109842.000 110024.000 110445.000 110509.000 111072.000 111098.000 111215.000 111479.000 111494.000 111494.000 111521.000 111593.000 111777.000 111820.000 111900.000 111900.000 111932.000 112082.000 112165.000 112210.000 112324.000 112341.000 112606.000 112651.000 112687.000 
[ 117.728s ] *** Query time: 45.839
qps: 218.155
 *** HNSW recall 
HNSW get 852807 postive res from 1000000 results, recall@100:0.853
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.025 0.154 0.522 0.297 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 97889203, average: 9788.920
finished ivfpq index examples
[ 117.758s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 180 128"
	User time (seconds): 107.52
	System time (seconds): 10.73
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:58.30
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8378276
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3900571
	Voluntary context switches: 4
	Involuntary context switches: 163
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:34
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 180
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.702s ] Loaded metadata, 10000000 attr's found
[ 0.703s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.705s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.716s ] Loaded 10000 sift10M queries
[ 0.784s ] Loaded ground truth, gt_size: 100
[ 0.784s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.380s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 110.216s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 7364551 (19) 8343482 (19) 1124068 (19) 3111983 (19) 5527150 (19) 9252115 (19) 1168165 (19) 5324756 (19) 1426063 (19) 4650380 (19) 4709246 (19) 4168442 (19) 8325692 (19) 307088 (19) 2633237 (19) 2686853 (19) 7995120 (19) 8179893 (19) 6802335 (19) 6429462 (19) 5084022 (19) 9749474 (19) 5662984 (19) 9088748 (19) 8210098 (19) 2607909 (19) 8279864 (19) 8690120 (19) 5210731 (19) 9488077 (19) 7858512 (19) 9513274 (19) 3582382 (19) 4533747 (19) 6839253 (19) 6782542 (19) 5674793 (19) 4627246 (19) 2450425 (19) 4626206 (19) 6945268 (19) 5131905 (19) 7928872 (19) 5831698 (19) 5086120 (19) 7144997 (19) 3848198 (19) 2656181 (19) 1701793 (19) 3339940 (19) 2451562 (19) 4058696 (19) 7478868 (19) 208580 (19) 7305280 (19) 1862040 (19) 5360878 (19) 8463008 (19) 8073632 (19) 2667649 (19) 9152982 (19) 4506482 (19) 5198083 (19) 2393574 (19) 7410499 (19) 6858375 (19) 5895069 (19) 6980158 (19) 1472494 (19) 1293500 (19) 5813916 (19) 4175683 (19) 2323231 (19) 7919885 (19) 724304 (19) 202652 (19) 2815421 (19) 9483378 (19) 1084869 (19) 9333332 (19) 9771125 (19) 1197438 (19) 9658464 (19) 1717676 (19) 2686142 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	72592.000 92597.000 92837.000 93166.000 97778.000 100128.000 100204.000 101328.000 101610.000 101818.000 102899.000 104149.000 106026.000 106295.000 106876.000 107371.000 108641.000 108715.000 109057.000 109146.000 109466.000 109837.000 110267.000 110917.000 111332.000 112775.000 112835.000 112995.000 113592.000 114642.000 114853.000 114998.000 115136.000 115726.000 115842.000 116165.000 116493.000 116813.000 117627.000 117747.000 117762.000 118065.000 118865.000 118980.000 120471.000 121312.000 121342.000 121435.000 121573.000 122534.000 122834.000 122954.000 123279.000 123433.000 124143.000 124387.000 124665.000 125300.000 127908.000 128263.000 129684.000 130809.000 132689.000 132758.000 133358.000 134631.000 136109.000 138862.000 139409.000 140060.000 140329.000 140807.000 141141.000 143258.000 143493.000 143759.000 145719.000 145822.000 146811.000 148588.000 148604.000 154629.000 154679.000 155002.000 165054.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (19, 19): 1345854 (19) 9490922 (19) 6861763 (19) 8889219 (19) 3779157 (19) 1411930 (19) 1594746 (19) 5935793 (19) 7903037 (19) 6068122 (19) 1204854 (19) 9558281 (19) 4136820 (19) 6157672 (19) 3478621 (19) 1917409 (19) 2111946 (19) 9734664 (19) 90305 (19) 8548415 (19) 4924494 (19) 4317184 (19) 1742812 (19) 4814997 (19) 7003404 (19) 132725 (19) 749008 (19) 4566723 (19) 1193556 (19) 8225678 (19) 3971206 (19) 8974279 (19) 479775 (19) 8871287 (19) 3359711 (19) 6637812 (19) 5908680 (19) 1840522 (19) 1655080 (19) 32221 (19) 6216367 (19) 8331956 (19) 7300255 (19) 4298384 (19) 8836092 (19) 5793025 (19) 2146104 (19) 71132 (19) 7533930 (19) 2720534 (19) 1094427 (19) 7133610 (19) 661436 (19) 2953878 (19) 2872183 (19) 1103714 (19) 4379352 (19) 9358670 (19) 4706721 (19) 4196641 (19) 5684410 (19) 8428808 (19) 5052370 (19) 6920668 (19) 9946145 (19) 3223281 (19) 9460309 (19) 8651319 (19) 7438650 (19) 3387590 (19) 3006442 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	63804.000 72753.000 73309.000 73418.000 74946.000 75689.000 76884.000 78445.000 79015.000 79998.000 80356.000 81365.000 83467.000 83926.000 84960.000 86390.000 87305.000 88041.000 88671.000 88841.000 89821.000 90055.000 91384.000 91518.000 91866.000 93086.000 94769.000 94802.000 95455.000 95705.000 97151.000 98073.000 98150.000 98288.000 99045.000 99834.000 100141.000 101010.000 101193.000 101856.000 102275.000 102776.000 103249.000 104695.000 105041.000 105556.000 106736.000 108393.000 109897.000 110227.000 110402.000 111721.000 112200.000 112246.000 113867.000 114775.000 116154.000 116216.000 116864.000 117656.000 119373.000 120223.000 121548.000 128069.000 132281.000 135666.000 138162.000 140221.000 145373.000 145479.000 148940.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (19, 19): 5397690 (19) 283793 (19) 6233731 (19) 5857947 (19) 243867 (19) 7999911 (19) 8220257 (19) 3805324 (19) 5324267 (19) 7357334 (19) 6631052 (19) 8701465 (19) 7241044 (19) 1030206 (19) 2762828 (19) 6909536 (19) 4735060 (19) 5450319 (19) 892172 (19) 2272259 (19) 4772966 (19) 1329864 (19) 6025892 (19) 7588028 (19) 6991612 (19) 1384963 (19) 1092304 (19) 9646764 (19) 33724 (19) 7477849 (19) 1201378 (19) 6507732 (19) 3372007 (19) 799528 (19) 7893012 (19) 7937375 (19) 1930948 (19) 5226020 (19) 6059245 (19) 6054877 (19) 9697477 (19) 6279486 (19) 4310544 (19) 5959415 (19) 6292694 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	61297.000 63549.000 64876.000 67040.000 67049.000 72706.000 73567.000 75707.000 78925.000 79520.000 79558.000 79650.000 81085.000 81470.000 81749.000 82798.000 83270.000 84184.000 84207.000 84894.000 85934.000 87121.000 90359.000 91631.000 92640.000 94750.000 95675.000 96268.000 96314.000 96522.000 97413.000 97555.000 99094.000 100718.000 101292.000 105587.000 106700.000 109748.000 110170.000 115107.000 115988.000 116523.000 121615.000 123571.000 126286.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (19, 19): 6942939 (19) 1326424 (19) 9212218 (19) 9558279 (19) 4557732 (19) 8711902 (19) 5591597 (19) 7251408 (19) 7372833 (19) 3669244 (19) 7723733 (19) 6458284 (19) 9596692 (19) 8076031 (19) 5946655 (19) 1976852 (19) 8531033 (19) 9169614 (19) 66609 (19) 4753321 (19) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	6423.000 8268.000 10863.000 11771.000 13684.000 14062.000 14723.000 14759.000 15416.000 15429.000 16640.000 17228.000 20650.000 28054.000 29962.000 32896.000 32907.000 33478.000 34819.000 34973.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (19, 19): 4901952 (19) 1162961 (19) 1818247 (19) 9839729 (19) 8156875 (19) 7668723 (19) 8178942 (19) 7888972 (19) 1961004 (19) 6428554 (19) 4177092 (19) 773761 (19) 5943750 (19) 1632080 (19) 353162 (19) 1602649 (19) 3265243 (19) 3028631 (19) 7442089 (19) 6338147 (19) 7917769 (19) 177390 (19) 966123 (19) 9115319 (19) 5379967 (19) 1673232 (19) 8325836 (19) 5695419 (19) 643263 (19) 2349694 (19) 909894 (19) 7401772 (19) 8278850 (19) 5053043 (19) 2388487 (19) 6598133 (19) 8632953 (19) 2625537 (19) 3560210 (19) 7431006 (19) 1564048 (19) 7570147 (19) 9138644 (19) 5234245 (19) 2898418 (19) 1792294 (19) 4816259 (19) 8258837 (19) 1858601 (19) 207398 (19) 8315517 (19) 4393 (19) 6965827 (19) 6560556 (19) 9886692 (19) 8034247 (19) 5934873 (19) 9529523 (19) 2717865 (19) 4537160 (19) 3903310 (19) 5738689 (19) 5258196 (19) 5981266 (19) 8587998 (19) 7701761 (19) 8533247 (19) 1149519 (19) 7330395 (19) 2539099 (19) 9666490 (19) 1066779 (19) 5147561 (19) 2872409 (19) 6276492 (19) 4410744 (19) 893897 (19) 9421422 (19) 1012398 (19) 6535962 (19) 4615956 (19) 1209476 (19) 3237132 (19) 6983015 (19) 1798445 (19) 1334765 (19) 9429830 (19) 7987038 (19) 1398884 (19) 1992640 (19) 3640594 (19) 6078723 (19) 3615944 (19) 4569522 (19) 2595823 (19) 9837991 (19) 7665445 (19) 8114368 (19) 9382984 (19) 222499 (19) 
     dis: 	95535.000 99958.000 102380.000 103529.000 109124.000 110034.000 111448.000 113107.000 113416.000 113902.000 114316.000 114842.000 114939.000 114959.000 115556.000 115644.000 115704.000 115773.000 116066.000 116586.000 116777.000 116913.000 117051.000 117659.000 117914.000 118968.000 120123.000 120639.000 120646.000 123316.000 123322.000 123531.000 123681.000 124411.000 124463.000 124795.000 125623.000 125711.000 125762.000 125934.000 126422.000 126529.000 126648.000 127106.000 127430.000 128367.000 128521.000 128877.000 129051.000 129228.000 129547.000 129717.000 129838.000 130592.000 130775.000 131256.000 131317.000 131561.000 132712.000 132720.000 133451.000 133766.000 133780.000 133867.000 134609.000 135303.000 135723.000 136648.000 136756.000 136982.000 137849.000 138542.000 138759.000 139417.000 140220.000 141613.000 142157.000 142331.000 144071.000 144433.000 144483.000 144676.000 144921.000 145149.000 145466.000 145631.000 146542.000 146638.000 146781.000 146947.000 147014.000 148335.000 148467.000 149164.000 149744.000 150131.000 150397.000 150612.000 152466.000 153320.000 
[ 110.216s ] *** Query time: 39.281
qps: 254.573
 *** HNSW recall 
HNSW get 366258 postive res from 1000000 results, recall@100:0.366
recall dist(10% per bucket): 0.000 0.015 0.139 0.493 0.327 0.026 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 97889203, average: 9788.920
finished ivfpq index examples
[ 110.247s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 180 128"
	User time (seconds): 102.67
	System time (seconds): 8.06
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:50.74
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8378280
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3037621
	Voluntary context switches: 3
	Involuntary context switches: 151
	Swaps: 0
	File system inputs: 0
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:38
====================
START: running TEST_HNSW, sift data --

dataset: sift10M
N: 10000000
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000
ef_search: 180
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.706s ] Loaded metadata, 10000000 attr's found
[ 0.706s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.709s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.725s ] Loaded 10000 sift10M queries
[ 0.794s ] Loaded ground truth, gt_size: 100
[ 0.794s ] Index Params -- d: 128, N: 10000000
Total edge:200
Average degree:0.000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 7.480s ] Searching the 100 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 127.215s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 9964582 (20) 8046738 (20) 1479506 (20) 2228963 (20) 4950158 (20) 732282 (20) 824679 (20) 6752466 (20) 1177539 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	100207.000 100421.000 111286.000 119030.000 124600.000 125004.000 128833.000 130881.000 165650.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 1 nn's (20, 20): 586030 (20) 2788374 (20) 3434211 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	82375.000 93796.000 103619.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 2 nn's (20, 20): 8646849 (20) 6674452 (20) 9787209 (20) 6578842 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	68972.000 77529.000 79784.000 102531.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (20, 20): 312537 (20) 9187340 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	12470.000 26560.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 4 nn's (20, 20): 3046582 (20) 7743686 (20) 3809158 (20) 9291196 (20) 9753166 (20) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	117050.000 137272.000 137580.000 144310.000 159876.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
[ 127.215s ] *** Query time: 55.066
qps: 181.601
 *** HNSW recall 
HNSW get 62172 postive res from 1000000 results, recall@100:0.062
recall dist(10% per bucket): 0.866 0.134 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 97889203, average: 9788.920
finished ivfpq index examples
[ 127.246s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query sift10M 10000000 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/sift10m/hnsw/index/index_hnsw_sel_1_500_random_40_1000 180 128"
	User time (seconds): 114.62
	System time (seconds): 13.51
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:08.21
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 8376092
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 4444943
	Voluntary context switches: 4
	Involuntary context switches: 238
	Swaps: 0
	File system inputs: 0
	File system outputs: 64
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
