Start time: 04:07
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.701s ] Loaded metadata, 10000000 attr's found
[ 0.701s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.705s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.706s ] Loaded 10000 sift10M queries
[ 0.713s ] Loaded ground truth, gt_size: 10
[ 0.713s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.247s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 84.959s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2898305 (6) 2515600 (6) 4738758 (6) 7077742 (6) 2923944 (6) 8191903 (6) 1928425 (6) 6984373 (6) 9313115 (6) 238649 (6) 
     dis: 	66765.047 73713.344 74449.000 75033.797 76887.211 76944.016 77713.047 79123.875 79160.625 79288.008 
query 1 nn's (6, 6): 8449497 (6) 1273419 (6) 5552416 (6) 1263214 (6) 4234271 (6) 2253711 (6) 411491 (6) 1233453 (6) 9791343 (6) 9219153 (6) 
     dis: 	34675.906 43367.484 44178.637 45585.180 46459.625 46911.375 46944.781 48208.215 50356.211 50457.156 
query 2 nn's (6, 6): 8667807 (6) 237844 (6) 2304211 (6) 4791170 (6) 9466222 (6) 2448858 (6) 199400 (6) 7500565 (6) 6296252 (6) 5988705 (6) 
     dis: 	47426.219 48618.285 48717.477 49081.809 50569.738 50719.492 50734.125 50812.055 51111.473 51314.062 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 8174765 (6) 3643741 (6) 1985932 (6) 2965607 (6) 7301932 (6) 3143192 (6) 
     dis: 	3992.139 4390.735 4460.316 4869.371 5049.834 5288.036 5306.944 5359.460 5486.950 5496.971 
query 4 nn's (6, 6): 811272 (6) 7963557 (6) 3477074 (6) 1751938 (6) 1141817 (6) 769923 (6) 1850409 (6) 3842053 (6) 3495449 (6) 2251576 (6) 
     dis: 	80326.258 80867.031 81320.172 82020.328 84921.539 85400.797 88166.188 89893.477 90953.297 91794.297 
[ 84.959s ] *** Query time: 20.555
qps: 486.508
 *** ivfpq recall 
ivfpq get 76617 postive res from 100000 results, recall@10:0.766
recall dist(10% per bucket): 0.000 0.001 0.005 0.015 0.033 0.061 0.103 0.160 0.254 0.283 0.085 
finished ivfpq index examples
[ 84.960s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 20 128"
	User time (seconds): 83.01
	System time (seconds): 2.07
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:25.09
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1589160
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 825611
	Voluntary context switches: 3
	Involuntary context switches: 175
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 04:35
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.762s ] Loaded metadata, 10000000 attr's found
[ 0.762s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.766s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.767s ] Loaded 10000 sift10M queries
[ 0.775s ] Loaded ground truth, gt_size: 10
[ 0.775s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.266s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 78.247s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4160485 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 6002319 (10) 2051236 (10) 3474811 (10) 5128198 (10) 7842689 (10) 
     dis: 	65808.273 76505.367 78848.219 81671.602 82992.828 84146.875 85129.227 85938.086 86182.430 86398.547 
query 1 nn's (10, 10): 4907604 (10) 4922660 (10) 9933148 (10) 1887729 (10) 1259657 (10) 4689763 (10) 4512099 (10) 8588450 (10) 9349060 (10) 9211699 (10) 
     dis: 	46325.406 53613.809 58435.215 58771.695 59024.137 59604.867 60561.609 60805.348 60923.992 61137.523 
query 2 nn's (10, 10): 3493381 (10) 5637368 (10) 4457160 (10) 2511585 (10) 1198061 (10) 4677344 (10) 9541874 (10) 5039283 (10) 944526 (10) 4907071 (10) 
     dis: 	50450.598 51124.438 51192.207 52887.113 53682.016 54733.289 55067.973 56066.062 57075.965 57653.559 
query 3 nn's (10, 10): 7269483 (10) 3278687 (10) 8381210 (10) 5381241 (10) 179529 (10) 8051314 (10) 3421950 (10) 1061321 (10) 222255 (10) 3112499 (10) 
     dis: 	4677.812 7108.673 7162.343 7628.874 7642.829 7697.720 8002.963 8458.090 8810.335 9120.275 
query 4 nn's (10, 10): 745843 (10) 9104864 (10) 1430207 (10) 3355354 (10) 330819 (10) 8171628 (10) 9294912 (10) 8976035 (10) 3147235 (10) 4529199 (10) 
     dis: 	96408.789 97511.852 98487.188 100047.930 100189.570 100604.883 101014.234 101238.695 102158.938 102370.266 
[ 78.247s ] *** Query time: 14.537
qps: 687.881
 *** ivfpq recall 
ivfpq get 72839 postive res from 100000 results, recall@10:0.728
recall dist(10% per bucket): 0.001 0.004 0.012 0.025 0.055 0.089 0.126 0.155 0.209 0.239 0.085 
finished ivfpq index examples
[ 78.248s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 20 128"
	User time (seconds): 76.52
	System time (seconds): 1.90
	Percent of CPU this job got: 100%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:18.42
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1587740
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 577809
	Voluntary context switches: 1
	Involuntary context switches: 105
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:08
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.698s ] Loaded metadata, 10000000 attr's found
[ 0.698s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.702s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.703s ] Loaded 10000 sift10M queries
[ 0.710s ] Loaded ground truth, gt_size: 10
[ 0.710s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.156s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 80.830s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 7364551 (19) 4897568 (19) 1124068 (19) 8343482 (19) 117870 (19) 5818286 (19) 9252115 (19) 1426063 (19) 8000565 (19) 3171219 (19) 
     dis: 	73579.352 85006.203 91477.812 92271.867 95413.250 97335.695 99436.320 100563.688 102545.406 106374.438 
query 1 nn's (19, 19): 1345854 (19) 9490922 (19) 6861763 (19) 3779157 (19) 2457409 (19) 7903037 (19) 5935793 (19) 1204854 (19) 9558281 (19) 4136820 (19) 
     dis: 	62152.125 71258.836 72143.648 75227.359 75262.156 78014.953 79580.672 81020.188 82008.164 83046.461 
query 2 nn's (19, 19): 283793 (19) 5857947 (19) 6233731 (19) 243867 (19) 8220257 (19) 342160 (19) 7999911 (19) 1978906 (19) 8000700 (19) 1587666 (19) 
     dis: 	64936.852 65610.477 65918.375 66212.156 72777.039 73270.797 73406.055 74519.117 74846.617 76694.281 
query 3 nn's (19, 19): 6942939 (19) 1326424 (19) 9212218 (19) 9558279 (19) 4557732 (19) 8711902 (19) 7251408 (19) 7372833 (19) 5727279 (19) 3669244 (19) 
     dis: 	6419.419 8112.285 10562.180 11913.137 12836.576 14121.793 14731.592 15050.908 15369.242 15574.154 
query 4 nn's (19, 19): 5815181 (19) 6373153 (19) 6428554 (19) 5292751 (19) 4177092 (19) 1461067 (19) 8622489 (19) 7091775 (19) 207385 (19) 7570147 (19) 
     dis: 	108160.312 110015.305 110288.203 112720.906 114626.195 117951.055 119308.875 121141.367 123040.391 123740.281 
[ 80.830s ] *** Query time: 13.598
qps: 735.409
 *** ivfpq recall 
ivfpq get 61870 postive res from 100000 results, recall@10:0.619
recall dist(10% per bucket): 0.005 0.018 0.047 0.081 0.114 0.132 0.131 0.132 0.132 0.140 0.070 
finished ivfpq index examples
[ 80.831s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 20 128"
	User time (seconds): 78.48
	System time (seconds): 1.68
	Percent of CPU this job got: 98%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:21.00
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1587104
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 525642
	Voluntary context switches: 4486
	Involuntary context switches: 148
	Swaps: 0
	File system inputs: 38256
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 05:38
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.697s ] Loaded metadata, 10000000 attr's found
[ 0.697s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.701s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.702s ] Loaded 10000 sift10M queries
[ 0.710s ] Loaded ground truth, gt_size: 10
[ 0.710s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 2.203s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 73.080s ] Query results (vector ids, then distances):
query 0 nn's (20, 20): 9964582 (20) 8046738 (20) 2983744 (20) 5622893 (20) 7928471 (20) 2100109 (20) 3402555 (20) 6001330 (20) 8844408 (20) 502074 (20) 
     dis: 	100756.328 104279.219 128272.453 138419.078 143272.672 146649.859 150367.969 151635.469 161076.906 167848.375 
query 1 nn's (20, 20): 586030 (20) 2788374 (20) 3337341 (20) 3434211 (20) 4062732 (20) 4737784 (20) 4855691 (20) 2773435 (20) 6312398 (20) 6087997 (20) 
     dis: 	82878.711 90853.562 107578.141 108299.391 112561.922 112815.891 131462.672 132245.219 144345.750 146242.281 
query 2 nn's (20, 20): 8646849 (20) 6674452 (20) 9787209 (20) 6361380 (20) 7322999 (20) 7915163 (20) 496691 (20) 4094588 (20) 7951259 (20) 9221983 (20) 
     dis: 	68024.938 75578.688 76363.094 81142.906 89126.820 103626.914 103848.766 106948.984 108217.750 109928.523 
query 3 nn's (20, 20): 312537 (20) 9187340 (20) 7626212 (20) 4958933 (20) 1216581 (20) 284991 (20) 5187251 (20) 4596264 (20) 9510656 (20) 9246224 (20) 
     dis: 	13073.052 26837.367 27164.697 27184.062 28900.443 29002.840 29824.398 32229.176 33649.250 34859.910 
query 4 nn's (20, 20): 6193655 (20) 850502 (20) 4844799 (20) 4966146 (20) 3972493 (20) 7825259 (20) 3142235 (20) 4371152 (20) 8974624 (20) -1 (0) 
     dis: 	129206.125 140166.078 147900.094 148078.797 154956.656 156010.344 156618.094 163210.344 186911.969 340282346638528859811704183484516925440.000 
[ 73.081s ] *** Query time: 11.690
qps: 855.420
 *** ivfpq recall 
ivfpq get 40881 postive res from 100000 results, recall@10:0.409
recall dist(10% per bucket): 0.035 0.103 0.161 0.171 0.147 0.115 0.090 0.065 0.047 0.044 0.023 
finished ivfpq index examples
[ 73.081s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_64 20 128"
	User time (seconds): 72.06
	System time (seconds): 1.15
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:13.21
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 1587656
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 428085
	Voluntary context switches: 3
	Involuntary context switches: 87
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
