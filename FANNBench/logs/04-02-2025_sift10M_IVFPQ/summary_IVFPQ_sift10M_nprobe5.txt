Start time: 00:46
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 5
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.699s ] Loaded metadata, 10000000 attr's found
[ 0.699s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.701s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.703s ] Loaded 10000 sift10M queries
[ 0.710s ] Loaded ground truth, gt_size: 10
[ 0.710s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.334s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 70.283s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2515600 (6) 4738758 (6) 7468388 (6) 6984373 (6) 7077742 (6) 238649 (6) 5579551 (6) 7866119 (6) 1174332 (6) 9313115 (6) 
     dis: 	73449.156 74348.750 75952.695 76746.344 76941.883 77942.109 78450.969 79491.359 79686.734 80037.016 
query 1 nn's (6, 6): 5552416 (6) 4234271 (6) 2253711 (6) 1263214 (6) 1233453 (6) 6265610 (6) 469965 (6) 9791343 (6) 1909131 (6) 522429 (6) 
     dis: 	43100.453 44425.418 44915.461 47658.812 47980.848 50850.914 50999.262 51140.562 51780.211 52102.305 
query 2 nn's (6, 6): 8667807 (6) 237844 (6) 4791170 (6) 2304211 (6) 6296252 (6) 7500565 (6) 9554416 (6) 9416415 (6) 9466222 (6) 9068473 (6) 
     dis: 	47934.992 49548.199 49830.664 49977.348 51004.824 51401.020 51775.312 51802.625 51875.957 52297.547 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 
     dis: 	3897.663 4317.801 4456.461 4853.428 5025.904 5169.761 5222.189 5265.583 5344.228 5578.374 
query 4 nn's (6, 6): 1751938 (6) 1850409 (6) 3495449 (6) 4719865 (6) 5707536 (6) 2283262 (6) 417315 (6) 8756074 (6) 3882262 (6) 5314473 (6) 
     dis: 	81870.281 86992.992 91356.695 91775.898 92667.188 93803.000 94757.172 95642.953 96147.445 96286.031 
[ 70.283s ] *** Query time: 11.658
qps: 857.762
 *** ivfpq recall 
ivfpq get 57861 postive res from 100000 results, recall@10:0.579
recall dist(10% per bucket): 0.012 0.037 0.077 0.104 0.118 0.120 0.116 0.107 0.101 0.117 0.090 
finished ivfpq index examples
[ 70.284s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 5 128"
	User time (seconds): 68.77
	System time (seconds): 1.68
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:10.47
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3022684
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 769872
	Voluntary context switches: 5
	Involuntary context switches: 169
	Swaps: 0
	File system inputs: 32
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:53
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 5
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.698s ] Loaded metadata, 10000000 attr's found
[ 0.698s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.700s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.702s ] Loaded 10000 sift10M queries
[ 0.709s ] Loaded ground truth, gt_size: 10
[ 0.709s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.360s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 69.372s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2515600 (6) 4738758 (6) 7468388 (6) 6984373 (6) 7077742 (6) 238649 (6) 5579551 (6) 7866119 (6) 1174332 (6) 9313115 (6) 
     dis: 	73449.156 74348.750 75952.695 76746.344 76941.883 77942.109 78450.969 79491.359 79686.734 80037.016 
query 1 nn's (6, 6): 5552416 (6) 4234271 (6) 2253711 (6) 1263214 (6) 1233453 (6) 6265610 (6) 469965 (6) 9791343 (6) 1909131 (6) 522429 (6) 
     dis: 	43100.453 44425.418 44915.461 47658.812 47980.848 50850.914 50999.262 51140.562 51780.211 52102.305 
query 2 nn's (6, 6): 8667807 (6) 237844 (6) 4791170 (6) 2304211 (6) 6296252 (6) 7500565 (6) 9554416 (6) 9416415 (6) 9466222 (6) 9068473 (6) 
     dis: 	47934.992 49548.199 49830.664 49977.348 51004.824 51401.020 51775.312 51802.625 51875.957 52297.547 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 
     dis: 	3897.663 4317.801 4456.461 4853.428 5025.904 5169.761 5222.189 5265.583 5344.228 5578.374 
query 4 nn's (6, 6): 1751938 (6) 1850409 (6) 3495449 (6) 4719865 (6) 5707536 (6) 2283262 (6) 417315 (6) 8756074 (6) 3882262 (6) 5314473 (6) 
     dis: 	81870.281 86992.992 91356.695 91775.898 92667.188 93803.000 94757.172 95642.953 96147.445 96286.031 
[ 69.372s ] *** Query time: 11.361
qps: 880.180
 *** ivfpq recall 
ivfpq get 57861 postive res from 100000 results, recall@10:0.579
recall dist(10% per bucket): 0.012 0.037 0.077 0.104 0.118 0.120 0.116 0.107 0.101 0.117 0.090 
finished ivfpq index examples
[ 69.373s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 5 128"
	User time (seconds): 67.83
	System time (seconds): 1.67
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:09.51
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3023780
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 769812
	Voluntary context switches: 1
	Involuntary context switches: 98
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:57
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 5
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.694s ] Loaded metadata, 10000000 attr's found
[ 0.694s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.697s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.699s ] Loaded 10000 sift10M queries
[ 0.706s ] Loaded ground truth, gt_size: 10
[ 0.706s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.332s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 71.371s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4160485 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 6002319 (10) 5128198 (10) 7842689 (10) 3068799 (10) 4586713 (10) 
     dis: 	65428.875 77239.242 79086.352 81972.562 82700.078 83869.172 85902.492 85914.828 86787.516 87476.859 
query 1 nn's (10, 10): 4907604 (10) 9211699 (10) 4689763 (10) 4512099 (10) 1887729 (10) 5226515 (10) 9349060 (10) 482087 (10) 8346283 (10) 6674672 (10) 
     dis: 	46293.035 58743.719 58779.207 60298.816 60365.566 62000.664 63313.273 64020.641 64823.258 65320.527 
query 2 nn's (10, 10): 3493381 (10) 2511585 (10) 1198061 (10) 49352 (10) 944526 (10) 6120728 (10) 4283746 (10) 3667879 (10) 3224964 (10) 2556455 (10) 
     dis: 	51043.465 52454.711 54648.992 56848.617 57550.910 58812.086 59108.492 60146.195 60371.652 60491.375 
query 3 nn's (10, 10): 7269483 (10) 3278687 (10) 8381210 (10) 8051314 (10) 5381241 (10) 179529 (10) 3421950 (10) 222255 (10) 1061321 (10) 3112499 (10) 
     dis: 	4911.378 7200.982 7472.198 7644.766 7660.587 7678.588 8366.799 8425.704 8583.214 9106.928 
query 4 nn's (10, 10): 330819 (10) 3355354 (10) 1430207 (10) 4243361 (10) 3958825 (10) 3147235 (10) 125408 (10) 3955594 (10) 4393700 (10) 3173319 (10) 
     dis: 	98073.367 100430.406 101926.578 102014.938 102363.562 103446.172 105833.336 108697.969 109107.320 109479.586 
[ 71.371s ] *** Query time: 9.948
qps: 1005.213
 *** ivfpq recall 
ivfpq get 50402 postive res from 100000 results, recall@10:0.504
recall dist(10% per bucket): 0.023 0.063 0.111 0.133 0.135 0.119 0.112 0.089 0.072 0.076 0.066 
finished ivfpq index examples
[ 71.372s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 5 128"
	User time (seconds): 69.84
	System time (seconds): 1.66
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:11.51
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3023780
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 769816
	Voluntary context switches: 1
	Involuntary context switches: 126
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
