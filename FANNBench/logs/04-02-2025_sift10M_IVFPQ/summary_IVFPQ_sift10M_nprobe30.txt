Start time: 00:46
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.700s ] Loaded metadata, 10000000 attr's found
[ 0.700s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.703s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.704s ] Loaded 10000 sift10M queries
[ 0.711s ] Loaded ground truth, gt_size: 10
[ 0.711s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.364s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 89.692s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2898305 (6) 2515600 (6) 1160663 (6) 4738758 (6) 7468388 (6) 6984373 (6) 7077742 (6) 9397776 (6) 238649 (6) 5579551 (6) 
     dis: 	67116.023 73449.156 74111.375 74348.750 75952.695 76746.344 76941.883 77219.781 77942.109 78450.969 
query 1 nn's (6, 6): 8449497 (6) 5552416 (6) 4234271 (6) 2253711 (6) 411491 (6) 1273419 (6) 1263214 (6) 1233453 (6) 6265610 (6) 469965 (6) 
     dis: 	32372.914 43100.453 44425.418 44915.461 46702.566 47133.055 47658.812 47980.848 50850.914 50999.262 
query 2 nn's (6, 6): 8667807 (6) 1571863 (6) 199400 (6) 237844 (6) 4791170 (6) 2304211 (6) 6296252 (6) 2795236 (6) 7500565 (6) 9554416 (6) 
     dis: 	47934.992 48450.156 49445.160 49548.199 49830.664 49977.348 51004.824 51264.723 51401.020 51775.312 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 
     dis: 	3897.663 4317.801 4456.461 4853.428 5025.904 5169.761 5222.189 5265.583 5344.228 5578.374 
query 4 nn's (6, 6): 3477074 (6) 7963557 (6) 811272 (6) 1751938 (6) 769923 (6) 1850409 (6) 1141817 (6) 3637016 (6) 2251576 (6) 3842053 (6) 
     dis: 	80359.188 80872.070 81270.344 81870.281 85538.203 86992.992 87092.539 87948.305 89870.484 91069.352 
[ 89.692s ] *** Query time: 30.621
qps: 326.568
 *** ivfpq recall 
ivfpq get 86129 postive res from 100000 results, recall@10:0.861
recall dist(10% per bucket): 0.000 0.000 0.001 0.005 0.014 0.029 0.052 0.095 0.151 0.320 0.333 
finished ivfpq index examples
[ 89.693s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 30 128"
	User time (seconds): 88.10
	System time (seconds): 1.72
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:29.83
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3023780
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 769809
	Voluntary context switches: 1
	Involuntary context switches: 129
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:53
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.694s ] Loaded metadata, 10000000 attr's found
[ 0.694s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.697s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.698s ] Loaded 10000 sift10M queries
[ 0.705s ] Loaded ground truth, gt_size: 10
[ 0.705s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.354s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 93.457s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2898305 (6) 2515600 (6) 1160663 (6) 4738758 (6) 7468388 (6) 6984373 (6) 7077742 (6) 9397776 (6) 238649 (6) 5579551 (6) 
     dis: 	67116.023 73449.156 74111.375 74348.750 75952.695 76746.344 76941.883 77219.781 77942.109 78450.969 
query 1 nn's (6, 6): 8449497 (6) 5552416 (6) 4234271 (6) 2253711 (6) 411491 (6) 1273419 (6) 1263214 (6) 1233453 (6) 6265610 (6) 469965 (6) 
     dis: 	32372.914 43100.453 44425.418 44915.461 46702.566 47133.055 47658.812 47980.848 50850.914 50999.262 
query 2 nn's (6, 6): 8667807 (6) 1571863 (6) 199400 (6) 237844 (6) 4791170 (6) 2304211 (6) 6296252 (6) 2795236 (6) 7500565 (6) 9554416 (6) 
     dis: 	47934.992 48450.156 49445.160 49548.199 49830.664 49977.348 51004.824 51264.723 51401.020 51775.312 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 
     dis: 	3897.663 4317.801 4456.461 4853.428 5025.904 5169.761 5222.189 5265.583 5344.228 5578.374 
query 4 nn's (6, 6): 3477074 (6) 7963557 (6) 811272 (6) 1751938 (6) 769923 (6) 1850409 (6) 1141817 (6) 3637016 (6) 2251576 (6) 3842053 (6) 
     dis: 	80359.188 80872.070 81270.344 81870.281 85538.203 86992.992 87092.539 87948.305 89870.484 91069.352 
[ 93.457s ] *** Query time: 32.606
qps: 306.692
 *** ivfpq recall 
ivfpq get 86129 postive res from 100000 results, recall@10:0.861
recall dist(10% per bucket): 0.000 0.000 0.001 0.005 0.014 0.029 0.052 0.095 0.151 0.320 0.333 
finished ivfpq index examples
[ 93.457s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 30 128"
	User time (seconds): 91.85
	System time (seconds): 1.73
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:33.59
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3022452
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 850019
	Voluntary context switches: 4
	Involuntary context switches: 214
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:57
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.694s ] Loaded metadata, 10000000 attr's found
[ 0.694s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.696s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.698s ] Loaded 10000 sift10M queries
[ 0.705s ] Loaded ground truth, gt_size: 10
[ 0.705s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.336s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 80.461s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4160485 (10) 7632021 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 6002319 (10) 1203246 (10) 5128198 (10) 7842689 (10) 
     dis: 	65428.875 75950.320 77239.242 79086.352 81972.562 82700.078 83869.172 84580.023 85902.492 85914.828 
query 1 nn's (10, 10): 4907604 (10) 4922660 (10) 9933148 (10) 8588450 (10) 9211699 (10) 4689763 (10) 3665630 (10) 4512099 (10) 1887729 (10) 9913606 (10) 
     dis: 	46293.035 56065.488 57388.648 58460.043 58743.719 58779.207 59812.598 60298.816 60365.566 61005.836 
query 2 nn's (10, 10): 3493381 (10) 5637368 (10) 4677344 (10) 4457160 (10) 2511585 (10) 9541874 (10) 1198061 (10) 5039283 (10) 49352 (10) 944526 (10) 
     dis: 	51043.465 51784.574 52030.211 52062.633 52454.711 54646.922 54648.992 56130.137 56848.617 57550.910 
query 3 nn's (10, 10): 7269483 (10) 3278687 (10) 8381210 (10) 8051314 (10) 5381241 (10) 179529 (10) 3421950 (10) 222255 (10) 1061321 (10) 3112499 (10) 
     dis: 	4911.378 7200.982 7472.198 7644.766 7660.587 7678.588 8366.799 8425.704 8583.214 9106.928 
query 4 nn's (10, 10): 5126636 (10) 330819 (10) 745843 (10) 9398213 (10) 8171628 (10) 2827238 (10) 3355354 (10) 5807041 (10) 1430207 (10) 4243361 (10) 
     dis: 	97813.484 98073.367 98600.281 99721.305 100360.531 100425.906 100430.406 101392.320 101926.578 102014.938 
[ 80.461s ] *** Query time: 19.227
qps: 520.099
 *** ivfpq recall 
ivfpq get 81742 postive res from 100000 results, recall@10:0.817
recall dist(10% per bucket): 0.000 0.001 0.004 0.013 0.027 0.053 0.085 0.113 0.164 0.261 0.280 
finished ivfpq index examples
[ 80.461s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 30 128"
	User time (seconds): 78.90
	System time (seconds): 1.69
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:20.60
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3023784
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 769811
	Voluntary context switches: 1
	Involuntary context switches: 64
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
