Start time: 00:53
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.698s ] Loaded metadata, 10000000 attr's found
[ 0.698s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.700s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.702s ] Loaded 10000 sift10M queries
[ 0.709s ] Loaded ground truth, gt_size: 10
[ 0.709s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.374s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.500
[ 140.403s ] Query results (vector ids, then distances):
query 0 nn's (6, 6): 2898305 (6) 1167995 (6) 5514922 (6) 2515600 (6) 1160663 (6) 4738758 (6) 7468388 (6) 6984373 (6) 7077742 (6) 9397776 (6) 
     dis: 	67116.023 71811.133 73047.516 73449.156 74111.375 74348.750 75952.695 76746.344 76941.883 77219.781 
query 1 nn's (6, 6): 8449497 (6) 5552416 (6) 4234271 (6) 2253711 (6) 411491 (6) 1273419 (6) 1263214 (6) 1233453 (6) 6265610 (6) 469965 (6) 
     dis: 	32372.914 43100.453 44425.418 44915.461 46702.566 47133.055 47658.812 47980.848 50850.914 50999.262 
query 2 nn's (6, 6): 8667807 (6) 1571863 (6) 199400 (6) 237844 (6) 4791170 (6) 2304211 (6) 6296252 (6) 2795236 (6) 7500565 (6) 9554416 (6) 
     dis: 	47934.992 48450.156 49445.160 49548.199 49830.664 49977.348 51004.824 51264.723 51401.020 51775.312 
query 3 nn's (6, 6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 
     dis: 	3897.663 4317.801 4456.461 4853.428 5025.904 5169.761 5222.189 5265.583 5344.228 5578.374 
query 4 nn's (6, 6): 3477074 (6) 7963557 (6) 811272 (6) 1751938 (6) 769923 (6) 6408001 (6) 1850409 (6) 1141817 (6) 7603300 (6) 8630333 (6) 
     dis: 	80359.188 80872.070 81270.344 81870.281 85538.203 86517.805 86992.992 87092.539 87554.211 87796.148 
[ 140.403s ] *** Query time: 82.066
qps: 121.853
 *** ivfpq recall 
ivfpq get 93758 postive res from 100000 results, recall@10:0.938
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.002 0.005 0.018 0.075 0.384 0.514 
finished ivfpq index examples
[ 140.404s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 100 128"
	User time (seconds): 138.75
	System time (seconds): 1.77
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 2:20.53
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3023780
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 770842
	Voluntary context switches: 1
	Involuntary context switches: 202
	Swaps: 0
	File system inputs: 0
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 00:57
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128
nprobe: 100
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 0.698s ] Loaded metadata, 10000000 attr's found
[ 0.698s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.700s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.702s ] Loaded 10000 sift10M queries
[ 0.709s ] Loaded ground truth, gt_size: 10
[ 0.709s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.335s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.100
[ 102.910s ] Query results (vector ids, then distances):
query 0 nn's (10, 10): 4160485 (10) 7632021 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 392808 (10) 6002319 (10) 1203246 (10) 8771139 (10) 
     dis: 	65428.875 75950.320 77239.242 79086.352 81972.562 82700.078 83118.430 83869.172 84580.023 85290.016 
query 1 nn's (10, 10): 4907604 (10) 4922660 (10) 9933148 (10) 8588450 (10) 9211699 (10) 4689763 (10) 3665630 (10) 4512099 (10) 1887729 (10) 9913606 (10) 
     dis: 	46293.035 56065.488 57388.648 58460.043 58743.719 58779.207 59812.598 60298.816 60365.566 61005.836 
query 2 nn's (10, 10): 3493381 (10) 5637368 (10) 4677344 (10) 4457160 (10) 2511585 (10) 9541874 (10) 1198061 (10) 5039283 (10) 49352 (10) 944526 (10) 
     dis: 	51043.465 51784.574 52030.211 52062.633 52454.711 54646.922 54648.992 56130.137 56848.617 57550.910 
query 3 nn's (10, 10): 7269483 (10) 3278687 (10) 8381210 (10) 8051314 (10) 5381241 (10) 179529 (10) 3421950 (10) 222255 (10) 1061321 (10) 3112499 (10) 
     dis: 	4911.378 7200.982 7472.198 7644.766 7660.587 7678.588 8366.799 8425.704 8583.214 9106.928 
query 4 nn's (10, 10): 5135489 (10) 4962535 (10) 5466491 (10) 484991 (10) 5126636 (10) 330819 (10) 745843 (10) 7508102 (10) 1029172 (10) 9398213 (10) 
     dis: 	92270.656 93113.172 95368.227 96212.797 97813.484 98073.367 98600.281 98642.320 99385.992 99721.305 
[ 102.910s ] *** Query time: 42.398
qps: 235.858
 *** ivfpq recall 
ivfpq get 92524 postive res from 100000 results, recall@10:0.925
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.001 0.004 0.012 0.034 0.101 0.363 0.484 
finished ivfpq index examples
[ 102.910s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_500_random_128 100 128"
	User time (seconds): 101.38
	System time (seconds): 1.66
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:43.06
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3023780
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 770322
	Voluntary context switches: 1
	Involuntary context switches: 243
	Swaps: 0
	File system inputs: 0
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
