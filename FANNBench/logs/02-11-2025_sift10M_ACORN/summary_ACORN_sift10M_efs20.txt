Start time: 10:01
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.223s ] Loaded metadata, 10000000 attr's found
[ 1.223s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.226s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
[ 1.228s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
[ 1.239s ] Loaded ground truth, gt_size: 10
[ 1.239s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.74 (867443801)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824510956)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959832)
   3. nb of reciprocal neighbors: 101.32
   4. nb of neighbors that are also neighbor-of-neighbors: 967.27 (241779756)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 937.33 (5822688)
   3. nb of reciprocal neighbors: 670.04
   4. nb of neighbors that are also neighbor-of-neighbors: 936.86 (5819766)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.58 (18421)
   3. nb of reciprocal neighbors: 129.71
   4. nb of neighbors that are also neighbor-of-neighbors: 131.07 (18350)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999555 nodes
	level 1: 249955 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2643.360s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.002
[ 3008.353s ] Query results (vector ids, then distances):
query 0 nn's (73960): 1623122 (74029) 6017101 (74015) 7480712 (74116) 9099679 (74080) 2517965 (74145) 5237678 (74036) 8297477 (74086) 4180978 (73992) 1979798 (74001) 3731032 (74052) 
     dis: 	94590.000 107872.000 111680.000 111898.000 115636.000 116468.000 117675.000 119373.000 121998.000 122602.000 
query 1 nn's (74159): 1918457 (45769) 8464812 (45885) 8267508 (45932) 9769447 (45883) 4196900 (45894) 2117666 (45818) 2654562 (45735) 4861889 (45900) 1219815 (45738) 6953535 (45855) 
     dis: 	98180.000 101174.000 107256.000 110976.000 111852.000 112181.000 113069.000 115907.000 116926.000 119449.000 
query 2 nn's (45733): 3841753 (46235) 451060 (46258) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	177991.000 182681.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (45932): 141541 (22146) 2816410 (22006) 7742226 (22129) 3706841 (22161) 6200116 (22128) 980938 (22006) 7334752 (22022) 6215462 (22054) 2560695 (22092) 468992 (22059) 
     dis: 	74835.000 84258.000 86615.000 86937.000 87201.000 87501.000 87793.000 87941.000 89603.000 92772.000 
query 4 nn's (46226): 5631902 (89204) 7080136 (89321) 7005664 (89231) 8407653 (89266) 2189848 (89237) 5320611 (89222) 7138566 (89238) 3185410 (89292) 7364575 (89369) 7610283 (89378) 
     dis: 	103589.000 112189.000 125203.000 127551.000 127895.000 130026.000 130512.000 131588.000 134216.000 141097.000 
[ 3008.353s ] *** Query time: 6.942
qps: 1440.530
 *** acorn recall 
efs:20
acorn get 7217 postive res from 100000 results, recall@10:0.072
recall dist(10% per bucket): 0.693 0.128 0.072 0.043 0.029 0.017 0.009 0.006 0.002 0.001 0.000 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3013.124s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 540185
ndis: 0
nreorder: 0
average distance computations per query: 54.019
[ 3013.124s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 128"
	User time (seconds): 2930.97
	System time (seconds): 71.51
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 50:14.47
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114638524
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 24
	Minor (reclaiming a frame) page faults: 29524517
	Voluntary context switches: 44943
	Involuntary context switches: 1654
	Swaps: 0
	File system inputs: 365728
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 12:03
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.268s ] Loaded metadata, 10000000 attr's found
[ 1.268s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.271s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
[ 1.273s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
[ 1.285s ] Loaded ground truth, gt_size: 10
[ 1.285s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.74 (867443801)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824510956)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959832)
   3. nb of reciprocal neighbors: 101.32
   4. nb of neighbors that are also neighbor-of-neighbors: 967.27 (241779756)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 937.33 (5822688)
   3. nb of reciprocal neighbors: 670.04
   4. nb of neighbors that are also neighbor-of-neighbors: 936.86 (5819766)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.58 (18421)
   3. nb of reciprocal neighbors: 129.71
   4. nb of neighbors that are also neighbor-of-neighbors: 131.07 (18350)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999555 nodes
	level 1: 249955 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2673.399s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.003
[ 3075.339s ] Query results (vector ids, then distances):
query 0 nn's (64204): 5343331 (64452) 2279313 (64469) 6678280 (64349) 8396289 (64236) 6932692 (64385) 8757634 (64290) 1795545 (64332) 5342956 (64324) 96425 (64374) 8746453 (64408) 
     dis: 	81853.000 98553.000 106234.000 116815.000 121761.000 124838.000 126252.000 127471.000 128140.000 129626.000 
query 1 nn's (64503): 3716291 (7710) 3996839 (7694) 7577481 (7676) 8499244 (7681) 3909984 (7619) 2780695 (7631) 5907695 (7756) 9025729 (7883) 731305 (7865) 5345487 (7835) 
     dis: 	74379.000 75371.000 82264.000 85032.000 85324.000 91976.000 94195.000 94645.000 96744.000 98683.000 
query 2 nn's (7601): 5608334 (4514) 2740077 (4631) 9673528 (4688) 3121518 (4506) 1665012 (4480) 5260210 (4542) 4036958 (4706) 3816019 (4581) 1085642 (4498) 4922966 (4593) 
     dis: 	82091.000 83123.000 87327.000 90532.000 90656.000 98442.000 99149.000 101452.000 101955.000 104545.000 
query 3 nn's (7900): 7749958 (3697) 3313486 (3800) 8273818 (3640) 223125 (3825) 474990 (3826) 1971205 (3750) 5785797 (3685) 9605211 (3918) 1684945 (3821) 2237592 (3681) 
     dis: 	8122.000 19021.000 20384.000 32901.000 33944.000 34198.000 36482.000 41530.000 42514.000 43196.000 
query 4 nn's (4420): 5622590 (72732) 9352392 (72825) 7531150 (72780) 6893670 (72783) 4574095 (72596) 7855345 (72796) 5232002 (72726) 3211578 (72645) 9385280 (72592) 5747171 (72698) 
     dis: 	132102.000 133559.000 135924.000 136919.000 141542.000 143042.000 149600.000 151334.000 154258.000 157192.000 
[ 3075.339s ] *** Query time: 45.268
qps: 220.909
 *** acorn recall 
efs:20
acorn get 17624 postive res from 100000 results, recall@10:0.176
recall dist(10% per bucket): 0.432 0.151 0.123 0.094 0.070 0.053 0.031 0.024 0.012 0.006 0.003 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3081.593s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 863339
ndis: 0
nreorder: 0
average distance computations per query: 86.334
[ 3081.593s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 128"
	User time (seconds): 2952.65
	System time (seconds): 120.20
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 51:23.31
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114642616
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 10
	Minor (reclaiming a frame) page faults: 40136180
	Voluntary context switches: 45105
	Involuntary context switches: 1210
	Swaps: 0
	File system inputs: 445472
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 14:05
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.246s ] Loaded metadata, 10000000 attr's found
[ 1.246s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.249s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
[ 1.251s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
[ 1.263s ] Loaded ground truth, gt_size: 10
[ 1.263s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.74 (867443801)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824510956)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959832)
   3. nb of reciprocal neighbors: 101.32
   4. nb of neighbors that are also neighbor-of-neighbors: 967.27 (241779756)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 937.33 (5822688)
   3. nb of reciprocal neighbors: 670.04
   4. nb of neighbors that are also neighbor-of-neighbors: 936.86 (5819766)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.58 (18421)
   3. nb of reciprocal neighbors: 129.71
   4. nb of neighbors that are also neighbor-of-neighbors: 131.07 (18350)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999555 nodes
	level 1: 249955 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2664.152s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.004
[ 3027.780s ] Query results (vector ids, then distances):
query 0 nn's (2310): 9823129 (2499) 1604819 (2475) 5826792 (2456) 1813619 (2534) 4660189 (2480) 7979924 (2436) 1766853 (2504) 1424359 (2351) 526306 (2330) 2396016 (2414) 
     dis: 	90832.000 101413.000 102086.000 102284.000 107106.000 108816.000 110846.000 112752.000 116130.000 117117.000 
query 1 nn's (2709): 8199976 (23719) 5046775 (23698) 3846925 (23986) 5565805 (23697) 1981148 (23778) 3361823 (23690) 9503415 (23901) 3871579 (23859) 8382908 (23712) 6251495 (24047) 
     dis: 	86753.000 88931.000 89885.000 99215.000 102014.000 102369.000 106410.000 109876.000 112908.000 113570.000 
query 2 nn's (23653): 3923235 (64295) 5546020 (64134) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) -1 (0) 
     dis: 	177517.000 179379.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 340282346638528859811704183484516925440.000 
query 3 nn's (24052): 213183 (90452) 175842 (90517) 7343697 (90441) 6978698 (90471) 5633938 (90387) 6299251 (90468) 7187982 (90266) 4608053 (90242) 5035150 (90478) 5368058 (90387) 
     dis: 	51023.000 53431.000 55454.000 56624.000 57577.000 58003.000 58913.000 61298.000 61472.000 61802.000 
query 4 nn's (64025): 9353798 (42619) 340641 (42390) 3309263 (42323) 7569563 (42644) 5698837 (42593) 4931016 (42430) 3084778 (42418) 1881664 (42421) 7973563 (42537) 6493663 (42624) 
     dis: 	100266.000 116214.000 116344.000 117749.000 122574.000 125681.000 135527.000 136168.000 137823.000 138933.000 
[ 3027.780s ] *** Query time: 7.051
qps: 1418.241
 *** acorn recall 
efs:20
acorn get 26919 postive res from 100000 results, recall@10:0.269
recall dist(10% per bucket): 0.284 0.137 0.125 0.113 0.094 0.081 0.061 0.049 0.031 0.018 0.006 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3032.848s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 1162719
ndis: 0
nreorder: 0
average distance computations per query: 116.272
[ 3032.848s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 128"
	User time (seconds): 2955.02
	System time (seconds): 68.59
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 50:34.29
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114639548
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3
	Minor (reclaiming a frame) page faults: 29361913
	Voluntary context switches: 48490
	Involuntary context switches: 1518
	Swaps: 0
	File system inputs: 1114176
	File system outputs: 56
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 16:04
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.241s ] Loaded metadata, 10000000 attr's found
[ 1.241s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.244s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
[ 1.246s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
[ 1.257s ] Loaded ground truth, gt_size: 10
[ 1.257s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.74 (867443801)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824510956)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959832)
   3. nb of reciprocal neighbors: 101.32
   4. nb of neighbors that are also neighbor-of-neighbors: 967.27 (241779756)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 937.33 (5822688)
   3. nb of reciprocal neighbors: 670.04
   4. nb of neighbors that are also neighbor-of-neighbors: 936.86 (5819766)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.58 (18421)
   3. nb of reciprocal neighbors: 129.71
   4. nb of neighbors that are also neighbor-of-neighbors: 131.07 (18350)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999555 nodes
	level 1: 249955 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2684.851s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.005
[ 3059.134s ] Query results (vector ids, then distances):
query 0 nn's (23240): 5931273 (23547) 2914049 (23337) 1181915 (23724) 7921155 (23276) 5267988 (23635) 5098369 (23529) 4402304 (23727) 7092525 (23300) 8260789 (23437) 4525739 (23572) 
     dis: 	106088.000 109733.000 121187.000 121273.000 124594.000 124899.000 126771.000 126851.000 128592.000 130970.000 
query 1 nn's (23739): 8857836 (86643) 2077396 (86724) 7523342 (87042) 6363708 (86935) 4321977 (86855) 1116609 (86888) 9131855 (87082) 5234937 (86897) 9277159 (86799) 9306961 (87108) 
     dis: 	65552.000 65598.000 69035.000 70710.000 74235.000 75355.000 77123.000 81577.000 90057.000 91655.000 
query 2 nn's (86638): 475996 (3749) 5811821 (3999) 6309645 (3978) 1789904 (3829) 6926892 (3666) 7033512 (4024) 9812384 (3852) 1529687 (4070) 9738565 (4045) 5610418 (4071) 
     dis: 	73083.000 75820.000 79897.000 86664.000 87597.000 92567.000 92845.000 93276.000 93842.000 99895.000 
query 3 nn's (87137): 1546501 (87412) 4603042 (87483) 3400268 (87855) 2840670 (87808) 6952428 (87688) 7180493 (87520) 8740473 (87848) 342350 (87743) 720219 (87476) 6323378 (87580) 
     dis: 	56813.000 58601.000 59695.000 60812.000 61713.000 63687.000 67483.000 68684.000 71243.000 72658.000 
query 4 nn's (3598): 9123370 (77558) 8165661 (77613) 897069 (77483) 9317347 (77172) 6895571 (77227) 110998 (77344) 927218 (77483) 7929058 (77124) 9649031 (77458) 2242166 (77245) 
     dis: 	121509.000 124643.000 128867.000 131326.000 134346.000 134559.000 136399.000 137178.000 140911.000 141113.000 
[ 3059.135s ] *** Query time: 10.986
qps: 910.224
 *** acorn recall 
efs:20
acorn get 34970 postive res from 100000 results, recall@10:0.350
recall dist(10% per bucket): 0.195 0.108 0.114 0.115 0.111 0.101 0.087 0.068 0.054 0.033 0.014 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3064.550s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 1453057
ndis: 0
nreorder: 0
average distance computations per query: 145.306
[ 3064.550s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 128"
	User time (seconds): 2960.85
	System time (seconds): 94.85
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 51:06.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114641596
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 6
	Minor (reclaiming a frame) page faults: 30074059
	Voluntary context switches: 46687
	Involuntary context switches: 1621
	Swaps: 0
	File system inputs: 1531456
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 18:01
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64
ef_search: 20 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 1.239s ] Loaded metadata, 10000000 attr's found
[ 1.239s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.242s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
[ 1.244s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
[ 1.256s ] Loaded ground truth, gt_size: 10
[ 1.256s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
========= METADATA =======
	* cumulative max num neighbors per level
		indx 0: 0
		indx 1: 124
		indx 2: 1124
		indx 3: 2124
		indx 4: 3124
		indx 5: 4124
	* level probabilities
		level 0: 0.975000
		level 1: 0.024375
		level 2: 0.000609
		level 3: 0.000015
		level 4: 0.000000
		level 5: 0.000000
	* efConstruction: 1000
	* efSearch: 16
	* max_level: 4
	* entry_point: 1940918
	* gamma: 25
========= LEVEL STATS OF ACORN =======
========= LEVEL 0 =======
* stats on level 0, max 124 neighbors per vertex:
   1. nb of nodes: 10000000
   2. neighbors per node: 86.74 (867443801)
   3. nb of reciprocal neighbors: 61.08
   4. nb of neighbors that are also neighbor-of-neighbors: 82.45 (824510956)
========= LEVEL 1 =======
* stats on level 1, max 1000 neighbors per vertex:
   1. nb of nodes: 249960
   2. neighbors per node: 1000.00 (249959832)
   3. nb of reciprocal neighbors: 101.32
   4. nb of neighbors that are also neighbor-of-neighbors: 967.27 (241779756)
========= LEVEL 2 =======
* stats on level 2, max 1000 neighbors per vertex:
   1. nb of nodes: 6212
   2. neighbors per node: 937.33 (5822688)
   3. nb of reciprocal neighbors: 670.04
   4. nb of neighbors that are also neighbor-of-neighbors: 936.86 (5819766)
========= LEVEL 3 =======
* stats on level 3, max 1000 neighbors per vertex:
   1. nb of nodes: 140
   2. neighbors per node: 131.58 (18421)
   3. nb of reciprocal neighbors: 129.71
   4. nb of neighbors that are also neighbor-of-neighbors: 131.07 (18350)
========= LEVEL 4 =======
* stats on level 4, max 1000 neighbors per vertex:
   1. nb of nodes: 3
   2. neighbors per node: 2.00 (6)
   3. nb of reciprocal neighbors: 2.00
   4. nb of neighbors that are also neighbor-of-neighbors: 2.00 (6)
METADATA VEC for number nodes per level
	level 0: 9999555 nodes
	level 1: 249955 nodes
	level 2: 6212 nodes
	level 3: 140 nodes
	level 4: 3 nodes
	level 5: 0 nodes
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 2652.167s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 20
selectivity: 0.006
[ 3023.503s ] Query results (vector ids, then distances):
query 0 nn's (53561): 9934561 (53675) 5014849 (54135) 8997084 (53636) 6032352 (53613) 6515178 (53796) 4705079 (53583) 2313923 (54134) 7556171 (53930) 5728626 (53806) 4874266 (53969) 
     dis: 	99218.000 99975.000 102557.000 106273.000 107075.000 113693.000 114300.000 114368.000 115354.000 115782.000 
query 1 nn's (54160): 1346170 (8078) 9643506 (8041) 7572692 (7996) 3716291 (7710) 3996839 (7694) 8500402 (7579) 3423010 (7592) 7577481 (7676) 8499244 (7681) 3909984 (7619) 
     dis: 	56324.000 61991.000 74068.000 74379.000 75371.000 78635.000 79844.000 82264.000 85032.000 85324.000 
query 2 nn's (7537): 6757010 (32419) 1883447 (32456) 6005722 (32578) 8415105 (32282) 2414928 (32539) 3423038 (32405) 1819941 (32058) 6434536 (32500) 940456 (32376) 3418955 (32145) 
     dis: 	61808.000 63881.000 63923.000 67665.000 67775.000 73349.000 75819.000 75900.000 77952.000 79082.000 
query 3 nn's (8136): 3278687 (20238) 9166 (20530) 1391991 (20268) 5109723 (20631) 8386530 (20268) 430134 (20429) 2515467 (20181) 6365231 (20234) 8513887 (20167) 7943427 (20144) 
     dis: 	7183.000 8830.000 9540.000 11444.000 11509.000 12043.000 12594.000 13919.000 14041.000 16358.000 
query 4 nn's (31990): 139002 (25306) 4913897 (25124) 2289309 (25219) 9751956 (25634) 3162364 (25499) 95039 (25443) 6283691 (25369) 3534629 (25193) 7386943 (25108) 7042914 (25600) 
     dis: 	106444.000 112554.000 113992.000 114945.000 116867.000 117096.000 121520.000 124548.000 126381.000 126649.000 
[ 3023.503s ] *** Query time: 11.378
qps: 878.927
 *** acorn recall 
efs:20
acorn get 41430 postive res from 100000 results, recall@10:0.414
recall dist(10% per bucket): 0.138 0.091 0.101 0.108 0.112 0.112 0.100 0.090 0.070 0.051 0.027 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[3029.485s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 1730824
ndis: 0
nreorder: 0
average distance computations per query: 173.082
[ 3029.485s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_100000_random_M40_ga25_Mb64 20 128"
	User time (seconds): 2946.14
	System time (seconds): 74.28
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 50:31.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 114634128
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 7
	Minor (reclaiming a frame) page faults: 32552024
	Voluntary context switches: 46408
	Involuntary context switches: 2828
	Swaps: 0
	File system inputs: 363280
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
