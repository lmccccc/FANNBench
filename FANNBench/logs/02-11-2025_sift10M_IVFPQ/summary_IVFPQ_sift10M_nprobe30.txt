Start time: 08:50
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.755s ] Loaded metadata, 10000000 attr's found
[ 0.755s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.759s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.761s ] Loaded 10000 sift10M queries
[ 0.769s ] Loaded ground truth, gt_size: 10
[ 0.769s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.122s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 335.979s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1160663 (44937) 1609860 (44874) 4441746 (44893) 6005033 (44913) 2306496 (44877) 8395367 (44860) 6764458 (44853) 1540250 (44867) 3941607 (44878) 4206912 (44936) 
     dis: 	75556.305 97008.188 106296.328 108526.430 115186.977 116282.938 119570.359 121713.781 122534.031 123339.344 
query 1 nn's (42821, 42920): 7957648 (42897) 4754171 (42830) 8453351 (42853) 635661 (42825) 1565098 (42885) 4062412 (42832) 5498897 (42903) 7656223 (42884) 2836390 (42856) 9358255 (42832) 
     dis: 	79052.188 83041.031 83365.820 86400.406 95684.234 96631.344 102863.227 104212.023 109987.062 111671.242 
query 2 nn's (13165, 13264): 2858053 (13240) 4306175 (13182) 3494307 (13167) 342160 (13197) 5121329 (13223) 3380755 (13173) 1686475 (13254) 170142 (13196) 5928403 (13190) 5807375 (13227) 
     dis: 	63256.391 67902.477 71318.297 73270.797 74135.984 75420.125 83987.391 85253.641 86087.234 89011.789 
query 3 nn's (25839, 25938): 6617844 (25931) 7567068 (25855) 5530477 (25921) 8283506 (25901) 7342247 (25846) 4541290 (25878) 3153441 (25841) 7666009 (25916) 7055827 (25927) 8659845 (25920) 
     dis: 	19603.658 22925.961 23946.332 24287.768 28235.391 29161.186 30447.195 31988.111 32118.246 36972.586 
query 4 nn's (45629, 45728): 1253413 (45668) 2160380 (45685) 3124161 (45639) 625529 (45723) 619740 (45674) 2098355 (45685) 2719743 (45724) 8354165 (45727) 2912699 (45657) 54831 (45652) 
     dis: 	100167.023 100617.773 117605.562 123188.547 125916.766 127504.055 129150.914 137648.172 140219.344 140653.406 
[ 335.979s ] *** Query time: 17.926
qps: 557.848
 *** ivfpq recall 
ivfpq get 48978 postive res from 100000 results, recall@10:0.490
recall dist(10% per bucket): 0.013 0.059 0.107 0.146 0.158 0.140 0.114 0.081 0.070 0.072 0.039 
finished ivfpq index examples
[ 335.981s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 30 128"
	User time (seconds): 325.41
	System time (seconds): 10.35
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:36.53
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 6149028
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 3668954
	Voluntary context switches: 2467
	Involuntary context switches: 476
	Swaps: 0
	File system inputs: 201080
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:05
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.238s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.002
[ 340.222s ] Query results (vector ids, then distances):
query 0 nn's (73960, 74159): 285279 (74145) 4876982 (74106) 4190650 (73972) 7812315 (73982) 1346541 (73991) 7480712 (74116) 4180978 (73992) 7554357 (73991) 8760523 (74005) 7948650 (73971) 
     dis: 	105518.867 106762.883 107467.281 110338.625 111373.281 112296.500 118094.125 121165.555 121582.406 122901.219 
query 1 nn's (45733, 45932): 8903290 (45830) 2405583 (45770) 1918457 (45769) 5652951 (45826) 6516659 (45828) 8464812 (45885) 7367195 (45852) 2654562 (45735) 6377169 (45770) 7468215 (45920) 
     dis: 	90078.719 93509.578 98620.062 99169.023 99632.047 102915.375 107656.844 109549.617 110018.320 114011.383 
query 2 nn's (46226, 46425): 5600190 (46325) 3137576 (46266) 5676428 (46359) 1243245 (46241) 4710184 (46391) 6544069 (46288) 4894745 (46340) 8083552 (46305) 9735743 (46390) 5485686 (46366) 
     dis: 	73427.289 75415.023 76342.281 76996.273 78909.141 79147.984 80724.258 81490.602 85358.023 85563.695 
query 3 nn's (21965, 22164): 692217 (22063) 495406 (21968) 7582882 (22036) 655440 (22126) 4571800 (22027) 2363372 (22144) 2766287 (22065) 4735943 (22056) 5016542 (22162) 9166072 (22002) 
     dis: 	7241.440 12962.973 13433.543 20088.988 21186.316 22333.633 25843.758 26303.115 26353.078 27129.969 
query 4 nn's (89198, 89397): 6670051 (89335) 2438379 (89219) 5373158 (89347) 5372147 (89310) 7364575 (89369) 8512149 (89314) 4277113 (89370) 1774580 (89302) 5249455 (89225) 2188905 (89362) 
     dis: 	118605.953 121815.109 126086.102 130695.617 130945.219 131711.406 135207.062 135998.781 136897.031 138656.906 
[ 340.222s ] *** Query time: 17.031
qps: 587.157
 *** ivfpq recall 
ivfpq get 56497 postive res from 100000 results, recall@10:0.565
recall dist(10% per bucket): 0.006 0.032 0.069 0.106 0.136 0.144 0.133 0.111 0.099 0.103 0.060 
finished ivfpq index examples
[ 340.224s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 30 128"
	User time (seconds): 332.92
	System time (seconds): 7.31
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:41.13
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 10729384
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3097168
	Voluntary context switches: 2630
	Involuntary context switches: 517
	Swaps: 0
	File system inputs: 84240
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 13:12
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.723s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.352s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.003
[ 356.540s ] Query results (vector ids, then distances):
query 0 nn's (64204, 64503): 5343331 (64452) 7081355 (64427) 1638165 (64278) 6056467 (64355) 2587829 (64258) 6124488 (64233) 6117914 (64291) 7673048 (64497) 1988196 (64471) 8652290 (64376) 
     dis: 	81300.031 96500.375 97086.789 97577.211 98688.289 100637.305 101901.500 106116.672 107280.609 107596.547 
query 1 nn's (7601, 7900): 3716291 (7710) 3996839 (7694) 6389334 (7761) 2740853 (7832) 7577481 (7676) 8499244 (7681) 3909984 (7619) 8935792 (7869) 731305 (7865) 9025729 (7883) 
     dis: 	72893.359 77353.594 78358.867 82586.828 83558.273 84795.969 86073.859 87757.953 95744.227 98112.281 
query 2 nn's (4420, 4719): 8635193 (4483) 9141083 (4718) 9830393 (4584) 33367 (4653) 8509795 (4438) 4770809 (4663) 7912354 (4692) 2077 (4463) 3713232 (4558) 5456620 (4654) 
     dis: 	58162.898 62894.246 64011.281 66130.391 66983.188 69120.898 69391.562 69435.938 80294.734 81035.641 
query 3 nn's (3638, 3937): 7749958 (3697) 4463664 (3711) 5078017 (3684) 5185015 (3869) 3313486 (3800) 8273818 (3640) 9198105 (3818) 2114046 (3654) 6473618 (3899) 4683847 (3793) 
     dis: 	8180.301 11275.979 17207.352 18161.715 18473.164 21013.635 21204.385 21628.385 24361.906 25030.525 
query 4 nn's (72580, 72879): 6307989 (72827) 1506376 (72768) 5596028 (72610) 6284140 (72837) 2817153 (72740) 3659884 (72860) 3408823 (72716) 9558272 (72740) 9221696 (72844) 2499306 (72850) 
     dis: 	115081.945 116598.922 118429.922 121489.664 121673.648 126020.656 129518.297 130985.797 132202.203 133553.953 
[ 356.540s ] *** Query time: 24.772
qps: 403.688
 *** ivfpq recall 
ivfpq get 60298 postive res from 100000 results, recall@10:0.603
recall dist(10% per bucket): 0.003 0.021 0.053 0.088 0.122 0.137 0.140 0.125 0.116 0.129 0.066 
finished ivfpq index examples
[ 356.542s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 30 128"
	User time (seconds): 345.18
	System time (seconds): 11.48
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:57.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 15518628
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4855945
	Voluntary context switches: 2938
	Involuntary context switches: 555
	Swaps: 0
	File system inputs: 45880
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 15:12
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.771s ] Loaded metadata, 10000000 attr's found
[ 0.771s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.775s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.777s ] Loaded 10000 sift10M queries
[ 0.785s ] Loaded ground truth, gt_size: 10
[ 0.785s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.150s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.004
[ 366.803s ] Query results (vector ids, then distances):
query 0 nn's (2310, 2709): 578867 (2476) 9823129 (2499) 1813619 (2534) 3920237 (2407) 844119 (2420) 9391342 (2314) 5847210 (2467) 7332850 (2505) 1665806 (2639) 3824340 (2510) 
     dis: 	81624.977 89762.109 99917.367 101815.188 104132.211 106184.781 111935.336 115821.594 115984.844 117601.812 
query 1 nn's (23653, 24052): 5254261 (23886) 4135481 (23704) 2249685 (23891) 6140132 (23883) 7856921 (23715) 8199976 (23719) 6469885 (23686) 5046775 (23698) 2404579 (23765) 3846925 (23986) 
     dis: 	64338.465 78660.297 79340.938 79641.562 80327.711 85581.578 88337.453 88541.305 89077.219 90664.328 
query 2 nn's (64025, 64424): 2540958 (64117) 7454296 (64256) 6152369 (64329) 146605 (64307) 9730627 (64084) 3605368 (64227) 4119313 (64239) 2767273 (64304) 300585 (64354) 4219551 (64235) 
     dis: 	63032.777 63551.184 68607.648 73075.391 74896.805 75800.945 81121.406 82166.062 82471.055 82981.383 
query 3 nn's (90236, 90635): 7119531 (90378) 936598 (90457) 3670440 (90255) 1423490 (90542) 2618692 (90370) 8237128 (90475) 7380858 (90455) 2127060 (90509) 6876513 (90555) 3925323 (90440) 
     dis: 	7965.099 8999.791 12942.800 14449.464 14924.795 17558.072 18662.824 20047.322 21418.115 21780.988 
query 4 nn's (42274, 42673): 5257851 (42550) 3309263 (42323) 340641 (42390) 1560188 (42476) 4623256 (42366) 1135787 (42543) 4849656 (42597) 4378743 (42543) 794358 (42582) 8920430 (42358) 
     dis: 	95210.969 111584.805 114645.352 115339.023 118422.656 120413.828 122629.742 127573.648 127848.828 130238.594 
[ 366.803s ] *** Query time: 26.077
qps: 383.480
 *** ivfpq recall 
ivfpq get 62488 postive res from 100000 results, recall@10:0.625
recall dist(10% per bucket): 0.003 0.016 0.043 0.075 0.110 0.132 0.143 0.131 0.136 0.142 0.068 
finished ivfpq index examples
[ 366.804s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 30 128"
	User time (seconds): 355.79
	System time (seconds): 11.70
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:08.21
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 19923868
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 4995488
	Voluntary context switches: 3302
	Involuntary context switches: 482
	Swaps: 0
	File system inputs: 198152
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 17:11
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.147s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.005
[ 392.523s ] Query results (vector ids, then distances):
query 0 nn's (23240, 23739): 7011791 (23273) 8031075 (23431) 2785966 (23295) 4838491 (23518) 1205342 (23379) 6025385 (23339) 5891506 (23614) 2914049 (23337) 6649951 (23709) 6461943 (23665) 
     dis: 	83768.516 90957.234 91002.984 99271.336 104184.094 104711.016 104925.766 110192.922 110514.406 112295.344 
query 1 nn's (86638, 87137): 2077396 (86724) 6363708 (86935) 7523342 (87042) 8857836 (86643) 4321977 (86855) 9594077 (86656) 9131855 (87082) 5847833 (86661) 1116609 (86888) 5234937 (86897) 
     dis: 	66819.242 68251.469 68460.359 69291.875 73926.375 74890.766 75051.328 75582.453 75979.859 77215.805 
query 2 nn's (3598, 4097): 8068558 (3605) 2953864 (3859) 2800256 (3943) 4972668 (3695) 1213154 (3674) 2526681 (3938) 3873191 (3795) 4192813 (3845) 475996 (3749) 122085 (3670) 
     dis: 	53144.305 56321.547 61454.125 64263.496 65095.047 69749.836 71226.133 72575.273 73051.703 73502.227 
query 3 nn's (87372, 87871): 7301436 (87758) 4673685 (87740) 8081932 (87465) 4104595 (87586) 9803556 (87542) 6782262 (87444) 5255438 (87585) 1952217 (87397) 771303 (87436) 7070340 (87603) 
     dis: 	7828.301 10169.544 13947.492 14391.271 15662.123 16116.723 16907.008 16956.869 17757.598 18009.082 
query 4 nn's (77119, 77618): 2288117 (77366) 5045349 (77581) 8562010 (77147) 9123370 (77558) 6561885 (77127) 7352961 (77371) 7041673 (77564) 390046 (77536) 2572286 (77580) 7362076 (77614) 
     dis: 	99963.688 112233.562 115888.766 118797.281 121171.453 123958.203 124915.359 126855.797 126865.859 130577.445 
[ 392.523s ] *** Query time: 36.111
qps: 276.927
 *** ivfpq recall 
ivfpq get 64006 postive res from 100000 results, recall@10:0.640
recall dist(10% per bucket): 0.002 0.012 0.038 0.070 0.106 0.133 0.135 0.136 0.142 0.152 0.076 
finished ivfpq index examples
[ 392.524s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 30 128"
	User time (seconds): 378.24
	System time (seconds): 15.31
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:34.38
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 26423208
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 4
	Minor (reclaiming a frame) page faults: 6809037
	Voluntary context switches: 3145
	Involuntary context switches: 933
	Swaps: 0
	File system inputs: 87840
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:11
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 30
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.302s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.006
[ 407.275s ] Query results (vector ids, then distances):
query 0 nn's (53561, 54160): 9409479 (53603) 3366295 (53986) 4056305 (53810) 2828720 (53831) 1973354 (53983) 8997084 (53636) 821089 (53839) 9527257 (53884) 8761315 (53570) 9959552 (53859) 
     dis: 	82767.234 88503.148 92929.625 99491.367 99808.727 103206.719 103593.719 104767.039 106774.562 107369.469 
query 1 nn's (7537, 8136): 1346170 (8078) 9643506 (8041) 4646465 (8091) 3716291 (7710) 7572692 (7996) 8500402 (7579) 3996839 (7694) 6389334 (7761) 3423010 (7592) 2740853 (7832) 
     dis: 	58092.207 61333.223 72791.062 72893.359 72976.766 73766.672 77353.594 78358.867 80212.578 82586.828 
query 2 nn's (31990, 32589): 6757010 (32419) 6304098 (32083) 6005722 (32578) 2414928 (32539) 8415105 (32282) 4278769 (32271) 2284580 (32263) 1819941 (32058) 940456 (32376) 4928841 (32457) 
     dis: 	62986.469 63961.812 64105.938 67479.164 67879.633 68692.211 71865.336 76631.734 77860.031 79198.281 
query 3 nn's (20105, 20704): 3278687 (20238) 9166 (20530) 1391991 (20268) 5109723 (20631) 8386530 (20268) 430134 (20429) 2515467 (20181) 8513887 (20167) 6365231 (20234) 7943427 (20144) 
     dis: 	7108.673 8687.346 9959.333 11700.639 11832.954 12024.459 12662.167 13756.239 14010.317 17235.955 
query 4 nn's (25090, 25689): 6145854 (25319) 139002 (25306) 3162364 (25499) 2325088 (25145) 2675739 (25411) 3288853 (25644) 2017014 (25168) 827018 (25362) 28144 (25433) 461139 (25103) 
     dis: 	105587.211 105878.812 110263.359 110435.172 113008.992 113721.250 113884.906 117296.484 119356.094 119863.453 
[ 407.275s ] *** Query time: 40.494
qps: 246.951
 *** ivfpq recall 
ivfpq get 65728 postive res from 100000 results, recall@10:0.657
recall dist(10% per bucket): 0.002 0.011 0.030 0.063 0.096 0.125 0.133 0.141 0.155 0.160 0.084 
finished ivfpq index examples
[ 407.276s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 30 128"
	User time (seconds): 390.95
	System time (seconds): 17.39
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:49.39
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 29550500
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 7402049
	Voluntary context switches: 2520
	Involuntary context switches: 898
	Swaps: 0
	File system inputs: 102352
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
