Start time: 08:50
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.721s ] Loaded metadata, 10000000 attr's found
[ 0.722s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.725s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.726s ] Loaded 10000 sift10M queries
[ 0.734s ] Loaded ground truth, gt_size: 10
[ 0.734s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.120s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
[ 343.403s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1160663 (44937) 593325 (44939) 1609860 (44874) 4441746 (44893) 6005033 (44913) 4414639 (44852) 7091829 (44878) 2306496 (44877) 8395367 (44860) 6764458 (44853) 
     dis: 	75556.305 94182.789 97008.188 106296.328 108526.430 111288.844 113364.328 115186.977 116282.938 119570.359 
query 1 nn's (42821, 42920): 7957648 (42897) 4754171 (42830) 8453351 (42853) 635661 (42825) 1565098 (42885) 4062412 (42832) 5498897 (42903) 7656223 (42884) 2836390 (42856) 9358255 (42832) 
     dis: 	79052.188 83041.031 83365.820 86400.406 95684.234 96631.344 102863.227 104212.023 109987.062 111671.242 
query 2 nn's (13165, 13264): 2858053 (13240) 4306175 (13182) 8500702 (13178) 3494307 (13167) 342160 (13197) 5121329 (13223) 3380755 (13173) 4587441 (13187) 4852920 (13261) 1686475 (13254) 
     dis: 	63256.391 67902.477 69723.273 71318.297 73270.797 74135.984 75420.125 81897.375 82509.922 83987.391 
query 3 nn's (25839, 25938): 6617844 (25931) 7567068 (25855) 5530477 (25921) 8283506 (25901) 7342247 (25846) 4541290 (25878) 3153441 (25841) 7666009 (25916) 7055827 (25927) 8659845 (25920) 
     dis: 	19603.658 22925.961 23946.332 24287.768 28235.391 29161.186 30447.195 31988.111 32118.246 36972.586 
query 4 nn's (45629, 45728): 1253413 (45668) 2160380 (45685) 5720716 (45669) 3124161 (45639) 625529 (45723) 619740 (45674) 2098355 (45685) 3779417 (45727) 2719743 (45724) 4408469 (45720) 
     dis: 	100167.023 100617.773 114931.453 117605.562 123188.547 125916.766 127504.055 128735.328 129150.914 132398.688 
[ 343.404s ] *** Query time: 25.924
qps: 385.750
 *** ivfpq recall 
ivfpq get 68473 postive res from 100000 results, recall@10:0.685
recall dist(10% per bucket): 0.001 0.006 0.020 0.045 0.084 0.119 0.143 0.157 0.153 0.169 0.103 
finished ivfpq index examples
[ 343.405s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 80 128"
	User time (seconds): 333.60
	System time (seconds): 9.50
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:43.96
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 6146980
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 3401909
	Voluntary context switches: 2503
	Involuntary context switches: 926
	Swaps: 0
	File system inputs: 107048
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:05
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.723s ] Loaded metadata, 10000000 attr's found
[ 0.723s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.726s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.728s ] Loaded 10000 sift10M queries
[ 0.735s ] Loaded ground truth, gt_size: 10
[ 0.735s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.271s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.002
[ 346.562s ] Query results (vector ids, then distances):
query 0 nn's (73960, 74159): 1623122 (74029) 285279 (74145) 4876982 (74106) 4881180 (74088) 6649809 (74056) 4190650 (73972) 7812315 (73982) 9099679 (74080) 1346541 (73991) 358362 (74026) 
     dis: 	96187.656 105518.867 106762.883 107216.617 107358.969 107467.281 110338.625 111354.930 111373.281 112203.055 
query 1 nn's (45733, 45932): 8903290 (45830) 7421974 (45803) 2405583 (45770) 1918457 (45769) 5652951 (45826) 6516659 (45828) 8464812 (45885) 9597155 (45886) 8267508 (45932) 7367195 (45852) 
     dis: 	90078.719 92245.828 93509.578 98620.062 99169.023 99632.047 102915.375 105046.680 107268.188 107656.844 
query 2 nn's (46226, 46425): 5600190 (46325) 3307667 (46235) 3137576 (46266) 7828936 (46299) 5676428 (46359) 1243245 (46241) 5178578 (46296) 4710184 (46391) 6544069 (46288) 4894745 (46340) 
     dis: 	73427.289 74642.125 75415.023 75756.781 76342.281 76996.273 78309.594 78909.141 79147.984 80724.258 
query 3 nn's (21965, 22164): 692217 (22063) 495406 (21968) 7582882 (22036) 655440 (22126) 4571800 (22027) 2363372 (22144) 2766287 (22065) 4735943 (22056) 5016542 (22162) 9166072 (22002) 
     dis: 	7241.440 12962.973 13433.543 20088.988 21186.316 22333.633 25843.758 26303.115 26353.078 27129.969 
query 4 nn's (89198, 89397): 3299147 (89237) 4771921 (89341) 6670051 (89335) 2438379 (89219) 5373158 (89347) 8620903 (89355) 5372147 (89310) 7364575 (89369) 8512149 (89314) 979999 (89271) 
     dis: 	111187.133 116409.539 118605.953 121815.109 126086.102 127696.391 130695.617 130945.219 131711.406 134722.938 
[ 346.562s ] *** Query time: 23.664
qps: 422.581
 *** ivfpq recall 
ivfpq get 74122 postive res from 100000 results, recall@10:0.741
recall dist(10% per bucket): 0.001 0.002 0.010 0.023 0.049 0.085 0.125 0.163 0.189 0.228 0.124 
finished ivfpq index examples
[ 346.563s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 80 128"
	User time (seconds): 340.26
	System time (seconds): 6.26
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:47.43
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 10728360
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 2710537
	Voluntary context switches: 2795
	Involuntary context switches: 496
	Swaps: 0
	File system inputs: 234072
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 13:12
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.350s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.003
[ 365.875s ] Query results (vector ids, then distances):
query 0 nn's (64204, 64503): 5343331 (64452) 7081355 (64427) 1638165 (64278) 6056467 (64355) 4731099 (64368) 2587829 (64258) 6124488 (64233) 6117914 (64291) 5540224 (64322) 6678280 (64349) 
     dis: 	81300.031 96500.375 97086.789 97577.211 97766.453 98688.289 100637.305 101901.500 102055.250 105874.234 
query 1 nn's (7601, 7900): 3716291 (7710) 3996839 (7694) 6389334 (7761) 2740853 (7832) 7577481 (7676) 8499244 (7681) 3909984 (7619) 8935792 (7869) 731305 (7865) 2780695 (7631) 
     dis: 	72893.359 77353.594 78358.867 82586.828 83558.273 84795.969 86073.859 87757.953 95744.227 95810.898 
query 2 nn's (4420, 4719): 8635193 (4483) 909313 (4462) 9141083 (4718) 9830393 (4584) 33367 (4653) 8509795 (4438) 4770809 (4663) 7912354 (4692) 2077 (4463) 330498 (4711) 
     dis: 	58162.898 62779.367 62894.246 64011.281 66130.391 66983.188 69120.898 69391.562 69435.938 70906.414 
query 3 nn's (3638, 3937): 7749958 (3697) 4463664 (3711) 5078017 (3684) 5185015 (3869) 3313486 (3800) 8273818 (3640) 9198105 (3818) 2114046 (3654) 6473618 (3899) 4683847 (3793) 
     dis: 	8180.301 11275.979 17207.352 18161.715 18473.164 21013.635 21204.385 21628.385 24361.906 25030.525 
query 4 nn's (72580, 72879): 9342884 (72785) 6307989 (72827) 9460939 (72852) 1506376 (72768) 1609072 (72714) 5596028 (72610) 5078192 (72841) 6284140 (72837) 2817153 (72740) 6842101 (72760) 
     dis: 	110622.641 115081.945 116365.492 116598.922 116633.742 118429.922 119755.875 121489.664 121673.648 124912.570 
[ 365.875s ] *** Query time: 32.112
qps: 311.409
 *** ivfpq recall 
ivfpq get 76706 postive res from 100000 results, recall@10:0.767
recall dist(10% per bucket): 0.000 0.001 0.004 0.016 0.037 0.070 0.114 0.155 0.205 0.263 0.134 
finished ivfpq index examples
[ 365.876s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 80 128"
	User time (seconds): 354.98
	System time (seconds): 11.06
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:07.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 15516580
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 5214730
	Voluntary context switches: 2949
	Involuntary context switches: 801
	Swaps: 0
	File system inputs: 47776
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 15:12
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.723s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.166s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.004
[ 377.554s ] Query results (vector ids, then distances):
query 0 nn's (2310, 2709): 578867 (2476) 9823129 (2499) 1813619 (2534) 5826792 (2456) 3920237 (2407) 1968396 (2346) 6472642 (2459) 1604819 (2475) 844119 (2420) 3190547 (2522) 
     dis: 	81624.977 89762.109 99917.367 100483.609 101815.188 102279.805 102520.219 103337.734 104132.211 104981.273 
query 1 nn's (23653, 24052): 5254261 (23886) 4135481 (23704) 2249685 (23891) 6140132 (23883) 7856921 (23715) 8199976 (23719) 6469885 (23686) 5046775 (23698) 2404579 (23765) 3846925 (23986) 
     dis: 	64338.465 78660.297 79340.938 79641.562 80327.711 85581.578 88337.453 88541.305 89077.219 90664.328 
query 2 nn's (64025, 64424): 2540958 (64117) 7454296 (64256) 6152369 (64329) 1736003 (64349) 4877317 (64096) 3746235 (64244) 146605 (64307) 9730627 (64084) 5435166 (64158) 3605368 (64227) 
     dis: 	63032.777 63551.184 68607.648 68832.836 68865.234 72959.062 73075.391 74896.805 75137.836 75800.945 
query 3 nn's (90236, 90635): 7119531 (90378) 936598 (90457) 3670440 (90255) 1423490 (90542) 2618692 (90370) 8237128 (90475) 7380858 (90455) 2127060 (90509) 6876513 (90555) 3925323 (90440) 
     dis: 	7965.099 8999.791 12942.800 14449.464 14924.795 17558.072 18662.824 20047.322 21418.115 21780.988 
query 4 nn's (42274, 42673): 5257851 (42550) 9353798 (42619) 3309263 (42323) 9409440 (42294) 340641 (42390) 1560188 (42476) 57612 (42612) 4623256 (42366) 1072642 (42580) 409386 (42512) 
     dis: 	95210.969 100308.836 111584.805 112322.742 114645.352 115339.023 117169.828 118422.656 119710.172 120070.656 
[ 377.554s ] *** Query time: 36.744
qps: 272.153
 *** ivfpq recall 
ivfpq get 78070 postive res from 100000 results, recall@10:0.781
recall dist(10% per bucket): 0.000 0.001 0.004 0.013 0.029 0.059 0.102 0.152 0.219 0.286 0.135 
finished ivfpq index examples
[ 377.555s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 80 128"
	User time (seconds): 366.20
	System time (seconds): 11.99
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:19.01
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 19923668
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 5184854
	Voluntary context switches: 3469
	Involuntary context switches: 513
	Swaps: 0
	File system inputs: 65928
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 17:11
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.723s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.170s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.005
[ 402.001s ] Query results (vector ids, then distances):
query 0 nn's (23240, 23739): 7011791 (23273) 8031075 (23431) 2785966 (23295) 2564348 (23602) 4838491 (23518) 323154 (23341) 1205342 (23379) 6025385 (23339) 5891506 (23614) 2886644 (23517) 
     dis: 	83768.516 90957.234 91002.984 96132.711 99271.336 102705.164 104184.094 104711.016 104925.766 106009.109 
query 1 nn's (86638, 87137): 2077396 (86724) 6363708 (86935) 7523342 (87042) 8857836 (86643) 4321977 (86855) 9594077 (86656) 9131855 (87082) 5847833 (86661) 1116609 (86888) 5234937 (86897) 
     dis: 	66819.242 68251.469 68460.359 69291.875 73926.375 74890.766 75051.328 75582.453 75979.859 77215.805 
query 2 nn's (3598, 4097): 8068558 (3605) 2953864 (3859) 2800256 (3943) 4972668 (3695) 1213154 (3674) 1458512 (4014) 2526681 (3938) 3873191 (3795) 4192813 (3845) 475996 (3749) 
     dis: 	53144.305 56321.547 61454.125 64263.496 65095.047 69500.359 69749.836 71226.133 72575.273 73051.703 
query 3 nn's (87372, 87871): 7301436 (87758) 4673685 (87740) 8081932 (87465) 4104595 (87586) 9803556 (87542) 6782262 (87444) 5255438 (87585) 1952217 (87397) 771303 (87436) 7070340 (87603) 
     dis: 	7828.301 10169.544 13947.492 14391.271 15662.123 16116.723 16907.008 16956.869 17757.598 18009.082 
query 4 nn's (77119, 77618): 2288117 (77366) 487654 (77574) 6570828 (77393) 7458244 (77602) 5045349 (77581) 4746607 (77596) 8562010 (77147) 5622867 (77598) 2667975 (77541) 9123370 (77558) 
     dis: 	99963.688 100423.609 103336.617 107809.781 112233.562 115123.547 115888.766 117787.289 118642.695 118797.281 
[ 402.001s ] *** Query time: 46.037
qps: 217.219
 *** ivfpq recall 
ivfpq get 79195 postive res from 100000 results, recall@10:0.792
recall dist(10% per bucket): 0.000 0.000 0.003 0.010 0.025 0.053 0.097 0.144 0.220 0.303 0.144 
finished ivfpq index examples
[ 402.003s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 80 128"
	User time (seconds): 388.19
	System time (seconds): 14.60
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:43.60
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 26424220
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 6809711
	Voluntary context switches: 3123
	Involuntary context switches: 672
	Swaps: 0
	File system inputs: 152672
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:11
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 80
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.722s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.723s ] Loaded 10000 sift10M queries
[ 0.731s ] Loaded ground truth, gt_size: 10
[ 0.731s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.316s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.006
[ 416.756s ] Query results (vector ids, then distances):
query 0 nn's (53561, 54160): 9409479 (53603) 8771139 (53982) 3366295 (53986) 4056305 (53810) 684442 (53749) 2828720 (53831) 1973354 (53983) 8997084 (53636) 821089 (53839) 6423954 (54057) 
     dis: 	82767.234 84290.312 88503.148 92929.625 99061.734 99491.367 99808.727 103206.719 103593.719 104227.258 
query 1 nn's (7537, 8136): 1346170 (8078) 9643506 (8041) 4646465 (8091) 3716291 (7710) 7572692 (7996) 8500402 (7579) 3996839 (7694) 6389334 (7761) 3423010 (7592) 2740853 (7832) 
     dis: 	58092.207 61333.223 72791.062 72893.359 72976.766 73766.672 77353.594 78358.867 80212.578 82586.828 
query 2 nn's (31990, 32589): 6757010 (32419) 6304098 (32083) 6005722 (32578) 1883447 (32456) 2414928 (32539) 8415105 (32282) 4278769 (32271) 2284580 (32263) 3423038 (32405) 3173474 (32228) 
     dis: 	62986.469 63961.812 64105.938 65871.578 67479.164 67879.633 68692.211 71865.336 72713.648 74362.758 
query 3 nn's (20105, 20704): 3278687 (20238) 9166 (20530) 1391991 (20268) 5109723 (20631) 8386530 (20268) 430134 (20429) 2515467 (20181) 8513887 (20167) 6365231 (20234) 7943427 (20144) 
     dis: 	7108.673 8687.346 9959.333 11700.639 11832.954 12024.459 12662.167 13756.239 14010.317 17235.955 
query 4 nn's (25090, 25689): 6145854 (25319) 139002 (25306) 3162364 (25499) 2325088 (25145) 7453672 (25661) 2675739 (25411) 3288853 (25644) 2017014 (25168) 9751956 (25634) 7854030 (25443) 
     dis: 	105587.211 105878.812 110263.359 110435.172 111497.820 113008.992 113721.250 113884.906 116404.867 116632.938 
[ 416.756s ] *** Query time: 51.173
qps: 195.417
 *** ivfpq recall 
ivfpq get 79846 postive res from 100000 results, recall@10:0.798
recall dist(10% per bucket): 0.000 0.001 0.003 0.009 0.023 0.046 0.086 0.151 0.229 0.306 0.148 
finished ivfpq index examples
[ 416.758s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 80 128"
	User time (seconds): 401.20
	System time (seconds): 16.47
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:58.71
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 29549480
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 7591456
	Voluntary context switches: 2575
	Involuntary context switches: 916
	Swaps: 0
	File system inputs: 55560
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
