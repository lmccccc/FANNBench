Start time: 08:50
Start time: 08:50
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.724s ] Loaded metadata, 10000000 attr's found
[ 0.724s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.727s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.729s ] Loaded 10000 sift10M queries
[ 0.736s ] Loaded ground truth, gt_size: 10
[ 0.736s ] Index Params -- d: 128, N: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.746s ] Loaded metadata, 10000000 attr's found
[ 0.746s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.750s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.751s ] Loaded 10000 sift10M queries
[ 0.759s ] Loaded ground truth, gt_size: 10
[ 0.759s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.115s ] Searching the 10 nearest neighbors of 10000 vectors in the index
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.123s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.001
selectivity: 0.001
[ 328.160s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1609860 (44874) 4441746 (44893) 6005033 (44913) 8395367 (44860) 6764458 (44853) 1540250 (44867) 3941607 (44878) 1370582 (44857) 9276548 (44880) 3857088 (44896) 
     dis: 	97008.188 106296.328 108526.430 116282.938 119570.359 121713.781 122534.031 127988.312 131897.406 132823.859 
query 1 nn's (42821, 42920): 7957648 (42897) 4754171 (42830) 8453351 (42853) 635661 (42825) 1565098 (42885) 4062412 (42832) 5498897 (42903) 2836390 (42856) 8245003 (42875) 4833893 (42841) 
     dis: 	79052.188 83041.031 83365.820 86400.406 95684.234 96631.344 102863.227 109987.062 123165.109 125746.859 
query 2 nn's (13165, 13264): 2858053 (13240) 4306175 (13182) 3494307 (13167) 342160 (13197) 5121329 (13223) 3380755 (13173) 170142 (13196) 5928403 (13190) 2399385 (13226) 9317379 (13251) 
     dis: 	63256.391 67902.477 71318.297 73270.797 74135.984 75420.125 85253.641 86087.234 90196.570 95133.859 
query 3 nn's (25839, 25938): 6617844 (25931) 7567068 (25855) 5530477 (25921) 8283506 (25901) 7342247 (25846) 4541290 (25878) 3153441 (25841) 7055827 (25927) 8659845 (25920) 5296853 (25897) 
     dis: 	19603.658 22925.961 23946.332 24287.768 28235.391 29161.186 30447.195 32118.246 36972.586 37373.598 
query 4 nn's (45629, 45728): 1253413 (45668) 2160380 (45685) 3124161 (45639) 625529 (45723) 619740 (45674) 2098355 (45685) 2719743 (45724) 8354165 (45727) 2912699 (45657) 325958 (45648) 
     dis: 	100167.023 100617.773 117605.562 123188.547 125916.766 127504.055 129150.914 137648.172 140219.344 143669.188 
[ 328.160s ] *** Query time: 11.522
qps: 867.920
 *** ivfpq recall 
ivfpq get 40657 postive res from 100000 results, recall@10:0.407
recall dist(10% per bucket): 0.035 0.104 0.161 0.174 0.153 0.112 0.087 0.057 0.050 0.044 0.023 
finished ivfpq index examples
[ 328.161s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 323.04
	System time (seconds): 4.88
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:28.75
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 6147336
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 1936963
	Voluntary context switches: 2582
	Involuntary context switches: 681
	Swaps: 0
	File system inputs: 144208
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
[ 334.241s ] Query results (vector ids, then distances):
query 0 nn's (44843, 44942): 1609860 (44874) 4441746 (44893) 6005033 (44913) 8395367 (44860) 6764458 (44853) 1540250 (44867) 3941607 (44878) 1370582 (44857) 9276548 (44880) 3857088 (44896) 
     dis: 	97008.188 106296.328 108526.430 116282.938 119570.359 121713.781 122534.031 127988.312 131897.406 132823.859 
query 1 nn's (42821, 42920): 7957648 (42897) 4754171 (42830) 8453351 (42853) 635661 (42825) 1565098 (42885) 4062412 (42832) 5498897 (42903) 2836390 (42856) 8245003 (42875) 4833893 (42841) 
     dis: 	79052.188 83041.031 83365.820 86400.406 95684.234 96631.344 102863.227 109987.062 123165.109 125746.859 
query 2 nn's (13165, 13264): 2858053 (13240) 4306175 (13182) 3494307 (13167) 342160 (13197) 5121329 (13223) 3380755 (13173) 170142 (13196) 5928403 (13190) 2399385 (13226) 9317379 (13251) 
     dis: 	63256.391 67902.477 71318.297 73270.797 74135.984 75420.125 85253.641 86087.234 90196.570 95133.859 
query 3 nn's (25839, 25938): 6617844 (25931) 7567068 (25855) 5530477 (25921) 8283506 (25901) 7342247 (25846) 4541290 (25878) 3153441 (25841) 7055827 (25927) 8659845 (25920) 5296853 (25897) 
     dis: 	19603.658 22925.961 23946.332 24287.768 28235.391 29161.186 30447.195 32118.246 36972.586 37373.598 
query 4 nn's (45629, 45728): 1253413 (45668) 2160380 (45685) 3124161 (45639) 625529 (45723) 619740 (45674) 2098355 (45685) 2719743 (45724) 8354165 (45727) 2912699 (45657) 325958 (45648) 
     dis: 	100167.023 100617.773 117605.562 123188.547 125916.766 127504.055 129150.914 137648.172 140219.344 143669.188 
[ 334.241s ] *** Query time: 14.880
qps: 672.055
 *** ivfpq recall 
ivfpq get 40657 postive res from 100000 results, recall@10:0.407
recall dist(10% per bucket): 0.035 0.104 0.161 0.174 0.153 0.112 0.087 0.057 0.050 0.044 0.023 
finished ivfpq index examples
[ 334.243s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_100_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_100_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 325.69
	System time (seconds): 8.34
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:34.81
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 6143912
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 3068441
	Voluntary context switches: 2437
	Involuntary context switches: 511
	Swaps: 0
	File system inputs: 269128
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 11:05
Start time: 11:05
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.724s ] Loaded metadata, 10000000 attr's found
[ 0.724s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.727s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
[ 0.728s ] Loaded 10000 sift10M queries
[ 0.736s ] Loaded ground truth, gt_size: 10
[ 0.736s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.211s ] Searching the 10 nearest neighbors of 10000 vectors in the index
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.233s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.002
selectivity: 0.002
[ 338.195s ] Query results (vector ids, then distances):
query 0 nn's (73960, 74159): 285279 (74145) 4876982 (74106) 4190650 (73972) 1346541 (73991) 7480712 (74116) 4180978 (73992) 7554357 (73991) 8760523 (74005) 7948650 (73971) 2591488 (74058) 
     dis: 	105518.867 106762.883 107467.281 111373.281 112296.500 118094.125 121165.555 121582.406 122901.219 124205.250 
query 1 nn's (45733, 45932): 8903290 (45830) 2405583 (45770) 5652951 (45826) 6516659 (45828) 7367195 (45852) 7468215 (45920) 6953535 (45855) 1838035 (45843) 3790427 (45893) 3167896 (45877) 
     dis: 	90078.719 93509.578 99169.023 99632.047 107656.844 114011.383 115638.875 119931.312 121967.992 124007.219 
query 2 nn's (46226, 46425): 5600190 (46325) 5676428 (46359) 4710184 (46391) 6544069 (46288) 9735743 (46390) 7425777 (46345) 9532695 (46370) 5354125 (46227) 8966359 (46401) 5330477 (46251) 
     dis: 	73427.289 76342.281 78909.141 79147.984 85358.023 86123.766 86646.875 87029.078 90693.953 93414.672 
query 3 nn's (21965, 22164): 692217 (22063) 495406 (21968) 7582882 (22036) 655440 (22126) 4571800 (22027) 2363372 (22144) 2766287 (22065) 4735943 (22056) 5016542 (22162) 9166072 (22002) 
     dis: 	7241.440 12962.973 13433.543 20088.988 21186.316 22333.633 25843.758 26303.115 26353.078 27129.969 
query 4 nn's (89198, 89397): 6670051 (89335) 2438379 (89219) 5373158 (89347) 5372147 (89310) 1774580 (89302) 5249455 (89225) 2188905 (89362) 8198338 (89210) 5927807 (89329) 9391416 (89380) 
     dis: 	118605.953 121815.109 126086.102 130695.617 135998.781 136897.031 138656.906 140219.844 142354.828 144634.281 
[ 338.195s ] *** Query time: 14.796
qps: 675.839
 *** ivfpq recall 
ivfpq get 48513 postive res from 100000 results, recall@10:0.485
recall dist(10% per bucket): 0.018 0.062 0.112 0.147 0.150 0.137 0.111 0.085 0.072 0.067 0.041 
finished ivfpq index examples
[ 338.197s ] -----DONE-----
[ 338.303s ] Query results (vector ids, then distances):
query 0 nn's (73960, 74159): 285279 (74145) 4876982 (74106) 4190650 (73972) 1346541 (73991) 7480712 (74116) 4180978 (73992) 7554357 (73991) 8760523 (74005) 7948650 (73971) 2591488 (74058) 
     dis: 	105518.867 106762.883 107467.281 111373.281 112296.500 118094.125 121165.555 121582.406 122901.219 124205.250 
query 1 nn's (45733, 45932): 8903290 (45830) 2405583 (45770) 5652951 (45826) 6516659 (45828) 7367195 (45852) 7468215 (45920) 6953535 (45855) 1838035 (45843) 3790427 (45893) 3167896 (45877) 
     dis: 	90078.719 93509.578 99169.023 99632.047 107656.844 114011.383 115638.875 119931.312 121967.992 124007.219 
query 2 nn's (46226, 46425): 5600190 (46325) 5676428 (46359) 4710184 (46391) 6544069 (46288) 9735743 (46390) 7425777 (46345) 9532695 (46370) 5354125 (46227) 8966359 (46401) 5330477 (46251) 
     dis: 	73427.289 76342.281 78909.141 79147.984 85358.023 86123.766 86646.875 87029.078 90693.953 93414.672 
query 3 nn's (21965, 22164): 692217 (22063) 495406 (21968) 7582882 (22036) 655440 (22126) 4571800 (22027) 2363372 (22144) 2766287 (22065) 4735943 (22056) 5016542 (22162) 9166072 (22002) 
     dis: 	7241.440 12962.973 13433.543 20088.988 21186.316 22333.633 25843.758 26303.115 26353.078 27129.969 
query 4 nn's (89198, 89397): 6670051 (89335) 2438379 (89219) 5373158 (89347) 5372147 (89310) 1774580 (89302) 5249455 (89225) 2188905 (89362) 8198338 (89210) 5927807 (89329) 9391416 (89380) 
     dis: 	118605.953 121815.109 126086.102 130695.617 135998.781 136897.031 138656.906 140219.844 142354.828 144634.281 
[ 338.303s ] *** Query time: 14.440
qps: 692.523
 *** ivfpq recall 
ivfpq get 48513 postive res from 100000 results, recall@10:0.485
recall dist(10% per bucket): 0.018 0.062 0.112 0.147 0.150 0.137 0.111 0.085 0.072 0.067 0.041 
finished ivfpq index examples
[ 338.305s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 331.31
	System time (seconds): 6.94
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:39.16
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 10730408
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 1
	Minor (reclaiming a frame) page faults: 2864555
	Voluntary context switches: 2777
	Involuntary context switches: 655
	Swaps: 0
	File system inputs: 140648
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_200_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_200_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 331.36
	System time (seconds): 6.87
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:39.18
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 10728356
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 2
	Minor (reclaiming a frame) page faults: 2864542
	Voluntary context switches: 2637
	Involuntary context switches: 498
	Swaps: 0
	File system inputs: 305984
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 13:12
Start time: 13:12
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.722s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.728s ] Loaded metadata, 10000000 attr's found
[ 0.728s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.731s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.733s ] Loaded 10000 sift10M queries
[ 0.741s ] Loaded ground truth, gt_size: 10
[ 0.741s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.395s ] Searching the 10 nearest neighbors of 10000 vectors in the index
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.407s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.003
selectivity: 0.003
[ 351.956s ] Query results (vector ids, then distances):
query 0 nn's (64204, 64503): 5343331 (64452) 7081355 (64427) 1638165 (64278) 6056467 (64355) 2587829 (64258) 7673048 (64497) 1988196 (64471) 8652290 (64376) 9477283 (64264) 9503404 (64378) 
     dis: 	81300.031 96500.375 97086.789 97577.211 98688.289 106116.672 107280.609 107596.547 118437.141 119116.641 
query 1 nn's (7601, 7900): 3716291 (7710) 6389334 (7761) 2740853 (7832) 8499244 (7681) 3909984 (7619) 8935792 (7869) 9025729 (7883) 7801736 (7621) 7781916 (7670) 7817994 (7730) 
     dis: 	72893.359 78358.867 82586.828 84795.969 86073.859 87757.953 98112.281 103822.453 105353.273 105627.469 
query 2 nn's (4420, 4719): 8635193 (4483) 9830393 (4584) 33367 (4653) 4770809 (4663) 7912354 (4692) 2077 (4463) 3713232 (4558) 2604943 (4464) 8182886 (4476) 9643572 (4668) 
     dis: 	58162.898 64011.281 66130.391 69120.898 69391.562 69435.938 80294.734 81163.539 83799.188 85065.773 
query 3 nn's (3638, 3937): 7749958 (3697) 4463664 (3711) 5078017 (3684) 5185015 (3869) 3313486 (3800) 8273818 (3640) 9198105 (3818) 2114046 (3654) 6473618 (3899) 4683847 (3793) 
     dis: 	8180.301 11275.979 17207.352 18161.715 18473.164 21013.635 21204.385 21628.385 24361.906 25030.525 
query 4 nn's (72580, 72879): 6307989 (72827) 1506376 (72768) 6284140 (72837) 2817153 (72740) 3659884 (72860) 3408823 (72716) 2499306 (72850) 2774737 (72711) 7723249 (72698) 254328 (72722) 
     dis: 	115081.945 116598.922 121489.664 121673.648 126020.656 129518.297 133553.953 135162.594 135486.500 140458.344 
[ 351.956s ] *** Query time: 20.299
qps: 492.625
 *** ivfpq recall 
ivfpq get 52471 postive res from 100000 results, recall@10:0.525
recall dist(10% per bucket): 0.010 0.046 0.089 0.129 0.146 0.138 0.126 0.094 0.085 0.091 0.045 
finished ivfpq index examples
[ 351.958s ] -----DONE-----
[ 352.946s ] Query results (vector ids, then distances):
query 0 nn's (64204, 64503): 5343331 (64452) 7081355 (64427) 1638165 (64278) 6056467 (64355) 2587829 (64258) 7673048 (64497) 1988196 (64471) 8652290 (64376) 9477283 (64264) 9503404 (64378) 
     dis: 	81300.031 96500.375 97086.789 97577.211 98688.289 106116.672 107280.609 107596.547 118437.141 119116.641 
query 1 nn's (7601, 7900): 3716291 (7710) 6389334 (7761) 2740853 (7832) 8499244 (7681) 3909984 (7619) 8935792 (7869) 9025729 (7883) 7801736 (7621) 7781916 (7670) 7817994 (7730) 
     dis: 	72893.359 78358.867 82586.828 84795.969 86073.859 87757.953 98112.281 103822.453 105353.273 105627.469 
query 2 nn's (4420, 4719): 8635193 (4483) 9830393 (4584) 33367 (4653) 4770809 (4663) 7912354 (4692) 2077 (4463) 3713232 (4558) 2604943 (4464) 8182886 (4476) 9643572 (4668) 
     dis: 	58162.898 64011.281 66130.391 69120.898 69391.562 69435.938 80294.734 81163.539 83799.188 85065.773 
query 3 nn's (3638, 3937): 7749958 (3697) 4463664 (3711) 5078017 (3684) 5185015 (3869) 3313486 (3800) 8273818 (3640) 9198105 (3818) 2114046 (3654) 6473618 (3899) 4683847 (3793) 
     dis: 	8180.301 11275.979 17207.352 18161.715 18473.164 21013.635 21204.385 21628.385 24361.906 25030.525 
query 4 nn's (72580, 72879): 6307989 (72827) 1506376 (72768) 6284140 (72837) 2817153 (72740) 3659884 (72860) 3408823 (72716) 2499306 (72850) 2774737 (72711) 7723249 (72698) 254328 (72722) 
     dis: 	115081.945 116598.922 121489.664 121673.648 126020.656 129518.297 133553.953 135162.594 135486.500 140458.344 
[ 352.946s ] *** Query time: 20.868
qps: 479.194
 *** ivfpq recall 
ivfpq get 52471 postive res from 100000 results, recall@10:0.525
recall dist(10% per bucket): 0.010 0.046 0.089 0.129 0.146 0.138 0.126 0.094 0.085 0.091 0.045 
finished ivfpq index examples
[ 352.948s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 342.96
	System time (seconds): 9.15
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:53.14
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 15518628
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4073198
	Voluntary context switches: 2899
	Involuntary context switches: 567
	Swaps: 0
	File system inputs: 34312
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_300_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_300_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 343.62
	System time (seconds): 9.55
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 5:54.20
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 15519656
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4143452
	Voluntary context switches: 2691
	Involuntary context switches: 612
	Swaps: 0
	File system inputs: 16504
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 15:12
Start time: 15:12
====================
START: running TEST_IVFPQ, sift data --

====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
dataset: sift10M
N: 10000000
N: 10000000
topk: 10
topk: 10
threads: 1
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
nprobe: 20
dim: 128
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.719s ] Loaded metadata, 10000000 attr's found
[ 0.719s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.721s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
query vecs data loaded, with dim: 128, nb=10000
[ 0.722s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.723s ] Loaded 10000 sift10M queries
[ 0.724s ] Loaded 10000 sift10M queries
[ 0.730s ] Loaded ground truth, gt_size: 10
[ 0.730s ] Index Params -- d: 128, N: 10000000
[ 0.731s ] Loaded ground truth, gt_size: 10
[ 0.731s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.139s ] Searching the 10 nearest neighbors of 10000 vectors in the index
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.194s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.004
selectivity: 0.004
[ 365.031s ] Query results (vector ids, then distances):
query 0 nn's (2310, 2709): 9823129 (2499) 1813619 (2534) 3920237 (2407) 9391342 (2314) 5847210 (2467) 1665806 (2639) 6839864 (2554) 7496191 (2624) 378449 (2599) 4923373 (2691) 
     dis: 	89762.109 99917.367 101815.188 106184.781 111935.336 115984.844 117701.914 118859.781 122169.891 122618.406 
query 1 nn's (23653, 24052): 5254261 (23886) 4135481 (23704) 2249685 (23891) 6140132 (23883) 7856921 (23715) 8199976 (23719) 6469885 (23686) 2404579 (23765) 5778646 (23931) 6704526 (23876) 
     dis: 	64338.465 78660.297 79340.938 79641.562 80327.711 85581.578 88337.453 89077.219 90998.945 93252.906 
query 2 nn's (64025, 64424): 7454296 (64256) 6152369 (64329) 146605 (64307) 9730627 (64084) 2767273 (64304) 1120340 (64359) 3475638 (64370) 589185 (64112) 404044 (64269) 6602162 (64226) 
     dis: 	63551.184 68607.648 73075.391 74896.805 82166.062 83650.414 84729.312 84907.000 86122.859 86138.438 
query 3 nn's (90236, 90635): 7119531 (90378) 936598 (90457) 3670440 (90255) 1423490 (90542) 2618692 (90370) 8237128 (90475) 7380858 (90455) 2127060 (90509) 6876513 (90555) 3925323 (90440) 
     dis: 	7965.099 8999.791 12942.800 14449.464 14924.795 17558.072 18662.824 20047.322 21418.115 21780.988 
query 4 nn's (42274, 42673): 5257851 (42550) 3309263 (42323) 340641 (42390) 1560188 (42476) 4623256 (42366) 1135787 (42543) 4849656 (42597) 4378743 (42543) 794358 (42582) 8920430 (42358) 
     dis: 	95210.969 111584.805 114645.352 115339.023 118422.656 120413.828 122629.742 127573.648 127848.828 130238.594 
[ 365.031s ] *** Query time: 24.833
qps: 402.684
 *** ivfpq recall 
ivfpq get 54816 postive res from 100000 results, recall@10:0.548
recall dist(10% per bucket): 0.012 0.034 0.078 0.120 0.134 0.143 0.124 0.109 0.100 0.098 0.050 
finished ivfpq index examples
[ 365.032s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 353.49
	System time (seconds): 12.25
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:06.57
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 19920808
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 4
	Minor (reclaiming a frame) page faults: 5506853
	Voluntary context switches: 3434
	Involuntary context switches: 633
	Swaps: 0
	File system inputs: 68952
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
[ 367.568s ] Query results (vector ids, then distances):
query 0 nn's (2310, 2709): 9823129 (2499) 1813619 (2534) 3920237 (2407) 9391342 (2314) 5847210 (2467) 1665806 (2639) 6839864 (2554) 7496191 (2624) 378449 (2599) 4923373 (2691) 
     dis: 	89762.109 99917.367 101815.188 106184.781 111935.336 115984.844 117701.914 118859.781 122169.891 122618.406 
query 1 nn's (23653, 24052): 5254261 (23886) 4135481 (23704) 2249685 (23891) 6140132 (23883) 7856921 (23715) 8199976 (23719) 6469885 (23686) 2404579 (23765) 5778646 (23931) 6704526 (23876) 
     dis: 	64338.465 78660.297 79340.938 79641.562 80327.711 85581.578 88337.453 89077.219 90998.945 93252.906 
query 2 nn's (64025, 64424): 7454296 (64256) 6152369 (64329) 146605 (64307) 9730627 (64084) 2767273 (64304) 1120340 (64359) 3475638 (64370) 589185 (64112) 404044 (64269) 6602162 (64226) 
     dis: 	63551.184 68607.648 73075.391 74896.805 82166.062 83650.414 84729.312 84907.000 86122.859 86138.438 
query 3 nn's (90236, 90635): 7119531 (90378) 936598 (90457) 3670440 (90255) 1423490 (90542) 2618692 (90370) 8237128 (90475) 7380858 (90455) 2127060 (90509) 6876513 (90555) 3925323 (90440) 
     dis: 	7965.099 8999.791 12942.800 14449.464 14924.795 17558.072 18662.824 20047.322 21418.115 21780.988 
query 4 nn's (42274, 42673): 5257851 (42550) 3309263 (42323) 340641 (42390) 1560188 (42476) 4623256 (42366) 1135787 (42543) 4849656 (42597) 4378743 (42543) 794358 (42582) 8920430 (42358) 
     dis: 	95210.969 111584.805 114645.352 115339.023 118422.656 120413.828 122629.742 127573.648 127848.828 130238.594 
[ 367.568s ] *** Query time: 25.302
qps: 395.223
 *** ivfpq recall 
ivfpq get 54816 postive res from 100000 results, recall@10:0.548
recall dist(10% per bucket): 0.012 0.034 0.078 0.120 0.134 0.143 0.124 0.109 0.100 0.098 0.050 
finished ivfpq index examples
[ 367.569s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_400_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_400_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 355.62
	System time (seconds): 12.65
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:09.11
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 19920804
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3
	Minor (reclaiming a frame) page faults: 5453955
	Voluntary context switches: 3462
	Involuntary context switches: 722
	Swaps: 0
	File system inputs: 54224
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 17:11
Start time: 17:11
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.738s ] Loaded metadata, 10000000 attr's found
[ 0.738s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.741s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.743s ] Loaded 10000 sift10M queries
[ 0.750s ] Loaded ground truth, gt_size: 10
[ 0.750s ] Index Params -- d: 128, N: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.836s ] Loaded metadata, 10000000 attr's found
[ 0.836s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.839s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.841s ] Loaded 10000 sift10M queries
[ 0.849s ] Loaded ground truth, gt_size: 10
[ 0.849s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.122s ] Searching the 10 nearest neighbors of 10000 vectors in the index
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.207s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.005
selectivity: 0.005
[ 390.240s ] Query results (vector ids, then distances):
query 0 nn's (23240, 23739): 7011791 (23273) 8031075 (23431) 2785966 (23295) 4838491 (23518) 1205342 (23379) 6025385 (23339) 2914049 (23337) 6649951 (23709) 8906920 (23474) 9410538 (23733) 
     dis: 	83768.516 90957.234 91002.984 99271.336 104184.094 104711.016 110192.922 110514.406 113095.773 114810.625 
query 1 nn's (86638, 87137): 6363708 (86935) 7523342 (87042) 8857836 (86643) 4321977 (86855) 9594077 (86656) 5847833 (86661) 1116609 (86888) 5234937 (86897) 1448692 (87058) 9277159 (86799) 
     dis: 	68251.469 68460.359 69291.875 73926.375 74890.766 75582.453 75979.859 77215.805 86030.242 89831.703 
query 2 nn's (3598, 4097): 8068558 (3605) 2953864 (3859) 2800256 (3943) 4972668 (3695) 1213154 (3674) 3873191 (3795) 4192813 (3845) 475996 (3749) 122085 (3670) 1652051 (3644) 
     dis: 	53144.305 56321.547 61454.125 64263.496 65095.047 71226.133 72575.273 73051.703 73502.227 75668.008 
query 3 nn's (87372, 87871): 7301436 (87758) 4673685 (87740) 8081932 (87465) 4104595 (87586) 9803556 (87542) 6782262 (87444) 5255438 (87585) 1952217 (87397) 771303 (87436) 7070340 (87603) 
     dis: 	7828.301 10169.544 13947.492 14391.271 15662.123 16116.723 16907.008 16956.869 17757.598 18009.082 
query 4 nn's (77119, 77618): 2288117 (77366) 5045349 (77581) 8562010 (77147) 9123370 (77558) 7352961 (77371) 7041673 (77564) 390046 (77536) 2572286 (77580) 7362076 (77614) 6895571 (77227) 
     dis: 	99963.688 112233.562 115888.766 118797.281 123958.203 124915.359 126855.797 126865.859 130577.445 132597.375 
[ 390.240s ] *** Query time: 33.994
qps: 294.172
 *** ivfpq recall 
ivfpq get 56686 postive res from 100000 results, recall@10:0.567
recall dist(10% per bucket): 0.006 0.033 0.066 0.111 0.139 0.133 0.126 0.116 0.106 0.109 0.056 
finished ivfpq index examples
[ 390.242s ] -----DONE-----
[ 391.465s ] Query results (vector ids, then distances):
query 0 nn's (23240, 23739): 7011791 (23273) 8031075 (23431) 2785966 (23295) 4838491 (23518) 1205342 (23379) 6025385 (23339) 2914049 (23337) 6649951 (23709) 8906920 (23474) 9410538 (23733) 
     dis: 	83768.516 90957.234 91002.984 99271.336 104184.094 104711.016 110192.922 110514.406 113095.773 114810.625 
query 1 nn's (86638, 87137): 6363708 (86935) 7523342 (87042) 8857836 (86643) 4321977 (86855) 9594077 (86656) 5847833 (86661) 1116609 (86888) 5234937 (86897) 1448692 (87058) 9277159 (86799) 
     dis: 	68251.469 68460.359 69291.875 73926.375 74890.766 75582.453 75979.859 77215.805 86030.242 89831.703 
query 2 nn's (3598, 4097): 8068558 (3605) 2953864 (3859) 2800256 (3943) 4972668 (3695) 1213154 (3674) 3873191 (3795) 4192813 (3845) 475996 (3749) 122085 (3670) 1652051 (3644) 
     dis: 	53144.305 56321.547 61454.125 64263.496 65095.047 71226.133 72575.273 73051.703 73502.227 75668.008 
query 3 nn's (87372, 87871): 7301436 (87758) 4673685 (87740) 8081932 (87465) 4104595 (87586) 9803556 (87542) 6782262 (87444) 5255438 (87585) 1952217 (87397) 771303 (87436) 7070340 (87603) 
     dis: 	7828.301 10169.544 13947.492 14391.271 15662.123 16116.723 16907.008 16956.869 17757.598 18009.082 
query 4 nn's (77119, 77618): 2288117 (77366) 5045349 (77581) 8562010 (77147) 9123370 (77558) 7352961 (77371) 7041673 (77564) 390046 (77536) 2572286 (77580) 7362076 (77614) 6895571 (77227) 
     dis: 	99963.688 112233.562 115888.766 118797.281 123958.203 124915.359 126855.797 126865.859 130577.445 132597.375 
[ 391.465s ] *** Query time: 35.776
qps: 279.514
 *** ivfpq recall 
ivfpq get 56686 postive res from 100000 results, recall@10:0.567
recall dist(10% per bucket): 0.006 0.033 0.066 0.111 0.139 0.133 0.126 0.116 0.106 0.109 0.056 
finished ivfpq index examples
[ 391.467s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 376.01
	System time (seconds): 15.22
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:32.03
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 26423204
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 6806722
	Voluntary context switches: 3156
	Involuntary context switches: 585
	Swaps: 0
	File system inputs: 77488
	File system outputs: 8
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_500_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_500_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 377.17
	System time (seconds): 15.27
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:33.14
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 26423208
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 7065047
	Voluntary context switches: 2957
	Involuntary context switches: 599
	Swaps: 0
	File system inputs: 205752
	File system outputs: 32
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 19:11
Start time: 19:11
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
====================
START: running TEST_IVFPQ, sift data --

dataset: sift10M
N: 10000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json
index file: /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64
nprobe: 20
dim: 128
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.717s ] Loaded metadata, 10000000 attr's found
[ 0.717s ] Loading query vectors and attributes
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json
[ 0.718s ] Loaded metadata, 10000000 attr's found
[ 0.718s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 0.720s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
query vecs data loaded, with dim: 128, nb=10000
[ 0.722s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
[ 0.721s ] Loaded 10000 sift10M queries
[ 0.723s ] Loaded 10000 sift10M queries
[ 0.729s ] Loaded ground truth, gt_size: 10
[ 0.729s ] Index Params -- d: 128, N: 10000000
[ 0.731s ] Loaded ground truth, gt_size: 10
[ 0.731s ] Index Params -- d: 128, N: 10000000
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.320s ] Searching the 10 nearest neighbors of 10000 vectors in the index
 load index size: 10000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== IVFPQ INDEX ====================
[ 3.333s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.006
selectivity: 0.006
[ 406.074s ] Query results (vector ids, then distances):
query 0 nn's (53561, 54160): 9409479 (53603) 3366295 (53986) 4056305 (53810) 1973354 (53983) 8997084 (53636) 821089 (53839) 9527257 (53884) 8761315 (53570) 3059413 (54109) 5859539 (54102) 
     dis: 	82767.234 88503.148 92929.625 99808.727 103206.719 103593.719 104767.039 106774.562 107557.273 109143.484 
query 1 nn's (7537, 8136): 1346170 (8078) 9643506 (8041) 4646465 (8091) 3716291 (7710) 8500402 (7579) 6389334 (7761) 3423010 (7592) 2740853 (7832) 8499244 (7681) 3909984 (7619) 
     dis: 	58092.207 61333.223 72791.062 72893.359 73766.672 78358.867 80212.578 82586.828 84795.969 86073.859 
query 2 nn's (31990, 32589): 6757010 (32419) 6304098 (32083) 6005722 (32578) 2414928 (32539) 8415105 (32282) 2284580 (32263) 1819941 (32058) 4928841 (32457) 8065326 (32081) 2843061 (32003) 
     dis: 	62986.469 63961.812 64105.938 67479.164 67879.633 71865.336 76631.734 79198.281 79866.750 80708.414 
query 3 nn's (20105, 20704): 3278687 (20238) 9166 (20530) 1391991 (20268) 5109723 (20631) 8386530 (20268) 430134 (20429) 2515467 (20181) 8513887 (20167) 6365231 (20234) 7943427 (20144) 
     dis: 	7108.673 8687.346 9959.333 11700.639 11832.954 12024.459 12662.167 13756.239 14010.317 17235.955 
query 4 nn's (25090, 25689): 6145854 (25319) 139002 (25306) 3162364 (25499) 2325088 (25145) 2675739 (25411) 3288853 (25644) 2017014 (25168) 827018 (25362) 28144 (25433) 461139 (25103) 
     dis: 	105587.211 105878.812 110263.359 110435.172 113008.992 113721.250 113884.906 117296.484 119356.094 119863.453 
[ 406.074s ] *** Query time: 39.822
qps: 251.120
 *** ivfpq recall 
ivfpq get 58387 postive res from 100000 results, recall@10:0.584
recall dist(10% per bucket): 0.007 0.027 0.059 0.099 0.126 0.138 0.130 0.123 0.113 0.113 0.064 
finished ivfpq index examples
[ 406.076s ] -----DONE-----
[ 406.879s ] Query results (vector ids, then distances):
query 0 nn's (53561, 54160): 9409479 (53603) 3366295 (53986) 4056305 (53810) 1973354 (53983) 8997084 (53636) 821089 (53839) 9527257 (53884) 8761315 (53570) 3059413 (54109) 5859539 (54102) 
     dis: 	82767.234 88503.148 92929.625 99808.727 103206.719 103593.719 104767.039 106774.562 107557.273 109143.484 
query 1 nn's (7537, 8136): 1346170 (8078) 9643506 (8041) 4646465 (8091) 3716291 (7710) 8500402 (7579) 6389334 (7761) 3423010 (7592) 2740853 (7832) 8499244 (7681) 3909984 (7619) 
     dis: 	58092.207 61333.223 72791.062 72893.359 73766.672 78358.867 80212.578 82586.828 84795.969 86073.859 
query 2 nn's (31990, 32589): 6757010 (32419) 6304098 (32083) 6005722 (32578) 2414928 (32539) 8415105 (32282) 2284580 (32263) 1819941 (32058) 4928841 (32457) 8065326 (32081) 2843061 (32003) 
     dis: 	62986.469 63961.812 64105.938 67479.164 67879.633 71865.336 76631.734 79198.281 79866.750 80708.414 
query 3 nn's (20105, 20704): 3278687 (20238) 9166 (20530) 1391991 (20268) 5109723 (20631) 8386530 (20268) 430134 (20429) 2515467 (20181) 8513887 (20167) 6365231 (20234) 7943427 (20144) 
     dis: 	7108.673 8687.346 9959.333 11700.639 11832.954 12024.459 12662.167 13756.239 14010.317 17235.955 
query 4 nn's (25090, 25689): 6145854 (25319) 139002 (25306) 3162364 (25499) 2325088 (25145) 2675739 (25411) 3288853 (25644) 2017014 (25168) 827018 (25362) 28144 (25433) 461139 (25103) 
     dis: 	105587.211 105878.812 110263.359 110435.172 113008.992 113721.250 113884.906 117296.484 119356.094 119863.453 
[ 406.879s ] *** Query time: 37.722
qps: 265.099
 *** ivfpq recall 
ivfpq get 58387 postive res from 100000 results, recall@10:0.584
recall dist(10% per bucket): 0.007 0.027 0.059 0.099 0.126 0.138 0.130 0.123 0.113 0.113 0.064 
finished ivfpq index examples
[ 406.880s ] -----DONE-----
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 390.28
	System time (seconds): 16.78
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:48.10
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 29549184
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 3
	Minor (reclaiming a frame) page faults: 7589558
	Voluntary context switches: 2559
	Involuntary context switches: 772
	Swaps: 0
	File system inputs: 38920
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
	Command being timed: "../faiss/build/demos/ivfpq_query sift10M 10000000 10 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/attr_sel_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/qrangesel_600_1_100000_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_100000_random/sif_gt_sel_600_1_100000_random_10.json /mnt/data/mocheng/dataset/sift10m/ivfpq/index/index_ivfpq_sel_1_100000_random_64 20 128"
	User time (seconds): 390.20
	System time (seconds): 17.71
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 6:48.97
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 29548456
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 7402048
	Voluntary context switches: 2459
	Involuntary context switches: 779
	Swaps: 0
	File system inputs: 62480
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
