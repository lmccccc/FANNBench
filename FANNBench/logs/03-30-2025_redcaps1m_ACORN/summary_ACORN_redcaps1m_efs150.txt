Start time: 01:23
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: redcaps1m
N: 1000000
gamma: 25
M: 40
M_beta: 64
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64
ef_search: 150 
dim: 512
metadata or vector loaded from json, size: 1000000
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json
[ 0.146s ] Loaded metadata, 1000000 attr's found
[ 0.146s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.158s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json
[ 0.161s ] Loaded 10000 redcaps1m queries
metadata or vector loaded from json, size: 100000
loaded gt from: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json
[ 0.172s ] Loaded ground truth, gt_size: 10
[ 0.172s ] Index Params -- d: 512, M: 40, N: 1000000, gamma: 25
--ACORN index created
acorn size: 598384000, memory: 2535.233MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 999944 nodes
level 1 : 24955 nodes
level 2 : 622 nodes
level 3 : 16 nodes
level 4 : 1 nodes
level 5 : 0 nodes
Total edge:1025538
Average degree per layer:170923.000
node size:1000000
Average degree:149.596
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 6.366s ] Searching the 10 nearest neighbors of 10000 vectors in the index, efsearch 150
selectivity: 1.000
[ 55.027s ] Query results (vector ids, then distances):
query 0 nn's (1250443791): 727106 (1557359735) 562528 (1586530455) 268161 (1597188224) 247269 (1563268918) 646437 (1533316338) 864174 (1586141206) 451328 (1592339349) 7102 (1609385900) 64073 (1552081912) 302070 (1529172082) 
     dis: 	0.629 0.641 0.659 0.676 0.696 0.743 0.750 0.758 0.760 0.763 
query 1 nn's (1609459076): 363220 (1580588215) 253654 (1604521057) 741325 (1559616195) 666880 (1555641433) 979250 (1523372340) 728340 (1587919683) 660394 (1588821207) 622447 (1532959985) 964028 (1579883899) 199154 (1601707637) 
     dis: 	0.092 0.099 0.100 0.101 0.101 0.101 0.103 0.103 0.106 0.106 
query 2 nn's (1250443791): 355537 (1550334893) 880455 (1548258623) 964377 (1605131892) 306439 (1575579764) 757728 (1605423787) 940490 (1538475549) 193180 (1562795054) 216922 (1609232106) 410774 (1549698655) 620585 (1537923720) 
     dis: 	0.224 0.225 0.226 0.238 0.240 0.246 0.249 0.256 0.258 0.259 
query 3 nn's (1609459076): 689368 (1563091635) 889987 (1593644784) 583699 (1511048352) 783586 (1584449301) 428067 (1496315424) 907599 (1562830155) 124464 (1588791594) 640717 (1593715105) 905275 (1491272214) 687871 (1584368476) 
     dis: 	0.403 0.403 0.405 0.409 0.433 0.446 0.449 0.455 0.459 0.460 
query 4 nn's (1250443791): 582698 (1557087889) 522469 (1606475445) 176027 (1580588338) 695669 (1587844268) 797013 (1605732191) 234795 (1600891554) 189529 (1600981496) 931553 (1570901224) 598411 (1595872318) 892178 (1586648068) 
     dis: 	0.260 0.260 0.269 0.269 0.273 0.274 0.281 0.284 0.286 0.288 
[ 55.027s ] *** Query time: 41.576
qps: 240.525
 *** acorn recall 
efs:150
acorn get 96087 postive res from 100000 results, recall@10:0.961
recall dist(10% per bucket): 0.018 0.000 0.001 0.001 0.001 0.001 0.004 0.008 0.024 0.103 0.840 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[55.028s] Timing results for search of k=10 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 42830831
ndis: 0
nreorder: 0
average distance computations per query: 4283.083
[ 55.028s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query redcaps1m 1000000 25 40 64 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/attr_sel_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/qrangesel_1_1_100000_real.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_100000_real/sif_gt_sel_1_1_100000_real_10.json /mnt/data/mocheng/dataset/redcaps1m/acorn/index/index_acorn_sel_1_100000_real_M40_ga25_Mb64 150 512"
	User time (seconds): 48.97
	System time (seconds): 2.59
	Percent of CPU this job got: 93%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:55.15
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 3227880
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 817257
	Voluntary context switches: 17894
	Involuntary context switches: 77
	Swaps: 0
	File system inputs: 192072
	File system outputs: 24
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
