Start time: 00:05
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000
ef_search: 400
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.129s ] Loaded metadata, 1000000 attr's found
[ 0.129s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.142s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.156s ] Loaded 10000 redcaps1m queries
[ 0.205s ] Loaded ground truth, gt_size: 10
[ 0.205s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 4.308s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 37.173s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 109422 (19) 336934 (19) 81228 (19) 472918 (19) 193999 (19) 787898 (19) 166382 (19) 112401 (19) 647488 (19) 262545 (19) 
     dis: 	0.859 0.862 0.905 0.913 0.947 0.972 0.974 0.979 0.982 0.983 
query 1 nn's (19, 19): 526331 (19) 158846 (19) 264009 (19) 434283 (19) 246783 (19) 69776 (19) 805880 (19) 916232 (19) 357641 (19) 774551 (19) 
     dis: 	0.135 0.138 0.139 0.140 0.142 0.149 0.156 0.160 0.161 0.166 
query 2 nn's (19, 19): 752639 (19) 436923 (19) 916423 (19) 782944 (19) 366433 (19) 425512 (19) 537534 (19) 313405 (19) 510609 (19) 347848 (19) 
     dis: 	0.309 0.314 0.317 0.319 0.330 0.330 0.335 0.337 0.346 0.355 
query 3 nn's (19, 19): 687871 (19) 226331 (19) 493967 (19) 239054 (19) 840258 (19) 231500 (19) 358741 (19) 89977 (19) 584120 (19) 938737 (19) 
     dis: 	0.460 0.522 0.561 0.587 0.589 0.592 0.595 0.611 0.624 0.626 
query 4 nn's (19, 19): 522469 (19) 940668 (19) 402334 (19) 393712 (19) 637586 (19) 135893 (19) 826811 (19) 947998 (19) 699126 (19) 862880 (19) 
     dis: 	0.260 0.358 0.372 0.380 0.385 0.411 0.416 0.430 0.435 0.436 
[ 37.173s ] *** Query time: 27.934
qps: 357.985
 *** HNSW recall 
HNSW get 96556 postive res from 100000 results, recall@10:0.966
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.001 0.003 0.013 0.049 0.192 0.743 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 163990291, average: 16399.029
finished ivfpq index examples
[ 37.175s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000 400 512"
	User time (seconds): 32.56
	System time (seconds): 2.17
	Percent of CPU this job got: 93%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:37.32
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2366376
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 678461
	Voluntary context switches: 7489
	Involuntary context switches: 53
	Swaps: 0
	File system inputs: 525376
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
