Start time: 00:05
====================
START: running TEST_HNSW, sift data --

dataset: redcaps1m
N: 1000000
topk: 10
threads: 1
dataset file: /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs
query file: /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
attr file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
qrange file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json
index file: /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000
ef_search: 200
dim: 512
loaded base attributes from:/mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json
[ 0.131s ] Loaded metadata, 1000000 attr's found
[ 0.131s ] Loading query vectors and attributes
query vecs data loaded, with dim: 512, nb=10000
[ 0.144s ] Loaded query vectors from /mnt/data/mocheng/dataset/redcaps1m/query.fvecs
[ 0.158s ] Loaded 10000 redcaps1m queries
[ 0.207s ] Loaded ground truth, gt_size: 10
[ 0.207s ] Index Params -- d: 512, N: 1000000
Total edge:200
Average degree:0.000
 load index size: 1000000
--Index created
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== HNSW INDEX ====================
[ 4.305s ] Searching the 10 nearest neighbors of 10000 vectors in the index
selectivity: 0.010
[ 28.915s ] Query results (vector ids, then distances):
query 0 nn's (19, 19): 109422 (19) 336934 (19) 81228 (19) 472918 (19) 193999 (19) 166382 (19) 112401 (19) 866187 (19) 144195 (19) 667610 (19) 
     dis: 	0.859 0.862 0.905 0.913 0.947 0.974 0.979 0.996 1.002 1.018 
query 1 nn's (19, 19): 526331 (19) 158846 (19) 264009 (19) 434283 (19) 246783 (19) 69776 (19) 805880 (19) 916232 (19) 357641 (19) 532410 (19) 
     dis: 	0.135 0.138 0.139 0.140 0.142 0.149 0.156 0.160 0.161 0.167 
query 2 nn's (19, 19): 752639 (19) 436923 (19) 916423 (19) 782944 (19) 366433 (19) 425512 (19) 537534 (19) 313405 (19) 347848 (19) 546593 (19) 
     dis: 	0.309 0.314 0.317 0.319 0.330 0.330 0.335 0.337 0.355 0.358 
query 3 nn's (19, 19): 687871 (19) 226331 (19) 493967 (19) 239054 (19) 840258 (19) 231500 (19) 358741 (19) 89977 (19) 584120 (19) 938737 (19) 
     dis: 	0.460 0.522 0.561 0.587 0.589 0.592 0.595 0.611 0.624 0.626 
query 4 nn's (19, 19): 522469 (19) 940668 (19) 402334 (19) 393712 (19) 135893 (19) 826811 (19) 699126 (19) 862880 (19) 221380 (19) 989983 (19) 
     dis: 	0.260 0.358 0.372 0.380 0.411 0.416 0.435 0.436 0.436 0.438 
[ 28.915s ] *** Query time: 19.713
qps: 507.275
 *** HNSW recall 
HNSW get 87990 postive res from 100000 results, recall@10:0.880
recall dist(10% per bucket): 0.000 0.000 0.000 0.001 0.003 0.013 0.041 0.092 0.179 0.304 0.365 
numbner of vectors searched: 10000, average: 1.000
number of queries for which the candidate list is exhasted: 10000, average: 1.000
number of distances computed: 83091148, average: 8309.115
finished ivfpq index examples
[ 28.917s ] -----DONE-----
	Command being timed: "../faiss/build/demos/hnsw_query redcaps1m 1000000 10 1 /mnt/data/mocheng/dataset/redcaps1m/image_embeddings.fvecs /mnt/data/mocheng/dataset/redcaps1m/query.fvecs /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/attr_sel_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/redcaps1m/label/sel_1_500_random_19/sif_gt_sel_1_1_500_random_19_10.json /mnt/data/mocheng/dataset/redcaps1m/hnsw/index/index_hnsw_sel_1_500_random_19_40_1000 200 512"
	User time (seconds): 22.40
	System time (seconds): 4.19
	Percent of CPU this job got: 91%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:29.16
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 2367396
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 1249991
	Voluntary context switches: 7364
	Involuntary context switches: 85
	Swaps: 0
	File system inputs: 724728
	File system outputs: 16
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
