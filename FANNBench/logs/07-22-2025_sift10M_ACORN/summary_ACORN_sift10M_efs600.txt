Start time: 22:20
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64
ef_search: 600 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 1.046s ] Loaded metadata, 10000000 attr's found
[ 1.046s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.050s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json
[ 1.051s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json
[ 1.213s ] Loaded ground truth, gt_size: 100
[ 1.213s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999563 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255873
Average degree per layer:1709312.167
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 12.085s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 600
selectivity: 0.001
[ 579.877s ] Query results (vector ids, then distances):
query 0 nn's (20): 7382313 (20) 9108439 (20) 1385626 (20) 4368257 (20) 4950158 (20) 2942844 (20) 2983744 (20) 1530350 (20) 7621745 (20) 9680199 (20) 9578636 (20) 7862657 (20) 483066 (20) 9118314 (20) 5761010 (20) 3394963 (20) 4461192 (20) 7517944 (20) 9869749 (20) 107963 (20) 6353429 (20) 3699257 (20) 8184590 (20) 3196339 (20) 5683772 (20) 6563987 (20) 1055290 (20) 789360 (20) 7754319 (20) 1270974 (20) 2413213 (20) 2473286 (20) 522233 (20) 8052519 (20) 8614796 (20) 1282603 (20) 5357116 (20) 8502159 (20) 9047597 (20) 83971 (20) 4730992 (20) 8543992 (20) 4299028 (20) 270881 (20) 3964439 (20) 9880426 (20) 1410229 (20) 2355404 (20) 1935997 (20) 5472498 (20) 2001704 (20) 463401 (20) 2079171 (20) 8636748 (20) 7777915 (20) 130771 (20) 566799 (20) 6484791 (20) 3021122 (20) 4198517 (20) 502074 (20) 8001377 (20) 4447338 (20) 6202102 (20) 6136788 (20) 8354163 (20) 7715639 (20) 9931478 (20) 7217163 (20) 3921820 (20) 8925844 (20) 1978046 (20) 1323085 (20) 8517394 (20) 5441611 (20) 2350906 (20) 162343 (20) 3574076 (20) 5635138 (20) 3784770 (20) 3706081 (20) 4213849 (20) 7051255 (20) 4373610 (20) 2189383 (20) 1291318 (20) 2884474 (20) 452696 (20) 9066029 (20) 8009668 (20) 1550003 (20) 6909160 (20) 9933171 (20) 6476011 (20) 1454395 (20) 6381994 (20) 232911 (20) 8205205 (20) 4894849 (20) 1343945 (20) 
     dis: 	106376.000 116247.000 117309.000 123691.000 124600.000 127741.000 128212.000 128891.000 130955.000 132859.000 133633.000 134074.000 134661.000 137235.000 140108.000 143456.000 143971.000 144072.000 144418.000 145927.000 147389.000 148342.000 148424.000 150240.000 151444.000 151769.000 153547.000 153730.000 154434.000 154493.000 155115.000 155199.000 155558.000 155694.000 155986.000 156031.000 157148.000 158073.000 158174.000 158480.000 158778.000 159514.000 160115.000 160349.000 160443.000 160468.000 160724.000 160748.000 160749.000 161025.000 161276.000 162238.000 162323.000 162425.000 162472.000 163297.000 163305.000 163414.000 163864.000 164000.000 164195.000 164427.000 164529.000 165233.000 166218.000 166287.000 166564.000 166583.000 166678.000 167327.000 168406.000 168540.000 168814.000 169294.000 169681.000 169911.000 170074.000 170074.000 170176.000 170331.000 170488.000 170616.000 170907.000 171616.000 171670.000 172424.000 172588.000 172945.000 173444.000 173554.000 173600.000 173613.000 173751.000 174102.000 174190.000 175040.000 175397.000 175418.000 175491.000 175699.000 
query 1 nn's (20): 4299663 (20) 2788374 (20) 3434211 (20) 3337341 (20) 4062732 (20) 8283937 (20) 9000132 (20) 3142235 (20) 3447694 (20) 3010509 (20) 2232728 (20) 8830767 (20) 9762051 (20) 114795 (20) 5962463 (20) 836075 (20) 7243232 (20) 3075878 (20) 9171383 (20) 8810376 (20) 6191341 (20) 8746888 (20) 27484 (20) 8565521 (20) 4359035 (20) 9872706 (20) 7721074 (20) 9799034 (20) 467779 (20) 8105986 (20) 1358063 (20) 7475807 (20) 8608389 (20) 7417994 (20) 8478076 (20) 6035977 (20) 8880427 (20) 5802221 (20) 3587863 (20) 3003093 (20) 6359996 (20) 1439333 (20) 5315967 (20) 5266747 (20) 4326128 (20) 4720457 (20) 2132986 (20) 8524508 (20) 5004252 (20) 5691640 (20) 8759385 (20) 4671707 (20) 4904228 (20) 8269618 (20) 7250439 (20) 2706189 (20) 5938855 (20) 7983744 (20) 7792420 (20) 4844799 (20) 468845 (20) 1689608 (20) 4454252 (20) 151515 (20) 5727334 (20) 9954690 (20) 3899050 (20) 1494323 (20) 644875 (20) 9518532 (20) 8371845 (20) 61989 (20) 7314567 (20) 5091656 (20) 9939255 (20) 7429630 (20) 997195 (20) 5292640 (20) 8829565 (20) 2167929 (20) 7335711 (20) 7227689 (20) 6234745 (20) 8874963 (20) 16279 (20) 4010281 (20) 5184342 (20) 9010859 (20) 4652836 (20) 3559718 (20) 1589872 (20) 3741493 (20) 8388139 (20) 5984945 (20) 7613837 (20) 1178934 (20) 3602055 (20) 6960989 (20) 2578726 (20) 9093066 (20) 
     dis: 	82150.000 93796.000 103619.000 107679.000 112950.000 113101.000 117856.000 121855.000 122525.000 123159.000 127080.000 128678.000 131679.000 132910.000 135239.000 138003.000 138487.000 139414.000 142244.000 152717.000 152801.000 153185.000 154171.000 154643.000 155671.000 155981.000 156778.000 156883.000 157707.000 159369.000 159487.000 161066.000 161483.000 162744.000 165656.000 165730.000 167318.000 167641.000 168038.000 168846.000 170433.000 170677.000 170760.000 170804.000 172946.000 173671.000 174674.000 175185.000 175634.000 176676.000 176738.000 178164.000 178411.000 178759.000 179115.000 179297.000 179365.000 179565.000 180615.000 181253.000 182153.000 182287.000 182919.000 182996.000 183678.000 183871.000 184664.000 184716.000 188448.000 188823.000 189552.000 191557.000 193091.000 193129.000 193169.000 193330.000 193723.000 194058.000 194349.000 194713.000 195402.000 195620.000 197083.000 197351.000 197604.000 198098.000 198886.000 199260.000 199634.000 199979.000 200172.000 200625.000 201136.000 201504.000 202139.000 202728.000 202831.000 203293.000 203639.000 203676.000 
query 2 nn's (20): 7935188 (20) 6350158 (20) 1479999 (20) 677269 (20) 1659551 (20) 4981667 (20) 2349892 (20) 6429556 (20) 6746870 (20) 6117180 (20) 849672 (20) 6042987 (20) 3170013 (20) 9276987 (20) 2330371 (20) 4343758 (20) 9247151 (20) 661427 (20) 4169468 (20) 3520349 (20) 1253909 (20) 8001377 (20) 6597323 (20) 5316485 (20) 6837045 (20) 8543992 (20) 6296416 (20) 6416240 (20) 162263 (20) 7106870 (20) 2049192 (20) 8468715 (20) 9553608 (20) 2398036 (20) 6394791 (20) 1570654 (20) 3394963 (20) 9580771 (20) 6458220 (20) 3998500 (20) 9559161 (20) 9979007 (20) 4995297 (20) 9645500 (20) 7980665 (20) 4625209 (20) 3408846 (20) 7301785 (20) 7254792 (20) 7594734 (20) 3675390 (20) 9175008 (20) 5322387 (20) 719863 (20) 563951 (20) 2315224 (20) 8134205 (20) 2567247 (20) 4027863 (20) 9105948 (20) 7586313 (20) 4514867 (20) 6779349 (20) 5843812 (20) 7982291 (20) 7754319 (20) 6178784 (20) 6069306 (20) 93230 (20) 285974 (20) 2001704 (20) 7748081 (20) 6347060 (20) 2499380 (20) 4812458 (20) 9764260 (20) 3638231 (20) 7801727 (20) 2213697 (20) 7799465 (20) 6707351 (20) 5821560 (20) 8788007 (20) 3884217 (20) 5890639 (20) 3161132 (20) 8937518 (20) 1254292 (20) 2605060 (20) 2297765 (20) 1796451 (20) 4636191 (20) 1438278 (20) 542601 (20) 5777862 (20) 4875468 (20) 9137564 (20) 3699257 (20) 2 (6) 1968505 (20) 
     dis: 	126375.000 126480.000 134378.000 137367.000 137857.000 137921.000 139564.000 140019.000 150405.000 151466.000 152093.000 153131.000 154367.000 154913.000 154982.000 155489.000 159588.000 160204.000 161400.000 162349.000 163232.000 163329.000 164134.000 164542.000 165083.000 165470.000 165967.000 166461.000 167595.000 167856.000 168023.000 168717.000 170734.000 171223.000 171658.000 171690.000 171838.000 172647.000 173209.000 173713.000 174174.000 174184.000 174209.000 174592.000 175034.000 175174.000 176426.000 176721.000 177505.000 177961.000 178057.000 178423.000 178510.000 179012.000 179688.000 180969.000 181520.000 183200.000 183676.000 183726.000 183908.000 184357.000 184500.000 184654.000 185062.000 185348.000 185513.000 185520.000 185535.000 185563.000 186826.000 188811.000 189178.000 190218.000 190346.000 190521.000 190668.000 191480.000 192117.000 192746.000 192970.000 193279.000 194026.000 194482.000 195229.000 195919.000 196709.000 196757.000 197104.000 197632.000 197887.000 198436.000 198644.000 198692.000 198851.000 199065.000 199393.000 199764.000 200182.000 200215.000 
query 3 nn's (20): 312537 (20) 9187340 (20) 4958933 (20) 4596264 (20) 2713231 (20) 6494781 (20) 957584 (20) 8513372 (20) 2168311 (20) 5777862 (20) 413472 (20) 1655062 (20) 5089882 (20) 6044963 (20) 9748260 (20) 4199832 (20) 8173794 (20) 1163500 (20) 9215950 (20) 5605602 (20) 6135681 (20) 3224459 (20) 6587945 (20) 4725525 (20) 7726958 (20) 425642 (20) 4507635 (20) 3155469 (20) 4201038 (20) 6851061 (20) 7438015 (20) 9047079 (20) 9324985 (20) 8494402 (20) 91346 (20) 9063948 (20) 162717 (20) 2800826 (20) 8035853 (20) 747584 (20) 3103885 (20) 1223750 (20) 3105607 (20) 4850095 (20) 4204875 (20) 279201 (20) 271267 (20) 5268735 (20) 5766252 (20) 4978161 (20) 5215954 (20) 2050270 (20) 3845098 (20) 9836221 (20) 3938092 (20) 7084458 (20) 722898 (20) 6797343 (20) 2204852 (20) 1872640 (20) 113200 (20) 6543468 (20) 3794225 (20) 4503847 (20) 2759880 (20) 1893888 (20) 1455396 (20) 9402059 (20) 7558078 (20) 7614331 (20) 9413577 (20) 7601996 (20) 4970502 (20) 2727847 (20) 6302146 (20) 2168617 (20) 625390 (20) 5050274 (20) 1331481 (20) 8089506 (20) 1512987 (20) 5137719 (20) 661427 (20) 5438521 (20) 3698650 (20) 80668 (20) 3447069 (20) 7122703 (20) 7363243 (20) 2592014 (20) 296212 (20) 1795061 (20) 8709127 (20) 1640112 (20) 9077716 (20) 9670819 (20) 6785440 (20) 5365055 (20) 140395 (20) 2499380 (20) 
     dis: 	12470.000 26560.000 29254.000 31650.000 52411.000 55996.000 59585.000 64819.000 71878.000 75840.000 76047.000 79403.000 79805.000 81056.000 83555.000 85496.000 86542.000 88381.000 89528.000 89608.000 90354.000 90888.000 91519.000 93551.000 94014.000 94344.000 94869.000 100234.000 100298.000 102736.000 103026.000 103073.000 104164.000 104246.000 104742.000 106208.000 109166.000 109258.000 109674.000 110318.000 112277.000 112785.000 112810.000 115104.000 115426.000 115447.000 116701.000 116716.000 117220.000 118075.000 118257.000 118523.000 119293.000 120848.000 121709.000 122696.000 123820.000 124801.000 125188.000 126302.000 126337.000 128891.000 130219.000 131114.000 131131.000 131415.000 131525.000 131830.000 133568.000 133968.000 134541.000 137573.000 137748.000 137934.000 138575.000 139065.000 139453.000 139548.000 140424.000 140576.000 141136.000 141548.000 142151.000 142499.000 143300.000 144100.000 145683.000 146552.000 147210.000 147776.000 147788.000 147878.000 149492.000 149670.000 150547.000 151148.000 151228.000 151731.000 152322.000 152605.000 
query 4 nn's (20): 14334 (20) 4062732 (20) 2547113 (20) 2296616 (20) 5357116 (20) 7759350 (20) 7329333 (20) 9113828 (20) 5778272 (20) 8803622 (20) 850502 (20) 3884217 (20) 7777772 (20) 3918530 (20) 9280784 (20) 6536958 (20) 7727098 (20) 4034687 (20) 560202 (20) 2387924 (20) 8985470 (20) 4317329 (20) 6387042 (20) 3544865 (20) 3908326 (20) 9044864 (20) 4844799 (20) 3375022 (20) 4404808 (20) 4010281 (20) 2719369 (20) 9813313 (20) 8608389 (20) 6957005 (20) 8943205 (20) 1116892 (20) 3685437 (20) 6515409 (20) 4179338 (20) 750455 (20) 2612519 (20) 213758 (20) 5094707 (20) 7171235 (20) 745403 (20) 7446057 (20) 6771560 (20) 1849365 (20) 1082566 (20) 5015215 (20) 5494677 (20) 9324975 (20) 3142235 (20) 7200160 (20) 3451952 (20) 9395477 (20) 8970666 (20) 4493829 (20) 7838542 (20) 4371152 (20) 8815299 (20) 2731319 (20) 6009836 (20) 1013233 (20) 4673773 (20) 9954188 (20) 807371 (20) 2179159 (20) 7924907 (20) 5426613 (20) 3874379 (20) 1962542 (20) 9601125 (20) 222259 (20) 2252408 (20) 3274244 (20) 2632149 (20) 8555193 (20) 2686222 (20) 9138934 (20) 9171383 (20) 8769040 (20) 8429457 (20) 5485265 (20) 2958981 (20) 324376 (20) 5162492 (20) 7423206 (20) 4204748 (20) 4652836 (20) 5804763 (20) 2727847 (20) 6960989 (20) 3500602 (20) 8315920 (20) 5322387 (20) 646363 (20) 8582155 (20) 8463071 (20) 7350784 (20) 
     dis: 	111590.000 119181.000 126086.000 129728.000 130041.000 130912.000 131810.000 132683.000 133776.000 137999.000 138341.000 139739.000 140324.000 140618.000 140961.000 140978.000 142965.000 143563.000 144145.000 144516.000 145050.000 146411.000 146797.000 146872.000 148049.000 148305.000 149110.000 149135.000 150236.000 150801.000 151329.000 151687.000 151952.000 153181.000 153213.000 153235.000 153684.000 153835.000 154224.000 154853.000 155410.000 155908.000 155929.000 156067.000 156398.000 156496.000 156509.000 156707.000 157501.000 159022.000 159064.000 159105.000 159166.000 159443.000 159840.000 160253.000 160382.000 160581.000 160654.000 161818.000 162320.000 162327.000 162435.000 162854.000 163120.000 163123.000 163364.000 163404.000 163994.000 164495.000 164578.000 164818.000 164848.000 164942.000 164994.000 165068.000 165167.000 165171.000 165320.000 165358.000 165397.000 165521.000 165523.000 165724.000 165901.000 165988.000 166238.000 166286.000 166322.000 166641.000 166782.000 167066.000 167464.000 167543.000 167625.000 167799.000 167803.000 167903.000 168006.000 168367.000 
[ 579.877s ] *** Query time: 165.937
qps: 60.264
 *** acorn recall 
efs:600
acorn get 216174 postive res from 1000000 results, recall@100:0.216
recall dist(10% per bucket): 0.245 0.190 0.256 0.208 0.083 0.019 0.001 0.000 0.000 0.000 0.000 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[579.915s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 7234446
ndis: 0
nreorder: 0
average distance computations per query: 723.445
[ 579.915s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_20.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_20_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64 600 128"
	User time (seconds): 568.94
	System time (seconds): 11.95
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 9:40.95
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17015944
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4557287
	Voluntary context switches: 8
	Involuntary context switches: 944
	Swaps: 0
	File system inputs: 1024
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 22:50
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64
ef_search: 600 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 1.053s ] Loaded metadata, 10000000 attr's found
[ 1.053s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.055s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json
[ 1.057s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json
[ 1.182s ] Loaded ground truth, gt_size: 100
[ 1.182s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999563 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255873
Average degree per layer:1709312.167
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 11.933s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 600
selectivity: 0.500
[ 632.919s ] Query results (vector ids, then distances):
query 0 nn's (6): 2898305 (6) 1167995 (6) 5514922 (6) 2515600 (6) 1160663 (6) 4738758 (6) 6346833 (6) 6984373 (6) 7077742 (6) 7468388 (6) 9397776 (6) 238649 (6) 2213388 (6) 5579551 (6) 8191903 (6) 7860530 (6) 1928425 (6) 7866119 (6) 1174332 (6) 9313115 (6) 2375126 (6) 2923944 (6) 8851580 (6) 7164607 (6) 2807602 (6) 9925949 (6) 888010 (6) 6951413 (6) 2115887 (6) 578867 (6) 2078396 (6) 8435256 (6) 2549151 (6) 9251169 (6) 5343331 (6) 4689336 (6) 1892471 (6) 419470 (6) 5520369 (6) 5710919 (6) 9409479 (6) 331007 (6) 6019325 (6) 1297904 (6) 5916323 (6) 2250118 (6) 5341499 (6) 6321391 (6) 1929740 (6) 3879851 (6) 5305337 (6) 463666 (6) 242725 (6) 4072432 (6) 3022114 (6) 5324763 (6) 7237592 (6) 9237550 (6) 7912999 (6) 7011791 (6) 2365415 (6) 6328993 (6) 3031693 (6) 5308027 (6) 5835685 (6) 447965 (6) 2986000 (6) 6527573 (6) 4671898 (6) 7920998 (6) 5228659 (6) 7455148 (6) 5376243 (6) 3435228 (6) 3670000 (6) 3049131 (6) 6009021 (6) 8983756 (6) 1249067 (6) 7220675 (6) 9103413 (6) 9839146 (6) 7033151 (6) 1000673 (6) 4532213 (6) 7989030 (6) 6560693 (6) 8150587 (6) 8052577 (6) 476293 (6) 5356206 (6) 4218358 (6) 3094752 (6) 4698776 (6) 1810730 (6) 8610630 (6) 1858008 (6) 6329451 (6) 8446671 (6) 1292574 (6) 
     dis: 	67180.000 72023.000 72798.000 73465.000 74292.000 74463.000 76136.000 76880.000 76934.000 77229.000 77424.000 77858.000 78558.000 78568.000 78749.000 78859.000 79208.000 79448.000 79542.000 79682.000 79929.000 79984.000 80060.000 80358.000 80454.000 80660.000 80692.000 80726.000 80780.000 80841.000 81711.000 81799.000 81827.000 81847.000 81853.000 82232.000 82386.000 82431.000 82492.000 82540.000 82688.000 83126.000 83269.000 83349.000 83357.000 83391.000 83435.000 83457.000 83583.000 83717.000 83735.000 83787.000 84214.000 84223.000 84253.000 84463.000 84487.000 84526.000 84734.000 85235.000 85293.000 85322.000 85432.000 85487.000 85597.000 85625.000 85736.000 85782.000 85847.000 85882.000 85928.000 85963.000 85985.000 86005.000 86005.000 86023.000 86034.000 86063.000 86100.000 86211.000 86265.000 86308.000 86333.000 86345.000 86402.000 86458.000 86512.000 86702.000 86793.000 86891.000 86902.000 86906.000 86958.000 87100.000 87272.000 87333.000 87358.000 87404.000 87510.000 87523.000 
query 1 nn's (6): 8449497 (6) 5552416 (6) 4234271 (6) 2253711 (6) 1273419 (6) 411491 (6) 1263214 (6) 1233453 (6) 9219153 (6) 469965 (6) 1909131 (6) 9791343 (6) 3309105 (6) 6265610 (6) 522429 (6) 1120308 (6) 8596968 (6) 7917424 (6) 7343838 (6) 7120642 (6) 1745130 (6) 7331745 (6) 2993914 (6) 4702839 (6) 1346170 (6) 5589386 (6) 9015118 (6) 7692715 (6) 5531491 (6) 375999 (6) 6073626 (6) 1843885 (6) 7693023 (6) 9537422 (6) 3631651 (6) 3786289 (6) 1341845 (6) 9167559 (6) 8590082 (6) 7031326 (6) 8175356 (6) 1526669 (6) 3050119 (6) 7342014 (6) 8918460 (6) 895436 (6) 5313986 (6) 1000577 (6) 1503119 (6) 1461697 (6) 8440112 (6) 9577495 (6) 6986308 (6) 4364584 (6) 2652241 (6) 8675363 (6) 2353489 (6) 3744772 (6) 963644 (6) 695127 (6) 2235415 (6) 4009753 (6) 3083636 (6) 7968009 (6) 5423598 (6) 9553578 (6) 2093850 (6) 7859261 (6) 8518091 (6) 6692864 (6) 1932354 (6) 5790422 (6) 6672132 (6) 3740235 (6) 3200275 (6) 3891904 (6) 7513620 (6) 491814 (6) 8155958 (6) 1410399 (6) 7062500 (6) 9388703 (6) 735668 (6) 4960102 (6) 5349437 (6) 5869072 (6) 6383821 (6) 6281612 (6) 8743749 (6) 7512095 (6) 7807906 (6) 298308 (6) 5887328 (6) 1012664 (6) 8857836 (6) 2077396 (6) 4539661 (6) 2307688 (6) 7610510 (6) 3648617 (6) 
     dis: 	32633.000 42944.000 44439.000 45140.000 46522.000 46959.000 47608.000 48662.000 50730.000 50753.000 51310.000 51493.000 51760.000 51836.000 52132.000 52532.000 52768.000 52837.000 54601.000 54684.000 54734.000 54968.000 55326.000 55982.000 56324.000 56410.000 56457.000 56490.000 56591.000 56619.000 57111.000 57411.000 57450.000 57685.000 57719.000 57771.000 57814.000 57926.000 58064.000 58257.000 58298.000 58488.000 58502.000 58531.000 58837.000 59156.000 59169.000 59284.000 59550.000 60324.000 60340.000 60725.000 60913.000 61385.000 61403.000 62084.000 62214.000 62251.000 62305.000 62405.000 62601.000 62791.000 62992.000 63272.000 63282.000 63382.000 63407.000 63431.000 63533.000 63600.000 63792.000 63807.000 63864.000 63956.000 64056.000 64165.000 64180.000 64377.000 64475.000 64505.000 64512.000 64556.000 64597.000 64813.000 64817.000 64890.000 64958.000 65021.000 65073.000 65166.000 65184.000 65450.000 65514.000 65547.000 65552.000 65598.000 65629.000 65748.000 65923.000 66221.000 
query 2 nn's (6): 8667807 (6) 1571863 (6) 237844 (6) 199400 (6) 2304211 (6) 4791170 (6) 6296252 (6) 2795236 (6) 7500565 (6) 9466222 (6) 9416415 (6) 9068473 (6) 9554416 (6) 436139 (6) 4279056 (6) 9410320 (6) 5988705 (6) 4154052 (6) 2448858 (6) 40266 (6) 4757879 (6) 8863268 (6) 8068558 (6) 2994193 (6) 5770225 (6) 3942637 (6) 893390 (6) 8923155 (6) 3832486 (6) 1229611 (6) 2346097 (6) 9362419 (6) 9457112 (6) 4433607 (6) 9559093 (6) 1329974 (6) 4555038 (6) 4048068 (6) 7701746 (6) 4450077 (6) 409456 (6) 419195 (6) 2393824 (6) 8563094 (6) 8590994 (6) 9790465 (6) 3795529 (6) 9330360 (6) 8198272 (6) 6347813 (6) 8915550 (6) 6114289 (6) 1860330 (6) 3967402 (6) 3061201 (6) 3140269 (6) 5563048 (6) 888761 (6) 7508409 (6) 7685482 (6) 8530462 (6) 8070798 (6) 5631784 (6) 1160482 (6) 5596868 (6) 4861540 (6) 8635193 (6) 1463083 (6) 8333106 (6) 7298098 (6) 3567890 (6) 2723946 (6) 1956474 (6) 4418406 (6) 1625792 (6) 4713533 (6) 445822 (6) 2038327 (6) 247874 (6) 4135242 (6) 764856 (6) 1297680 (6) 9384590 (6) 4822642 (6) 8064334 (6) 5715023 (6) 2180225 (6) 8801441 (6) 8075681 (6) 2027436 (6) 8329652 (6) 1561941 (6) 1992904 (6) 752202 (6) 2247452 (6) 8476333 (6) 8690196 (6) 2407252 (6) 1758192 (6) 945107 (6) 
     dis: 	47988.000 48528.000 49294.000 49395.000 49692.000 50576.000 51071.000 51181.000 51634.000 51654.000 51724.000 52145.000 52237.000 52554.000 52719.000 52939.000 53001.000 53029.000 53034.000 53080.000 53215.000 53225.000 53350.000 53360.000 53412.000 53664.000 53672.000 54025.000 54273.000 54404.000 54464.000 54496.000 54765.000 54908.000 55005.000 55134.000 55225.000 55277.000 55365.000 55719.000 55753.000 55957.000 55985.000 55995.000 56108.000 56197.000 56262.000 56319.000 56416.000 56449.000 56449.000 56627.000 56884.000 56939.000 56977.000 57016.000 57031.000 57045.000 57099.000 57176.000 57216.000 57245.000 57398.000 57554.000 57613.000 57716.000 57831.000 57848.000 57924.000 58036.000 58195.000 58328.000 58484.000 58485.000 58508.000 58526.000 58536.000 58701.000 58734.000 58766.000 58933.000 58977.000 59021.000 59060.000 59109.000 59123.000 59124.000 59135.000 59158.000 59233.000 59281.000 59320.000 59330.000 59512.000 59600.000 59745.000 59783.000 59815.000 59887.000 59895.000 
query 3 nn's (6): 4083199 (6) 2205832 (6) 4147780 (6) 8410503 (6) 2965607 (6) 8174765 (6) 7301932 (6) 3643741 (6) 1985932 (6) 9132978 (6) 3143192 (6) 3459738 (6) 6411621 (6) 8419826 (6) 727241 (6) 9010353 (6) 8649378 (6) 4998281 (6) 7914184 (6) 1911911 (6) 2218358 (6) 1344917 (6) 1739894 (6) 4246457 (6) 4486659 (6) 6760157 (6) 1514080 (6) 6486623 (6) 692217 (6) 9019201 (6) 7709017 (6) 2630576 (6) 3633444 (6) 9925791 (6) 5755561 (6) 992744 (6) 9354839 (6) 6804450 (6) 9625994 (6) 9517308 (6) 5792548 (6) 7691560 (6) 7749958 (6) 9335193 (6) 1028926 (6) 6317467 (6) 5777538 (6) 5430458 (6) 7119531 (6) 7463079 (6) 7614050 (6) 1502235 (6) 686764 (6) 2236726 (6) 422848 (6) 7865854 (6) 8344580 (6) 936598 (6) 8702151 (6) 9166 (6) 5293699 (6) 578322 (6) 2659564 (6) 6697954 (6) 1133113 (6) 3252978 (6) 840086 (6) 2168780 (6) 6346885 (6) 6281603 (6) 3828353 (6) 9421859 (6) 5651613 (6) 7556732 (6) 82034 (6) 9947826 (6) 9469929 (6) 1229577 (6) 5663020 (6) 9332155 (6) 6306155 (6) 1604878 (6) 5627714 (6) 7745448 (6) 618359 (6) 2842840 (6) 9102009 (6) 4540202 (6) 1874032 (6) 2305251 (6) 4673685 (6) 3118365 (6) 1085693 (6) 7786145 (6) 2009843 (6) 5561400 (6) 6629787 (6) 3566371 (6) 8381527 (6) 3522530 (6) 
     dis: 	3910.000 4343.000 4550.000 4817.000 5013.000 5180.000 5240.000 5279.000 5371.000 5559.000 5653.000 5862.000 5998.000 6096.000 6237.000 6311.000 6468.000 6624.000 6624.000 6655.000 6693.000 6747.000 6845.000 6981.000 7021.000 7029.000 7171.000 7208.000 7226.000 7233.000 7327.000 7486.000 7509.000 7580.000 7587.000 7661.000 7725.000 7797.000 7825.000 7861.000 8040.000 8087.000 8122.000 8123.000 8228.000 8312.000 8322.000 8355.000 8362.000 8404.000 8407.000 8414.000 8491.000 8496.000 8500.000 8579.000 8594.000 8643.000 8809.000 8830.000 8860.000 8885.000 8903.000 8912.000 8946.000 8993.000 9013.000 9100.000 9153.000 9157.000 9207.000 9490.000 9491.000 9526.000 9581.000 9621.000 9695.000 9736.000 9763.000 9813.000 9888.000 9946.000 9965.000 9980.000 9990.000 9997.000 10018.000 10060.000 10063.000 10084.000 10176.000 10216.000 10238.000 10242.000 10249.000 10267.000 10280.000 10281.000 10292.000 10335.000 
query 4 nn's (6): 7241286 (6) 3918536 (6) 3477074 (6) 811272 (6) 7963557 (6) 1751938 (6) 1141817 (6) 4344456 (6) 6388463 (6) 3220361 (6) 546979 (6) 6408001 (6) 7423926 (6) 7603300 (6) 9001755 (6) 5708200 (6) 1850409 (6) 8630333 (6) 3637016 (6) 5175563 (6) 1800938 (6) 5709057 (6) 5117098 (6) 990482 (6) 3842053 (6) 2732612 (6) 4380344 (6) 6838860 (6) 4501065 (6) 8713517 (6) 3650068 (6) 9170163 (6) 9836279 (6) 2251576 (6) 4831513 (6) 3004652 (6) 2989150 (6) 4719865 (6) 9067729 (6) 4128605 (6) 9383376 (6) 1543122 (6) 4766049 (6) 5707536 (6) 4854334 (6) 7559534 (6) 4158427 (6) 64045 (6) 3647183 (6) 6699578 (6) 3839204 (6) 1020874 (6) 1375658 (6) 6330957 (6) 6258948 (6) 1466559 (6) 8885018 (6) 5399121 (6) 149112 (6) 4399052 (6) 7907570 (6) 5826594 (6) 603409 (6) 8838225 (6) 163735 (6) 6565772 (6) 5001194 (6) 8756074 (6) 379765 (6) 61611 (6) 9821817 (6) 3446009 (6) 9973187 (6) 3823000 (6) 2288117 (6) 8972367 (6) 4331349 (6) 6658100 (6) 1686408 (6) 2454280 (6) 5314473 (6) 3978865 (6) 2617346 (6) 6116720 (6) 5287225 (6) 1784595 (6) 3814747 (6) 9182395 (6) 3882262 (6) 9418375 (6) 2430179 (6) 3803911 (6) 797235 (6) 2779329 (6) 7302816 (6) 6754072 (6) 487654 (6) 5641404 (6) 6784852 (6) 2996033 (6) 
     dis: 	77624.000 78379.000 80355.000 81973.000 82038.000 84283.000 85933.000 85939.000 86061.000 86625.000 86866.000 86935.000 87152.000 87829.000 87905.000 88206.000 88322.000 88437.000 88515.000 88607.000 89079.000 89153.000 89682.000 90021.000 90358.000 90596.000 90617.000 90822.000 90882.000 91007.000 91009.000 91164.000 91244.000 91292.000 91392.000 91478.000 91566.000 91846.000 92148.000 92212.000 92692.000 92925.000 93001.000 93074.000 93129.000 93517.000 93603.000 93643.000 93789.000 94180.000 94216.000 94288.000 94418.000 94447.000 94672.000 94725.000 94730.000 94807.000 95203.000 95276.000 95354.000 95431.000 95437.000 95449.000 95492.000 95525.000 95630.000 95830.000 96148.000 96151.000 96157.000 96236.000 96272.000 96377.000 96597.000 96804.000 96929.000 96976.000 97062.000 97065.000 97247.000 97454.000 97472.000 97494.000 97524.000 97615.000 97638.000 97667.000 97696.000 97741.000 97998.000 98148.000 98154.000 98187.000 98200.000 98226.000 98333.000 98399.000 98408.000 98651.000 
[ 632.919s ] *** Query time: 139.551
qps: 71.658
 *** acorn recall 
efs:600
acorn get 986223 postive res from 1000000 results, recall@100:0.986
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.013 0.427 0.559 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[632.957s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 207231645
ndis: 0
nreorder: 0
average distance computations per query: 20723.164
[ 632.957s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_6.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_6_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64 600 128"
	User time (seconds): 610.22
	System time (seconds): 24.31
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 10:34.57
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17015940
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 7095239
	Voluntary context switches: 1
	Involuntary context switches: 1105
	Swaps: 0
	File system inputs: 0
	File system outputs: 40
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:17
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64
ef_search: 600 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 1.134s ] Loaded metadata, 10000000 attr's found
[ 1.134s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.137s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json
[ 1.139s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json
[ 1.269s ] Loaded ground truth, gt_size: 100
[ 1.269s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999563 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255873
Average degree per layer:1709312.167
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 12.957s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 600
selectivity: 0.100
[ 694.133s ] Query results (vector ids, then distances):
query 0 nn's (10): 4160485 (10) 7632021 (10) 5423931 (10) 9485971 (10) 5643020 (10) 7873580 (10) 392808 (10) 6002319 (10) 1203246 (10) 8771139 (10) 8364178 (10) 5368660 (10) 7842689 (10) 5128198 (10) 7263957 (10) 1698351 (10) 4586713 (10) 902148 (10) 1708550 (10) 5066003 (10) 9299823 (10) 9584266 (10) 7585271 (10) 4124875 (10) 3068799 (10) 9082011 (10) 5315711 (10) 8423092 (10) 5008601 (10) 3474811 (10) 3390335 (10) 9541713 (10) 5327123 (10) 7583921 (10) 2702664 (10) 8360507 (10) 7868374 (10) 3627409 (10) 2312218 (10) 3072377 (10) 3539433 (10) 6258663 (10) 2260181 (10) 1508937 (10) 5306693 (10) 9823129 (10) 8031075 (10) 151474 (10) 4699500 (10) 704919 (10) 7868501 (10) 6562398 (10) 8843894 (10) 8483563 (10) 6800399 (10) 7135049 (10) 3287109 (10) 3252917 (10) 5500930 (10) 2048439 (10) 4441695 (10) 5109782 (10) 6591990 (10) 8746173 (10) 429808 (10) 7589020 (10) 4910351 (10) 993318 (10) 7258709 (10) 7655881 (10) 9433071 (10) 1712794 (10) 7292419 (10) 593325 (10) 8989130 (10) 4483915 (10) 7486828 (10) 678609 (10) 51805 (10) 4107644 (10) 9428046 (10) 5024265 (10) 7100864 (10) 9597643 (10) 6661910 (10) 9158543 (10) 2554600 (10) 4481800 (10) 3509825 (10) 3720397 (10) 3445007 (10) 1752009 (10) 1295849 (10) 9297762 (10) 5064036 (10) 8308360 (10) 4890746 (10) 5455770 (10) 6992352 (10) 9309037 (10) 
     dis: 	65950.000 75587.000 77145.000 78877.000 82000.000 82438.000 83552.000 83988.000 84353.000 85066.000 85161.000 85365.000 85925.000 86198.000 86743.000 87049.000 87310.000 87357.000 87415.000 87515.000 87542.000 87824.000 87858.000 88190.000 88223.000 88302.000 88379.000 88743.000 88866.000 89105.000 89178.000 89360.000 89388.000 89528.000 89539.000 89755.000 89923.000 89924.000 89990.000 90113.000 90219.000 90281.000 90521.000 90535.000 90636.000 90832.000 91152.000 91159.000 91179.000 91428.000 91451.000 91473.000 91501.000 91774.000 91791.000 91868.000 92098.000 92104.000 92187.000 92495.000 92534.000 92570.000 92624.000 92804.000 92859.000 93011.000 93071.000 93077.000 93335.000 93393.000 93440.000 93522.000 93815.000 93971.000 94059.000 94107.000 94227.000 94424.000 94694.000 94698.000 95088.000 95371.000 95429.000 95492.000 95501.000 95538.000 95614.000 95738.000 95806.000 95855.000 96008.000 96052.000 96075.000 96101.000 96127.000 96187.000 96236.000 96370.000 96471.000 96563.000 
query 1 nn's (10): 4907604 (10) 4922660 (10) 9933148 (10) 8588450 (10) 4689763 (10) 9211699 (10) 3665630 (10) 4512099 (10) 1259657 (10) 9913606 (10) 1887729 (10) 6335574 (10) 9349060 (10) 2234566 (10) 5226515 (10) 482087 (10) 6674672 (10) 8346283 (10) 9643854 (10) 1737968 (10) 7502105 (10) 4821002 (10) 9980694 (10) 8063568 (10) 3241120 (10) 6618543 (10) 4399493 (10) 3858730 (10) 2021990 (10) 5561330 (10) 6312393 (10) 9285737 (10) 9931915 (10) 5838578 (10) 9164450 (10) 7851813 (10) 2532663 (10) 5707690 (10) 643587 (10) 2070607 (10) 7077341 (10) 5074486 (10) 8757781 (10) 4365144 (10) 9719889 (10) 4389334 (10) 3335948 (10) 7094836 (10) 1018756 (10) 4178652 (10) 8903515 (10) 9810387 (10) 2949812 (10) 148395 (10) 9964913 (10) 9967397 (10) 5682634 (10) 5632105 (10) 4892821 (10) 2524359 (10) 9258708 (10) 5934521 (10) 8549337 (10) 9275179 (10) 954343 (10) 6579804 (10) 801963 (10) 1395848 (10) 717773 (10) 4130277 (10) 1111247 (10) 2604205 (10) 3553376 (10) 6132369 (10) 8448472 (10) 797788 (10) 8881883 (10) 9820536 (10) 1589644 (10) 7379199 (10) 3566500 (10) 4546662 (10) 9220661 (10) 3881464 (10) 7546943 (10) 6193228 (10) 4771033 (10) 8226202 (10) 3423010 (10) 566473 (10) 9849685 (10) 4734717 (10) 4177090 (10) 1208441 (10) 8603784 (10) 2541318 (10) 2749783 (10) 3709667 (10) 7843147 (10) 5013067 (10) 
     dis: 	46066.000 56486.000 57000.000 58633.000 59030.000 59230.000 59901.000 60127.000 60594.000 60931.000 60959.000 62023.000 62069.000 62094.000 62693.000 63173.000 65576.000 65936.000 66298.000 66468.000 66544.000 66583.000 66656.000 67923.000 67993.000 68018.000 68168.000 68711.000 69141.000 69463.000 69703.000 69780.000 70925.000 71072.000 71233.000 71312.000 71473.000 71509.000 71707.000 71823.000 72328.000 72435.000 72763.000 72819.000 72863.000 73017.000 73194.000 73295.000 73570.000 73621.000 73710.000 73816.000 73959.000 74323.000 74470.000 74478.000 74500.000 74524.000 74826.000 74847.000 74879.000 74941.000 75408.000 75463.000 75517.000 75536.000 75800.000 75832.000 75898.000 76030.000 76379.000 76605.000 76694.000 76786.000 76799.000 76818.000 76837.000 77121.000 77383.000 77617.000 77742.000 78527.000 78559.000 78885.000 78981.000 79051.000 79165.000 79443.000 79844.000 80220.000 80298.000 80747.000 80872.000 80989.000 81034.000 81046.000 81185.000 81201.000 81355.000 81364.000 
query 2 nn's (10): 3493381 (10) 5637368 (10) 4457160 (10) 4677344 (10) 2511585 (10) 1198061 (10) 9541874 (10) 5039283 (10) 49352 (10) 944526 (10) 1878319 (10) 4907071 (10) 6120728 (10) 4283746 (10) 8051890 (10) 3667879 (10) 3224964 (10) 2556455 (10) 4848879 (10) 7366864 (10) 2855545 (10) 8064263 (10) 4112561 (10) 5407857 (10) 5088938 (10) 9375728 (10) 871001 (10) 909313 (10) 3095363 (10) 1897720 (10) 5274336 (10) 3211459 (10) 4167330 (10) 1883447 (10) 9830393 (10) 2660391 (10) 9355645 (10) 1545324 (10) 8131606 (10) 4230661 (10) 9557793 (10) 3327268 (10) 5813545 (10) 7221663 (10) 4042128 (10) 9534509 (10) 9165964 (10) 4188703 (10) 8860131 (10) 9982250 (10) 8084363 (10) 4329845 (10) 2432664 (10) 2721821 (10) 1545425 (10) 3579460 (10) 1597876 (10) 419533 (10) 9970439 (10) 1418565 (10) 1025392 (10) 2721941 (10) 8394381 (10) 206324 (10) 7734472 (10) 5388482 (10) 9844531 (10) 2244705 (10) 932507 (10) 5638422 (10) 1066001 (10) 3689971 (10) 9745256 (10) 6226545 (10) 4817838 (10) 1213154 (10) 1519384 (10) 4090854 (10) 8366019 (10) 1916939 (10) 7223977 (10) 2797637 (10) 3134622 (10) 2652720 (10) 1806609 (10) 5371863 (10) 7912354 (10) 3574174 (10) 7122531 (10) 6664994 (10) 4105778 (10) 1133891 (10) 9475689 (10) 6070654 (10) 3570008 (10) 7161229 (10) 7371252 (10) 6501663 (10) 1528109 (10) 113541 (10) 
     dis: 	51043.000 51405.000 51795.000 52215.000 52611.000 54288.000 54558.000 56504.000 56721.000 57351.000 58055.000 58349.000 58777.000 58925.000 59334.000 60030.000 60035.000 60483.000 60775.000 60895.000 61242.000 61267.000 61277.000 61472.000 61905.000 61926.000 61978.000 62187.000 62427.000 62513.000 62866.000 62890.000 62974.000 63881.000 63969.000 64048.000 64103.000 64224.000 64299.000 64307.000 64373.000 64853.000 64853.000 64879.000 64963.000 64988.000 64998.000 65374.000 65394.000 65420.000 65606.000 65763.000 65774.000 65778.000 65944.000 65966.000 66256.000 66656.000 66904.000 67130.000 67259.000 67724.000 67754.000 67875.000 67926.000 67984.000 68140.000 68183.000 68223.000 68231.000 68232.000 68269.000 68305.000 68375.000 68377.000 68386.000 68544.000 68570.000 68668.000 68748.000 68910.000 68921.000 68929.000 68963.000 69026.000 69070.000 69132.000 69162.000 69206.000 69235.000 69302.000 69305.000 69409.000 69430.000 69582.000 69610.000 69902.000 69924.000 69951.000 69993.000 
query 3 nn's (10): 7269483 (10) 3278687 (10) 8381210 (10) 8051314 (10) 5381241 (10) 179529 (10) 222255 (10) 3421950 (10) 1061321 (10) 3112499 (10) 7216322 (10) 543054 (10) 4995291 (10) 3379947 (10) 7829631 (10) 240857 (10) 5619818 (10) 4189992 (10) 8372623 (10) 9906166 (10) 6711509 (10) 5026118 (10) 6934608 (10) 6447621 (10) 3877232 (10) 1896951 (10) 2464354 (10) 6485893 (10) 7127184 (10) 1656853 (10) 406243 (10) 6776211 (10) 8420002 (10) 7505915 (10) 4759076 (10) 116302 (10) 3855680 (10) 9231939 (10) 5661022 (10) 3485217 (10) 9664797 (10) 5122599 (10) 2648578 (10) 323107 (10) 2587214 (10) 8013467 (10) 9927644 (10) 2393763 (10) 808011 (10) 6468324 (10) 3649992 (10) 6365231 (10) 7281219 (10) 5329509 (10) 4593096 (10) 3547401 (10) 9600421 (10) 887194 (10) 4117204 (10) 3719519 (10) 5618980 (10) 3416860 (10) 6993953 (10) 2599501 (10) 4161085 (10) 2139674 (10) 1448035 (10) 9675475 (10) 8799515 (10) 9407537 (10) 2762309 (10) 1425829 (10) 8995335 (10) 4319199 (10) 9561196 (10) 657903 (10) 1705936 (10) 5015756 (10) 1916764 (10) 8523280 (10) 5224258 (10) 2065036 (10) 4845451 (10) 352619 (10) 6144203 (10) 1570115 (10) 4702241 (10) 3013029 (10) 7745296 (10) 3309893 (10) 1097904 (10) 3159877 (10) 2596728 (10) 5087658 (10) 3420222 (10) 5690647 (10) 8279299 (10) 597362 (10) 699672 (10) 9692573 (10) 
     dis: 	4894.000 7183.000 7506.000 7644.000 7666.000 7708.000 8395.000 8402.000 8608.000 9075.000 9254.000 9374.000 9382.000 9470.000 9746.000 10000.000 10277.000 10287.000 10420.000 10511.000 10611.000 10652.000 10851.000 11105.000 11135.000 11281.000 11484.000 11521.000 11601.000 11742.000 11828.000 11882.000 11947.000 12021.000 12393.000 12477.000 12659.000 13039.000 13045.000 13072.000 13183.000 13448.000 13603.000 13613.000 13629.000 13652.000 13720.000 13734.000 13760.000 13870.000 13916.000 13919.000 13928.000 14017.000 14038.000 14106.000 14175.000 14228.000 14306.000 14326.000 14426.000 14474.000 14478.000 14534.000 14680.000 14870.000 14947.000 15025.000 15083.000 15165.000 15341.000 15357.000 15384.000 15411.000 15445.000 15489.000 15526.000 15562.000 15605.000 15664.000 15766.000 15778.000 15811.000 15828.000 15905.000 16012.000 16046.000 16102.000 16236.000 16269.000 16408.000 16469.000 16474.000 16528.000 16627.000 16629.000 16644.000 16819.000 16820.000 16836.000 
query 4 nn's (10): 5493369 (10) 6551841 (10) 3823745 (10) 935279 (10) 4150166 (10) 5135489 (10) 4962535 (10) 5466491 (10) 1015238 (10) 484991 (10) 330819 (10) 1162782 (10) 5126636 (10) 8718571 (10) 9398213 (10) 745843 (10) 7508102 (10) 1029172 (10) 3287249 (10) 8171628 (10) 4618448 (10) 3355354 (10) 8961414 (10) 2827238 (10) 8303120 (10) 8178422 (10) 4243361 (10) 523577 (10) 5574338 (10) 4166551 (10) 3553812 (10) 5013855 (10) 175284 (10) 1086928 (10) 3958825 (10) 3806285 (10) 1430207 (10) 6415311 (10) 1863408 (10) 3147235 (10) 67796 (10) 6481855 (10) 9294912 (10) 4529199 (10) 2916108 (10) 8976035 (10) 1417456 (10) 5739776 (10) 5425134 (10) 6985534 (10) 6516336 (10) 9394278 (10) 9114314 (10) 3720874 (10) 9104864 (10) 5171141 (10) 6432061 (10) 37561 (10) 9738278 (10) 3546857 (10) 4535770 (10) 125408 (10) 4900336 (10) 6221821 (10) 1289546 (10) 1500710 (10) 6099165 (10) 1140393 (10) 8287324 (10) 4939723 (10) 1911938 (10) 9687221 (10) 7328865 (10) 8915558 (10) 73092 (10) 1295801 (10) 4638845 (10) 515945 (10) 8757921 (10) 5765464 (10) 699709 (10) 1083442 (10) 4540668 (10) 3357213 (10) 2175967 (10) 2618156 (10) 2510436 (10) 5799065 (10) 4812318 (10) 4774126 (10) 2469217 (10) 2287348 (10) 2341966 (10) 600595 (10) 6662196 (10) 616243 (10) 3628157 (10) 4201945 (10) 1335451 (10) 3218794 (10) 
     dis: 	81626.000 89542.000 91268.000 91951.000 92008.000 92149.000 93259.000 95679.000 96147.000 96480.000 97440.000 97821.000 98026.000 98595.000 98607.000 98904.000 99585.000 99609.000 100312.000 100692.000 100750.000 100874.000 101109.000 101261.000 101836.000 101922.000 101985.000 102119.000 102274.000 102288.000 102375.000 102391.000 102485.000 102639.000 102640.000 102643.000 103074.000 103152.000 103283.000 103298.000 103368.000 103401.000 103732.000 103884.000 104000.000 104078.000 104284.000 104407.000 104422.000 104425.000 104476.000 104644.000 104787.000 104802.000 104837.000 104941.000 105019.000 105268.000 105465.000 105506.000 105547.000 105599.000 105858.000 105884.000 105958.000 105961.000 105994.000 106041.000 106117.000 106313.000 106372.000 106449.000 106576.000 106838.000 106971.000 107098.000 107108.000 107110.000 107152.000 107424.000 107432.000 107581.000 107605.000 107617.000 107895.000 107913.000 108207.000 108239.000 108253.000 108484.000 108509.000 108611.000 108658.000 108698.000 108832.000 108854.000 108888.000 108923.000 108984.000 109117.000 
[ 694.134s ] *** Query time: 130.734
qps: 76.491
 *** acorn recall 
efs:600
acorn get 993857 postive res from 1000000 results, recall@100:0.994
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.002 0.291 0.707 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[694.165s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 154138938
ndis: 0
nreorder: 0
average distance computations per query: 15413.895
[ 694.165s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_10.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_10_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64 600 128"
	User time (seconds): 681.11
	System time (seconds): 13.79
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 11:34.92
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17015940
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 4515335
	Voluntary context switches: 1
	Involuntary context switches: 437
	Swaps: 0
	File system inputs: 0
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Start time: 23:43
====================
START: running TEST_ACORN for hnsw, sift data --

dataset: sift10M
N: 10000000
gamma: 25
M: 40
M_beta: 64
topk: 100
threads: 1
dataset file: /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs
query file: /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
attr file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
qrange file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
gt file: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
index file: /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64
ef_search: 600 
dim: 128
metadata or vector loaded from json, size: 10000000
loaded base attributes from:/mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json
[ 1.040s ] Loaded metadata, 10000000 attr's found
[ 1.040s ] Loading query vectors and attributes
query vecs data loaded, with dim: 128, nb=10000
[ 1.043s ] Loaded query vectors from /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs
metadata or vector loaded from json, size: 20000
loaded query attributes from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json
[ 1.051s ] Loaded 10000 sift10M queries
metadata or vector loaded from json, size: 1000000
loaded gt from: /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json
[ 1.216s ] Loaded ground truth, gt_size: 100
[ 1.216s ] Index Params -- d: 128, M: 40, N: 10000000, gamma: 25
--ACORN index created
acorn size: 5985260000, memory: 10705.242MB
====================================
============ ACORN INDEX =============
====================================
METADATA VEC for number nodes per level
level 0 : 9999563 nodes
level 1 : 249955 nodes
level 2 : 6212 nodes
level 3 : 140 nodes
level 4 : 3 nodes
level 5 : 0 nodes
Total edge:10255873
Average degree per layer:1709312.167
node size:10000000
Average degree:149.631
==============================================
====================Search Results====================
==============================================
==============================================
====================Search====================
==============================================
==================== ACORN INDEX ====================
[ 12.152s ] Searching the 100 nearest neighbors of 10000 vectors in the index, efsearch 600
selectivity: 0.010
[ 615.605s ] Query results (vector ids, then distances):
query 0 nn's (19): 7364551 (19) 4897568 (19) 8343482 (19) 1124068 (19) 3111983 (19) 5988192 (19) 117870 (19) 3703593 (19) 8070748 (19) 5818286 (19) 5527150 (19) 9252115 (19) 1168165 (19) 1335151 (19) 5324756 (19) 1426063 (19) 4650380 (19) 2942711 (19) 4709246 (19) 1799488 (19) 3397387 (19) 7725643 (19) 4168442 (19) 8000565 (19) 4642654 (19) 542155 (19) 9993000 (19) 5223791 (19) 8114500 (19) 8325692 (19) 307088 (19) 2633237 (19) 7580848 (19) 2686853 (19) 7947931 (19) 992920 (19) 3178037 (19) 6635565 (19) 7932973 (19) 3171219 (19) 1988196 (19) 7995120 (19) 8179893 (19) 6802335 (19) 6429462 (19) 5110515 (19) 5084022 (19) 449345 (19) 9661437 (19) 6218987 (19) 9749474 (19) 8008785 (19) 9594688 (19) 3316513 (19) 2297261 (19) 8853367 (19) 9088748 (19) 6415975 (19) 5269662 (19) 8210098 (19) 6673716 (19) 6788526 (19) 2657128 (19) 7994543 (19) 8053730 (19) 3966856 (19) 2607909 (19) 5085654 (19) 8279864 (19) 3104238 (19) 6940659 (19) 8690120 (19) 5210731 (19) 5990923 (19) 5019867 (19) 6635709 (19) 1181363 (19) 9488077 (19) 1300566 (19) 7858512 (19) 9513274 (19) 3582382 (19) 5755720 (19) 1946842 (19) 4533747 (19) 2722398 (19) 6839253 (19) 7792735 (19) 7681764 (19) 6782542 (19) 6484062 (19) 1390855 (19) 2149301 (19) 5674793 (19) 4309076 (19) 1415516 (19) 3914666 (19) 4627246 (19) 5380005 (19) 3888733 (19) 
     dis: 	72592.000 83581.000 92597.000 92837.000 93166.000 95627.000 95856.000 96157.000 96531.000 96708.000 97778.000 100128.000 100204.000 101040.000 101328.000 101610.000 101818.000 102593.000 102899.000 103798.000 103845.000 103949.000 104149.000 104206.000 104293.000 104733.000 104767.000 105228.000 105638.000 106026.000 106295.000 106876.000 107089.000 107371.000 107376.000 107584.000 107728.000 108075.000 108104.000 108217.000 108354.000 108641.000 108715.000 109057.000 109146.000 109455.000 109466.000 109482.000 109526.000 109755.000 109837.000 110076.000 110499.000 110584.000 110594.000 110767.000 110917.000 110991.000 111055.000 111332.000 111506.000 111716.000 111720.000 111948.000 112353.000 112502.000 112775.000 112815.000 112835.000 112888.000 112929.000 112995.000 113592.000 113721.000 114254.000 114502.000 114584.000 114642.000 114726.000 114853.000 114998.000 115136.000 115179.000 115684.000 115726.000 115840.000 115842.000 115938.000 116138.000 116165.000 116225.000 116316.000 116354.000 116493.000 116502.000 116611.000 116739.000 116813.000 116893.000 117033.000 
query 1 nn's (19): 1345854 (19) 9490922 (19) 6861763 (19) 8889219 (19) 3779157 (19) 1411930 (19) 1594746 (19) 2457409 (19) 5935793 (19) 7903037 (19) 6068122 (19) 1204854 (19) 9558281 (19) 4136820 (19) 6157672 (19) 3478621 (19) 4924634 (19) 1917409 (19) 2111946 (19) 6506391 (19) 9734664 (19) 90305 (19) 8548415 (19) 4924494 (19) 4317184 (19) 2460722 (19) 1742812 (19) 4814997 (19) 7003404 (19) 132725 (19) 749008 (19) 4566723 (19) 1932645 (19) 670099 (19) 9928244 (19) 1193556 (19) 8905837 (19) 8225678 (19) 3971206 (19) 9709202 (19) 8974279 (19) 479775 (19) 8871287 (19) 3359711 (19) 2830112 (19) 6637812 (19) 5908680 (19) 340915 (19) 2016216 (19) 1840522 (19) 1655080 (19) 5357638 (19) 32221 (19) 6216367 (19) 8331956 (19) 7766962 (19) 8367919 (19) 9988387 (19) 7300255 (19) 593175 (19) 6253010 (19) 5225684 (19) 3850227 (19) 4298384 (19) 8836092 (19) 4432127 (19) 5793025 (19) 3487690 (19) 7221154 (19) 4402963 (19) 2146104 (19) 8685870 (19) 403793 (19) 6105606 (19) 4267754 (19) 8685467 (19) 8914130 (19) 6087898 (19) 940086 (19) 3263307 (19) 5557013 (19) 71132 (19) 9494067 (19) 926213 (19) 2024475 (19) 1250366 (19) 9824953 (19) 5556007 (19) 6562910 (19) 7533930 (19) 3099834 (19) 6762478 (19) 5832101 (19) 2720534 (19) 7667835 (19) 1094427 (19) 846887 (19) 9045877 (19) 3615070 (19) 6030628 (19) 
     dis: 	63804.000 72753.000 73309.000 73418.000 74946.000 75689.000 76884.000 77012.000 78445.000 79015.000 79998.000 80356.000 81365.000 83467.000 83926.000 84960.000 86245.000 86390.000 87305.000 87994.000 88041.000 88671.000 88841.000 89821.000 90055.000 91029.000 91384.000 91518.000 91866.000 93086.000 94769.000 94802.000 94951.000 95175.000 95213.000 95455.000 95654.000 95705.000 97151.000 97301.000 98073.000 98150.000 98288.000 99045.000 99390.000 99834.000 100141.000 100296.000 100552.000 101010.000 101193.000 101501.000 101856.000 102275.000 102776.000 102815.000 102905.000 103121.000 103249.000 104178.000 104259.000 104342.000 104537.000 104695.000 105041.000 105081.000 105556.000 105805.000 106162.000 106562.000 106736.000 107065.000 107072.000 107439.000 107446.000 107678.000 107845.000 107965.000 108005.000 108062.000 108204.000 108393.000 108417.000 108510.000 108835.000 108836.000 109120.000 109590.000 109599.000 109897.000 109907.000 109949.000 110191.000 110227.000 110264.000 110402.000 110708.000 111188.000 111436.000 111583.000 
query 2 nn's (19): 5397690 (19) 283793 (19) 7779045 (19) 6233731 (19) 5857947 (19) 243867 (19) 4212130 (19) 2526681 (19) 1978906 (19) 8816190 (19) 9069258 (19) 7999911 (19) 4815712 (19) 342160 (19) 8220257 (19) 8340024 (19) 5945623 (19) 8536742 (19) 3805324 (19) 5600415 (19) 1587666 (19) 8000700 (19) 4464945 (19) 8655461 (19) 5148835 (19) 9386743 (19) 6537424 (19) 5324267 (19) 4371398 (19) 7357334 (19) 6631052 (19) 8701465 (19) 4790579 (19) 3496848 (19) 7241044 (19) 1334859 (19) 1030206 (19) 2762828 (19) 25703 (19) 8381740 (19) 8626336 (19) 5629248 (19) 6059799 (19) 1909369 (19) 6172797 (19) 6909536 (19) 3847576 (19) 4735060 (19) 8032222 (19) 995425 (19) 9294477 (19) 6003066 (19) 8638555 (19) 9680144 (19) 5450319 (19) 8774602 (19) 892172 (19) 18069 (19) 6863788 (19) 4140915 (19) 1579714 (19) 1175959 (19) 189565 (19) 419742 (19) 2272259 (19) 8522211 (19) 401358 (19) 6548343 (19) 628449 (19) 8587833 (19) 3409292 (19) 4772966 (19) 9796070 (19) 4505350 (19) 4851733 (19) 8580209 (19) 8949426 (19) 1988654 (19) 4152007 (19) 869631 (19) 9391567 (19) 3650017 (19) 9622388 (19) 2140260 (19) 1329864 (19) 3344759 (19) 9837736 (19) 6027115 (19) 391748 (19) 7559524 (19) 4938466 (19) 8802556 (19) 2594493 (19) 4571250 (19) 5207716 (19) 6869219 (19) 5060541 (19) 1485329 (19) 7623904 (19) 1445732 (19) 
     dis: 	61297.000 63549.000 63969.000 64876.000 67040.000 67049.000 70404.000 70683.000 70727.000 70926.000 70999.000 72706.000 72763.000 73304.000 73567.000 73764.000 73826.000 74746.000 75707.000 76728.000 76733.000 76866.000 76929.000 78030.000 78517.000 78525.000 78777.000 78925.000 79293.000 79520.000 79558.000 79650.000 80187.000 80491.000 81085.000 81265.000 81470.000 81749.000 81867.000 81879.000 81960.000 82020.000 82037.000 82058.000 82275.000 82798.000 83160.000 83270.000 83318.000 83518.000 83820.000 83969.000 84048.000 84063.000 84184.000 84198.000 84207.000 84227.000 84282.000 84435.000 84454.000 84497.000 84616.000 84824.000 84894.000 85092.000 85276.000 85586.000 85651.000 85758.000 85912.000 85934.000 85996.000 86034.000 86103.000 86110.000 86145.000 86238.000 86449.000 86585.000 86720.000 86809.000 86859.000 86963.000 87121.000 87306.000 87334.000 87686.000 87716.000 87728.000 87791.000 87870.000 88092.000 88138.000 88249.000 88305.000 88356.000 88555.000 88635.000 88685.000 
query 3 nn's (19): 6942939 (19) 1326424 (19) 9212218 (19) 9558279 (19) 4557732 (19) 8711902 (19) 5591597 (19) 7251408 (19) 5727279 (19) 7372833 (19) 3669244 (19) 9811017 (19) 7723733 (19) 6458284 (19) 1032968 (19) 43953 (19) 3942225 (19) 3244240 (19) 8538968 (19) 3616969 (19) 9596692 (19) 8365826 (19) 8953729 (19) 3772287 (19) 4900964 (19) 6434863 (19) 2820981 (19) 3689791 (19) 2399478 (19) 2359174 (19) 2949879 (19) 480342 (19) 4714162 (19) 9405564 (19) 6368460 (19) 181834 (19) 7785596 (19) 7338668 (19) 5781831 (19) 2324107 (19) 3356716 (19) 8869494 (19) 6974244 (19) 5649712 (19) 5168072 (19) 4261202 (19) 5319718 (19) 8226480 (19) 4873018 (19) 7660373 (19) 8479689 (19) 3536686 (19) 5252290 (19) 664330 (19) 1995157 (19) 4884153 (19) 8076031 (19) 3973342 (19) 5987231 (19) 8960512 (19) 1692092 (19) 9182059 (19) 1379869 (19) 4923540 (19) 9283768 (19) 453798 (19) 8747330 (19) 6286280 (19) 4777562 (19) 5946655 (19) 1219037 (19) 3055002 (19) 5877751 (19) 561918 (19) 4142551 (19) 9799221 (19) 2877794 (19) 1403737 (19) 8719258 (19) 8993852 (19) 4276035 (19) 139416 (19) 3694946 (19) 2628369 (19) 3415143 (19) 5312065 (19) 884295 (19) 7739866 (19) 7408576 (19) 8113554 (19) 9490022 (19) 9047292 (19) 6438552 (19) 7509727 (19) 1048034 (19) 1976852 (19) 8531033 (19) 5447448 (19) 4743693 (19) 4366857 (19) 
     dis: 	6423.000 8268.000 10863.000 11771.000 13684.000 14062.000 14723.000 14759.000 15198.000 15416.000 15429.000 16433.000 16640.000 17228.000 18191.000 19056.000 19694.000 19860.000 20037.000 20180.000 20650.000 21000.000 21174.000 21365.000 21410.000 21980.000 22754.000 22959.000 22989.000 23215.000 23275.000 23508.000 23759.000 23767.000 24059.000 24318.000 24363.000 24393.000 24551.000 24771.000 24992.000 25092.000 25321.000 25541.000 26350.000 26564.000 26605.000 26669.000 26978.000 27056.000 27189.000 27444.000 27577.000 27793.000 27857.000 28020.000 28054.000 28269.000 28365.000 28616.000 28803.000 28886.000 28970.000 29400.000 29457.000 29472.000 29488.000 29887.000 29893.000 29962.000 30199.000 30264.000 30611.000 30687.000 30953.000 31030.000 31090.000 31288.000 31392.000 31433.000 31471.000 31677.000 31719.000 31736.000 31871.000 31975.000 32149.000 32204.000 32241.000 32257.000 32484.000 32495.000 32598.000 32633.000 32798.000 32896.000 32907.000 33143.000 33155.000 33233.000 
query 4 nn's (19): 4901952 (19) 3309021 (19) 1162961 (19) 1818247 (19) 9839729 (19) 1399428 (19) 5815181 (19) 8156875 (19) 3889669 (19) 4588551 (19) 8178942 (19) 299344 (19) 7888972 (19) 5419134 (19) 6373153 (19) 6428554 (19) 5292751 (19) 7864556 (19) 773761 (19) 7091950 (19) 5943750 (19) 1632080 (19) 2900612 (19) 353162 (19) 1602649 (19) 3265243 (19) 3028631 (19) 7442089 (19) 199224 (19) 5385965 (19) 6338147 (19) 7917769 (19) 8659667 (19) 177390 (19) 966123 (19) 1451636 (19) 5063645 (19) 8010426 (19) 7529137 (19) 9260577 (19) 5379967 (19) 7083580 (19) 3203672 (19) 5127753 (19) 6004995 (19) 602877 (19) 1673232 (19) 2003085 (19) 9195084 (19) 6561885 (19) 7300925 (19) 8325836 (19) 5481751 (19) 619828 (19) 5695419 (19) 643263 (19) 743554 (19) 7091775 (19) 5325471 (19) 8727801 (19) 8622489 (19) 1766497 (19) 226474 (19) 3470829 (19) 1880048 (19) 7241845 (19) 8107021 (19) 5095697 (19) 3146927 (19) 8833068 (19) 7558488 (19) 3558655 (19) 3757566 (19) 2349694 (19) 909894 (19) 9222380 (19) 3555305 (19) 2957147 (19) 7401772 (19) 6550244 (19) 3911797 (19) 8278850 (19) 1989195 (19) 1035106 (19) 8189849 (19) 5053043 (19) 2388487 (19) 2899860 (19) 6598133 (19) 6394425 (19) 8884599 (19) 3462030 (19) 9449409 (19) 6082866 (19) 1430989 (19) 9056744 (19) 3017617 (19) 865516 (19) 3838485 (19) 8632953 (19) 
     dis: 	95535.000 99758.000 99958.000 102380.000 103529.000 107979.000 108813.000 109124.000 110168.000 111251.000 111448.000 111693.000 113107.000 113172.000 113515.000 113902.000 114155.000 114813.000 114842.000 114920.000 114939.000 114959.000 115083.000 115556.000 115644.000 115704.000 115773.000 116066.000 116304.000 116368.000 116586.000 116777.000 116839.000 116913.000 117051.000 117191.000 117305.000 117305.000 117347.000 117750.000 117914.000 118170.000 118414.000 118546.000 118831.000 118942.000 118968.000 119635.000 119850.000 119902.000 119914.000 120123.000 120184.000 120342.000 120639.000 120646.000 120784.000 120923.000 121182.000 121408.000 121493.000 121601.000 121631.000 121897.000 121954.000 122000.000 122359.000 122639.000 122838.000 122884.000 122969.000 123005.000 123178.000 123316.000 123322.000 123490.000 123496.000 123512.000 123531.000 123575.000 123681.000 123681.000 123944.000 124116.000 124139.000 124411.000 124463.000 124627.000 124795.000 124870.000 124971.000 124998.000 125077.000 125100.000 125144.000 125320.000 125372.000 125422.000 125623.000 125623.000 
[ 615.605s ] *** Query time: 188.113
qps: 53.160
 *** acorn recall 
efs:600
acorn get 976359 postive res from 1000000 results, recall@100:0.976
recall dist(10% per bucket): 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.001 0.020 0.685 0.294 
finished hybrid index examples
============= ACORN QUERY PROFILING STATS =============
[615.643s] Timing results for search of k=100 nearest neighbors of nq=10000 vectors in the index
n1: 10000
n2: 10000
n3 (number distance comps at level 0): 42795277
ndis: 0
nreorder: 0
average distance computations per query: 4279.528
[ 615.643s ] -----DONE-----
	Command being timed: "../ACORN/build/demos/acorn_query sift10M 10000000 25 40 64 100 1 /mnt/data/mocheng/dataset/sift10m/sift10m.fvecs /mnt/data/mocheng/dataset/sift10m/sift10m_query.fvecs /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/attr_sel_1_500_random.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/qrangesel_1_1_500_random_19.json /mnt/data/mocheng/dataset/sift10m/label/sel_1_500_random/sif_gt_sel_1_1_500_random_19_100.json /mnt/data/mocheng/dataset/sift10m/acorn/index/index_acorn_sel_1_500_random_M40_ga25_Mb64 600 128"
	User time (seconds): 599.24
	System time (seconds): 17.60
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 10:16.90
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 17015932
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 5670518
	Voluntary context switches: 13
	Involuntary context switches: 911
	Swaps: 0
	File system inputs: 984
	File system outputs: 48
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
