Start time: 20:13
N: 1000000
dataset file: ../../dataset/sift/sift_base.fvecs
query file: ../../dataset/sift/sift_query.fvecs
train file: ../../dataset/sift/sift_learn.fvecs
attr file: ../../dataset/sift/sift_attr.json
query range file: ../../dataset/sift/sift_qrange.json
ground truth file: ../../dataset/sift/sift_gt_10.json
partition size M: 32
K: 10
get dataset size: 1000000  d: 128
get query szie: 10000
get train szie: 100000
get range dim: 100.0
groundtruth top K:  10.0
M: 32, Ks: 256, metric : <class 'numpy.uint8'>, code_dtype: l2
iter: 20, seed: 123
Training the subspace: 0 / 32
/home/mocheng/anaconda3/envs/py38/lib/python3.8/site-packages/scipy/cluster/vq.py:602: UserWarning: One of the clusters is empty. Re-run kmeans with a different initialization.
  warnings.warn("One of the clusters is empty. "
Training the subspace: 1 / 32
Training the subspace: 2 / 32
Training the subspace: 3 / 32
Training the subspace: 4 / 32
Training the subspace: 5 / 32
Training the subspace: 6 / 32
Training the subspace: 7 / 32
Training the subspace: 8 / 32
Training the subspace: 9 / 32
Training the subspace: 10 / 32
Training the subspace: 11 / 32
Training the subspace: 12 / 32
Training the subspace: 13 / 32
Training the subspace: 14 / 32
Training the subspace: 15 / 32
Training the subspace: 16 / 32
Training the subspace: 17 / 32
Training the subspace: 18 / 32
Training the subspace: 19 / 32
Training the subspace: 20 / 32
Training the subspace: 21 / 32
Training the subspace: 22 / 32
Training the subspace: 23 / 32
Training the subspace: 24 / 32
Training the subspace: 25 / 32
Training the subspace: 26 / 32
Training the subspace: 27 / 32
Training the subspace: 28 / 32
Training the subspace: 29 / 32
Training the subspace: 30 / 32
Training the subspace: 31 / 32
SIMD support: avx512
Encoding the subspace: 0 / 32
Encoding the subspace: 1 / 32
Encoding the subspace: 2 / 32
Encoding the subspace: 3 / 32
Encoding the subspace: 4 / 32
Encoding the subspace: 5 / 32
Encoding the subspace: 6 / 32
Encoding the subspace: 7 / 32
Encoding the subspace: 8 / 32
Encoding the subspace: 9 / 32
Encoding the subspace: 10 / 32
Encoding the subspace: 11 / 32
Encoding the subspace: 12 / 32
Encoding the subspace: 13 / 32
Encoding the subspace: 14 / 32
Encoding the subspace: 15 / 32
Encoding the subspace: 16 / 32
Encoding the subspace: 17 / 32
Encoding the subspace: 18 / 32
Encoding the subspace: 19 / 32
Encoding the subspace: 20 / 32
Encoding the subspace: 21 / 32
Encoding the subspace: 22 / 32
Encoding the subspace: 23 / 32
Encoding the subspace: 24 / 32
Encoding the subspace: 25 / 32
Encoding the subspace: 26 / 32
Encoding the subspace: 27 / 32
Encoding the subspace: 28 / 32
Encoding the subspace: 29 / 32
Encoding the subspace: 30 / 32
Encoding the subspace: 31 / 32
1000000 new vectors are added.
Total number of codes is 1000000
The number of vectors used for training of coarse centers: 100000
Start to run PQk-means
Iteration start: 0 / 5
find_nn finished. Error: 74103.8
find_nn_time,111
find_nn+update_center_time,215
Iteration start: 1 / 5
find_nn finished. Error: 55027.4
find_nn_time,72
find_nn+update_center_time,178
Iteration start: 2 / 5
find_nn finished. Error: 53797.5
find_nn_time,64
find_nn+update_center_time,171
Iteration start: 3 / 5
find_nn finished. Error: 53316.5
find_nn_time,59
find_nn+update_center_time,171
Iteration start: 4 / 5
find_nn finished. Error: 53058.2
find_nn_time,58
find_nn+update_center_time,58
Start to update posting lists
===== Threshold selection ====
L: [1000, 2000, 4000, 8000, 16000]
threshold: [86016, 151552, 270336, 507904, 984375]
polyfit coeff: [   59.69463306 29929.875     ]
resultant func:  
59.69 x + 2.993e+04
rii get  46456  postive res from  100000  results, recall@ 10 : 0.46456
recall dist(10\% per bucket):  [10.  0.  0.  0.  0.  0.  0.  0.  0.  0.]
